<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Lincity-ng-commit] r1193 - in trunk: data/gui src/lincity-ng
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/lincity-ng-commit/2007-April/index.html" >
   <LINK REL="made" HREF="mailto:lincity-ng-commit%40lists.berlios.de?Subject=Re%3A%20%5BLincity-ng-commit%5D%20r1193%20-%20in%20trunk%3A%20data/gui%20src/lincity-ng&In-Reply-To=%3C200704201246.l3KCk49R022795%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000121.html">
   <LINK REL="Next"  HREF="000123.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Lincity-ng-commit] r1193 - in trunk: data/gui src/lincity-ng</H1>
    <B>alainb at BerliOS</B> 
    <A HREF="mailto:lincity-ng-commit%40lists.berlios.de?Subject=Re%3A%20%5BLincity-ng-commit%5D%20r1193%20-%20in%20trunk%3A%20data/gui%20src/lincity-ng&In-Reply-To=%3C200704201246.l3KCk49R022795%40sheep.berlios.de%3E"
       TITLE="[Lincity-ng-commit] r1193 - in trunk: data/gui src/lincity-ng">alainb at mail.berlios.de
       </A><BR>
    <I>Fri Apr 20 14:46:04 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000121.html">[Lincity-ng-commit] r1192 - branches/waterwell/src/lincity-ng
</A></li>
        <LI>Next message: <A HREF="000123.html">[Lincity-ng-commit] r1194 - trunk/src/lincity/modules
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#122">[ date ]</a>
              <a href="thread.html#122">[ thread ]</a>
              <a href="subject.html#122">[ subject ]</a>
              <a href="author.html#122">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: alainb
Date: 2007-04-20 14:46:03 +0200 (Fri, 20 Apr 2007)
New Revision: 1193

Modified:
   trunk/data/gui/loadgame.xml
   trunk/data/gui/mainmenu.xml
   trunk/data/gui/savegame.xml
   trunk/src/lincity-ng/MainMenu.cpp
Log:
more informative filenames for saved games

Modified: trunk/data/gui/loadgame.xml
===================================================================
--- trunk/data/gui/loadgame.xml	2007-04-19 21:29:06 UTC (rev 1192)
+++ trunk/data/gui/loadgame.xml	2007-04-20 12:46:03 UTC (rev 1193)
@@ -22,7 +22,7 @@
 			--&gt;
 			&lt;cell row=&quot;2&quot; col=&quot;2&quot;&gt;
 			&lt;CheckButton name=&quot;File0&quot;&gt;
-				&lt;text-caption style=&quot;button&quot;&gt;Savegame 123456789&lt;/text-caption&gt;
+				&lt;text-caption style=&quot;boxtext&quot;&gt;Savegame 123456789012345678901234567890&lt;/text-caption&gt;
 				&lt;image src=&quot;images/gui/buttons/savebutton.png&quot;/&gt;
 				&lt;image-hover src=&quot;images/gui/buttons/savebutton-hover.png&quot;/&gt;
 				&lt;image-clicked src=&quot;images/gui/buttons/savebutton-clicked.png&quot;/&gt;
@@ -31,7 +31,7 @@
 			&lt;/cell&gt;
 			&lt;cell row=&quot;3&quot; col=&quot;2&quot;&gt;
 			&lt;CheckButton name=&quot;File1&quot;&gt;
-				&lt;text-caption style=&quot;button&quot;&gt;Savegame 123456789&lt;/text-caption&gt;
+				&lt;text-caption style=&quot;boxtext&quot;&gt;Savegame 123456789012345678901234567890&lt;/text-caption&gt;
 				&lt;image src=&quot;images/gui/buttons/savebutton.png&quot;/&gt;
 				&lt;image-hover src=&quot;images/gui/buttons/savebutton-hover.png&quot;/&gt;
 				&lt;image-clicked src=&quot;images/gui/buttons/savebutton-clicked.png&quot;/&gt;
@@ -40,7 +40,7 @@
 			&lt;/cell&gt;
 			&lt;cell row=&quot;4&quot; col=&quot;2&quot;&gt;
 			&lt;CheckButton name=&quot;File2&quot;&gt;
-				&lt;text-caption style=&quot;button&quot;&gt;Savegame 123456789&lt;/text-caption&gt;
+				&lt;text-caption style=&quot;boxtext&quot;&gt;Savegame 123456789012345678901234567890&lt;/text-caption&gt;
 				&lt;image src=&quot;images/gui/buttons/savebutton.png&quot;/&gt;
 				&lt;image-hover src=&quot;images/gui/buttons/savebutton-hover.png&quot;/&gt;
 				&lt;image-clicked src=&quot;images/gui/buttons/savebutton-clicked.png&quot;/&gt;
@@ -49,7 +49,7 @@
 			&lt;/cell&gt;
 			&lt;cell row=&quot;5&quot; col=&quot;2&quot;&gt;
 			&lt;CheckButton name=&quot;File3&quot;&gt;
-			&lt;text-caption style=&quot;button&quot;&gt;Savegame 123456789&lt;/text-caption&gt;
+				&lt;text-caption style=&quot;boxtext&quot;&gt;Savegame 123456789012345678901234567890&lt;/text-caption&gt;
 				&lt;image src=&quot;images/gui/buttons/savebutton.png&quot;/&gt;
 				&lt;image-hover src=&quot;images/gui/buttons/savebutton-hover.png&quot;/&gt;
 				&lt;image-clicked src=&quot;images/gui/buttons/savebutton-clicked.png&quot;/&gt;
@@ -58,7 +58,7 @@
 			&lt;/cell&gt;
 			&lt;cell row=&quot;6&quot; col=&quot;2&quot;&gt;
 			&lt;CheckButton name=&quot;File4&quot;&gt;
-				&lt;text-caption style=&quot;button&quot;&gt;Savegame 123456789&lt;/text-caption&gt;
+				&lt;text-caption style=&quot;boxtext&quot;&gt;Savegame 123456789012345678901234567890&lt;/text-caption&gt;
 				&lt;image src=&quot;images/gui/buttons/savebutton.png&quot;/&gt;
 				&lt;image-hover src=&quot;images/gui/buttons/savebutton-hover.png&quot;/&gt;
 				&lt;image-clicked src=&quot;images/gui/buttons/savebutton-clicked.png&quot;/&gt;
@@ -67,7 +67,7 @@
 			&lt;/cell&gt;
 			&lt;cell row=&quot;7&quot; col=&quot;2&quot;&gt;
 			&lt;CheckButton name=&quot;File5&quot;&gt;
-				&lt;text-caption style=&quot;button&quot;&gt;Savegame 123456789&lt;/text-caption&gt;
+				&lt;text-caption style=&quot;boxtext&quot;&gt;Savegame 123456789012345678901234567890&lt;/text-caption&gt;
 				&lt;image src=&quot;images/gui/buttons/savebutton.png&quot;/&gt;
 				&lt;image-hover src=&quot;images/gui/buttons/savebutton-hover.png&quot;/&gt;
 				&lt;image-clicked src=&quot;images/gui/buttons/savebutton-clicked.png&quot;/&gt;

Modified: trunk/data/gui/mainmenu.xml
===================================================================
--- trunk/data/gui/mainmenu.xml	2007-04-19 21:29:06 UTC (rev 1192)
+++ trunk/data/gui/mainmenu.xml	2007-04-20 12:46:03 UTC (rev 1193)
@@ -7,6 +7,7 @@
 	&lt;!-- Menus --&gt;
 	&lt;DefineStyle name=&quot;menutitle&quot; color=&quot;black&quot; font-size=&quot;50&quot; halign=&quot;center&quot;/&gt;
 	&lt;DefineStyle name=&quot;listtitle&quot; color=&quot;black&quot; font-size=&quot;30&quot;/&gt;		
+	&lt;DefineStyle name=&quot;boxtext&quot; color=&quot;blue&quot; font-size=&quot;16&quot; margin-left=&quot;10&quot;/&gt;
 	&lt;DefineStyle name=&quot;button&quot; color=&quot;blue&quot; font-size=&quot;30&quot; margin-left=&quot;20&quot; margin-right=&quot;20&quot;/&gt;
 	&lt;DefineStyle name=&quot;dialogbutton&quot; color=&quot;white&quot; font-size=&quot;20&quot; margin-left=&quot;20&quot; margin-right=&quot;20&quot;/&gt;
 	&lt;DefineStyle name=&quot;button-hover&quot; color=&quot;red&quot; font-size=&quot;30&quot; margin-left=&quot;20&quot; margin-right=&quot;20&quot;/&gt;

Modified: trunk/data/gui/savegame.xml
===================================================================
--- trunk/data/gui/savegame.xml	2007-04-19 21:29:06 UTC (rev 1192)
+++ trunk/data/gui/savegame.xml	2007-04-20 12:46:03 UTC (rev 1193)
@@ -24,7 +24,7 @@
 			--&gt;
 			&lt;cell row=&quot;2&quot; col=&quot;2&quot;&gt;
 			&lt;CheckButton name=&quot;File0&quot;&gt;
-				&lt;text-caption style=&quot;button&quot;&gt;Savegame 123456789&lt;/text-caption&gt;
+				&lt;text-caption style=&quot;boxtext&quot;&gt;Savegame 123456789012345678901234567890&lt;/text-caption&gt;
 				&lt;image src=&quot;images/gui/buttons/savebutton.png&quot;/&gt;
 				&lt;image-hover src=&quot;images/gui/buttons/savebutton-hover.png&quot;/&gt;
 				&lt;image-clicked src=&quot;images/gui/buttons/savebutton-clicked.png&quot;/&gt;
@@ -33,7 +33,7 @@
 			&lt;/cell&gt;
 			&lt;cell row=&quot;3&quot; col=&quot;2&quot;&gt;
 			&lt;CheckButton name=&quot;File1&quot;&gt;
-				&lt;text-caption style=&quot;button&quot;&gt;Savegame 123456789&lt;/text-caption&gt;
+				&lt;text-caption style=&quot;boxtext&quot;&gt;Savegame 123456789012345678901234567890&lt;/text-caption&gt;
 				&lt;image src=&quot;images/gui/buttons/savebutton.png&quot;/&gt;
 				&lt;image-hover src=&quot;images/gui/buttons/savebutton-hover.png&quot;/&gt;
 				&lt;image-clicked src=&quot;images/gui/buttons/savebutton-clicked.png&quot;/&gt;
@@ -42,7 +42,7 @@
 			&lt;/cell&gt;
 			&lt;cell row=&quot;4&quot; col=&quot;2&quot;&gt;
 			&lt;CheckButton name=&quot;File2&quot;&gt;
-				&lt;text-caption style=&quot;button&quot;&gt;Savegame 123456789&lt;/text-caption&gt;
+				&lt;text-caption style=&quot;boxtext&quot;&gt;Savegame 123456789012345678901234567890&lt;/text-caption&gt;
 				&lt;image src=&quot;images/gui/buttons/savebutton.png&quot;/&gt;
 				&lt;image-hover src=&quot;images/gui/buttons/savebutton-hover.png&quot;/&gt;
 				&lt;image-clicked src=&quot;images/gui/buttons/savebutton-clicked.png&quot;/&gt;
@@ -51,7 +51,7 @@
 			&lt;/cell&gt;
 			&lt;cell row=&quot;5&quot; col=&quot;2&quot;&gt;
 			&lt;CheckButton name=&quot;File3&quot;&gt;
-			&lt;text-caption style=&quot;button&quot;&gt;Savegame 123456789&lt;/text-caption&gt;
+			&lt;text-caption style=&quot;boxtext&quot;&gt;Savegame 123456789012345678901234567890&lt;/text-caption&gt;
 				&lt;image src=&quot;images/gui/buttons/savebutton.png&quot;/&gt;
 				&lt;image-hover src=&quot;images/gui/buttons/savebutton-hover.png&quot;/&gt;
 				&lt;image-clicked src=&quot;images/gui/buttons/savebutton-clicked.png&quot;/&gt;
@@ -60,7 +60,7 @@
 			&lt;/cell&gt;
 			&lt;cell row=&quot;6&quot; col=&quot;2&quot;&gt;
 			&lt;CheckButton name=&quot;File4&quot;&gt;
-				&lt;text-caption style=&quot;button&quot;&gt;Savegame 123456789&lt;/text-caption&gt;
+				&lt;text-caption style=&quot;boxtext&quot;&gt;Savegame 123456789012345678901234567890&lt;/text-caption&gt;
 				&lt;image src=&quot;images/gui/buttons/savebutton.png&quot;/&gt;
 				&lt;image-hover src=&quot;images/gui/buttons/savebutton-hover.png&quot;/&gt;
 				&lt;image-clicked src=&quot;images/gui/buttons/savebutton-clicked.png&quot;/&gt;
@@ -69,7 +69,7 @@
 			&lt;/cell&gt;
 			&lt;cell row=&quot;7&quot; col=&quot;2&quot;&gt;
 			&lt;CheckButton name=&quot;File5&quot;&gt;
-				&lt;text-caption style=&quot;button&quot;&gt;Savegame 123456789&lt;/text-caption&gt;
+				&lt;text-caption style=&quot;boxtext&quot;&gt;Savegame 123456789012345678901234567890&lt;/text-caption&gt;
 				&lt;image src=&quot;images/gui/buttons/savebutton.png&quot;/&gt;
 				&lt;image-hover src=&quot;images/gui/buttons/savebutton-hover.png&quot;/&gt;
 				&lt;image-clicked src=&quot;images/gui/buttons/savebutton-clicked.png&quot;/&gt;

Modified: trunk/src/lincity-ng/MainMenu.cpp
===================================================================
--- trunk/src/lincity-ng/MainMenu.cpp	2007-04-19 21:29:06 UTC (rev 1192)
+++ trunk/src/lincity-ng/MainMenu.cpp	2007-04-20 12:46:03 UTC (rev 1193)
@@ -672,11 +672,37 @@
         std::cout &lt;&lt; &quot;remove( &quot; &lt;&lt; mFilename &lt;&lt; &quot;)\n&quot;;
         remove( mFilename.c_str() );
     }
+    /* Build filename */
     std::stringstream newStart;
-    newStart &lt;&lt; slotNr &lt;&lt; &quot;_&quot; &lt;&lt; (1900 + datetime-&gt;tm_year) &lt;&lt; &quot;-&quot;;
+    newStart &lt;&lt; slotNr &lt;&lt; &quot;_&quot;;
     newStart &lt;&lt; std::setfill('0') &lt;&lt; std::setw(2);
-    newStart &lt;&lt; datetime-&gt;tm_mon+1 &lt;&lt; &quot;-&quot; &lt;&lt; datetime-&gt;tm_mday &lt;&lt; &quot;_&quot;;
-    newStart &lt;&lt; datetime-&gt;tm_hour &lt;&lt; &quot;_&quot; &lt;&lt; datetime-&gt;tm_min;
+    newStart &lt;&lt; ( -100 + datetime-&gt;tm_year);
+    newStart &lt;&lt; std::setfill('0') &lt;&lt; std::setw(2);
+    newStart &lt;&lt; datetime-&gt;tm_mon+1 &lt;&lt; datetime-&gt;tm_mday &lt;&lt; &quot;-&quot;;
+    newStart &lt;&lt; std::setfill('0') &lt;&lt; std::setw(2);
+    newStart &lt;&lt; datetime-&gt;tm_hour;
+    newStart &lt;&lt; std::setfill('0') &lt;&lt; std::setw(2);
+    newStart &lt;&lt; datetime-&gt;tm_min;
+    newStart &lt;&lt; &quot;_Tech&quot;;
+    newStart &lt;&lt; std::setfill('0') &lt;&lt; std::setw(3);
+    newStart &lt;&lt; tech_level/10000;
+    newStart &lt;&lt; &quot;_Cash&quot;;
+    if (total_money &gt;= 0)
+    	newStart &lt;&lt; &quot;+&quot;;
+    else
+    	newStart &lt;&lt; &quot;-&quot;;
+    newStart &lt;&lt; std::setfill('0') &lt;&lt; std::setw(3);
+    int money = abs(total_money);
+    if (money &gt; 1000000) {
+	newStart &lt;&lt; money/1000000 &lt;&lt; &quot;M&quot;;  
+    } else  if(money &gt; 1000){
+	newStart &lt;&lt; money/1000 &lt;&lt; &quot;K&quot;; 
+    } else {
+	newStart &lt;&lt; money/1 &lt;&lt; &quot;_&quot;;
+    }
+    newStart &lt;&lt; &quot;_P&quot;;
+    newStart &lt;&lt; std::setfill('0') &lt;&lt; std::setw(5);
+    newStart &lt;&lt; housed_population + people_pool;
     std::string newFilename( newStart.str() ); 
     saveCityNG( newFilename );
     fillLoadMenu( true );


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000121.html">[Lincity-ng-commit] r1192 - branches/waterwell/src/lincity-ng
</A></li>
	<LI>Next message: <A HREF="000123.html">[Lincity-ng-commit] r1194 - trunk/src/lincity/modules
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#122">[ date ]</a>
              <a href="thread.html#122">[ thread ]</a>
              <a href="subject.html#122">[ subject ]</a>
              <a href="author.html#122">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/lincity-ng-commit">More information about the Lincity-ng-commit
mailing list</a><br>
</body></html>
