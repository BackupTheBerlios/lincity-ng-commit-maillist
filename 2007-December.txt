From alainb at mail.berlios.de  Sat Dec  1 14:36:56 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sat, 1 Dec 2007 14:36:56 +0100
Subject: [Lincity-ng-commit] r1292 - in trunk: . src/lincity
	src/lincity/modules
Message-ID: <200712011336.lB1DauQa024831@sheep.berlios.de>

Author: alainb
Date: 2007-12-01 14:36:55 +0100 (Sat, 01 Dec 2007)
New Revision: 1292

Modified:
   trunk/Bugs-beta
   trunk/src/lincity/engine.cpp
   trunk/src/lincity/modules/residence.cpp
Log:
fix tiny bug in display of starvation minimap

Modified: trunk/Bugs-beta
===================================================================
--- trunk/Bugs-beta	2007-11-30 00:21:54 UTC (rev 1291)
+++ trunk/Bugs-beta	2007-12-01 13:36:55 UTC (rev 1292)
@@ -10,5 +10,3 @@
 * bug of trunk = (re)initialisation of engine and UI is not enough. (max tech level...)
 
 * cursor is still blue even when we try to build a waterwell on 4 desert tiles. It Should become red
-
-* Starvation in housing is not shown when there is water but no food

Modified: trunk/src/lincity/engine.cpp
===================================================================
--- trunk/src/lincity/engine.cpp	2007-11-30 00:21:54 UTC (rev 1291)
+++ trunk/src/lincity/engine.cpp	2007-12-01 13:36:55 UTC (rev 1292)
@@ -121,6 +121,8 @@
                     ("ERROR: group does not exist. This should not happen! Please consider filling a bug report to lincity-ng team, with the saved game and what you did :-) "));
         return -1000;
     }
+    if (GROUP_IS_RESIDENCE(group))
+        group=GROUP_RESIDENCE_LL;
 
     size = main_groups[group].size;
 
@@ -131,7 +133,11 @@
     }
 
     switch (group) {
-    case GROUP_ORGANIC_FARM:
+    case GROUP_RESIDENCE_LL:
+        /* all residences are treated. local variable 'group' is redefined to do so.*/
+        /* int_2 is date of last starvation. Needed for correct display */
+        MP_INFO(x, y).int_2 = total_time;
+        break;   case GROUP_ORGANIC_FARM:
         MP_INFO(x, y).int_1 = tech_level;
         break;
     case GROUP_TRACK:
@@ -269,6 +275,7 @@
                 ok_dial_box("warning.mes", BAD, _("You can't build a park here: it is a desert, parks need water"));
                 return -8;
             }
+        break;
 
     }                           /* end case */
     last_warning_message_group = 0;

Modified: trunk/src/lincity/modules/residence.cpp
===================================================================
--- trunk/src/lincity/modules/residence.cpp	2007-11-30 00:21:54 UTC (rev 1291)
+++ trunk/src/lincity/modules/residence.cpp	2007-12-01 13:36:55 UTC (rev 1292)
@@ -169,12 +169,17 @@
         if ((MP_INFO(x, y).flags & FLAG_HAD_POWER) != 0)
             bad += 50;
     }
-    /* now get fed *//* AL1: should be done earlier, before check for starvation */
-    if (get_food(x, y, p) != 0) {
-        MP_INFO(x, y).flags |= FLAG_FED;
+    /* now get fed */
+    /* AL1: could be done earlier, before check for starvation */
+    /*      this will be taken into account at next turn */
+    if ( get_food(x, y, p) != 0 ) {
+        if (p>0)
+            MP_INFO(x, y).flags |= FLAG_FED;
         good += 10;
-    } else
+    } else {
         MP_INFO(x, y).flags &= (0xffffffff - FLAG_FED);
+        //MP_INFO(x,y).int_2 = total_time;
+    }
 
     /* now supply jobs and buy goods if employed */
     if (MP_INFO(x, y).int_1 > 0)
@@ -229,7 +234,7 @@
             p--;
             people_pool++;
         }
-    } else if (people_pool > 0 && (MP_INFO(x, y).flags & FLAG_FED) != 0 /* No newcomer gets in when there is starvation */
+    } else if (people_pool > 0 
                && r > ((good + bad) * (RESIDENCE_PPM - 1) + bad)) {     /* r > (rmax - good) */
         p++;
         people_pool--;



From alainb at mail.berlios.de  Sat Dec  1 15:45:53 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sat, 1 Dec 2007 15:45:53 +0100
Subject: [Lincity-ng-commit] r1293 - in trunk: . src/lincity-ng
Message-ID: <200712011445.lB1EjrXQ032143@sheep.berlios.de>

Author: alainb
Date: 2007-12-01 15:45:53 +0100 (Sat, 01 Dec 2007)
New Revision: 1293

Modified:
   trunk/Bugs-beta
   trunk/src/lincity-ng/GameView.cpp
Log:
red cursor when trying to build a waterwell in desert

Modified: trunk/Bugs-beta
===================================================================
--- trunk/Bugs-beta	2007-12-01 13:36:55 UTC (rev 1292)
+++ trunk/Bugs-beta	2007-12-01 14:45:53 UTC (rev 1293)
@@ -9,4 +9,3 @@
 
 * bug of trunk = (re)initialisation of engine and UI is not enough. (max tech level...)
 
-* cursor is still blue even when we try to build a waterwell on 4 desert tiles. It Should become red

Modified: trunk/src/lincity-ng/GameView.cpp
===================================================================
--- trunk/src/lincity-ng/GameView.cpp	2007-12-01 13:36:55 UTC (rev 1292)
+++ trunk/src/lincity-ng/GameView.cpp	2007-12-01 14:45:53 UTC (rev 1293)
@@ -1365,6 +1365,7 @@
         Color alphared( 255, 0, 0, 128 );
         painter.setFillColor( alphablue );
         //check if building is allowed here, if not use Red Cursor
+        // FIXME: AL1. These tests should go in engine.cpp with place_item, where they are done again.
         int x = (int) tile.x;
         int y = (int) tile.y;
         MapPoint seCorner( x + cursorSize -1, y + cursorSize -1 );
@@ -1382,7 +1383,6 @@
             }
         }
         //special conditions for some buildings
-        //
         //The Harbour needs a River on the East side.
         if( selected_module_type == CST_EX_PORT ){
             x = (int) tile.x + cursorSize;
@@ -1393,7 +1393,16 @@
                 }
             }
         }
-            
+        //Waterwell needs ... water :-)
+        if (selected_module_type == CST_WATERWELL) {
+            int has_ugw = 0;
+            for (int i = 0; i < cursorSize; i++)
+                for (int j = 0; j < cursorSize; j++)
+                    has_ugw = has_ugw | HAS_UGWATER(tile.x + i, tile.y + j);
+            if (!has_ugw)
+                painter.setFillColor( alphared );
+        }
+
         Rect2D tilerect( 0, 0, tileWidth * cursorSize, tileHeight * cursorSize );
         tileOnScreenPoint.x = tileOnScreenPoint.x - (tileWidth * cursorSize / 2);
         tileOnScreenPoint.y -= tileHeight; 



From alainb at mail.berlios.de  Sat Dec  1 17:02:47 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sat, 1 Dec 2007 17:02:47 +0100
Subject: [Lincity-ng-commit] r1294 - in trunk/src: lincity lincity/modules
	lincity/unused lincity-ng oldgui
Message-ID: <200712011602.lB1G2lXE006397@sheep.berlios.de>

Author: alainb
Date: 2007-12-01 17:02:45 +0100 (Sat, 01 Dec 2007)
New Revision: 1294

Added:
   trunk/src/lincity/unused/
   trunk/src/lincity/unused/lc_common.h
   trunk/src/oldgui/getopt.cpp
   trunk/src/oldgui/getopt.h
   trunk/src/oldgui/lcintl.h
Removed:
   trunk/src/lincity/getopt.cpp
   trunk/src/lincity/getopt.h
   trunk/src/lincity/lc_common.h
   trunk/src/lincity/lcintl.h
Modified:
   trunk/src/lincity-ng/MapEdit.cpp
   trunk/src/lincity-ng/MpsInterface.cpp
   trunk/src/lincity/engine.cpp
   trunk/src/lincity/fileutil.cpp
   trunk/src/lincity/lclib.cpp
   trunk/src/lincity/ldsvguts.cpp
   trunk/src/lincity/lintypes.cpp
   trunk/src/lincity/modules/modules.h
   trunk/src/lincity/power.cpp
   trunk/src/lincity/stats.cpp
   trunk/src/lincity/transport.cpp
Log:
(re)move / update headers in lincity/.

Modified: trunk/src/lincity/engine.cpp
===================================================================
--- trunk/src/lincity/engine.cpp	2007-12-01 14:45:53 UTC (rev 1293)
+++ trunk/src/lincity/engine.cpp	2007-12-01 16:02:45 UTC (rev 1294)
@@ -6,20 +6,15 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <time.h>
-//#include "common.h"
 #include "lctypes.h"
 #include "lin-city.h"
 #include "engine.h"
 #include "engglobs.h"
-//#include "cliglobs.h"
 #include "simulate.h"
-#include "lcintl.h"
+#include "tinygettext/gettext.hpp"
 #include "power.h"
-//#include "mouse.h"
-//#include "module_buttons.h"
 #include "gui_interface/pbar_interface.h"
 #include "stats.h"
-//#include "screen.h"
 #include "gui_interface/dialbox_interface.h"
 #include "gui_interface/mps.h"
 #include "gui_interface/screen_interface.h"

Modified: trunk/src/lincity/fileutil.cpp
===================================================================
--- trunk/src/lincity/fileutil.cpp	2007-12-01 14:45:53 UTC (rev 1293)
+++ trunk/src/lincity/fileutil.cpp	2007-12-01 16:02:45 UTC (rev 1294)
@@ -7,11 +7,10 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <stdarg.h>             /* XXX: GCS FIX: What does configure need to know? */
-#include "lcintl.h"
 #include <string.h>
-//#include "ldsvgui.h"
 #include "shrglobs.h"
 #include "gui_interface/screen_interface.h"
+#include "tinygettext/gettext.hpp"
 
 /* XXX: Where are SVGA specific includes? */
 

Deleted: trunk/src/lincity/getopt.cpp
===================================================================
--- trunk/src/lincity/getopt.cpp	2007-12-01 14:45:53 UTC (rev 1293)
+++ trunk/src/lincity/getopt.cpp	2007-12-01 16:02:45 UTC (rev 1294)
@@ -1,170 +0,0 @@
-/***************************************************************************** 
- * 
- *  MODULE NAME : GETOPT.C 
- * 
- *  COPYRIGHTS: 
- *             This module contains code made available by IBM 
- *             Corporation on an AS IS basis.  Any one receiving the 
- *             module is considered to be licensed under IBM copyrights 
- *             to use the IBM-provided source code in any way he or she 
- *             deems fit, including copying it, compiling it, modifying 
- *             it, and redistributing it, with or without 
- *             modifications.  No license under any IBM patents or 
- *             patent applications is to be implied from this copyright 
- *             license. 
- * 
- *             A user of the module should understand that IBM cannot 
- *             provide technical support for the module and will not be 
- *             responsible for any consequences of use of the program. 
- * 
- *             Any notices, including this one, are not to be removed 
- *             from the module without the prior written consent of 
- *             IBM. 
- * 
- *  AUTHOR:   Original author: 
- *                 G. R. Blair (BOBBLAIR at AUSVM1) 
- *                 Internet: bobblair at bobblair.austin.ibm.com 
- * 
- *            Extensively revised by: 
- *                 John Q. Walker II, Ph.D. (JOHHQ at RALVM6) 
- *                 Internet: johnq at ralvm6.vnet.ibm.com 
- * 
- *****************************************************************************/
-
-/****************************************************************************** 
- * getopt() 
- * 
- * The getopt() function is a command line parser.  It returns the next 
- * option character in argv that matches an option character in opstring. 
- * 
- * The argv argument points to an array of argc+1 elements containing argc 
- * pointers to character strings followed by a null pointer. 
- * 
- * The opstring argument points to a string of option characters; if an 
- * option character is followed by a colon, the option is expected to have 
- * an argument that may or may not be separated from it by white space. 
- * The external variable optarg is set to point to the start of the option 
- * argument on return from getopt(). 
- * 
- * The getopt() function places in optind the argv index of the next argument 
- * to be processed.  The system initializes the external variable optind to 
- * 1 before the first call to getopt(). 
- * 
- * When all options have been processed (that is, up to the first nonoption 
- * argument), getopt() returns EOF.  The special option "--" may be used to 
- * delimit the end of the options; EOF will be returned, and "--" will be 
- * skipped. 
- * 
- * The getopt() function returns a question mark (?) when it encounters an 
- * option character not included in opstring.  This error message can be 
- * disabled by setting opterr to zero.  Otherwise, it returns the option 
- * character that was detected. 
- * 
- * If the special option "--" is detected, or all options have been 
- * processed, EOF is returned. 
- * 
- * Options are marked by either a minus sign (-) or a slash (/). 
- * 
- * No errors are defined. 
- *****************************************************************************/
-
-#include <stdio.h>              /* for EOF */
-#include <string.h>             /* for strchr() */
-
-/* static (global) variables that are specified as exported by getopt() */
-char *optarg = NULL;            /* pointer to the start of the option argument  */
-int optind = 1;                 /* number of the next argv[] to be evaluated    */
-int opterr = 1;                 /* non-zero if a question mark should be returned 
-                                   when a non-valid option character is detected */
-
-/* handle possible future character set concerns by putting this in a macro */
-#define _next_char(string)  (char)(*(string+1))
-
-int getopt(int argc, char *argv[], char *opstring)
-{
-    static char *pIndexPosition = NULL; /* place inside current argv string */
-    char *pArgString = NULL;    /* where to start from next */
-    char *pOptString;           /* the string in our program */
-
-    if (pIndexPosition != NULL) {
-        /* we last left off inside an argv string */
-        if (*(++pIndexPosition)) {
-            /* there is more to come in the most recent argv */
-            pArgString = pIndexPosition;
-        }
-    }
-
-    if (pArgString == NULL) {
-        /* we didn't leave off in the middle of an argv string */
-        if (optind >= argc) {
-            /* more command-line arguments than the argument count */
-            pIndexPosition = NULL;      /* not in the middle of anything */
-            return EOF;         /* used up all command-line arguments */
-        }
-
-        /*--------------------------------------------------------------------- 
-         * If the next argv[] is not an option, there can be no more options. 
-         *-------------------------------------------------------------------*/
-        pArgString = argv[optind++];    /* set this to the next argument ptr */
-
-        if (('/' != *pArgString) &&     /* doesn't start with a slash or a dash? */
-            ('-' != *pArgString)) {
-            --optind;           /* point to current arg once we're done */
-            optarg = NULL;      /* no argument follows the option */
-            pIndexPosition = NULL;      /* not in the middle of anything */
-            return EOF;         /* used up all the command-line flags */
-        }
-
-        /* check for special end-of-flags markers */
-        if ((strcmp(pArgString, "-") == 0) || (strcmp(pArgString, "--") == 0)) {
-            optarg = NULL;      /* no argument follows the option */
-            pIndexPosition = NULL;      /* not in the middle of anything */
-            return EOF;         /* encountered the special flag */
-        }
-
-        pArgString++;           /* look past the / or - */
-    }
-
-    if (':' == *pArgString) {   /* is it a colon? */
-        /*--------------------------------------------------------------------- 
-         * Rare case: if opterr is non-zero, return a question mark; 
-         * otherwise, just return the colon we're on. 
-         *-------------------------------------------------------------------*/
-        return (opterr ? (int)'?' : (int)':');
-    } else if ((pOptString = strchr(opstring, *pArgString)) == 0) {
-        /*--------------------------------------------------------------------- 
-         * The letter on the command-line wasn't any good. 
-         *-------------------------------------------------------------------*/
-        optarg = NULL;          /* no argument follows the option */
-        pIndexPosition = NULL;  /* not in the middle of anything */
-        return (opterr ? (int)'?' : (int)*pArgString);
-    } else {
-        /*--------------------------------------------------------------------- 
-         * The letter on the command-line matches one we expect to see 
-         *-------------------------------------------------------------------*/
-        if (':' == _next_char(pOptString)) {    /* is the next letter a colon? */
-            /* It is a colon.  Look for an argument string. */
-            if ('\0' != _next_char(pArgString)) {       /* argument in this argv? */
-                optarg = &pArgString[1];        /* Yes, it is */
-            } else {
-                /*------------------------------------------------------------- 
-                 * The argument string must be in the next argv. 
-                 * But, what if there is none (bad input from the user)? 
-                 * In that case, return the letter, and optarg as NULL. 
-                 *-----------------------------------------------------------*/
-                if (optind < argc)
-                    optarg = argv[optind++];
-                else {
-                    optarg = NULL;
-                    return (opterr ? (int)'?' : (int)*pArgString);
-                }
-            }
-            pIndexPosition = NULL;      /* not in the middle of anything */
-        } else {
-            /* it's not a colon, so just return the letter */
-            optarg = NULL;      /* no argument follows the option */
-            pIndexPosition = pArgString;        /* point to the letter we're on */
-        }
-        return (int)*pArgString;        /* return the letter that matched */
-    }
-}

Deleted: trunk/src/lincity/getopt.h
===================================================================
--- trunk/src/lincity/getopt.h	2007-12-01 14:45:53 UTC (rev 1293)
+++ trunk/src/lincity/getopt.h	2007-12-01 16:02:45 UTC (rev 1294)
@@ -1,13 +0,0 @@
-/* ---------------------------------------------------------------------- *
- * getopt.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
-
-#ifndef __getopt_h__
-#define __getopt_h__
-
-int getopt(int argc, char *argv[], char *opstring);
-
-#endif /* __getopt_h__ */

Deleted: trunk/src/lincity/lc_common.h
===================================================================
--- trunk/src/lincity/lc_common.h	2007-12-01 14:45:53 UTC (rev 1293)
+++ trunk/src/lincity/lc_common.h	2007-12-01 16:02:45 UTC (rev 1294)
@@ -1,34 +0,0 @@
-/* ---------------------------------------------------------------------- *
- * common.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * ---------------------------------------------------------------------- */
-#warning "Test"
-#ifndef __common_h__
-#define __common_h__
-
-#warning "Test"
-
-#ifdef LC_X11
-#warning X11
-#include <X11/Xlib.h>
-#include <X11/Xatom.h>
-#include <X11/Xutil.h>
-#include "lin-city.h"
-#include "lcx11.h"
-
-#elif defined WIN32
-#include <windows.h>
-#include "lcwin32.h"
-
-#elif defined SVGALIB
-#include <vga.h>
-#include <vgagl.h>
-#include <vgamouse.h>
-#include "lcsvga.h"
-
-#elif defined SDL
-#include "lcsdl.h"
-#endif
-
-#endif /* __common_h__ */

Deleted: trunk/src/lincity/lcintl.h
===================================================================
--- trunk/src/lincity/lcintl.h	2007-12-01 14:45:53 UTC (rev 1293)
+++ trunk/src/lincity/lcintl.h	2007-12-01 16:02:45 UTC (rev 1294)
@@ -1,11 +0,0 @@
-/* ---------------------------------------------------------------------- *
- * lcintl.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * ---------------------------------------------------------------------- */
-#ifndef __lcintl_h__
-#define __lcintl_h__
-
-#include "tinygettext/gettext.hpp"
-
-#endif

Modified: trunk/src/lincity/lclib.cpp
===================================================================
--- trunk/src/lincity/lclib.cpp	2007-12-01 14:45:53 UTC (rev 1293)
+++ trunk/src/lincity/lclib.cpp	2007-12-01 16:02:45 UTC (rev 1294)
@@ -9,9 +9,8 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include "lcstring.h"
-//#include "cliglobs.h"
-#include "lcintl.h"
 #include "lin-city.h"
+#include "tinygettext/gettext.hpp"
 
 char *months[] = { N_("Jan"), N_("Feb"), N_("Mar"), N_("Apr"),
     N_("May"), N_("Jun"), N_("Jul"), N_("Aug"),

Modified: trunk/src/lincity/ldsvguts.cpp
===================================================================
--- trunk/src/lincity/ldsvguts.cpp	2007-12-01 14:45:53 UTC (rev 1293)
+++ trunk/src/lincity/ldsvguts.cpp	2007-12-01 16:02:45 UTC (rev 1294)
@@ -6,16 +6,13 @@
 
 /* this is for saving */
 
-//#include "lcconfig.h"
 #include <stdio.h>
 #include <stdlib.h>
 #include <zlib.h>
 #include <iostream>
-//#include "lcstring.h"
-#include "lcintl.h"
+#include "tinygettext/gettext.hpp"
 #include "gui_interface/screen_interface.h"
 #include "gui_interface/shared_globals.h"
-//#include "cliglobs.h"
 #include "stats.h"
 
 #include <fcntl.h>

Modified: trunk/src/lincity/lintypes.cpp
===================================================================
--- trunk/src/lincity/lintypes.cpp	2007-12-01 14:45:53 UTC (rev 1293)
+++ trunk/src/lincity/lintypes.cpp	2007-12-01 16:02:45 UTC (rev 1294)
@@ -10,7 +10,7 @@
 #include "lctypes.h"
 #include "shrglobs.h"
 #include "lintypes.h"
-#include "lcintl.h"
+#include "tinygettext/gettext.hpp"
 #include "fileutil.h"
 #include "gui_interface/readpng.h"
 

Modified: trunk/src/lincity/modules/modules.h
===================================================================
--- trunk/src/lincity/modules/modules.h	2007-12-01 14:45:53 UTC (rev 1293)
+++ trunk/src/lincity/modules/modules.h	2007-12-01 16:02:45 UTC (rev 1294)
@@ -8,7 +8,7 @@
 #define __modules_h__
 
 #include "../lctypes.h"
-#include "../lcintl.h"
+#include "tinygettext/gettext.hpp"
 #include "../engglobs.h"
 #include "../engine.h"
 #include "../stats.h"

Modified: trunk/src/lincity/power.cpp
===================================================================
--- trunk/src/lincity/power.cpp	2007-12-01 14:45:53 UTC (rev 1293)
+++ trunk/src/lincity/power.cpp	2007-12-01 16:02:45 UTC (rev 1294)
@@ -8,17 +8,14 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include "lclib.h"
-//#include "common.h"
 #include "lctypes.h"
 #include "lin-city.h"
 #include "engine.h"
 #include "engglobs.h"
-//#include "cliglobs.h"
 #include "simulate.h"
-#include "lcintl.h"
 #include "power.h"
 #include "transport.h"          /* for XY_IS_TRANSPORT */
-
+#include "tinygettext/gettext.hpp"
 #include "gui_interface/dialbox_interface.h"
 
 /* reset per map_power_grid run; how many different grids */

Modified: trunk/src/lincity/stats.cpp
===================================================================
--- trunk/src/lincity/stats.cpp	2007-12-01 14:45:53 UTC (rev 1293)
+++ trunk/src/lincity/stats.cpp	2007-12-01 16:02:45 UTC (rev 1294)
@@ -9,7 +9,6 @@
 #include <stdlib.h>
 
 #include "lin-city.h"
-#include "lctypes.h"
 #include "engglobs.h"
 #include "gui_interface/pbar_interface.h"
 #include "stats.h"

Modified: trunk/src/lincity/transport.cpp
===================================================================
--- trunk/src/lincity/transport.cpp	2007-12-01 14:45:53 UTC (rev 1293)
+++ trunk/src/lincity/transport.cpp	2007-12-01 16:02:45 UTC (rev 1294)
@@ -6,8 +6,6 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <assert.h>
-//#include "common.h"
-#include "lctypes.h"
 #include "lin-city.h"
 #include "transport.h"
 #include "power.h"

Copied: trunk/src/lincity/unused/lc_common.h (from rev 1292, trunk/src/lincity/lc_common.h)

Modified: trunk/src/lincity-ng/MapEdit.cpp
===================================================================
--- trunk/src/lincity-ng/MapEdit.cpp	2007-12-01 14:45:53 UTC (rev 1293)
+++ trunk/src/lincity-ng/MapEdit.cpp	2007-12-01 16:02:45 UTC (rev 1294)
@@ -22,7 +22,7 @@
 #include "gui_interface/mps.h"
 #include "gui_interface/screen_interface.h"
 #include "gui_interface/shared_globals.h"
-#include "lincity/lcintl.h"
+#include "tinygettext/gettext.hpp"
 #include "lincity/engine.h"
 #include "lincity/lin-city.h"
 

Modified: trunk/src/lincity-ng/MpsInterface.cpp
===================================================================
--- trunk/src/lincity-ng/MpsInterface.cpp	2007-12-01 14:45:53 UTC (rev 1293)
+++ trunk/src/lincity-ng/MpsInterface.cpp	2007-12-01 16:02:45 UTC (rev 1294)
@@ -28,7 +28,7 @@
 #include "lincity/stats.h"
 #include "lincity/lclib.h"
 #include "lincity/engglobs.h"
-#include "lincity/lcintl.h"
+#include "tinygettext/gettext.hpp"
 #include "lincity/modules/all_modules.h"
 #include "tinygettext/gettext.hpp"
 #include "MiniMap.hpp"

Copied: trunk/src/oldgui/getopt.cpp (from rev 1292, trunk/src/lincity/getopt.cpp)

Copied: trunk/src/oldgui/getopt.h (from rev 1292, trunk/src/lincity/getopt.h)

Copied: trunk/src/oldgui/lcintl.h (from rev 1292, trunk/src/lincity/lcintl.h)



From alainb at mail.berlios.de  Sat Dec  1 18:10:46 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sat, 1 Dec 2007 18:10:46 +0100
Subject: [Lincity-ng-commit] r1295 - in trunk/src: lincity lincity/modules
	lincity-ng
Message-ID: <200712011710.lB1HAkxv011874@sheep.berlios.de>

Author: alainb
Date: 2007-12-01 18:10:44 +0100 (Sat, 01 Dec 2007)
New Revision: 1295

Modified:
   trunk/src/lincity-ng/ButtonPanel.cpp
   trunk/src/lincity-ng/EconomyGraph.cpp
   trunk/src/lincity-ng/MainLincity.cpp
   trunk/src/lincity-ng/MapEdit.cpp
   trunk/src/lincity-ng/ScreenInterface.cpp
   trunk/src/lincity/engine.cpp
   trunk/src/lincity/ldsvguts.cpp
   trunk/src/lincity/lintypes.h
   trunk/src/lincity/modules/rocket_pad.cpp
   trunk/src/lincity/power.cpp
   trunk/src/lincity/simulate.cpp
Log:
some clean in headers

Modified: trunk/src/lincity/engine.cpp
===================================================================
--- trunk/src/lincity/engine.cpp	2007-12-01 16:02:45 UTC (rev 1294)
+++ trunk/src/lincity/engine.cpp	2007-12-01 17:10:44 UTC (rev 1295)
@@ -21,6 +21,9 @@
 #include "gui_interface/shared_globals.h"
 
 extern int selected_type_cost;
+extern void ok_dial_box(const char *, int, const char *);
+extern void print_total_money(void);
+
 int last_warning_message_group = 0;
 
 /****** Private functions prototypes *****/

Modified: trunk/src/lincity/ldsvguts.cpp
===================================================================
--- trunk/src/lincity/ldsvguts.cpp	2007-12-01 16:02:45 UTC (rev 1294)
+++ trunk/src/lincity/ldsvguts.cpp	2007-12-01 17:10:44 UTC (rev 1295)
@@ -89,6 +89,13 @@
 
 #define MP_SANITY_CHECK 1
 
+/* Extern resources */
+extern int yn_dial_box(const char *, const char *, const char *, const char *);
+extern void ok_dial_box(const char *, int, const char *);
+extern void prog_box(const char *, int);
+
+extern void print_total_money(void);
+
 /* ---------------------------------------------------------------------- *
  * Private Fn Prototypes
  * ---------------------------------------------------------------------- */

Modified: trunk/src/lincity/lintypes.h
===================================================================
--- trunk/src/lincity/lintypes.h	2007-12-01 16:02:45 UTC (rev 1294)
+++ trunk/src/lincity/lintypes.h	2007-12-01 17:10:44 UTC (rev 1295)
@@ -155,84 +155,6 @@
 extern char *load_graphic(char *);
 
 /*
-  screen functions
-  ****************
-*/
-#ifdef CS_PROFILE
-    extern void FPgl_write(int, int, char *);
-    extern void FPgl_getbox(int, int, int, int, void *);
-    extern void FPgl_putbox(int, int, int, int, void *);
-    extern void FPgl_fillbox(int, int, int, int, int);
-    extern void FPgl_hline(int, int, int, int);
-    extern void FPgl_line(int, int, int, int, int);
-    extern void FPgl_setpixel(int, int, int);
-#endif
-extern void check_power_line_graphics(void);
-extern void check_water_graphics(void);
-extern void check_track_graphics(void);
-extern void check_rail_graphics(void);
-extern void check_road_graphics(void);
-extern int select_power_line_type(int, int, int, int);
-extern int select_water_type(int, int, int, int);
-extern int select_track_type(int, int, int, int);
-extern int select_rail_type(int, int, int, int);
-extern int select_road_type(int, int, int, int);
-extern void update_select_buttons(void);
-extern void draw_main_window_box(int);
-extern void draw_select_button_graphic(int, char *);
-extern void setcustompalette(void);
-extern void clip_main_window(void);
-extern void unclip_main_window(void);
-extern void initfont(void);
-extern void load_scroll_buttons(void);
-extern void draw_scroll_buttons(void);
-extern void update_mini_screen(void);
-extern void draw_mini_screen(void);
-extern void draw_big_mini_screen(void);
-extern void draw_mini_screen_pollution(void);
-extern void draw_mini_screen_fire_cover(void);
-extern void draw_mini_screen_cricket_cover(void);
-extern void draw_mini_screen_health_cover(void);
-extern void draw_mini_screen_ub40(void);
-extern void draw_mini_screen_starve(void);
-extern void draw_mini_screen_coal(void);
-extern void draw_mini_screen_power(void);
-extern void draw_mini_screen_ocost(void);
-extern void draw_mini_screen_port(void);
-extern void draw_mini_screen_cursor(void);
-extern void print_stats(void);
-extern void print_total_money(void);
-int ask_launch_rocket_now(int x, int y);
-void print_date(void);
-extern void draw_market_cb(void);
-extern void clicked_market_cb(int, int);
-extern void close_market_cb(void);
-extern void draw_port_cb(void);
-extern void clicked_port_cb(int, int);
-extern void close_port_cb(void);
-extern int yn_dial_box(const char *, const char *, const char *, const char *);
-extern void ok_dial_box(const char *, int, const char *);
-extern int inv_sbut(int);
-extern void call_select_change_up(int);
-extern void beg_space_pad(const char *, int);
-extern void draw_up_pbar(int, int, int, int);
-extern void draw_down_pbar(int, int, int, int);
-extern void do_pbar_population(int);
-extern void do_pbar_tech(int);
-extern void do_pbar_food(int);
-extern void do_pbar_jobs(int);
-extern void do_pbar_coal(int);
-extern void do_pbar_goods(int);
-extern void do_pbar_ore(int);
-extern void do_pbar_steel(int);
-extern void do_pbar_money(int);
-extern void prog_box(const char *, int);
-/*
-  mouse functions -- are now in mouse.h, where they should be!
-  ***************
-*/
-
-/*
   engine functions
   ****************
 */
@@ -328,127 +250,4 @@
 extern int put_stuff3(Map_Point_Info *, short *, int, int);
 extern int put_stuff4(Map_Point_Info *, short *, int, int);
 
-#if defined SDL
-#   warning "SDL defined"
-#   include <SDL/SDL.h>
-
-    extern void sdl_gl_write(int, int, char *);
-    extern void sdl_gl_getbox(int, int, int, int, void *);
-    extern void sdl_gl_putbox(int, int, int, int, void *);
-    extern void sdl_gl_fillbox(int, int, int, int, Uint32 col);
-    
-    extern void sdl_gl_hline(int x1, int y1, int x2, Uint32 col);
-    extern void sdl_gl_vline(int x1, int y1, int y2, Uint32 col);
-    extern void sdl_gl_line(int x1, int y1, int x2, int y2, Uint32 col);
-    
-    extern void sdl_gl_setpixel(int x, int y, Uint32 col);
-    extern void sdl_gl_setfontcolors(Uint32 bg, Uint32 fg);
-    extern void sdl_gl_setfont(int, int, void *);
-    extern void sdl_gl_enableclipping(void);
-    extern void sdl_gl_setclippingwindow(int, int, int, int);
-    extern void sdl_gl_disableclipping(void);
-    
-    extern void sdl_blit(int x, int y, int w, int h, SDL_Surface *);
-    
-    /* Wait for a key or some other event */
-    extern int sdl_wait_for_key(void);
-    extern int sdl_update_wait_for_key(void);
-    
-    extern int sdl_check_key(void);
-    extern int sdl_update_check_key(void);
-    
-#   define sdl_map_rgb(r,g,b) SDL_MapRGB(display.surface->format, r, g, b)
-#   define sdl_video() (display.surface)
-#   define sdl_flip() SDL_Flip(display.surface)
-    
-    extern void sdl_clear(Uint32 col);
-    
-#   define Fgl_write(a,b,c) sdl_gl_write(a,b,c)
-#   define Fgl_getbox(a,b,c,d,e) sdl_gl_getbox(a,b,c,d,e)
-#   define Fgl_putbox(a,b,c,d,e) sdl_gl_putbox(a,b,c,d,e)
-#   define Fgl_fillbox(a,b,c,d,e) sdl_gl_fillbox(a,b,c,d,e)
-#   define Fgl_hline(a,b,c,d) sdl_gl_hline(a,b,c,d)
-#   define Fgl_line(a,b,c,d,e) sdl_gl_line(a,b,c,d,e)
-#   define Fgl_setpixel(a,b,c) sdl_gl_setpixel(a,b,c)
-#   define Fgl_setfontcolors(a,b) sdl_gl_setfontcolors(a,b)
-#   define Fgl_setfont(a,b,c) sdl_gl_setfont(a,b,c)
-#   define Fgl_enableclipping() sdl_gl_enableclipping()
-#   define Fgl_setclippingwindow(a,b,c,d) sdl_gl_setclippingwindow(a,b,c,d)
-#   define Fgl_disableclipping() sdl_gl_disableclipping()
-   
-#elif defined LC_X11
-    /* ----- X11 functions ----- */
-    extern void Fgl_write(int, int, const char *);
-    extern void open_write(int, int, const char *);
-    extern void Fgl_getbox(int, int, int, int, void *);
-    extern void Fgl_putbox(int, int, int, int, void *);
-    extern void Fgl_fillbox(int, int, int, int, int);
-    extern void Fgl_hline(int, int, int, int);
-    extern void Fgl_line(int, int, int, int, int);
-    extern void Fgl_setpixel(int, int, int);
-    extern void Fgl_setfontcolors(int, int);
-    extern void Fgl_setfont(int, int, void *);
-    extern void Fgl_enableclipping(void);
-    extern void Fgl_setclippingwindow(int, int, int, int);
-    extern void Fgl_disableclipping(void);
-#   ifdef USE_X11_PIXMAPS
-#       define USE_PIXMAPS
-        extern void init_pixmaps(void);
-        extern void init_icon_pixmap(short);
-        extern void update_pixmap(int, int, int, int, int, int, int, char *);
-#   endif
-    
-#elif defined (WIN32)
-    /* ----- Win32 functions ----- */
-    extern void gl_setpalettecolor(long, long, long, long);
-    extern void Fgl_write(int, int, const char *);
-    extern void open_write(int, int, const char *);
-    extern void Fgl_getbox(int, int, int, int, void *);
-    extern void Fgl_putbox(int, int, int, int, void *);
-    extern void Fgl_fillbox(int, int, int, int, int);
-    extern void Fgl_hline(int, int, int, int);
-    extern void Fgl_line(int, int, int, int, int);
-    extern void Fgl_setpixel(int, int, int);
-    extern void Fgl_setfontcolors(int, int);
-    extern void Fgl_setfont(int, int, void *);
-    extern void Fgl_enableclipping(void);
-    extern void Fgl_setclippingwindow(int, int, int, int);
-    extern void Fgl_disableclipping(void);
-#   define USE_PIXMAPS             /* Always */
-    extern void init_pixmaps(void);
-    extern void init_icon_pixmap(short);
-    extern void update_pixmap(int, int, int, int, int, int, int, char *);
-    
-#else
-    /* ----- SVGALIB functions ----- */
-    /* profiling */
-#   ifdef CS_PROFILE
-#       define Fgl_write(a,b,c) FPgl_write(a,b,c)
-#       define Fgl_getbox(a,b,c,d,e) FPgl_getbox(a,b,c,d,e)
-#       define Fgl_putbox(a,b,c,d,e) FPgl_putbox(a,b,c,d,e)
-#       define Fgl_fillbox(a,b,c,d,e) FPgl_fillbox(a,b,c,d,e)
-#       define Fgl_hline(a,b,c,d) FPgl_hline(a,b,c,d)
-#       define Fgl_line(a,b,c,d,e) FPgl_line(a,b,c,d,e)
-#       define Fgl_setpixel(a,b,c) FPgl_setpixel(a,b,c)
-#       define Fgl_setfontcolors(a,b) gl_setfontcolors(a,b)
-#       define Fgl_setfont(a,b,c) gl_setfont(a,b,c)
-#       define Fgl_enableclipping()   gl_enableclipping()
-#       define Fgl_setclippingwindow(a,b,c,d)   gl_setclippingwindow(a,b,c,d)
-#       define Fgl_disableclipping()   gl_disableclipping()
-#   else
-#       define Fgl_write(a,b,c) gl_write(a,b,c)
-#       define Fgl_getbox(a,b,c,d,e) gl_getbox(a,b,c,d,e)
-#       define Fgl_putbox(a,b,c,d,e) gl_putbox(a,b,c,d,e)
-#       define Fgl_fillbox(a,b,c,d,e) gl_fillbox(a,b,c,d,e)
-#       define Fgl_hline(a,b,c,d) gl_hline(a,b,c,d)
-#       define Fgl_line(a,b,c,d,e) gl_line(a,b,c,d,e)
-#       define Fgl_setpixel(a,b,c) gl_setpixel(a,b,c)
-#       define Fgl_setfontcolors(a,b) gl_setfontcolors(a,b)
-#       define Fgl_setfont(a,b,c) gl_setfont(a,b,c)
-#       define Fgl_enableclipping()   gl_enableclipping()
-#       define Fgl_setclippingwindow(a,b,c,d)   gl_setclippingwindow(a,b,c,d)
-#       define Fgl_disableclipping()   gl_disableclipping()
-#   endif
-
-#endif
 #endif /* __lintypes_h__ */

Modified: trunk/src/lincity/modules/rocket_pad.cpp
===================================================================
--- trunk/src/lincity/modules/rocket_pad.cpp	2007-12-01 16:02:45 UTC (rev 1294)
+++ trunk/src/lincity/modules/rocket_pad.cpp	2007-12-01 17:10:44 UTC (rev 1295)
@@ -14,6 +14,8 @@
 
 #include <stdlib.h>
 
+extern void ok_dial_box(const char *, int, const char *);
+
 void do_rocket_pad(int x, int y)
 {
     /*

Modified: trunk/src/lincity/power.cpp
===================================================================
--- trunk/src/lincity/power.cpp	2007-12-01 16:02:45 UTC (rev 1294)
+++ trunk/src/lincity/power.cpp	2007-12-01 17:10:44 UTC (rev 1295)
@@ -18,6 +18,9 @@
 #include "tinygettext/gettext.hpp"
 #include "gui_interface/dialbox_interface.h"
 
+extern void ok_dial_box(const char *, int, const char *);
+
+
 /* reset per map_power_grid run; how many different grids */
 int grid_num = 0;
 

Modified: trunk/src/lincity/simulate.cpp
===================================================================
--- trunk/src/lincity/simulate.cpp	2007-12-01 16:02:45 UTC (rev 1294)
+++ trunk/src/lincity/simulate.cpp	2007-12-01 17:10:44 UTC (rev 1295)
@@ -40,6 +40,9 @@
 #include "gui_interface/pbar_interface.h"
 //#include "module_buttons.h"
 
+/* extern resources */
+extern void print_total_money(void);
+
 /* AL1: they are all in engine.cpp */
 extern void connect_rivers(void);
 extern void do_daily_ecology(void);
@@ -69,7 +72,9 @@
 static void setup_river(void);
 static void setup_river2(int x, int y, int d);
 static void quick_start_add(int x, int y, short type, int size);
-static void debug_mappoints(void); /* AL1: NG 1.1.2 compiler warns that this is unused */
+#ifdef DEBUG
+        static void debug_mappoints(void); /* AL1: NG 1.1.2 compiler warns that this is unused */
+#endif
 
 #define IS_RIVER(x,y) (MP_INFO(x,y).flags & FLAG_IS_RIVER)
 
@@ -958,6 +963,7 @@
     return (1);
 }
 
+#ifdef DEBUG
 static void debug_mappoints(void)
 {
     int x, y;
@@ -970,5 +976,4 @@
         }
     }
 }
-
-
+#endif

Modified: trunk/src/lincity-ng/ButtonPanel.cpp
===================================================================
--- trunk/src/lincity-ng/ButtonPanel.cpp	2007-12-01 16:02:45 UTC (rev 1294)
+++ trunk/src/lincity-ng/ButtonPanel.cpp	2007-12-01 17:10:44 UTC (rev 1295)
@@ -42,6 +42,8 @@
 #include "Util.hpp"
 #include "HelpWindow.hpp"
 
+extern void ok_dial_box(const char *, int, const char *);
+
 ButtonPanel *ButtonPanelInstance=0;
 
 int selected_module_type = CST_NONE;

Modified: trunk/src/lincity-ng/EconomyGraph.cpp
===================================================================
--- trunk/src/lincity-ng/EconomyGraph.cpp	2007-12-01 16:02:45 UTC (rev 1294)
+++ trunk/src/lincity-ng/EconomyGraph.cpp	2007-12-01 17:10:44 UTC (rev 1295)
@@ -42,6 +42,8 @@
 #include "Dialog.hpp"
 #include "Util.hpp"
 
+extern void ok_dial_box(const char *, int, const char *);
+
 EconomyGraph* economyGraphPtr = 0;
 
 EconomyGraph* getEconomyGraph()

Modified: trunk/src/lincity-ng/MainLincity.cpp
===================================================================
--- trunk/src/lincity-ng/MainLincity.cpp	2007-12-01 16:02:45 UTC (rev 1294)
+++ trunk/src/lincity-ng/MainLincity.cpp	2007-12-01 17:10:44 UTC (rev 1295)
@@ -42,6 +42,8 @@
 #include "Dialog.hpp"
 #include "Config.hpp"
 
+extern void print_total_money(void);
+
 int lincitySpeed = MED_TIME_FOR_YEAR;
 
 void setLincitySpeed( int speed )

Modified: trunk/src/lincity-ng/MapEdit.cpp
===================================================================
--- trunk/src/lincity-ng/MapEdit.cpp	2007-12-01 16:02:45 UTC (rev 1294)
+++ trunk/src/lincity-ng/MapEdit.cpp	2007-12-01 17:10:44 UTC (rev 1295)
@@ -33,6 +33,8 @@
 #include "Debug.hpp"
 #include "GameView.hpp"
 
+extern void ok_dial_box(const char *, int, const char *);
+
 int monument_bul_flag=0;
 int river_bul_flag=0;
 int shanty_bul_flag=0;

Modified: trunk/src/lincity-ng/ScreenInterface.cpp
===================================================================
--- trunk/src/lincity-ng/ScreenInterface.cpp	2007-12-01 16:02:45 UTC (rev 1294)
+++ trunk/src/lincity-ng/ScreenInterface.cpp	2007-12-01 17:10:44 UTC (rev 1295)
@@ -45,6 +45,9 @@
 #include "Dialog.hpp"
 #include "EconomyGraph.hpp"
 
+extern void ok_dial_box(const char *, int, const char *);
+
+
 short mappointoldtype[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
 int selected_module_cost; // this must be changed, when module (or celltype-button) is changed
 



From alainb at mail.berlios.de  Sat Dec  1 21:23:47 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sat, 1 Dec 2007 21:23:47 +0100
Subject: [Lincity-ng-commit] r1296 - in trunk/src: lincity lincity/modules
	lincity-ng oldgui
Message-ID: <200712012023.lB1KNl7T010888@sheep.berlios.de>

Author: alainb
Date: 2007-12-01 21:23:44 +0100 (Sat, 01 Dec 2007)
New Revision: 1296

Added:
   trunk/src/lincity-ng/ErrorInterface.hpp
Modified:
   trunk/src/lincity-ng/ErrorInterface.cpp
   trunk/src/lincity-ng/MainLincity.cpp
   trunk/src/lincity-ng/MainMenu.cpp
   trunk/src/lincity-ng/MiniMap.cpp
   trunk/src/lincity-ng/TimerInterface.hpp
   trunk/src/lincity/engine.cpp
   trunk/src/lincity/fileutil.cpp
   trunk/src/lincity/fileutil.h
   trunk/src/lincity/ldsvguts.cpp
   trunk/src/lincity/ldsvguts.h
   trunk/src/lincity/lintypes.h
   trunk/src/lincity/modules/market.cpp
   trunk/src/lincity/modules/market.h
   trunk/src/lincity/modules/modules.h
   trunk/src/lincity/modules/shanty.cpp
   trunk/src/lincity/shrtypes.cpp
   trunk/src/lincity/simulate.cpp
   trunk/src/lincity/simulate.h
   trunk/src/lincity/transport.cpp
   trunk/src/lincity/transport.h
   trunk/src/oldgui/main.cpp
Log:
more cleaning in headers of lincity/.
  oldgui needs previous headers to compile. i ll fix this soon

Modified: trunk/src/lincity/engine.cpp
===================================================================
--- trunk/src/lincity/engine.cpp	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity/engine.cpp	2007-12-01 20:23:44 UTC (rev 1296)
@@ -19,6 +19,8 @@
 #include "gui_interface/mps.h"
 #include "gui_interface/screen_interface.h"
 #include "gui_interface/shared_globals.h"
+#include "modules/all_modules.h"
+#include "transport.h"
 
 extern int selected_type_cost;
 extern void ok_dial_box(const char *, int, const char *);

Modified: trunk/src/lincity/fileutil.cpp
===================================================================
--- trunk/src/lincity/fileutil.cpp	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity/fileutil.cpp	2007-12-01 20:23:44 UTC (rev 1296)
@@ -11,6 +11,7 @@
 #include "shrglobs.h"
 #include "gui_interface/screen_interface.h"
 #include "tinygettext/gettext.hpp"
+#include "lincity-ng/ErrorInterface.hpp"
 
 /* XXX: Where are SVGA specific includes? */
 

Modified: trunk/src/lincity/fileutil.h
===================================================================
--- trunk/src/lincity/fileutil.h	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity/fileutil.h	2007-12-01 20:23:44 UTC (rev 1296)
@@ -6,6 +6,14 @@
 #ifndef __fileutil_h__
 #define __fileutil_h__
 
+void init_path_strings(void);
+void check_savedir(void);
+void check_endian(void);
+void eswap32(int *);
+void eswap16(unsigned short *);
+void malloc_failure(void);
+
+
 extern char *lc_save_dir;
 extern char *lc_temp_file;
 extern int lc_save_dir_len;

Modified: trunk/src/lincity/ldsvguts.cpp
===================================================================
--- trunk/src/lincity/ldsvguts.cpp	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity/ldsvguts.cpp	2007-12-01 20:23:44 UTC (rev 1296)
@@ -75,6 +75,7 @@
 #include "fileutil.h"
 #include "power.h"
 #include "gui_interface/pbar_interface.h"
+#include "lincity-ng/ErrorInterface.hpp"
 #include "stats.h"
 
 #if defined (WIN32) && !defined (NDEBUG)
@@ -95,6 +96,8 @@
 extern void prog_box(const char *, int);
 
 extern void print_total_money(void);
+extern int count_groups(int);
+extern void reset_animation_times(void);
 
 /* ---------------------------------------------------------------------- *
  * Private Fn Prototypes
@@ -127,7 +130,8 @@
 
 void save_city_raw(char *cname)
 {
-    int x, y, z, q, n, p;
+    int x, y, q, n, p;
+    unsigned int z;
     gzFile ofile = gzopen(cname, "wb");
     if (ofile == NULL) {
         printf(_("Save file <%s> - "), cname);
@@ -323,7 +327,8 @@
 void load_city(char *cname)
 {
     unsigned long q;
-    int i, x, y, z, n, p;
+    int i, x, y, n, p;
+    unsigned int z;
     int num_pbars, pbar_data_size;
     int pbar_tmp;
     int dummy;

Modified: trunk/src/lincity/ldsvguts.h
===================================================================
--- trunk/src/lincity/ldsvguts.h	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity/ldsvguts.h	2007-12-01 20:23:44 UTC (rev 1296)
@@ -11,5 +11,7 @@
 
 void load_saved_city(char *s);
 void sanity_check(void);
+void save_city(char *);
+void load_city(char *);
 
 #endif /* __ldsvguts_h__ */

Modified: trunk/src/lincity/lintypes.h
===================================================================
--- trunk/src/lincity/lintypes.h	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity/lintypes.h	2007-12-01 20:23:44 UTC (rev 1296)
@@ -65,189 +65,4 @@
 };
 typedef struct update_scoreboard_struct Update_Scoreboard;
 
-
-/********************** Functions ********************/
-/* FIXME: AL1 1290. This shoudl go elsewhere
- * Split this in 2 parts: 
- *      - one for lincity/      wrt engine functions
- *      - one for lincity-ng/   wrt graphic functions
- *
- * and reduce the number of visible function here. (i'm lost , its too much :)
- */
-
-
-/*
-  main functions
-  **************
-*/
-extern int lincity_main(int, char **);
-extern void client_main_loop(void);
-extern void do_error(const char *);
-extern void do_save_city(void);
-extern void remove_scene(char *);
-extern void save_city(char *);
-extern void do_load_city(void);
-extern void load_opening_city(char *);
-extern void load_city(char *);
-extern void reset_animation_times(void);
-extern void check_savedir(void);
-extern void make_savedir(void);
-extern void draw_save_dir(int);
-extern void input_save_filename(char *);
-extern void load_start_image(void);
-extern void start_image_text(void);
-extern void si_scroll_text(void);
-extern char si_next_char(FILE *);
-extern void get_real_time(void);
-extern void debug_writeval(int);
-extern int cheat(void);
-extern void print_cheat(void);
-extern void unprint_cheat(void);
-extern void order_select_buttons(void);
-extern void lincityrc(void);
-extern void check_for_old_save_dir(void);
-extern int count_groups(int);
-extern int compile_results(void);
-extern void print_results(void);
-extern void mail_results(void);
-extern void window_results(void);
-extern void init_path_strings(void);
-extern void lc_usleep(unsigned long);
-extern void dump_tcore(void);
-#ifndef LC_X11
-    extern void parse_args(int, char **);
-#endif
-extern void check_endian(void);
-extern void eswap32(int *);
-extern void eswap16(unsigned short *);
-extern void malloc_failure(void);
-
-/*
-  fileutil
-  ********
-*/
-void malloc_failure(void);
-//FILE* fopen_read_gzipped (char* fn);
-//void fclose_read_gzipped (FILE* fp);
-void verify_package(void);
-
-/*
-  ldsvgui
-  *******
-*/
-void load_opening_city(char *s);
-void check_savedir(void);
-
-/*
-  opening
-  *******
-*/
-void load_start_image(void);
-
-/*
-  type init functions
-  *******************
-*/
-extern void init_types(void);
-extern void init_type_graphics(void);
-void init_costs(void);
-int get_selected_type_cost(short selected_type);
-extern char *load_graphic(char *);
-
-/*
-  engine functions
-  ****************
-*/
-void initialize_tax_rates(void);
-void set_mappoint(int x, int y, short selected_type);
-void set_mappoint_used(int, int, int, int);
-void set_mappoint_ints(int fromx, int fromy, int x, int y);
-void new_city(int *originx, int *originy, int random_village);
-//extern void engine_do_time_step(void);
-extern void do_residence(int, int);
-extern void debug_print(int);
-extern void do_power_source(int, int);
-extern void do_power_source_coal(int, int);
-extern void do_industry_l(int, int);
-extern void do_industry_h(int, int);
-extern void do_power_substation(int, int);
-extern int get_power(int, int, int, int);
-extern int add_a_substation(int, int);
-extern void remove_a_substation(int, int);
-extern void do_organic_farm(int, int);
-extern void shuffle_substations(void);
-extern void do_coalmine(int, int);
-extern void do_oremine(int, int);
-extern void do_commune(int, int);
-extern void do_port(int, int);
-
-extern void do_parkland(int, int);
-extern void do_university(int, int);
-extern void do_recycle(int, int);
-extern void do_health_centre(int, int);
-extern void do_rocket_pad(int, int);
-extern void launch_rocket(int x, int y);
-extern void do_windmill(int, int);
-extern void do_monument(int, int);
-extern void do_school(int, int);
-extern void do_blacksmith(int, int);
-extern void do_mill(int, int);
-extern void do_pottery(int, int);
-extern void do_firestation(int, int);
-extern void do_cricket(int, int);
-extern void do_fire_cover(int, int);
-extern void do_health_cover(int, int);
-extern void do_cricket_cover(int, int);
-extern void do_random_fire(int, int, int);
-extern void do_fire(int, int);
-extern void add_a_shanty(void);
-extern void remove_a_shanty(int, int);
-extern void update_shanty(void);
-extern void do_shanty(int, int);
-extern void do_tip(int, int);
-extern void update_tech_dep(int, int);
-extern void do_waterwell_cover(int, int);
-/*
-   transport functions
-   *******************
-*/
-void connect_transport(int originx, int originy, int w, int h);
-extern void do_power_line(int, int);
-extern void do_track(int, int);
-extern void do_rail(int, int);
-extern void do_road(int, int);
-extern void general_transport(Map_Point_Info *, int *, int, int *);
-
-/*
-   market functions
-   ****************
-*/
-extern int get_food(int, int, int);
-extern int put_food(int, int, int);
-extern int get_jobs(int, int, int);
-extern int put_jobs(int, int, int);
-extern int get_goods(int, int, int);
-extern int put_goods(int, int, int);
-extern int get_ore(int, int, int);
-extern int put_ore(int, int, int);
-extern int get_coal(int, int, int);
-extern int put_coal(int, int, int);
-extern int add_a_market(int, int);
-extern void remove_a_market(int, int);
-extern void do_market(int, int);
-extern void shuffle_markets(void);
-extern int deal_with_transport(int, int, int, int);
-extern int get_steel(int, int, int);
-extern int put_steel(int, int, int);
-extern int get_waste(int, int, int);
-extern int put_waste(int, int, int);
-extern int get_stuff(int, int, int, int);
-extern int get_stuff2(Map_Point_Info *, int, int);
-extern int get_stuff3(Map_Point_Info *, int, int);
-extern int get_stuff4(Map_Point_Info *, int, int);
-extern int put_stuff(int, int, int, int);
-extern int put_stuff2(Map_Point_Info *, short *, int, int);
-extern int put_stuff3(Map_Point_Info *, short *, int, int);
-extern int put_stuff4(Map_Point_Info *, short *, int, int);
-
 #endif /* __lintypes_h__ */

Modified: trunk/src/lincity/modules/market.cpp
===================================================================
--- trunk/src/lincity/modules/market.cpp	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity/modules/market.cpp	2007-12-01 20:23:44 UTC (rev 1296)
@@ -5,6 +5,7 @@
  * ---------------------------------------------------------------------- */
 #include "modules.h"
 #include "market.h"
+#include "lincity-ng/ErrorInterface.hpp"
 
 int get_jobs(int x, int y, int jobs)
 {

Modified: trunk/src/lincity/modules/market.h
===================================================================
--- trunk/src/lincity/modules/market.h	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity/modules/market.h	2007-12-01 20:23:44 UTC (rev 1296)
@@ -6,3 +6,32 @@
 #include "../engglobs.h"
 
 void mps_market(int x, int y);
+
+int get_food(int, int, int);
+int put_food(int, int, int);
+int get_jobs(int, int, int);
+int put_jobs(int, int, int);
+int get_goods(int, int, int);
+int put_goods(int, int, int);
+int get_ore(int, int, int);
+int put_ore(int, int, int);
+int get_coal(int, int, int);
+int put_coal(int, int, int);
+int add_a_market(int, int);
+void remove_a_market(int, int);
+void do_market(int, int);
+void shuffle_markets(void);
+int deal_with_transport(int, int, int, int);
+int get_steel(int, int, int);
+int put_steel(int, int, int);
+int get_waste(int, int, int);
+int put_waste(int, int, int);
+int get_stuff(int, int, int, int);
+int get_stuff2(Map_Point_Info *, int, int);
+int get_stuff3(Map_Point_Info *, int, int);
+int get_stuff4(Map_Point_Info *, int, int);
+int put_stuff(int, int, int, int);
+int put_stuff2(Map_Point_Info *, short *, int, int);
+int put_stuff3(Map_Point_Info *, short *, int, int);
+int put_stuff4(Map_Point_Info *, short *, int, int);
+

Modified: trunk/src/lincity/modules/modules.h
===================================================================
--- trunk/src/lincity/modules/modules.h	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity/modules/modules.h	2007-12-01 20:23:44 UTC (rev 1296)
@@ -15,6 +15,9 @@
 #include "gui_interface/mps.h"
 #include "../lclib.h"
 
+#include "market.h"
+#include "../power.h"
+
 // for real_time
 //#include "cliglobs.h"
 

Modified: trunk/src/lincity/modules/shanty.cpp
===================================================================
--- trunk/src/lincity/modules/shanty.cpp	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity/modules/shanty.cpp	2007-12-01 20:23:44 UTC (rev 1296)
@@ -9,6 +9,9 @@
 //#include "mouse.h" /* XXX: fire_area! */
 #include "shanty.h"
 
+extern void set_mappoint(int x, int y, short selected_type);
+
+
 #include <stdlib.h>
 static int spiral_find_2x2(int startx, int starty);
 static int spiral_find_group(int startx, int starty, int group);

Modified: trunk/src/lincity/shrtypes.cpp
===================================================================
--- trunk/src/lincity/shrtypes.cpp	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity/shrtypes.cpp	2007-12-01 20:23:44 UTC (rev 1296)
@@ -14,478 +14,3 @@
 //#include "cliglobs.h"
 #include "engglobs.h"
 
-void set_mappoint_used(int fromx, int fromy, int x, int y)
-{
-    MP_TYPE(x, y) = CST_USED;
-    MP_GROUP(x, y) = GROUP_USED;
-    MP_INFO(x, y).int_1 = fromx;
-    MP_INFO(x, y).int_2 = fromy;
-}
-
-void set_mappoint(int x, int y, short selected_type)
-{
-    int grp;
-
-    if ((grp = get_group_of_type(selected_type)) < 0)
-        return;
-
-    MP_TYPE(x, y) = selected_type;
-    MP_GROUP(x, y) = grp;
-
-    if (main_groups[grp].size == 2) {
-        set_mappoint_used(x, y, x + 1, y);
-        set_mappoint_used(x, y, x, y + 1);
-        set_mappoint_used(x, y, x + 1, y + 1);
-    } else if (main_groups[grp].size == 3) {
-        set_mappoint_used(x, y, x + 1, y);
-        set_mappoint_used(x, y, x + 2, y);
-        set_mappoint_used(x, y, x + 1, y + 1);
-        set_mappoint_used(x, y, x + 2, y + 1);
-        set_mappoint_used(x, y, x + 1, y + 2);
-        set_mappoint_used(x, y, x + 2, y + 2);
-        set_mappoint_used(x, y, x, y + 1);
-        set_mappoint_used(x, y, x, y + 2);
-    } else if (main_groups[grp].size == 4) {
-        set_mappoint_used(x, y, x + 1, y);
-        set_mappoint_used(x, y, x + 2, y);
-        set_mappoint_used(x, y, x + 1, y + 1);
-        set_mappoint_used(x, y, x + 2, y + 1);
-        set_mappoint_used(x, y, x + 1, y + 2);
-        set_mappoint_used(x, y, x + 2, y + 2);
-        set_mappoint_used(x, y, x, y + 1);
-        set_mappoint_used(x, y, x, y + 2);
-
-        set_mappoint_used(x, y, x + 3, y);
-        set_mappoint_used(x, y, x + 3, y + 1);
-        set_mappoint_used(x, y, x + 3, y + 2);
-        set_mappoint_used(x, y, x + 3, y + 3);
-        set_mappoint_used(x, y, x, y + 3);
-        set_mappoint_used(x, y, x + 1, y + 3);
-        set_mappoint_used(x, y, x + 2, y + 3);
-    }
-}
-
-void connect_transport(int originx, int originy, int w, int h)
-{
-    int x, y, mask, tflags;
-    short group, type;
-
-    static const short power_table[16] = {
-        CST_POWERL_H_D, CST_POWERL_V_D, CST_POWERL_H_D, CST_POWERL_RD_D,
-        CST_POWERL_H_D, CST_POWERL_LD_D, CST_POWERL_H_D, CST_POWERL_LDR_D,
-        CST_POWERL_V_D, CST_POWERL_V_D, CST_POWERL_RU_D, CST_POWERL_UDR_D,
-        CST_POWERL_LU_D, CST_POWERL_LDU_D, CST_POWERL_LUR_D, CST_POWERL_LUDR_D
-    };
-    static const short track_table[16] = {
-        CST_TRACK_LR, CST_TRACK_LR, CST_TRACK_UD, CST_TRACK_LU,
-        CST_TRACK_LR, CST_TRACK_LR, CST_TRACK_UR, CST_TRACK_LUR,
-        CST_TRACK_UD, CST_TRACK_LD, CST_TRACK_UD, CST_TRACK_LUD,
-        CST_TRACK_DR, CST_TRACK_LDR, CST_TRACK_UDR, CST_TRACK_LUDR
-    };
-    static const short road_table[16] = {
-        CST_ROAD_LR, CST_ROAD_LR, CST_ROAD_UD, CST_ROAD_LU,
-        CST_ROAD_LR, CST_ROAD_LR, CST_ROAD_UR, CST_ROAD_LUR,
-        CST_ROAD_UD, CST_ROAD_LD, CST_ROAD_UD, CST_ROAD_LUD,
-        CST_ROAD_DR, CST_ROAD_LDR, CST_ROAD_UDR, CST_ROAD_LUDR
-    };
-    static const short rail_table[16] = {
-        CST_RAIL_LR, CST_RAIL_LR, CST_RAIL_UD, CST_RAIL_LU,
-        CST_RAIL_LR, CST_RAIL_LR, CST_RAIL_UR, CST_RAIL_LUR,
-        CST_RAIL_UD, CST_RAIL_LD, CST_RAIL_UD, CST_RAIL_LUD,
-        CST_RAIL_DR, CST_RAIL_LDR, CST_RAIL_UDR, CST_RAIL_LUDR
-    };
-    static const short water_table[16] = {
-        CST_WATER, CST_WATER_D, CST_WATER_R, CST_WATER_RD,
-        CST_WATER_L, CST_WATER_LD, CST_WATER_LR, CST_WATER_LRD,
-        CST_WATER_U, CST_WATER_UD, CST_WATER_UR, CST_WATER_URD,
-        CST_WATER_LU, CST_WATER_LUD, CST_WATER_LUR, CST_WATER_LURD
-    };
-
-    /* Adjust originx,originy,w,h to proper range */
-    if (originx <= 0) {
-        w -= 1 - originx;
-        originx = 1;
-    }
-    if (originy <= 0) {
-        h -= 1 - originy;
-        originy = 1;
-    }
-    if (originx + w >= WORLD_SIDE_LEN) {
-        w = WORLD_SIDE_LEN - originx;
-    }
-    if (originy + h >= WORLD_SIDE_LEN) {
-        h = WORLD_SIDE_LEN - originy;
-    }
-
-    for (x = originx; x < originx + w; x++) {
-        for (y = originy; y < originy + h; y++) {
-            switch (MP_GROUP(x, y)) {
-            case GROUP_POWER_LINE:
-                /* First, set up a mask indicating into which directions 
-                   power may be transferred */
-                mask = 0;
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (y > 0)
-#endif
-                {               /* up -- (ThMO) */
-                    group = MP_GROUP(x, y - 1);
-
-                    /* see if dug under track, rail or road */
-
-                    if (y > 1 && (group == GROUP_TRACK
-                                  || group == GROUP_RAIL || group == GROUP_ROAD || group == GROUP_WATER))
-                        group = MP_GROUP(x, y - 2);
-                    switch (group) {
-                    case GROUP_POWER_LINE:
-                    case GROUP_SOLAR_POWER:
-                    case GROUP_SUBSTATION:
-                    case GROUP_COAL_POWER:
-                        mask |= 8;
-                        break;
-                    }
-                }
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (x > 0)
-#endif
-                {               /* left -- (ThMO) */
-                    group = MP_GROUP(x - 1, y);
-                    if (x > 1 && (group == GROUP_TRACK
-                                  || group == GROUP_RAIL || group == GROUP_ROAD || group == GROUP_WATER))
-                        group = MP_GROUP(x - 2, y);
-                    switch (group) {
-                    case GROUP_POWER_LINE:
-                    case GROUP_SOLAR_POWER:
-                    case GROUP_SUBSTATION:
-                    case GROUP_COAL_POWER:
-                        mask |= 4;
-                        break;
-                    }
-                }
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (x < WORLD_SIDE_LEN - 1)
-#endif
-                {               /* right -- (ThMO) */
-                    group = MP_GROUP(x + 1, y);
-                    if (x < WORLD_SIDE_LEN - 2 && (group == GROUP_TRACK
-                                                   || group == GROUP_RAIL
-                                                   || group == GROUP_ROAD || group == GROUP_WATER))
-                        group = MP_GROUP(x + 2, y);
-                    switch (group) {
-                    case GROUP_WINDMILL:
-                        if (MP_INFO(x + 1, y).int_2 < MODERN_WINDMILL_TECH)
-                            break;
-                    case GROUP_POWER_LINE:
-                    case GROUP_SOLAR_POWER:
-                    case GROUP_SUBSTATION:
-                    case GROUP_COAL_POWER:
-                        mask |= 2;
-                        break;
-                    }
-                }
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (y < WORLD_SIDE_LEN - 1)
-#endif
-                {               /* down -- (ThMO) */
-                    group = MP_GROUP(x, y + 1);
-                    if (y < WORLD_SIDE_LEN - 2 && (group == GROUP_TRACK
-                                                   || group == GROUP_RAIL
-                                                   || group == GROUP_ROAD || group == GROUP_WATER))
-                        group = MP_GROUP(x, y + 2);
-                    switch (group) {
-                    case GROUP_WINDMILL:
-                        if (MP_INFO(x, y + 1).int_2 < MODERN_WINDMILL_TECH)
-                            break;
-                    case GROUP_POWER_LINE:
-                    case GROUP_SOLAR_POWER:
-                    case GROUP_SUBSTATION:
-                    case GROUP_COAL_POWER:
-                        ++mask;
-                        break;
-                    }
-                }
-                /* Next, set the connectivity into MP_TYPE */
-                MP_TYPE(x, y) = power_table[mask];
-                /* Finally, adjust MP_TYPE to show electon bolt */
-#ifdef commentout
-              WCK:This is done in do_power_line now if (MP_INFO(x, y).int_1 != 0)
-                    MP_TYPE(x, y) -= 11;
-#endif
-                break;
-
-            case GROUP_TRACK:
-#if	FLAG_LEFT != 1 || FLAG_UP != 2 || FLAG_RIGHT != 4 || FLAG_DOWN != 8
-#error  check_track_graphics(): you loose
-#error  this algorithm depends on proper flag settings -- (ThMO)
-#endif
-                mask = 0;
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (y > 0)
-#endif
-                {
-                    if (MP_GROUP(x, y - 1) == GROUP_TRACK)
-                        mask |= FLAG_UP;
-                }
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (x > 0)
-#endif
-                {
-                    if (MP_GROUP(x - 1, y) == GROUP_TRACK)
-                        mask |= FLAG_LEFT;
-                }
-                tflags = mask;
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (x < WORLD_SIDE_LEN - 1)
-#endif
-                {
-                    switch (MP_GROUP(x + 1, y)) {
-                    case GROUP_TRACK:
-                        tflags |= FLAG_RIGHT;
-                    case GROUP_COMMUNE:
-                    case GROUP_COALMINE:
-                    case GROUP_OREMINE:
-                    case GROUP_INDUSTRY_L:
-                    case GROUP_INDUSTRY_H:
-                    case GROUP_RECYCLE:
-                    case GROUP_TIP:
-                    case GROUP_PORT:
-                        mask |= FLAG_RIGHT;
-                        break;
-                    default:
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                        if (y > 0)
-#endif
-                            if (MP_GROUP(x + 1, y - 1) == GROUP_COAL_POWER)
-                                mask |= FLAG_RIGHT;
-                        break;
-                    }
-                }
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (y < WORLD_SIDE_LEN - 1)
-#endif
-                {
-                    switch (MP_GROUP(x, y + 1)) {
-                    case GROUP_TRACK:
-                        tflags |= FLAG_DOWN;
-                    case GROUP_COMMUNE:
-                    case GROUP_COALMINE:
-                    case GROUP_OREMINE:
-                    case GROUP_INDUSTRY_L:
-                    case GROUP_INDUSTRY_H:
-                    case GROUP_RECYCLE:
-                    case GROUP_TIP:
-                    case GROUP_PORT:
-                        mask |= FLAG_DOWN;
-                        break;
-                    default:
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                        if (x > 0)
-#endif
-                            if (MP_GROUP(x - 1, y + 1) == GROUP_COAL_POWER)
-                                mask |= FLAG_DOWN;
-                        break;
-                    }
-                }
-                MP_INFO(x, y).flags &= ~(FLAG_UP | FLAG_DOWN | FLAG_LEFT | FLAG_RIGHT);
-                MP_INFO(x, y).flags |= tflags;
-                MP_TYPE(x, y) = track_table[mask];
-                break;
-
-            case GROUP_ROAD:
-#if	FLAG_LEFT != 1 || FLAG_UP != 2 || FLAG_RIGHT != 4 || FLAG_DOWN != 8
-#error  check_road_graphics(): you loose
-#error  this algorithm depends on proper flag settings -- (ThMO)
-#endif
-                mask = 0;
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (y > 0)
-#endif
-                {
-                    if (MP_GROUP(x, y - 1) == GROUP_ROAD)
-                        mask |= FLAG_UP;
-                }
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (x > 0)
-#endif
-                {
-                    if (MP_GROUP(x - 1, y) == GROUP_ROAD)
-                        mask |= FLAG_LEFT;
-                }
-                tflags = mask;
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (x < WORLD_SIDE_LEN - 1)
-#endif
-                {
-                    switch (MP_GROUP(x + 1, y)) {
-                    case GROUP_ROAD:
-                        tflags |= FLAG_RIGHT;
-                    case GROUP_COMMUNE:
-                    case GROUP_COALMINE:
-                    case GROUP_OREMINE:
-                    case GROUP_INDUSTRY_L:
-                    case GROUP_INDUSTRY_H:
-                    case GROUP_RECYCLE:
-                    case GROUP_TIP:
-                    case GROUP_PORT:
-                        mask |= FLAG_RIGHT;
-                        break;
-                    default:
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                        if (y > 0)
-#endif
-                            if (MP_GROUP(x + 1, y - 1) == GROUP_COAL_POWER)
-                                mask |= FLAG_RIGHT;
-                        break;
-                    }
-                }
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (y < WORLD_SIDE_LEN - 1)
-#endif
-                {
-                    switch (MP_GROUP(x, y + 1)) {
-                    case GROUP_ROAD:
-                        tflags |= FLAG_DOWN;
-                    case GROUP_COMMUNE:
-                    case GROUP_COALMINE:
-                    case GROUP_OREMINE:
-                    case GROUP_INDUSTRY_L:
-                    case GROUP_INDUSTRY_H:
-                    case GROUP_RECYCLE:
-                    case GROUP_TIP:
-                    case GROUP_PORT:
-                        mask |= FLAG_DOWN;
-                        break;
-                    default:
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                        if (x > 0)
-#endif
-                            if (MP_GROUP(x - 1, y + 1) == GROUP_COAL_POWER)
-                                mask |= FLAG_DOWN;
-                        break;
-                    }
-                }
-                MP_INFO(x, y).flags &= ~(FLAG_UP | FLAG_DOWN | FLAG_LEFT | FLAG_RIGHT);
-                MP_INFO(x, y).flags |= tflags;
-                MP_TYPE(x, y) = road_table[mask];
-                break;
-
-            case GROUP_RAIL:
-#if	FLAG_LEFT != 1 || FLAG_UP != 2 || FLAG_RIGHT != 4 || FLAG_DOWN != 8
-#error  check_rail_graphics(): you loose
-#error  this algorithm depends on proper flag settings -- (ThMO)
-#endif
-                mask = 0;
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (y > 0)
-#endif
-                {
-                    if (MP_GROUP(x, y - 1) == GROUP_RAIL)
-                        mask |= FLAG_UP;
-                }
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (x > 0)
-#endif
-                {
-                    if (MP_GROUP(x - 1, y) == GROUP_RAIL)
-                        mask |= FLAG_LEFT;
-                }
-                tflags = mask;
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (x < WORLD_SIDE_LEN - 1)
-#endif
-                {
-                    switch (MP_GROUP(x + 1, y)) {
-                    case GROUP_RAIL:
-                        tflags |= FLAG_RIGHT;
-                    case GROUP_COMMUNE:
-                    case GROUP_COALMINE:
-                    case GROUP_OREMINE:
-                    case GROUP_INDUSTRY_L:
-                    case GROUP_INDUSTRY_H:
-                    case GROUP_RECYCLE:
-                    case GROUP_TIP:
-                    case GROUP_PORT:
-                        mask |= FLAG_RIGHT;
-                        break;
-                    default:
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                        if (y > 0)
-#endif
-                            if (MP_GROUP(x + 1, y - 1) == GROUP_COAL_POWER)
-                                mask |= FLAG_RIGHT;
-                        break;
-                    }
-                }
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (y < WORLD_SIDE_LEN - 1)
-#endif
-                {
-                    switch (MP_GROUP(x, y + 1)) {
-                    case GROUP_RAIL:
-                        tflags |= FLAG_DOWN;
-                    case GROUP_COMMUNE:
-                    case GROUP_COALMINE:
-                    case GROUP_OREMINE:
-                    case GROUP_INDUSTRY_L:
-                    case GROUP_INDUSTRY_H:
-                    case GROUP_RECYCLE:
-                    case GROUP_TIP:
-                    case GROUP_PORT:
-                        mask |= FLAG_DOWN;
-                        break;
-                    default:
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                        if (x > 0)
-#endif
-                            if (MP_GROUP(x - 1, y + 1)
-                                == GROUP_COAL_POWER)
-                                mask |= FLAG_DOWN;
-                        break;
-                    }
-                }
-                MP_INFO(x, y).flags &= ~(FLAG_UP | FLAG_DOWN | FLAG_LEFT | FLAG_RIGHT);
-                MP_INFO(x, y).flags |= tflags;
-                MP_TYPE(x, y) = rail_table[mask];
-                break;
-
-            case GROUP_WATER:
-                mask = 0;
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (y > 0)
-#endif
-                {               /* up -- (ThMO) */
-                    if (MP_GROUP(x, y - 1)
-                        == GROUP_WATER)
-                        mask |= 8;
-                }
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (x > 0)
-#endif
-                {               /* left -- (ThMO) */
-                    type = MP_TYPE(x - 1, y);
-                    if ((type == CST_USED && MP_GROUP(MP_INFO(x - 1, y).int_1, MP_INFO(x - 1, y).int_2)
-                         == GROUP_PORT)
-                        || get_group_of_type(type) == GROUP_WATER)
-                        mask |= 4;
-                }
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (x < WORLD_SIDE_LEN - 1)
-#endif
-                {               /* right -- (ThMO) */
-                    if (MP_GROUP(x + 1, y)
-                        == GROUP_WATER)
-                        mask |= 2;
-                }
-#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
-                if (y < WORLD_SIDE_LEN - 1)
-#endif
-                {               /* down -- (ThMO) */
-                    if (MP_GROUP(x, y + 1)
-                        == GROUP_WATER)
-                        ++mask;
-                }
-                MP_TYPE(x, y) = water_table[mask];
-                break;
-            }                   /* end switch */
-        }                       /* end for */
-    }                           /* end for */
-}

Modified: trunk/src/lincity/simulate.cpp
===================================================================
--- trunk/src/lincity/simulate.cpp	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity/simulate.cpp	2007-12-01 20:23:44 UTC (rev 1296)
@@ -32,13 +32,13 @@
 #include "gui_interface/shared_globals.h"
 #include "lctypes.h"
 #include "lin-city.h"
-//#include "cliglobs.h"
 #include "engglobs.h"
 #include "gui_interface/screen_interface.h"
 #include "power.h"
 #include "stats.h"
 #include "gui_interface/pbar_interface.h"
-//#include "module_buttons.h"
+#include "modules/all_modules.h"
+#include "transport.h"
 
 /* extern resources */
 extern void print_total_money(void);
@@ -72,6 +72,7 @@
 static void setup_river(void);
 static void setup_river2(int x, int y, int d);
 static void quick_start_add(int x, int y, short type, int size);
+static void set_mappoint_used(int fromx, int fromy, int x, int y);
 #ifdef DEBUG
         static void debug_mappoints(void); /* AL1: NG 1.1.2 compiler warns that this is unused */
 #endif
@@ -160,6 +161,50 @@
     }
 }
 
+void set_mappoint(int x, int y, short selected_type)
+{
+    int grp;
+
+    if ((grp = get_group_of_type(selected_type)) < 0)
+        return;
+
+    MP_TYPE(x, y) = selected_type;
+    MP_GROUP(x, y) = grp;
+
+    if (main_groups[grp].size == 2) {
+        set_mappoint_used(x, y, x + 1, y);
+        set_mappoint_used(x, y, x, y + 1);
+        set_mappoint_used(x, y, x + 1, y + 1);
+    } else if (main_groups[grp].size == 3) {
+        set_mappoint_used(x, y, x + 1, y);
+        set_mappoint_used(x, y, x + 2, y);
+        set_mappoint_used(x, y, x + 1, y + 1);
+        set_mappoint_used(x, y, x + 2, y + 1);
+        set_mappoint_used(x, y, x + 1, y + 2);
+        set_mappoint_used(x, y, x + 2, y + 2);
+        set_mappoint_used(x, y, x, y + 1);
+        set_mappoint_used(x, y, x, y + 2);
+    } else if (main_groups[grp].size == 4) {
+        set_mappoint_used(x, y, x + 1, y);
+        set_mappoint_used(x, y, x + 2, y);
+        set_mappoint_used(x, y, x + 1, y + 1);
+        set_mappoint_used(x, y, x + 2, y + 1);
+        set_mappoint_used(x, y, x + 1, y + 2);
+        set_mappoint_used(x, y, x + 2, y + 2);
+        set_mappoint_used(x, y, x, y + 1);
+        set_mappoint_used(x, y, x, y + 2);
+
+        set_mappoint_used(x, y, x + 3, y);
+        set_mappoint_used(x, y, x + 3, y + 1);
+        set_mappoint_used(x, y, x + 3, y + 2);
+        set_mappoint_used(x, y, x + 3, y + 3);
+        set_mappoint_used(x, y, x, y + 3);
+        set_mappoint_used(x, y, x + 1, y + 3);
+        set_mappoint_used(x, y, x + 2, y + 3);
+    }
+}
+
+
 /* ---------------------------------------------------------------------- *
  * Private Functions
  * ---------------------------------------------------------------------- */
@@ -963,6 +1008,14 @@
     return (1);
 }
 
+static void set_mappoint_used(int fromx, int fromy, int x, int y)
+{
+    MP_TYPE(x, y) = CST_USED;
+    MP_GROUP(x, y) = GROUP_USED;
+    MP_INFO(x, y).int_1 = fromx;
+    MP_INFO(x, y).int_2 = fromy;
+}
+
 #ifdef DEBUG
 static void debug_mappoints(void)
 {

Modified: trunk/src/lincity/simulate.h
===================================================================
--- trunk/src/lincity/simulate.h	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity/simulate.h	2007-12-01 20:23:44 UTC (rev 1296)
@@ -12,5 +12,6 @@
 int count_groups(int gr);
 void count_all_groups(int *group_count);
 void init_mappoint_array(void);
+void set_mappoint(int x, int y, short selected_type);
 
 #endif /* __simulate_h__ */

Modified: trunk/src/lincity/transport.cpp
===================================================================
--- trunk/src/lincity/transport.cpp	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity/transport.cpp	2007-12-01 20:23:44 UTC (rev 1296)
@@ -7,6 +7,7 @@
 #include <stdlib.h>
 #include <assert.h>
 #include "lin-city.h"
+#include "lctypes.h"
 #include "transport.h"
 #include "power.h"
 #include "stats.h"              /* for transport_cost */
@@ -227,3 +228,428 @@
         }
     }
 }
+
+void connect_transport(int originx, int originy, int w, int h)
+{
+    int x, y, mask, tflags;
+    short group, type;
+
+    static const short power_table[16] = {
+        CST_POWERL_H_D, CST_POWERL_V_D, CST_POWERL_H_D, CST_POWERL_RD_D,
+        CST_POWERL_H_D, CST_POWERL_LD_D, CST_POWERL_H_D, CST_POWERL_LDR_D,
+        CST_POWERL_V_D, CST_POWERL_V_D, CST_POWERL_RU_D, CST_POWERL_UDR_D,
+        CST_POWERL_LU_D, CST_POWERL_LDU_D, CST_POWERL_LUR_D, CST_POWERL_LUDR_D
+    };
+    static const short track_table[16] = {
+        CST_TRACK_LR, CST_TRACK_LR, CST_TRACK_UD, CST_TRACK_LU,
+        CST_TRACK_LR, CST_TRACK_LR, CST_TRACK_UR, CST_TRACK_LUR,
+        CST_TRACK_UD, CST_TRACK_LD, CST_TRACK_UD, CST_TRACK_LUD,
+        CST_TRACK_DR, CST_TRACK_LDR, CST_TRACK_UDR, CST_TRACK_LUDR
+    };
+    static const short road_table[16] = {
+        CST_ROAD_LR, CST_ROAD_LR, CST_ROAD_UD, CST_ROAD_LU,
+        CST_ROAD_LR, CST_ROAD_LR, CST_ROAD_UR, CST_ROAD_LUR,
+        CST_ROAD_UD, CST_ROAD_LD, CST_ROAD_UD, CST_ROAD_LUD,
+        CST_ROAD_DR, CST_ROAD_LDR, CST_ROAD_UDR, CST_ROAD_LUDR
+    };
+    static const short rail_table[16] = {
+        CST_RAIL_LR, CST_RAIL_LR, CST_RAIL_UD, CST_RAIL_LU,
+        CST_RAIL_LR, CST_RAIL_LR, CST_RAIL_UR, CST_RAIL_LUR,
+        CST_RAIL_UD, CST_RAIL_LD, CST_RAIL_UD, CST_RAIL_LUD,
+        CST_RAIL_DR, CST_RAIL_LDR, CST_RAIL_UDR, CST_RAIL_LUDR
+    };
+    static const short water_table[16] = {
+        CST_WATER, CST_WATER_D, CST_WATER_R, CST_WATER_RD,
+        CST_WATER_L, CST_WATER_LD, CST_WATER_LR, CST_WATER_LRD,
+        CST_WATER_U, CST_WATER_UD, CST_WATER_UR, CST_WATER_URD,
+        CST_WATER_LU, CST_WATER_LUD, CST_WATER_LUR, CST_WATER_LURD
+    };
+
+    /* Adjust originx,originy,w,h to proper range */
+    if (originx <= 0) {
+        w -= 1 - originx;
+        originx = 1;
+    }
+    if (originy <= 0) {
+        h -= 1 - originy;
+        originy = 1;
+    }
+    if (originx + w >= WORLD_SIDE_LEN) {
+        w = WORLD_SIDE_LEN - originx;
+    }
+    if (originy + h >= WORLD_SIDE_LEN) {
+        h = WORLD_SIDE_LEN - originy;
+    }
+
+    for (x = originx; x < originx + w; x++) {
+        for (y = originy; y < originy + h; y++) {
+            switch (MP_GROUP(x, y)) {
+            case GROUP_POWER_LINE:
+                /* First, set up a mask indicating into which directions 
+                   power may be transferred */
+                mask = 0;
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (y > 0)
+#endif
+                {               /* up -- (ThMO) */
+                    group = MP_GROUP(x, y - 1);
+
+                    /* see if dug under track, rail or road */
+
+                    if (y > 1 && (group == GROUP_TRACK
+                                  || group == GROUP_RAIL || group == GROUP_ROAD || group == GROUP_WATER))
+                        group = MP_GROUP(x, y - 2);
+                    switch (group) {
+                    case GROUP_POWER_LINE:
+                    case GROUP_SOLAR_POWER:
+                    case GROUP_SUBSTATION:
+                    case GROUP_COAL_POWER:
+                        mask |= 8;
+                        break;
+                    }
+                }
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (x > 0)
+#endif
+                {               /* left -- (ThMO) */
+                    group = MP_GROUP(x - 1, y);
+                    if (x > 1 && (group == GROUP_TRACK
+                                  || group == GROUP_RAIL || group == GROUP_ROAD || group == GROUP_WATER))
+                        group = MP_GROUP(x - 2, y);
+                    switch (group) {
+                    case GROUP_POWER_LINE:
+                    case GROUP_SOLAR_POWER:
+                    case GROUP_SUBSTATION:
+                    case GROUP_COAL_POWER:
+                        mask |= 4;
+                        break;
+                    }
+                }
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (x < WORLD_SIDE_LEN - 1)
+#endif
+                {               /* right -- (ThMO) */
+                    group = MP_GROUP(x + 1, y);
+                    if (x < WORLD_SIDE_LEN - 2 && (group == GROUP_TRACK
+                                                   || group == GROUP_RAIL
+                                                   || group == GROUP_ROAD || group == GROUP_WATER))
+                        group = MP_GROUP(x + 2, y);
+                    switch (group) {
+                    case GROUP_WINDMILL:
+                        if (MP_INFO(x + 1, y).int_2 < MODERN_WINDMILL_TECH)
+                            break;
+                    case GROUP_POWER_LINE:
+                    case GROUP_SOLAR_POWER:
+                    case GROUP_SUBSTATION:
+                    case GROUP_COAL_POWER:
+                        mask |= 2;
+                        break;
+                    }
+                }
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (y < WORLD_SIDE_LEN - 1)
+#endif
+                {               /* down -- (ThMO) */
+                    group = MP_GROUP(x, y + 1);
+                    if (y < WORLD_SIDE_LEN - 2 && (group == GROUP_TRACK
+                                                   || group == GROUP_RAIL
+                                                   || group == GROUP_ROAD || group == GROUP_WATER))
+                        group = MP_GROUP(x, y + 2);
+                    switch (group) {
+                    case GROUP_WINDMILL:
+                        if (MP_INFO(x, y + 1).int_2 < MODERN_WINDMILL_TECH)
+                            break;
+                    case GROUP_POWER_LINE:
+                    case GROUP_SOLAR_POWER:
+                    case GROUP_SUBSTATION:
+                    case GROUP_COAL_POWER:
+                        ++mask;
+                        break;
+                    }
+                }
+                /* Next, set the connectivity into MP_TYPE */
+                MP_TYPE(x, y) = power_table[mask];
+                /* Finally, adjust MP_TYPE to show electon bolt */
+#ifdef commentout
+              WCK:This is done in do_power_line now if (MP_INFO(x, y).int_1 != 0)
+                    MP_TYPE(x, y) -= 11;
+#endif
+                break;
+
+            case GROUP_TRACK:
+#if	FLAG_LEFT != 1 || FLAG_UP != 2 || FLAG_RIGHT != 4 || FLAG_DOWN != 8
+#error  check_track_graphics(): you loose
+#error  this algorithm depends on proper flag settings -- (ThMO)
+#endif
+                mask = 0;
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (y > 0)
+#endif
+                {
+                    if (MP_GROUP(x, y - 1) == GROUP_TRACK)
+                        mask |= FLAG_UP;
+                }
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (x > 0)
+#endif
+                {
+                    if (MP_GROUP(x - 1, y) == GROUP_TRACK)
+                        mask |= FLAG_LEFT;
+                }
+                tflags = mask;
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (x < WORLD_SIDE_LEN - 1)
+#endif
+                {
+                    switch (MP_GROUP(x + 1, y)) {
+                    case GROUP_TRACK:
+                        tflags |= FLAG_RIGHT;
+                    case GROUP_COMMUNE:
+                    case GROUP_COALMINE:
+                    case GROUP_OREMINE:
+                    case GROUP_INDUSTRY_L:
+                    case GROUP_INDUSTRY_H:
+                    case GROUP_RECYCLE:
+                    case GROUP_TIP:
+                    case GROUP_PORT:
+                        mask |= FLAG_RIGHT;
+                        break;
+                    default:
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                        if (y > 0)
+#endif
+                            if (MP_GROUP(x + 1, y - 1) == GROUP_COAL_POWER)
+                                mask |= FLAG_RIGHT;
+                        break;
+                    }
+                }
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (y < WORLD_SIDE_LEN - 1)
+#endif
+                {
+                    switch (MP_GROUP(x, y + 1)) {
+                    case GROUP_TRACK:
+                        tflags |= FLAG_DOWN;
+                    case GROUP_COMMUNE:
+                    case GROUP_COALMINE:
+                    case GROUP_OREMINE:
+                    case GROUP_INDUSTRY_L:
+                    case GROUP_INDUSTRY_H:
+                    case GROUP_RECYCLE:
+                    case GROUP_TIP:
+                    case GROUP_PORT:
+                        mask |= FLAG_DOWN;
+                        break;
+                    default:
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                        if (x > 0)
+#endif
+                            if (MP_GROUP(x - 1, y + 1) == GROUP_COAL_POWER)
+                                mask |= FLAG_DOWN;
+                        break;
+                    }
+                }
+                MP_INFO(x, y).flags &= ~(FLAG_UP | FLAG_DOWN | FLAG_LEFT | FLAG_RIGHT);
+                MP_INFO(x, y).flags |= tflags;
+                MP_TYPE(x, y) = track_table[mask];
+                break;
+
+            case GROUP_ROAD:
+#if	FLAG_LEFT != 1 || FLAG_UP != 2 || FLAG_RIGHT != 4 || FLAG_DOWN != 8
+#error  check_road_graphics(): you loose
+#error  this algorithm depends on proper flag settings -- (ThMO)
+#endif
+                mask = 0;
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (y > 0)
+#endif
+                {
+                    if (MP_GROUP(x, y - 1) == GROUP_ROAD)
+                        mask |= FLAG_UP;
+                }
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (x > 0)
+#endif
+                {
+                    if (MP_GROUP(x - 1, y) == GROUP_ROAD)
+                        mask |= FLAG_LEFT;
+                }
+                tflags = mask;
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (x < WORLD_SIDE_LEN - 1)
+#endif
+                {
+                    switch (MP_GROUP(x + 1, y)) {
+                    case GROUP_ROAD:
+                        tflags |= FLAG_RIGHT;
+                    case GROUP_COMMUNE:
+                    case GROUP_COALMINE:
+                    case GROUP_OREMINE:
+                    case GROUP_INDUSTRY_L:
+                    case GROUP_INDUSTRY_H:
+                    case GROUP_RECYCLE:
+                    case GROUP_TIP:
+                    case GROUP_PORT:
+                        mask |= FLAG_RIGHT;
+                        break;
+                    default:
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                        if (y > 0)
+#endif
+                            if (MP_GROUP(x + 1, y - 1) == GROUP_COAL_POWER)
+                                mask |= FLAG_RIGHT;
+                        break;
+                    }
+                }
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (y < WORLD_SIDE_LEN - 1)
+#endif
+                {
+                    switch (MP_GROUP(x, y + 1)) {
+                    case GROUP_ROAD:
+                        tflags |= FLAG_DOWN;
+                    case GROUP_COMMUNE:
+                    case GROUP_COALMINE:
+                    case GROUP_OREMINE:
+                    case GROUP_INDUSTRY_L:
+                    case GROUP_INDUSTRY_H:
+                    case GROUP_RECYCLE:
+                    case GROUP_TIP:
+                    case GROUP_PORT:
+                        mask |= FLAG_DOWN;
+                        break;
+                    default:
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                        if (x > 0)
+#endif
+                            if (MP_GROUP(x - 1, y + 1) == GROUP_COAL_POWER)
+                                mask |= FLAG_DOWN;
+                        break;
+                    }
+                }
+                MP_INFO(x, y).flags &= ~(FLAG_UP | FLAG_DOWN | FLAG_LEFT | FLAG_RIGHT);
+                MP_INFO(x, y).flags |= tflags;
+                MP_TYPE(x, y) = road_table[mask];
+                break;
+
+            case GROUP_RAIL:
+#if	FLAG_LEFT != 1 || FLAG_UP != 2 || FLAG_RIGHT != 4 || FLAG_DOWN != 8
+#error  check_rail_graphics(): you loose
+#error  this algorithm depends on proper flag settings -- (ThMO)
+#endif
+                mask = 0;
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (y > 0)
+#endif
+                {
+                    if (MP_GROUP(x, y - 1) == GROUP_RAIL)
+                        mask |= FLAG_UP;
+                }
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (x > 0)
+#endif
+                {
+                    if (MP_GROUP(x - 1, y) == GROUP_RAIL)
+                        mask |= FLAG_LEFT;
+                }
+                tflags = mask;
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (x < WORLD_SIDE_LEN - 1)
+#endif
+                {
+                    switch (MP_GROUP(x + 1, y)) {
+                    case GROUP_RAIL:
+                        tflags |= FLAG_RIGHT;
+                    case GROUP_COMMUNE:
+                    case GROUP_COALMINE:
+                    case GROUP_OREMINE:
+                    case GROUP_INDUSTRY_L:
+                    case GROUP_INDUSTRY_H:
+                    case GROUP_RECYCLE:
+                    case GROUP_TIP:
+                    case GROUP_PORT:
+                        mask |= FLAG_RIGHT;
+                        break;
+                    default:
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                        if (y > 0)
+#endif
+                            if (MP_GROUP(x + 1, y - 1) == GROUP_COAL_POWER)
+                                mask |= FLAG_RIGHT;
+                        break;
+                    }
+                }
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (y < WORLD_SIDE_LEN - 1)
+#endif
+                {
+                    switch (MP_GROUP(x, y + 1)) {
+                    case GROUP_RAIL:
+                        tflags |= FLAG_DOWN;
+                    case GROUP_COMMUNE:
+                    case GROUP_COALMINE:
+                    case GROUP_OREMINE:
+                    case GROUP_INDUSTRY_L:
+                    case GROUP_INDUSTRY_H:
+                    case GROUP_RECYCLE:
+                    case GROUP_TIP:
+                    case GROUP_PORT:
+                        mask |= FLAG_DOWN;
+                        break;
+                    default:
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                        if (x > 0)
+#endif
+                            if (MP_GROUP(x - 1, y + 1)
+                                == GROUP_COAL_POWER)
+                                mask |= FLAG_DOWN;
+                        break;
+                    }
+                }
+                MP_INFO(x, y).flags &= ~(FLAG_UP | FLAG_DOWN | FLAG_LEFT | FLAG_RIGHT);
+                MP_INFO(x, y).flags |= tflags;
+                MP_TYPE(x, y) = rail_table[mask];
+                break;
+
+            case GROUP_WATER:
+                mask = 0;
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (y > 0)
+#endif
+                {               /* up -- (ThMO) */
+                    if (MP_GROUP(x, y - 1)
+                        == GROUP_WATER)
+                        mask |= 8;
+                }
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (x > 0)
+#endif
+                {               /* left -- (ThMO) */
+                    type = MP_TYPE(x - 1, y);
+                    if ((type == CST_USED && MP_GROUP(MP_INFO(x - 1, y).int_1, MP_INFO(x - 1, y).int_2)
+                         == GROUP_PORT)
+                        || get_group_of_type(type) == GROUP_WATER)
+                        mask |= 4;
+                }
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (x < WORLD_SIDE_LEN - 1)
+#endif
+                {               /* right -- (ThMO) */
+                    if (MP_GROUP(x + 1, y)
+                        == GROUP_WATER)
+                        mask |= 2;
+                }
+#ifdef	THOMMY_MAY_BE_WRONG     /* just in case -- (ThMO) */
+                if (y < WORLD_SIDE_LEN - 1)
+#endif
+                {               /* down -- (ThMO) */
+                    if (MP_GROUP(x, y + 1)
+                        == GROUP_WATER)
+                        ++mask;
+                }
+                MP_TYPE(x, y) = water_table[mask];
+                break;
+            }                   /* end switch */
+        }                       /* end for */
+    }                           /* end for */
+}

Modified: trunk/src/lincity/transport.h
===================================================================
--- trunk/src/lincity/transport.h	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity/transport.h	2007-12-01 20:23:44 UTC (rev 1296)
@@ -16,3 +16,6 @@
  (MP_GROUP(x,y) == GROUP_POWER_LINE))
 
 #endif
+
+void general_transport(Map_Point_Info * minfo, int *pol, int max_waste, int *waste_count);
+void connect_transport(int originx, int originy, int w, int h);

Modified: trunk/src/lincity-ng/ErrorInterface.cpp
===================================================================
--- trunk/src/lincity-ng/ErrorInterface.cpp	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity-ng/ErrorInterface.cpp	2007-12-01 20:23:44 UTC (rev 1296)
@@ -19,6 +19,7 @@
 
 #include <iostream>
 
+#include "ErrorInterface.hpp"
 void do_error (const char *s)
 {
   std::cerr<<s<<std::endl;

Added: trunk/src/lincity-ng/ErrorInterface.hpp
===================================================================
--- trunk/src/lincity-ng/ErrorInterface.hpp	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity-ng/ErrorInterface.hpp	2007-12-01 20:23:44 UTC (rev 1296)
@@ -0,0 +1,5 @@
+#ifndef __ErrorInterface_h__
+#define __ErrorInterface_h__
+void do_error (const char *s);
+void HandleError (const char *s, int i);
+#endif

Modified: trunk/src/lincity-ng/MainLincity.cpp
===================================================================
--- trunk/src/lincity-ng/MainLincity.cpp	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity-ng/MainLincity.cpp	2007-12-01 20:23:44 UTC (rev 1296)
@@ -43,8 +43,10 @@
 #include "Config.hpp"
 
 extern void print_total_money(void);
+extern void init_types(void);
 
 int lincitySpeed = MED_TIME_FOR_YEAR;
+/******************************************/
 
 void setLincitySpeed( int speed )
 {

Modified: trunk/src/lincity-ng/MainMenu.cpp
===================================================================
--- trunk/src/lincity-ng/MainMenu.cpp	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity-ng/MainMenu.cpp	2007-12-01 20:23:44 UTC (rev 1296)
@@ -50,6 +50,8 @@
 
 #include "tinygettext/gettext.hpp"
 
+extern void new_city(int *originx, int *originy, int random_village);
+
 MainMenu::MainMenu()
 {
     loadMainMenu();

Modified: trunk/src/lincity-ng/MiniMap.cpp
===================================================================
--- trunk/src/lincity-ng/MiniMap.cpp	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity-ng/MiniMap.cpp	2007-12-01 20:23:44 UTC (rev 1296)
@@ -50,6 +50,8 @@
 #include "Game.hpp"
 #include "HelpWindow.hpp"
 
+extern int get_power(int x, int y, int power, int block_industry);
+
 /** List of mapview buttons. The "" entries separate mapview buttons that are
  * switched
  */

Modified: trunk/src/lincity-ng/TimerInterface.hpp
===================================================================
--- trunk/src/lincity-ng/TimerInterface.hpp	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/lincity-ng/TimerInterface.hpp	2007-12-01 20:23:44 UTC (rev 1296)
@@ -19,5 +19,6 @@
 #define __lc_timer_h__
 
 void reset_start_time();
+void get_real_time(void);
 
 #endif

Modified: trunk/src/oldgui/main.cpp
===================================================================
--- trunk/src/oldgui/main.cpp	2007-12-01 17:10:44 UTC (rev 1295)
+++ trunk/src/oldgui/main.cpp	2007-12-01 20:23:44 UTC (rev 1296)
@@ -72,6 +72,10 @@
 
 #define DEBUG_KEYS 1
 
+#ifndef LC_X11
+    extern void parse_args(int, char **);
+#endif
+
 // global gettext instance
 TinyGetText::DictionaryManager* dictionaryManager = 0;
 



From alainb at mail.berlios.de  Sat Dec  1 23:41:42 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sat, 1 Dec 2007 23:41:42 +0100
Subject: [Lincity-ng-commit] r1297 - in trunk/src: lincity lincity-ng
Message-ID: <200712012241.lB1Mfg06020193@sheep.berlios.de>

Author: alainb
Date: 2007-12-01 23:41:41 +0100 (Sat, 01 Dec 2007)
New Revision: 1297

Modified:
   trunk/src/lincity-ng/ReadPngInterface.cpp
   trunk/src/lincity/engglobs.h
   trunk/src/lincity/lcconfig.h
   trunk/src/lincity/lcstring.h
   trunk/src/lincity/lintypes.h
Log:
some headers move, and comment out #warning directive wrt MSC_VER

Modified: trunk/src/lincity/engglobs.h
===================================================================
--- trunk/src/lincity/engglobs.h	2007-12-01 20:23:44 UTC (rev 1296)
+++ trunk/src/lincity/engglobs.h	2007-12-01 22:41:41 UTC (rev 1297)
@@ -7,32 +7,13 @@
 #define __engglobs_h__
 
 #include "lin-city.h"
-//#include "common.h"
-//#include "geometry.h"
 
 extern int use_waterwell, ldsv_version;
 
-/* GCS -- One of these days I will get this right. */
-struct map_struct {
-    short type[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
-    short group[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
-    int pollution[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
-    Map_Point_Info info[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
-};
-typedef struct map_struct Map;
-
 extern Map map;
+extern struct GROUP main_groups[NUM_OF_GROUPS];
+extern struct TYPE main_types[NUM_OF_TYPES];
 
-#define MP_TYPE(x,y)   map.type[x][y]
-#define MP_GROUP(x,y)  map.group[x][y]
-#define MP_POL(x,y)    map.pollution[x][y]
-#define MP_INFO(x,y)   map.info[x][y]
-
-#define MP_SIZE(x,y)   main_groups[MP_GROUP(x,y)].size
-#define MP_COLOR(x,y)  main_groups[MP_GROUP(x,y)].colour
-#define MP_GROUP_IS_RESIDENCE(x,y)  (GROUP_IS_RESIDENCE(MP_GROUP(x,y)))
-#define HAS_UGWATER(x,y) (MP_INFO(x,y).flags & FLAG_HAS_UNDERGROUND_WATER)
-
 extern int mappoint_array_x[WORLD_SIDE_LEN], mappoint_array_y[WORLD_SIDE_LEN];
 extern int numof_shanties, numof_communes;
 extern int last_built_x, last_built_y;

Modified: trunk/src/lincity/lcconfig.h
===================================================================
--- trunk/src/lincity/lcconfig.h	2007-12-01 20:23:44 UTC (rev 1296)
+++ trunk/src/lincity/lcconfig.h	2007-12-01 22:41:41 UTC (rev 1297)
@@ -13,7 +13,7 @@
 #endif
 
 #ifndef _MSC_VER
-#warning deprecated header
+//#warning deprecated header
 #else
 #pragma message(__FILE__ ": deprecated header")
 #endif

Modified: trunk/src/lincity/lcstring.h
===================================================================
--- trunk/src/lincity/lcstring.h	2007-12-01 20:23:44 UTC (rev 1296)
+++ trunk/src/lincity/lcstring.h	2007-12-01 22:41:41 UTC (rev 1297)
@@ -12,7 +12,7 @@
 #endif
 
 #ifndef _MSC_VER
-#warning deprecated header
+//#warning deprecated header
 #else
 #pragma message(__FILE__ ": deprecated header")
 #endif

Modified: trunk/src/lincity/lintypes.h
===================================================================
--- trunk/src/lincity/lintypes.h	2007-12-01 20:23:44 UTC (rev 1296)
+++ trunk/src/lincity/lintypes.h	2007-12-01 22:41:41 UTC (rev 1297)
@@ -6,6 +6,12 @@
 #ifndef __lintypes_h__
 #define __lintypes_h__
 
+int get_group_of_type(short selected_type);
+void set_map_groups(void);
+int get_type_cost(short type);
+int get_group_cost(short group);
+void get_type_name(short type, char *s);
+
 /********** Data structures ***************/
 
 struct GROUP {
@@ -27,16 +33,6 @@
     char *graphic;              /* Bitmap of the graphic */
 };
 
-int get_group_of_type(short selected_type);
-void set_map_groups(void);
-int get_type_cost(short type);
-int get_group_cost(short group);
-void get_type_name(short type, char *s);
-
-extern struct GROUP main_groups[NUM_OF_GROUPS];
-extern struct TYPE main_types[NUM_OF_TYPES];
-
-
 struct map_point_info_struct {
     int population;
     int flags;
@@ -65,4 +61,26 @@
 };
 typedef struct update_scoreboard_struct Update_Scoreboard;
 
+/* GCS -- One of these days I will get this right. */
+struct map_struct {
+    short type[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
+    short group[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
+    int pollution[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
+    Map_Point_Info info[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
+};
+typedef struct map_struct Map;
+
+
+#define MP_TYPE(x,y)   map.type[x][y]
+#define MP_GROUP(x,y)  map.group[x][y]
+#define MP_POL(x,y)    map.pollution[x][y]
+#define MP_INFO(x,y)   map.info[x][y]
+
+#define MP_SIZE(x,y)   main_groups[MP_GROUP(x,y)].size
+#define MP_COLOR(x,y)  main_groups[MP_GROUP(x,y)].colour
+#define MP_GROUP_IS_RESIDENCE(x,y)  (GROUP_IS_RESIDENCE(MP_GROUP(x,y)))
+#define HAS_UGWATER(x,y) (MP_INFO(x,y).flags & FLAG_HAS_UNDERGROUND_WATER)
+
+
+
 #endif /* __lintypes_h__ */

Modified: trunk/src/lincity-ng/ReadPngInterface.cpp
===================================================================
--- trunk/src/lincity-ng/ReadPngInterface.cpp	2007-12-01 20:23:44 UTC (rev 1296)
+++ trunk/src/lincity-ng/ReadPngInterface.cpp	2007-12-01 22:41:41 UTC (rev 1297)
@@ -24,7 +24,7 @@
 #include <stdlib.h>
 #include "lincity/lin-city.h"
 #include "lincity/lctypes.h"
-#include "lincity/lintypes.h"
+#include "lincity/engglobs.h"
 
 static void LG(short type, short group, const char* id)
 {



From alainb at mail.berlios.de  Sun Dec  2 00:20:14 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sun, 2 Dec 2007 00:20:14 +0100
Subject: [Lincity-ng-commit] r1298 - in trunk/src/lincity: . modules
Message-ID: <200712012320.lB1NKEsi023376@sheep.berlios.de>

Author: alainb
Date: 2007-12-02 00:20:13 +0100 (Sun, 02 Dec 2007)
New Revision: 1298

Removed:
   trunk/src/lincity/shrtypes.cpp
Modified:
   trunk/src/lincity/modules/organic_farm.cpp
   trunk/src/lincity/modules/university.cpp
Log:
remove (now) void file

Modified: trunk/src/lincity/modules/organic_farm.cpp
===================================================================
--- trunk/src/lincity/modules/organic_farm.cpp	2007-12-01 22:41:41 UTC (rev 1297)
+++ trunk/src/lincity/modules/organic_farm.cpp	2007-12-01 23:20:13 UTC (rev 1298)
@@ -6,7 +6,7 @@
  * ---------------------------------------------------------------------- */
 
 #include "modules.h"
-#include "../lcconfig.h"
+//#include "../lcconfig.h"
 #include "organic_farm.h"
 #include "lin-city.h"
 

Modified: trunk/src/lincity/modules/university.cpp
===================================================================
--- trunk/src/lincity/modules/university.cpp	2007-12-01 22:41:41 UTC (rev 1297)
+++ trunk/src/lincity/modules/university.cpp	2007-12-01 23:20:13 UTC (rev 1298)
@@ -6,7 +6,7 @@
  * ---------------------------------------------------------------------- */
 
 #include "modules.h"
-#include "../lcconfig.h"
+//#include "../lcconfig.h"
 #include "university.h"
 
 void do_university(int x, int y)

Deleted: trunk/src/lincity/shrtypes.cpp
===================================================================
--- trunk/src/lincity/shrtypes.cpp	2007-12-01 22:41:41 UTC (rev 1297)
+++ trunk/src/lincity/shrtypes.cpp	2007-12-01 23:20:13 UTC (rev 1298)
@@ -1,16 +0,0 @@
-/* ---------------------------------------------------------------------- *
- * shrtypes.c
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * ---------------------------------------------------------------------- */
-#include "lcconfig.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include "lcstring.h"
-//#include "common.h"
-#include "lctypes.h"
-#include "lin-city.h"
-//#include "typeinit.h"
-//#include "cliglobs.h"
-#include "engglobs.h"
-



From alainb at mail.berlios.de  Sun Dec  2 00:25:10 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sun, 2 Dec 2007 00:25:10 +0100
Subject: [Lincity-ng-commit] r1299 - trunk/src
Message-ID: <200712012325.lB1NPALg023543@sheep.berlios.de>

Author: alainb
Date: 2007-12-02 00:25:09 +0100 (Sun, 02 Dec 2007)
New Revision: 1299

Removed:
   trunk/src/oldgui/
Log:
remove oldgui from sources. (It is broken due to waterwell and recent changes)



From alainb at mail.berlios.de  Sun Dec  2 01:00:09 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sun, 2 Dec 2007 01:00:09 +0100
Subject: [Lincity-ng-commit] r1300 - in trunk: . data src/lincity
Message-ID: <200712020000.lB2009SQ005005@sheep.berlios.de>

Author: alainb
Date: 2007-12-02 01:00:08 +0100 (Sun, 02 Dec 2007)
New Revision: 1300

Removed:
   trunk/data/icons/
   trunk/src/lincity/unused/
Modified:
   trunk/TODO
   trunk/src/lincity/lctypes.h
Log:
remove oldgui icons, and a big bunch of references to oldgui

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2007-12-01 23:25:09 UTC (rev 1299)
+++ trunk/TODO	2007-12-02 00:00:08 UTC (rev 1300)
@@ -72,6 +72,12 @@
      won't change to anything else. At least the caption is not shown.
 
 --Game--
+ [H] Find a way to "upgrade" old games 
+        - add random underground water , trees, desert
+        - blocking message (and pause game) that waterwelll must be added or global starvation will occur
+
+ [H] Upgrade scenarios good/bad time
+
  [H] Check that info obtained with query tool exists/are correct for
         waterwell, residences, farms, communes, parks
 

Modified: trunk/src/lincity/lctypes.h
===================================================================
--- trunk/src/lincity/lctypes.h	2007-12-01 23:25:09 UTC (rev 1299)
+++ trunk/src/lincity/lctypes.h	2007-12-02 00:00:08 UTC (rev 1300)
@@ -7,868 +7,597 @@
 #define __lctypes_h__
 
 #define CST_GREEN		0
-#define CST_GREEN_G		"green.csi"
 #define LCT_GREEN_G		"green"
 
 /* H=horiz V=vertical LD=left down etc.   L= Live D=dead */
 #define CST_POWERL_H_L		1
-#define CST_POWERL_H_L_G	"powerlhl.csi"
 #define LCT_POWERL_H_L_G	"powerlhl"
 #define CST_POWERL_V_L  	2
-#define CST_POWERL_V_L_G  	"powerlvl.csi"
 #define LCT_POWERL_V_L_G  	"powerlvl"
 #define CST_POWERL_LD_L   	3
-#define CST_POWERL_LD_L_G 	"powerlldl.csi"
 #define LCT_POWERL_LD_L_G 	"powerlldl"
 #define CST_POWERL_RD_L   	4
-#define CST_POWERL_RD_L_G 	"powerlrdl.csi"
 #define LCT_POWERL_RD_L_G 	"powerlrdl"
 #define CST_POWERL_LU_L    	5
-#define CST_POWERL_LU_L_G  	"powerllul.csi"
 #define LCT_POWERL_LU_L_G  	"powerllul"
 #define CST_POWERL_RU_L    	6
-#define CST_POWERL_RU_L_G  	"powerlrul.csi"
 #define LCT_POWERL_RU_L_G  	"powerlrul"
 #define CST_POWERL_LDU_L	7
-#define CST_POWERL_LDU_L_G	"powerlldul.csi"
 #define LCT_POWERL_LDU_L_G	"powerlldul"
 #define CST_POWERL_LDR_L	8
-#define CST_POWERL_LDR_L_G	"powerlldrl.csi"
 #define LCT_POWERL_LDR_L_G	"powerlldrl"
 #define CST_POWERL_LUR_L	9
-#define CST_POWERL_LUR_L_G	"powerllurl.csi"
 #define LCT_POWERL_LUR_L_G	"powerllurl"
 #define CST_POWERL_UDR_L	10
-#define CST_POWERL_UDR_L_G	"powerludrl.csi"
 #define LCT_POWERL_UDR_L_G	"powerludrl"
 #define CST_POWERL_LUDR_L	11
-#define CST_POWERL_LUDR_L_G	"powerlludrl.csi"
 #define LCT_POWERL_LUDR_L_G	"powerlludrl"
 
 #define CST_POWERL_H_D          12
-#define CST_POWERL_H_D_G        "powerlhd.csi"
 #define LCT_POWERL_H_D_G        "powerlhd"
 #define CST_POWERL_V_D          13
-#define CST_POWERL_V_D_G        "powerlvd.csi"
 #define LCT_POWERL_V_D_G        "powerlvd"
 #define CST_POWERL_LD_D         14
-#define CST_POWERL_LD_D_G       "powerlldd.csi"
 #define LCT_POWERL_LD_D_G       "powerlldd"
 #define CST_POWERL_RD_D         15
-#define CST_POWERL_RD_D_G       "powerlrdd.csi"
 #define LCT_POWERL_RD_D_G       "powerlrdd"
 #define CST_POWERL_LU_D         16
-#define CST_POWERL_LU_D_G       "powerllud.csi"
 #define LCT_POWERL_LU_D_G       "powerllud"
 #define CST_POWERL_RU_D         17
-#define CST_POWERL_RU_D_G       "powerlrud.csi"
 #define LCT_POWERL_RU_D_G       "powerlrud"
 #define CST_POWERL_LDU_D        18
-#define CST_POWERL_LDU_D_G      "powerlldud.csi"
 #define LCT_POWERL_LDU_D_G      "powerlldud"
 #define CST_POWERL_LDR_D        19
-#define CST_POWERL_LDR_D_G      "powerlldrd.csi"
 #define LCT_POWERL_LDR_D_G      "powerlldrd"
 #define CST_POWERL_LUR_D        20
-#define CST_POWERL_LUR_D_G      "powerllurd.csi"
 #define LCT_POWERL_LUR_D_G      "powerllurd"
 #define CST_POWERL_UDR_D        21
-#define CST_POWERL_UDR_D_G      "powerludrd.csi"
 #define LCT_POWERL_UDR_D_G      "powerludrd"
 #define CST_POWERL_LUDR_D       22
-#define CST_POWERL_LUDR_D_G     "powerlludrd.csi"
 #define LCT_POWERL_LUDR_D_G     "powerlludrd"
 
 #define CST_SHANTY              23
-#define CST_SHANTY_G            "shanty.csi"
 #define LCT_SHANTY_G            "shanty"
 
 /* move this to number 1 or 255 or something. OK here for now. */
 #define CST_USED		39
 
 #define CST_POWERS_SOLAR	40
-#define CST_POWERS_SOLAR_G	"powerssolar.csi"
 #define LCT_POWERS_SOLAR_G	"powerssolar"
 
 #define CST_POWERS_COAL_EMPTY	41
-#define CST_POWERS_COAL_EMPTY_G	"powerscoal-empty.csi"
 #define LCT_POWERS_COAL_EMPTY_G	"powerscoal-empty"
 #define CST_POWERS_COAL_LOW     42
-#define CST_POWERS_COAL_LOW_G   "powerscoal-low.csi"
 #define LCT_POWERS_COAL_LOW_G   "powerscoal-low"
 #define CST_POWERS_COAL_MED     43
-#define CST_POWERS_COAL_MED_G   "powerscoal-med.csi"
 #define LCT_POWERS_COAL_MED_G   "powerscoal-med"
 #define CST_POWERS_COAL_FULL    44
-#define CST_POWERS_COAL_FULL_G  "powerscoal-full.csi"
 #define LCT_POWERS_COAL_FULL_G  "powerscoal-full"
 
 #define CST_BURNT		49
-#define CST_BURNT_G		"burnt_land.csi"
 #define LCT_BURNT_G		"burnt_land"
 
 #define CST_SUBSTATION_R	50
-#define CST_SUBSTATION_R_G	"substation-R.csi"
 #define LCT_SUBSTATION_R_G	"substation-R"
 #define CST_SUBSTATION_G        51
-#define CST_SUBSTATION_G_G      "substation-G.csi"
 #define LCT_SUBSTATION_G_G      "substation-G"
 #define CST_SUBSTATION_RG       52
-#define CST_SUBSTATION_RG_G     "substation-RG.csi"
 #define LCT_SUBSTATION_RG_G     "substation-RG"
 
 #define CST_UNIVERSITY		53
-#define CST_UNIVERSITY_G	"university.csi"
 #define LCT_UNIVERSITY_G	"university"
 
 #define CST_RESIDENCE_LL	61
-#define CST_RESIDENCE_LL_G	"reslowlow.csi"
 #define LCT_RESIDENCE_LL_G	"reslowlow"
 #define CST_RESIDENCE_ML	62
-#define CST_RESIDENCE_ML_G	"resmedlow.csi"
 #define LCT_RESIDENCE_ML_G	"resmedlow"
 #define CST_RESIDENCE_HL	63
-#define CST_RESIDENCE_HL_G	"reshilow.csi"
 #define LCT_RESIDENCE_HL_G	"reshilow"
 #define CST_RESIDENCE_LH        64
-#define CST_RESIDENCE_LH_G      "reslowhi.csi"
 #define LCT_RESIDENCE_LH_G      "reslowhi"
 #define CST_RESIDENCE_MH        65
-#define CST_RESIDENCE_MH_G      "resmedhi.csi"
 #define LCT_RESIDENCE_MH_G      "resmedhi"
 #define CST_RESIDENCE_HH        66
-#define CST_RESIDENCE_HH_G      "reshihi.csi"
 #define LCT_RESIDENCE_HH_G      "reshihi"
 
 #define CST_MARKET_EMPTY	71
-#define CST_MARKET_EMPTY_G	"market-empty.csi"
 #define LCT_MARKET_EMPTY_G	"market-empty"
 #define CST_MARKET_LOW          72
-#define CST_MARKET_LOW_G        "market-low.csi"
 #define LCT_MARKET_LOW_G        "market-low"
 #define CST_MARKET_MED          73
-#define CST_MARKET_MED_G        "market-med.csi"
 #define LCT_MARKET_MED_G        "market-med"
 #define CST_MARKET_FULL         74
-#define CST_MARKET_FULL_G       "market-full.csi"
 #define LCT_MARKET_FULL_G       "market-full"
 
 #define CST_RECYCLE		79
-#define CST_RECYCLE_G		"recycle-centre.csi"
 #define LCT_RECYCLE_G		"recycle-centre"
 
 #define CST_TRACK_LR		80
-#define CST_TRACK_LR_G		"tracklr.csi"
 #define LCT_TRACK_LR_G		"tracklr"
 #define CST_TRACK_LU            81
-#define CST_TRACK_LU_G          "tracklu.csi"
 #define LCT_TRACK_LU_G          "tracklu"
 #define CST_TRACK_LD            82
-#define CST_TRACK_LD_G          "trackld.csi"
 #define LCT_TRACK_LD_G          "trackld"
 #define CST_TRACK_UD            83
-#define CST_TRACK_UD_G          "trackud.csi"
 #define LCT_TRACK_UD_G          "trackud"
 #define CST_TRACK_UR            84
-#define CST_TRACK_UR_G          "trackur.csi"
 #define LCT_TRACK_UR_G          "trackur"
 #define CST_TRACK_DR            85
-#define CST_TRACK_DR_G          "trackdr.csi"
 #define LCT_TRACK_DR_G          "trackdr"
 #define CST_TRACK_LUR           86
-#define CST_TRACK_LUR_G         "tracklur.csi"
 #define LCT_TRACK_LUR_G         "tracklur"
 #define CST_TRACK_LDR           87
-#define CST_TRACK_LDR_G         "trackldr.csi"
 #define LCT_TRACK_LDR_G         "trackldr"
 #define CST_TRACK_LUD           88
-#define CST_TRACK_LUD_G         "tracklud.csi"
 #define LCT_TRACK_LUD_G         "tracklud"
 #define CST_TRACK_UDR           89
-#define CST_TRACK_UDR_G         "trackudr.csi"
 #define LCT_TRACK_UDR_G         "trackudr"
 #define CST_TRACK_LUDR          90
-#define CST_TRACK_LUDR_G        "trackludr.csi"
 #define LCT_TRACK_LUDR_G        "trackludr"
 
 #define CST_PARKLAND_PLANE	91
-#define CST_PARKLAND_PLANE_G	"parkland-plane.csi"
 #define LCT_PARKLAND_PLANE_G	"parkland-plane"
 #define CST_PARKLAND_LAKE	92
-#define CST_PARKLAND_LAKE_G	"parkland-lake.csi"
 #define LCT_PARKLAND_LAKE_G	"parkland-lake"
 
 #define CST_MONUMENT_0		93
-#define CST_MONUMENT_0_G	"monument0.csi"
 #define LCT_MONUMENT_0_G	"monument0"
 #define CST_MONUMENT_1          94
-#define CST_MONUMENT_1_G        "monument1.csi"
 #define LCT_MONUMENT_1_G        "monument1"
 #define CST_MONUMENT_2          95
-#define CST_MONUMENT_2_G        "monument2.csi"
 #define LCT_MONUMENT_2_G        "monument2"
 #define CST_MONUMENT_3          96
-#define CST_MONUMENT_3_G        "monument3.csi"
 #define LCT_MONUMENT_3_G        "monument3"
 #define CST_MONUMENT_4          97
-#define CST_MONUMENT_4_G        "monument4.csi"
 #define LCT_MONUMENT_4_G        "monument4"
 #define CST_MONUMENT_5          98
-#define CST_MONUMENT_5_G        "monument5.csi"
 #define LCT_MONUMENT_5_G        "monument5"
 
 #define CST_COALMINE_EMPTY	100
-#define CST_COALMINE_EMPTY_G	"coalmine-empty.csi"
 #define LCT_COALMINE_EMPTY_G	"coalmine-empty"
 #define CST_COALMINE_LOW	101
-#define CST_COALMINE_LOW_G	"coalmine-low.csi"
 #define LCT_COALMINE_LOW_G	"coalmine-low"
 #define CST_COALMINE_MED	102
-#define CST_COALMINE_MED_G	"coalmine-med.csi"
 #define LCT_COALMINE_MED_G	"coalmine-med"
 #define CST_COALMINE_FULL	103
-#define CST_COALMINE_FULL_G	"coalmine-full.csi"
 #define LCT_COALMINE_FULL_G	"coalmine-full"
 
 #define CST_RAIL_LR            110
-#define CST_RAIL_LR_G          "raillr.csi"
 #define LCT_RAIL_LR_G          "raillr"
 #define CST_RAIL_LU            111
-#define CST_RAIL_LU_G          "raillu.csi"
 #define LCT_RAIL_LU_G          "raillu"
 #define CST_RAIL_LD            112
-#define CST_RAIL_LD_G          "railld.csi"
 #define LCT_RAIL_LD_G          "railld"
 #define CST_RAIL_UD            113
-#define CST_RAIL_UD_G          "railud.csi"
 #define LCT_RAIL_UD_G          "railud"
 #define CST_RAIL_UR            114
-#define CST_RAIL_UR_G          "railur.csi"
 #define LCT_RAIL_UR_G          "railur"
 #define CST_RAIL_DR            115
-#define CST_RAIL_DR_G          "raildr.csi"
 #define LCT_RAIL_DR_G          "raildr"
 #define CST_RAIL_LUR           116
-#define CST_RAIL_LUR_G         "raillur.csi"
 #define LCT_RAIL_LUR_G         "raillur"
 #define CST_RAIL_LDR           117
-#define CST_RAIL_LDR_G         "railldr.csi"
 #define LCT_RAIL_LDR_G         "railldr"
 #define CST_RAIL_LUD           118
-#define CST_RAIL_LUD_G         "raillud.csi"
 #define LCT_RAIL_LUD_G         "raillud"
 #define CST_RAIL_UDR           119
-#define CST_RAIL_UDR_G         "railudr.csi"
 #define LCT_RAIL_UDR_G         "railudr"
 #define CST_RAIL_LUDR          120
-#define CST_RAIL_LUDR_G        "railludr.csi"
 #define LCT_RAIL_LUDR_G        "railludr"
 
 #define CST_FIRE_1             121
-#define CST_FIRE_1_G           "fire1.csi"
 #define LCT_FIRE_1_G           "fire1"
 #define CST_FIRE_2             122
-#define CST_FIRE_2_G           "fire2.csi"
 #define LCT_FIRE_2_G           "fire2"
 #define CST_FIRE_3             123
-#define CST_FIRE_3_G           "fire3.csi"
 #define LCT_FIRE_3_G           "fire3"
 #define CST_FIRE_4             124
-#define CST_FIRE_4_G           "fire4.csi"
 #define LCT_FIRE_4_G           "fire4"
 #define CST_FIRE_5             125
-#define CST_FIRE_5_G           "fire5.csi"
 #define LCT_FIRE_5_G           "fire5"
 #define CST_FIRE_DONE1         126
-#define CST_FIRE_DONE1_G       "firedone1.csi"
 #define LCT_FIRE_DONE1_G       "firedone1"
 #define CST_FIRE_DONE2         127
-#define CST_FIRE_DONE2_G       "firedone2.csi"
 #define LCT_FIRE_DONE2_G       "firedone2"
 #define CST_FIRE_DONE3         128
-#define CST_FIRE_DONE3_G       "firedone3.csi"
 #define LCT_FIRE_DONE3_G       "firedone3"
 #define CST_FIRE_DONE4         129
-#define CST_FIRE_DONE4_G       "firedone4.csi"
 #define LCT_FIRE_DONE4_G       "firedone4"
 
 #define CST_ROAD_LR            130
-#define CST_ROAD_LR_G          "roadlr.csi"
 #define LCT_ROAD_LR_G          "roadlr"
 #define CST_ROAD_LU            131
-#define CST_ROAD_LU_G          "roadlu.csi"
 #define LCT_ROAD_LU_G          "roadlu"
 #define CST_ROAD_LD            132
-#define CST_ROAD_LD_G          "roadld.csi"
 #define LCT_ROAD_LD_G          "roadld"
 #define CST_ROAD_UD            133
-#define CST_ROAD_UD_G          "roadud.csi"
 #define LCT_ROAD_UD_G          "roadud"
 #define CST_ROAD_UR            134
-#define CST_ROAD_UR_G          "roadur.csi"
 #define LCT_ROAD_UR_G          "roadur"
 #define CST_ROAD_DR            135
-#define CST_ROAD_DR_G          "roaddr.csi"
 #define LCT_ROAD_DR_G          "roaddr"
 #define CST_ROAD_LUR           136
-#define CST_ROAD_LUR_G         "roadlur.csi"
 #define LCT_ROAD_LUR_G         "roadlur"
 #define CST_ROAD_LDR           137
-#define CST_ROAD_LDR_G         "roadldr.csi"
 #define LCT_ROAD_LDR_G         "roadldr"
 #define CST_ROAD_LUD           138
-#define CST_ROAD_LUD_G         "roadlud.csi"
 #define LCT_ROAD_LUD_G         "roadlud"
 #define CST_ROAD_UDR           139
-#define CST_ROAD_UDR_G         "roadudr.csi"
 #define LCT_ROAD_UDR_G         "roadudr"
 #define CST_ROAD_LUDR          140
-#define CST_ROAD_LUDR_G        "roadludr.csi"
 #define LCT_ROAD_LUDR_G        "roadludr"
 
 #define CST_OREMINE_5           146
-#define CST_OREMINE_5_G         "oremine5.csi"
 #define LCT_OREMINE_5_G         "oremine5"
 #define CST_OREMINE_6           147
-#define CST_OREMINE_6_G         "oremine6.csi"
 #define LCT_OREMINE_6_G         "oremine6"
 #define CST_OREMINE_7           148
-#define CST_OREMINE_7_G         "oremine7.csi"
 #define LCT_OREMINE_7_G         "oremine7"
 #define CST_OREMINE_8           149
-#define CST_OREMINE_8_G         "oremine8.csi"
 #define LCT_OREMINE_8_G         "oremine8"
 
 #define CST_OREMINE_1		150
-#define CST_OREMINE_1_G		"oremine1.csi"
 #define LCT_OREMINE_1_G		"oremine1"
 #define CST_OREMINE_2		151
-#define CST_OREMINE_2_G		"oremine2.csi"
 #define LCT_OREMINE_2_G		"oremine2"
 #define CST_OREMINE_3		152
-#define CST_OREMINE_3_G		"oremine3.csi"
 #define LCT_OREMINE_3_G		"oremine3"
 #define CST_OREMINE_4		153
-#define CST_OREMINE_4_G		"oremine4.csi"
 #define LCT_OREMINE_4_G		"oremine4"
 
 #define CST_HEALTH		155
-#define CST_HEALTH_G		"health.csi"
 #define LCT_HEALTH_G		"health"
 
 #define CST_SCHOOL		156
-#define CST_SCHOOL_G		"school0.csi"
 #define LCT_SCHOOL_G		"school0"
 
 #define CST_EX_PORT		161
-#define CST_EX_PORT_G		"ex_port.csi"
 #define LCT_EX_PORT_G		"ex_port"
 
 #define CST_MILL_0              162
-#define CST_MILL_0_G            "mill0.csi"
 #define LCT_MILL_0_G            "mill0"
 #define CST_MILL_1              163
-#define CST_MILL_1_G            "mill1.csi"
 #define LCT_MILL_1_G            "mill1"
 #define CST_MILL_2              164
-#define CST_MILL_2_G            "mill2.csi"
 #define LCT_MILL_2_G            "mill2"
 #define CST_MILL_3              165
-#define CST_MILL_3_G            "mill3.csi"
 #define LCT_MILL_3_G            "mill3"
 #define CST_MILL_4              166
-#define CST_MILL_4_G            "mill4.csi"
 #define LCT_MILL_4_G            "mill4"
 #define CST_MILL_5              167
-#define CST_MILL_5_G            "mill5.csi"
 #define LCT_MILL_5_G            "mill5"
 #define CST_MILL_6              168
-#define CST_MILL_6_G            "mill6.csi"
 #define LCT_MILL_6_G            "mill6"
 
 #define CST_ROCKET_1		180
-#define CST_ROCKET_1_G          "rocket1.csi"
 #define LCT_ROCKET_1_G          "rocket1"
 #define CST_ROCKET_2            181
-#define CST_ROCKET_2_G		"rocket2.csi"
 #define LCT_ROCKET_2_G		"rocket2"
 #define CST_ROCKET_3		182
-#define CST_ROCKET_3_G		"rocket3.csi"
 #define LCT_ROCKET_3_G		"rocket3"
 #define CST_ROCKET_4		183
-#define CST_ROCKET_4_G		"rocket4.csi"
 #define LCT_ROCKET_4_G		"rocket4"
 #define CST_ROCKET_5            184
-#define CST_ROCKET_5_G          "rocket5.csi"
 #define LCT_ROCKET_5_G          "rocket5"
 #define CST_ROCKET_6            185
-#define CST_ROCKET_6_G          "rocket6.csi"
 #define LCT_ROCKET_6_G          "rocket6"
 #define CST_ROCKET_7		186
-#define CST_ROCKET_7_G		"rocket7.csi"
 #define LCT_ROCKET_7_G		"rocket7"
 #define CST_ROCKET_FLOWN	187
-#define CST_ROCKET_FLOWN_G	"rocketflown.csi"
 #define LCT_ROCKET_FLOWN_G	"rocketflown"
 
 #define CST_WINDMILL_1_G        190
-#define CST_WINDMILL_1_G_G      "windmill1g.csi"
 #define LCT_WINDMILL_1_G_G      "windmill1g"
 #define CST_WINDMILL_2_G        191
-#define CST_WINDMILL_2_G_G      "windmill2g.csi"
 #define LCT_WINDMILL_2_G_G      "windmill2g"
 #define CST_WINDMILL_3_G        192
-#define CST_WINDMILL_3_G_G      "windmill3g.csi"
 #define LCT_WINDMILL_3_G_G      "windmill3g"
 
 #define CST_WINDMILL_1_RG       193
-#define CST_WINDMILL_1_RG_G     "windmill1rg.csi"
 #define LCT_WINDMILL_1_RG_G     "windmill1rg"
 #define CST_WINDMILL_2_RG       194
-#define CST_WINDMILL_2_RG_G     "windmill2rg.csi"
 #define LCT_WINDMILL_2_RG_G     "windmill2rg"
 #define CST_WINDMILL_3_RG       195
-#define CST_WINDMILL_3_RG_G     "windmill3rg.csi"
 #define LCT_WINDMILL_3_RG_G     "windmill3rg"
 
 #define CST_WINDMILL_1_R        196
-#define CST_WINDMILL_1_R_G      "windmill1r.csi"
 #define LCT_WINDMILL_1_R_G      "windmill1r"
 #define CST_WINDMILL_2_R        197
-#define CST_WINDMILL_2_R_G      "windmill2r.csi"
 #define LCT_WINDMILL_2_R_G      "windmill2r"
 #define CST_WINDMILL_3_R        198
-#define CST_WINDMILL_3_R_G      "windmill3r.csi"
 #define LCT_WINDMILL_3_R_G      "windmill3r"
 
 #define CST_WINDMILL_1_W        199
-#define CST_WINDMILL_1_W_G      "windmill1w.csi"
 #define LCT_WINDMILL_1_W_G      "windmill1w"
 #define CST_WINDMILL_2_W        200
-#define CST_WINDMILL_2_W_G      "windmill2w.csi"
 #define LCT_WINDMILL_2_W_G      "windmill2w"
 #define CST_WINDMILL_3_W        201
-#define CST_WINDMILL_3_W_G      "windmill3w.csi"
 #define LCT_WINDMILL_3_W_G      "windmill3w"
 
 #define CST_BLACKSMITH_0          202
-#define CST_BLACKSMITH_0_G        "blacksmith0.csi"
 #define LCT_BLACKSMITH_0_G        "blacksmith0"
 #define CST_BLACKSMITH_1          203
-#define CST_BLACKSMITH_1_G        "blacksmith1.csi"
 #define LCT_BLACKSMITH_1_G        "blacksmith1"
 #define CST_BLACKSMITH_2          204
-#define CST_BLACKSMITH_2_G        "blacksmith2.csi"
 #define LCT_BLACKSMITH_2_G        "blacksmith2"
 #define CST_BLACKSMITH_3          205
-#define CST_BLACKSMITH_3_G        "blacksmith3.csi"
 #define LCT_BLACKSMITH_3_G        "blacksmith3"
 #define CST_BLACKSMITH_4          206
-#define CST_BLACKSMITH_4_G        "blacksmith4.csi"
 #define LCT_BLACKSMITH_4_G        "blacksmith4"
 #define CST_BLACKSMITH_5          207
-#define CST_BLACKSMITH_5_G        "blacksmith5.csi"
 #define LCT_BLACKSMITH_5_G        "blacksmith5"
 #define CST_BLACKSMITH_6          208
-#define CST_BLACKSMITH_6_G        "blacksmith6.csi"
 #define LCT_BLACKSMITH_6_G        "blacksmith6"
 
 #define CST_POTTERY_0             210
-#define CST_POTTERY_0_G           "pottery0.csi"
 #define LCT_POTTERY_0_G           "pottery0"
 #define CST_POTTERY_1             211
-#define CST_POTTERY_1_G           "pottery1.csi"
 #define LCT_POTTERY_1_G           "pottery1"
 #define CST_POTTERY_2             212
-#define CST_POTTERY_2_G           "pottery2.csi"
 #define LCT_POTTERY_2_G           "pottery2"
 #define CST_POTTERY_3             213
-#define CST_POTTERY_3_G           "pottery3.csi"
 #define LCT_POTTERY_3_G           "pottery3"
 #define CST_POTTERY_4             214
-#define CST_POTTERY_4_G           "pottery4.csi"
 #define LCT_POTTERY_4_G           "pottery4"
 #define CST_POTTERY_5             215
-#define CST_POTTERY_5_G           "pottery5.csi"
 #define LCT_POTTERY_5_G           "pottery5"
 #define CST_POTTERY_6             216
-#define CST_POTTERY_6_G           "pottery6.csi"
 #define LCT_POTTERY_6_G           "pottery6"
 #define CST_POTTERY_7             217
-#define CST_POTTERY_7_G           "pottery7.csi"
 #define LCT_POTTERY_7_G           "pottery7"
 #define CST_POTTERY_8             218
-#define CST_POTTERY_8_G           "pottery8.csi"
 #define LCT_POTTERY_8_G           "pottery8"
 #define CST_POTTERY_9             219
-#define CST_POTTERY_9_G           "pottery9.csi"
 #define LCT_POTTERY_9_G           "pottery9"
 #define CST_POTTERY_10            220
-#define CST_POTTERY_10_G          "pottery10.csi"
 #define LCT_POTTERY_10_G          "pottery10"
 
 #define CST_WATER               221
-#define CST_WATER_G             "water.csi"
 #define LCT_WATER_G             "water"
 #define CST_WATER_D             222
-#define CST_WATER_D_G           "waterd.csi"
 #define LCT_WATER_D_G           "waterd"
 #define CST_WATER_R             223
-#define CST_WATER_R_G           "waterr.csi"
 #define LCT_WATER_R_G           "waterr"
 #define CST_WATER_U             224
-#define CST_WATER_U_G           "wateru.csi"
 #define LCT_WATER_U_G           "wateru"
 #define CST_WATER_L             225
-#define CST_WATER_L_G           "waterl.csi"
 #define LCT_WATER_L_G           "waterl"
 #define CST_WATER_LR            226
-#define CST_WATER_LR_G          "waterlr.csi"
 #define LCT_WATER_LR_G          "waterlr"
 #define CST_WATER_UD            227
-#define CST_WATER_UD_G          "waterud.csi"
 #define LCT_WATER_UD_G          "waterud"
 #define CST_WATER_LD            228
-#define CST_WATER_LD_G          "waterld.csi"
 #define LCT_WATER_LD_G          "waterld"
 #define CST_WATER_RD            229
-#define CST_WATER_RD_G          "waterrd.csi"
 #define LCT_WATER_RD_G          "waterrd"
 #define CST_WATER_LU            230
-#define CST_WATER_LU_G          "waterlu.csi"
 #define LCT_WATER_LU_G          "waterlu"
 #define CST_WATER_UR            231
-#define CST_WATER_UR_G          "waterur.csi"
 #define LCT_WATER_UR_G          "waterur"
 #define CST_WATER_LUD           232
-#define CST_WATER_LUD_G         "waterlud.csi"
 #define LCT_WATER_LUD_G         "waterlud"
 #define CST_WATER_LRD           233
-#define CST_WATER_LRD_G         "waterlrd.csi"
 #define LCT_WATER_LRD_G         "waterlrd"
 #define CST_WATER_LUR           234
-#define CST_WATER_LUR_G         "waterlur.csi"
 #define LCT_WATER_LUR_G         "waterlur"
 #define CST_WATER_URD           235
-#define CST_WATER_URD_G         "waterurd.csi"
 #define LCT_WATER_URD_G         "waterurd"
 #define CST_WATER_LURD          236
-#define CST_WATER_LURD_G        "waterlurd.csi"
 #define LCT_WATER_LURD_G        "waterlurd"
 
 #define CST_WATERWELL           238
-#define CST_WATERWELL_G         "waterwell.csi"
 #define LCT_WATERWELL_G         "waterwell"
 
 #define CST_CRICKET_1           240
-#define CST_CRICKET_1_G         "cricket1.csi"
 #define LCT_CRICKET_1_G         "cricket1"
 #define CST_CRICKET_2           241
-#define CST_CRICKET_2_G         "cricket2.csi"
 #define LCT_CRICKET_2_G         "cricket2"
 #define CST_CRICKET_3           242
-#define CST_CRICKET_3_G         "cricket3.csi"
 #define LCT_CRICKET_3_G         "cricket3"
 #define CST_CRICKET_4           243
-#define CST_CRICKET_4_G         "cricket4.csi"
 #define LCT_CRICKET_4_G         "cricket4"
 #define CST_CRICKET_5           244
-#define CST_CRICKET_5_G         "cricket5.csi"
 #define LCT_CRICKET_5_G         "cricket5"
 #define CST_CRICKET_6           245
-#define CST_CRICKET_6_G         "cricket6.csi"
 #define LCT_CRICKET_6_G         "cricket6"
 #define CST_CRICKET_7           246
-#define CST_CRICKET_7_G         "cricket7.csi"
 #define LCT_CRICKET_7_G         "cricket7"
 
 #define CST_FIRESTATION_1         250
-#define CST_FIRESTATION_1_G       "firestation1.csi"
 #define LCT_FIRESTATION_1_G       "firestation1"
 #define CST_FIRESTATION_2         251
-#define CST_FIRESTATION_2_G       "firestation2.csi"
 #define LCT_FIRESTATION_2_G       "firestation2"
 #define CST_FIRESTATION_3         252
-#define CST_FIRESTATION_3_G       "firestation3.csi"
 #define LCT_FIRESTATION_3_G       "firestation3"
 #define CST_FIRESTATION_4         253
-#define CST_FIRESTATION_4_G       "firestation4.csi"
 #define LCT_FIRESTATION_4_G       "firestation4"
 #define CST_FIRESTATION_5         254
-#define CST_FIRESTATION_5_G       "firestation5.csi"
 #define LCT_FIRESTATION_5_G       "firestation5"
 #define CST_FIRESTATION_6         255
-#define CST_FIRESTATION_6_G       "firestation6.csi"
 #define LCT_FIRESTATION_6_G       "firestation6"
 #define CST_FIRESTATION_7         256
-#define CST_FIRESTATION_7_G       "firestation7.csi"
 #define LCT_FIRESTATION_7_G       "firestation7"
 #define CST_FIRESTATION_8         257
-#define CST_FIRESTATION_8_G       "firestation8.csi"
 #define LCT_FIRESTATION_8_G       "firestation8"
 #define CST_FIRESTATION_9         258
-#define CST_FIRESTATION_9_G       "firestation9.csi"
 #define LCT_FIRESTATION_9_G       "firestation9"
 #define CST_FIRESTATION_10        259
-#define CST_FIRESTATION_10_G      "firestation10.csi"
 #define LCT_FIRESTATION_10_G      "firestation10"
 
 #define CST_TIP_0               260
-#define CST_TIP_0_G             "tip0.csi"
 #define LCT_TIP_0_G             "tip0"
 #define CST_TIP_1               261
-#define CST_TIP_1_G             "tip1.csi"
 #define LCT_TIP_1_G             "tip1"
 #define CST_TIP_2               262
-#define CST_TIP_2_G             "tip2.csi"
 #define LCT_TIP_2_G             "tip2"
 #define CST_TIP_3               263
-#define CST_TIP_3_G             "tip3.csi"
 #define LCT_TIP_3_G             "tip3"
 #define CST_TIP_4               264
-#define CST_TIP_4_G             "tip4.csi"
 #define LCT_TIP_4_G             "tip4"
 #define CST_TIP_5               265
-#define CST_TIP_5_G             "tip5.csi"
 #define LCT_TIP_5_G             "tip5"
 #define CST_TIP_6               266
-#define CST_TIP_6_G             "tip6.csi"
 #define LCT_TIP_6_G             "tip6"
 #define CST_TIP_7               267
-#define CST_TIP_7_G             "tip7.csi"
 #define LCT_TIP_7_G             "tip7"
 #define CST_TIP_8               268
-#define CST_TIP_8_G             "tip8.csi"
 #define LCT_TIP_8_G             "tip8"
 
 #define CST_COMMUNE_1           270
-#define CST_COMMUNE_1_G         "commune1.csi"
 #define LCT_COMMUNE_1_G         "commune1"
 #define CST_COMMUNE_2           271
-#define CST_COMMUNE_2_G         "commune2.csi"
 #define LCT_COMMUNE_2_G         "commune2"
 #define CST_COMMUNE_3           272
-#define CST_COMMUNE_3_G         "commune3.csi"
 #define LCT_COMMUNE_3_G         "commune3"
 #define CST_COMMUNE_4           273
-#define CST_COMMUNE_4_G         "commune4.csi"
 #define LCT_COMMUNE_4_G         "commune4"
 #define CST_COMMUNE_5           274
-#define CST_COMMUNE_5_G         "commune5.csi"
 #define LCT_COMMUNE_5_G         "commune5"
 #define CST_COMMUNE_6           275
-#define CST_COMMUNE_6_G         "commune6.csi"
 #define LCT_COMMUNE_6_G         "commune6"
 #define CST_COMMUNE_7           276
-#define CST_COMMUNE_7_G         "commune7.csi"
 #define LCT_COMMUNE_7_G         "commune7"
 #define CST_COMMUNE_8           277
-#define CST_COMMUNE_8_G         "commune8.csi"
 #define LCT_COMMUNE_8_G         "commune8"
 #define CST_COMMUNE_9           278
-#define CST_COMMUNE_9_G         "commune9.csi"
 #define LCT_COMMUNE_9_G         "commune9"
 #define CST_COMMUNE_10          279
-#define CST_COMMUNE_10_G        "commune10.csi"
 #define LCT_COMMUNE_10_G        "commune10"
 #define CST_COMMUNE_11          280
-#define CST_COMMUNE_11_G        "commune11.csi"
 #define LCT_COMMUNE_11_G        "commune11"
 #define CST_COMMUNE_12          281
-#define CST_COMMUNE_12_G        "commune12.csi"
 #define LCT_COMMUNE_12_G        "commune12"
 #define CST_COMMUNE_13          282
-#define CST_COMMUNE_13_G        "commune13.csi"
 #define LCT_COMMUNE_13_G        "commune13"
 #define CST_COMMUNE_14          283
-#define CST_COMMUNE_14_G        "commune14.csi"
 #define LCT_COMMUNE_14_G        "commune14"
 
 #define CST_INDUSTRY_H_C        290
-#define CST_INDUSTRY_H_C_G      "industryhc.csi"
 #define LCT_INDUSTRY_H_C_G      "industryhc"
 
 #define CST_INDUSTRY_H_L1        291
-#define CST_INDUSTRY_H_L1_G      "industryhl1.csi"
 #define LCT_INDUSTRY_H_L1_G      "industryhl1"
 #define CST_INDUSTRY_H_L2        292
-#define CST_INDUSTRY_H_L2_G      "industryhl2.csi"
 #define LCT_INDUSTRY_H_L2_G      "industryhl2"
 #define CST_INDUSTRY_H_L3        293
-#define CST_INDUSTRY_H_L3_G      "industryhl3.csi"
 #define LCT_INDUSTRY_H_L3_G      "industryhl3"
 #define CST_INDUSTRY_H_L4        294
-#define CST_INDUSTRY_H_L4_G      "industryhl4.csi"
 #define LCT_INDUSTRY_H_L4_G      "industryhl4"
 #define CST_INDUSTRY_H_L5        295
-#define CST_INDUSTRY_H_L5_G      "industryhl5.csi"
 #define LCT_INDUSTRY_H_L5_G      "industryhl5"
 #define CST_INDUSTRY_H_L6        296
-#define CST_INDUSTRY_H_L6_G      "industryhl6.csi"
 #define LCT_INDUSTRY_H_L6_G      "industryhl6"
 #define CST_INDUSTRY_H_L7        297
-#define CST_INDUSTRY_H_L7_G      "industryhl7.csi"
 #define LCT_INDUSTRY_H_L7_G      "industryhl7"
 #define CST_INDUSTRY_H_L8        298
-#define CST_INDUSTRY_H_L8_G      "industryhl8.csi"
 #define LCT_INDUSTRY_H_L8_G      "industryhl8"
 
 #define CST_INDUSTRY_H_M1        299
-#define CST_INDUSTRY_H_M1_G      "industryhm1.csi"
 #define LCT_INDUSTRY_H_M1_G      "industryhm1"
 #define CST_INDUSTRY_H_M2        300
-#define CST_INDUSTRY_H_M2_G      "industryhm2.csi"
 #define LCT_INDUSTRY_H_M2_G      "industryhm2"
 #define CST_INDUSTRY_H_M3        301
-#define CST_INDUSTRY_H_M3_G      "industryhm3.csi"
 #define LCT_INDUSTRY_H_M3_G      "industryhm3"
 #define CST_INDUSTRY_H_M4        302
-#define CST_INDUSTRY_H_M4_G      "industryhm4.csi"
 #define LCT_INDUSTRY_H_M4_G      "industryhm4"
 #define CST_INDUSTRY_H_M5        303
-#define CST_INDUSTRY_H_M5_G      "industryhm5.csi"
 #define LCT_INDUSTRY_H_M5_G      "industryhm5"
 #define CST_INDUSTRY_H_M6        304
-#define CST_INDUSTRY_H_M6_G      "industryhm6.csi"
 #define LCT_INDUSTRY_H_M6_G      "industryhm6"
 #define CST_INDUSTRY_H_M7        305
-#define CST_INDUSTRY_H_M7_G      "industryhm7.csi"
 #define LCT_INDUSTRY_H_M7_G      "industryhm7"
 #define CST_INDUSTRY_H_M8        306
-#define CST_INDUSTRY_H_M8_G      "industryhm8.csi"
 #define LCT_INDUSTRY_H_M8_G      "industryhm8"
 
 #define CST_INDUSTRY_H_H1        307
-#define CST_INDUSTRY_H_H1_G      "industryhh1.csi"
 #define LCT_INDUSTRY_H_H1_G      "industryhh1"
 #define CST_INDUSTRY_H_H2        308
-#define CST_INDUSTRY_H_H2_G      "industryhh2.csi"
 #define LCT_INDUSTRY_H_H2_G      "industryhh2"
 #define CST_INDUSTRY_H_H3        309
-#define CST_INDUSTRY_H_H3_G      "industryhh3.csi"
 #define LCT_INDUSTRY_H_H3_G      "industryhh3"
 #define CST_INDUSTRY_H_H4        310
-#define CST_INDUSTRY_H_H4_G      "industryhh4.csi"
 #define LCT_INDUSTRY_H_H4_G      "industryhh4"
 #define CST_INDUSTRY_H_H5        311
-#define CST_INDUSTRY_H_H5_G      "industryhh5.csi"
 #define LCT_INDUSTRY_H_H5_G      "industryhh5"
 #define CST_INDUSTRY_H_H6        312
-#define CST_INDUSTRY_H_H6_G      "industryhh6.csi"
 #define LCT_INDUSTRY_H_H6_G      "industryhh6"
 #define CST_INDUSTRY_H_H7        313
-#define CST_INDUSTRY_H_H7_G      "industryhh7.csi"
 #define LCT_INDUSTRY_H_H7_G      "industryhh7"
 #define CST_INDUSTRY_H_H8        314
-#define CST_INDUSTRY_H_H8_G      "industryhh8.csi"
 #define LCT_INDUSTRY_H_H8_G      "industryhh8"
 
 #define CST_INDUSTRY_L_C         315
-#define CST_INDUSTRY_L_C_G       "industrylq1.csi"
 #define LCT_INDUSTRY_L_C_G       "industrylq1"
 
 #define CST_INDUSTRY_L_Q1        316
-#define CST_INDUSTRY_L_Q1_G      "industrylq1.csi"
 #define LCT_INDUSTRY_L_Q1_G      "industrylq1"
 #define CST_INDUSTRY_L_Q2        317
-#define CST_INDUSTRY_L_Q2_G      "industrylq2.csi"
 #define LCT_INDUSTRY_L_Q2_G      "industrylq2"
 #define CST_INDUSTRY_L_Q3        318
-#define CST_INDUSTRY_L_Q3_G      "industrylq3.csi"
 #define LCT_INDUSTRY_L_Q3_G      "industrylq3"
 #define CST_INDUSTRY_L_Q4        319
-#define CST_INDUSTRY_L_Q4_G      "industrylq4.csi"
 #define LCT_INDUSTRY_L_Q4_G      "industrylq4"
 
 #define CST_INDUSTRY_L_L1        320
-#define CST_INDUSTRY_L_L1_G      "industryll1.csi"
 #define LCT_INDUSTRY_L_L1_G      "industryll1"
 #define CST_INDUSTRY_L_L2        321
-#define CST_INDUSTRY_L_L2_G      "industryll2.csi"
 #define LCT_INDUSTRY_L_L2_G      "industryll2"
 #define CST_INDUSTRY_L_L3        322
-#define CST_INDUSTRY_L_L3_G      "industryll3.csi"
 #define LCT_INDUSTRY_L_L3_G      "industryll3"
 #define CST_INDUSTRY_L_L4        323
-#define CST_INDUSTRY_L_L4_G      "industryll4.csi"
 #define LCT_INDUSTRY_L_L4_G      "industryll4"
 
 #define CST_INDUSTRY_L_M1        324
-#define CST_INDUSTRY_L_M1_G      "industrylm1.csi"
 #define LCT_INDUSTRY_L_M1_G      "industrylm1"
 #define CST_INDUSTRY_L_M2        325
-#define CST_INDUSTRY_L_M2_G      "industrylm2.csi"
 #define LCT_INDUSTRY_L_M2_G      "industrylm2"
 #define CST_INDUSTRY_L_M3        326
-#define CST_INDUSTRY_L_M3_G      "industrylm3.csi"
 #define LCT_INDUSTRY_L_M3_G      "industrylm3"
 #define CST_INDUSTRY_L_M4        327
-#define CST_INDUSTRY_L_M4_G      "industrylm4.csi"
 #define LCT_INDUSTRY_L_M4_G      "industrylm4"
 
 #define CST_INDUSTRY_L_H1        328
-#define CST_INDUSTRY_L_H1_G      "industrylh1.csi"
 #define LCT_INDUSTRY_L_H1_G      "industrylh1"
 #define CST_INDUSTRY_L_H2        329
-#define CST_INDUSTRY_L_H2_G      "industrylh2.csi"
 #define LCT_INDUSTRY_L_H2_G      "industrylh2"
 #define CST_INDUSTRY_L_H3        330
-#define CST_INDUSTRY_L_H3_G      "industrylh3.csi"
 #define LCT_INDUSTRY_L_H3_G      "industrylh3"
 #define CST_INDUSTRY_L_H4        331
-#define CST_INDUSTRY_L_H4_G      "industrylh4.csi"
 #define LCT_INDUSTRY_L_H4_G      "industrylh4"
 
 #define CST_FARM_O0              332
-#define CST_FARM_O0_G            "farm0.csi"
 #define LCT_FARM_O0_G            "farm0"
 #define CST_FARM_O1              333
-#define CST_FARM_O1_G            "farm1.csi"
 #define LCT_FARM_O1_G            "farm1"
 #define CST_FARM_O2              334
-#define CST_FARM_O2_G            "farm2.csi"
 #define LCT_FARM_O2_G            "farm2"
 #define CST_FARM_O3              335
-#define CST_FARM_O3_G            "farm3.csi"
 #define LCT_FARM_O3_G            "farm3"
 #define CST_FARM_O4              336
-#define CST_FARM_O4_G            "farm4.csi"
 #define LCT_FARM_O4_G            "farm4"
 #define CST_FARM_O5              337
-#define CST_FARM_O5_G            "farm5.csi"
 #define LCT_FARM_O5_G            "farm5"
 #define CST_FARM_O6              338
-#define CST_FARM_O6_G            "farm6.csi"
 #define LCT_FARM_O6_G            "farm6"
 #define CST_FARM_O7              339
-#define CST_FARM_O7_G            "farm7.csi"
 #define LCT_FARM_O7_G            "farm7"
 #define CST_FARM_O8              340
-#define CST_FARM_O8_G            "farm8.csi"
 #define LCT_FARM_O8_G            "farm8"
 #define CST_FARM_O9              341
-#define CST_FARM_O9_G            "farm9.csi"
 #define LCT_FARM_O9_G            "farm9"
 #define CST_FARM_O10             342
-#define CST_FARM_O10_G           "farm10.csi"
 #define LCT_FARM_O10_G           "farm10"
 #define CST_FARM_O11             343
-#define CST_FARM_O11_G           "farm11.csi"
 #define LCT_FARM_O11_G           "farm11"
 #define CST_FARM_O12             344
-#define CST_FARM_O12_G           "farm12.csi"
 #define LCT_FARM_O12_G           "farm12"
 #define CST_FARM_O13             345
-#define CST_FARM_O13_G           "farm13.csi"
 #define LCT_FARM_O13_G           "farm13"
 #define CST_FARM_O14             346
-#define CST_FARM_O14_G           "farm14.csi"
 #define LCT_FARM_O14_G           "farm14"
 #define CST_FARM_O15             347
-#define CST_FARM_O15_G           "farm15.csi"
 #define LCT_FARM_O15_G           "farm15"
 #define CST_FARM_O16             348
-#define CST_FARM_O16_G           "farm16.csi"
 #define LCT_FARM_O16_G           "farm16"
 
 #define CST_DESERT		350



From alainb at mail.berlios.de  Sun Dec  2 11:30:13 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sun, 2 Dec 2007 11:30:13 +0100
Subject: [Lincity-ng-commit] r1301 - in trunk/src: . lincity
Message-ID: <200712021030.lB2AUDgt001017@sheep.berlios.de>

Author: alainb
Date: 2007-12-02 11:30:12 +0100 (Sun, 02 Dec 2007)
New Revision: 1301

Modified:
   trunk/src/Jamfile
   trunk/src/lincity/engglobs.h
   trunk/src/lincity/lc_locale.cpp
   trunk/src/lincity/shrglobs.h
Log:
more headers clean in lincity/. , and remove oldgui from Jamfile

Modified: trunk/src/Jamfile
===================================================================
--- trunk/src/Jamfile	2007-12-02 00:00:08 UTC (rev 1300)
+++ trunk/src/Jamfile	2007-12-02 10:30:12 UTC (rev 1301)
@@ -4,7 +4,6 @@
 SubInclude TOP src PhysfsStream ;
 SubInclude TOP src tinygettext ;
 SubInclude TOP src lincity ;
-SubInclude TOP src oldgui ;
 SubInclude TOP src lincity-ng ;
 SubInclude TOP src tools ;
 

Modified: trunk/src/lincity/engglobs.h
===================================================================
--- trunk/src/lincity/engglobs.h	2007-12-02 00:00:08 UTC (rev 1300)
+++ trunk/src/lincity/engglobs.h	2007-12-02 10:30:12 UTC (rev 1301)
@@ -8,6 +8,18 @@
 
 #include "lin-city.h"
 
+/* was shrglobs.h */
+
+extern int pix_double;
+
+// extern char graphic_path[256];
+
+#if defined (WIN32)
+extern char windowsfontfile[256];
+#endif
+
+
+/* */
 extern int use_waterwell, ldsv_version;
 
 extern Map map;

Modified: trunk/src/lincity/lc_locale.cpp
===================================================================
--- trunk/src/lincity/lc_locale.cpp	2007-12-02 00:00:08 UTC (rev 1300)
+++ trunk/src/lincity/lc_locale.cpp	2007-12-02 10:30:12 UTC (rev 1301)
@@ -3,8 +3,8 @@
 
 void lincity_set_locale(void)
 {
-    char *locale = NULL;
-    char *localem = NULL;
+//    char *locale = NULL;
+//    char *localem = NULL;
 #if defined (WIN32)
 #define MAX_LANG_BUF 1024
     char *language = NULL;

Modified: trunk/src/lincity/shrglobs.h
===================================================================
--- trunk/src/lincity/shrglobs.h	2007-12-02 00:00:08 UTC (rev 1300)
+++ trunk/src/lincity/shrglobs.h	2007-12-02 10:30:12 UTC (rev 1301)
@@ -5,7 +5,7 @@
  * ---------------------------------------------------------------------- */
 #ifndef __shrglobs_h__
 #define __shrglobs_h__
-
+/*
 extern int pix_double;
 
 // extern char graphic_path[256];
@@ -13,5 +13,5 @@
 #if defined (WIN32)
 extern char windowsfontfile[256];
 #endif
-
+*/
 #endif /* __shrglobs_h__ */



From alainb at mail.berlios.de  Sun Dec  2 11:50:09 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sun, 2 Dec 2007 11:50:09 +0100
Subject: [Lincity-ng-commit] r1302 - trunk/src/lincity
Message-ID: <200712021050.lB2Ao95R002111@sheep.berlios.de>

Author: alainb
Date: 2007-12-02 11:50:08 +0100 (Sun, 02 Dec 2007)
New Revision: 1302

Added:
   trunk/src/lincity/engglobs.cpp
Removed:
   trunk/src/lincity/shrglobs.cpp
   trunk/src/lincity/shrglobs.h
Log:
moved shrglobs.cpp to engglobs.cpp for clarity

Copied: trunk/src/lincity/engglobs.cpp (from rev 1301, trunk/src/lincity/shrglobs.cpp)

Deleted: trunk/src/lincity/shrglobs.cpp
===================================================================
--- trunk/src/lincity/shrglobs.cpp	2007-12-02 10:30:12 UTC (rev 1301)
+++ trunk/src/lincity/shrglobs.cpp	2007-12-02 10:50:08 UTC (rev 1302)
@@ -1,95 +0,0 @@
-/* ---------------------------------------------------------------------- *
- * engglobs.c
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * ---------------------------------------------------------------------- */
-#include "engglobs.h"
-//#include "common.h"
-#include "fileutil.h"
-
-/* load/save version for compatibility with(out) waterwell */
-int ldsv_version = 1170;
-int use_waterwell = true;
-
-Map map;
-
-int mappoint_array_x[WORLD_SIDE_LEN];
-int mappoint_array_y[WORLD_SIDE_LEN];
-int numof_shanties;
-int numof_communes;
-int last_built_x, last_built_y;
-int main_screen_originx, main_screen_originy;
-
-int pix_double = 0;
-
-#if defined (WIN32)
-char windowsfontfile[LC_PATH_MAX];
-#endif
-
-int cheat_flag;
-int modern_windmill_flag = 0;
-
-int askdir_lines;
-char *askdir_path[4];
-
-int monthgraph_size = 0;
-int *monthgraph_pop;
-int *monthgraph_starve;
-int *monthgraph_nojobs;
-int *monthgraph_ppool;
-
-#if defined (commentout)
-int monthgraph_pop[MAPPOINT_STATS_W], monthgraph_starve[MAPPOINT_STATS_W];
-int monthgraph_nojobs[MAPPOINT_STATS_W], monthgraph_ppool[MAPPOINT_STATS_W];
-#endif
-
-#if defined (commentout)
-int diffgraph_power[MAPPOINT_STATS_W], diffgraph_coal[MAPPOINT_STATS_W];
-int diffgraph_goods[MAPPOINT_STATS_W], diffgraph_ore[MAPPOINT_STATS_W];
-int diffgraph_population[MAPPOINT_STATS_W];
-int diff_old_population;
-#endif
-
-int sust_dig_ore_coal_tip_flag = 0, sust_port_flag = 0, sustain_flag = 0;
-int sust_dig_ore_coal_count = 0, sust_port_count = 0, sust_old_money = 0;
-int sust_old_money_count = 0, sust_old_population = 0, sust_old_population_count = 0;
-int sust_old_tech = 0, sust_old_tech_count = 0, sust_fire_count = 0;
-
-int total_time = 0;             /* game time */
-
-int population, starving_population;
-int housed_population;
-int unemployed_population, people_pool;
-int substationx[MAX_NUMOF_SUBSTATIONS], substationy[MAX_NUMOF_SUBSTATIONS];
-int numof_substations = 0;
-int marketx[MAX_NUMOF_MARKETS], markety[MAX_NUMOF_MARKETS], numof_markets = 0;
-int numof_health_centres, max_pop_ever = 0, total_evacuated = 0, total_births = 0;
-int numof_waterwell = 0;
-
-int total_money = 0, income_tax_rate, coal_tax_rate;
-int dole_rate, transport_cost_rate;
-int goods_tax_rate;
-int export_tax_rate, import_cost_rate;
-int tech_level, highest_tech_level, unnat_deaths;
-
-int total_pollution_deaths = 0, total_starve_deaths = 0, total_unemployed_days = 0;
-int total_unemployed_years = 0;
-float pollution_deaths_history = 0.0, starve_deaths_history = 0.0;
-float unemployed_history = 0.0;
-
-int university_intake_rate;
-int power_made, power_used, coal_made, coal_used;
-int goods_made, goods_used, ore_made, ore_used;
-int rockets_launched, rockets_launched_success;
-int coal_survey_done;
-
-int selected_type_cost;
-
-int ex_tax_dis[NUMOF_DISCOUNT_TRIGGERS] = {
-    EX_DISCOUNT_TRIGGER_1,
-    EX_DISCOUNT_TRIGGER_2,
-    EX_DISCOUNT_TRIGGER_3,
-    EX_DISCOUNT_TRIGGER_4,
-    EX_DISCOUNT_TRIGGER_5,
-    EX_DISCOUNT_TRIGGER_6,
-};

Deleted: trunk/src/lincity/shrglobs.h
===================================================================
--- trunk/src/lincity/shrglobs.h	2007-12-02 10:30:12 UTC (rev 1301)
+++ trunk/src/lincity/shrglobs.h	2007-12-02 10:50:08 UTC (rev 1302)
@@ -1,17 +0,0 @@
-/* ---------------------------------------------------------------------- *
- * shrglobs.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * ---------------------------------------------------------------------- */
-#ifndef __shrglobs_h__
-#define __shrglobs_h__
-/*
-extern int pix_double;
-
-// extern char graphic_path[256];
-
-#if defined (WIN32)
-extern char windowsfontfile[256];
-#endif
-*/
-#endif /* __shrglobs_h__ */



From alainb at mail.berlios.de  Sun Dec  2 12:58:26 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sun, 2 Dec 2007 12:58:26 +0100
Subject: [Lincity-ng-commit] r1303 - in trunk/src: lincity lincity/modules
	lincity-ng
Message-ID: <200712021158.lB2BwQCT016256@sheep.berlios.de>

Author: alainb
Date: 2007-12-02 12:58:25 +0100 (Sun, 02 Dec 2007)
New Revision: 1303

Modified:
   trunk/src/lincity-ng/EconomyGraph.cpp
   trunk/src/lincity/engglobs.cpp
   trunk/src/lincity/fileutil.cpp
   trunk/src/lincity/lin-city.h
   trunk/src/lincity/lintypes.cpp
   trunk/src/lincity/modules/market.cpp
   trunk/src/lincity/modules/oremine.cpp
   trunk/src/lincity/modules/rocket_pad.cpp
   trunk/src/lincity/modules/shanty.cpp
   trunk/src/lincity/modules/tip.cpp
   trunk/src/lincity/transport.cpp
Log:
remove dead code ifdef(commentout)

Modified: trunk/src/lincity/engglobs.cpp
===================================================================
--- trunk/src/lincity/engglobs.cpp	2007-12-02 10:50:08 UTC (rev 1302)
+++ trunk/src/lincity/engglobs.cpp	2007-12-02 11:58:25 UTC (rev 1303)
@@ -38,18 +38,6 @@
 int *monthgraph_nojobs;
 int *monthgraph_ppool;
 
-#if defined (commentout)
-int monthgraph_pop[MAPPOINT_STATS_W], monthgraph_starve[MAPPOINT_STATS_W];
-int monthgraph_nojobs[MAPPOINT_STATS_W], monthgraph_ppool[MAPPOINT_STATS_W];
-#endif
-
-#if defined (commentout)
-int diffgraph_power[MAPPOINT_STATS_W], diffgraph_coal[MAPPOINT_STATS_W];
-int diffgraph_goods[MAPPOINT_STATS_W], diffgraph_ore[MAPPOINT_STATS_W];
-int diffgraph_population[MAPPOINT_STATS_W];
-int diff_old_population;
-#endif
-
 int sust_dig_ore_coal_tip_flag = 0, sust_port_flag = 0, sustain_flag = 0;
 int sust_dig_ore_coal_count = 0, sust_port_count = 0, sust_old_money = 0;
 int sust_old_money_count = 0, sust_old_population = 0, sust_old_population_count = 0;

Modified: trunk/src/lincity/fileutil.cpp
===================================================================
--- trunk/src/lincity/fileutil.cpp	2007-12-02 10:50:08 UTC (rev 1302)
+++ trunk/src/lincity/fileutil.cpp	2007-12-02 11:58:25 UTC (rev 1303)
@@ -8,7 +8,7 @@
 #include <stdlib.h>
 #include <stdarg.h>             /* XXX: GCS FIX: What does configure need to know? */
 #include <string.h>
-#include "shrglobs.h"
+#include "engglobs.h"
 #include "gui_interface/screen_interface.h"
 #include "tinygettext/gettext.hpp"
 #include "lincity-ng/ErrorInterface.hpp"
@@ -135,20 +135,6 @@
 char lc_textdomain_directory[LC_PATH_MAX];
 char lincityrc_file[LC_PATH_MAX];
 
-/* The variable make_dir_ok_flag has 2 uses.
-
-   First, it is initialized to 1, and set to zero if the directory 
-   already exists.  Later, if it is found to be 1, the "create directory 
-   help page (ask-dir) is display, and then set to zero.  
-
-   Next, in the help handler, if the user says it's OK to create the 
-   directory, it is reset to 1.  Finally, in the main loop, if it is 
-   found to have value 1, the directory is created and it is reset to 0.
-   */
-#if defined (commentout)
-int make_dir_ok_flag;
-#endif
-
 /* ---------------------------------------------------------------------- *
  * Public Functions
  * ---------------------------------------------------------------------- */
@@ -490,13 +476,7 @@
 #if defined (WIN32)
     /* GCS: Use windows font for extra speed */
     strcpy(windowsfontfile, LIBDIR);
-#if defined (commentout)
     if (!pix_double)
-        strcat(windowsfontfile, "\\opening\\iso8859-1-8x8.fnt");
-    else
-        strcat(windowsfontfile, "\\opening\\iso8859-1-9x15.fnt");
-#endif
-    if (!pix_double)
         strcat(windowsfontfile, "\\opening\\winfont_8x8.fnt");
     else
         strcat(windowsfontfile, "\\opening\\winfont_16x16.fnt");
@@ -540,11 +520,6 @@
     DIR *dp;
 #endif
 
-#if defined (commentout)
-    if (make_dir_ok_flag == 0)
-        return;
-#endif
-
 #if defined (WIN32)
     if (_mkdir(lc_save_dir) == -1 && errno != EEXIST) {
         printf(_("Couldn't create the save directory '%s'\n"), lc_save_dir);
@@ -561,40 +536,13 @@
     closedir(dp);
 #endif
 
-#if defined (commentout)
-    make_dir_ok_flag = 0;
-#endif
 }
 
 void check_savedir(void)
 {
-#if defined (commentout)
-    int i = 0, j, k, r, l;
-#endif
-
     if (!directory_exists(lc_save_dir)) {
         make_savedir();
-#if defined (commentout)
-        l = lc_save_dir_len;
-        if (l > 160) {
-            i = l - 160;
-            l = 160;
-        }
-        askdir_lines = l / 40 + ((l % 40) ? 1 : 0);
-        r = l / askdir_lines + ((l % askdir_lines) ? 1 : 0);
-        for (j = 0; j < askdir_lines; j++) {
-            if ((askdir_path[j] = (char *)malloc(r + 1)) == 0)
-                malloc_failure();
-            for (k = 0; k < r; k++, i++)
-                *(askdir_path[j] + k) = lc_save_dir[i];
-            *(askdir_path[j] + k) = 0;
-        }
-        return;
-#endif
     }
-#if defined (commentout)
-    make_dir_ok_flag = 0;       /* don't load the ask-dir */
-#endif
 }
 
 void malloc_failure(void)

Modified: trunk/src/lincity/lin-city.h
===================================================================
--- trunk/src/lincity/lin-city.h	2007-12-02 10:50:08 UTC (rev 1302)
+++ trunk/src/lincity/lin-city.h	2007-12-02 11:58:25 UTC (rev 1303)
@@ -9,7 +9,6 @@
 
 #include <stdio.h>
 
-#undef commentout
 #define LC_X11
 
 /*
@@ -598,30 +597,8 @@
 #define STATS_W 304
 #define STATS_H 32
 
-/* GCS FIX: This is still used in static data structure for size 
-   of monthgraph.  Fix by encapsulating the monthgraph and dynamically
-   allocating.  */
-#if defined (commentout)
-#ifndef MONTHGRAPH_W
-#define MONTHGRAPH_X 91
-#define MONTHGRAPH_W 120
-#define MONTHGRAPH_Y 116
-#define MONTHGRAPH_H 64
-#endif
-#define DIFFGRAPH_POWER_COLOUR (yellow(28))
-#define DIFFGRAPH_COAL_COLOUR  (white(18))
-#define DIFFGRAPH_GOODS_COLOUR (cyan(24))
-#define DIFFGRAPH_ORE_COLOUR   (red(22))
-#define DIFFGRAPH_POPULATION_COLOUR 7
-#endif
-
 #define GRAPHS_B_COLOUR (white(6))
 
-/* These constants are still used by save-under buffer */
-#if defined (commentout)
-#define MARKET_CB_X (79)
-#define MARKET_CB_Y 0
-#endif
 //#define MARKET_CB_W (18*8)
 #define MARKET_CB_W (17*8 - 2)
 #define MARKET_CB_H (23*8)
@@ -646,14 +623,6 @@
 
 #define SHUFFLE_MAPPOINT_COUNT 4
 
-#if defined (commentout)
-#define MAPPOINT_STATS_X 91
-/* MAPPOINT_STATS_W must be == MONTHGRAPH_W because of the graph drawing. */
-#define MAPPOINT_STATS_W MONTHGRAPH_W
-#define MAPPOINT_STATS_Y 8
-#define MAPPOINT_STATS_H (11*8)
-#endif
-
 /******* Buildings // GROUPS ************/ 
 #define NUM_OF_TYPES    400
 #define NUM_OF_GROUPS    47
@@ -700,39 +669,6 @@
 #define GROUP_RESIDENCE_LL_TECH 0
 #define GROUP_RESIDENCE_LL_FIREC 75
 
-#if defined (commentout)
-#define RESIDENCE_BASE_BR     100
-#define RESIDENCE_BRM_HEALTH  5
-#define RESIDENCE_BASE_DR     (68*12)
-#define GROUP_RESIDENCE    4
-#define GROUP_RESIDENCE_COLOUR (cyan(24))
-#define GROUP_RESIDENCE_COST   0
-#define GROUP_RESIDENCE_COST1  1000
-#define RESIDENCE1_BRM (RESIDENCE_BASE_BR*12)
-#define RESIDENCE1_DRM ((RESIDENCE_BASE_DR*3)/4)
-#define GROUP_RESIDENCE_COST2  2000
-#define RESIDENCE2_BRM 0
-#define RESIDENCE2_DRM 0
-#define GROUP_RESIDENCE_COST3  4000
-#define RESIDENCE3_BRM (RESIDENCE_BASE_BR+RESIDENCE_BASE_BR/4)
-#define RESIDENCE3_DRM ((RESIDENCE_BASE_DR)/2)
-#define GROUP_RESIDENCE_COST4  800
-#define RESIDENCE4_BRM (RESIDENCE_BASE_BR*18)
-#define RESIDENCE4_DRM ((RESIDENCE_BASE_DR*3)/4)
-#define GROUP_RESIDENCE_COST5  1600
-#define RESIDENCE5_BRM (RESIDENCE_BASE_BR/2)
-#define RESIDENCE5_DRM ((RESIDENCE_BASE_DR)/4)
-#define GROUP_RESIDENCE_COST6  3200
-#define RESIDENCE6_BRM 0
-#define RESIDENCE6_DRM ((RESIDENCE_BASE_DR)/4)
-#define GROUP_RESIDENCE_COST_MUL 25
-#define GROUP_RESIDENCE_BUL_COST 1000
-#define GROUP_RESIDENCE_TECH 0
-#define GROUP_RESIDENCE_FIREC 75
-/* RESIDENCE_PPM is the people_pool mobitily. Higher number=less mobile. */
-#define RESIDENCE_PPM   20
-#endif
-
 /* RESIDENCE?_BRM is the birth rate modifier */
 /* RESIDENCE?_DRM is the death rate modifier */
 #define RESIDENCE_BASE_BR     100

Modified: trunk/src/lincity/lintypes.cpp
===================================================================
--- trunk/src/lincity/lintypes.cpp	2007-12-02 10:50:08 UTC (rev 1302)
+++ trunk/src/lincity/lintypes.cpp	2007-12-02 11:58:25 UTC (rev 1303)
@@ -8,7 +8,6 @@
 #include "lin-city.h"
 #include "engglobs.h"
 #include "lctypes.h"
-#include "shrglobs.h"
 #include "lintypes.h"
 #include "tinygettext/gettext.hpp"
 #include "fileutil.h"
@@ -558,835 +557,6 @@
 
     load_png_graphics(txt_file, png_file);
 
-#if defined (commentout)
-    main_types[CST_GREEN].group = GROUP_BARE;
-    main_types[CST_GREEN].graphic = load_graphic(CST_GREEN_G);
-
-    main_types[CST_POWERL_H_L].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_H_L].graphic = load_graphic(CST_POWERL_H_L_G);
-
-    main_types[CST_POWERL_V_L].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_V_L].graphic = load_graphic(CST_POWERL_V_L_G);
-
-    main_types[CST_POWERL_LD_L].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_LD_L].graphic = load_graphic(CST_POWERL_LD_L_G);
-
-    main_types[CST_POWERL_RD_L].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_RD_L].graphic = load_graphic(CST_POWERL_RD_L_G);
-
-    main_types[CST_POWERL_LU_L].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_LU_L].graphic = load_graphic(CST_POWERL_LU_L_G);
-
-    main_types[CST_POWERL_RU_L].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_RU_L].graphic = load_graphic(CST_POWERL_RU_L_G);
-
-    main_types[CST_POWERL_LDU_L].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_LDU_L].graphic = load_graphic(CST_POWERL_LDU_L_G);
-
-    main_types[CST_POWERL_LDR_L].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_LDR_L].graphic = load_graphic(CST_POWERL_LDR_L_G);
-
-    main_types[CST_POWERL_LUR_L].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_LUR_L].graphic = load_graphic(CST_POWERL_LUR_L_G);
-
-    main_types[CST_POWERL_UDR_L].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_UDR_L].graphic = load_graphic(CST_POWERL_UDR_L_G);
-
-    main_types[CST_POWERL_LUDR_L].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_LUDR_L].graphic = load_graphic(CST_POWERL_LUDR_L_G);
-
-    main_types[CST_POWERL_H_D].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_H_D].graphic = load_graphic(CST_POWERL_H_D_G);
-
-    main_types[CST_POWERL_V_D].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_V_D].graphic = load_graphic(CST_POWERL_V_D_G);
-
-    main_types[CST_POWERL_LD_D].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_LD_D].graphic = load_graphic(CST_POWERL_LD_D_G);
-
-    main_types[CST_POWERL_RD_D].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_RD_D].graphic = load_graphic(CST_POWERL_RD_D_G);
-
-    main_types[CST_POWERL_LU_D].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_LU_D].graphic = load_graphic(CST_POWERL_LU_D_G);
-
-    main_types[CST_POWERL_RU_D].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_RU_D].graphic = load_graphic(CST_POWERL_RU_D_G);
-
-    main_types[CST_POWERL_LDU_D].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_LDU_D].graphic = load_graphic(CST_POWERL_LDU_D_G);
-
-    main_types[CST_POWERL_LDR_D].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_LDR_D].graphic = load_graphic(CST_POWERL_LDR_D_G);
-
-    main_types[CST_POWERL_LUR_D].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_LUR_D].graphic = load_graphic(CST_POWERL_LUR_D_G);
-
-    main_types[CST_POWERL_UDR_D].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_UDR_D].graphic = load_graphic(CST_POWERL_UDR_D_G);
-
-    main_types[CST_POWERL_LUDR_D].group = GROUP_POWER_LINE;
-    main_types[CST_POWERL_LUDR_D].graphic = load_graphic(CST_POWERL_LUDR_D_G);
-
-    main_types[CST_POWERS_SOLAR].group = GROUP_SOLAR_POWER;
-    main_types[CST_POWERS_SOLAR].graphic = load_graphic(CST_POWERS_SOLAR_G);
-
-    main_types[CST_POWERS_COAL_EMPTY].group = GROUP_COAL_POWER;
-    main_types[CST_POWERS_COAL_EMPTY].graphic = load_graphic(CST_POWERS_COAL_EMPTY_G);
-
-    main_types[CST_POWERS_COAL_LOW].group = GROUP_COAL_POWER;
-    main_types[CST_POWERS_COAL_LOW].graphic = load_graphic(CST_POWERS_COAL_LOW_G);
-
-    prog_box("", 12);
-
-    main_types[CST_POWERS_COAL_MED].group = GROUP_COAL_POWER;
-    main_types[CST_POWERS_COAL_MED].graphic = load_graphic(CST_POWERS_COAL_MED_G);
-
-    main_types[CST_POWERS_COAL_FULL].group = GROUP_COAL_POWER;
-    main_types[CST_POWERS_COAL_FULL].graphic = load_graphic(CST_POWERS_COAL_FULL_G);
-
-    main_types[CST_SUBSTATION_R].group = GROUP_SUBSTATION;
-    main_types[CST_SUBSTATION_R].graphic = load_graphic(CST_SUBSTATION_R_G);
-
-    main_types[CST_SUBSTATION_G].group = GROUP_SUBSTATION;
-    main_types[CST_SUBSTATION_G].graphic = load_graphic(CST_SUBSTATION_G_G);
-
-    main_types[CST_SUBSTATION_RG].group = GROUP_SUBSTATION;
-    main_types[CST_SUBSTATION_RG].graphic = load_graphic(CST_SUBSTATION_RG_G);
-
-    main_types[CST_RESIDENCE_LL].group = GROUP_RESIDENCE_LL;
-    main_types[CST_RESIDENCE_LL].graphic = load_graphic(CST_RESIDENCE_LL_G);
-
-    main_types[CST_RESIDENCE_ML].group = GROUP_RESIDENCE_ML;
-    main_types[CST_RESIDENCE_ML].graphic = load_graphic(CST_RESIDENCE_ML_G);
-
-    main_types[CST_RESIDENCE_HL].group = GROUP_RESIDENCE_HL;
-    main_types[CST_RESIDENCE_HL].graphic = load_graphic(CST_RESIDENCE_HL_G);
-
-    main_types[CST_RESIDENCE_LH].group = GROUP_RESIDENCE_LH;
-    main_types[CST_RESIDENCE_LH].graphic = load_graphic(CST_RESIDENCE_LH_G);
-
-    main_types[CST_RESIDENCE_MH].group = GROUP_RESIDENCE_MH;
-    main_types[CST_RESIDENCE_MH].graphic = load_graphic(CST_RESIDENCE_MH_G);
-
-    main_types[CST_RESIDENCE_HH].group = GROUP_RESIDENCE_HH;
-    main_types[CST_RESIDENCE_HH].graphic = load_graphic(CST_RESIDENCE_HH_G);
-
-    main_types[CST_FARM_O0].group = GROUP_ORGANIC_FARM;
-    main_types[CST_FARM_O0].graphic = load_graphic(CST_FARM_O0_G);
-
-    main_types[CST_FARM_O1].group = GROUP_ORGANIC_FARM;
-    main_types[CST_FARM_O1].graphic = load_graphic(CST_FARM_O1_G);
-
-    main_types[CST_FARM_O2].group = GROUP_ORGANIC_FARM;
-    main_types[CST_FARM_O2].graphic = load_graphic(CST_FARM_O2_G);
-
-    main_types[CST_FARM_O3].group = GROUP_ORGANIC_FARM;
-    main_types[CST_FARM_O3].graphic = load_graphic(CST_FARM_O3_G);
-
-    main_types[CST_FARM_O4].group = GROUP_ORGANIC_FARM;
-    main_types[CST_FARM_O4].graphic = load_graphic(CST_FARM_O4_G);
-
-    main_types[CST_FARM_O5].group = GROUP_ORGANIC_FARM;
-    main_types[CST_FARM_O5].graphic = load_graphic(CST_FARM_O5_G);
-
-    main_types[CST_FARM_O6].group = GROUP_ORGANIC_FARM;
-    main_types[CST_FARM_O6].graphic = load_graphic(CST_FARM_O6_G);
-
-    main_types[CST_FARM_O7].group = GROUP_ORGANIC_FARM;
-    main_types[CST_FARM_O7].graphic = load_graphic(CST_FARM_O7_G);
-
-    main_types[CST_FARM_O8].group = GROUP_ORGANIC_FARM;
-    main_types[CST_FARM_O8].graphic = load_graphic(CST_FARM_O8_G);
-
-    main_types[CST_FARM_O9].group = GROUP_ORGANIC_FARM;
-    main_types[CST_FARM_O9].graphic = load_graphic(CST_FARM_O9_G);
-
-    main_types[CST_FARM_O10].group = GROUP_ORGANIC_FARM;
-    main_types[CST_FARM_O10].graphic = load_graphic(CST_FARM_O10_G);
-
-    main_types[CST_FARM_O11].group = GROUP_ORGANIC_FARM;
-    main_types[CST_FARM_O11].graphic = load_graphic(CST_FARM_O11_G);
-
-    main_types[CST_FARM_O12].group = GROUP_ORGANIC_FARM;
-    main_types[CST_FARM_O12].graphic = load_graphic(CST_FARM_O12_G);
-
-    main_types[CST_FARM_O13].group = GROUP_ORGANIC_FARM;
-    main_types[CST_FARM_O13].graphic = load_graphic(CST_FARM_O13_G);
-
-    main_types[CST_FARM_O14].group = GROUP_ORGANIC_FARM;
-    main_types[CST_FARM_O14].graphic = load_graphic(CST_FARM_O14_G);
-
-    main_types[CST_FARM_O15].group = GROUP_ORGANIC_FARM;
-    main_types[CST_FARM_O15].graphic = load_graphic(CST_FARM_O15_G);
-
-    main_types[CST_FARM_O16].group = GROUP_ORGANIC_FARM;
-    main_types[CST_FARM_O16].graphic = load_graphic(CST_FARM_O16_G);
-
-    main_types[CST_MARKET_EMPTY].group = GROUP_MARKET;
-    main_types[CST_MARKET_EMPTY].graphic = load_graphic(CST_MARKET_EMPTY_G);
-
-    main_types[CST_MARKET_LOW].group = GROUP_MARKET;
-    main_types[CST_MARKET_LOW].graphic = load_graphic(CST_MARKET_LOW_G);
-
-    main_types[CST_MARKET_MED].group = GROUP_MARKET;
-    main_types[CST_MARKET_MED].graphic = load_graphic(CST_MARKET_MED_G);
-
-    main_types[CST_MARKET_FULL].group = GROUP_MARKET;
-    main_types[CST_MARKET_FULL].graphic = load_graphic(CST_MARKET_FULL_G);
-
-    main_types[CST_TRACK_LR].group = GROUP_TRACK;
-    main_types[CST_TRACK_LR].graphic = load_graphic(CST_TRACK_LR_G);
-
-    main_types[CST_TRACK_LU].group = GROUP_TRACK;
-    main_types[CST_TRACK_LU].graphic = load_graphic(CST_TRACK_LU_G);
-
-    main_types[CST_TRACK_LD].group = GROUP_TRACK;
-    main_types[CST_TRACK_LD].graphic = load_graphic(CST_TRACK_LD_G);
-
-    main_types[CST_TRACK_UD].group = GROUP_TRACK;
-    main_types[CST_TRACK_UD].graphic = load_graphic(CST_TRACK_UD_G);
-
-    main_types[CST_TRACK_UR].group = GROUP_TRACK;
-    main_types[CST_TRACK_UR].graphic = load_graphic(CST_TRACK_UR_G);
-
-    main_types[CST_TRACK_DR].group = GROUP_TRACK;
-    main_types[CST_TRACK_DR].graphic = load_graphic(CST_TRACK_DR_G);
-
-    main_types[CST_TRACK_LUR].group = GROUP_TRACK;
-    main_types[CST_TRACK_LUR].graphic = load_graphic(CST_TRACK_LUR_G);
-
-    main_types[CST_TRACK_LDR].group = GROUP_TRACK;
-    main_types[CST_TRACK_LDR].graphic = load_graphic(CST_TRACK_LDR_G);
-
-    main_types[CST_TRACK_LUD].group = GROUP_TRACK;
-    main_types[CST_TRACK_LUD].graphic = load_graphic(CST_TRACK_LUD_G);
-
-    main_types[CST_TRACK_UDR].group = GROUP_TRACK;
-    main_types[CST_TRACK_UDR].graphic = load_graphic(CST_TRACK_UDR_G);
-
-    main_types[CST_TRACK_LUDR].group = GROUP_TRACK;
-    main_types[CST_TRACK_LUDR].graphic = load_graphic(CST_TRACK_LUDR_G);
-
-    main_types[CST_COALMINE_EMPTY].group = GROUP_COALMINE;
-    main_types[CST_COALMINE_EMPTY].graphic = load_graphic(CST_COALMINE_EMPTY_G);
-
-    prog_box("", 25);
-
-    main_types[CST_COALMINE_LOW].group = GROUP_COALMINE;
-    main_types[CST_COALMINE_LOW].graphic = load_graphic(CST_COALMINE_LOW_G);
-
-    main_types[CST_COALMINE_MED].group = GROUP_COALMINE;
-    main_types[CST_COALMINE_MED].graphic = load_graphic(CST_COALMINE_MED_G);
-
-    main_types[CST_COALMINE_FULL].group = GROUP_COALMINE;
-    main_types[CST_COALMINE_FULL].graphic = load_graphic(CST_COALMINE_FULL_G);
-
-    main_types[CST_RAIL_LR].group = GROUP_RAIL;
-    main_types[CST_RAIL_LR].graphic = load_graphic(CST_RAIL_LR_G);
-
-    main_types[CST_RAIL_LU].group = GROUP_RAIL;
-    main_types[CST_RAIL_LU].graphic = load_graphic(CST_RAIL_LU_G);
-
-    main_types[CST_RAIL_LD].group = GROUP_RAIL;
-    main_types[CST_RAIL_LD].graphic = load_graphic(CST_RAIL_LD_G);
-
-    main_types[CST_RAIL_UD].group = GROUP_RAIL;
-    main_types[CST_RAIL_UD].graphic = load_graphic(CST_RAIL_UD_G);
-
-    main_types[CST_RAIL_UR].group = GROUP_RAIL;
-    main_types[CST_RAIL_UR].graphic = load_graphic(CST_RAIL_UR_G);
-
-    main_types[CST_RAIL_DR].group = GROUP_RAIL;
-    main_types[CST_RAIL_DR].graphic = load_graphic(CST_RAIL_DR_G);
-
-    main_types[CST_RAIL_LUR].group = GROUP_RAIL;
-    main_types[CST_RAIL_LUR].graphic = load_graphic(CST_RAIL_LUR_G);
-
-    main_types[CST_RAIL_LDR].group = GROUP_RAIL;
-    main_types[CST_RAIL_LDR].graphic = load_graphic(CST_RAIL_LDR_G);
-
-    main_types[CST_RAIL_LUD].group = GROUP_RAIL;
-    main_types[CST_RAIL_LUD].graphic = load_graphic(CST_RAIL_LUD_G);
-
-    prog_box("", 30);
-
-    main_types[CST_RAIL_UDR].group = GROUP_RAIL;
-    main_types[CST_RAIL_UDR].graphic = load_graphic(CST_RAIL_UDR_G);
-
-    main_types[CST_RAIL_LUDR].group = GROUP_RAIL;
-    main_types[CST_RAIL_LUDR].graphic = load_graphic(CST_RAIL_LUDR_G);
-
-    main_types[CST_ROAD_LR].group = GROUP_ROAD;
-    main_types[CST_ROAD_LR].graphic = load_graphic(CST_ROAD_LR_G);
-
-    main_types[CST_ROAD_LU].group = GROUP_ROAD;
-    main_types[CST_ROAD_LU].graphic = load_graphic(CST_ROAD_LU_G);
-
-    main_types[CST_ROAD_LD].group = GROUP_ROAD;
-    main_types[CST_ROAD_LD].graphic = load_graphic(CST_ROAD_LD_G);
-
-    main_types[CST_ROAD_UD].group = GROUP_ROAD;
-    main_types[CST_ROAD_UD].graphic = load_graphic(CST_ROAD_UD_G);
-
-    main_types[CST_ROAD_UR].group = GROUP_ROAD;
-    main_types[CST_ROAD_UR].graphic = load_graphic(CST_ROAD_UR_G);
-
-    main_types[CST_ROAD_DR].group = GROUP_ROAD;
-    main_types[CST_ROAD_DR].graphic = load_graphic(CST_ROAD_DR_G);
-
-    main_types[CST_ROAD_LUR].group = GROUP_ROAD;
-    main_types[CST_ROAD_LUR].graphic = load_graphic(CST_ROAD_LUR_G);
-
-    main_types[CST_ROAD_LDR].group = GROUP_ROAD;
-    main_types[CST_ROAD_LDR].graphic = load_graphic(CST_ROAD_LDR_G);
-
-    main_types[CST_ROAD_LUD].group = GROUP_ROAD;
-    main_types[CST_ROAD_LUD].graphic = load_graphic(CST_ROAD_LUD_G);
-
-    main_types[CST_ROAD_UDR].group = GROUP_ROAD;
-    main_types[CST_ROAD_UDR].graphic = load_graphic(CST_ROAD_UDR_G);
-
-    main_types[CST_ROAD_LUDR].group = GROUP_ROAD;
-    main_types[CST_ROAD_LUDR].graphic = load_graphic(CST_ROAD_LUDR_G);
-
-    main_types[CST_INDUSTRY_L_C].group = GROUP_INDUSTRY_L;
-    main_types[CST_INDUSTRY_L_C].graphic = load_graphic(CST_INDUSTRY_L_C_G);
-
-    main_types[CST_INDUSTRY_L_Q1].group = GROUP_INDUSTRY_L;
-    main_types[CST_INDUSTRY_L_Q1].graphic = load_graphic(CST_INDUSTRY_L_Q1_G);
-
-    main_types[CST_INDUSTRY_L_Q2].group = GROUP_INDUSTRY_L;
-    main_types[CST_INDUSTRY_L_Q2].graphic = load_graphic(CST_INDUSTRY_L_Q2_G);
-
-    main_types[CST_INDUSTRY_L_Q3].group = GROUP_INDUSTRY_L;
-    main_types[CST_INDUSTRY_L_Q3].graphic = load_graphic(CST_INDUSTRY_L_Q3_G);
-
-    main_types[CST_INDUSTRY_L_Q4].group = GROUP_INDUSTRY_L;
-    main_types[CST_INDUSTRY_L_Q4].graphic = load_graphic(CST_INDUSTRY_L_Q4_G);
-
-    main_types[CST_INDUSTRY_L_L1].group = GROUP_INDUSTRY_L;
-    main_types[CST_INDUSTRY_L_L1].graphic = load_graphic(CST_INDUSTRY_L_L1_G);
-
-    main_types[CST_INDUSTRY_L_L2].group = GROUP_INDUSTRY_L;
-    main_types[CST_INDUSTRY_L_L2].graphic = load_graphic(CST_INDUSTRY_L_L2_G);
-
-    main_types[CST_INDUSTRY_L_L3].group = GROUP_INDUSTRY_L;
-    main_types[CST_INDUSTRY_L_L3].graphic = load_graphic(CST_INDUSTRY_L_L3_G);
-
-    main_types[CST_INDUSTRY_L_L4].group = GROUP_INDUSTRY_L;
-    main_types[CST_INDUSTRY_L_L4].graphic = load_graphic(CST_INDUSTRY_L_L4_G);
-
-    main_types[CST_INDUSTRY_L_M1].group = GROUP_INDUSTRY_L;
-    main_types[CST_INDUSTRY_L_M1].graphic = load_graphic(CST_INDUSTRY_L_M1_G);
-
-    main_types[CST_INDUSTRY_L_M2].group = GROUP_INDUSTRY_L;
-    main_types[CST_INDUSTRY_L_M2].graphic = load_graphic(CST_INDUSTRY_L_M2_G);
-
-    main_types[CST_INDUSTRY_L_M3].group = GROUP_INDUSTRY_L;
-    main_types[CST_INDUSTRY_L_M3].graphic = load_graphic(CST_INDUSTRY_L_M3_G);
-
-    main_types[CST_INDUSTRY_L_M4].group = GROUP_INDUSTRY_L;
-    main_types[CST_INDUSTRY_L_M4].graphic = load_graphic(CST_INDUSTRY_L_M4_G);
-
-    main_types[CST_INDUSTRY_L_H1].group = GROUP_INDUSTRY_L;
-    main_types[CST_INDUSTRY_L_H1].graphic = load_graphic(CST_INDUSTRY_L_H1_G);
-
-    main_types[CST_INDUSTRY_L_H2].group = GROUP_INDUSTRY_L;
-    main_types[CST_INDUSTRY_L_H2].graphic = load_graphic(CST_INDUSTRY_L_H2_G);
-
-    main_types[CST_INDUSTRY_L_H3].group = GROUP_INDUSTRY_L;
-    main_types[CST_INDUSTRY_L_H3].graphic = load_graphic(CST_INDUSTRY_L_H3_G);
-
-    main_types[CST_INDUSTRY_L_H4].group = GROUP_INDUSTRY_L;
-    main_types[CST_INDUSTRY_L_H4].graphic = load_graphic(CST_INDUSTRY_L_H4_G);
-
-    main_types[CST_COMMUNE_1].group = GROUP_COMMUNE;
-    main_types[CST_COMMUNE_1].graphic = load_graphic(CST_COMMUNE_1_G);
-
-    main_types[CST_COMMUNE_2].group = GROUP_COMMUNE;
-    main_types[CST_COMMUNE_2].graphic = load_graphic(CST_COMMUNE_2_G);
-
-    main_types[CST_COMMUNE_3].group = GROUP_COMMUNE;
-    main_types[CST_COMMUNE_3].graphic = load_graphic(CST_COMMUNE_3_G);
-
-    main_types[CST_COMMUNE_4].group = GROUP_COMMUNE;
-    main_types[CST_COMMUNE_4].graphic = load_graphic(CST_COMMUNE_4_G);
-
-    main_types[CST_COMMUNE_5].group = GROUP_COMMUNE;
-    main_types[CST_COMMUNE_5].graphic = load_graphic(CST_COMMUNE_5_G);
-
-    main_types[CST_COMMUNE_6].group = GROUP_COMMUNE;
-    main_types[CST_COMMUNE_6].graphic = load_graphic(CST_COMMUNE_6_G);
-
-    main_types[CST_COMMUNE_7].group = GROUP_COMMUNE;
-    main_types[CST_COMMUNE_7].graphic = load_graphic(CST_COMMUNE_7_G);
-
-    main_types[CST_COMMUNE_8].group = GROUP_COMMUNE;
-    main_types[CST_COMMUNE_8].graphic = load_graphic(CST_COMMUNE_8_G);
-
-    main_types[CST_COMMUNE_9].group = GROUP_COMMUNE;
-    main_types[CST_COMMUNE_9].graphic = load_graphic(CST_COMMUNE_9_G);
-
-    main_types[CST_COMMUNE_10].group = GROUP_COMMUNE;
-    main_types[CST_COMMUNE_10].graphic = load_graphic(CST_COMMUNE_10_G);
-
-    main_types[CST_COMMUNE_11].group = GROUP_COMMUNE;
-    main_types[CST_COMMUNE_11].graphic = load_graphic(CST_COMMUNE_11_G);
-
-    main_types[CST_COMMUNE_12].group = GROUP_COMMUNE;
-    main_types[CST_COMMUNE_12].graphic = load_graphic(CST_COMMUNE_12_G);
-
-    main_types[CST_COMMUNE_13].group = GROUP_COMMUNE;
-    main_types[CST_COMMUNE_13].graphic = load_graphic(CST_COMMUNE_13_G);
-
-    main_types[CST_COMMUNE_14].group = GROUP_COMMUNE;
-    main_types[CST_COMMUNE_14].graphic = load_graphic(CST_COMMUNE_14_G);
-
-    main_types[CST_UNIVERSITY].group = GROUP_UNIVERSITY;
-    main_types[CST_UNIVERSITY].graphic = load_graphic(CST_UNIVERSITY_G);
-
-    main_types[CST_OREMINE_1].group = GROUP_OREMINE;
-    main_types[CST_OREMINE_1].graphic = load_graphic(CST_OREMINE_1_G);
-
-    main_types[CST_OREMINE_2].group = GROUP_OREMINE;
-    main_types[CST_OREMINE_2].graphic = load_graphic(CST_OREMINE_2_G);
-
-    main_types[CST_OREMINE_3].group = GROUP_OREMINE;
-    main_types[CST_OREMINE_3].graphic = load_graphic(CST_OREMINE_3_G);
-
-    main_types[CST_OREMINE_4].group = GROUP_OREMINE;
-    main_types[CST_OREMINE_4].graphic = load_graphic(CST_OREMINE_4_G);
-
-    main_types[CST_OREMINE_5].group = GROUP_OREMINE;
-    main_types[CST_OREMINE_5].graphic = load_graphic(CST_OREMINE_5_G);
-
-    main_types[CST_OREMINE_6].group = GROUP_OREMINE;
-    main_types[CST_OREMINE_6].graphic = load_graphic(CST_OREMINE_6_G);
-
-    main_types[CST_OREMINE_7].group = GROUP_OREMINE;
-    main_types[CST_OREMINE_7].graphic = load_graphic(CST_OREMINE_7_G);
-
-    main_types[CST_OREMINE_8].group = GROUP_OREMINE;
-    main_types[CST_OREMINE_8].graphic = load_graphic(CST_OREMINE_8_G);
-
-    main_types[CST_TIP_0].group = GROUP_TIP;
-    main_types[CST_TIP_0].graphic = load_graphic(CST_TIP_0_G);
-
-    main_types[CST_TIP_1].group = GROUP_TIP;
-    main_types[CST_TIP_1].graphic = load_graphic(CST_TIP_1_G);
-
-    main_types[CST_TIP_2].group = GROUP_TIP;
-    main_types[CST_TIP_2].graphic = load_graphic(CST_TIP_2_G);
-
-    main_types[CST_TIP_3].group = GROUP_TIP;
-    main_types[CST_TIP_3].graphic = load_graphic(CST_TIP_3_G);
-
-    main_types[CST_TIP_4].group = GROUP_TIP;
-    main_types[CST_TIP_4].graphic = load_graphic(CST_TIP_4_G);
-
-    main_types[CST_TIP_5].group = GROUP_TIP;
-    main_types[CST_TIP_5].graphic = load_graphic(CST_TIP_5_G);
-
-    main_types[CST_TIP_6].group = GROUP_TIP;
-    main_types[CST_TIP_6].graphic = load_graphic(CST_TIP_6_G);
-
-    main_types[CST_TIP_7].group = GROUP_TIP;
-    main_types[CST_TIP_7].graphic = load_graphic(CST_TIP_7_G);
-
-    main_types[CST_TIP_8].group = GROUP_TIP;
-    main_types[CST_TIP_8].graphic = load_graphic(CST_TIP_8_G);
-
-    main_types[CST_EX_PORT].group = GROUP_PORT;
-    main_types[CST_EX_PORT].graphic = load_graphic(CST_EX_PORT_G);
-
-    main_types[CST_INDUSTRY_H_C].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_C].graphic = load_graphic(CST_INDUSTRY_H_C_G);
-
-    main_types[CST_INDUSTRY_H_L1].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_L1].graphic = load_graphic(CST_INDUSTRY_H_L1_G);
-
-    main_types[CST_INDUSTRY_H_L2].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_L2].graphic = load_graphic(CST_INDUSTRY_H_L2_G);
-
-    main_types[CST_INDUSTRY_H_L3].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_L3].graphic = load_graphic(CST_INDUSTRY_H_L3_G);
-
-    main_types[CST_INDUSTRY_H_L4].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_L4].graphic = load_graphic(CST_INDUSTRY_H_L4_G);
-
-    main_types[CST_INDUSTRY_H_L5].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_L5].graphic = load_graphic(CST_INDUSTRY_H_L5_G);
-
-    main_types[CST_INDUSTRY_H_L6].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_L6].graphic = load_graphic(CST_INDUSTRY_H_L6_G);
-
-    main_types[CST_INDUSTRY_H_L7].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_L7].graphic = load_graphic(CST_INDUSTRY_H_L7_G);
-
-    main_types[CST_INDUSTRY_H_L8].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_L8].graphic = load_graphic(CST_INDUSTRY_H_L8_G);
-
-    main_types[CST_INDUSTRY_H_M1].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_M1].graphic = load_graphic(CST_INDUSTRY_H_M1_G);
-
-    main_types[CST_INDUSTRY_H_M2].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_M2].graphic = load_graphic(CST_INDUSTRY_H_M2_G);
-
-    main_types[CST_INDUSTRY_H_M3].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_M3].graphic = load_graphic(CST_INDUSTRY_H_M3_G);
-
-    main_types[CST_INDUSTRY_H_M4].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_M4].graphic = load_graphic(CST_INDUSTRY_H_M4_G);
-
-    main_types[CST_INDUSTRY_H_M5].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_M5].graphic = load_graphic(CST_INDUSTRY_H_M5_G);
-
-    main_types[CST_INDUSTRY_H_M6].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_M6].graphic = load_graphic(CST_INDUSTRY_H_M6_G);
-
-    main_types[CST_INDUSTRY_H_M7].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_M7].graphic = load_graphic(CST_INDUSTRY_H_M7_G);
-
-    main_types[CST_INDUSTRY_H_M8].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_M8].graphic = load_graphic(CST_INDUSTRY_H_M8_G);
-
-    main_types[CST_INDUSTRY_H_H1].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_H1].graphic = load_graphic(CST_INDUSTRY_H_H1_G);
-
-    main_types[CST_INDUSTRY_H_H2].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_H2].graphic = load_graphic(CST_INDUSTRY_H_H2_G);
-
-    main_types[CST_INDUSTRY_H_H3].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_H3].graphic = load_graphic(CST_INDUSTRY_H_H3_G);
-
-    main_types[CST_INDUSTRY_H_H4].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_H4].graphic = load_graphic(CST_INDUSTRY_H_H4_G);
-
-    main_types[CST_INDUSTRY_H_H5].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_H5].graphic = load_graphic(CST_INDUSTRY_H_H5_G);
-
-    main_types[CST_INDUSTRY_H_H6].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_H6].graphic = load_graphic(CST_INDUSTRY_H_H6_G);
-
-    main_types[CST_INDUSTRY_H_H7].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_H7].graphic = load_graphic(CST_INDUSTRY_H_H7_G);
-
-    main_types[CST_INDUSTRY_H_H8].group = GROUP_INDUSTRY_H;
-    main_types[CST_INDUSTRY_H_H8].graphic = load_graphic(CST_INDUSTRY_H_H8_G);
-
-    main_types[CST_PARKLAND_PLANE].group = GROUP_PARKLAND;
-    main_types[CST_PARKLAND_PLANE].graphic = load_graphic(CST_PARKLAND_PLANE_G);
-
-    prog_box("", 50);
-
-    main_types[CST_PARKLAND_LAKE].group = GROUP_PARKLAND;
-    main_types[CST_PARKLAND_LAKE].graphic = load_graphic(CST_PARKLAND_LAKE_G);
-
-    main_types[CST_RECYCLE].group = GROUP_RECYCLE;
-    main_types[CST_RECYCLE].graphic = load_graphic(CST_RECYCLE_G);
-
-    main_types[CST_WATER].group = GROUP_WATER;
-    main_types[CST_WATER].graphic = load_graphic(CST_WATER_G);
-
-    main_types[CST_WATER_D].group = GROUP_WATER;
-    main_types[CST_WATER_D].graphic = load_graphic(CST_WATER_D_G);
-
-    main_types[CST_WATER_R].group = GROUP_WATER;
-    main_types[CST_WATER_R].graphic = load_graphic(CST_WATER_R_G);
-
-    main_types[CST_WATER_U].group = GROUP_WATER;
-    main_types[CST_WATER_U].graphic = load_graphic(CST_WATER_U_G);
-
-    main_types[CST_WATER_L].group = GROUP_WATER;
-    main_types[CST_WATER_L].graphic = load_graphic(CST_WATER_L_G);
-
-    main_types[CST_WATER_LR].group = GROUP_WATER;
-    main_types[CST_WATER_LR].graphic = load_graphic(CST_WATER_LR_G);
-
-    main_types[CST_WATER_UD].group = GROUP_WATER;
-    main_types[CST_WATER_UD].graphic = load_graphic(CST_WATER_UD_G);
-
-    main_types[CST_WATER_LD].group = GROUP_WATER;
-    main_types[CST_WATER_LD].graphic = load_graphic(CST_WATER_LD_G);
-
-    main_types[CST_WATER_RD].group = GROUP_WATER;
-    main_types[CST_WATER_RD].graphic = load_graphic(CST_WATER_RD_G);
-
-    main_types[CST_WATER_LU].group = GROUP_WATER;
-    main_types[CST_WATER_LU].graphic = load_graphic(CST_WATER_LU_G);
-
-    main_types[CST_WATER_UR].group = GROUP_WATER;
-    main_types[CST_WATER_UR].graphic = load_graphic(CST_WATER_UR_G);
-
-    main_types[CST_WATER_LUD].group = GROUP_WATER;
-    main_types[CST_WATER_LUD].graphic = load_graphic(CST_WATER_LUD_G);
-
-    main_types[CST_WATER_LRD].group = GROUP_WATER;
-    main_types[CST_WATER_LRD].graphic = load_graphic(CST_WATER_LRD_G);
-
-    main_types[CST_WATER_LUR].group = GROUP_WATER;
-    main_types[CST_WATER_LUR].graphic = load_graphic(CST_WATER_LUR_G);
-
-    main_types[CST_WATER_URD].group = GROUP_WATER;
-    main_types[CST_WATER_URD].graphic = load_graphic(CST_WATER_URD_G);
-
-    main_types[CST_WATER_LURD].group = GROUP_WATER;
-    main_types[CST_WATER_LURD].graphic = load_graphic(CST_WATER_LURD_G);
-
-    main_types[CST_WATERWELL].group = GROUP_WATERWELL;
-    main_types[CST_WATERWELL].graphic = load_graphic(CST_WATERWELL_G);
-
-    main_types[CST_HEALTH].group = GROUP_HEALTH;
-    main_types[CST_HEALTH].graphic = load_graphic(CST_HEALTH_G);
-
-    main_types[CST_ROCKET_1].group = GROUP_ROCKET;
-    main_types[CST_ROCKET_1].graphic = load_graphic(CST_ROCKET_1_G);
-
-    main_types[CST_ROCKET_2].group = GROUP_ROCKET;
-    main_types[CST_ROCKET_2].graphic = load_graphic(CST_ROCKET_2_G);
-
-    main_types[CST_ROCKET_3].group = GROUP_ROCKET;
-    main_types[CST_ROCKET_3].graphic = load_graphic(CST_ROCKET_3_G);
-
-    main_types[CST_ROCKET_4].group = GROUP_ROCKET;
-    main_types[CST_ROCKET_4].graphic = load_graphic(CST_ROCKET_4_G);
-
-    prog_box("", 60);
-
-    main_types[CST_ROCKET_5].group = GROUP_ROCKET;
-    main_types[CST_ROCKET_5].graphic = load_graphic(CST_ROCKET_5_G);
-
-    main_types[CST_ROCKET_6].group = GROUP_ROCKET;
-    main_types[CST_ROCKET_6].graphic = load_graphic(CST_ROCKET_6_G);
-
-    main_types[CST_ROCKET_7].group = GROUP_ROCKET;
-    main_types[CST_ROCKET_7].graphic = load_graphic(CST_ROCKET_7_G);
-
-    main_types[CST_ROCKET_FLOWN].group = GROUP_ROCKET;
-    main_types[CST_ROCKET_FLOWN].graphic = load_graphic(CST_ROCKET_FLOWN_G);
-
-    main_types[CST_BURNT].group = GROUP_BURNT;
-    main_types[CST_BURNT].graphic = load_graphic(CST_BURNT_G);
-
-    main_types[CST_WINDMILL_1_G].group = GROUP_WINDMILL;
-    main_types[CST_WINDMILL_1_G].graphic = load_graphic(CST_WINDMILL_1_G_G);
-
-    main_types[CST_WINDMILL_2_G].group = GROUP_WINDMILL;
-    main_types[CST_WINDMILL_2_G].graphic = load_graphic(CST_WINDMILL_2_G_G);
-
-    main_types[CST_WINDMILL_3_G].group = GROUP_WINDMILL;
-    main_types[CST_WINDMILL_3_G].graphic = load_graphic(CST_WINDMILL_3_G_G);
-
-    main_types[CST_WINDMILL_1_RG].group = GROUP_WINDMILL;
-    main_types[CST_WINDMILL_1_RG].graphic = load_graphic(CST_WINDMILL_1_RG_G);
-
-    main_types[CST_WINDMILL_2_RG].group = GROUP_WINDMILL;
-    main_types[CST_WINDMILL_2_RG].graphic = load_graphic(CST_WINDMILL_2_RG_G);
-
-    main_types[CST_WINDMILL_3_RG].group = GROUP_WINDMILL;
-    main_types[CST_WINDMILL_3_RG].graphic = load_graphic(CST_WINDMILL_3_RG_G);
-
-    main_types[CST_WINDMILL_1_R].group = GROUP_WINDMILL;
-    main_types[CST_WINDMILL_1_R].graphic = load_graphic(CST_WINDMILL_1_R_G);
-
-    main_types[CST_WINDMILL_2_R].group = GROUP_WINDMILL;
-    main_types[CST_WINDMILL_2_R].graphic = load_graphic(CST_WINDMILL_2_R_G);
-
-    main_types[CST_WINDMILL_3_R].group = GROUP_WINDMILL;
-    main_types[CST_WINDMILL_3_R].graphic = load_graphic(CST_WINDMILL_3_R_G);
-
-    main_types[CST_WINDMILL_1_W].group = GROUP_WINDMILL;
-    main_types[CST_WINDMILL_1_W].graphic = load_graphic(CST_WINDMILL_1_W_G);
-
-    main_types[CST_WINDMILL_2_W].group = GROUP_WINDMILL;
-    main_types[CST_WINDMILL_2_W].graphic = load_graphic(CST_WINDMILL_2_W_G);
-
-    main_types[CST_WINDMILL_3_W].group = GROUP_WINDMILL;
-    main_types[CST_WINDMILL_3_W].graphic = load_graphic(CST_WINDMILL_3_W_G);
-
-    main_types[CST_MONUMENT_0].group = GROUP_MONUMENT;
-    main_types[CST_MONUMENT_0].graphic = load_graphic(CST_MONUMENT_0_G);
-
-    main_types[CST_MONUMENT_1].group = GROUP_MONUMENT;
-    main_types[CST_MONUMENT_1].graphic = load_graphic(CST_MONUMENT_1_G);
-
-    main_types[CST_MONUMENT_2].group = GROUP_MONUMENT;
-    main_types[CST_MONUMENT_2].graphic = load_graphic(CST_MONUMENT_2_G);
-
-    main_types[CST_MONUMENT_3].group = GROUP_MONUMENT;
-    main_types[CST_MONUMENT_3].graphic = load_graphic(CST_MONUMENT_3_G);
-
-    main_types[CST_MONUMENT_4].group = GROUP_MONUMENT;
-    main_types[CST_MONUMENT_4].graphic = load_graphic(CST_MONUMENT_4_G);
-
-    main_types[CST_MONUMENT_5].group = GROUP_MONUMENT;
-    main_types[CST_MONUMENT_5].graphic = load_graphic(CST_MONUMENT_5_G);
-
-    main_types[CST_SCHOOL].group = GROUP_SCHOOL;
-    main_types[CST_SCHOOL].graphic = load_graphic(CST_SCHOOL_G);
-
-    main_types[CST_BLACKSMITH_0].group = GROUP_BLACKSMITH;
-    main_types[CST_BLACKSMITH_0].graphic = load_graphic(CST_BLACKSMITH_0_G);
-
-    main_types[CST_BLACKSMITH_1].group = GROUP_BLACKSMITH;
-    main_types[CST_BLACKSMITH_1].graphic = load_graphic(CST_BLACKSMITH_1_G);
-
-    main_types[CST_BLACKSMITH_2].group = GROUP_BLACKSMITH;
-    main_types[CST_BLACKSMITH_2].graphic = load_graphic(CST_BLACKSMITH_2_G);
-
-    main_types[CST_BLACKSMITH_3].group = GROUP_BLACKSMITH;
-    main_types[CST_BLACKSMITH_3].graphic = load_graphic(CST_BLACKSMITH_3_G);
-
-    main_types[CST_BLACKSMITH_4].group = GROUP_BLACKSMITH;
-    main_types[CST_BLACKSMITH_4].graphic = load_graphic(CST_BLACKSMITH_4_G);
-
-    main_types[CST_BLACKSMITH_5].group = GROUP_BLACKSMITH;
-    main_types[CST_BLACKSMITH_5].graphic = load_graphic(CST_BLACKSMITH_5_G);
-
-    main_types[CST_BLACKSMITH_6].group = GROUP_BLACKSMITH;
-    main_types[CST_BLACKSMITH_6].graphic = load_graphic(CST_BLACKSMITH_6_G);
-
-    prog_box("", 75);
-
-    main_types[CST_MILL_0].group = GROUP_MILL;
-    main_types[CST_MILL_0].graphic = load_graphic(CST_MILL_0_G);
-
-    main_types[CST_MILL_1].group = GROUP_MILL;
-    main_types[CST_MILL_1].graphic = load_graphic(CST_MILL_1_G);
-
-    main_types[CST_MILL_2].group = GROUP_MILL;
-    main_types[CST_MILL_2].graphic = load_graphic(CST_MILL_2_G);
-
-    main_types[CST_MILL_3].group = GROUP_MILL;
-    main_types[CST_MILL_3].graphic = load_graphic(CST_MILL_3_G);
-
-    main_types[CST_MILL_4].group = GROUP_MILL;
-    main_types[CST_MILL_4].graphic = load_graphic(CST_MILL_4_G);
-
-    main_types[CST_MILL_5].group = GROUP_MILL;
-    main_types[CST_MILL_5].graphic = load_graphic(CST_MILL_5_G);
-
-    main_types[CST_MILL_6].group = GROUP_MILL;
-    main_types[CST_MILL_6].graphic = load_graphic(CST_MILL_6_G);
-
-    main_types[CST_POTTERY_0].group = GROUP_POTTERY;
-    main_types[CST_POTTERY_0].graphic = load_graphic(CST_POTTERY_0_G);
-
-    main_types[CST_POTTERY_1].group = GROUP_POTTERY;
-    main_types[CST_POTTERY_1].graphic = load_graphic(CST_POTTERY_1_G);
-
-    main_types[CST_POTTERY_2].group = GROUP_POTTERY;
-    main_types[CST_POTTERY_2].graphic = load_graphic(CST_POTTERY_2_G);
-
-    main_types[CST_POTTERY_3].group = GROUP_POTTERY;
-    main_types[CST_POTTERY_3].graphic = load_graphic(CST_POTTERY_3_G);
-
-    main_types[CST_POTTERY_4].group = GROUP_POTTERY;
-    main_types[CST_POTTERY_4].graphic = load_graphic(CST_POTTERY_4_G);
-
-    main_types[CST_POTTERY_5].group = GROUP_POTTERY;
-    main_types[CST_POTTERY_5].graphic = load_graphic(CST_POTTERY_5_G);
-
-    main_types[CST_POTTERY_6].group = GROUP_POTTERY;
-    main_types[CST_POTTERY_6].graphic = load_graphic(CST_POTTERY_6_G);
-
-    main_types[CST_POTTERY_7].group = GROUP_POTTERY;
-    main_types[CST_POTTERY_7].graphic = load_graphic(CST_POTTERY_7_G);
-
-    main_types[CST_POTTERY_8].group = GROUP_POTTERY;
-    main_types[CST_POTTERY_8].graphic = load_graphic(CST_POTTERY_8_G);
-
-    main_types[CST_POTTERY_9].group = GROUP_POTTERY;
-    main_types[CST_POTTERY_9].graphic = load_graphic(CST_POTTERY_9_G);
-
-    main_types[CST_POTTERY_10].group = GROUP_POTTERY;
-    main_types[CST_POTTERY_10].graphic = load_graphic(CST_POTTERY_10_G);
-
-    main_types[CST_FIRESTATION_1].group = GROUP_FIRESTATION;
-    main_types[CST_FIRESTATION_1].graphic = load_graphic(CST_FIRESTATION_1_G);
-
-    main_types[CST_FIRESTATION_2].group = GROUP_FIRESTATION;
-    main_types[CST_FIRESTATION_2].graphic = load_graphic(CST_FIRESTATION_2_G);
-
-    main_types[CST_FIRESTATION_3].group = GROUP_FIRESTATION;
-    main_types[CST_FIRESTATION_3].graphic = load_graphic(CST_FIRESTATION_3_G);
-
-    main_types[CST_FIRESTATION_4].group = GROUP_FIRESTATION;
-    main_types[CST_FIRESTATION_4].graphic = load_graphic(CST_FIRESTATION_4_G);
-
-    main_types[CST_FIRESTATION_5].group = GROUP_FIRESTATION;
-    main_types[CST_FIRESTATION_5].graphic = load_graphic(CST_FIRESTATION_5_G);
-
-    main_types[CST_FIRESTATION_6].group = GROUP_FIRESTATION;
-    main_types[CST_FIRESTATION_6].graphic = load_graphic(CST_FIRESTATION_6_G);
-
-    main_types[CST_FIRESTATION_7].group = GROUP_FIRESTATION;
-    main_types[CST_FIRESTATION_7].graphic = load_graphic(CST_FIRESTATION_7_G);
-
-    main_types[CST_FIRESTATION_8].group = GROUP_FIRESTATION;
-    main_types[CST_FIRESTATION_8].graphic = load_graphic(CST_FIRESTATION_8_G);
-
-    main_types[CST_FIRESTATION_9].group = GROUP_FIRESTATION;
-    main_types[CST_FIRESTATION_9].graphic = load_graphic(CST_FIRESTATION_9_G);
-
-    main_types[CST_FIRESTATION_10].group = GROUP_FIRESTATION;
-    main_types[CST_FIRESTATION_10].graphic = load_graphic(CST_FIRESTATION_10_G);
-
-    main_types[CST_CRICKET_1].group = GROUP_CRICKET;
-    main_types[CST_CRICKET_1].graphic = load_graphic(CST_CRICKET_1_G);
-
-    main_types[CST_CRICKET_2].group = GROUP_CRICKET;
-    main_types[CST_CRICKET_2].graphic = load_graphic(CST_CRICKET_2_G);
-
-    main_types[CST_CRICKET_3].group = GROUP_CRICKET;
-    main_types[CST_CRICKET_3].graphic = load_graphic(CST_CRICKET_3_G);
-
-    main_types[CST_CRICKET_4].group = GROUP_CRICKET;
-    main_types[CST_CRICKET_4].graphic = load_graphic(CST_CRICKET_4_G);
-
-    prog_box("", 90);
-
-    main_types[CST_CRICKET_5].group = GROUP_CRICKET;
-    main_types[CST_CRICKET_5].graphic = load_graphic(CST_CRICKET_5_G);
-
-    main_types[CST_CRICKET_6].group = GROUP_CRICKET;
-    main_types[CST_CRICKET_6].graphic = load_graphic(CST_CRICKET_6_G);
-
-    main_types[CST_CRICKET_7].group = GROUP_CRICKET;
-    main_types[CST_CRICKET_7].graphic = load_graphic(CST_CRICKET_7_G);
-
-    main_types[CST_FIRE_1].group = GROUP_FIRE;
-    main_types[CST_FIRE_1].graphic = load_graphic(CST_FIRE_1_G);
-
-    main_types[CST_FIRE_2].group = GROUP_FIRE;
-    main_types[CST_FIRE_2].graphic = load_graphic(CST_FIRE_2_G);
-
-    main_types[CST_FIRE_3].group = GROUP_FIRE;
-    main_types[CST_FIRE_3].graphic = load_graphic(CST_FIRE_3_G);
-
-    main_types[CST_FIRE_4].group = GROUP_FIRE;
-    main_types[CST_FIRE_4].graphic = load_graphic(CST_FIRE_4_G);
-
-    main_types[CST_FIRE_5].group = GROUP_FIRE;
-    main_types[CST_FIRE_5].graphic = load_graphic(CST_FIRE_5_G);
-
-    main_types[CST_FIRE_DONE1].group = GROUP_FIRE;
-    main_types[CST_FIRE_DONE1].graphic = load_graphic(CST_FIRE_DONE1_G);
-
-    main_types[CST_FIRE_DONE2].group = GROUP_FIRE;
-    main_types[CST_FIRE_DONE2].graphic = load_graphic(CST_FIRE_DONE2_G);
-
-    main_types[CST_FIRE_DONE3].group = GROUP_FIRE;
-    main_types[CST_FIRE_DONE3].graphic = load_graphic(CST_FIRE_DONE3_G);
-
-    main_types[CST_FIRE_DONE4].group = GROUP_FIRE;
-    main_types[CST_FIRE_DONE4].graphic = load_graphic(CST_FIRE_DONE4_G);
-
-    main_types[CST_SHANTY].group = GROUP_SHANTY;
-    main_types[CST_SHANTY].graphic = load_graphic(CST_SHANTY_G);
-#endif
-
     main_types[CST_USED].group = GROUP_USED;
     main_types[CST_USED].graphic = 0;   /* Won't be dereferenced! */
 }

Modified: trunk/src/lincity/modules/market.cpp
===================================================================
--- trunk/src/lincity/modules/market.cpp	2007-12-02 10:50:08 UTC (rev 1302)
+++ trunk/src/lincity/modules/market.cpp	2007-12-02 11:58:25 UTC (rev 1303)
@@ -458,13 +458,6 @@
         if (MP_INFO(x, y).int_7 >= (99 * MAX_WASTE_IN_MARKET / 100)) {
             MP_POL(x, y) += 3000;
             MP_INFO(x, y).int_7 -= (7 * MAX_WASTE_IN_MARKET) / 10;
-#if defined (commentout)
-            /* this should fire up the pollution mini screen within a second.
-             * AL1: oh this is not implemented in NG :(
-             * This works only with oldgui
-             */
-            mini_screen_flags = MINI_SCREEN_POL_FLAG;
-#endif
         }
     }
 

Modified: trunk/src/lincity/modules/oremine.cpp
===================================================================
--- trunk/src/lincity/modules/oremine.cpp	2007-12-02 10:50:08 UTC (rev 1302)
+++ trunk/src/lincity/modules/oremine.cpp	2007-12-02 11:58:25 UTC (rev 1303)
@@ -122,11 +122,6 @@
             break;
         }
         if (MP_INFO(x, y).int_2 <= 0) {
-#if defined (commentout)
-            /* AL1. It seems to be overwritten just below! */
-            do_bulldoze_area(CST_GREEN, x, y);
-            place_item(x, y, CST_TIP_0);
-#endif
             int i, j;
             for (j = 0; j < 4; j++) {
                 for (i = 0; i < 4; i++) {

Modified: trunk/src/lincity/modules/rocket_pad.cpp
===================================================================
--- trunk/src/lincity/modules/rocket_pad.cpp	2007-12-02 10:50:08 UTC (rev 1302)
+++ trunk/src/lincity/modules/rocket_pad.cpp	2007-12-02 11:58:25 UTC (rev 1303)
@@ -115,29 +115,6 @@
 
 void remove_people(int num)
 {
-#if defined (commentout)
-    int x, y, f;
-    time_t t;
-    f = 1;
-    t = time(0);
-    while (f && (num > 0)) {
-        for (y = 0; y < WORLD_SIDE_LEN; y++)
-            for (x = 0; x < WORLD_SIDE_LEN; x++)
-                if (MP_GROUP_IS_RESIDENCE(x, y) && MP_INFO(x, y).population > 0) {
-                    MP_INFO(x, y).population--;
-                    // f = 1;
-                    f |= (MP_INFO(x, y).population > 0);
-                    num--;
-                    total_evacuated++;
-                }
-    }
-    while (num > 0 && people_pool > 0) {
-        num--;
-        total_evacuated++;
-        people_pool--;
-    }
-#endif
-
     int x, y;
     /* reset housed population so that we can display it correctly */
     housed_population = 1;
@@ -160,17 +137,6 @@
 
     refresh_population_text();
 
-#if defined (commentout)
-/* last ship wasn't full so everyone has gone. */
-    if (num > 0) {
-        if (t > HOF_START && t < HOF_STOP)
-            ok_dial_box("launch-gone-mail.mes", GOOD, 0L);
-        else
-            ok_dial_box("launch-gone.mes", GOOD, 0L);
-        housed_population = 0;
-    }
-#endif
-
     /* Note that the previous test was inaccurate.  There could be 
        exactly 1000 people left. */
     if (!housed_population && !people_pool) {

Modified: trunk/src/lincity/modules/shanty.cpp
===================================================================
--- trunk/src/lincity/modules/shanty.cpp	2007-12-02 10:50:08 UTC (rev 1302)
+++ trunk/src/lincity/modules/shanty.cpp	2007-12-02 11:58:25 UTC (rev 1303)
@@ -31,9 +31,8 @@
         x = r % WORLD_SIDE_LEN;
         r = spiral_find_2x2(x, y);
         if (r == -1) {
-#ifdef commentout               /* wck: These are annoying when the map is full */
-            printf("Adding a shanty (s), no space for it?!\n");
-#endif
+            /* wck: These are annoying when the map is full */
+            fprintf(stderr,"Adding a shanty (s), no space for it?!\n");
             return;
         }
         y = r / WORLD_SIDE_LEN;
@@ -47,9 +46,8 @@
         x = r % WORLD_SIDE_LEN;
         r = spiral_find_2x2(x, y);
         if (r == -1) {
-#ifdef commentout               /* see above */
-            printf("Adding a shanty (r), no space for it?!\n");
-#endif
+            /* see above */
+            fprintf(stderr,"Adding a shanty (r), no space for it?!\n");
             return;
         }
         y = r / WORLD_SIDE_LEN;

Modified: trunk/src/lincity/modules/tip.cpp
===================================================================
--- trunk/src/lincity/modules/tip.cpp	2007-12-02 10:50:08 UTC (rev 1302)
+++ trunk/src/lincity/modules/tip.cpp	2007-12-02 11:58:25 UTC (rev 1303)
@@ -50,11 +50,6 @@
         MP_INFO(x, y - 1).int_7 -= i * 10;
         sust_dig_ore_coal_tip_flag = 0;
     }
-#if defined (commentout)
-    /* Increment the "ore" reserve; this prevents a new tip from being
-       built on top of a degraded one. */
-    MP_INFO(x, y).ore_reserve++;
-#endif
 
     /* now choose an icon. */
     if ((total_time % NUMOF_DAYS_IN_MONTH) == 0) {

Modified: trunk/src/lincity/transport.cpp
===================================================================
--- trunk/src/lincity/transport.cpp	2007-12-02 10:50:08 UTC (rev 1302)
+++ trunk/src/lincity/transport.cpp	2007-12-02 11:58:25 UTC (rev 1303)
@@ -370,10 +370,7 @@
                 /* Next, set the connectivity into MP_TYPE */
                 MP_TYPE(x, y) = power_table[mask];
                 /* Finally, adjust MP_TYPE to show electon bolt */
-#ifdef commentout
-              WCK:This is done in do_power_line now if (MP_INFO(x, y).int_1 != 0)
-                    MP_TYPE(x, y) -= 11;
-#endif
+                /* WCK:This is done in do_power_line now if (MP_INFO(x, y).int_1 != 0) */
                 break;
 
             case GROUP_TRACK:

Modified: trunk/src/lincity-ng/EconomyGraph.cpp
===================================================================
--- trunk/src/lincity-ng/EconomyGraph.cpp	2007-12-02 10:50:08 UTC (rev 1302)
+++ trunk/src/lincity-ng/EconomyGraph.cpp	2007-12-02 11:58:25 UTC (rev 1303)
@@ -32,7 +32,6 @@
 
 #include "tinygettext/gettext.hpp"
 
-#include "lincity/shrglobs.h"
 #include "lincity/engglobs.h"
 #include "lincity/stats.h"
 #include "lincity/lin-city.h"



From alainb at mail.berlios.de  Sun Dec  2 13:00:32 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sun, 2 Dec 2007 13:00:32 +0100
Subject: [Lincity-ng-commit] r1304 - trunk
Message-ID: <200712021200.lB2C0WRS018205@sheep.berlios.de>

Author: alainb
Date: 2007-12-02 13:00:32 +0100 (Sun, 02 Dec 2007)
New Revision: 1304

Modified:
   trunk/TODO
Log:
previous commit also remove wrong include of shrglobs.h wich was deleted previously

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2007-12-02 11:58:25 UTC (rev 1303)
+++ trunk/TODO	2007-12-02 12:00:32 UTC (rev 1304)
@@ -99,3 +99,4 @@
  [L] Is it possible to automatically generate/maintain a ChangeLog file from svn
      commits?  (Nathan: http://tiefighter.et.tudelft.nl/~arthur/svn2cl/)
      Yes:  $ svn log >Changelog_full
+



From alainb at mail.berlios.de  Sun Dec  2 14:26:25 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sun, 2 Dec 2007 14:26:25 +0100
Subject: [Lincity-ng-commit] r1305 - trunk/src/lincity
Message-ID: <200712021326.lB2DQPgv028197@sheep.berlios.de>

Author: alainb
Date: 2007-12-02 14:26:25 +0100 (Sun, 02 Dec 2007)
New Revision: 1305

Modified:
   trunk/src/lincity/engine.cpp
   trunk/src/lincity/power.cpp
Log:
fix minimap power display

Modified: trunk/src/lincity/engine.cpp
===================================================================
--- trunk/src/lincity/engine.cpp	2007-12-02 12:00:32 UTC (rev 1304)
+++ trunk/src/lincity/engine.cpp	2007-12-02 13:26:25 UTC (rev 1305)
@@ -22,7 +22,6 @@
 #include "modules/all_modules.h"
 #include "transport.h"
 
-extern int selected_type_cost;
 extern void ok_dial_box(const char *, int, const char *);
 extern void print_total_money(void);
 
@@ -438,7 +437,7 @@
     int x, y,m;
     /* Clear the flag */
     m = 0xffffffff - (FLAG_FIRE_COVER | FLAG_HEALTH_COVER
-                      | FLAG_CRICKET_COVER | FLAG_WATERWELL_COVER | FLAG_ASKED_FOR_POWER | FLAG_GOT_POWER);
+                      | FLAG_CRICKET_COVER | FLAG_WATERWELL_COVER);
     for (y = 0; y < WORLD_SIDE_LEN; y++)
         for (x = 0; x < WORLD_SIDE_LEN; x++)
             MP_INFO(x, y).flags &= m;

Modified: trunk/src/lincity/power.cpp
===================================================================
--- trunk/src/lincity/power.cpp	2007-12-02 12:00:32 UTC (rev 1304)
+++ trunk/src/lincity/power.cpp	2007-12-02 13:26:25 UTC (rev 1305)
@@ -39,6 +39,7 @@
 {
     int gi;
     int net;                    /* net power */
+    int x, y,m;
 
     if (grid_num == 0)
         return;
@@ -68,6 +69,14 @@
     /*  int_4 is the local power demand in the substation */
     for (gi = 0; gi < numof_substations; gi++)
         MP_INFO(substationx[gi], substationy[gi]).int_4 = 0;
+
+    /* Clear building info wrt power */
+    m = 0xffffffff - (FLAG_ASKED_FOR_POWER | FLAG_GOT_POWER);
+    for (y = 0; y < WORLD_SIDE_LEN; y++)
+        for (x = 0; x < WORLD_SIDE_LEN; x++)
+            MP_INFO(x, y).flags &= m;
+
+
 }
 
 void map_power_grid(bool resetgrids)



From alainb at mail.berlios.de  Sun Dec  2 18:27:34 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sun, 2 Dec 2007 18:27:34 +0100
Subject: [Lincity-ng-commit] r1306 - in trunk: . src/lincity
Message-ID: <200712021727.lB2HRYia008505@sheep.berlios.de>

Author: alainb
Date: 2007-12-02 18:27:33 +0100 (Sun, 02 Dec 2007)
New Revision: 1306

Modified:
   trunk/README-WaterWell
   trunk/src/lincity/engglobs.cpp
   trunk/src/lincity/engglobs.h
   trunk/src/lincity/ldsvguts.cpp
   trunk/src/lincity/ldsvguts.h
   trunk/src/lincity/lin-city.h
   trunk/src/lincity/lintypes.h
   trunk/src/lincity/simulate.cpp
   trunk/src/lincity/simulate.h
Log:
additional data structure, and load/save accordingly
BACKUP of personnal games is strongly encouraged before use.
Work In Progress for upgrade of old-games

Modified: trunk/README-WaterWell
===================================================================
--- trunk/README-WaterWell	2007-12-02 13:26:25 UTC (rev 1305)
+++ trunk/README-WaterWell	2007-12-02 17:27:33 UTC (rev 1306)
@@ -1,3 +1,12 @@
+WARNING
+-------
+
+        BACKUP YOUR SAVED GAMES BEFORE USE.
+        
+        Data structure have changed and impact load/save.
+
+        YOU HAVE BEEN WARNED, BACKUP YOUR DATA.
+
 README:
 -------
 Attempt to implement some kind of water management.
@@ -16,7 +25,8 @@
  -basic ecology: change desert with UGW (= bulldozed tile) to green after some monthes.
    (needed for showing UGW for placing farms communes and parks)
  -Tuning of aridity parameter and others (communes, farms, parks) seems rather correct.
-  
+ -additional data structure and load/save.
+
 AIM:
 ----
 * simple ecology = periodic event :

Modified: trunk/src/lincity/engglobs.cpp
===================================================================
--- trunk/src/lincity/engglobs.cpp	2007-12-02 13:26:25 UTC (rev 1305)
+++ trunk/src/lincity/engglobs.cpp	2007-12-02 17:27:33 UTC (rev 1306)
@@ -8,8 +8,8 @@
 #include "fileutil.h"
 
 /* load/save version for compatibility with(out) waterwell */
-int ldsv_version = 1170;
-int use_waterwell = true;
+int ldsv_version;
+int use_waterwell=true;
 
 Map map;
 
@@ -81,3 +81,9 @@
     EX_DISCOUNT_TRIGGER_5,
     EX_DISCOUNT_TRIGGER_6,
 };
+
+
+int  global_aridity;
+int  global_mountainity;
+ground_struct ground[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
+

Modified: trunk/src/lincity/engglobs.h
===================================================================
--- trunk/src/lincity/engglobs.h	2007-12-02 13:26:25 UTC (rev 1305)
+++ trunk/src/lincity/engglobs.h	2007-12-02 17:27:33 UTC (rev 1306)
@@ -27,6 +27,9 @@
 extern struct TYPE main_types[NUM_OF_TYPES];
 
 extern int mappoint_array_x[WORLD_SIDE_LEN], mappoint_array_y[WORLD_SIDE_LEN];
+extern ground_struct ground[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
+extern int global_aridity, global_mountainity;
+
 extern int numof_shanties, numof_communes;
 extern int last_built_x, last_built_y;
 

Modified: trunk/src/lincity/ldsvguts.cpp
===================================================================
--- trunk/src/lincity/ldsvguts.cpp	2007-12-02 13:26:25 UTC (rev 1305)
+++ trunk/src/lincity/ldsvguts.cpp	2007-12-02 17:27:33 UTC (rev 1306)
@@ -70,13 +70,13 @@
 */
 #include "lctypes.h"
 #include "lin-city.h"
-//#include "cliglobs.h"
 #include "engglobs.h"
 #include "fileutil.h"
 #include "power.h"
 #include "gui_interface/pbar_interface.h"
 #include "lincity-ng/ErrorInterface.hpp"
 #include "stats.h"
+#include "ldsvguts.h"
 
 #if defined (WIN32) && !defined (NDEBUG)
 #define START_FAST_SPEED 1
@@ -98,7 +98,7 @@
 extern void print_total_money(void);
 extern int count_groups(int);
 extern void reset_animation_times(void);
-
+extern void upgrade_to_v2(void);
 /* ---------------------------------------------------------------------- *
  * Private Fn Prototypes
  * ---------------------------------------------------------------------- */
@@ -138,8 +138,10 @@
         do_error(_("Can't open save file!"));
     }
     /* save without waterwell are in NG 1.1 format, eg scenario good_time is ver 98 when loaded */
-    if (ldsv_version < VERSION_INT)
-        ldsv_version = VERSION_INT;
+       //if (ldsv_version < VERSION_INT)
+       //   ldsv_version = VERSION_INT;
+    /* Now we have upgraded game */
+    ldsv_version = WATERWELL_V2;
 
     gzprintf(ofile, "%d\n", ldsv_version);
     q = sizeof(Map_Point_Info);
@@ -288,7 +290,26 @@
 
     gzprintf(ofile, "sust %d %d %d %d %d %d %d %d %d %d\n", sust_dig_ore_coal_count, sust_port_count, sust_old_money_count, sust_old_population_count, sust_old_tech_count, sust_fire_count, sust_old_money, sust_old_population, sust_old_tech, sustain_flag); /* 3 */
 
-    if (use_waterwell == true) {
+    if (ldsv_version == WATERWELL_V2) {
+        gzprintf(ofile,"%d %d\n", global_aridity, global_mountainity);
+        for (x = 0; x < WORLD_SIDE_LEN; x++) {
+            for (y = 0; y < WORLD_SIDE_LEN; y++) {
+                gzprintf(ofile,"%d %d %d %d %d %d %d %d %d %d %d %d\n"
+                        , ground[x][y].altitude
+                        , ground[x][y].ecotable
+                        , ground[x][y].wastes
+                        , ground[x][y].pollution
+                        , ground[x][y].water_alt
+                        , ground[x][y].water_pol
+                        , ground[x][y].water_wast
+                        , ground[x][y].water_next
+                        , ground[x][y].int1
+                        , ground[x][y].int2
+                        , ground[x][y].int3
+                        , ground[x][y].int4
+                        );
+            }
+        }
     } else {
         gzprintf(ofile, "dummy\n");     /* 4 */
     }
@@ -334,6 +355,8 @@
     int dummy;
     gzFile gzfile;
     char s[256];
+    int need_upgrade=true;
+
     gzfile = gzopen(cname, "rb");
     if (gzfile == NULL) {
         printf(_("Can't open <%s> (gzipped)"), cname);
@@ -348,15 +371,18 @@
     }
 
     fprintf(stderr, " ldsv_version = %i \n", ldsv_version);
-    if (ldsv_version < MIN_WATERWELL_VERSION) {
-        /* ok_dial_box ("no-waterwell.mes", GOOD, 0L); */
+    /*if (ldsv_version < MIN_WATERWELL_VERSION) {
         use_waterwell = false;
     } else {
         use_waterwell = true;
-        /* needed until it is written in the saved file
-         * in case of load after having played an old game
-         */
-    }
+        // needed until it is written in the saved file
+        // in case of load after having played an old game
+        if (ldsv_version >= WATERWELL_V2)
+            need_upgrade = false;
+    }*/
+    if (ldsv_version >= WATERWELL_V2)
+            need_upgrade = false;
+    use_waterwell = true;
 
     init_pbars();
     num_pbars = NUM_PBARS;
@@ -589,7 +615,26 @@
         sustain_flag = sust_dig_ore_coal_count = sust_port_count
             = sust_old_money_count = sust_old_population_count
             = sust_old_tech_count = sust_fire_count = sust_old_money = sust_old_population = sust_old_tech = 0;
-    if (use_waterwell == true) {
+
+    if (ldsv_version == WATERWELL_V2) {
+        sscanf(s,"%d %d\n", &global_aridity, &global_mountainity);
+        for (x = 0; x < WORLD_SIDE_LEN; x++) {
+            for (y = 0; y < WORLD_SIDE_LEN; y++) {
+                sscanf(s,"%d %d %d %d %d %d %d %d %d %d %d %d\n",&ground[x][y].altitude
+                        , &ground[x][y].ecotable
+                        , &ground[x][y].wastes
+                        , &ground[x][y].pollution
+                        , &ground[x][y].water_alt
+                        , &ground[x][y].water_pol
+                        , &ground[x][y].water_wast
+                        , &ground[x][y].water_next
+                        , &ground[x][y].int1
+                        , &ground[x][y].int2
+                        , &ground[x][y].int3
+                        , &ground[x][y].int4 
+                        );
+            }
+        }
     }
     gzclose(gzfile);
 
@@ -646,6 +691,8 @@
                                  * FIXME: move all initialisation elsewhere, in 
                                  *    engine.cpp or simulate.cpp.
                                  */
+    if (need_upgrade)
+        upgrade_to_v2();
 
 }
 

Modified: trunk/src/lincity/ldsvguts.h
===================================================================
--- trunk/src/lincity/ldsvguts.h	2007-12-02 13:26:25 UTC (rev 1305)
+++ trunk/src/lincity/ldsvguts.h	2007-12-02 17:27:33 UTC (rev 1306)
@@ -9,6 +9,20 @@
 #ifndef __ldsvguts_h__
 #define __ldsvguts_h__
 
+/* VERSION_INT is used in the load/save code.  All other code uses 
+   the symbol VERSION in config.h */
+#define VERSION_INT 113
+
+/* Disable waterwell if version < MIN_WATERWELL_VERSION */
+#define MIN_WATERWELL_VERSION 1180
+
+/* Additionnal data structure */
+#define WATERWELL_V2 1306
+
+/* Don't load if < MIN_LOAD_VERSION */
+#define MIN_LOAD_VERSION 97
+
+
 void load_saved_city(char *s);
 void sanity_check(void);
 void save_city(char *);

Modified: trunk/src/lincity/lin-city.h
===================================================================
--- trunk/src/lincity/lin-city.h	2007-12-02 13:26:25 UTC (rev 1305)
+++ trunk/src/lincity/lin-city.h	2007-12-02 17:27:33 UTC (rev 1306)
@@ -47,16 +47,6 @@
        ************************************************
 */
 
-/* VERSION_INT is used in the load/save code.  All other code uses 
-   the symbol VERSION in config.h */
-#define VERSION_INT 113
-
-/* Disable waterwell if version < MIN_WATERWELL_VERSION */
-#define MIN_WATERWELL_VERSION 1180
-
-/* Don't load if < MIN_LOAD_VERSION */
-#define MIN_LOAD_VERSION 97
-
 /* Load corrections if version <= MM_MS_C_VER (max markets/substations) */
 #define MM_MS_C_VER 97
 

Modified: trunk/src/lincity/lintypes.h
===================================================================
--- trunk/src/lincity/lintypes.h	2007-12-02 13:26:25 UTC (rev 1305)
+++ trunk/src/lincity/lintypes.h	2007-12-02 17:27:33 UTC (rev 1306)
@@ -81,6 +81,19 @@
 #define MP_GROUP_IS_RESIDENCE(x,y)  (GROUP_IS_RESIDENCE(MP_GROUP(x,y)))
 #define HAS_UGWATER(x,y) (MP_INFO(x,y).flags & FLAG_HAS_UNDERGROUND_WATER)
 
+struct ground_struct {
+    int altitude;       //surface of ground. unused currently
+    int ecotable;       //done at init time: pointer to the table for vegetation
+    int wastes;         //wastes underground
+    int pollution;      //pollution underground
+    int water_alt;      //altitude of water (needed to know drainage basin)
+    int water_pol;      //pollution of water
+    int water_wast;     //wastes in water
+    int water_next;     //next tile(s) where the water will go from here
+    int int1;           //reserved for future (?) use
+    int int2;
+    int int3;
+    int int4;
+};
 
-
 #endif /* __lintypes_h__ */

Modified: trunk/src/lincity/simulate.cpp
===================================================================
--- trunk/src/lincity/simulate.cpp	2007-12-02 13:26:25 UTC (rev 1305)
+++ trunk/src/lincity/simulate.cpp	2007-12-02 17:27:33 UTC (rev 1306)
@@ -32,6 +32,7 @@
 #include "gui_interface/shared_globals.h"
 #include "lctypes.h"
 #include "lin-city.h"
+#include "ldsvguts.h"
 #include "engglobs.h"
 #include "gui_interface/screen_interface.h"
 #include "power.h"
@@ -204,6 +205,31 @@
     }
 }
 
+void upgrade_to_v2 (void)
+{
+    int x,y;
+    /* fill the corrects fields: ground[x][y).stuff, global_aridity, global_mountainity */
+    /* currently only dummy things in order to compile */
+    global_aridity = 0;
+    global_mountainity=0;
+    
+    for (x = 0; x < WORLD_SIDE_LEN; x++) {
+        for (y = 0; y < WORLD_SIDE_LEN; y++) {
+            ground[x][y].altitude=0;
+            ground[x][y].ecotable=0;
+            ground[x][y].wastes=0;
+            ground[x][y].pollution=0;
+            ground[x][y].water_alt=0;
+            ground[x][y].water_pol=0;
+            ground[x][y].water_wast=0;
+            ground[x][y].water_next=0;
+            ground[x][y].int1=0;
+            ground[x][y].int2=0;
+            ground[x][y].int3=0;
+            ground[x][y].int4=0;
+        }
+    }
+}
 
 /* ---------------------------------------------------------------------- *
  * Private Functions
@@ -538,9 +564,9 @@
     init_inventory();
     update_avail_modules(0);
     /* Al1. NG 1.1 is this enough ? Are all global variables reseted ? */
-    /* TODO reset screen, sustain info */
+    /* TODO reset screen, sustain info, max_tech when load scenario... */
     use_waterwell = true;
-    ldsv_version = MIN_WATERWELL_VERSION;
+    ldsv_version = WATERWELL_V2;
 }
 
 void new_city(int *originx, int *originy, int random_village)
@@ -831,7 +857,29 @@
 static void random_start(int *originx, int *originy)
 {
     int x, y, xx, yy, flag, watchdog;
+    /* fill the corrects fields: ground[x][y).stuff, global_aridity, global_mountainity */
+    /* currently only dummy things in order to compile */
+    global_aridity = 0;
+    global_mountainity=0;
+    
+    for (x = 0; x < WORLD_SIDE_LEN; x++) {
+        for (y = 0; y < WORLD_SIDE_LEN; y++) {
+            ground[x][y].altitude=0;
+            ground[x][y].ecotable=0;
+            ground[x][y].wastes=0;
+            ground[x][y].pollution=0;
+            ground[x][y].water_alt=0;
+            ground[x][y].water_pol=0;
+            ground[x][y].water_wast=0;
+            ground[x][y].water_next=0;
+            ground[x][y].int1=0;
+            ground[x][y].int2=0;
+            ground[x][y].int3=0;
+            ground[x][y].int4=0;
+        }
+    }
 
+
     /* first find a place that has some water. */
     watchdog = 90;              /* if too many tries, random placement. */
     do {

Modified: trunk/src/lincity/simulate.h
===================================================================
--- trunk/src/lincity/simulate.h	2007-12-02 13:26:25 UTC (rev 1305)
+++ trunk/src/lincity/simulate.h	2007-12-02 17:27:33 UTC (rev 1306)
@@ -13,5 +13,6 @@
 void count_all_groups(int *group_count);
 void init_mappoint_array(void);
 void set_mappoint(int x, int y, short selected_type);
+void upgrade_to_v2(void);
 
 #endif /* __simulate_h__ */



From alainb at mail.berlios.de  Sun Dec  2 21:52:00 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sun, 2 Dec 2007 21:52:00 +0100
Subject: [Lincity-ng-commit] r1307 - in trunk/src/lincity: . modules
Message-ID: <200712022052.lB2Kq0nX010409@sheep.berlios.de>

Author: alainb
Date: 2007-12-02 21:51:59 +0100 (Sun, 02 Dec 2007)
New Revision: 1307

Modified:
   trunk/src/lincity/engglobs.cpp
   trunk/src/lincity/engglobs.h
   trunk/src/lincity/lin-city.h
   trunk/src/lincity/modules/residence.cpp
   trunk/src/lincity/simulate.cpp
   trunk/src/lincity/simulate.h
Log:
automatic upgrade for old games
Let 10 years to build water wells, then starvation will occur

Modified: trunk/src/lincity/engglobs.cpp
===================================================================
--- trunk/src/lincity/engglobs.cpp	2007-12-02 17:27:33 UTC (rev 1306)
+++ trunk/src/lincity/engglobs.cpp	2007-12-02 20:51:59 UTC (rev 1307)
@@ -44,6 +44,7 @@
 int sust_old_tech = 0, sust_old_tech_count = 0, sust_fire_count = 0;
 
 int total_time = 0;             /* game time */
+int deadline = 0; 
 
 int population, starving_population;
 int housed_population;

Modified: trunk/src/lincity/engglobs.h
===================================================================
--- trunk/src/lincity/engglobs.h	2007-12-02 17:27:33 UTC (rev 1306)
+++ trunk/src/lincity/engglobs.h	2007-12-02 20:51:59 UTC (rev 1307)
@@ -38,7 +38,8 @@
 extern int sust_old_money_count, sust_old_population, sust_old_population_count;
 extern int sust_old_tech, sust_old_tech_count, sust_fire_count;
 
-extern int total_time;          /* game time */
+extern int total_time;  // game time
+extern int deadline;    // + 10 years to upgrade with waterwell everywhere
 
 extern int population, starving_population;
 extern int housed_population;
@@ -69,5 +70,4 @@
 extern int selected_type_cost;
 
 extern int ex_tax_dis[NUMOF_DISCOUNT_TRIGGERS];
-
 #endif /* __engglobs_h__ */

Modified: trunk/src/lincity/lin-city.h
===================================================================
--- trunk/src/lincity/lin-city.h	2007-12-02 17:27:33 UTC (rev 1306)
+++ trunk/src/lincity/lin-city.h	2007-12-02 20:51:59 UTC (rev 1307)
@@ -551,7 +551,7 @@
 #define RAIL_STEEL_USED_MASK 0x7f
 #define MAX_STEEL_AT_INDUSTRY_H (MAX_STEEL_ON_RAIL*10)
 
-#define WATERWELL_RANGE 10
+#define WATERWELL_RANGE 20
 
 /*
   JOBS_MAKE_STEEL is the steel made per job at the steel works

Modified: trunk/src/lincity/modules/residence.cpp
===================================================================
--- trunk/src/lincity/modules/residence.cpp	2007-12-02 17:27:33 UTC (rev 1306)
+++ trunk/src/lincity/modules/residence.cpp	2007-12-02 20:51:59 UTC (rev 1307)
@@ -69,7 +69,7 @@
         }
     }
     /* normal births - must have food, water and jobs... and people */
-    if (use_waterwell)
+    if (use_waterwell && (total_time >= deadline) )
         birth_flag = FLAG_FED + FLAG_WATERWELL_COVER + FLAG_EMPLOYED;
     else
         birth_flag = FLAG_FED + FLAG_EMPLOYED;
@@ -88,18 +88,21 @@
     if (((MP_INFO(x, y).flags & FLAG_FED) == 0)
         | (use_waterwell & (MP_INFO(x, y).flags & FLAG_WATERWELL_COVER) == 0)
         && p > 0) {
+        if (total_time > deadline) {
 #ifdef DEBUG_WATERWELL
-        fprintf(stderr, " hey, we are dying: lack of food or water!, use_waterwell=%i\n", use_waterwell);
+            fprintf(stderr, " hey, we are dying: lack of food or water!, use_waterwell=%i\n", use_waterwell);
 #endif
-        if (rand() % DAYS_PER_STARVE == 1) {
-            p--;
-            unnat_deaths++;
-            total_starve_deaths++;
-            starve_deaths_history += 1.0;
+
+            if (rand() % DAYS_PER_STARVE == 1) {
+                p--;
+                unnat_deaths++;
+                total_starve_deaths++;
+                starve_deaths_history += 1.0;
+            }
+            starving_population += p;
+            bad += 250;
+            drm += 100;
         }
-        starving_population += p;
-        bad += 250;
-        drm += 100;
         MP_INFO(x, y).int_2 = total_time;       /* for the starve screen */
     }
     /* kick one out if overpopulated */

Modified: trunk/src/lincity/simulate.cpp
===================================================================
--- trunk/src/lincity/simulate.cpp	2007-12-02 17:27:33 UTC (rev 1306)
+++ trunk/src/lincity/simulate.cpp	2007-12-02 20:51:59 UTC (rev 1307)
@@ -43,6 +43,8 @@
 
 /* extern resources */
 extern void print_total_money(void);
+void setLincitySpeed( int speed );
+extern void ok_dial_box(const char *, int, const char *);
 
 /* AL1: they are all in engine.cpp */
 extern void connect_rivers(void);
@@ -50,6 +52,9 @@
 extern void do_pollution(void);
 extern void do_fire_health_cricket_power_cover(void);
 
+/* Flag to warn users that they have 10 years to put waterwell everywhere */
+int flag_warning = false;
+
 /* ---------------------------------------------------------------------- *
  * Private Fn Prototypes
  * ---------------------------------------------------------------------- */
@@ -85,6 +90,14 @@
  * ---------------------------------------------------------------------- */
 void do_time_step(void)
 {
+    if (flag_warning) {
+        flag_warning = false;
+        setLincitySpeed(0);
+        ok_dial_box("warning.mes", GOOD, \
+                _("Upgrading from old game. You have 10 years to build water wells where needed. After, starvation will occur!\
+  You should check starvation minimap, and read waterwell help page :-)") );
+
+    }
     /* Increment game time */
     total_time++;
 #ifdef DEBUG_ENGINE
@@ -208,27 +221,21 @@
 void upgrade_to_v2 (void)
 {
     int x,y;
-    /* fill the corrects fields: ground[x][y).stuff, global_aridity, global_mountainity */
-    /* currently only dummy things in order to compile */
-    global_aridity = 0;
-    global_mountainity=0;
-    
-    for (x = 0; x < WORLD_SIDE_LEN; x++) {
-        for (y = 0; y < WORLD_SIDE_LEN; y++) {
-            ground[x][y].altitude=0;
-            ground[x][y].ecotable=0;
-            ground[x][y].wastes=0;
-            ground[x][y].pollution=0;
-            ground[x][y].water_alt=0;
-            ground[x][y].water_pol=0;
-            ground[x][y].water_wast=0;
-            ground[x][y].water_next=0;
-            ground[x][y].int1=0;
-            ground[x][y].int2=0;
-            ground[x][y].int3=0;
-            ground[x][y].int4=0;
-        }
-    }
+    flag_warning = true;
+    setup_land();
+    for (y = 0; y < WORLD_SIDE_LEN; y++)
+        for (x = 0; x < WORLD_SIDE_LEN; x++)
+            if ( !GROUP_IS_BARE(MP_GROUP(x, y)) ) {
+                /* be nice, put water under all existing builings / farms / parks ... */
+                /* This should change soon according to global_aridity and distance_to_river */
+                MP_INFO(x,y).flags |= FLAG_HAS_UNDERGROUND_WATER;
+            }
+    /* Let 10 years in game time to put waterwells where needed, then starvation will occur */
+    deadline=total_time + 1200 * 10;
+#ifdef DEBUG
+    fprintf(stderr," total_time %d, deadline %d\n", total_time, deadline);
+#endif
+
 }
 
 /* ---------------------------------------------------------------------- *
@@ -690,6 +697,30 @@
 {
     int x, y, xw, yw;
     int aridity = rand() % 400 - 150;
+
+    /* fill the corrects fields: ground[x][y).stuff, global_aridity, global_mountainity */
+    /* currently only dummy things in order to compile */
+    global_aridity = aridity;
+    global_mountainity=0;
+    
+    for (x = 0; x < WORLD_SIDE_LEN; x++) {
+        for (y = 0; y < WORLD_SIDE_LEN; y++) {
+            ground[x][y].altitude=0;
+            ground[x][y].ecotable=0;
+            ground[x][y].wastes=0;
+            ground[x][y].pollution=0;
+            ground[x][y].water_alt=0;
+            ground[x][y].water_pol=0;
+            ground[x][y].water_wast=0;
+            ground[x][y].water_next=0;
+            ground[x][y].int1=0;
+            ground[x][y].int2=0;
+            ground[x][y].int3=0;
+            ground[x][y].int4=0;
+        }
+    }
+
+
     for (y = 0; y < WORLD_SIDE_LEN; y++) {
         for (x = 0; x < WORLD_SIDE_LEN; x++) {
             int d2w_min = 2 * WORLD_SIDE_LEN * WORLD_SIDE_LEN;
@@ -708,6 +739,8 @@
                     d2w = (xw - x) * (xw - x) + (yw - y) * (yw - y);
                     if (d2w < d2w_min)
                         d2w_min = d2w;
+                    /* TODO Store square of distance to river for each tile */
+                    /* MP_DIST2RIVER(x,y) = d2w_min; */
                 }
             }
 
@@ -719,122 +752,138 @@
                     arid = (aridity * 2) / 3;
             }
             r = rand() % (d2w_min / 3 + 1) + arid;
-            if (r >= 300) {
-                /* very dry land */
-                int r2 = rand() % 10;
-                if (r2 <= 6)
-                    set_mappoint(x, y, CST_DESERT);
-                else if (r2 <= 8)
-                    set_mappoint(x, y, CST_GREEN);
-                else
-                    set_mappoint(x, y, CST_TREE);
-            } else if (r >= 160) {
-                int r2 = rand() % 10;
-                if (r2 <= 2)
-                    set_mappoint(x, y, CST_DESERT);
-                else if (r2 <= 6)
-                    set_mappoint(x, y, CST_GREEN);
-                else
-                    set_mappoint(x, y, CST_TREE);
-            } else if (r >= 80) {
-                int r2 = rand() % 10;
-                if (r2 <= 1)
-                    set_mappoint(x, y, CST_DESERT);
-                else if (r2 <= 4)
-                    set_mappoint(x, y, CST_GREEN);
-                else if (r2 <= 6)
-                    set_mappoint(x, y, CST_TREE);
-                else
-                    set_mappoint(x, y, CST_TREE2);
-            } else if (r >= 40) {
-                int r2 = rand() % 40;
-                if (r2 == 0)
-                    set_mappoint(x, y, CST_DESERT);
-                else if (r2 <= 12)
-                    set_mappoint(x, y, CST_GREEN);
-                else if (r2 <= 24)
-                    set_mappoint(x, y, CST_TREE);
-                else if (r2 <= 36)
-                    set_mappoint(x, y, CST_TREE2);
-                else
-                    set_mappoint(x, y, CST_TREE3);
-            } else if (r >= 0) {
-                /* normal land */
-                int r2 = rand() % 40;
-                if (r2 <= 10)
-                    set_mappoint(x, y, CST_GREEN);
-                else if (r2 <= 20)
-                    set_mappoint(x, y, CST_TREE);
-                else if (r2 <= 30)
-                    set_mappoint(x, y, CST_TREE2);
-                else
-                    set_mappoint(x, y, CST_TREE3);
-            } else if (r >= -40) {
-                /* forest */
-                int r2 = rand() % 40;
-                if (r2 <= 5)
-                    set_mappoint(x, y, CST_GREEN);
-                else if (r2 <= 10)
-                    set_mappoint(x, y, CST_TREE);
-                else if (r2 <= 25)
-                    set_mappoint(x, y, CST_TREE2);
-                else
-                    set_mappoint(x, y, CST_TREE3);
-            } else if (r >= -80) {
-                int r2 = rand() % 40;
-                if (r2 <= 0)
-                    MP_TYPE(x, y) = CST_WATER;
-                else if (r2 <= 6)
-                    set_mappoint(x, y, CST_GREEN);
-                else if (r2 <= 15)
-                    set_mappoint(x, y, CST_TREE);
-                else if (r2 <= 28)
-                    set_mappoint(x, y, CST_TREE2);
-                else
-                    set_mappoint(x, y, CST_TREE3);
-            } else if (r >= -120) {
-                int r2 = rand() % 40;
-                if (r2 <= 1)
-                    MP_TYPE(x, y) = CST_WATER;
-                else if (r2 <= 6)
-                    set_mappoint(x, y, CST_GREEN);
-                else if (r2 <= 16)
-                    set_mappoint(x, y, CST_TREE);
-                else if (r2 <= 30)
-                    set_mappoint(x, y, CST_TREE2);
-                else
-                    set_mappoint(x, y, CST_TREE3);
-            } else {
-                /* wetland */
-                int r2 = rand() % 40;
-                if (r2 <= 3)
-                    MP_TYPE(x, y) = CST_WATER;
-                else if (r2 <= 8)
-                    set_mappoint(x, y, CST_GREEN);
-                else if (r2 <= 20)
-                    set_mappoint(x, y, CST_TREE);
-                else if (r2 <= 35)
-                    set_mappoint(x, y, CST_TREE2);
-                else
-                    set_mappoint(x, y, CST_TREE3);
-            }
+            ground[x][y].ecotable=r;
+            /* needed to setup quasi randome land. The flag is set below */
+            MP_INFO(x, y).flags |= FLAG_HAS_UNDERGROUND_WATER;
+            do_rand_ecology(x,y);
             MP_POL(x, y) = 0;
+
             /* preserve rivers, so that we can connect port later */
             if (MP_TYPE(x, y) == CST_WATER) {
                 int navigable = MP_INFO(x, y).flags & FLAG_IS_RIVER;
                 set_mappoint(x, y, CST_WATER);
                 MP_INFO(x, y).flags |= navigable;
                 MP_INFO(x, y).flags |= FLAG_HAS_UNDERGROUND_WATER;
-            } else if (MP_TYPE(x, y) != CST_DESERT) {
-                MP_INFO(x, y).flags |= FLAG_HAS_UNDERGROUND_WATER;
             }
-            /* TODO Store square of distance to river for each tile */
-            /* MP_DIST2RIVER(x,y) = d2w_min; */
+            /* set undergroung water according to first random land setup */
+            if (MP_TYPE(x, y) == CST_DESERT) {
+                MP_INFO(x, y).flags &= (0xffffffff - FLAG_HAS_UNDERGROUND_WATER);
+            }
         }
     }
     connect_rivers();
 }
 
+void do_rand_ecology(int x, int y)
+{
+    int r = ground[x][y].ecotable;
+    if ( (MP_INFO(x, y).flags | FLAG_HAS_UNDERGROUND_WATER) == 0 ) {
+        /*desert*/
+        return;
+    }
+
+    if (r >= 300) {
+        /* very dry land */
+        int r2 = rand() % 10;
+        if (r2 <= 6)
+            set_mappoint(x, y, CST_DESERT);
+        else if (r2 <= 8)
+            set_mappoint(x, y, CST_GREEN);
+        else
+            set_mappoint(x, y, CST_TREE);
+    } else if (r >= 160) {
+        int r2 = rand() % 10;
+        if (r2 <= 2)
+            set_mappoint(x, y, CST_DESERT);
+        else if (r2 <= 6)
+            set_mappoint(x, y, CST_GREEN);
+        else
+            set_mappoint(x, y, CST_TREE);
+    } else if (r >= 80) {
+        int r2 = rand() % 10;
+        if (r2 <= 1)
+            set_mappoint(x, y, CST_DESERT);
+        else if (r2 <= 4)
+            set_mappoint(x, y, CST_GREEN);
+        else if (r2 <= 6)
+            set_mappoint(x, y, CST_TREE);
+        else
+            set_mappoint(x, y, CST_TREE2);
+    } else if (r >= 40) {
+        int r2 = rand() % 40;
+        if (r2 == 0)
+            set_mappoint(x, y, CST_DESERT);
+        else if (r2 <= 12)
+            set_mappoint(x, y, CST_GREEN);
+        else if (r2 <= 24)
+            set_mappoint(x, y, CST_TREE);
+        else if (r2 <= 36)
+            set_mappoint(x, y, CST_TREE2);
+        else
+            set_mappoint(x, y, CST_TREE3);
+    } else if (r >= 0) {
+        /* normal land */
+        int r2 = rand() % 40;
+        if (r2 <= 10)
+            set_mappoint(x, y, CST_GREEN);
+        else if (r2 <= 20)
+            set_mappoint(x, y, CST_TREE);
+        else if (r2 <= 30)
+            set_mappoint(x, y, CST_TREE2);
+        else
+            set_mappoint(x, y, CST_TREE3);
+    } else if (r >= -40) {
+        /* forest */
+        int r2 = rand() % 40;
+        if (r2 <= 5)
+            set_mappoint(x, y, CST_GREEN);
+        else if (r2 <= 10)
+            set_mappoint(x, y, CST_TREE);
+        else if (r2 <= 25)
+            set_mappoint(x, y, CST_TREE2);
+        else
+            set_mappoint(x, y, CST_TREE3);
+    } else if (r >= -80) {
+        int r2 = rand() % 40;
+        if (r2 <= 0)
+            MP_TYPE(x, y) = CST_WATER;
+        else if (r2 <= 6)
+            set_mappoint(x, y, CST_GREEN);
+        else if (r2 <= 15)
+            set_mappoint(x, y, CST_TREE);
+        else if (r2 <= 28)
+            set_mappoint(x, y, CST_TREE2);
+        else
+            set_mappoint(x, y, CST_TREE3);
+    } else if (r >= -120) {
+        int r2 = rand() % 40;
+        if (r2 <= 1)
+            MP_TYPE(x, y) = CST_WATER;
+        else if (r2 <= 6)
+            set_mappoint(x, y, CST_GREEN);
+        else if (r2 <= 16)
+            set_mappoint(x, y, CST_TREE);
+        else if (r2 <= 30)
+            set_mappoint(x, y, CST_TREE2);
+        else
+            set_mappoint(x, y, CST_TREE3);
+    } else {
+        /* wetland */
+        int r2 = rand() % 40;
+        if (r2 <= 3)
+            MP_TYPE(x, y) = CST_WATER;
+        else if (r2 <= 8)
+            set_mappoint(x, y, CST_GREEN);
+        else if (r2 <= 20)
+            set_mappoint(x, y, CST_TREE);
+        else if (r2 <= 35)
+            set_mappoint(x, y, CST_TREE2);
+        else
+            set_mappoint(x, y, CST_TREE3);
+    }
+
+}
+
 static void nullify_mappoint(int x, int y)
 {
     MP_TYPE(x, y) = CST_GREEN;
@@ -857,29 +906,7 @@
 static void random_start(int *originx, int *originy)
 {
     int x, y, xx, yy, flag, watchdog;
-    /* fill the corrects fields: ground[x][y).stuff, global_aridity, global_mountainity */
-    /* currently only dummy things in order to compile */
-    global_aridity = 0;
-    global_mountainity=0;
-    
-    for (x = 0; x < WORLD_SIDE_LEN; x++) {
-        for (y = 0; y < WORLD_SIDE_LEN; y++) {
-            ground[x][y].altitude=0;
-            ground[x][y].ecotable=0;
-            ground[x][y].wastes=0;
-            ground[x][y].pollution=0;
-            ground[x][y].water_alt=0;
-            ground[x][y].water_pol=0;
-            ground[x][y].water_wast=0;
-            ground[x][y].water_next=0;
-            ground[x][y].int1=0;
-            ground[x][y].int2=0;
-            ground[x][y].int3=0;
-            ground[x][y].int4=0;
-        }
-    }
 
-
     /* first find a place that has some water. */
     watchdog = 90;              /* if too many tries, random placement. */
     do {

Modified: trunk/src/lincity/simulate.h
===================================================================
--- trunk/src/lincity/simulate.h	2007-12-02 17:27:33 UTC (rev 1306)
+++ trunk/src/lincity/simulate.h	2007-12-02 20:51:59 UTC (rev 1307)
@@ -14,5 +14,6 @@
 void init_mappoint_array(void);
 void set_mappoint(int x, int y, short selected_type);
 void upgrade_to_v2(void);
+void do_rand_ecology(int x, int y);
 
 #endif /* __simulate_h__ */



From alainb at mail.berlios.de  Mon Dec  3 22:32:05 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Mon, 3 Dec 2007 22:32:05 +0100
Subject: [Lincity-ng-commit] r1308 - in trunk: . src/lincity src/lincity-ng
Message-ID: <200712032132.lB3LW52T004497@sheep.berlios.de>

Author: alainb
Date: 2007-12-03 22:32:04 +0100 (Mon, 03 Dec 2007)
New Revision: 1308

Modified:
   trunk/README-WaterWell
   trunk/TODO
   trunk/src/lincity-ng/Dialog.cpp
   trunk/src/lincity-ng/GameView.cpp
   trunk/src/lincity-ng/ScreenInterface.cpp
   trunk/src/lincity/lclib.cpp
   trunk/src/lincity/ldsvguts.cpp
Log:
warning fix, and tiny fix of range around cursor for waterwell

Modified: trunk/README-WaterWell
===================================================================
--- trunk/README-WaterWell	2007-12-02 20:51:59 UTC (rev 1307)
+++ trunk/README-WaterWell	2007-12-03 21:32:04 UTC (rev 1308)
@@ -25,19 +25,19 @@
  -basic ecology: change desert with UGW (= bulldozed tile) to green after some monthes.
    (needed for showing UGW for placing farms communes and parks)
  -Tuning of aridity parameter and others (communes, farms, parks) seems rather correct.
+
  -additional data structure and load/save.
+ -automagic upgrade of old games
 
 AIM:
 ----
 * simple ecology = periodic event :
-   - probably need additional property (global aridity, tile_aridity_table_pointer)
    - neighbours  => % decrease/increase from desert to tree3. (tree3 need 4 neighbouring trees)
    - pollution ++%decrease
    - water ++%increase
    = just look nicer (change nothing in the game) but could show impact of human activities on forests :)
 
 * Water quality (from drinkable to mortal).
-  - tile property ++ UG_water, UG_pollution, UG_waste , UG_altitude.
   - altitude to know the local slope and the drainage basin.
         unit 1cm        +1/tile is enough slope for calm river, large river => +0/tile,
                         coast line +100, land + rand() % mountainity per tile.

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2007-12-02 20:51:59 UTC (rev 1307)
+++ trunk/TODO	2007-12-03 21:32:04 UTC (rev 1308)
@@ -35,6 +35,7 @@
      English help is more or less ok, other languages not: 
        -added data/help/en/waterwell.xml
        -modified residential.xml, farms.xml, parks.xml, communes.xml, index.xml, button-index.xml.
+          starvation.xml 
 
  [H] all data/locale/xy.po and data/locale/gui/xy.po files have been update (rev 1290). 
      Translators should check them with poedit for the rare new messages to translate.
@@ -72,12 +73,6 @@
      won't change to anything else. At least the caption is not shown.
 
 --Game--
- [H] Find a way to "upgrade" old games 
-        - add random underground water , trees, desert
-        - blocking message (and pause game) that waterwelll must be added or global starvation will occur
-
- [H] Upgrade scenarios good/bad time
-
  [H] Check that info obtained with query tool exists/are correct for
         waterwell, residences, farms, communes, parks
 

Modified: trunk/src/lincity/lclib.cpp
===================================================================
--- trunk/src/lincity/lclib.cpp	2007-12-02 20:51:59 UTC (rev 1307)
+++ trunk/src/lincity/lclib.cpp	2007-12-03 21:32:04 UTC (rev 1308)
@@ -229,7 +229,8 @@
     void *tmp;
     tmp = malloc(size);
     if (tmp == NULL) {
-        printf("couldn't malloc %d bytes!  Dying.\n", size);
+        /* prevent gcc warning on amd64: argument 2 has type 'long unsigned int' !!! */
+        printf("couldn't malloc %d bytes!  Dying.\n", (int) size);
         exit(-1);
     }
 

Modified: trunk/src/lincity/ldsvguts.cpp
===================================================================
--- trunk/src/lincity/ldsvguts.cpp	2007-12-02 20:51:59 UTC (rev 1307)
+++ trunk/src/lincity/ldsvguts.cpp	2007-12-03 21:32:04 UTC (rev 1308)
@@ -814,7 +814,8 @@
                 eswap32((int *)&(MP_INFO(x, y).coal_reserve));
                 eswap32((int *)&(MP_INFO(x, y).ore_reserve));
             } else {
-                printf("Strange size (%d) for short, please mail me.\n", sizeof(short));
+                /* prevent gcc warning on amd64: argument 2 has type 'long unsigned int' !!! */
+                printf("Strange size (%d) for short, please mail me.\n", (int) sizeof(short));
             }
             eswap32(&(MP_INFO(x, y).int_1));
             eswap32(&(MP_INFO(x, y).int_2));

Modified: trunk/src/lincity-ng/Dialog.cpp
===================================================================
--- trunk/src/lincity-ng/Dialog.cpp	2007-12-02 20:51:59 UTC (rev 1307)
+++ trunk/src/lincity-ng/Dialog.cpp	2007-12-03 21:32:04 UTC (rev 1308)
@@ -191,6 +191,7 @@
     std::string filename = "gui/";
     filename += message;
     unsigned int pos = filename.rfind( ".mes" );
+#warning "on amd64 gcc says warning: comparison is always true due to limited range of data type";
     if( pos != std::string::npos ){
         filename.replace( pos, 4 ,".xml");
     }

Modified: trunk/src/lincity-ng/GameView.cpp
===================================================================
--- trunk/src/lincity-ng/GameView.cpp	2007-12-02 20:51:59 UTC (rev 1307)
+++ trunk/src/lincity-ng/GameView.cpp	2007-12-03 21:32:04 UTC (rev 1308)
@@ -1449,7 +1449,7 @@
             //case CST_MONUMENT_0: break;
             //case CST_PARKLAND_PLANE: break;
             //case CST_WATER: break;
-            case CST_WATERWELL: range = MARKET_RANGE; break;
+            case CST_WATERWELL: range = WATERWELL_RANGE; break;
         }
        	
         if (range > 0 )

Modified: trunk/src/lincity-ng/ScreenInterface.cpp
===================================================================
--- trunk/src/lincity-ng/ScreenInterface.cpp	2007-12-02 20:51:59 UTC (rev 1307)
+++ trunk/src/lincity-ng/ScreenInterface.cpp	2007-12-03 21:32:04 UTC (rev 1308)
@@ -301,7 +301,7 @@
 {
     (void) title;
     (void) percent;
-#if 0
+#ifdef DEBUG
     std::ostringstream text;
     text << "prog_box:'" << title << "' " << percent << "%\n";
     std::cout << text.str();



From alainb at mail.berlios.de  Fri Dec  7 23:59:02 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Fri, 7 Dec 2007 23:59:02 +0100
Subject: [Lincity-ng-commit] r1310 - in trunk: . data/gui src/lincity/modules
Message-ID: <200712072259.lB7Mx2Eb010238@sheep.berlios.de>

Author: alainb
Date: 2007-12-07 23:59:01 +0100 (Fri, 07 Dec 2007)
New Revision: 1310

Modified:
   trunk/Jamfile
   trunk/configure.ac
   trunk/data/gui/creditslist.xml
   trunk/makerelease.sh
   trunk/src/lincity/modules/waterwell.cpp
Log:
update personnal email and (c), add automatic generated CREDITS file
 Proposes 1.91.beta as number for next release (file format change needs to be 2.0)

Modified: trunk/Jamfile
===================================================================
--- trunk/Jamfile	2007-12-04 00:32:10 UTC (rev 1309)
+++ trunk/Jamfile	2007-12-07 22:59:01 UTC (rev 1310)
@@ -16,8 +16,8 @@
 }
 
 # add some additional files to package
-Package README RELNOTES TODO COPYING COPYING-fonts.txt COPYING-data.txt ;
-InstallDoc README RELNOTES TODO COPYING COPYING-fonts.txt COPYING-data.txt ;
+Package README RELNOTES TODO COPYING COPYING-fonts.txt COPYING-data.txt CREDITS ;
+InstallDoc README RELNOTES TODO COPYING COPYING-fonts.txt COPYING-data.txt CREDITS ;
 
 InstallDesktop lincity-ng.desktop ;
 InstallPixmap data/lincity-ng.png ;

Modified: trunk/configure.ac
===================================================================
--- trunk/configure.ac	2007-12-04 00:32:10 UTC (rev 1309)
+++ trunk/configure.ac	2007-12-07 22:59:01 UTC (rev 1310)
@@ -4,7 +4,7 @@
 #----------------------------------------------------------------------------
 AC_PREREQ([2.54])
 
-AC_INIT([lincity-ng], [1.1.3pre], [matze at braunis.de])
+AC_INIT([lincity-ng], [1.91.beta], [matze at braunis.de])
 AC_CONFIG_SRCDIR([mk/jam/build.jam])
 AC_CONFIG_AUX_DIR([mk/autoconf])
 

Modified: trunk/data/gui/creditslist.xml
===================================================================
--- trunk/data/gui/creditslist.xml	2007-12-04 00:32:10 UTC (rev 1309)
+++ trunk/data/gui/creditslist.xml	2007-12-07 22:59:01 UTC (rev 1310)
@@ -16,6 +16,8 @@
     <span style="email">&lt;matze at braunis.de&gt;</span></p>    
     <p style="person">David Kamphausen
     <span style="email">&lt;david.kamphausen at web.de&gt;</span></p>
+    <p style="person">Alain Baeckeroot
+    <span style="email">&lt;alain.baeckeroot at laposte.net&gt;</span></p>    
 
     <p style="section" translatable="yes">Graphics</p>
     <p style="person">Ingo Ruhnke
@@ -41,7 +43,7 @@
     <p style="person">fr - Arnaud Quette</p>
     <p style="person">fr - Laurent Rocher</p>
     <p style="person">fr - Alain Baeckeroot
-    <span style="email">&lt;alain.baeckeroot at cegetel.net&gt;</span></p>    
+    <span style="email">&lt;alain.baeckeroot at laposte.net&gt;</span></p>    
     <p style="person">nl - Nathan Samson</p>
     <p style="person">nl - Ronald Stroethoff</p>
     <p style="person">pl - Micha? Drza?</p>

Modified: trunk/makerelease.sh
===================================================================
--- trunk/makerelease.sh	2007-12-04 00:32:10 UTC (rev 1309)
+++ trunk/makerelease.sh	2007-12-07 22:59:01 UTC (rev 1310)
@@ -1,4 +1,6 @@
 #!/bin/sh
+cat data/gui/creditslist.xml |grep -v "@"|cut -d\> -f2|cut -d\< -f1 >CREDITS
+echo "# automatically generated from data/gui/creditslist.xml. Do not edit. #">>CREDITS
 
 jam maintainer-clean
 rm -rf build

Modified: trunk/src/lincity/modules/waterwell.cpp
===================================================================
--- trunk/src/lincity/modules/waterwell.cpp	2007-12-04 00:32:10 UTC (rev 1309)
+++ trunk/src/lincity/modules/waterwell.cpp	2007-12-07 22:59:01 UTC (rev 1310)
@@ -1,9 +1,21 @@
 /* ---------------------------------------------------------------------- *
  * waterwell.c
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+ * Copyright (C) 2007 Alain Baeckeroot (alain.baeckeroot at laposte.net)
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ * 
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ * 
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ */
 
 #include "modules.h"
 #include "waterwell.h"



From alainb at mail.berlios.de  Sat Dec  8 17:47:14 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sat, 8 Dec 2007 17:47:14 +0100
Subject: [Lincity-ng-commit] r1311 - in trunk: data/opening src/lincity
	src/lincity-ng
Message-ID: <200712081647.lB8GlEMB003130@sheep.berlios.de>

Author: alainb
Date: 2007-12-08 17:47:10 +0100 (Sat, 08 Dec 2007)
New Revision: 1311

Modified:
   trunk/data/opening/bad_times.scn
   trunk/data/opening/extreme_arid.scn
   trunk/data/opening/extreme_wetland.scn
   trunk/data/opening/good_times.scn
   trunk/src/lincity-ng/GameView.cpp
   trunk/src/lincity/engine.cpp
   trunk/src/lincity/engine.h
Log:
upgraded scenarios, and small move of code to engine.cpp

Modified: trunk/data/opening/bad_times.scn
===================================================================
(Binary files differ)

Modified: trunk/data/opening/extreme_arid.scn
===================================================================
(Binary files differ)

Modified: trunk/data/opening/extreme_wetland.scn
===================================================================
(Binary files differ)

Modified: trunk/data/opening/good_times.scn
===================================================================
(Binary files differ)

Modified: trunk/src/lincity/engine.cpp
===================================================================
--- trunk/src/lincity/engine.cpp	2007-12-07 22:59:01 UTC (rev 1310)
+++ trunk/src/lincity/engine.cpp	2007-12-08 16:47:10 UTC (rev 1311)
@@ -103,6 +103,31 @@
     return total_money;
 }
 
+int is_allowed_here(int x, int y, short selected_module_type)
+{
+    int group = get_group_of_type( selected_module_type );
+    int cursorSize = main_groups[group].size; 
+
+    //The Harbour needs a River on the East side.
+    if( selected_module_type == CST_EX_PORT ){
+        for( int j = 0; j < cursorSize; j++ )
+            if (!( MP_INFO(x + cursorSize, y + j).flags & FLAG_IS_RIVER ) ) {
+                fprintf(stderr," x=%d, y=%d, j=%d, cursorSize=%d\n", x, y, j, cursorSize);
+                return false;
+            }
+    }
+    //Waterwell needs ... water :-)
+    if (selected_module_type == CST_WATERWELL) {
+        int has_ugw = 0;
+        for (int i = 0; i < cursorSize; i++)
+            for (int j = 0; j < cursorSize; j++)
+                has_ugw = has_ugw | HAS_UGWATER(x + i, y + j);
+        if (!has_ugw)
+            return false;
+    }
+    return true;
+}
+
 int place_item(int x, int y, short type)
 {
     int i, j;

Modified: trunk/src/lincity/engine.h
===================================================================
--- trunk/src/lincity/engine.h	2007-12-07 22:59:01 UTC (rev 1310)
+++ trunk/src/lincity/engine.h	2007-12-08 16:47:10 UTC (rev 1311)
@@ -8,6 +8,7 @@
 
 int adjust_money(int value);
 int place_item(int x, int y, short type);
+int is_allowed_here(int x, int y, short type);
 int bulldoze_item(int x, int y);
 void do_bulldoze_area(short fill, int xx, int yy);
 void do_coal_survey(void);

Modified: trunk/src/lincity-ng/GameView.cpp
===================================================================
--- trunk/src/lincity-ng/GameView.cpp	2007-12-07 22:59:01 UTC (rev 1310)
+++ trunk/src/lincity-ng/GameView.cpp	2007-12-08 16:47:10 UTC (rev 1311)
@@ -53,6 +53,8 @@
 #include "gui/Button.hpp"
 #include "CheckButton.hpp"
 
+extern int is_allowed_here(int x, int y, short cst_type);
+
 const float GameView::defaultTileWidth = 128;
 const float GameView::defaultTileHeight = 64;
 const float GameView::defaultZoom = 0.5;
@@ -1364,44 +1366,25 @@
         Color alphablue( 0, 0, 255, 128 );
         Color alphared( 255, 0, 0, 128 );
         painter.setFillColor( alphablue );
-        //check if building is allowed here, if not use Red Cursor
-        // FIXME: AL1. These tests should go in engine.cpp with place_item, where they are done again.
+        //check if building is inside the map, if not use Red Cursor
         int x = (int) tile.x;
         int y = (int) tile.y;
         MapPoint seCorner( x + cursorSize -1, y + cursorSize -1 );
         if( !inCity( seCorner ) || !inCity( tile ) ) {
             painter.setFillColor( alphared );
         } else {
-            for( y = (int) tile.y; y < tile.y + cursorSize; y++ ) {
-                for( x = (int) tile.x; x < tile.x + cursorSize; x++ ) {
+            for( y = (int) tile.y; y < tile.y + cursorSize; y++ )
+                for( x = (int) tile.x; x < tile.x + cursorSize; x++ )
                     if( !GROUP_IS_BARE(MP_GROUP( x, y ))) {
                         painter.setFillColor( alphared );
                         y += cursorSize;
                         break;
                     }
-                }
-            }
         }
-        //special conditions for some buildings
-        //The Harbour needs a River on the East side.
-        if( selected_module_type == CST_EX_PORT ){
-            x = (int) tile.x + cursorSize;
-            y = (int) tile.y;
-            for( y = (int) tile.y; y < tile.y + cursorSize; y++ ) {
-                if (!( ( MP_GROUP( x, y ) == GROUP_WATER ) && ( MP_INFO(x,y).flags & FLAG_IS_RIVER ) ) ){
-                    painter.setFillColor( alphared );
-                }
-            }
-        }
-        //Waterwell needs ... water :-)
-        if (selected_module_type == CST_WATERWELL) {
-            int has_ugw = 0;
-            for (int i = 0; i < cursorSize; i++)
-                for (int j = 0; j < cursorSize; j++)
-                    has_ugw = has_ugw | HAS_UGWATER(tile.x + i, tile.y + j);
-            if (!has_ugw)
-                painter.setFillColor( alphared );
-        }
+        //check if building is allowed here, if not use Red Cursor
+        // These tests are in engine.cpp with place_item.
+        if ( !is_allowed_here(tile.x, tile.y, selected_module_type) )
+            painter.setFillColor( alphared );
 
         Rect2D tilerect( 0, 0, tileWidth * cursorSize, tileHeight * cursorSize );
         tileOnScreenPoint.x = tileOnScreenPoint.x - (tileWidth * cursorSize / 2);



From alainb at mail.berlios.de  Sat Dec  8 21:12:47 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sat, 8 Dec 2007 21:12:47 +0100
Subject: [Lincity-ng-commit] r1312 - in trunk/src: lincity lincity/modules
	lincity-ng
Message-ID: <200712082012.lB8KClAn002781@sheep.berlios.de>

Author: alainb
Date: 2007-12-08 21:12:46 +0100 (Sat, 08 Dec 2007)
New Revision: 1312

Modified:
   trunk/src/lincity-ng/GameView.cpp
   trunk/src/lincity/engglobs.cpp
   trunk/src/lincity/engglobs.h
   trunk/src/lincity/engine.cpp
   trunk/src/lincity/modules/rocket_pad.cpp
Log:
engine.cpp cleanup

Modified: trunk/src/lincity/engglobs.cpp
===================================================================
--- trunk/src/lincity/engglobs.cpp	2007-12-08 16:47:10 UTC (rev 1311)
+++ trunk/src/lincity/engglobs.cpp	2007-12-08 20:12:46 UTC (rev 1312)
@@ -17,7 +17,6 @@
 int mappoint_array_y[WORLD_SIDE_LEN];
 int numof_shanties;
 int numof_communes;
-int last_built_x, last_built_y;
 int main_screen_originx, main_screen_originy;
 
 int pix_double = 0;

Modified: trunk/src/lincity/engglobs.h
===================================================================
--- trunk/src/lincity/engglobs.h	2007-12-08 16:47:10 UTC (rev 1311)
+++ trunk/src/lincity/engglobs.h	2007-12-08 20:12:46 UTC (rev 1312)
@@ -31,7 +31,6 @@
 extern int global_aridity, global_mountainity;
 
 extern int numof_shanties, numof_communes;
-extern int last_built_x, last_built_y;
 
 extern int sust_dig_ore_coal_tip_flag, sust_port_flag, sustain_flag;
 extern int sust_dig_ore_coal_count, sust_port_count, sust_old_money;

Modified: trunk/src/lincity/engine.cpp
===================================================================
--- trunk/src/lincity/engine.cpp	2007-12-08 16:47:10 UTC (rev 1311)
+++ trunk/src/lincity/engine.cpp	2007-12-08 20:12:46 UTC (rev 1312)
@@ -103,37 +103,107 @@
     return total_money;
 }
 
-int is_allowed_here(int x, int y, short selected_module_type)
+int is_allowed_here(int x, int y, short type, short msg)
 {
-    int group = get_group_of_type( selected_module_type );
-    int cursorSize = main_groups[group].size; 
+    int group = get_group_of_type( type );
+    int size = main_groups[group].size; 
+    int i,j;
 
     //The Harbour needs a River on the East side.
-    if( selected_module_type == CST_EX_PORT ){
-        for( int j = 0; j < cursorSize; j++ )
-            if (!( MP_INFO(x + cursorSize, y + j).flags & FLAG_IS_RIVER ) ) {
-                fprintf(stderr," x=%d, y=%d, j=%d, cursorSize=%d\n", x, y, j, cursorSize);
+    if( type == CST_EX_PORT ){
+        for( j = 0; j < size; j++ )
+            if (!( MP_INFO(x + size, y + j).flags & FLAG_IS_RIVER ) ) {
+                if (msg)
+                    ok_dial_box("warning.mes", BAD, _("Port must be connected to river all along right side."));
                 return false;
             }
     }
+
     //Waterwell needs ... water :-)
-    if (selected_module_type == CST_WATERWELL) {
+    if (type == CST_WATERWELL) {
         int has_ugw = 0;
-        for (int i = 0; i < cursorSize; i++)
-            for (int j = 0; j < cursorSize; j++)
+        for ( i = 0; i < size; i++)
+            for ( j = 0; j < size; j++)
                 has_ugw = has_ugw | HAS_UGWATER(x + i, y + j);
-        if (!has_ugw)
+        if (!has_ugw) {
+            if (msg)
+                ok_dial_box("warning.mes", BAD, _("You can't build a water well here: it is all desert."));
             return false;
+        }
     }
+
+    //Tip
+    /* Don't build a tip if there has already been one.
+     * This is marked permanently by setting the ore reserve to double of (max) ORE_RESERVE at tip build time
+     */
+    if (type == CST_TIP_0)
+        for (i = 0; i < size; i++)
+            for (j = 0; j < size; j++)
+                if (MP_INFO(x + i, y + j).ore_reserve > ORE_RESERVE) {
+                    if (msg)
+                        ok_dial_box("warning.mes", BAD, _("You can't build a tip here: this area was once a landfill"));
+                    return false;
+                }
+    
+    //Oremine
+    /* Don't allow new mines on old mines or old tips */
+    /* GCS: mines over old mines is OK if there is enough remaining 
+       ore, as is the case when there is partial overlap. */
+    if (type == CST_OREMINE_1) {
+        for (i = 0; i < size; i++) 
+            for (j = 0; j < size; j++)
+                if (MP_INFO(x + i, y + j).ore_reserve > ORE_RESERVE) {
+                    if (msg)
+                        ok_dial_box("warning.mes", BAD, _("You can't build a mine here: This area was once a landfill"));
+                    return false; //previous tip
+                }
+
+        int total_ore = 0;
+        for (i = 0; i < size; i++) 
+            for (j = 0; j < size; j++)
+                total_ore += MP_INFO(x + i, y + j).ore_reserve;
+
+        if (total_ore < MIN_ORE_RESERVE_FOR_MINE) {
+            if (msg)
+                ok_dial_box("warning.mes", BAD, _("You can't build a mine here: there is no ore left at this site"));
+            return false; // not enought ore
+        }
+    }
+
+    //Parkland
+    if (type == CST_PARKLAND_PLANE)
+            if (!HAS_UGWATER(x, y)) {
+                if (msg)
+                    ok_dial_box("warning.mes", BAD, _("You can't build a park here: it is a desert, parks need water"));
+                return false;
+            }
+
+    //Substations and Windmills
+    if ( (type == CST_SUBSTATION_R) || (type == CST_WINDMILL_1_R) )
+        if (numof_substations >= MAX_NUMOF_SUBSTATIONS) {
+            if (msg)
+                ok_dial_box("warning.mes", BAD, _("Too many substations + windmills. You cannot build one more"));
+            return false;
+        }
+
+    //Market
+    if ( type == CST_MARKET_EMPTY )
+         if (numof_markets >= MAX_NUMOF_MARKETS) {
+            if (msg)
+                ok_dial_box("warning.mes", BAD, _("Too many markets. You cannot build one more"));
+            return false;
+        }
+
+    //Other cases
     return true;
 }
 
 int place_item(int x, int y, short type)
 {
     int i, j;
-    int prev_tip = 0;
     int group;
     int size;
+    int msg;
 
     group = get_group_of_type(type);
     if (group < 0) {
@@ -141,61 +211,59 @@
         fprintf(stderr, "Error: group does not exist %i\n", group);
 #endif
         ok_dial_box("warning.mes", BAD,
-                    _
-                    ("ERROR: group does not exist. This should not happen! Please consider filling a bug report to lincity-ng team, with the saved game and what you did :-) "));
+                _
+                ("ERROR: group does not exist. This should not happen! Please consider filling a bug report to lincity-ng team, with the saved game and what you did :-) "));
         return -1000;
     }
+
+    size = main_groups[group].size;
+    if (last_warning_message_group != group)
+        msg = true;
+    else
+        msg =false;
+  
     if (GROUP_IS_RESIDENCE(group))
         group=GROUP_RESIDENCE_LL;
 
-    size = main_groups[group].size;
-
     /* You can't build because credit not available. */
     if (no_credit_build(group) != 0) {
         no_credit_build_msg_ng(group);
         return -1;
     }
 
+    /* You can't build here because it's forbidden or impossible */
+    if (!is_allowed_here(x,y,type,msg)) {
+            last_warning_message_group = group;
+            return -2;
+    } else
+        last_warning_message_group = 0;
+
     switch (group) {
     case GROUP_RESIDENCE_LL:
         /* all residences are treated. local variable 'group' is redefined to do so.*/
         /* int_2 is date of last starvation. Needed for correct display */
         MP_INFO(x, y).int_2 = total_time;
-        break;   case GROUP_ORGANIC_FARM:
+        break;
+
+    case GROUP_ORGANIC_FARM:
         MP_INFO(x, y).int_1 = tech_level;
         break;
+
     case GROUP_TRACK:
     case GROUP_ROAD:
     case GROUP_RAIL:
         MP_INFO(x, y).flags |= FLAG_IS_TRANSPORT;
         break;
+
     case GROUP_PORT:
-        if (is_real_river(x + 4, y) != 1
-            || is_real_river(x + 4, y + 1) != 1
-            || is_real_river(x + 4, y + 2) != 1 || is_real_river(x + 4, y + 3) != 1) {
-            if (last_warning_message_group != group)
-                ok_dial_box("warning.mes", BAD, _("Port must be connected to river all along right side."));
-            last_warning_message_group = group;
-            return -2;
-        }
         break;
+
     case GROUP_SUBSTATION:
-        if (add_a_substation(x, y) == 0) {
-            /* Not enough slots in the substation array */
-            if (last_warning_message_group != group)
-                ok_dial_box("warning.mes", BAD, _("Too many substations + windmills. You cannot build one more"));
-            last_warning_message_group = group;
-            return -3;
-        }
+        add_a_substation (x, y);
         break;
+
     case GROUP_WINDMILL:
-        if (add_a_substation(x, y) == 0) {
-            /* Not enough slots in the substation array */
-            if (last_warning_message_group != group)
-                ok_dial_box("warning.mes", BAD, _("Too many substations + windmills. You cannot build one more"));
-            last_warning_message_group = group;
-            return -3;
-        }
+        add_a_substation (x, y);
         MP_INFO(x, y).int_2 = tech_level;
         MP_INFO(x, y).int_1 = (int)(WINDMILL_POWER + (((double)MP_INFO(x, y).int_2 * WINDMILL_POWER) / MAX_TECH_LEVEL));
         /* Make sure that the correct windmill graphic shows up */
@@ -204,110 +272,57 @@
         else
             type = CST_WINDMILL_1_W;
         break;
+
     case (GROUP_COAL_POWER):
         MP_INFO(x, y).int_4 = tech_level;
         MP_INFO(x, y).int_1 = (int)(POWERS_COAL_OUTPUT + (((double)MP_INFO(x, y).int_4 * POWERS_COAL_OUTPUT)
                                                           / MAX_TECH_LEVEL));
         break;
+
     case (GROUP_SOLAR_POWER):
         MP_INFO(x, y).int_2 = tech_level;
         MP_INFO(x, y).int_1 = (int)(POWERS_SOLAR_OUTPUT + (((double)MP_INFO(x, y).int_2 * POWERS_SOLAR_OUTPUT)
                                                            / MAX_TECH_LEVEL));  /* like other power sources */
         MP_INFO(x, y).int_3 = MP_INFO(x, y).int_1;      /* Int_3 is kept for compatibility */
         break;
+
     case GROUP_COMMUNE:
         numof_communes++;
         break;
+
     case GROUP_MARKET:
-        /* Test for enough slots in the market array */
-        if (add_a_market(x, y) == 0) {
-            if (last_warning_message_group != group)
-                ok_dial_box("warning.mes", BAD, _("Too many markets. You cannot build one more"));
-            last_warning_message_group = group;
-            return -4;
-        }
+        add_a_market(x,y);
         MP_INFO(x, y).flags += (FLAG_MB_FOOD | FLAG_MB_JOBS
                                 | FLAG_MB_COAL | FLAG_MB_ORE | FLAG_MB_STEEL
                                 | FLAG_MB_GOODS | FLAG_MS_FOOD | FLAG_MS_JOBS
                                 | FLAG_MS_COAL | FLAG_MS_GOODS | FLAG_MS_ORE | FLAG_MS_STEEL);
         break;
+
     case GROUP_RECYCLE:
         MP_INFO(x, y).int_4 = tech_level;
         break;
+
     case GROUP_TIP:
-        /* Don't build a tip if there has already been one.  If we succeed,
-           mark the spot permanently by "doubling" the ore reserve */
-        prev_tip = 0;
+        /* To prevent building a tip if there has already been one we
+         * mark the spot permanently by "doubling" the ore reserve */
         for (i = 0; i < size; i++)
             for (j = 0; j < size; j++)
-                if (MP_INFO(x + i, y + j).ore_reserve > ORE_RESERVE) {
-                    prev_tip = 1;
-                    break;
-                }
-        if (prev_tip) {
-            ok_dial_box("warning.mes", BAD, _("You can't build a tip here: this area was once a landfill"));
-            return -5;
-        } else {
-            for (i = 0; i < size; i++)
-                for (j = 0; j < size; j++)
-                    MP_INFO(x + i, y + j).ore_reserve = ORE_RESERVE * 2;
-        }
+                MP_INFO(x + i, y + j).ore_reserve = ORE_RESERVE * 2;
         break;
+
     case GROUP_OREMINE:
-        {
-            /* Don't allow new mines on old mines or old tips */
-            /* GCS: mines over old mines is OK if there is enough remaining 
-               ore, as is the case when there is partial overlap. */
-            int total_ore = 0;
-            prev_tip = 0;
-            for (i = 0; i < size; i++) {
-                for (j = 0; j < size; j++) {
-                    total_ore += MP_INFO(x + i, y + j).ore_reserve;
-                    if (MP_INFO(x + i, y + j).ore_reserve > ORE_RESERVE) {
-                        prev_tip = 1;
-                        break;
-                    }
-                }
-            }
-            if (prev_tip) {
-                ok_dial_box("warning.mes", BAD, _("You can't build a mine here: This area was once a landfill"));
-                return -6;
-            }
-            if (total_ore < MIN_ORE_RESERVE_FOR_MINE) {
-                ok_dial_box("warning.mes", BAD, _("You can't build a mine here: there is no ore left at this site"));
-                return -7;
-            }
-            break;
-        }
+        /* New mines are not allowed on old mines or old tips */
+        break;
+
     case GROUP_WATERWELL:
-        if (use_waterwell) {
-            int has_ugw = 0;
-            for (i = 0; i < size; i++)
-                for (j = 0; j < size; j++)
-                    has_ugw = has_ugw | HAS_UGWATER(x + i, y + j);
-            if (!has_ugw) {
-                ok_dial_box("warning.mes", BAD, _("You can't build a water well here: it is all desert."));
-                return -8;
-            } else {
-                numof_waterwell++;
-            }
-        }                       /* else ... is not possible */
+        numof_waterwell++; //AL1: unused so far.
         break;
+
     case GROUP_PARKLAND:
-        if (use_waterwell)
-            if (!HAS_UGWATER(x, y)) {
-                ok_dial_box("warning.mes", BAD, _("You can't build a park here: it is a desert, parks need water"));
-                return -8;
-            }
         break;
 
     }                           /* end case */
-    last_warning_message_group = 0;
 
-    /* Store last_built for refund on "mistakes" */
-    last_built_x = x;
-    last_built_y = y;
-
     set_mappoint(x, y, type);
 
     if (group == GROUP_RIVER)

Modified: trunk/src/lincity/modules/rocket_pad.cpp
===================================================================
--- trunk/src/lincity/modules/rocket_pad.cpp	2007-12-08 16:47:10 UTC (rev 1311)
+++ trunk/src/lincity/modules/rocket_pad.cpp	2007-12-08 20:12:46 UTC (rev 1312)
@@ -105,11 +105,6 @@
              */
             launch_rocket(x, y);
         }
-        /* so we don't get get our money back when we bulldoze. */
-        if (x == last_built_x && y == last_built_y) {
-            x = 0;
-            y = 0;
-        }
     }
 }
 

Modified: trunk/src/lincity-ng/GameView.cpp
===================================================================
--- trunk/src/lincity-ng/GameView.cpp	2007-12-08 16:47:10 UTC (rev 1311)
+++ trunk/src/lincity-ng/GameView.cpp	2007-12-08 20:12:46 UTC (rev 1312)
@@ -53,7 +53,7 @@
 #include "gui/Button.hpp"
 #include "CheckButton.hpp"
 
-extern int is_allowed_here(int x, int y, short cst_type);
+extern int is_allowed_here(int x, int y, short cst_type, short msg);
 
 const float GameView::defaultTileWidth = 128;
 const float GameView::defaultTileHeight = 64;
@@ -1383,7 +1383,7 @@
         }
         //check if building is allowed here, if not use Red Cursor
         // These tests are in engine.cpp with place_item.
-        if ( !is_allowed_here(tile.x, tile.y, selected_module_type) )
+        if ( !is_allowed_here(tile.x, tile.y, selected_module_type, 0) )
             painter.setFillColor( alphared );
 
         Rect2D tilerect( 0, 0, tileWidth * cursorSize, tileHeight * cursorSize );



From alainb at mail.berlios.de  Sat Dec  8 22:27:11 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sat, 8 Dec 2007 22:27:11 +0100
Subject: [Lincity-ng-commit] r1313 - trunk/src/lincity
Message-ID: <200712082127.lB8LRB4b006633@sheep.berlios.de>

Author: alainb
Date: 2007-12-08 22:27:11 +0100 (Sat, 08 Dec 2007)
New Revision: 1313

Modified:
   trunk/src/lincity/engine.cpp
   trunk/src/lincity/lin-city.h
Log:
engine.cpp cleanup, <=> cursor is red when not allowed to build

Modified: trunk/src/lincity/engine.cpp
===================================================================
--- trunk/src/lincity/engine.cpp	2007-12-08 20:12:46 UTC (rev 1312)
+++ trunk/src/lincity/engine.cpp	2007-12-08 21:27:11 UTC (rev 1313)
@@ -29,8 +29,6 @@
 
 /****** Private functions prototypes *****/
 static void bulldoze_mappoint(short fill, int x, int y);
-static int no_credit_build(int selected_group);
-static void no_credit_build_msg_ng(int selected_group);
 static int is_real_river(int x, int y);
 
 /*************** Global functions ********************/
@@ -108,20 +106,53 @@
     int group = get_group_of_type( type );
     int size = main_groups[group].size; 
     int i,j;
+    int has_ugw = 0;
 
-    //The Harbour needs a River on the East side.
-    if( type == CST_EX_PORT ){
+    switch (group) {
+    case GROUP_SOLAR_POWER:
+        if (total_money <= 0) {
+            if (msg)
+                ok_dial_box("no-credit-solar-power.mes", BAD, 0L);
+            return false;
+        }
+        break;
+
+    case GROUP_UNIVERSITY:
+        if (total_money <= 0) {
+            if (msg)
+                ok_dial_box("no-credit-university.mes", BAD, 0L);
+            return false;
+        }
+        break;
+
+    case GROUP_RECYCLE:
+        if (total_money <= 0) {
+            if (msg)
+                ok_dial_box("no-credit-recycle.mes", BAD, 0L);
+            return false;
+        }
+        break;
+
+    case GROUP_ROCKET:
+        if (total_money <= 0) {
+            if (msg)
+                ok_dial_box("no-credit-rocket.mes", BAD, 0L);
+            return false;
+        }
+        break;
+
+        //The Harbour needs a River on the East side.
+    case GROUP_PORT:
         for( j = 0; j < size; j++ )
             if (!( MP_INFO(x + size, y + j).flags & FLAG_IS_RIVER ) ) {
                 if (msg)
                     ok_dial_box("warning.mes", BAD, _("Port must be connected to river all along right side."));
                 return false;
             }
-    }
+        break;
 
     //Waterwell needs ... water :-)
-    if (type == CST_WATERWELL) {
-        int has_ugw = 0;
+    case GROUP_WATERWELL:
         for ( i = 0; i < size; i++)
             for ( j = 0; j < size; j++)
                 has_ugw = has_ugw | HAS_UGWATER(x + i, y + j);
@@ -130,13 +161,13 @@
                 ok_dial_box("warning.mes", BAD, _("You can't build a water well here: it is all desert."));
             return false;
         }
-    }
+        break;
 
     //Tip
     /* Don't build a tip if there has already been one.
      * This is marked permanently by setting the ore reserve to double of (max) ORE_RESERVE at tip build time
      */
-    if (type == CST_TIP_0)
+    case GROUP_TIP:
         for (i = 0; i < size; i++)
             for (j = 0; j < size; j++)
                 if (MP_INFO(x + i, y + j).ore_reserve > ORE_RESERVE) {
@@ -144,57 +175,69 @@
                         ok_dial_box("warning.mes", BAD, _("You can't build a tip here: this area was once a landfill"));
                     return false;
                 }
-    
+
     //Oremine
     /* Don't allow new mines on old mines or old tips */
     /* GCS: mines over old mines is OK if there is enough remaining 
-       ore, as is the case when there is partial overlap. */
-    if (type == CST_OREMINE_1) {
-        for (i = 0; i < size; i++) 
-            for (j = 0; j < size; j++)
-                if (MP_INFO(x + i, y + j).ore_reserve > ORE_RESERVE) {
-                    if (msg)
-                        ok_dial_box("warning.mes", BAD, _("You can't build a mine here: This area was once a landfill"));
-                    return false; //previous tip
-                }
+     *  ore, as is the case when there is partial overlap. */
+    case GROUP_OREMINE:
+        {
 
-        int total_ore = 0;
-        for (i = 0; i < size; i++) 
-            for (j = 0; j < size; j++)
-                total_ore += MP_INFO(x + i, y + j).ore_reserve;
+            for (i = 0; i < size; i++) 
+                for (j = 0; j < size; j++)
+                    if (MP_INFO(x + i, y + j).ore_reserve > ORE_RESERVE) {
+                        if (msg)
+                            ok_dial_box("warning.mes", BAD, _("You can't build a mine here: This area was once a landfill"));
+                        return false; //previous tip
+                    }
 
-        if (total_ore < MIN_ORE_RESERVE_FOR_MINE) {
-            if (msg)
-                ok_dial_box("warning.mes", BAD, _("You can't build a mine here: there is no ore left at this site"));
-            return false; // not enought ore
-        }
-    }
+            int total_ore = 0;
+            for (i = 0; i < size; i++) 
+                for (j = 0; j < size; j++)
+                    total_ore += MP_INFO(x + i, y + j).ore_reserve;
 
-    //Parkland
-    if (type == CST_PARKLAND_PLANE)
-            if (!HAS_UGWATER(x, y)) {
+            if (total_ore < MIN_ORE_RESERVE_FOR_MINE) {
                 if (msg)
-                    ok_dial_box("warning.mes", BAD, _("You can't build a park here: it is a desert, parks need water"));
-                return false;
+                    ok_dial_box("warning.mes", BAD, _("You can't build a mine here: there is no ore left at this site"));
+                return false; // not enought ore
             }
+        }
 
+    //Parkland
+    case GROUP_PARKLAND:
+        if (!HAS_UGWATER(x, y)) {
+            if (msg)
+                ok_dial_box("warning.mes", BAD, _("You can't build a park here: it is a desert, parks need water"));
+            return false;
+        }
+        if (total_money <= 0) {
+            if (msg) 
+                ok_dial_box("no-credit-parkland.mes", BAD, 0L);
+            return false;
+        }
+        break;
+
     //Substations and Windmills
-    if ( (type == CST_SUBSTATION_R) || (type == CST_WINDMILL_1_R) )
+    case GROUP_SUBSTATION:
+    case GROUP_WINDMILL:
         if (numof_substations >= MAX_NUMOF_SUBSTATIONS) {
             if (msg)
                 ok_dial_box("warning.mes", BAD, _("Too many substations + windmills. You cannot build one more"));
             return false;
         }
+        break;
 
     //Market
-    if ( type == CST_MARKET_EMPTY )
-         if (numof_markets >= MAX_NUMOF_MARKETS) {
+    case GROUP_MARKET:
+        if (numof_markets >= MAX_NUMOF_MARKETS) {
             if (msg)
                 ok_dial_box("warning.mes", BAD, _("Too many markets. You cannot build one more"));
             return false;
         }
+        break;
 
     //Other cases
+    }
     return true;
 }
 
@@ -225,13 +268,7 @@
     if (GROUP_IS_RESIDENCE(group))
         group=GROUP_RESIDENCE_LL;
 
-    /* You can't build because credit not available. */
-    if (no_credit_build(group) != 0) {
-        no_credit_build_msg_ng(group);
-        return -1;
-    }
-
-    /* You can't build here because it's forbidden or impossible */
+    /* You can't build here because it's forbidden or impossible or not enough money */
     if (!is_allowed_here(x,y,type,msg)) {
             last_warning_message_group = group;
             return -2;
@@ -664,80 +701,3 @@
     return (-1);
 }
 
-static int no_credit_build(int selected_group)
-{
-    if (total_money >= 0)
-        return (0);
-
-#ifdef GROUP_SOLAR_POWER_NO_CREDIT
-    if (selected_group == GROUP_SOLAR_POWER) {
-        return (1);
-    }
-#endif
-#ifdef GROUP_UNIVERSITY_NO_CREDIT
-    if (selected_group == GROUP_UNIVERSITY) {
-        return (1);
-    }
-#endif
-#ifdef GROUP_PARKLAND_NO_CREDIT
-    if (selected_group == GROUP_PARKLAND) {
-        return (1);
-    }
-#endif
-#ifdef GROUP_RECYCLE_NO_CREDIT
-    if (selected_group == GROUP_RECYCLE) {
-        return (1);
-    }
-#endif
-#ifdef GROUP_ROCKET
-    if (selected_group == GROUP_ROCKET) {
-        return (1);
-    }
-#endif
-
-    if (main_groups[selected_group].no_credit == TRUE) {
-        return (1);
-    }
-    return (0);
-}
-
-static void no_credit_build_msg_ng(int selected_group)
-{
-    if (last_warning_message_group == selected_group)
-        return;
-    last_warning_message_group = selected_group;
-
-#ifdef GROUP_SOLAR_POWER_NO_CREDIT
-    if (selected_group == GROUP_SOLAR_POWER) {
-        ok_dial_box("no-credit-solar-power.mes", BAD, 0L);
-        return;
-    }
-#endif
-#ifdef GROUP_UNIVERSITY_NO_CREDIT
-    if (selected_group == GROUP_UNIVERSITY) {
-        ok_dial_box("no-credit-university.mes", BAD, 0L);
-        return;
-    }
-#endif
-#ifdef GROUP_PARKLAND_NO_CREDIT
-    if (selected_group == GROUP_PARKLAND) {
-        ok_dial_box("no-credit-parkland.mes", BAD, 0L);
-        return;
-    }
-#endif
-#ifdef GROUP_RECYCLE_NO_CREDIT
-    if (selected_group == GROUP_RECYCLE) {
-        ok_dial_box("no-credit-recycle.mes", BAD, 0L);
-        return;
-    }
-#endif
-#ifdef GROUP_ROCKET
-    if (selected_group == GROUP_ROCKET) {
-        ok_dial_box("no-credit-rocket.mes", BAD, 0L);
-        return;
-    }
-#endif
-    return;
-}
-
-

Modified: trunk/src/lincity/lin-city.h
===================================================================
--- trunk/src/lincity/lin-city.h	2007-12-08 20:12:46 UTC (rev 1312)
+++ trunk/src/lincity/lin-city.h	2007-12-08 21:27:11 UTC (rev 1313)
@@ -640,7 +640,6 @@
 #define GROUP_SOLAR_POWER_COST_MUL 5
 #define GROUP_SOLAR_POWER_BUL_COST 100000
 #define GROUP_SOLAR_POWER_TECH 500
-#define GROUP_SOLAR_POWER_NO_CREDIT
 #define GROUP_SOLAR_POWER_FIREC 33
 
 #define GROUP_SUBSTATION   3
@@ -749,7 +748,6 @@
 #define GROUP_UNIVERSITY_COST_MUL 25
 #define GROUP_UNIVERSITY_BUL_COST 20000
 #define GROUP_UNIVERSITY_TECH 150
-#define GROUP_UNIVERSITY_NO_CREDIT
 #define GROUP_UNIVERSITY_FIREC 40
 
 #define GROUP_COMMUNE      14
@@ -798,7 +796,6 @@
 #define GROUP_PARKLAND_COST_MUL 25
 #define GROUP_PARKLAND_BUL_COST   1000
 #define GROUP_PARKLAND_TECH   2
-#define GROUP_PARKLAND_NO_CREDIT
 #define GROUP_PARKLAND_FIREC 1
 
 #define GROUP_RECYCLE      20
@@ -807,7 +804,6 @@
 #define GROUP_RECYCLE_COST_MUL 5
 #define GROUP_RECYCLE_BUL_COST    1000
 #define GROUP_RECYCLE_TECH    232
-#define GROUP_RECYCLE_NO_CREDIT
 #define GROUP_RECYCLE_FIREC 10
 
 #define GROUP_WATER	   21
@@ -833,7 +829,6 @@
 #define GROUP_ROCKET_COST_MUL 2
 #define GROUP_ROCKET_BUL_COST     1
 #define GROUP_ROCKET_TECH     750
-#define GROUP_ROCKET_NO_CREDIT
 #define GROUP_ROCKET_FIREC 0
 
 #define GROUP_WINDMILL     24



From alainb at mail.berlios.de  Sun Dec  9 22:44:35 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sun, 9 Dec 2007 22:44:35 +0100
Subject: [Lincity-ng-commit] r1314 - in trunk/src: lincity lincity-ng
Message-ID: <200712092144.lB9LiZGD009021@sheep.berlios.de>

Author: alainb
Date: 2007-12-09 22:44:34 +0100 (Sun, 09 Dec 2007)
New Revision: 1314

Modified:
   trunk/src/lincity-ng/MiniMap.cpp
   trunk/src/lincity-ng/ScreenInterface.cpp
   trunk/src/lincity/ldsvguts.cpp
   trunk/src/lincity/lin-city.h
   trunk/src/lincity/power.cpp
   trunk/src/lincity/power.h
   trunk/src/lincity/simulate.cpp
Log:
add altitude , and fix load of new structures

Modified: trunk/src/lincity/ldsvguts.cpp
===================================================================
--- trunk/src/lincity/ldsvguts.cpp	2007-12-08 21:27:11 UTC (rev 1313)
+++ trunk/src/lincity/ldsvguts.cpp	2007-12-09 21:44:34 UTC (rev 1314)
@@ -291,7 +291,10 @@
     gzprintf(ofile, "sust %d %d %d %d %d %d %d %d %d %d\n", sust_dig_ore_coal_count, sust_port_count, sust_old_money_count, sust_old_population_count, sust_old_tech_count, sust_fire_count, sust_old_money, sust_old_population, sust_old_tech, sustain_flag); /* 3 */
 
     if (ldsv_version == WATERWELL_V2) {
-        gzprintf(ofile,"%d %d\n", global_aridity, global_mountainity);
+        gzprintf(ofile, "arid %d %d\n", global_aridity, global_mountainity);
+#ifdef DEBUG
+        fprintf(stderr," arid %d, mountain %d \n", global_aridity, global_mountainity);
+#endif
         for (x = 0; x < WORLD_SIDE_LEN; x++) {
             for (y = 0; y < WORLD_SIDE_LEN; y++) {
                 gzprintf(ofile,"%d %d %d %d %d %d %d %d %d %d %d %d\n"
@@ -308,6 +311,10 @@
                         , ground[x][y].int3
                         , ground[x][y].int4
                         );
+#ifdef DEBUG
+                if (x == 10 && y == 10)
+                    fprintf(stderr," alt %d, int4 %d \n", ground[x][y].altitude, ground[x][y].int4);
+#endif
             }
         }
     } else {
@@ -617,10 +624,15 @@
             = sust_old_tech_count = sust_fire_count = sust_old_money = sust_old_population = sust_old_tech = 0;
 
     if (ldsv_version == WATERWELL_V2) {
-        sscanf(s,"%d %d\n", &global_aridity, &global_mountainity);
+        gzgets(gzfile, s, 80);      /* this is the CR */
+        sscanf(s, "arid %d %d", &global_aridity, &global_mountainity);
+#ifdef DEBUG
+        fprintf(stderr," arid %d, mountain %d \n", global_aridity, global_mountainity);
+#endif
         for (x = 0; x < WORLD_SIDE_LEN; x++) {
             for (y = 0; y < WORLD_SIDE_LEN; y++) {
-                sscanf(s,"%d %d %d %d %d %d %d %d %d %d %d %d\n",&ground[x][y].altitude
+                gzgets(gzfile, s, 80);      /* this is the CR */
+                sscanf(s,"%d %d %d %d %d %d %d %d %d %d %d %d",&(ground[x][y].altitude)
                         , &ground[x][y].ecotable
                         , &ground[x][y].wastes
                         , &ground[x][y].pollution
@@ -633,6 +645,10 @@
                         , &ground[x][y].int3
                         , &ground[x][y].int4 
                         );
+#ifdef DEBUG
+                if (x == 10 && y == 10)
+                    fprintf(stderr," alt %d, int4 %d \n", ground[x][y].altitude, ground[x][y].int4);
+#endif
             }
         }
     }

Modified: trunk/src/lincity/lin-city.h
===================================================================
--- trunk/src/lincity/lin-city.h	2007-12-08 21:27:11 UTC (rev 1313)
+++ trunk/src/lincity/lin-city.h	2007-12-09 21:44:34 UTC (rev 1314)
@@ -246,7 +246,6 @@
 #define PROGBOX_DONE_COL 4
 #define PROGBOX_NOTDONE_COL 2
 
-#define POWERS_SOLAR_OUTPUT 1800
 #define WINDMILL_POWER      450
 #define WINDMILL_JOBS       10
 /* WINDMILL_RCOST is days per quid */
@@ -641,6 +640,8 @@
 #define GROUP_SOLAR_POWER_BUL_COST 100000
 #define GROUP_SOLAR_POWER_TECH 500
 #define GROUP_SOLAR_POWER_FIREC 33
+#define SOLAR_POWER_JOBS 50
+#define POWERS_SOLAR_OUTPUT 1800
 
 #define GROUP_SUBSTATION   3
 #define GROUP_SUBSTATION_COLOUR (yellow(18))

Modified: trunk/src/lincity/power.cpp
===================================================================
--- trunk/src/lincity/power.cpp	2007-12-08 21:27:11 UTC (rev 1313)
+++ trunk/src/lincity/power.cpp	2007-12-09 21:44:34 UTC (rev 1314)
@@ -28,7 +28,7 @@
    used to determine if a square has been mapped */
 int grid_inc = 0;
 
-Grid *grid[MAX_GRIDS];
+grid_struct *grid[MAX_GRIDS];
 
 /* power_time_step 
    Take the avail_power from last timestep, and move in into the 
@@ -78,46 +78,6 @@
 
 
 }
-
-void map_power_grid(bool resetgrids)
-{
-    int mapx, mapy;
-    grid_num = 0;               /* how many grids found so far */
-    grid_inc++;                 /* how many times have we run map_power_grid */
-
-    // used to fix up bad int_7 values after loading a map
-    if (resetgrids) {
-        for (int mapx = 0; mapx < WORLD_SIDE_LEN; mapx++) {
-            for (int mapy = 0; mapy < WORLD_SIDE_LEN; mapy++) {
-                if (XY_IS_GRID(mapx, mapy))
-                    MP_INFO(mapx, mapy).int_7 = grid_inc - 1;
-            }
-        }
-    }
-    for (mapx = 0; mapx < WORLD_SIDE_LEN; mapx++) {
-        for (mapy = 0; mapy < WORLD_SIDE_LEN; mapy++) {
-            if (XY_IS_GRID(mapx, mapy)) {
-                if (MP_INFO(mapx, mapy).int_7 != grid_inc) {
-                    if (grid_num == MAX_GRIDS) {
-                        ok_dial_box("warning.mes", BAD, _("You have too many power grids. Join some of them"));
-                        return;
-                    }
-                    grid[++grid_num] = (Grid *) lcalloc(sizeof(Grid));
-                    grid[grid_num]->total_power = 0;
-                    grid[grid_num]->power_lines = 0;
-                    grid[grid_num]->demand = 0;
-                    grid[grid_num]->max_power = 0;
-
-                    recurse_power_grid(mapx, mapy, 0);
-                }
-            }
-        }
-    }
-#ifdef DEBUG_POWER
-    printf("grid_inc: %d found %d grids\n", grid_inc, grid_num);
-#endif
-}
-
 /* 
 check_grid(x, y, xi, yi) - coordinates, ?i being which one to increment if we
 need to step over transport
@@ -128,7 +88,7 @@
 total.  Now set it to our grid.  If it is a power line, return
 1, otherwise 0. */
 
-int check_grid(int x, int y, int xi, int yi)
+static int check_grid(int x, int y, int xi, int yi)
 {
     if (XY_IS_GRID(x, y) && !IS_OLD_WINDMILL(x, y)) {
         if (GRID_CURRENT(x, y)) {
@@ -168,7 +128,7 @@
 should really handle the connect_transport bit for power lines.  That
 would help perspicuity anyway. */
 
-void recurse_power_grid(int startx, int starty, int steps)
+static void recurse_power_grid(int startx, int starty, int steps)
 {
     static int level;           /* debug: levels of recursion encountered */
     int count = steps;          /* number of steps taken - for animation */
@@ -288,6 +248,46 @@
     /*  printf("exiting recurse_power_grid:level %d\n",level); */
 }
 
+void map_power_grid(bool resetgrids)
+{
+    int mapx, mapy;
+    grid_num = 0;               /* how many grids found so far */
+    grid_inc++;                 /* how many times have we run map_power_grid */
+
+    // used to fix up bad int_7 values after loading a map
+    if (resetgrids) {
+        for (int mapx = 0; mapx < WORLD_SIDE_LEN; mapx++) {
+            for (int mapy = 0; mapy < WORLD_SIDE_LEN; mapy++) {
+                if (XY_IS_GRID(mapx, mapy))
+                    MP_INFO(mapx, mapy).int_7 = grid_inc - 1;
+            }
+        }
+    }
+    for (mapx = 0; mapx < WORLD_SIDE_LEN; mapx++) {
+        for (mapy = 0; mapy < WORLD_SIDE_LEN; mapy++) {
+            if (XY_IS_GRID(mapx, mapy)) {
+                if (MP_INFO(mapx, mapy).int_7 != grid_inc) {
+                    if (grid_num == MAX_GRIDS) {
+                        ok_dial_box("warning.mes", BAD, _("You have too many power grids. Join some of them"));
+                        return;
+                    }
+                    grid[++grid_num] = (grid_struct *) lcalloc(sizeof(grid_struct));
+                    grid[grid_num]->total_power = 0;
+                    grid[grid_num]->power_lines = 0;
+                    grid[grid_num]->demand = 0;
+                    grid[grid_num]->max_power = 0;
+
+                    recurse_power_grid(mapx, mapy, 0);
+                }
+            }
+        }
+    }
+#ifdef DEBUG_POWER
+    printf("grid_inc: %d found %d grids\n", grid_inc, grid_num);
+#endif
+}
+
+
 /* get_power
    get power for thing at x, y.  Don't use windmills if industry.
    We go through a list (ugly, I know) until we find a substation in range

Modified: trunk/src/lincity/power.h
===================================================================
--- trunk/src/lincity/power.h	2007-12-08 21:27:11 UTC (rev 1313)
+++ trunk/src/lincity/power.h	2007-12-09 21:44:34 UTC (rev 1314)
@@ -12,15 +12,12 @@
     short powered;
 };
 
-typedef struct grid_struct Grid;
-
 /* public */
 #define MAX_GRIDS 128           // How many grids in the array, not how many to allocate
-extern Grid *grid[MAX_GRIDS];
+extern grid_struct *grid[MAX_GRIDS];
 
 void map_power_grid(bool resetgrids = false);
 int get_power(int x, int y, int power, int block_industry);
-void do_windmill(int x, int y);
 void do_power_substation(int x, int y);
 void do_power_source(int x, int y);
 void do_power_source_coal(int x, int y);
@@ -28,9 +25,6 @@
 void power_time_step();
 
 /* intended private */
-void recurse_power_grid(int startx, int starty, int steps);
-int check_grid(int x, int y, int xi, int yi);
-void project_power(int x, int y);
 
 #define POWER_LINE_LOSS 1       /* one KW */
 #define POWER_MODULUS 25        /* Controls how often we see a packet in anim */
@@ -63,7 +57,5 @@
 
 #define GRID_CURRENT(x,y) (MP_INFO(x,y).int_7 == grid_inc)
 
-/*** JOBS ***/
-#define SOLAR_POWER_JOBS 50
 
 #endif

Modified: trunk/src/lincity/simulate.cpp
===================================================================
--- trunk/src/lincity/simulate.cpp	2007-12-08 21:27:11 UTC (rev 1313)
+++ trunk/src/lincity/simulate.cpp	2007-12-09 21:44:34 UTC (rev 1314)
@@ -71,14 +71,14 @@
 static void clear_game(void);
 static void nullify_mappoint(int x, int y);
 static void random_start(int *originx, int *originy);
-static void quick_start_add(int x, int y, short type, int size);
 static void setup_land(void);
 static void coal_reserve_setup(void);
 static void ore_reserve_setup(void);
 static void setup_river(void);
-static void setup_river2(int x, int y, int d);
-static void quick_start_add(int x, int y, short type, int size);
+static void setup_river2(int x, int y, int d, int alt, int mountain);
 static void set_mappoint_used(int fromx, int fromy, int x, int y);
+static void setup_ground(void);
+
 #ifdef DEBUG
         static void debug_mappoints(void); /* AL1: NG 1.1.2 compiler warns that this is unused */
 #endif
@@ -178,44 +178,22 @@
 void set_mappoint(int x, int y, short selected_type)
 {
     int grp;
+    int size;
 
     if ((grp = get_group_of_type(selected_type)) < 0)
         return;
 
     MP_TYPE(x, y) = selected_type;
     MP_GROUP(x, y) = grp;
+    size = main_groups[grp].size;
 
-    if (main_groups[grp].size == 2) {
-        set_mappoint_used(x, y, x + 1, y);
-        set_mappoint_used(x, y, x, y + 1);
-        set_mappoint_used(x, y, x + 1, y + 1);
-    } else if (main_groups[grp].size == 3) {
-        set_mappoint_used(x, y, x + 1, y);
-        set_mappoint_used(x, y, x + 2, y);
-        set_mappoint_used(x, y, x + 1, y + 1);
-        set_mappoint_used(x, y, x + 2, y + 1);
-        set_mappoint_used(x, y, x + 1, y + 2);
-        set_mappoint_used(x, y, x + 2, y + 2);
-        set_mappoint_used(x, y, x, y + 1);
-        set_mappoint_used(x, y, x, y + 2);
-    } else if (main_groups[grp].size == 4) {
-        set_mappoint_used(x, y, x + 1, y);
-        set_mappoint_used(x, y, x + 2, y);
-        set_mappoint_used(x, y, x + 1, y + 1);
-        set_mappoint_used(x, y, x + 2, y + 1);
-        set_mappoint_used(x, y, x + 1, y + 2);
-        set_mappoint_used(x, y, x + 2, y + 2);
-        set_mappoint_used(x, y, x, y + 1);
-        set_mappoint_used(x, y, x, y + 2);
+    for (int i = 0; i<size; i++)
+        for (int j = 0; j<size; j++) {
+            if ( i == 0 && j == 0 )
+                continue;
+            set_mappoint_used(x, y, x+i, y+j);
+        }
 
-        set_mappoint_used(x, y, x + 3, y);
-        set_mappoint_used(x, y, x + 3, y + 1);
-        set_mappoint_used(x, y, x + 3, y + 2);
-        set_mappoint_used(x, y, x + 3, y + 3);
-        set_mappoint_used(x, y, x, y + 3);
-        set_mappoint_used(x, y, x + 1, y + 3);
-        set_mappoint_used(x, y, x + 2, y + 3);
-    }
 }
 
 void upgrade_to_v2 (void)
@@ -227,9 +205,11 @@
         for (x = 0; x < WORLD_SIDE_LEN; x++)
             if ( !GROUP_IS_BARE(MP_GROUP(x, y)) ) {
                 /* be nice, put water under all existing builings / farms / parks ... */
-                /* This should change soon according to global_aridity and distance_to_river */
+                /* This may change according to global_aridity and distance_to_river */
                 MP_INFO(x,y).flags |= FLAG_HAS_UNDERGROUND_WATER;
             }
+    /* TODO: AL1 upgrade ground[x][y].water_alt and .altitude */
+
     /* Let 10 years in game time to put waterwells where needed, then starvation will occur */
     deadline=total_time + 1200 * 10;
 #ifdef DEBUG
@@ -574,13 +554,18 @@
     /* TODO reset screen, sustain info, max_tech when load scenario... */
     use_waterwell = true;
     ldsv_version = WATERWELL_V2;
+    global_aridity = 0;
+    global_mountainity =0;
 }
 
 void new_city(int *originx, int *originy, int random_village)
 {
     clear_game();
     coal_reserve_setup();
+
+    global_mountainity= 10 + rand () % 300; // roughly water slope = 30m / 1km (=from N to S)
     setup_river();
+    setup_ground();
     setup_land();
     ore_reserve_setup();
     init_pbars();
@@ -630,46 +615,75 @@
 void setup_river(void)
 {
     int x, y, i, j;
+    int alt = 1; //lowest altitude in the map = surface of the river at mouth.
     x = (1 * WORLD_SIDE_LEN + rand() % WORLD_SIDE_LEN) / 3;
     y = WORLD_SIDE_LEN - 1;
+    ground[x][y].water_alt = alt; // 1 unit = 1 cm , 
+                        //for rivers .water_alt = .altitude = surface of the water
+                        //for "earth tile" .water_alt = alt of underground water
+                        //                 .altitude = alt of the ground
+                        //            so .water_alt <= .altitude
+
+    /* Mouth of the river, 3 tiles wide, 6 + %12 long */
     i = (rand() % 12) + 6;
     for (j = 0; j < i; j++) {
         x += (rand() % 3) - 1;
         MP_TYPE(x, y) = CST_WATER;
         MP_GROUP(x, y) = GROUP_WATER;
         MP_INFO(x, y).flags |= FLAG_IS_RIVER;
+        ground[x][y].altitude=alt;
+
         MP_TYPE(x + 1, y) = CST_WATER;
         MP_GROUP(x + 1, y) = GROUP_WATER;
         MP_INFO(x + 1, y).flags |= FLAG_IS_RIVER;
+        ground[x + 1][y].altitude=alt;
+
         MP_TYPE(x - 1, y) = CST_WATER;
         MP_GROUP(x - 1, y) = GROUP_WATER;
         MP_INFO(x - 1, y).flags |= FLAG_IS_RIVER;
+        ground[x -1][y].altitude=alt;
+
         y--;
+        alt += 1; // wide river, so very small slope
     }
+
     MP_TYPE(x, y) = CST_WATER;
     MP_GROUP(x, y) = GROUP_WATER;
     MP_INFO(x, y).flags |= FLAG_IS_RIVER;
+    ground[x][y].altitude=alt;
+
     MP_TYPE(x + 1, y) = CST_WATER;
     MP_GROUP(x + 1, y) = GROUP_WATER;
     MP_INFO(x + 1, y).flags |= FLAG_IS_RIVER;
+    ground[x + 1][y].altitude=alt;
+
     MP_TYPE(x - 1, y) = CST_WATER;
     MP_GROUP(x - 1, y) = GROUP_WATER;
     MP_INFO(x - 1, y).flags |= FLAG_IS_RIVER;
+    ground[x -1][y].altitude=alt;
 
-    setup_river2(x - 1, y, -1); /* left tributary */
-    setup_river2(x + 1, y, 1);  /* right tributary */
+    alt += 2;
+
+#ifdef DEBUG
+    fprintf(stderr," x= %d, y=%d, altitude = %d, mountainity = %d\n", x, y, alt, global_mountainity);
+#endif
+    setup_river2(x - 1, y, -1, alt, global_mountainity); /* left tributary */
+    setup_river2(x + 1, y, 1, alt, global_mountainity);  /* right tributary */
 }
 
-void setup_river2(int x, int y, int d)
+void setup_river2(int x, int y, int d, int alt, int mountain)
 {
     int i, j, r;
     i = (rand() % 55) + 15;
     for (j = 0; j < i; j++) {
         r = (rand() % 3) - 1 + (d * (rand() % 3));
-        if (r < -1)
+        if (r < -1) {
+            alt += rand() % (mountain / 10);
             r = -1;
-        else if (r > 1)
+        } else if (r > 1) {
+            alt += rand() % (mountain / 10);
             r = 1;
+        }
         x += r;
         if (!GROUP_IS_BARE(MP_GROUP(x + (d + d), y))
             || !GROUP_IS_BARE(MP_GROUP(x + (d + d + d), y)))
@@ -678,49 +692,121 @@
             MP_TYPE(x, y) = CST_WATER;
             MP_GROUP(x, y) = GROUP_WATER;
             MP_INFO(x, y).flags |= FLAG_IS_RIVER;
+            ground[x][y].altitude = alt;
+            alt += rand() % (mountain / 10);
+
             MP_TYPE(x + d, y) = CST_WATER;
             MP_GROUP(x + d, y) = GROUP_WATER;
             MP_INFO(x + d, y).flags |= FLAG_IS_RIVER;
+            ground[x + d][y].altitude = alt;
+            alt += rand () % (mountain / 10);
         }
         if (--y < 10 || x < 5 || x > WORLD_SIDE_LEN - 5)
             break;
     }
+#ifdef DEBUG
+    fprintf(stderr," x= %d, y=%d, altitude = %d\n", x, y, alt);
+#endif
+
     if (y > 20) {
-        if (x > 5 && x < WORLD_SIDE_LEN - 5)
-            setup_river2(x, y, -1);
-        if (x > 5 && x < WORLD_SIDE_LEN - 5)
-            setup_river2(x, y, 1);
+        if (x > 5 && x < WORLD_SIDE_LEN - 5) {
+#ifdef DEBUG
+            fprintf(stderr," x= %d, y=%d, altitude = %d\n", x, y, alt);
+#endif
+            setup_river2(x, y, -1, alt, (mountain * 3)/2 );
+        }
+        if (x > 5 && x < WORLD_SIDE_LEN - 5) {
+#ifdef DEBUG
+            fprintf(stderr," x= %d, y=%d, altitude = %d\n", x, y, alt);
+#endif
+            setup_river2(x, y, 1, alt, (mountain *3)/2 );
+        }
     }
 }
 
+void setup_ground(void)
+{
+    int x,y;
+    int hmax =0;
+    /* fill the corrects fields: ground[x][y).stuff, global_aridity, global_mountainity */
+    /* currently only dummy things in order to compile */
+#define ALT(x,y) ground[x][y].altitude
+#define TMP(x,y) ground[x][y].int4
+
+    for (x = 1; x < WORLD_SIDE_LEN - 1; x++) {
+         for (y = 1; y < WORLD_SIDE_LEN - 1; y++) {
+                if ( !IS_RIVER(x,y) ) {
+                    ALT(x,y) = 0;
+                    TMP(x,y) = 0;
+                } else {
+                    ground[x][y].water_alt = ALT(x,y);
+                    //shore is higher than water
+                    ALT(x,y) += 10 + rand() % (global_mountainity/7);
+                    TMP(x,y) = ALT(x,y);
+                    if (ALT(x,y) >= hmax)
+                        hmax = ALT(x,y);
+                }
+         }
+    }
+#ifdef DEBUG
+    fprintf(stderr,"\n river max = %d\n\n", hmax);
+    hmax=0;
+#endif
+
+    for (int i =0; i < 90; i++ ) {
+        for (x = 1; x < WORLD_SIDE_LEN - 1; x++) {
+            for (y = 1; y < WORLD_SIDE_LEN - 1; y++) {
+                if ( ALT(x,y) != 0 )
+                    continue;
+                int count = 0;
+                int lmax = 0;
+
+                for ( int k = -1; k <= 1; k++ )
+                    for ( int l = -1; l <= 1; l++) 
+                        if ( ALT(x+k, y+l) != 0 ) {
+                            count ++;
+                            if ( ALT(x+k, y+l) >= lmax )
+                                lmax = ALT(x+k, y+l);
+                        }
+
+                if (count != 0) {
+                    TMP(x,y) = lmax + rand () % (global_mountainity/3);
+                }
+                if (TMP(x,y) >= hmax)
+                    hmax = TMP(x,y);
+            }
+        }
+        for (x = 1; x < WORLD_SIDE_LEN - 1; x++)
+            for (y = 1; y < WORLD_SIDE_LEN - 1; y++)
+                ALT(x,y)=TMP(x,y);
+
+#ifdef DEBUG
+        if ( (i%5) == 1 )
+        fprintf(stderr," i= %2d, alt max = %d\n", i, hmax);
+#endif
+    }
+/*
+    ground[x][y].ecotable=0;
+    ground[x][y].wastes=0;
+    ground[x][y].pollution=0;
+    ground[x][y].water_alt=0;
+    ground[x][y].water_pol=0;
+    ground[x][y].water_wast=0;
+    ground[x][y].water_next=0;
+    ground[x][y].int1=0;
+    ground[x][y].int2=0;
+    ground[x][y].int3=0;
+    ground[x][y].int4=0;
+*/
+}
 void setup_land(void)
 {
     int x, y, xw, yw;
     int aridity = rand() % 400 - 150;
 
-    /* fill the corrects fields: ground[x][y).stuff, global_aridity, global_mountainity */
-    /* currently only dummy things in order to compile */
     global_aridity = aridity;
-    global_mountainity=0;
     
-    for (x = 0; x < WORLD_SIDE_LEN; x++) {
-        for (y = 0; y < WORLD_SIDE_LEN; y++) {
-            ground[x][y].altitude=0;
-            ground[x][y].ecotable=0;
-            ground[x][y].wastes=0;
-            ground[x][y].pollution=0;
-            ground[x][y].water_alt=0;
-            ground[x][y].water_pol=0;
-            ground[x][y].water_wast=0;
-            ground[x][y].water_next=0;
-            ground[x][y].int1=0;
-            ground[x][y].int2=0;
-            ground[x][y].int3=0;
-            ground[x][y].int4=0;
-        }
-    }
 
-
     for (y = 0; y < WORLD_SIDE_LEN; y++) {
         for (x = 0; x < WORLD_SIDE_LEN; x++) {
             int d2w_min = 2 * WORLD_SIDE_LEN * WORLD_SIDE_LEN;
@@ -739,8 +825,7 @@
                     d2w = (xw - x) * (xw - x) + (yw - y) * (yw - y);
                     if (d2w < d2w_min)
                         d2w_min = d2w;
-                    /* TODO Store square of distance to river for each tile */
-                    /* MP_DIST2RIVER(x,y) = d2w_min; */
+                    /* TODO ? Store square of distance to river for each tile */
                 }
             }
 
@@ -771,6 +856,11 @@
             }
         }
     }
+    for (y = 0; y < WORLD_SIDE_LEN; y++)
+        for (x = 0; x < WORLD_SIDE_LEN; x++)
+            if (MP_TYPE(x, y) == CST_WATER)
+                MP_INFO(x, y).flags |= FLAG_HAS_UNDERGROUND_WATER;
+
     connect_rivers();
 }
 
@@ -778,7 +868,7 @@
 {
     int r = ground[x][y].ecotable;
     if ( (MP_INFO(x, y).flags | FLAG_HAS_UNDERGROUND_WATER) == 0 ) {
-        /*desert*/
+        /*true desert*/
         return;
     }
 
@@ -901,6 +991,20 @@
     MP_INFO(x, y).int_5 = 0;
     MP_INFO(x, y).int_6 = 0;
     MP_INFO(x, y).int_7 = 0;
+
+    ground[x][y].altitude = 0;
+    ground[x][y].ecotable = 0;
+    ground[x][y].wastes = 0;
+    ground[x][y].pollution = 0;
+    ground[x][y].water_alt = 0;
+    ground[x][y].water_pol = 0;
+    ground[x][y].water_wast = 0;
+    ground[x][y].water_next = 0;
+    ground[x][y].int1 = 0;
+    ground[x][y].int2 = 0;
+    ground[x][y].int3 = 0;
+    ground[x][y].int4 = 0;
+
 }
 
 static void random_start(int *originx, int *originy)
@@ -942,29 +1046,29 @@
     *originy = yy;
 
     /*  Draw the start scene. */
-    quick_start_add(xx + 5, yy + 5, CST_FARM_O0, 4);
+    set_mappoint(xx + 5, yy + 5, CST_FARM_O0);
     /* The first two farms have more underground water */
     for (int i = 0; i < MP_SIZE(xx + 5, yy + 5); i++)
         for (int j = 0; j < MP_SIZE(xx + 5, yy + 5); j++)
             if (!HAS_UGWATER(xx + 5 + i, yy + 5 + j) && (rand() % 2))
                 MP_INFO(xx + 5 + i, yy + 5 + j).flags |= FLAG_HAS_UNDERGROUND_WATER;
 
-    quick_start_add(xx + 9, yy + 6, CST_RESIDENCE_ML, 3);
+    set_mappoint(xx + 9, yy + 6, CST_RESIDENCE_ML);
     MP_INFO(xx + 9, yy + 6).population = 50;
     MP_INFO(xx + 9, yy + 6).flags |= (FLAG_FED + FLAG_EMPLOYED + FLAG_WATERWELL_COVER);
-    quick_start_add(xx + 9, yy + 9, CST_POTTERY_0, 2);
-    quick_start_add(xx + 16, yy + 9, CST_WATERWELL, 2);
+    set_mappoint(xx + 9, yy + 9, CST_POTTERY_0);
+    set_mappoint(xx + 16, yy + 9, CST_WATERWELL);
 
-    quick_start_add(xx + 14, yy + 6, CST_RESIDENCE_ML, 3);
+    set_mappoint(xx + 14, yy + 6, CST_RESIDENCE_ML);
     MP_INFO(xx + 14, yy + 6).population = 50;
     MP_INFO(xx + 14, yy + 6).flags |= (FLAG_FED + FLAG_EMPLOYED + FLAG_WATERWELL_COVER);
-    quick_start_add(xx + 17, yy + 5, CST_FARM_O0, 4);
+    set_mappoint(xx + 17, yy + 5, CST_FARM_O0);
     for (int i = 0; i < MP_SIZE(xx + 17, yy + 5); i++)
         for (int j = 0; j < MP_SIZE(xx + 17, yy + 5); j++)
             if (!HAS_UGWATER(xx + 17 + i, yy + 5 + j) && (rand() % 2))
                 MP_INFO(xx + 17 + i, yy + 5 + j).flags |= FLAG_HAS_UNDERGROUND_WATER;
 
-    quick_start_add(xx + 14, yy + 9, CST_MARKET_EMPTY, 2);
+    set_mappoint(xx + 14, yy + 9, CST_MARKET_EMPTY);
     marketx[numof_markets] = xx + 14;
     markety[numof_markets] = yy + 9;
     numof_markets++;
@@ -979,37 +1083,17 @@
             + FLAG_MS_ORE + FLAG_MB_GOODS + FLAG_MS_GOODS + FLAG_MB_STEEL + FLAG_MS_STEEL);
 
     for (x = 5; x < 19; x++) {
-        quick_start_add(xx + x, yy + 11, CST_TRACK_LR, 1);
+        set_mappoint(xx + x, yy + 11, CST_TRACK_LR);
         MP_INFO(xx + x, yy + 11).flags |= FLAG_IS_TRANSPORT;
     }
-    quick_start_add(xx + 6, yy + 12, CST_COMMUNE_1, 4);
-    quick_start_add(xx + 6, yy + 17, CST_COMMUNE_1, 4);
-    quick_start_add(xx + 11, yy + 12, CST_COMMUNE_1, 4);
-    quick_start_add(xx + 11, yy + 17, CST_COMMUNE_1, 4);
-    quick_start_add(xx + 16, yy + 12, CST_COMMUNE_1, 4);
-    quick_start_add(xx + 16, yy + 17, CST_COMMUNE_1, 4);
+    set_mappoint(xx + 6, yy + 12, CST_COMMUNE_1);
+    set_mappoint(xx + 6, yy + 17, CST_COMMUNE_1);
+    set_mappoint(xx + 11, yy + 12, CST_COMMUNE_1);
+    set_mappoint(xx + 11, yy + 17, CST_COMMUNE_1);
+    set_mappoint(xx + 16, yy + 12, CST_COMMUNE_1);
+    set_mappoint(xx + 16, yy + 17, CST_COMMUNE_1);
 }
 
-/* XXX: WCK: What is up with this?  Why not just use set_mappoint?! */
-static void quick_start_add(int x, int y, short type, int size)
-{
-    int xx, yy;
-    if (size == 1) {
-        MP_TYPE(x, y) = type;
-        MP_GROUP(x, y) = get_group_of_type(type);
-        return;
-    }
-    for (yy = 0; yy < size; yy++) {
-        for (xx = 0; xx < size; xx++) {
-            if (xx == 0 && yy == 0)
-                continue;
-            set_mappoint_used(x, y, x + xx, y + yy);
-        }
-    }
-    MP_TYPE(x, y) = type;
-    MP_GROUP(x, y) = get_group_of_type(type);
-}
-
 static void sustainability_test(void)
 {
     int i;
@@ -1092,6 +1176,7 @@
 }
 
 #ifdef DEBUG
+/* AL1 : unused in NG 1.1.2 */
 static void debug_mappoints(void)
 {
     int x, y;

Modified: trunk/src/lincity-ng/MiniMap.cpp
===================================================================
--- trunk/src/lincity-ng/MiniMap.cpp	2007-12-08 21:27:11 UTC (rev 1313)
+++ trunk/src/lincity-ng/MiniMap.cpp	2007-12-09 21:44:34 UTC (rev 1314)
@@ -678,6 +678,32 @@
             else
                 return makeGrey(getColorNormal(x,y));
         case UB40: {
+#ifdef DEBUG_ALTITUDE
+            // show ground altitude :-)
+            int alt=ground[x][y].altitude;
+            if (alt > 4500)
+                    return Color(0xFF,0,0); //red
+            else if ( alt> 4000 ) 
+                    return Color(0xFF,0x99,0); //orange
+	    else if ( alt > 3500 )
+	                return Color(0xFF,0xFF,0); //yellow
+	    else if ( alt > 3000 )
+	                return Color(0,0xFF,0); //green
+            else if ( alt > 2500)
+                return Color(0,0,0xFF); // blue
+            else if (alt > 2000)
+                    return Color(0xFF,0,0); //red
+            else if ( alt> 1500 ) 
+                    return Color(0xFF,0x99,0); //orange
+	    else if ( alt > 1000 )
+	                return Color(0xFF,0xFF,0); //yellow
+	    else if ( alt > 500 )
+	                return Color(0,0xFF,0); //green
+            else
+                return Color(0,0,0xFF); // blue
+#endif
+
+
             if (MP_GROUP_IS_RESIDENCE(xx,yy)) {
                 if (MP_INFO(xx,yy).int_1 < -20)
                     return Color(0xFF,0,0);

Modified: trunk/src/lincity-ng/ScreenInterface.cpp
===================================================================
--- trunk/src/lincity-ng/ScreenInterface.cpp	2007-12-08 21:27:11 UTC (rev 1313)
+++ trunk/src/lincity-ng/ScreenInterface.cpp	2007-12-09 21:44:34 UTC (rev 1314)
@@ -301,7 +301,7 @@
 {
     (void) title;
     (void) percent;
-#ifdef DEBUG
+#ifdef DEBUG_PROGBOX
     std::ostringstream text;
     text << "prog_box:'" << title << "' " << percent << "%\n";
     std::cout << text.str();



From wolfgangb at mail.berlios.de  Mon Dec 10 19:37:36 2007
From: wolfgangb at mail.berlios.de (wolfgangb at BerliOS)
Date: Mon, 10 Dec 2007 19:37:36 +0100
Subject: [Lincity-ng-commit] r1315 - in trunk: . data/gui
Message-ID: <200712101837.lBAIbaEt016233@sheep.berlios.de>

Author: wolfgangb
Date: 2007-12-10 19:37:36 +0100 (Mon, 10 Dec 2007)
New Revision: 1315

Modified:
   trunk/TODO
   trunk/data/gui/allgone.xml
Log:
Downgraded allgone.xml to r908 to get missing Ok-button back. 


Modified: trunk/TODO
===================================================================
--- trunk/TODO	2007-12-09 21:44:34 UTC (rev 1314)
+++ trunk/TODO	2007-12-10 18:37:36 UTC (rev 1315)
@@ -61,6 +61,8 @@
  [?] Think about mechanism for attach arbitrary properties to components
     (for tooltips, styles (and layout data?) )
 
+    
+
 --Bugs--
  [H] Windows: Something in MainMenu.cpp with recentfile and curfile is broken. 
 
@@ -68,10 +70,14 @@
 
  [M] Get rid of all the compiler warnings.
 
+ [M] When starting another game, stats still show values from the previous game.
+
  [L] New text on buttons is truncated to original textlength. 
      (eg in load game menu) Buttons that had an empty string as caption once
      won't change to anything else. At least the caption is not shown.
 
+ [?] Generator for dialogs no longer works.
+
 --Game--
  [M] Print out more debug infos that user can send in with debug reports:
      architecture?, SDL version, opengl driver name, SDL software driver name,

Modified: trunk/data/gui/allgone.xml
===================================================================
--- trunk/data/gui/allgone.xml	2007-12-09 21:44:34 UTC (rev 1314)
+++ trunk/data/gui/allgone.xml	2007-12-10 18:37:36 UTC (rev 1315)
@@ -32,7 +32,18 @@
           </cell>
         </TableLayout>
       </cell>
-      <cell row="2" col="1"/>
+      <cell row="2" col="1">
+        <TableLayout xmlns:xsd="http://www.w3.org/2001/XMLSchema" rows="1" cols="1">
+          <cell row="1" col="1">
+            <Button name="Ok">
+              <text-caption style="dialogbutton" translatable="yes">Ok</text-caption>
+              <image src="images/gui/dialogs/yesbutton.png"/>
+              <image-hover src="images/gui/dialogs/yesbutton-hover.png"/>
+              <image-clicked src="images/gui/dialogs/yesbutton-clicked.png"/>
+            </Button>
+          </cell>
+        </TableLayout>
+      </cell>
     </TableLayout>
   </contents>
 </Window>



From alainb at mail.berlios.de  Fri Dec 14 22:15:38 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Fri, 14 Dec 2007 22:15:38 +0100
Subject: [Lincity-ng-commit] r1316 - in trunk/src: lincity lincity-ng
Message-ID: <200712142115.lBELFc6H026422@sheep.berlios.de>

Author: alainb
Date: 2007-12-14 22:15:37 +0100 (Fri, 14 Dec 2007)
New Revision: 1316

Modified:
   trunk/src/lincity-ng/MiniMap.cpp
   trunk/src/lincity-ng/ScreenInterface.cpp
   trunk/src/lincity/lintypes.h
   trunk/src/lincity/simulate.cpp
Log:
implemented a rough upgrade for new field altitude (still unused)

Modified: trunk/src/lincity/lintypes.h
===================================================================
--- trunk/src/lincity/lintypes.h	2007-12-10 18:37:36 UTC (rev 1315)
+++ trunk/src/lincity/lintypes.h	2007-12-14 21:15:37 UTC (rev 1316)
@@ -93,7 +93,9 @@
     int int1;           //reserved for future (?) use
     int int2;
     int int3;
-    int int4;
+    int int4;           //used as tmp in setup_ground
 };
+#define ALT(x,y) ground[x][y].altitude
 
+
 #endif /* __lintypes_h__ */

Modified: trunk/src/lincity/simulate.cpp
===================================================================
--- trunk/src/lincity/simulate.cpp	2007-12-10 18:37:36 UTC (rev 1315)
+++ trunk/src/lincity/simulate.cpp	2007-12-14 21:15:37 UTC (rev 1316)
@@ -198,24 +198,94 @@
 
 void upgrade_to_v2 (void)
 {
+    // Follow order and logic of new_city
     int x,y;
-    flag_warning = true;
-    setup_land();
-    for (y = 0; y < WORLD_SIDE_LEN; y++)
-        for (x = 0; x < WORLD_SIDE_LEN; x++)
+    int alt0 = 0;
+    int mount;
+    int c;
+
+    global_mountainity= 10 + rand () % 300;
+    mount = global_mountainity;
+
+    // Grey border (not visible on the map, x = 0 , x = 99, y = 0, y = 99) 
+    for (x = 0; x < WORLD_SIDE_LEN; x++)
+        for (y = 0; y < WORLD_SIDE_LEN; y++) {
+            ALT(x,y) = 0;
             if ( !GROUP_IS_BARE(MP_GROUP(x, y)) ) {
                 /* be nice, put water under all existing builings / farms / parks ... */
                 /* This may change according to global_aridity and distance_to_river */
                 MP_INFO(x,y).flags |= FLAG_HAS_UNDERGROUND_WATER;
             }
-    /* TODO: AL1 upgrade ground[x][y].water_alt and .altitude */
+        }
 
     /* Let 10 years in game time to put waterwells where needed, then starvation will occur */
     deadline=total_time + 1200 * 10;
-#ifdef DEBUG
-    fprintf(stderr," total_time %d, deadline %d\n", total_time, deadline);
-#endif
+    flag_warning = true; // warn player.
 
+    /* Upgrade ground[x][y].water_alt and .altitude */
+    /* choose this order for rivers and beach scenario 
+     *  = say the lowest part of the map is South-east
+     *    and the sea may have a slope :-) 
+     *     (strictly speaking this is true, but at much smaller order of magnitude */
+
+    /* River mouth is on south of the map */
+    y = WORLD_SIDE_LEN -2;
+    for (x = WORLD_SIDE_LEN - 1; x >=0; x--)
+        if ( IS_RIVER(x,y) )
+            ALT(x,y) = 1;
+
+    alt0 = 1;
+    #define max(X, Y) (X>Y?X:Y)
+    #define min(X, Y) (X>Y?Y:X)
+    for (y = WORLD_SIDE_LEN - 2; y >= 0; y--) {
+        for (x = WORLD_SIDE_LEN - 1; x >= 0; x--) {
+            if ( IS_RIVER(x,y) ) {
+                // attempt to find large area of water = lake or sea => slope = 0
+                c = 0;
+                int alt=0;
+                if (x < WORLD_SIDE_LEN - 2)  {
+                    if IS_RIVER(x + 1, y + 1) {
+                        c++;
+                        alt = max (alt, ALT(x+1, y+1));
+                    }
+                    if IS_RIVER(x + 1, y ) {
+                        c++;
+                        alt = max (alt, ALT(x+1, y));
+                    }
+                }
+                if IS_RIVER(x , y +1 ) {
+                    c++;
+                    alt = max (alt, ALT(x, y+1));
+                }
+                if (x > 1) {
+                    if IS_RIVER(x - 1, y+1 ) {
+                        c++;
+                        alt = max (alt, ALT(x-1, y+1));
+                    }
+                    if IS_RIVER(x - 1, y ) {
+                        c++;
+                        alt = max (alt, ALT(x-1, y));
+                    }
+                }
+                if (c == 0) {
+                    fprintf(stderr," error in upgrade_to_v2, c = 0, impossible, x = %d, y =%d\n", x, y);
+                    return;
+                }
+                if (c <= 2) {
+                    alt0 = alt + rand() % ( 2 + mount / 100 );
+                    alt += rand() % ( 2 + mount / 100 );
+                    ALT(x,y) = max(alt, alt0);
+                    fprintf(stderr, " x %d, y %d, alt %d, alt0 %d , c=%d \n", x, y, alt, alt0, c);
+                } else {
+                    fprintf(stderr, " x %d, y %d, alt %d, alt0 %d\n", x, y, alt, alt0);
+                    ALT(x,y) = alt;
+                }
+            }
+        }
+        alt0 ++; // minimum slope toward south
+    }
+
+    setup_land();
 }
 
 /* ---------------------------------------------------------------------- *
@@ -730,7 +800,6 @@
     int hmax =0;
     /* fill the corrects fields: ground[x][y).stuff, global_aridity, global_mountainity */
     /* currently only dummy things in order to compile */
-#define ALT(x,y) ground[x][y].altitude
 #define TMP(x,y) ground[x][y].int4
 
     for (x = 1; x < WORLD_SIDE_LEN - 1; x++) {
@@ -754,13 +823,14 @@
 #endif
 
     for (int i =0; i < 90; i++ ) {
+        int tot_cnt = 0;
         for (x = 1; x < WORLD_SIDE_LEN - 1; x++) {
             for (y = 1; y < WORLD_SIDE_LEN - 1; y++) {
                 if ( ALT(x,y) != 0 )
                     continue;
                 int count = 0;
                 int lmax = 0;
-
+                tot_cnt ++;
                 for ( int k = -1; k <= 1; k++ )
                     for ( int l = -1; l <= 1; l++) 
                         if ( ALT(x+k, y+l) != 0 ) {
@@ -769,9 +839,9 @@
                                 lmax = ALT(x+k, y+l);
                         }
 
-                if (count != 0) {
+                if (count != 0)
                     TMP(x,y) = lmax + rand () % (global_mountainity/3);
-                }
+
                 if (TMP(x,y) >= hmax)
                     hmax = TMP(x,y);
             }
@@ -782,7 +852,7 @@
 
 #ifdef DEBUG
         if ( (i%5) == 1 )
-        fprintf(stderr," i= %2d, alt max = %d\n", i, hmax);
+        fprintf(stderr," i= %2d, alt max = %d, tot_cnt = %d\n", i, hmax, tot_cnt);
 #endif
     }
 /*

Modified: trunk/src/lincity-ng/MiniMap.cpp
===================================================================
--- trunk/src/lincity-ng/MiniMap.cpp	2007-12-10 18:37:36 UTC (rev 1315)
+++ trunk/src/lincity-ng/MiniMap.cpp	2007-12-14 21:15:37 UTC (rev 1316)
@@ -678,6 +678,7 @@
             else
                 return makeGrey(getColorNormal(x,y));
         case UB40: {
+//#define DEBUG_ALTITUDE
 #ifdef DEBUG_ALTITUDE
             // show ground altitude :-)
             int alt=ground[x][y].altitude;

Modified: trunk/src/lincity-ng/ScreenInterface.cpp
===================================================================
--- trunk/src/lincity-ng/ScreenInterface.cpp	2007-12-10 18:37:36 UTC (rev 1315)
+++ trunk/src/lincity-ng/ScreenInterface.cpp	2007-12-14 21:15:37 UTC (rev 1316)
@@ -301,6 +301,7 @@
 {
     (void) title;
     (void) percent;
+#define DEBUG_PROGBOX
 #ifdef DEBUG_PROGBOX
     std::ostringstream text;
     text << "prog_box:'" << title << "' " << percent << "%\n";



From alainb at mail.berlios.de  Sat Dec 15 23:12:18 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sat, 15 Dec 2007 23:12:18 +0100
Subject: [Lincity-ng-commit] r1317 - in trunk: . src/lincity
	src/lincity/modules
Message-ID: <200712152212.lBFMCICl014572@sheep.berlios.de>

Author: alainb
Date: 2007-12-15 23:12:16 +0100 (Sat, 15 Dec 2007)
New Revision: 1317

Added:
   trunk/src/lincity/loadsave.cpp
Modified:
   trunk/README-WaterWell
   trunk/src/lincity/engine.cpp
   trunk/src/lincity/ldsvguts.cpp
   trunk/src/lincity/lintypes.h
   trunk/src/lincity/modules/blacksmith.cpp
   trunk/src/lincity/modules/commune.cpp
   trunk/src/lincity/modules/cricket.cpp
   trunk/src/lincity/modules/fire.cpp
   trunk/src/lincity/modules/firestation.cpp
   trunk/src/lincity/modules/heavy_industry.cpp
   trunk/src/lincity/modules/light_industry.cpp
   trunk/src/lincity/modules/mill.cpp
   trunk/src/lincity/modules/pottery.cpp
   trunk/src/lincity/modules/residence.cpp
   trunk/src/lincity/modules/rocket_pad.cpp
   trunk/src/lincity/modules/windmill.cpp
   trunk/src/lincity/simulate.cpp
Log:
half done new loadsave.cpp (not used yet)

Modified: trunk/README-WaterWell
===================================================================
--- trunk/README-WaterWell	2007-12-14 21:15:37 UTC (rev 1316)
+++ trunk/README-WaterWell	2007-12-15 22:12:16 UTC (rev 1317)
@@ -73,23 +73,14 @@
 code. They are written here instead of somewhere else, but maybe they will just be forgotten
 or go in the wiki.
 
-* initialise with srand (time) and add command line option --seed (easier debugging)
-
-* random village is placed near water in original lincity :) 
-  (see src/lincity/simulate.cpp random_start)
-
-* Code contains obsolete stuff from old lincity (eg .csi references ...). Maybe a clean up should
- be considered, but that can be a big job with compatibility issues.
- (so in another branch, and later as far as i m concerned :-)
-
 * separation of engine and graphics is rather good
    - additional data structure could be useful
-        map += group_xyz_no_credit + underground missing stuff + empty slots for future improvements.
    - a building gives: tech at build time, average state (needs %, production %) during last period
    - the drawing modules uses the info to choose correct tile, and manage looping for
                 cleaner animation (currently fast speed skip frames => weird animation).
 
-* With market range, everything can already jump accross rivers.
+* Within market range, everything can already jump accross rivers.
+
 * rivers are ready for transport: in lin-city.h  
   #define MAX_FOOD_ON_RIVER (MAX_FOOD_ON_TRACK*2)
   #define MAX_JOBS_ON_RIVER (MAX_JOBS_ON_TRACK*2)

Modified: trunk/src/lincity/engine.cpp
===================================================================
--- trunk/src/lincity/engine.cpp	2007-12-14 21:15:37 UTC (rev 1316)
+++ trunk/src/lincity/engine.cpp	2007-12-15 22:12:16 UTC (rev 1317)
@@ -259,6 +259,10 @@
         return -1000;
     }
 
+    MP_DATE(x,y) = total_time;
+    MP_TECH(x,y) = tech_level;
+    MP_ANIM(x,y) = real_time;
+
     size = main_groups[group].size;
     if (last_warning_message_group != group)
         msg = true;
@@ -279,11 +283,11 @@
     case GROUP_RESIDENCE_LL:
         /* all residences are treated. local variable 'group' is redefined to do so.*/
         /* int_2 is date of last starvation. Needed for correct display */
-        MP_INFO(x, y).int_2 = total_time;
+        MP_INFO(x, y).int_2 = MP_DATE(x,y);
         break;
 
     case GROUP_ORGANIC_FARM:
-        MP_INFO(x, y).int_1 = tech_level;
+        MP_INFO(x, y).int_1 = MP_TECH(x,y);
         break;
 
     case GROUP_TRACK:
@@ -301,7 +305,7 @@
 
     case GROUP_WINDMILL:
         add_a_substation (x, y);
-        MP_INFO(x, y).int_2 = tech_level;
+        MP_INFO(x, y).int_2 = MP_TECH(x,y);
         MP_INFO(x, y).int_1 = (int)(WINDMILL_POWER + (((double)MP_INFO(x, y).int_2 * WINDMILL_POWER) / MAX_TECH_LEVEL));
         /* Make sure that the correct windmill graphic shows up */
         if (tech_level > MODERN_WINDMILL_TECH)
@@ -311,13 +315,13 @@
         break;
 
     case (GROUP_COAL_POWER):
-        MP_INFO(x, y).int_4 = tech_level;
+        MP_INFO(x, y).int_4 = MP_TECH(x,y);
         MP_INFO(x, y).int_1 = (int)(POWERS_COAL_OUTPUT + (((double)MP_INFO(x, y).int_4 * POWERS_COAL_OUTPUT)
                                                           / MAX_TECH_LEVEL));
         break;
 
     case (GROUP_SOLAR_POWER):
-        MP_INFO(x, y).int_2 = tech_level;
+        MP_INFO(x, y).int_2 = MP_TECH(x,y);
         MP_INFO(x, y).int_1 = (int)(POWERS_SOLAR_OUTPUT + (((double)MP_INFO(x, y).int_2 * POWERS_SOLAR_OUTPUT)
                                                            / MAX_TECH_LEVEL));  /* like other power sources */
         MP_INFO(x, y).int_3 = MP_INFO(x, y).int_1;      /* Int_3 is kept for compatibility */
@@ -336,7 +340,7 @@
         break;
 
     case GROUP_RECYCLE:
-        MP_INFO(x, y).int_4 = tech_level;
+        MP_INFO(x, y).int_4 = MP_TECH(x,y);
         break;
 
     case GROUP_TIP:

Modified: trunk/src/lincity/ldsvguts.cpp
===================================================================
--- trunk/src/lincity/ldsvguts.cpp	2007-12-14 21:15:37 UTC (rev 1316)
+++ trunk/src/lincity/ldsvguts.cpp	2007-12-15 22:12:16 UTC (rev 1317)
@@ -723,37 +723,43 @@
 void reset_animation_times(void)
 {
     int x, y;
+
     for (y = 0; y < WORLD_SIDE_LEN; y++)
         for (x = 0; x < WORLD_SIDE_LEN; x++) {
-            if (MP_GROUP_IS_RESIDENCE(x, y))
+            MP_ANIM(x,y) = 0;
+            if (MP_GROUP(x, y) == GROUP_FIRE)
                 MP_INFO(x, y).int_3 = 0;
+        }
+
+         /*   if (MP_GROUP_IS_RESIDENCE(x, y))
+                MP_INFO(x, y).int_3 = 0;//
             else if (MP_GROUP(x, y) == GROUP_WINDMILL)
-                MP_INFO(x, y).int_4 = 0;
+                MP_INFO(x, y).int_4 = 0;//
             else if (MP_GROUP(x, y) == GROUP_BLACKSMITH)
-                MP_INFO(x, y).int_4 = 0;
+                MP_INFO(x, y).int_4 = 0;//
             else if (MP_GROUP(x, y) == GROUP_MILL)
-                MP_INFO(x, y).int_4 = 0;
+                MP_INFO(x, y).int_4 = 0;//
             else if (MP_GROUP(x, y) == GROUP_POTTERY)
-                MP_INFO(x, y).int_4 = 0;
+                MP_INFO(x, y).int_4 = 0;//
             else if (MP_GROUP(x, y) == GROUP_CRICKET)
-                MP_INFO(x, y).int_4 = 0;
+                MP_INFO(x, y).int_4 = 0;//
             else if (MP_GROUP(x, y) == GROUP_FIRESTATION)
-                MP_INFO(x, y).int_4 = 0;
+                MP_INFO(x, y).int_4 = 0;//
             else if (MP_GROUP(x, y) == GROUP_FIRE) {
-                MP_INFO(x, y).int_1 = 0;
+                MP_INFO(x, y).int_1 = 0;//
                 MP_INFO(x, y).int_3 = 0;
             } else if (MP_GROUP(x, y) == GROUP_COMMUNE)
-                MP_INFO(x, y).int_1 = 0;
+                MP_INFO(x, y).int_1 = 0;//
             else if (MP_GROUP(x, y) == GROUP_ROCKET)
-                MP_INFO(x, y).int_5 = 0;
+                MP_INFO(x, y).int_5 = 0;//
             else if (MP_GROUP(x, y) == GROUP_INDUSTRY_H)
-                MP_INFO(x, y).int_6 = 0;
+                MP_INFO(x, y).int_6 = 0;//
             else if (MP_GROUP(x, y) == GROUP_INDUSTRY_L)
-                MP_INFO(x, y).int_7 = 0;
-        }
+                MP_INFO(x, y).int_7 = 0;//
+        }*/
 }
 
-                                              /* Returns 1 if the city is proper version *//* AL1 unused in NG 1.1 */
+/* Returns 1 if the city is proper version *//* FIXME: AL1 unused in NG 1.1 */
 int verify_city(char *cname)
 {
     gzFile fp;
@@ -785,6 +791,7 @@
 #ifdef MP_SANITY_CHECK
 void sanity_check(void)
 {
+    //FIXME: AL1 unused in NG 1.1.2
     static int flag = 0;
     int x, y, xx, yy;
     for (x = 0; x < WORLD_SIDE_LEN; x++)

Modified: trunk/src/lincity/lintypes.h
===================================================================
--- trunk/src/lincity/lintypes.h	2007-12-14 21:15:37 UTC (rev 1316)
+++ trunk/src/lincity/lintypes.h	2007-12-15 22:12:16 UTC (rev 1317)
@@ -67,6 +67,11 @@
     short group[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
     int pollution[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
     Map_Point_Info info[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
+    int date[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
+    int tech[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
+    int anim[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
+    int im_index[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
+    int activity[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
 };
 typedef struct map_struct Map;
 
@@ -75,6 +80,9 @@
 #define MP_GROUP(x,y)  map.group[x][y]
 #define MP_POL(x,y)    map.pollution[x][y]
 #define MP_INFO(x,y)   map.info[x][y]
+#define MP_DATE(x,y)   map.date[x][y]
+#define MP_TECH(x,y)   map.tech[x][y]
+#define MP_ANIM(x,y)   map.anim[x][y]
 
 #define MP_SIZE(x,y)   main_groups[MP_GROUP(x,y)].size
 #define MP_COLOR(x,y)  main_groups[MP_GROUP(x,y)].colour
@@ -93,7 +101,7 @@
     int int1;           //reserved for future (?) use
     int int2;
     int int3;
-    int int4;           //used as tmp in setup_ground
+    int int4;           //used as tmp in setup_ground  //FIXME : this is too ugly 
 };
 #define ALT(x,y) ground[x][y].altitude
 

Added: trunk/src/lincity/loadsave.cpp
===================================================================
--- trunk/src/lincity/loadsave.cpp	2007-12-14 21:15:37 UTC (rev 1316)
+++ trunk/src/lincity/loadsave.cpp	2007-12-15 22:12:16 UTC (rev 1317)
@@ -0,0 +1,538 @@
+/* ---------------------------------------------------------------------- *
+ * ldsvguts.c
+ * This file is part of lincity.
+ * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
+ * ---------------------------------------------------------------------- */
+
+/* this is for saving */
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <zlib.h>
+#include <iostream>
+#include "tinygettext/gettext.hpp"
+#include "gui_interface/screen_interface.h"
+#include "gui_interface/shared_globals.h"
+#include "stats.h"
+
+#include <fcntl.h>
+#include <sys/types.h>
+
+#if defined (TIME_WITH_SYS_TIME)
+#include <time.h>
+#include <sys/time.h>
+#else
+#if defined (HAVE_SYS_TIME_H)
+#include <sys/time.h>
+#else
+#include <time.h>
+#endif
+#endif
+
+#include <cstdlib>
+#include <string.h>
+#include <math.h>
+/*
+#if defined (WIN32)
+#include <winsock.h>
+#include <io.h>
+#include <direct.h>
+#include <process.h>
+#endif
+*/
+#ifdef __EMX__
+#define chown(x,y,z)
+#endif
+
+#if defined (HAVE_DIRENT_H)
+#include <dirent.h>
+#define NAMLEN(dirent) strlen((dirent)->d_name)
+#else
+#define dirent direct
+#define NAMLEN(dirent) (dirent)->d_namlen
+#if defined (HAVE_SYS_NDIR_H)
+#include <sys/ndir.h>
+#endif
+#if defined (HAVE_SYS_DIR_H)
+#include <sys/dir.h>
+#endif
+#if defined (HAVE_NDIR_H)
+#include <ndir.h>
+#endif
+#endif
+
+#include <ctype.h>
+//#include "common.h"
+/*
+#ifdef LC_X11
+#include <X11/cursorfont.h>
+#endif
+*/
+#include "lctypes.h"
+#include "lin-city.h"
+#include "engglobs.h"
+#include "fileutil.h"
+#include "power.h"
+#include "gui_interface/pbar_interface.h"
+#include "lincity-ng/ErrorInterface.hpp"
+#include "stats.h"
+#include "ldsvguts.h"
+
+#if defined (WIN32) && !defined (NDEBUG)
+#define START_FAST_SPEED 1
+#define SKIP_OPENING_SCENE 1
+#endif
+
+#define SI_BLACK 252
+#define SI_RED 253
+#define SI_GREEN 254
+#define SI_YELLOW 255
+
+#define MP_SANITY_CHECK 1
+
+/* Extern resources */
+extern int yn_dial_box(const char *, const char *, const char *, const char *);
+extern void ok_dial_box(const char *, int, const char *);
+extern void prog_box(const char *, int);
+
+extern void print_total_money(void);
+extern int count_groups(int);
+extern void upgrade_to_v2(void);
+
+/* ---------------------------------------------------------------------- *
+ * Public functions
+ * ---------------------------------------------------------------------- */
+void save_city_2(char *cname)
+{
+    int x, y, p;
+    int dumbint = 0;
+    gzFile ofile = gzopen(cname, "wb");
+    if (ofile == NULL) {
+        printf(_("Save file <%s> - "), cname);
+        do_error(_("Can't open save file!"));
+    }
+    /* Now we have upgraded game */
+    ldsv_version = WATERWELL_V2;
+    gzprintf(ofile, "%d\n", ldsv_version);
+
+    for (x = 0; x < WORLD_SIDE_LEN; x++)
+        for (y = 0; y < WORLD_SIDE_LEN; y++) {
+            /*               TY po fl cr or i1 i2 i3 i4 i5 i6 i7 PL al ec ws gp wa wp ww wn g1 g2 g3 g4 DA TK AN d4 d5 d6 d7 d8 d9 */
+            gzprintf(ofile, "%d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d\n" 
+                       , MP_TYPE(x, y)
+                       , MP_INFO(x, y).population
+                       , MP_INFO(x, y).flags
+                       , MP_INFO(x, y).coal_reserve
+                       , MP_INFO(x, y).ore_reserve
+                       , MP_INFO(x, y).int_1
+                       , MP_INFO(x, y).int_2
+                       , MP_INFO(x, y).int_3
+                       , MP_INFO(x, y).int_4
+                       , MP_INFO(x, y).int_5
+                       , MP_INFO(x, y).int_6
+                       , MP_INFO(x, y).int_7
+                       , MP_POL(x, y)
+                       , ground[x][y].altitude
+                       , ground[x][y].ecotable
+                       , ground[x][y].wastes
+                       , ground[x][y].pollution
+                       , ground[x][y].water_alt
+                       , ground[x][y].water_pol
+                       , ground[x][y].water_wast
+                       , ground[x][y].water_next
+                       , ground[x][y].int1
+                       , ground[x][y].int2
+                       , ground[x][y].int3
+                       , ground[x][y].int4
+                       , MP_DATE(x,y)   // d1 = date of built
+                       , MP_TECH(x,y)   // d2 = tech at build time
+                       , MP_ANIM(x,y)   // d3 = animation_time (see reset_animation_time mess :)
+                       , dumbint        // d4  could be         image index for smooth animation, cf windmill anim_tile
+                       , dumbint        // d5                   percentage of activity to choose family of pic
+                       , dumbint        // d6
+                       , dumbint        // d7
+                       , dumbint        // d8
+                       , dumbint        // d9
+                       );
+        }
+
+    gzprintf(ofile, "%d\n", main_screen_originx);
+    gzprintf(ofile, "%d\n", main_screen_originy);
+
+    gzprintf(ofile, "%d\n", total_time);
+    for (x = 0; x < MAX_NUMOF_SUBSTATIONS; x++) {
+        gzprintf(ofile, "%d\n", substationx[x]);
+        gzprintf(ofile, "%d\n", substationy[x]);
+    }
+    gzprintf(ofile, "%d\n", numof_substations);
+    for (x = 0; x < MAX_NUMOF_MARKETS; x++) {
+        gzprintf(ofile, "%d\n", marketx[x]);
+        gzprintf(ofile, "%d\n", markety[x]);
+    }
+    gzprintf(ofile, "%d\n", numof_markets);
+    gzprintf(ofile, "%d\n", people_pool);
+    gzprintf(ofile, "%o\n", total_money);
+    gzprintf(ofile, "%d\n", income_tax_rate);
+    gzprintf(ofile, "%d\n", coal_tax_rate);
+    gzprintf(ofile, "%d\n", dole_rate);
+    gzprintf(ofile, "%d\n", transport_cost_rate);
+    gzprintf(ofile, "%d\n", goods_tax_rate);
+    gzprintf(ofile, "%d\n", export_tax);
+    gzprintf(ofile, "%d\n", export_tax_rate);
+    gzprintf(ofile, "%d\n", import_cost);
+    gzprintf(ofile, "%d\n", import_cost_rate);
+    gzprintf(ofile, "%d\n", tech_level);
+    gzprintf(ofile, "%d\n", tpopulation);
+    gzprintf(ofile, "%d\n", tstarving_population);
+    gzprintf(ofile, "%d\n", tunemployed_population);
+    gzprintf(ofile, "%d\n", 0); /* waste_goods is obsolete */
+    gzprintf(ofile, "%d\n", power_made);
+    gzprintf(ofile, "%d\n", power_used);
+    gzprintf(ofile, "%d\n", coal_made);
+    gzprintf(ofile, "%d\n", coal_used);
+    gzprintf(ofile, "%d\n", goods_made);
+    gzprintf(ofile, "%d\n", goods_used);
+    gzprintf(ofile, "%d\n", ore_made);
+    gzprintf(ofile, "%d\n", ore_used);
+    gzprintf(ofile, "%d\n", 0); /* Removed diff_old_population, version 1.12 */
+
+    /* Changed, version 1.12 */
+    gzprintf(ofile, "%d\n", monthgraph_size);
+    for (x = 0; x < monthgraph_size; x++) {
+        gzprintf(ofile, "%d\n", monthgraph_pop[x]);
+        gzprintf(ofile, "%d\n", monthgraph_starve[x]);
+        gzprintf(ofile, "%d\n", monthgraph_nojobs[x]);
+        gzprintf(ofile, "%d\n", monthgraph_ppool[x]);
+    }
+    gzprintf(ofile, "%d\n", rockets_launched);
+    gzprintf(ofile, "%d\n", rockets_launched_success);
+    gzprintf(ofile, "%d\n", coal_survey_done);
+
+    for (x = 0; x < PBAR_DATA_SIZE; x++)
+        for (p = 0; p < NUM_PBARS; p++)
+            gzprintf(ofile, "%d\n", pbars[p].data[x]);
+
+    for (p = 0; p < NUM_PBARS; p++) {
+        gzprintf(ofile, "%d\n", pbars[p].oldtot);
+        gzprintf(ofile, "%d\n", pbars[p].diff);
+    }
+
+    gzprintf(ofile, "%d\n", cheat_flag);
+    gzprintf(ofile, "%d\n", total_pollution_deaths);
+    gzprintf(ofile, "%f\n", pollution_deaths_history);
+    gzprintf(ofile, "%d\n", total_starve_deaths);
+    gzprintf(ofile, "%f\n", starve_deaths_history);
+    gzprintf(ofile, "%d\n", total_unemployed_years);
+    gzprintf(ofile, "%f\n", unemployed_history);
+    gzprintf(ofile, "%d\n", max_pop_ever);
+    gzprintf(ofile, "%d\n", total_evacuated);
+    gzprintf(ofile, "%d\n", total_births);
+
+    for (x = 0; x < NUMOF_MODULES; x++)
+        gzprintf(ofile, "%d\n", module_help_flag[x]);
+    gzprintf(ofile, "%d\n", 0); /* dummy values */
+
+    gzprintf(ofile, "%d\n", 0); /* backward compatibility */
+
+    if (strlen(given_scene) > 1)
+        gzprintf(ofile, "%s\n", given_scene);
+    else
+        gzprintf(ofile, "dummy\n");     /* 1 */
+
+    gzprintf(ofile, "%d\n", highest_tech_level);        /* 2 */
+
+    gzprintf(ofile, "sust %d %d %d %d %d %d %d %d %d %d\n", sust_dig_ore_coal_count, sust_port_count, sust_old_money_count, sust_old_population_count, sust_old_tech_count, sust_fire_count, sust_old_money, sust_old_population, sust_old_tech, sustain_flag); /* 3 */
+
+    gzprintf(ofile, "arid %d %d\n", global_aridity, global_mountainity); /* 4 */
+
+    gzprintf(ofile, "dummy\n"); /* 5 */
+
+    gzprintf(ofile, "dummy\n"); /* 6 */
+
+    gzprintf(ofile, "dummy\n"); /* 7 */
+
+    gzprintf(ofile, "dummy\n"); /* 8 */
+
+    gzprintf(ofile, "dummy\n"); /* 9 */
+
+    gzprintf(ofile, "dummy\n"); /* 10 */
+
+    gzclose(ofile);
+}
+
+void load_city_2(char *cname)
+{
+    int i, x, y, p;
+    int dumbint = 0;
+    int num_pbars, pbar_data_size;
+    int pbar_tmp;
+    int dummy;
+    gzFile gzfile;
+    char s[512];
+
+    gzfile = gzopen(cname, "rb");
+    if (gzfile == NULL) {
+        printf(_("Can't open <%s> (gzipped)"), cname);
+        do_error("Can't open it!");
+    }
+
+    sscanf(gzgets(gzfile, s, 256), "%d", &ldsv_version);
+    if (ldsv_version < WATERWELL_V2) {
+        ok_dial_box("too-old.mes", BAD, 0L); //FIXME: AL1 i guess this will crash as screen is not set */
+        gzclose(gzfile);
+        return;
+    }
+
+    fprintf(stderr, " ldsv_version = %i \n", ldsv_version);
+    use_waterwell = true;
+
+    init_pbars();
+    num_pbars = NUM_PBARS;
+    pbar_data_size = PBAR_DATA_SIZE;
+
+    init_inventory();
+    print_time_for_year();
+
+    // Easier debugging from saved game: #Line = 100 x + y + 1  (first line = ldsv_version)
+    for (x = 0; x < WORLD_SIDE_LEN; x++) {
+        for (y = 0; y < WORLD_SIDE_LEN; y++) {
+            //                              TY po fl cr or i1 i2 i3 i4 i5 i6 i7 PL al ec ws gp wa wp ww wn g1 g2 g3 g4 DA TK AN d4 d5 d6 d7 d8 d9
+            sscanf(gzgets(gzfile, s, 512), "%d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d"
+                    , &MP_TYPE(x, y)
+                    , &MP_INFO(x, y).population
+                    , &MP_INFO(x, y).flags
+                    , &MP_INFO(x, y).coal_reserve
+                    , &MP_INFO(x, y).ore_reserve
+                    , &MP_INFO(x, y).int_1
+                    , &MP_INFO(x, y).int_2
+                    , &MP_INFO(x, y).int_3
+                    , &MP_INFO(x, y).int_4
+                    , &MP_INFO(x, y).int_5
+                    , &MP_INFO(x, y).int_6
+                    , &MP_INFO(x, y).int_7
+                    , &MP_POL(x, y)
+                    , &ground[x][y].altitude
+                    , &ground[x][y].ecotable
+                    , &ground[x][y].wastes
+                    , &ground[x][y].pollution
+                    , &ground[x][y].water_alt
+                    , &ground[x][y].water_pol
+                    , &ground[x][y].water_wast
+                    , &ground[x][y].water_next
+                    , &ground[x][y].int1
+                    , &ground[x][y].int2
+                    , &ground[x][y].int3
+                    , &ground[x][y].int4
+                    , &MP_DATE(x,y)   // d1 = date of built
+                    , &MP_TECH(x,y)   // d2 = tech at build time
+                    , &MP_ANIM(x,y)   // d3 = animation_time (see reset_animation_time mess :)
+                    , &dumbint        // d4  could be         image index for smooth animation, cf windmill anim_tile
+                    , &dumbint        // d5                   percentage of activity to choose family of pic
+                    , &dumbint        // d6
+                    , &dumbint        // d7
+                    , &dumbint        // d8
+                    , &dumbint        // d9
+                    );
+            if (get_group_of_type(MP_TYPE(x, y)) == GROUP_MARKET)
+                inventory(x, y);
+        }
+    }
+    set_map_groups();
+
+    sscanf(gzgets(gzfile, s, 256), "%d", &main_screen_originx);
+    sscanf(gzgets(gzfile, s, 256), "%d", &main_screen_originy);
+
+    sscanf(gzgets(gzfile, s, 256), "%d", &total_time);
+    if (ldsv_version <= MM_MS_C_VER)
+        i = OLD_MAX_NUMOF_SUBSTATIONS;
+    else
+        i = MAX_NUMOF_SUBSTATIONS;
+    for (x = 0; x < i; x++) {
+        sscanf(gzgets(gzfile, s, 256), "%d", &substationx[x]);
+        sscanf(gzgets(gzfile, s, 256), "%d", &substationy[x]);
+    }
+    sscanf(gzgets(gzfile, s, 256), "%d", &numof_substations);
+    if (ldsv_version <= MM_MS_C_VER)
+        i = OLD_MAX_NUMOF_MARKETS;
+    else
+        i = MAX_NUMOF_MARKETS;
+    for (x = 0; x < i; x++) {
+        sscanf(gzgets(gzfile, s, 256), "%d", &marketx[x]);
+        sscanf(gzgets(gzfile, s, 256), "%d", &markety[x]);
+    }
+    sscanf(gzgets(gzfile, s, 256), "%d", &numof_markets);
+    sscanf(gzgets(gzfile, s, 256), "%d", &people_pool);
+    sscanf(gzgets(gzfile, s, 256), "%o", &total_money);
+    sscanf(gzgets(gzfile, s, 256), "%d", &income_tax_rate);
+    sscanf(gzgets(gzfile, s, 256), "%d", &coal_tax_rate);
+    sscanf(gzgets(gzfile, s, 256), "%d", &dole_rate);
+    sscanf(gzgets(gzfile, s, 256), "%d", &transport_cost_rate);
+    sscanf(gzgets(gzfile, s, 256), "%d", &goods_tax_rate);
+    sscanf(gzgets(gzfile, s, 256), "%d", &export_tax);
+    sscanf(gzgets(gzfile, s, 256), "%d", &export_tax_rate);
+    sscanf(gzgets(gzfile, s, 256), "%d", &import_cost);
+    sscanf(gzgets(gzfile, s, 256), "%d", &import_cost_rate);
+    sscanf(gzgets(gzfile, s, 256), "%d", &tech_level);
+    sscanf(gzgets(gzfile, s, 256), "%d", &tpopulation);
+    sscanf(gzgets(gzfile, s, 256), "%d", &tstarving_population);
+    sscanf(gzgets(gzfile, s, 256), "%d", &tunemployed_population);
+    sscanf(gzgets(gzfile, s, 256), "%d", &x);   /* waste_goods obsolete */
+    sscanf(gzgets(gzfile, s, 256), "%d", &power_made);
+    sscanf(gzgets(gzfile, s, 256), "%d", &power_used);
+    sscanf(gzgets(gzfile, s, 256), "%d", &coal_made);
+    sscanf(gzgets(gzfile, s, 256), "%d", &coal_used);
+    sscanf(gzgets(gzfile, s, 256), "%d", &goods_made);
+    sscanf(gzgets(gzfile, s, 256), "%d", &goods_used);
+    sscanf(gzgets(gzfile, s, 256), "%d", &ore_made);
+    sscanf(gzgets(gzfile, s, 256), "%d", &ore_used);
+    sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diff_old_population */
+
+    /* Update variables calculated from those above */
+    housed_population = tpopulation / NUMOF_DAYS_IN_MONTH;
+
+    /* Get size of monthgraph array */
+    if (ldsv_version <= MG_C_VER) {
+        i = 120;
+    } else {
+        sscanf(gzgets(gzfile, s, 256), "%d", &i);
+    }
+    for (x = 0; x < i; x++) {
+        /* If more entries in file than will fit on screen, 
+           then we need to skip past them. */
+        if (x >= monthgraph_size) {
+            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &monthgraph_pop[x] */
+            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &monthgraph_starve[x] */
+            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &monthgraph_nojobs[x] */
+            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &monthgraph_ppool[x] */
+        } else {
+            sscanf(gzgets(gzfile, s, 256), "%d", &monthgraph_pop[x]);
+            sscanf(gzgets(gzfile, s, 256), "%d", &monthgraph_starve[x]);
+            sscanf(gzgets(gzfile, s, 256), "%d", &monthgraph_nojobs[x]);
+            sscanf(gzgets(gzfile, s, 256), "%d", &monthgraph_ppool[x]);
+        }
+        /* If our save file is old, skip past obsolete diffgraph entries */
+        if (ldsv_version <= MG_C_VER) {
+            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_power[x] */
+            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_coal[x] */
+            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_goods[x] */
+            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_ore[x] */
+            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_population[x] */
+        }
+    }
+    /* If screen bigger than number of entries in file, pad with zeroes */
+    while (x < monthgraph_size) {
+        monthgraph_pop[x] = 0;
+        monthgraph_starve[x] = 0;
+        monthgraph_nojobs[x] = 0;
+        monthgraph_ppool[x] = 0;
+        x++;
+    }
+    sscanf(gzgets(gzfile, s, 256), "%d", &rockets_launched);
+    sscanf(gzgets(gzfile, s, 256), "%d", &rockets_launched_success);
+    sscanf(gzgets(gzfile, s, 256), "%d", &coal_survey_done);
+
+    for (x = 0; x < pbar_data_size; x++) {
+        for (p = 0; p < num_pbars; p++) {
+            sscanf(gzgets(gzfile, s, 256), "%d", &(pbar_tmp));
+            update_pbar(p, pbar_tmp, 1);
+/*	    sscanf( gzgets( gzfile, s, 256 ), "%d", &(pbars[p].data[x])); */
+        }
+    }
+
+    for (p = 0; p < num_pbars; p++)
+        pbars[p].data_size = pbar_data_size;
+
+    for (p = 0; p < num_pbars; p++) {
+        sscanf(gzgets(gzfile, s, 256), "%d", &(pbars[p].oldtot));
+        sscanf(gzgets(gzfile, s, 256), "%d", &(pbars[p].diff));
+    }
+
+    sscanf(gzgets(gzfile, s, 256), "%d", &cheat_flag);
+    sscanf(gzgets(gzfile, s, 256), "%d", &total_pollution_deaths);
+    sscanf(gzgets(gzfile, s, 256), "%f", &pollution_deaths_history);
+    sscanf(gzgets(gzfile, s, 256), "%d", &total_starve_deaths);
+    sscanf(gzgets(gzfile, s, 256), "%f", &starve_deaths_history);
+    sscanf(gzgets(gzfile, s, 256), "%d", &total_unemployed_years);
+    sscanf(gzgets(gzfile, s, 256), "%f", &unemployed_history);
+    sscanf(gzgets(gzfile, s, 256), "%d", &max_pop_ever);
+    sscanf(gzgets(gzfile, s, 256), "%d", &total_evacuated);
+    sscanf(gzgets(gzfile, s, 256), "%d", &total_births);
+    for (x = 0; x < NUMOF_MODULES; x++)
+        sscanf(gzgets(gzfile, s, 256), "%d", &(module_help_flag[x]));
+    sscanf(gzgets(gzfile, s, 256), "%d", &x);   /* just dummy reads */
+    sscanf(gzgets(gzfile, s, 256), "%d", &x);   /* for backwards compatibility. */
+
+    sscanf(gzgets(gzfile, s, 256), "%128s", given_scene);
+    if (strncmp(given_scene, "dummy", 5) == 0 || strlen(given_scene) < 3)
+        given_scene[0] = 0;
+    sscanf(gzgets(gzfile, s, 256), "%128s", s);
+    if (strncmp(given_scene, "dummy", 5) != 0)
+        sscanf(s, "%d", &highest_tech_level);
+    else
+        highest_tech_level = 0;
+
+    gzgets(gzfile, s, 80);   
+    if (sscanf
+        (s, "sust %d %d %d %d %d %d %d %d %d %d", &sust_dig_ore_coal_count, &sust_port_count, &sust_old_money_count,
+         &sust_old_population_count, &sust_old_tech_count, &sust_fire_count, &sust_old_money, &sust_old_population,
+         &sust_old_tech, &sustain_flag) == 10) {
+        sust_dig_ore_coal_tip_flag = sust_port_flag = 1;
+    } else
+        sustain_flag = sust_dig_ore_coal_count = sust_port_count
+            = sust_old_money_count = sust_old_population_count
+            = sust_old_tech_count = sust_fire_count = sust_old_money = sust_old_population = sust_old_tech = 0;
+
+    gzgets(gzfile, s, 80);
+    sscanf(s, "arid %d %d", &global_aridity, &global_mountainity);
+
+    gzclose(gzfile);
+
+    /* FIXME: AL1 this is initialisation stuff, should go elsewhere */
+
+    // Engine stuff
+    if (tech_level > MODERN_WINDMILL_TECH)
+        modern_windmill_flag = 1;
+
+    numof_shanties = count_groups(GROUP_SHANTY);
+    numof_communes = count_groups(GROUP_COMMUNE);
+
+    /* set up the university intake. */
+    x = count_groups(GROUP_UNIVERSITY);
+    if (x > 0) {
+        university_intake_rate = (count_groups(GROUP_SCHOOL) * 20) / x;
+        if (university_intake_rate > 100)
+            university_intake_rate = 100;
+    } else
+        university_intake_rate = 50;
+
+    print_total_money();
+
+    //reset_animation_times
+    for ( y = 0; y < WORLD_SIDE_LEN; y++)
+        for ( x = 0; x < WORLD_SIDE_LEN; x++) {
+            MP_ANIM(x,y) = 0;
+            if (MP_GROUP(x, y) == GROUP_FIRE)
+                MP_INFO(x, y).int_3 = 0;
+        }
+
+    map_power_grid(true);       /* WCK:  Is this safe to do here?
+                                 * AL1: No, in NG_1.1
+                                 * In case of error message with ok_dial_box
+                                 *    the dialog cannot appear because the screen
+                                 *    is not set up => crash.
+                                 * FIXME: move all initialisation elsewhere, in 
+                                 *    engine.cpp or simulate.cpp.
+                                 */
+    // UI stuff
+    if (main_screen_originx > WORLD_SIDE_LEN - getMainWindowWidth() / 16 - 1)
+        main_screen_originx = WORLD_SIDE_LEN - getMainWindowWidth() / 16 - 1;
+
+    if (main_screen_originy > WORLD_SIDE_LEN - getMainWindowHeight() / 16 - 1)
+        main_screen_originy = WORLD_SIDE_LEN - getMainWindowHeight() / 16 - 1;
+
+    unhighlight_module_button(selected_module);
+    selected_module = sbut[7];  /* 7 is track.  Watch out though! */
+    highlight_module_button(selected_module);
+    set_selected_module(CST_TRACK_LR);
+}
+

Modified: trunk/src/lincity/modules/blacksmith.cpp
===================================================================
--- trunk/src/lincity/modules/blacksmith.cpp	2007-12-14 21:15:37 UTC (rev 1316)
+++ trunk/src/lincity/modules/blacksmith.cpp	2007-12-15 22:12:16 UTC (rev 1317)
@@ -15,7 +15,7 @@
        // int_1 contains the goods at the blacksmith
        // int_2 contains the goods made - for the animation
        // int_3 contains the coal store
-       // int_4 is the animation trigger time
+       // int_4 is the animation trigger time == MP_ANIM(x,y) since 1.91
        // int_5 is the % made so far this month
        // int_6 is the % capacity last month
        // int_7 contains the jobs stored at the blacksmith

Modified: trunk/src/lincity/modules/commune.cpp
===================================================================
--- trunk/src/lincity/modules/commune.cpp	2007-12-14 21:15:37 UTC (rev 1316)
+++ trunk/src/lincity/modules/commune.cpp	2007-12-15 22:12:16 UTC (rev 1317)
@@ -13,7 +13,7 @@
 void do_commune(int x, int y)
 {
     /*
-       // int_1 is the animation trigger time
+       // int_1 is the animation trigger time  == MP_ANIM(x,y) since 1.91
        // int_2 is the steelflag/trackflag
        // int_3 is the coal sold in the last 100 days 200 units is 100%
        // steel adds more.

Modified: trunk/src/lincity/modules/cricket.cpp
===================================================================
--- trunk/src/lincity/modules/cricket.cpp	2007-12-14 21:15:37 UTC (rev 1316)
+++ trunk/src/lincity/modules/cricket.cpp	2007-12-15 22:12:16 UTC (rev 1317)
@@ -13,7 +13,7 @@
     /*
        // int_1 is the jobs stored at the pavillion
        // int_2 is the goods stored at the pavillion
-       // int_3 is the animation flag
+       // int_3 is the animation flag  == MP_ANIM since 1.91
        // int_4 is the time of the next frame
      */
     if (MP_INFO(x, y).int_1 < (MAX_JOBS_AT_CRICKET - CRICKET_GET_JOBS))

Modified: trunk/src/lincity/modules/fire.cpp
===================================================================
--- trunk/src/lincity/modules/fire.cpp	2007-12-14 21:15:37 UTC (rev 1316)
+++ trunk/src/lincity/modules/fire.cpp	2007-12-15 22:12:16 UTC (rev 1317)
@@ -12,7 +12,7 @@
 void do_fire(int x, int y)
 {
     /*
-       // int_1 is the next animation frame time
+       // int_1 is the next animation frame time == MP_ANIM(x,y) since 1.91
        // int_2 is the fire length
        // int_3 is the real_time before the fire can spread or -1 if triggered 
        // int_4 is the idle land length
@@ -73,10 +73,9 @@
                 break;
             }
         }
-    }
-    /* check here 'cos we can wait in the ok box for ever. */
-    else if (MP_INFO(x, y).int_3 == 0)
+    } else if (MP_INFO(x, y).int_3 == 0) {
+        /* check here 'cos we can wait in the ok box for ever. */
         MP_INFO(x, y).int_3 = real_time + 15000;        /* 15 secs seem fair */
-    else if (real_time >= MP_INFO(x, y).int_3)
+    } else if (real_time >= MP_INFO(x, y).int_3)
         MP_INFO(x, y).int_3 = -1;
 }

Modified: trunk/src/lincity/modules/firestation.cpp
===================================================================
--- trunk/src/lincity/modules/firestation.cpp	2007-12-14 21:15:37 UTC (rev 1316)
+++ trunk/src/lincity/modules/firestation.cpp	2007-12-15 22:12:16 UTC (rev 1317)
@@ -13,7 +13,7 @@
     /*
        // int_1 is the jobs stored at the fire station
        // int_2 is the goods stored at the fire station
-       // int_3 is the animation flag
+       // int_3 is the animation flag == MP_ANIM(x,y) since 1.91
        // int_4 is the time of the next frame
        // int_5 is the pause counter
      */

Modified: trunk/src/lincity/modules/heavy_industry.cpp
===================================================================
--- trunk/src/lincity/modules/heavy_industry.cpp	2007-12-14 21:15:37 UTC (rev 1316)
+++ trunk/src/lincity/modules/heavy_industry.cpp	2007-12-15 22:12:16 UTC (rev 1317)
@@ -17,7 +17,7 @@
        // int_3 is the amount of raw materials in store (ore)
        // int_4 is the coal in store
        // int_5 is the percent max production last month
-       // int_6 is the time of the next animation frame.
+       // int_6 is the time of the next animation frame. == MP_ANIM(x,y) since 1.91
        // int_7 is whether we get power from coal (1) or elsewhere (0)
      */
 

Modified: trunk/src/lincity/modules/light_industry.cpp
===================================================================
--- trunk/src/lincity/modules/light_industry.cpp	2007-12-14 21:15:37 UTC (rev 1316)
+++ trunk/src/lincity/modules/light_industry.cpp	2007-12-15 22:12:16 UTC (rev 1317)
@@ -19,7 +19,7 @@
        // int_4 is the amount of steel in store.
        // int_5 is the jobs stored.
        // int_6 is the percent of capacity last month.
-       // int 7 is the next animation frame time.
+       // int 7 is the next animation frame time. == MP_ANIM(x,y) since 1.91
      */
     /* first get some jobs */
     if (MP_INFO(x, y).int_5 < MAX_JOBS_AT_INDUSTRY_L - INDUSTRY_L_GET_JOBS) {

Modified: trunk/src/lincity/modules/mill.cpp
===================================================================
--- trunk/src/lincity/modules/mill.cpp	2007-12-14 21:15:37 UTC (rev 1316)
+++ trunk/src/lincity/modules/mill.cpp	2007-12-15 22:12:16 UTC (rev 1317)
@@ -14,7 +14,7 @@
        // int_1 contains the goods at the mill
        // int_2 contains the food store
        // int_3 contains the coal store
-       // int_4 contains the animation trigger time
+       // int_4 contains the animation trigger time == MP_ANIM(x,y) since 1.91
        // int_5 is the % count so far this month
        // int_6 is the % capacity last month
      */

Modified: trunk/src/lincity/modules/pottery.cpp
===================================================================
--- trunk/src/lincity/modules/pottery.cpp	2007-12-14 21:15:37 UTC (rev 1316)
+++ trunk/src/lincity/modules/pottery.cpp	2007-12-15 22:12:16 UTC (rev 1317)
@@ -14,7 +14,7 @@
        // int_1 contains the goods at the pottery
        // int_2 contains the ore at the pottery
        // int_3 contains the coal at the pottery
-       // int_4 is the animation trigger time
+       // int_4 is the animation trigger time == MP_ANIM(x,y) since 1.91
        // int_5 is the % made so far this month or the close time if negative
        // int_6 is the % capacity last month
        // int_7 contains the jobs stored at the pottery

Modified: trunk/src/lincity/modules/residence.cpp
===================================================================
--- trunk/src/lincity/modules/residence.cpp	2007-12-14 21:15:37 UTC (rev 1316)
+++ trunk/src/lincity/modules/residence.cpp	2007-12-15 22:12:16 UTC (rev 1317)
@@ -15,7 +15,7 @@
     /*
        // int_1 is a job swingometer to choose +/- JOB_SWING% of normal
        // int_2 is the date of the last starve
-       // int 3 is the real time for the next icon update
+       // int_3 is the real time for the next icon update  == MP_ANIM(x,y) since 1.91
        // int_4 is the birth rate modifier.
        // int_5 is the death rate modifier.
        // int_6 unused

Modified: trunk/src/lincity/modules/rocket_pad.cpp
===================================================================
--- trunk/src/lincity/modules/rocket_pad.cpp	2007-12-14 21:15:37 UTC (rev 1316)
+++ trunk/src/lincity/modules/rocket_pad.cpp	2007-12-15 22:12:16 UTC (rev 1317)
@@ -25,7 +25,7 @@
        // int_2 is the stored goods
        // int_3 is the stored steel
        // int_4 is the count which gets to ROCKET_PAD_LAUNCH to fire.
-       // int_5 is the time of the next animation frame, when waiting for launch.
+       // int_5 is the time of the next animation frame, when waiting for launch. == MP_ANIM(x,y) since 1.91
      */
     if (MP_TYPE(x, y) == CST_ROCKET_FLOWN)
         return;                 /* The rocket has been launched. */

Modified: trunk/src/lincity/modules/windmill.cpp
===================================================================
--- trunk/src/lincity/modules/windmill.cpp	2007-12-14 21:15:37 UTC (rev 1316)
+++ trunk/src/lincity/modules/windmill.cpp	2007-12-15 22:12:16 UTC (rev 1317)
@@ -11,9 +11,9 @@
 /*** Windmills ***/
 /*
   // int_1 is the rated capacity 
-  // int_2 is the tech level when built
+  // int_2 is the tech level when built == MP_TECH(x,y) since 1.91
   // int_3 is the sail count - to choose the right sail.
-  // int_4 reserved = local power demand for substations (like windmills)
+  // int_4 reserved = local power demand for substations (like substations)
   // int_5 is the power produced (basically _if_ power produced)
   // int_6 is the grid it's on
   // int_7 is a timestamp for mapping
@@ -21,7 +21,7 @@
   // Stored in (x+1, y)
   //  int_1 reserved = x
   //  int_2 reserved = y
-  //  int_3 is the last real time that a sail was turned
+  //  int_3 is the last real time that a sail was turned  == MP_ANIM(x,y) since 1.91
 */
 void do_windmill(int x, int y)
 {

Modified: trunk/src/lincity/simulate.cpp
===================================================================
--- trunk/src/lincity/simulate.cpp	2007-12-14 21:15:37 UTC (rev 1316)
+++ trunk/src/lincity/simulate.cpp	2007-12-15 22:12:16 UTC (rev 1317)
@@ -800,6 +800,8 @@
     int hmax =0;
     /* fill the corrects fields: ground[x][y).stuff, global_aridity, global_mountainity */
     /* currently only dummy things in order to compile */
+
+    /* FIXME: AL1 i did it ugly: should not use ground struct for tmp */
 #define TMP(x,y) ground[x][y].int4
 
     for (x = 1; x < WORLD_SIDE_LEN - 1; x++) {
@@ -855,20 +857,8 @@
         fprintf(stderr," i= %2d, alt max = %d, tot_cnt = %d\n", i, hmax, tot_cnt);
 #endif
     }
-/*
-    ground[x][y].ecotable=0;
-    ground[x][y].wastes=0;
-    ground[x][y].pollution=0;
-    ground[x][y].water_alt=0;
-    ground[x][y].water_pol=0;
-    ground[x][y].water_wast=0;
-    ground[x][y].water_next=0;
-    ground[x][y].int1=0;
-    ground[x][y].int2=0;
-    ground[x][y].int3=0;
-    ground[x][y].int4=0;
-*/
 }
+
 void setup_land(void)
 {
     int x, y, xw, yw;



From alainb at mail.berlios.de  Sun Dec 16 11:54:51 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sun, 16 Dec 2007 11:54:51 +0100
Subject: [Lincity-ng-commit] r1318 - in trunk/src/lincity: . modules
Message-ID: <200712161054.lBGAspSc029423@sheep.berlios.de>

Author: alainb
Date: 2007-12-16 11:54:50 +0100 (Sun, 16 Dec 2007)
New Revision: 1318

Modified:
   trunk/src/lincity/loadsave.cpp
   trunk/src/lincity/modules/blacksmith.cpp
   trunk/src/lincity/modules/commune.cpp
   trunk/src/lincity/modules/cricket.cpp
   trunk/src/lincity/modules/fire.cpp
   trunk/src/lincity/modules/firestation.cpp
   trunk/src/lincity/modules/heavy_industry.cpp
   trunk/src/lincity/modules/light_industry.cpp
   trunk/src/lincity/modules/mill.cpp
   trunk/src/lincity/modules/pottery.cpp
   trunk/src/lincity/modules/residence.cpp
   trunk/src/lincity/modules/rocket_pad.cpp
   trunk/src/lincity/modules/windmill.cpp
Log:
use MP_ANIM(x,y) for animation time

Modified: trunk/src/lincity/loadsave.cpp
===================================================================
--- trunk/src/lincity/loadsave.cpp	2007-12-15 22:12:16 UTC (rev 1317)
+++ trunk/src/lincity/loadsave.cpp	2007-12-16 10:54:50 UTC (rev 1318)
@@ -118,7 +118,7 @@
     for (x = 0; x < WORLD_SIDE_LEN; x++)
         for (y = 0; y < WORLD_SIDE_LEN; y++) {
             /*               TY po fl cr or i1 i2 i3 i4 i5 i6 i7 PL al ec ws gp wa wp ww wn g1 g2 g3 g4 DA TK AN d4 d5 d6 d7 d8 d9 */
-            gzprintf(ofile, "%d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d\n" 
+            gzprintf(ofile, "%u %d %d %u %u %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d\n" 
                        , MP_TYPE(x, y)
                        , MP_INFO(x, y).population
                        , MP_INFO(x, y).flags
@@ -296,8 +296,9 @@
     // Easier debugging from saved game: #Line = 100 x + y + 1  (first line = ldsv_version)
     for (x = 0; x < WORLD_SIDE_LEN; x++) {
         for (y = 0; y < WORLD_SIDE_LEN; y++) {
-            //                              TY po fl cr or i1 i2 i3 i4 i5 i6 i7 PL al ec ws gp wa wp ww wn g1 g2 g3 g4 DA TK AN d4 d5 d6 d7 d8 d9
-            sscanf(gzgets(gzfile, s, 512), "%d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d"
+            gzgets(gzfile, s, 512);
+            //         TY po fl cr or i1 i2 i3 i4 i5 i6 i7 PL al ec ws gp wa wp ww wn g1 g2 g3 g4 DA TK AN d4 d5 d6 d7 d8 d9
+            sscanf(s, "%u %d %d %u %u %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d"
                     , &MP_TYPE(x, y)
                     , &MP_INFO(x, y).population
                     , &MP_INFO(x, y).flags

Modified: trunk/src/lincity/modules/blacksmith.cpp
===================================================================
--- trunk/src/lincity/modules/blacksmith.cpp	2007-12-15 22:12:16 UTC (rev 1317)
+++ trunk/src/lincity/modules/blacksmith.cpp	2007-12-16 10:54:50 UTC (rev 1318)
@@ -15,10 +15,11 @@
        // int_1 contains the goods at the blacksmith
        // int_2 contains the goods made - for the animation
        // int_3 contains the coal store
-       // int_4 is the animation trigger time == MP_ANIM(x,y) since 1.91
+       // int_4 unused
        // int_5 is the % made so far this month
        // int_6 is the % capacity last month
        // int_7 contains the jobs stored at the blacksmith
+       // MP_ANIM(x,y) is the animation trigger time (since 1.91)
      */
     if (MP_INFO(x, y).int_3 < MAX_COAL_AT_BLACKSMITH)
         if (get_coal(x, y, BLACKSMITH_GET_COAL) != 0)
@@ -49,8 +50,8 @@
         MP_TYPE(x, y) = CST_BLACKSMITH_0;
     }
 
-    if (MP_INFO(x, y).int_2 > BLACKSMITH_BATCH && real_time >= MP_INFO(x, y).int_4) {
-        MP_INFO(x, y).int_4 = real_time + BLACKSMITH_ANIM_SPEED;
+    if (MP_INFO(x, y).int_2 > BLACKSMITH_BATCH && real_time >= MP_ANIM(x, y)) {
+        MP_ANIM(x, y) = real_time + BLACKSMITH_ANIM_SPEED;
         switch (MP_TYPE(x, y)) {
         case (CST_BLACKSMITH_0):
             MP_TYPE(x, y) = CST_BLACKSMITH_1;

Modified: trunk/src/lincity/modules/commune.cpp
===================================================================
--- trunk/src/lincity/modules/commune.cpp	2007-12-15 22:12:16 UTC (rev 1317)
+++ trunk/src/lincity/modules/commune.cpp	2007-12-16 10:54:50 UTC (rev 1318)
@@ -13,13 +13,15 @@
 void do_commune(int x, int y)
 {
     /*
-       // int_1 is the animation trigger time  == MP_ANIM(x,y) since 1.91
+       // int_1 unused
        // int_2 is the steelflag/trackflag
        // int_3 is the coal sold in the last 100 days 200 units is 100%
        // steel adds more.
        // int_4 is the months without selling much coal,steel,ore
        // int_5 is the coal, ore, steel waste flags for last month
        // int_6 is the coal, ore, steel waste flags so far this month
+       //
+       // MP_ANIM is the animation trigger time  since 1.91
      */
     /* GCS -- I folded the trackflag into int_2, changing the logic slightly.
        This change only affects the animation. */
@@ -117,8 +119,8 @@
     }
 
     /* animate */
-    if (real_time >= MP_INFO(x, y).int_1) {
-        MP_INFO(x, y).int_1 = real_time + COMMUNE_ANIM_SPEED - 25 + (rand() % 50);
+    if (real_time >= MP_ANIM(x, y)) {
+        MP_ANIM(x, y) = real_time + COMMUNE_ANIM_SPEED - 25 + (rand() % 50);
         switch (MP_TYPE(x, y)) {
         case (CST_COMMUNE_1):
             MP_TYPE(x, y) = CST_COMMUNE_2;

Modified: trunk/src/lincity/modules/cricket.cpp
===================================================================
--- trunk/src/lincity/modules/cricket.cpp	2007-12-15 22:12:16 UTC (rev 1317)
+++ trunk/src/lincity/modules/cricket.cpp	2007-12-16 10:54:50 UTC (rev 1318)
@@ -13,8 +13,9 @@
     /*
        // int_1 is the jobs stored at the pavillion
        // int_2 is the goods stored at the pavillion
-       // int_3 is the animation flag  == MP_ANIM since 1.91
-       // int_4 is the time of the next frame
+       // int_3 is the animation flag 
+       //
+       // MP_ANIM is the time of the next frame since 1.91
      */
     if (MP_INFO(x, y).int_1 < (MAX_JOBS_AT_CRICKET - CRICKET_GET_JOBS))
         if (get_jobs(x, y, CRICKET_GET_JOBS) != 0)
@@ -23,8 +24,8 @@
         if (get_goods(x, y, CRICKET_GET_GOODS) != 0)
             MP_INFO(x, y).int_2 += CRICKET_GET_GOODS;
     /* animate */
-    if (MP_INFO(x, y).int_3 && real_time > MP_INFO(x, y).int_4) {
-        MP_INFO(x, y).int_4 = real_time + CRICKET_ANIMATION_SPEED;
+    if (MP_INFO(x, y).int_3 && real_time > MP_ANIM(x, y)) {
+        MP_ANIM(x, y) = real_time + CRICKET_ANIMATION_SPEED;
         switch (MP_TYPE(x, y)) {
         case (CST_CRICKET_1):
             MP_TYPE(x, y) = CST_CRICKET_2;

Modified: trunk/src/lincity/modules/fire.cpp
===================================================================
--- trunk/src/lincity/modules/fire.cpp	2007-12-15 22:12:16 UTC (rev 1317)
+++ trunk/src/lincity/modules/fire.cpp	2007-12-16 10:54:50 UTC (rev 1318)
@@ -12,10 +12,11 @@
 void do_fire(int x, int y)
 {
     /*
-       // int_1 is the next animation frame time == MP_ANIM(x,y) since 1.91
+       // int_1 unused
        // int_2 is the fire length
        // int_3 is the real_time before the fire can spread or -1 if triggered 
        // int_4 is the idle land length
+       // MP_ANIM is the next animation frame time, since 1.91
      */
     int i;
     /* this so we don't get whole blocks changing in one go. */
@@ -42,8 +43,8 @@
         return;
     }
     MP_INFO(x, y).int_2++;
-    if (real_time > MP_INFO(x, y).int_1) {
-        MP_INFO(x, y).int_1 = real_time + FIRE_ANIMATION_SPEED;
+    if (real_time > MP_ANIM(x, y)) {
+        MP_ANIM(x, y) = real_time + FIRE_ANIMATION_SPEED;
         if (MP_TYPE(x, y) == CST_FIRE_1)
             MP_TYPE(x, y) = CST_FIRE_2;
         else if (MP_TYPE(x, y) == CST_FIRE_2)

Modified: trunk/src/lincity/modules/firestation.cpp
===================================================================
--- trunk/src/lincity/modules/firestation.cpp	2007-12-15 22:12:16 UTC (rev 1317)
+++ trunk/src/lincity/modules/firestation.cpp	2007-12-16 10:54:50 UTC (rev 1318)
@@ -13,9 +13,10 @@
     /*
        // int_1 is the jobs stored at the fire station
        // int_2 is the goods stored at the fire station
-       // int_3 is the animation flag == MP_ANIM(x,y) since 1.91
-       // int_4 is the time of the next frame
+       // int_3 is the animation flag
+       // int_4 unused
        // int_5 is the pause counter
+       // MP_ANIM is the time of the next frame since 1.91
      */
     /* XXX: should note whether we actually _produced_ fire cover in int_6 */
     if (MP_INFO(x, y).int_1 < (MAX_JOBS_AT_FIRESTATION - FIRESTATION_GET_JOBS))
@@ -25,8 +26,8 @@
         if (get_goods(x, y, FIRESTATION_GET_GOODS) != 0)
             MP_INFO(x, y).int_2 += FIRESTATION_GET_GOODS;
     /* animate */
-    if (MP_INFO(x, y).int_3 && real_time > MP_INFO(x, y).int_4) {
-        MP_INFO(x, y).int_4 = real_time + FIRESTATION_ANIMATION_SPEED;
+    if (MP_INFO(x, y).int_3 && real_time > MP_ANIM(x, y)) {
+        MP_ANIM(x, y) = real_time + FIRESTATION_ANIMATION_SPEED;
         if (MP_INFO(x, y).int_5 > 0)
             MP_INFO(x, y).int_5--;
         else {

Modified: trunk/src/lincity/modules/heavy_industry.cpp
===================================================================
--- trunk/src/lincity/modules/heavy_industry.cpp	2007-12-15 22:12:16 UTC (rev 1317)
+++ trunk/src/lincity/modules/heavy_industry.cpp	2007-12-16 10:54:50 UTC (rev 1318)
@@ -17,8 +17,9 @@
        // int_3 is the amount of raw materials in store (ore)
        // int_4 is the coal in store
        // int_5 is the percent max production last month
-       // int_6 is the time of the next animation frame. == MP_ANIM(x,y) since 1.91
+       // int_6 is unused
        // int_7 is whether we get power from coal (1) or elsewhere (0)
+       // MP_ANIM is the time of the next animation frame. since 1.91
      */
 
     /* See if there's any raw materials (ore) on the road/rail. If so, use some
@@ -178,8 +179,8 @@
             MP_TYPE(x, y) = CST_INDUSTRY_H_C;
     }
     /* now animate */
-    if (real_time >= MP_INFO(x, y).int_6) {
-        MP_INFO(x, y).int_6 = real_time + INDUSTRY_H_ANIM_SPEED;
+    if (real_time >= MP_ANIM(x, y)) {
+        MP_ANIM(x, y) = real_time + INDUSTRY_H_ANIM_SPEED;
         switch (MP_TYPE(x, y)) {
         case (CST_INDUSTRY_H_L1):
             MP_TYPE(x, y) = CST_INDUSTRY_H_L2;

Modified: trunk/src/lincity/modules/light_industry.cpp
===================================================================
--- trunk/src/lincity/modules/light_industry.cpp	2007-12-15 22:12:16 UTC (rev 1317)
+++ trunk/src/lincity/modules/light_industry.cpp	2007-12-16 10:54:50 UTC (rev 1318)
@@ -19,7 +19,7 @@
        // int_4 is the amount of steel in store.
        // int_5 is the jobs stored.
        // int_6 is the percent of capacity last month.
-       // int 7 is the next animation frame time. == MP_ANIM(x,y) since 1.91
+       // MP_ANIM is the next animation frame time. since 1.91
      */
     /* first get some jobs */
     if (MP_INFO(x, y).int_5 < MAX_JOBS_AT_INDUSTRY_L - INDUSTRY_L_GET_JOBS) {
@@ -213,8 +213,8 @@
             MP_TYPE(x, y) = CST_INDUSTRY_L_C;
     }
     /* now animate */
-    if (real_time >= MP_INFO(x, y).int_7) {
-        MP_INFO(x, y).int_7 = real_time + INDUSTRY_L_ANIM_SPEED;
+    if (real_time >= MP_ANIM(x, y)) {
+        MP_ANIM(x, y) = real_time + INDUSTRY_L_ANIM_SPEED;
         switch (MP_TYPE(x, y)) {
         case (CST_INDUSTRY_L_Q1):
             MP_TYPE(x, y) = CST_INDUSTRY_L_Q2;

Modified: trunk/src/lincity/modules/mill.cpp
===================================================================
--- trunk/src/lincity/modules/mill.cpp	2007-12-15 22:12:16 UTC (rev 1317)
+++ trunk/src/lincity/modules/mill.cpp	2007-12-16 10:54:50 UTC (rev 1318)
@@ -14,9 +14,11 @@
        // int_1 contains the goods at the mill
        // int_2 contains the food store
        // int_3 contains the coal store
-       // int_4 contains the animation trigger time == MP_ANIM(x,y) since 1.91
+       // int_4 unused
        // int_5 is the % count so far this month
        // int_6 is the % capacity last month
+       // int_7 unused
+       // MP_ANIM contains the animation trigger time since 1.91
      */
     /* get food */
     int block_anim = 0;
@@ -53,8 +55,8 @@
         MP_INFO(x, y).int_6 = MP_INFO(x, y).int_5;
         MP_INFO(x, y).int_5 = 0;
     }
-    if (real_time >= MP_INFO(x, y).int_4 && block_anim == 0) {
-        MP_INFO(x, y).int_4 = real_time + MILL_ANIM_SPEED;
+    if (real_time >= MP_ANIM(x, y) && block_anim == 0) {
+        MP_ANIM(x, y) = real_time + MILL_ANIM_SPEED;
         switch (MP_TYPE(x, y)) {
         case (CST_MILL_0):
             MP_TYPE(x, y) = CST_MILL_1;

Modified: trunk/src/lincity/modules/pottery.cpp
===================================================================
--- trunk/src/lincity/modules/pottery.cpp	2007-12-15 22:12:16 UTC (rev 1317)
+++ trunk/src/lincity/modules/pottery.cpp	2007-12-16 10:54:50 UTC (rev 1318)
@@ -14,10 +14,11 @@
        // int_1 contains the goods at the pottery
        // int_2 contains the ore at the pottery
        // int_3 contains the coal at the pottery
-       // int_4 is the animation trigger time == MP_ANIM(x,y) since 1.91
+       // int_4 unused
        // int_5 is the % made so far this month or the close time if negative
        // int_6 is the % capacity last month
        // int_7 contains the jobs stored at the pottery
+       // MP_ANIM is the animation trigger time since 1.91
      */
     if (MP_INFO(x, y).int_5 < 0) {
         MP_INFO(x, y).int_5++;
@@ -56,8 +57,8 @@
         MP_INFO(x, y).int_6 = MP_INFO(x, y).int_5;
         MP_INFO(x, y).int_5 = 0;
     }
-    if (real_time >= MP_INFO(x, y).int_4 /* && block_anim==0 */ ) {
-        MP_INFO(x, y).int_4 = real_time + POTTERY_ANIM_SPEED;
+    if (real_time >= MP_ANIM(x, y) /* && block_anim==0 */ ) {
+        MP_ANIM(x, y) = real_time + POTTERY_ANIM_SPEED;
         switch (MP_TYPE(x, y)) {
         case (CST_POTTERY_0):
             MP_TYPE(x, y) = CST_POTTERY_1;

Modified: trunk/src/lincity/modules/residence.cpp
===================================================================
--- trunk/src/lincity/modules/residence.cpp	2007-12-15 22:12:16 UTC (rev 1317)
+++ trunk/src/lincity/modules/residence.cpp	2007-12-16 10:54:50 UTC (rev 1318)
@@ -15,7 +15,7 @@
     /*
        // int_1 is a job swingometer to choose +/- JOB_SWING% of normal
        // int_2 is the date of the last starve
-       // int_3 is the real time for the next icon update  == MP_ANIM(x,y) since 1.91
+       // int_3 unused
        // int_4 is the birth rate modifier.
        // int_5 is the death rate modifier.
        // int_6 unused

Modified: trunk/src/lincity/modules/rocket_pad.cpp
===================================================================
--- trunk/src/lincity/modules/rocket_pad.cpp	2007-12-15 22:12:16 UTC (rev 1317)
+++ trunk/src/lincity/modules/rocket_pad.cpp	2007-12-16 10:54:50 UTC (rev 1318)
@@ -25,7 +25,8 @@
        // int_2 is the stored goods
        // int_3 is the stored steel
        // int_4 is the count which gets to ROCKET_PAD_LAUNCH to fire.
-       // int_5 is the time of the next animation frame, when waiting for launch. == MP_ANIM(x,y) since 1.91
+       // int_5 unused
+       // MP_ANIM is the time of the next animation frame, when waiting for launch. since 1.91
      */
     if (MP_TYPE(x, y) == CST_ROCKET_FLOWN)
         return;                 /* The rocket has been launched. */
@@ -71,8 +72,8 @@
     rocket_pad_cost += ROCKET_PAD_RUNNING_COST;
     /* animate and return if already said no to launch */
     if (MP_TYPE(x, y) >= CST_ROCKET_5 && MP_INFO(x, y).int_4 >= (100 * ROCKET_PAD_LAUNCH) / 100) {
-        if (real_time >= MP_INFO(x, y).int_5) {
-            MP_INFO(x, y).int_5 = real_time + ROCKET_ANIMATION_SPEED;
+        if (real_time >= MP_ANIM(x, y)) {
+            MP_ANIM(x, y) = real_time + ROCKET_ANIMATION_SPEED;
             switch (MP_TYPE(x, y)) {
             case (CST_ROCKET_5):
                 MP_TYPE(x, y) = CST_ROCKET_6;

Modified: trunk/src/lincity/modules/windmill.cpp
===================================================================
--- trunk/src/lincity/modules/windmill.cpp	2007-12-15 22:12:16 UTC (rev 1317)
+++ trunk/src/lincity/modules/windmill.cpp	2007-12-16 10:54:50 UTC (rev 1318)
@@ -11,17 +11,14 @@
 /*** Windmills ***/
 /*
   // int_1 is the rated capacity 
-  // int_2 is the tech level when built == MP_TECH(x,y) since 1.91
+  // int_2 unused
   // int_3 is the sail count - to choose the right sail.
   // int_4 reserved = local power demand for substations (like substations)
   // int_5 is the power produced (basically _if_ power produced)
   // int_6 is the grid it's on
   // int_7 is a timestamp for mapping
   // 
-  // Stored in (x+1, y)
-  //  int_1 reserved = x
-  //  int_2 reserved = y
-  //  int_3 is the last real time that a sail was turned  == MP_ANIM(x,y) since 1.91
+  // MP_ANIM(x,y) is the last real time that a sail was turned  (since 1.91)
 */
 void do_windmill(int x, int y)
 {
@@ -31,24 +28,24 @@
         MP_INFO(x, y).int_5 = MP_INFO(x, y).int_1;
         grid[MP_INFO(x, y).int_6]->avail_power += MP_INFO(x, y).int_1;
     } else {
-        MP_INFO(x + 1, y).int_3 = real_time + MODERN_WINDMILL_ANIM_SPEED;
+        MP_ANIM(x, y) = real_time + MODERN_WINDMILL_ANIM_SPEED;
         return;
     }
 
-    /* update animation. ATTENTION: (x,y) and (x+1,y) are used to store info */
-    if (real_time > MP_INFO(x + 1, y).int_3) {
+    /* update animation */
+    if (real_time > MP_ANIM(x , y)) {
         MP_INFO(x, y).int_3++;
-        if (MP_INFO(x, y).int_2 < MODERN_WINDMILL_TECH) {
-            MP_INFO(x + 1, y).int_3 = real_time + ANTIQUE_WINDMILL_ANIM_SPEED;
+        if (MP_TECH(x, y) < MODERN_WINDMILL_TECH) {
+            MP_ANIM(x,y) = real_time + ANTIQUE_WINDMILL_ANIM_SPEED;
         } else {
-            MP_INFO(x + 1, y).int_3 = real_time + MODERN_WINDMILL_ANIM_SPEED;
+            MP_ANIM(x,y) = real_time + MODERN_WINDMILL_ANIM_SPEED;
         }
     }
 
     /* figure out which tile to use */
     anim_tile = (MP_INFO(x, y).int_3 % 3);
 
-    if (MP_INFO(x, y).int_2 < MODERN_WINDMILL_TECH)
+    if (MP_TECH(x, y) < MODERN_WINDMILL_TECH)
         MP_TYPE(x, y) = CST_WINDMILL_1_W + anim_tile;
     else
         switch (grid[MP_INFO(x, y).int_6]->powered) {
@@ -73,10 +70,10 @@
     char s[12];
 
     mps_store_title(i++, _("Windmill"));
-    mps_store_sfp(i++, _("Tech"), MP_INFO(x, y).int_2 * 100.0 / MAX_TECH_LEVEL);
+    mps_store_sfp(i++, _("Tech"), (MP_TECH(x, y) * 100.0) / MAX_TECH_LEVEL);
     i++;
 
-    if (MP_INFO(x, y).int_2 >= MODERN_WINDMILL_TECH) {
+    if (MP_TECH(x, y) >= MODERN_WINDMILL_TECH) {
         mps_store_title(i++, _("Local Status"));
 
         format_power(s, sizeof(s), MP_INFO(x, y).int_5);



From alainb at mail.berlios.de  Sun Dec 16 15:04:01 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sun, 16 Dec 2007 15:04:01 +0100
Subject: [Lincity-ng-commit] r1319 - in trunk/src/lincity: . modules
Message-ID: <200712161404.lBGE41rL026718@sheep.berlios.de>

Author: alainb
Date: 2007-12-16 15:04:00 +0100 (Sun, 16 Dec 2007)
New Revision: 1319

Modified:
   trunk/src/lincity/engine.cpp
   trunk/src/lincity/ldsvguts.cpp
   trunk/src/lincity/lintypes.h
   trunk/src/lincity/loadsave.cpp
   trunk/src/lincity/modules/coal_power.cpp
   trunk/src/lincity/modules/heavy_industry.cpp
   trunk/src/lincity/modules/light_industry.cpp
   trunk/src/lincity/modules/organic_farm.cpp
   trunk/src/lincity/modules/recycle.cpp
   trunk/src/lincity/modules/solar_power.cpp
   trunk/src/lincity/modules/windmill.cpp
Log:
use MP_TECH = tech level at build time

Modified: trunk/src/lincity/engine.cpp
===================================================================
--- trunk/src/lincity/engine.cpp	2007-12-16 10:54:50 UTC (rev 1318)
+++ trunk/src/lincity/engine.cpp	2007-12-16 14:04:00 UTC (rev 1319)
@@ -287,7 +287,6 @@
         break;
 
     case GROUP_ORGANIC_FARM:
-        MP_INFO(x, y).int_1 = MP_TECH(x,y);
         break;
 
     case GROUP_TRACK:
@@ -305,8 +304,7 @@
 
     case GROUP_WINDMILL:
         add_a_substation (x, y);
-        MP_INFO(x, y).int_2 = MP_TECH(x,y);
-        MP_INFO(x, y).int_1 = (int)(WINDMILL_POWER + (((double)MP_INFO(x, y).int_2 * WINDMILL_POWER) / MAX_TECH_LEVEL));
+        MP_INFO(x, y).int_1 = (int)(WINDMILL_POWER + (((double)MP_TECH(x, y) * WINDMILL_POWER) / MAX_TECH_LEVEL));
         /* Make sure that the correct windmill graphic shows up */
         if (tech_level > MODERN_WINDMILL_TECH)
             type = CST_WINDMILL_1_R;
@@ -315,16 +313,13 @@
         break;
 
     case (GROUP_COAL_POWER):
-        MP_INFO(x, y).int_4 = MP_TECH(x,y);
-        MP_INFO(x, y).int_1 = (int)(POWERS_COAL_OUTPUT + (((double)MP_INFO(x, y).int_4 * POWERS_COAL_OUTPUT)
+        MP_INFO(x, y).int_1 = (int)(POWERS_COAL_OUTPUT + (((double)MP_TECH(x, y) * POWERS_COAL_OUTPUT)
                                                           / MAX_TECH_LEVEL));
         break;
 
     case (GROUP_SOLAR_POWER):
-        MP_INFO(x, y).int_2 = MP_TECH(x,y);
-        MP_INFO(x, y).int_1 = (int)(POWERS_SOLAR_OUTPUT + (((double)MP_INFO(x, y).int_2 * POWERS_SOLAR_OUTPUT)
-                                                           / MAX_TECH_LEVEL));  /* like other power sources */
-        MP_INFO(x, y).int_3 = MP_INFO(x, y).int_1;      /* Int_3 is kept for compatibility */
+        MP_INFO(x, y).int_1 = (int)(POWERS_SOLAR_OUTPUT + (((double)MP_TECH(x, y) * POWERS_SOLAR_OUTPUT)
+                                                           / MAX_TECH_LEVEL));
         break;
 
     case GROUP_COMMUNE:
@@ -340,7 +335,6 @@
         break;
 
     case GROUP_RECYCLE:
-        MP_INFO(x, y).int_4 = MP_TECH(x,y);
         break;
 
     case GROUP_TIP:
@@ -352,7 +346,6 @@
         break;
 
     case GROUP_OREMINE:
-        /* New mines are not allowed on old mines or old tips */
         break;
 
     case GROUP_WATERWELL:
@@ -362,7 +355,7 @@
     case GROUP_PARKLAND:
         break;
 
-    }                           /* end case */
+    } /* end case */
 
     set_mappoint(x, y, type);
 

Modified: trunk/src/lincity/ldsvguts.cpp
===================================================================
--- trunk/src/lincity/ldsvguts.cpp	2007-12-16 10:54:50 UTC (rev 1318)
+++ trunk/src/lincity/ldsvguts.cpp	2007-12-16 14:04:00 UTC (rev 1319)
@@ -369,6 +369,14 @@
         printf(_("Can't open <%s> (gzipped)"), cname);
         do_error("Can't open it!");
     }
+    /* Initialise additional structure FIXME random village does not go here*/
+    for (x = 0; x < WORLD_SIDE_LEN; x++)
+        for (y = 0; y < WORLD_SIDE_LEN; y++) {
+            MP_TECH(x,y) = 0;
+            MP_DATE(x,y) = 0;
+            MP_ANIM(x,y) = 0;
+        }
+
     /* Add version to shared global variables for playing/saving games without waterwell */
     sscanf(gzgets(gzfile, s, 256), "%d", &ldsv_version);
     if (ldsv_version < MIN_LOAD_VERSION) {
@@ -609,8 +617,8 @@
         sscanf(s, "%d", &highest_tech_level);
     else
         highest_tech_level = 0;
-    gzgets(gzfile, s, 80);      /* this is the CR */
 
+    gzgets(gzfile, s, 200);   
     if (sscanf
         (s, "sust %d %d %d %d %d %d %d %d %d %d", &sust_dig_ore_coal_count, &sust_port_count, &sust_old_money_count,
          &sust_old_population_count, &sust_old_tech_count, &sust_fire_count, &sust_old_money, &sust_old_population,
@@ -624,14 +632,14 @@
             = sust_old_tech_count = sust_fire_count = sust_old_money = sust_old_population = sust_old_tech = 0;
 
     if (ldsv_version == WATERWELL_V2) {
-        gzgets(gzfile, s, 80);      /* this is the CR */
+        gzgets(gzfile, s, 80);   
         sscanf(s, "arid %d %d", &global_aridity, &global_mountainity);
 #ifdef DEBUG
         fprintf(stderr," arid %d, mountain %d \n", global_aridity, global_mountainity);
 #endif
         for (x = 0; x < WORLD_SIDE_LEN; x++) {
             for (y = 0; y < WORLD_SIDE_LEN; y++) {
-                gzgets(gzfile, s, 80);      /* this is the CR */
+                gzgets(gzfile, s, 200);  
                 sscanf(s,"%d %d %d %d %d %d %d %d %d %d %d %d",&(ground[x][y].altitude)
                         , &ground[x][y].ecotable
                         , &ground[x][y].wastes
@@ -667,12 +675,6 @@
     } else
         university_intake_rate = 50;
 
-    /*Al1 : What is this ? This does nothing, the value are saved in MP_INFO.int_ 
-     * for (x = 0; x < WORLD_SIDE_LEN; x++)
-     *   for (y = 0; y < WORLD_SIDE_LEN; y++)
-     *     update_tech_dep (x, y);
-     */
-
     unhighlight_module_button(selected_module);
     selected_module = sbut[7];  /* 7 is track.  Watch out though! */
     highlight_module_button(selected_module);
@@ -680,22 +682,48 @@
 
     print_total_money();
     reset_animation_times();
+    /* kind upgrade of MP_TECH for old buildings, when we don't know
+     * eg light industries pollution depends on tech */
+    int tk = (3 * highest_tech_level) / 4;
+    if (tech_level >= tk)
+        tk = tech_level;
+
     /* update tech dep for compatibility with old games */
     for (x = 0; x < WORLD_SIDE_LEN; x++)
         for (y = 0; y < WORLD_SIDE_LEN; y++) {
+
             switch (MP_GROUP(x, y)) {
             case (GROUP_WINDMILL):
-                MP_INFO(x, y).int_1 = (int)(WINDMILL_POWER + (((double)MP_INFO(x, y).int_2 * WINDMILL_POWER)
+                MP_TECH(x,y) = MP_INFO(x, y).int_2;
+                MP_INFO(x, y).int_1 = (int)(WINDMILL_POWER + (((double)MP_TECH(x, y) * WINDMILL_POWER)
                                                               / MAX_TECH_LEVEL));
                 break;
+
             case (GROUP_COAL_POWER):
-                MP_INFO(x, y).int_1 = (int)(POWERS_COAL_OUTPUT + (((double)MP_INFO(x, y).int_4 * POWERS_COAL_OUTPUT)
+                MP_TECH(x,y) = MP_INFO(x,y).int_4;
+                MP_INFO(x, y).int_1 = (int)(POWERS_COAL_OUTPUT + (((double)MP_TECH(x, y) * POWERS_COAL_OUTPUT)
                                                                   / MAX_TECH_LEVEL));
                 break;
+
             case (GROUP_SOLAR_POWER):
-                MP_INFO(x, y).int_1 = (int)(POWERS_SOLAR_OUTPUT + (((double)MP_INFO(x, y).int_2 * POWERS_SOLAR_OUTPUT)
+                MP_TECH(x,y) = MP_INFO(x,y).int_2;
+                MP_INFO(x, y).int_3 = (int)(POWERS_SOLAR_OUTPUT + (((double)MP_TECH(x, y) * POWERS_SOLAR_OUTPUT)
                                                                    / MAX_TECH_LEVEL));
+            case GROUP_ORGANIC_FARM:
+                MP_TECH(x,y) = MP_INFO(x,y).int_1;
                 break;
+
+            case GROUP_RECYCLE:
+                MP_TECH(x,y) = MP_INFO(x, y).int_4;
+                break;
+
+            case GROUP_INDUSTRY_L:
+                if ( MP_TECH(x,y) == 0 )
+                    if ( tk > GROUP_INDUSTRY_L_TECH )
+                        MP_TECH(x,y) = tk;
+                    else
+                        MP_TECH(x,y) = GROUP_INDUSTRY_L_TECH;
+                break;
             }
         }
 

Modified: trunk/src/lincity/lintypes.h
===================================================================
--- trunk/src/lincity/lintypes.h	2007-12-16 10:54:50 UTC (rev 1318)
+++ trunk/src/lincity/lintypes.h	2007-12-16 14:04:00 UTC (rev 1319)
@@ -80,9 +80,9 @@
 #define MP_GROUP(x,y)  map.group[x][y]
 #define MP_POL(x,y)    map.pollution[x][y]
 #define MP_INFO(x,y)   map.info[x][y]
-#define MP_DATE(x,y)   map.date[x][y]
-#define MP_TECH(x,y)   map.tech[x][y]
-#define MP_ANIM(x,y)   map.anim[x][y]
+#define MP_DATE(x,y)   map.date[x][y] // date of built
+#define MP_TECH(x,y)   map.tech[x][y] // Tech at build time
+#define MP_ANIM(x,y)   map.anim[x][y] // real_time for next anim    //does not need to be saved
 
 #define MP_SIZE(x,y)   main_groups[MP_GROUP(x,y)].size
 #define MP_COLOR(x,y)  main_groups[MP_GROUP(x,y)].colour

Modified: trunk/src/lincity/loadsave.cpp
===================================================================
--- trunk/src/lincity/loadsave.cpp	2007-12-16 10:54:50 UTC (rev 1318)
+++ trunk/src/lincity/loadsave.cpp	2007-12-16 14:04:00 UTC (rev 1319)
@@ -472,7 +472,7 @@
     else
         highest_tech_level = 0;
 
-    gzgets(gzfile, s, 80);   
+    gzgets(gzfile, s, 200);   
     if (sscanf
         (s, "sust %d %d %d %d %d %d %d %d %d %d", &sust_dig_ore_coal_count, &sust_port_count, &sust_old_money_count,
          &sust_old_population_count, &sust_old_tech_count, &sust_fire_count, &sust_old_money, &sust_old_population,

Modified: trunk/src/lincity/modules/coal_power.cpp
===================================================================
--- trunk/src/lincity/modules/coal_power.cpp	2007-12-16 10:54:50 UTC (rev 1318)
+++ trunk/src/lincity/modules/coal_power.cpp	2007-12-16 14:04:00 UTC (rev 1319)
@@ -13,13 +13,16 @@
 
 /*** Coal Power ***/
 /*
-  // int_1 is the maximum possible power
+  // int_1 is the maximum possible power (depends on MP_TECH)
   // int_2 is the coal at the power station
   // int_3 is the stored jobs... Must be an interesting warehouse
-  // int_4 is the tech level when built
+  // int_4 unused  
   // int_5 is the projected output.
   // int_6 is the grid ID
   // int_7 is grid_timestamp
+  //
+  // MP_TECH is the tech level when built
+ 
 */
 
 void do_power_source_coal(int x, int y)
@@ -95,6 +98,6 @@
 
     mps_store_sfp(i++, _("Coal"), MP_INFO(x, y).int_2 * 100.0 / MAX_COAL_AT_POWER_STATION);
     mps_store_sfp(i++, _("Jobs"), MP_INFO(x, y).int_3 * 100.0 / MAX_JOBS_AT_COALPS);
-    mps_store_sfp(i++, _("Tech"), MP_INFO(x, y).int_4 * 100.0 / MAX_TECH_LEVEL);
+    mps_store_sfp(i++, _("Tech"), MP_TECH(x, y) * 100.0 / MAX_TECH_LEVEL);
     mps_store_sd(i++, _("Grid ID"), MP_INFO(x, y).int_6);
 }

Modified: trunk/src/lincity/modules/heavy_industry.cpp
===================================================================
--- trunk/src/lincity/modules/heavy_industry.cpp	2007-12-16 10:54:50 UTC (rev 1318)
+++ trunk/src/lincity/modules/heavy_industry.cpp	2007-12-16 14:04:00 UTC (rev 1319)
@@ -19,6 +19,7 @@
        // int_5 is the percent max production last month
        // int_6 is unused
        // int_7 is whether we get power from coal (1) or elsewhere (0)
+       //
        // MP_ANIM is the time of the next animation frame. since 1.91
      */
 

Modified: trunk/src/lincity/modules/light_industry.cpp
===================================================================
--- trunk/src/lincity/modules/light_industry.cpp	2007-12-16 10:54:50 UTC (rev 1318)
+++ trunk/src/lincity/modules/light_industry.cpp	2007-12-16 14:04:00 UTC (rev 1319)
@@ -20,6 +20,7 @@
        // int_5 is the jobs stored.
        // int_6 is the percent of capacity last month.
        // MP_ANIM is the next animation frame time. since 1.91
+       // MP_TECH is tech at build time (for pollution)
      */
     /* first get some jobs */
     if (MP_INFO(x, y).int_5 < MAX_JOBS_AT_INDUSTRY_L - INDUSTRY_L_GET_JOBS) {
@@ -90,9 +91,6 @@
         MP_INFO(x, y).int_3 -= INDUSTRY_L_ORE_USED;
         ore_used += INDUSTRY_L_ORE_USED;
         MP_INFO(x, y).int_5 -= INDUSTRY_L_JOBS_USED;
-        /* Pollution is now determined by amount of goods made and affected by
-           technology 
-           MP_POL(x,y) += INDUSTRY_L_POLLUTION; */
 
         /* multiply by 2 if we have steel. */
         if (MP_INFO(x, y).int_4 >= INDUSTRY_L_STEEL_USED) {
@@ -116,19 +114,20 @@
     goods_made += goods;
 
     /* Pollution is based on goods produced and is affected by tech level above
-       1000 (displayed as 100) whereupon it is reduced by one percent per 10
-       tech_level points.  
+     * 1000 (displayed as 100) whereupon it is reduced by one percent per 10
+     * tech_level points.  
+     *  before it was MP_POL(x,y) += INDUSTRY_L_POLLUTION; 
      */
-    /* XXX: it would be nice to convert tech-reduced air pollution into waste
-       to be hauled to a tip or recycled, and reduce that above tl 2000 */
+    /* TODO: it would be nice to convert tech-reduced air pollution into waste
+     * to be hauled to a tip or recycled, and reduce that above tl 2000 */
 
     tmp_pol = (float)(INDUSTRY_L_POL_PER_GOOD * goods);
-    if (tech_level > 1000) {
+    if (MP_TECH(x,y) > 1000) {
         double d;
-        d = (tech_level - 1000);
-        if (d > 1000)
-            d = 1000;
-        d /= 1000;
+        d = (MP_TECH(x,y) - 1000.);
+        if (d > 1000.)
+            d = 1000.;
+        d /= 1000.;
         tmp_pol -= (tmp_pol * d);
         if (tmp_pol < 0)
             tmp_pol = 0;

Modified: trunk/src/lincity/modules/organic_farm.cpp
===================================================================
--- trunk/src/lincity/modules/organic_farm.cpp	2007-12-16 10:54:50 UTC (rev 1318)
+++ trunk/src/lincity/modules/organic_farm.cpp	2007-12-16 14:04:00 UTC (rev 1319)
@@ -15,17 +15,13 @@
 void do_organic_farm(int x, int y)
 {
     /* // MP_INFO(x,y)
-       // int_1 is the tech level of the farm when built
-       // int_2 is a flag so we don't create a farm with nearly ripe crops.
-       *      unused in NG1.1     
+       // int_1 unused
+       // int_2 unused
        // int_3 is the food sold count so far this year.
        // int_4 is the food made last year.
        // int_5 is the random crop rotation key.
        // int_6 is the random month stagger, so they don't all flash at once
        // int_7 is the jobs stored at the farm 
-       //         up to NG-1.1.0 int_7 was the tech-level dependent output of a
-       //          powered farm with full workforce. 
-       //         = duplicate with int_1.  see below tech_bonus.
        * 
        * MP_INFO(x+1,y) stores additional info
        *    int_1 reserved (=x)
@@ -33,10 +29,13 @@
        *    int_3 max possible production (assuming 100% water and power)
        *    int_4 number of 1x1 tiles with underground water inside the farm
        *    int_5 current production
+       *
+       // MP_TECH is the tech level of the farm when built
+       // MP_ANIM  FIXME, this is unused
      */
     int i;
     int has_power = false;
-    int tech_bonus = (int)(((double)MP_INFO(x, y).int_1 * ORGANIC_FARM_FOOD_OUTPUT) / MAX_TECH_LEVEL);
+    int tech_bonus = (int)(((double)MP_TECH(x, y) * ORGANIC_FARM_FOOD_OUTPUT) / MAX_TECH_LEVEL);
     MP_INFO(x + 1, y).int_3 = ORGANIC_FARM_FOOD_OUTPUT + tech_bonus;
     /* Animation */
     if (MP_INFO(x, y).int_5 == 0) {
@@ -141,8 +140,7 @@
 
     if (i % 300 == 0) {
         i /= 300;
-        if ( /* MP_INFO(x,y).int_2!=0 &&  */ MP_INFO(x, y).int_4
-            > MIN_FOOD_SOLD_FOR_ANIM) {
+        if ( MP_INFO(x, y).int_4 > MIN_FOOD_SOLD_FOR_ANIM) {
             if (i % 4 == 0) {
                 MP_INFO(x, y).int_6 = rand() % 100;     /* AL1: initially defined as %300 */
             }
@@ -227,7 +225,7 @@
     snprintf(text, MPS_INFO_CHARS, "%s %s", _("Power"), p);
     mps_store_title(i++, text);
 
-    snprintf(text, MPS_INFO_CHARS, "%s  %5.1f%%", _("Tech"), MP_INFO(x, y).int_1 * 100.0 / MAX_TECH_LEVEL);
+    snprintf(text, MPS_INFO_CHARS, "%s  %5.1f%%", _("Tech"), MP_TECH(x, y) * 100.0 / MAX_TECH_LEVEL);
     mps_store_title(i++, text);
 
     snprintf(text, MPS_INFO_CHARS, "%s  %5.1f%%", _("Prod"), MP_INFO(x, y).int_4 * 100.0 / 1200.0);
@@ -243,24 +241,4 @@
     }
 #endif
 
-    /*
-       char * p;
-
-       snprintf(mps_info[i++], MPS_INFO_CHARS, _("Organic Farm"));
-       i++;
-
-       if ((MP_INFO(x,y).flags & FLAG_POWERED) != 0)
-       p = _("YES");
-       else
-       p = _("NO ");
-
-       snprintf(mps_info[i++], MPS_INFO_CHARS, "%s %s", _("Power"), p);
-
-       snprintf(mps_info[i++], MPS_INFO_CHARS, "%s  %5.1f%%", _("Tech"), 
-       MP_INFO(x,y).int_1 * 100.0 / MAX_TECH_LEVEL);
-
-       snprintf(mps_info[i++], MPS_INFO_CHARS, "%s  %5.1f%%", _("Prod"),
-       MP_INFO(x,y).int_4 * 100.0 / 1200.0);
-
-     */
 }

Modified: trunk/src/lincity/modules/recycle.cpp
===================================================================
--- trunk/src/lincity/modules/recycle.cpp	2007-12-16 10:54:50 UTC (rev 1318)
+++ trunk/src/lincity/modules/recycle.cpp	2007-12-16 14:04:00 UTC (rev 1319)
@@ -15,12 +15,14 @@
        // int_1 is the ore made and waiting to go out
        // int_2 is the used goods in store
        // int_3 is the used steel in store       NOT USED at this time
-       // int_4 is the tech level when built
+       // int_4 unused
        // int_5 is the recycling done so far this month
        // int_6 is the percent of max recycling last month
        // int_7 is the waste in store
-       // cost
+       //
+       // MP_TECH is the tech level when built
      */
+    // cost
     recycle_cost += RECYCLE_RUNNING_COST;
 
     /*
@@ -58,8 +60,7 @@
             else
                 MP_INFO(x, y).flags |= FLAG_POWERED;
             MP_INFO(x, y).int_2 -= GOODS_RECYCLED;
-            i = (GOODS_RECYCLED * (10 + ((50 * MP_INFO(x, y).int_4)
-                                         / MAX_TECH_LEVEL))) / 100;
+            i = ( GOODS_RECYCLED * (10 + ( (50 * MP_TECH(x, y)) / MAX_TECH_LEVEL)) ) / 100;
             if (i > (GOODS_RECYCLED * 8) / 10)
                 i = (GOODS_RECYCLED * 8) / 10;
             MP_INFO(x, y).int_1 += i;
@@ -143,7 +144,7 @@
     p = ((MP_INFO(x, y).flags & FLAG_POWERED) != 0) ? _("YES") : _("NO");
     mps_store_ss(i++, _("Power"), p);
 
-    mps_store_sfp(i++, _("Tech"), MP_INFO(x, y).int_4 * 100.0 / MAX_TECH_LEVEL);
+    mps_store_sfp(i++, _("Tech"), MP_TECH(x, y) * 100.0 / MAX_TECH_LEVEL);
     i++;
     mps_store_title(i++, _("Inventory"));
     mps_store_sfp(i++, _("Ore"), MP_INFO(x, y).int_1 * 100.0 / MAX_ORE_AT_RECYCLE);

Modified: trunk/src/lincity/modules/solar_power.cpp
===================================================================
--- trunk/src/lincity/modules/solar_power.cpp	2007-12-16 10:54:50 UTC (rev 1318)
+++ trunk/src/lincity/modules/solar_power.cpp	2007-12-16 14:04:00 UTC (rev 1319)
@@ -12,26 +12,23 @@
 /*** Solar Power ***/
 
 /*
-  int_1 unused
-  int_2 is the tech level when it was built.
-  int_3 is the rated output
+  int_1 is the rated output (depends on MP_TECH)
+  int_2 unused
+  int_3 unused
   int_4 unused
   int_5 is the current output
   int_6 is the grid it's on
-  int_7 is a grid mapping timestamp
+  int_7 unused
+
+  MP_TECH(x,y) is the tech level when it was built.
 */
 
 void do_power_source(int x, int y)
 {
-    /* Al1: fix for stupid bug i introduced before 1.1.1 => int1 and int3 had wrong valued as if tech = 0 ! */
-    MP_INFO(x, y).int_1 = (int)(POWERS_SOLAR_OUTPUT
-                                + (((double)MP_INFO(x, y).int_2 * POWERS_SOLAR_OUTPUT) / MAX_TECH_LEVEL));
-    MP_INFO(x, y).int_3 = MP_INFO(x, y).int_1;
-    /* end of fix */
 
     if (get_jobs(x, y, SOLAR_POWER_JOBS)) {
-        MP_INFO(x, y).int_5 = MP_INFO(x, y).int_3;
-        grid[MP_INFO(x, y).int_6]->avail_power += MP_INFO(x, y).int_3;
+        MP_INFO(x, y).int_5 = MP_INFO(x, y).int_1;
+        grid[MP_INFO(x, y).int_6]->avail_power += MP_INFO(x, y).int_1;
     } else {
         MP_INFO(x, y).int_5 = 0;
     }

Modified: trunk/src/lincity/modules/windmill.cpp
===================================================================
--- trunk/src/lincity/modules/windmill.cpp	2007-12-16 10:54:50 UTC (rev 1318)
+++ trunk/src/lincity/modules/windmill.cpp	2007-12-16 14:04:00 UTC (rev 1319)
@@ -19,6 +19,7 @@
   // int_7 is a timestamp for mapping
   // 
   // MP_ANIM(x,y) is the last real time that a sail was turned  (since 1.91)
+  // MP_TECH(x,y) is the tech_level at build time
 */
 void do_windmill(int x, int y)
 {



From alainb at mail.berlios.de  Sun Dec 16 18:53:36 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sun, 16 Dec 2007 18:53:36 +0100
Subject: [Lincity-ng-commit] r1320 - in trunk/src: lincity lincity-ng
Message-ID: <200712161753.lBGHraAf014928@sheep.berlios.de>

Author: alainb
Date: 2007-12-16 18:53:21 +0100 (Sun, 16 Dec 2007)
New Revision: 1320

Modified:
   trunk/src/lincity-ng/Dialog.cpp
   trunk/src/lincity-ng/MainLincity.cpp
   trunk/src/lincity-ng/main.cpp
   trunk/src/lincity/fileutil.cpp
   trunk/src/lincity/ldsvguts.cpp
   trunk/src/lincity/ldsvguts.h
   trunk/src/lincity/lin-city.h
   trunk/src/lincity/lintypes.cpp
   trunk/src/lincity/simulate.cpp
Log:
WIP: uses ~/.lincity-ng directory

Modified: trunk/src/lincity/fileutil.cpp
===================================================================
--- trunk/src/lincity/fileutil.cpp	2007-12-16 14:04:00 UTC (rev 1319)
+++ trunk/src/lincity/fileutil.cpp	2007-12-16 17:53:21 UTC (rev 1320)
@@ -90,6 +90,7 @@
 //#include "cliglobs.h"
 #include "engglobs.h"
 #include "fileutil.h"
+#include "ldsvguts.h"
 
 /* GCS: This is from dcgettext.c in the gettext package.      */
 /* XPG3 defines the result of `setlocale (category, NULL)' as:

Modified: trunk/src/lincity/ldsvguts.cpp
===================================================================
--- trunk/src/lincity/ldsvguts.cpp	2007-12-16 14:04:00 UTC (rev 1319)
+++ trunk/src/lincity/ldsvguts.cpp	2007-12-16 17:53:21 UTC (rev 1320)
@@ -88,8 +88,6 @@
 #define SI_GREEN 254
 #define SI_YELLOW 255
 
-#define MP_SANITY_CHECK 1
-
 /* Extern resources */
 extern int yn_dial_box(const char *, const char *, const char *, const char *);
 extern void ok_dial_box(const char *, int, const char *);
@@ -99,6 +97,7 @@
 extern int count_groups(int);
 extern void reset_animation_times(void);
 extern void upgrade_to_v2(void);
+
 /* ---------------------------------------------------------------------- *
  * Private Fn Prototypes
  * ---------------------------------------------------------------------- */
@@ -348,7 +347,8 @@
 
     sprintf(s, "%s%c%s", lc_save_dir, PATH_SLASH, cname);
 
-    save_city_raw(s);
+    //save_city_raw(s);
+    save_city_2(s);
     free(s);
 }
 
@@ -740,13 +740,18 @@
 
 }
 
+/*
 void load_saved_city(char *s)
 {
     char *cname = (char *)malloc(strlen(lc_save_dir) + strlen(s) + 2);
     sprintf(cname, "%s%c%s", lc_save_dir, PATH_SLASH, s);
-    load_city(cname);
+    if (false) 
+        load_city(cname);
+    else
+        load_city_2(cname);
     free(cname);
 }
+*/
 
 void reset_animation_times(void)
 {
@@ -816,31 +821,6 @@
     return v == VERSION_INT;
 }
 
-#ifdef MP_SANITY_CHECK
-void sanity_check(void)
-{
-    //FIXME: AL1 unused in NG 1.1.2
-    static int flag = 0;
-    int x, y, xx, yy;
-    for (x = 0; x < WORLD_SIDE_LEN; x++)
-        for (y = 0; y < WORLD_SIDE_LEN; y++) {
-            if (MP_TYPE(x, y) == CST_USED) {
-                xx = MP_INFO(x, y).int_1;
-                yy = MP_INFO(x, y).int_2;
-                if (xx < (x - 4) || yy < (y - 4) || xx > x || yy > y ||
-                    xx < 0 || xx > WORLD_SIDE_LEN || yy < 0 || yy > WORLD_SIDE_LEN) {
-                    printf("Sanity failed at %d %d, points to %d %d\n", x, y, xx, yy);
-                    if (flag == 0)
-                        yn_dial_box("MP sanity check error",
-                                    "Please mail  lincity-users at lists.sourceforge.net",
-                                    "telling me what you just did.", "Do you think I'll find this bug?");
-                    flag = 1;
-                }
-            }
-        }
-}
-#endif
-
 void check_endian(void)
 {
     static int flag = 0;

Modified: trunk/src/lincity/ldsvguts.h
===================================================================
--- trunk/src/lincity/ldsvguts.h	2007-12-16 14:04:00 UTC (rev 1319)
+++ trunk/src/lincity/ldsvguts.h	2007-12-16 17:53:21 UTC (rev 1320)
@@ -9,6 +9,9 @@
 #ifndef __ldsvguts_h__
 #define __ldsvguts_h__
 
+/* Don't load if < MIN_LOAD_VERSION */
+#define MIN_LOAD_VERSION 97
+
 /* VERSION_INT is used in the load/save code.  All other code uses 
    the symbol VERSION in config.h */
 #define VERSION_INT 113
@@ -16,16 +19,36 @@
 /* Disable waterwell if version < MIN_WATERWELL_VERSION */
 #define MIN_WATERWELL_VERSION 1180
 
-/* Additionnal data structure */
-#define WATERWELL_V2 1306
+/* New load/save format */
+#define WATERWELL_V2 1316
 
-/* Don't load if < MIN_LOAD_VERSION */
-#define MIN_LOAD_VERSION 97
 
+#if defined (WIN32)
+#   define PATH_SLASH '\\'
+#   define PATH_SLASH_STRING "\\"
+#else
+#   define PATH_SLASH '/'
+#   define PATH_SLASH_STRING "/"
+#endif
 
-void load_saved_city(char *s);
+#define OLD_LC_SAVE_DIR "Lin-city"
+#if defined (WIN32)
+#    define LC_SAVE_DIR "SAVED_GAMES"
+#    define LINCITYRC_FILENAME "lincity-ng.ini"
+#else
+#    define LC_SAVE_DIR ".lincity-ng"
+#    define LINCITYRC_FILENAME ".lincity-ng_rc"
+#endif
+#define RESULTS_FILENAME "results"
+
+
+
+
+//void load_saved_city(char *s);
 void sanity_check(void);
 void save_city(char *);
+void save_city_2(char *);
 void load_city(char *);
+void load_city_2(char *);
 
 #endif /* __ldsvguts_h__ */

Modified: trunk/src/lincity/lin-city.h
===================================================================
--- trunk/src/lincity/lin-city.h	2007-12-16 14:04:00 UTC (rev 1319)
+++ trunk/src/lincity/lin-city.h	2007-12-16 17:53:21 UTC (rev 1320)
@@ -12,17 +12,6 @@
 #define LC_X11
 
 /*
-  The mouse sensitivity can be an integer such as 1, 2, 3 etc.
-  The higher the number the less you have to move the mouse.
-  It's a bit crude, it just multiples the mouse movement by this
-  amount. IMHO 3 is about the maximum useful value, 2 is quite
-  comfortable.
-    ** This is only relevant for linux-svgalib. **
-XXX: Then it shouldn't be here
-*/
-#define MOUSE_SENSITIVITY 1
-
-/*
   When your money reaches 1 million or more, to make it easier to
   read, it is split into two parts; a millions part, and the rest.
    For example  12,355232    You can choose any character you like,
@@ -35,13 +24,6 @@
 #define MONEY_SEPARATOR ','
 
 /*
-   #define MP_SANITY_CHECK
-*/
-
-/* The number of milliseconds between scrolling text on the initial screen */
-#define SPLASH_SCROLL_DELAY 30  /* was 30 */
-
-/*
        ************************************************
         NO USER CONFIGURABLE OPTIONS BEYOND THIS POINT
        ************************************************
@@ -56,15 +38,6 @@
 #if defined (_MSC_VER)
 #   define snprintf _snprintf
 #endif
-
-#if defined (WIN32)
-#   define PATH_SLASH '\\'
-#   define PATH_SLASH_STRING "\\"
-#else
-#   define PATH_SLASH '/'
-#   define PATH_SLASH_STRING "/"
-#endif
-
 #define USE_X11_PIXMAPS
 
 #ifndef TRUE
@@ -83,36 +56,6 @@
 #   define ALLOW_PIX_DOUBLING
 #endif
 
-/*
-  Gamma correction. The numbers GAMMA_CORRECT_X are between 0.0 and 1.0
-  The following values are enabled with the -w option. This seems quite
-  good for 'washed out' monitors that lack red.
-  You can also set the values from the command line.
-   [x]lincity -R 1.0 -G 0.0 -B 0.4  is the same as [x]lincity -w
- */
-#define GAMMA_CORRECT_RED    ((float) 1.0)
-#define GAMMA_CORRECT_GREEN  ((float) 0.0)
-#define GAMMA_CORRECT_BLUE   ((float) 0.4)
-
-#define PROFILE_COUNTDOWN 10000
-
-/* hof is 70 from 28/12 */
-
-/*
-#define DEBUG_ENGINE 1
-   #define ALLOW_TCORE_DUMP
-   #define DEBUG_ROCKETS
-   #define DEBUGMOUSE
-   #define DEBUG_MOUSE
-   #define DEBUG_MAIN_SCREEN
-   #define DEBUG_GET_POWER
-   if DEBUG_KEYS is defined, pressing certain keys add money, tech points etc.
-   #define DEBUG_KEYS 1
-*/
-/*
-   #define CS_PROFILE
-*/
-
 #if defined (LC_X11) || defined (WIN32)
 #    define BORDERX 30
 #    define BORDERY 30
@@ -175,16 +118,6 @@
 #define T_STEEL 5
 #define T_WASTE 6
 
-/* XXX: Move me to mouse.h or similar */
-
-#define MT_FAIL     0
-#define MT_START    1
-#define MT_CONTINUE 2
-#define MT_SUCCESS  3
-
-#define HOF_START 845830134
-#define HOF_STOP 857843038
-
 /* XXX: screen.h? */
 
 #define MINI_SCREEN_NORMAL_FLAG    (0)
@@ -201,19 +134,6 @@
 #define MAIN_SCREEN_NORMAL_FLAG    (1)
 #define MAIN_SCREEN_EQUALS_MINI    (2)
 
-#define SEED_RAND
-#define OLD_LC_SAVE_DIR "Lin-city"
-#if defined (WIN32)
-#define LC_SAVE_DIR "SAVED_GAMES"
-#define LINCITYRC_FILENAME "lincity.ini"
-#else
-/* GCS: Changed for 1.12 */
-/* #define LC_SAVE_DIR ".Lin-city" */
-#define LC_SAVE_DIR ".lincity"
-#define LINCITYRC_FILENAME ".lincityrc"
-#endif
-#define RESULTS_FILENAME "results"
-
 #define MAX_ICON_LEN 4096       /* AL1 unused in NG */
 #define WORLD_SIDE_LEN 100      /* Minimap size is hardcoded 200 pixel => some job to do ... */
 #define NUMOF_DAYS_IN_MONTH 100
@@ -238,13 +158,7 @@
 #define BAD (-1)
 #define RESULTS 0
 
-#define PROGBOXX 170
-#define PROGBOXY 180
-#define PROGBOXW 300
-#define PROGBOXH 120
-#define PROGBOX_BG_COLOUR 114
-#define PROGBOX_DONE_COL 4
-#define PROGBOX_NOTDONE_COL 2
+/************* Buildings stuff *********************/
 
 #define WINDMILL_POWER      450
 #define WINDMILL_JOBS       10
@@ -592,24 +506,6 @@
 #define MARKET_CB_W (17*8 - 2)
 #define MARKET_CB_H (23*8)
 
-#define SCROLL_LONG_COUNT 5
-#define SCROLL_RIGHT_BUTTON_X 100
-#define SCROLL_RIGHT_BUTTON_W 32
-#define SCROLL_RIGHT_BUTTON_Y 100
-#define SCROLL_RIGHT_BUTTON_H 32
-#define SCROLL_LEFT_BUTTON_X 100
-#define SCROLL_LEFT_BUTTON_W 32
-#define SCROLL_LEFT_BUTTON_Y 132
-#define SCROLL_LEFT_BUTTON_H 32
-#define SCROLL_DOWN_BUTTON_X 100
-#define SCROLL_DOWN_BUTTON_W 32
-#define SCROLL_DOWN_BUTTON_Y 164
-#define SCROLL_DOWN_BUTTON_H 32
-#define SCROLL_UP_BUTTON_X 100
-#define SCROLL_UP_BUTTON_W 32
-#define SCROLL_UP_BUTTON_Y 196
-#define SCROLL_UP_BUTTON_H 32
-
 #define SHUFFLE_MAPPOINT_COUNT 4
 
 /******* Buildings // GROUPS ************/ 
@@ -1039,10 +935,6 @@
 	     (group == GROUP_TREE2) || \
 	     (group == GROUP_TREE3))
 
-#define MOUSE_TYPE_NORMAL 1
-#define MOUSE_TYPE_SQUARE 2
-#define MOUSE_BUTTON_REPEAT 4
-
 #define red(x) (32 + x)
 #define green(x) (64 + x)
 #define yellow(x) (96 + x)

Modified: trunk/src/lincity/lintypes.cpp
===================================================================
--- trunk/src/lincity/lintypes.cpp	2007-12-16 14:04:00 UTC (rev 1319)
+++ trunk/src/lincity/lintypes.cpp	2007-12-16 17:53:21 UTC (rev 1320)
@@ -12,6 +12,7 @@
 #include "tinygettext/gettext.hpp"
 #include "fileutil.h"
 #include "gui_interface/readpng.h"
+#include "ldsvguts.h"
 
 struct TYPE main_types[NUM_OF_TYPES];
 

Modified: trunk/src/lincity/simulate.cpp
===================================================================
--- trunk/src/lincity/simulate.cpp	2007-12-16 14:04:00 UTC (rev 1319)
+++ trunk/src/lincity/simulate.cpp	2007-12-16 17:53:21 UTC (rev 1320)
@@ -1235,18 +1235,3 @@
     MP_INFO(x, y).int_2 = fromy;
 }
 
-#ifdef DEBUG
-/* AL1 : unused in NG 1.1.2 */
-static void debug_mappoints(void)
-{
-    int x, y;
-    for (x = 0; x < WORLD_SIDE_LEN; x++) {
-        for (y = 0; y < WORLD_SIDE_LEN; y++) {
-            if ((MP_TYPE(x, y) < 0) || (MP_TYPE(x, y) > 400)) {
-                printf("Error in mappoint %d %d (%d)\n", x, y, MP_TYPE(x, y));
-                exit(-1);
-            }
-        }
-    }
-}
-#endif

Modified: trunk/src/lincity-ng/Dialog.cpp
===================================================================
--- trunk/src/lincity-ng/Dialog.cpp	2007-12-16 14:04:00 UTC (rev 1319)
+++ trunk/src/lincity-ng/Dialog.cpp	2007-12-16 17:53:21 UTC (rev 1320)
@@ -32,6 +32,7 @@
 #include "lincity/fileutil.h"
 #include "lincity/simulate.h"
 #include "lincity/lclib.h"
+#include "lincity/ldsvguts.h"
 
 #include "gui_interface/shared_globals.h"
 

Modified: trunk/src/lincity-ng/MainLincity.cpp
===================================================================
--- trunk/src/lincity-ng/MainLincity.cpp	2007-12-16 14:04:00 UTC (rev 1319)
+++ trunk/src/lincity-ng/MainLincity.cpp	2007-12-16 17:53:21 UTC (rev 1320)
@@ -97,7 +97,10 @@
  */
 bool loadCityNG( std::string filename ){
     if( file_exists( const_cast<char*>( filename.c_str()) ) ){
-        load_city(const_cast<char*>(filename.c_str()));
+        if (false)
+            load_city(const_cast<char*>(filename.c_str()));
+        else
+            load_city_2(const_cast<char*>(filename.c_str()));
         update_avail_modules(0);
         GameView* gv = getGameView();
         if( gv ){ gv->readOrigin(); }

Modified: trunk/src/lincity-ng/main.cpp
===================================================================
--- trunk/src/lincity-ng/main.cpp	2007-12-16 14:04:00 UTC (rev 1319)
+++ trunk/src/lincity-ng/main.cpp	2007-12-16 17:53:21 UTC (rev 1320)
@@ -44,6 +44,7 @@
 #include "Sound.hpp"
 #include "Config.hpp"
 #include "PBar.hpp"
+#include "lincity/ldsvguts.h"
 
 #ifdef ENABLE_BINRELOC
 #include "binreloc.h"
@@ -81,17 +82,18 @@
 
     // Initialize physfs (this is a slightly modified version of
     // PHYSFS_setSaneConfig
-    const char* application = /* PACKAGE_NAME */ "lincity";
+    const char* application = LC_SAVE_DIR;
     const char* userdir = PHYSFS_getUserDir();
     const char* dirsep = PHYSFS_getDirSeparator();
     char* writedir = new char[strlen(userdir) + strlen(application) + 2];
 
     // Set configuration directory
-    sprintf(writedir, "%s.%s", userdir, application);
+    //sprintf(writedir, "%s.%s", userdir, application);
+    sprintf(writedir, "%s%s", userdir, application);
     if(!PHYSFS_setWriteDir(writedir)) {
         // try to create the directory
         char* mkdir = new char[strlen(application) + 2];
-        sprintf(mkdir, ".%s", application);
+        sprintf(mkdir, "%s", application);
         if(!PHYSFS_setWriteDir(userdir) || !PHYSFS_mkdir(mkdir)) {
             std::ostringstream msg;
             msg << "Failed creating configuration directory '" <<



From alainb at mail.berlios.de  Sun Dec 16 19:39:29 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sun, 16 Dec 2007 19:39:29 +0100
Subject: [Lincity-ng-commit] r1321 - in trunk: data/gui src/lincity
Message-ID: <200712161839.lBGIdTtD029245@sheep.berlios.de>

Author: alainb
Date: 2007-12-16 19:39:28 +0100 (Sun, 16 Dec 2007)
New Revision: 1321

Added:
   trunk/data/gui/too-old.xml
Modified:
   trunk/src/lincity/simulate.cpp
Log:
WIP add warning 'too-old' just in case...

Added: trunk/data/gui/too-old.xml
===================================================================
--- trunk/data/gui/too-old.xml	2007-12-16 17:53:21 UTC (rev 1320)
+++ trunk/data/gui/too-old.xml	2007-12-16 18:39:28 UTC (rev 1321)
@@ -0,0 +1,49 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!--
+WARNING: This file is automatically generated. Do not edit!
+-->
+<Window xmlns="http://lincity-ng.berlios.de/gui" border="5" titlesize="25" width="700" height="200">
+  <title>
+    <Document>
+      <Paragraph style="title" translatable="yes" halign="center" name="DialogTitle">Warning</Paragraph>
+    </Document>
+  </title>
+  <title-background>
+    <Gradient from="#ff0000ff" to="#88776655" direction="left-right"/>
+  </title-background>
+  <background>
+    <FilledRectangle color="#ffffffbb"/>
+  </background>
+  <contents>
+    <TableLayout rows="2" cols="1">
+      <rowsize row="2" fixed="50"/>
+      <cell row="1" col="1">
+        <TableLayout xmlns:xsd="http://www.w3.org/2001/XMLSchema" rows="1" cols="2">
+          <colsize col="1" fixed="95"/>
+          <cell row="1" col="1">
+            <Image src="images/gui/dialogs/warning.png"/>
+          </cell>
+          <cell row="1" col="2">
+            <Document style="message">
+                <p style="messagebold" translatable="yes">Sorry, the game you wanted is too old. Cannot load it. Still play with previous game.</p>
+              <p xmlns="" translatable="yes"> </p>
+              <p name="ExtraText"/>
+            </Document>
+          </cell>
+        </TableLayout>
+      </cell>
+      <cell row="2" col="1">
+        <TableLayout xmlns:xsd="http://www.w3.org/2001/XMLSchema" rows="1" cols="1">
+          <cell row="1" col="1">
+            <Button name="Ok">
+              <text-caption style="dialogbutton" translatable="yes">Ok</text-caption>
+              <image src="images/gui/dialogs/yesbutton.png"/>
+              <image-hover src="images/gui/dialogs/yesbutton-hover.png"/>
+              <image-clicked src="images/gui/dialogs/yesbutton-clicked.png"/>
+            </Button>
+          </cell>
+        </TableLayout>
+      </cell>
+    </TableLayout>
+  </contents>
+</Window>

Modified: trunk/src/lincity/simulate.cpp
===================================================================
--- trunk/src/lincity/simulate.cpp	2007-12-16 17:53:21 UTC (rev 1320)
+++ trunk/src/lincity/simulate.cpp	2007-12-16 18:39:28 UTC (rev 1321)
@@ -79,10 +79,6 @@
 static void set_mappoint_used(int fromx, int fromy, int x, int y);
 static void setup_ground(void);
 
-#ifdef DEBUG
-        static void debug_mappoints(void); /* AL1: NG 1.1.2 compiler warns that this is unused */
-#endif
-
 #define IS_RIVER(x,y) (MP_INFO(x,y).flags & FLAG_IS_RIVER)
 
 /* ---------------------------------------------------------------------- *



From alainb at mail.berlios.de  Sun Dec 16 23:50:30 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Sun, 16 Dec 2007 23:50:30 +0100
Subject: [Lincity-ng-commit] r1322 - in trunk/src: lincity lincity-ng
Message-ID: <200712162250.lBGMoUOC009740@sheep.berlios.de>

Author: alainb
Date: 2007-12-16 23:50:29 +0100 (Sun, 16 Dec 2007)
New Revision: 1322

Added:
   trunk/src/lincity/loadsave.h
Modified:
   trunk/src/lincity-ng/Dialog.cpp
   trunk/src/lincity-ng/MainLincity.cpp
   trunk/src/lincity-ng/main.cpp
   trunk/src/lincity/engglobs.h
   trunk/src/lincity/fileutil.cpp
   trunk/src/lincity/ldsvguts.cpp
   trunk/src/lincity/ldsvguts.h
   trunk/src/lincity/lin-city.h
   trunk/src/lincity/lintypes.cpp
   trunk/src/lincity/loadsave.cpp
   trunk/src/lincity/simulate.cpp
   trunk/src/lincity/simulate.h
Log:
load old or new games, and save in ~/lincity-ng with new format

Modified: trunk/src/lincity/engglobs.h
===================================================================
--- trunk/src/lincity/engglobs.h	2007-12-16 18:39:28 UTC (rev 1321)
+++ trunk/src/lincity/engglobs.h	2007-12-16 22:50:29 UTC (rev 1322)
@@ -39,6 +39,7 @@
 
 extern int total_time;  // game time
 extern int deadline;    // + 10 years to upgrade with waterwell everywhere
+extern int flag_warning;// flag to send a message to player.
 
 extern int population, starving_population;
 extern int housed_population;

Modified: trunk/src/lincity/fileutil.cpp
===================================================================
--- trunk/src/lincity/fileutil.cpp	2007-12-16 18:39:28 UTC (rev 1321)
+++ trunk/src/lincity/fileutil.cpp	2007-12-16 22:50:29 UTC (rev 1322)
@@ -90,7 +90,7 @@
 //#include "cliglobs.h"
 #include "engglobs.h"
 #include "fileutil.h"
-#include "ldsvguts.h"
+#include "loadsave.h"
 
 /* GCS: This is from dcgettext.c in the gettext package.      */
 /* XPG3 defines the result of `setlocale (category, NULL)' as:
@@ -178,41 +178,6 @@
     }
 }
 
-#if 0
-void                            //unused function
-gunzip_file(char *f1, char *f2)
-{
-    int ret_value = execute_command("gzip -c -d", f1, ">", f2);
-    if (ret_value != 0) {
-        /* GCS FIX:  Need to make do_error into var_args fn? */
-        printf("Tried to gzip -c -d %s > %s\n", f1, f2);
-        do_error("Can't gunzip requested file");
-    }
-}
-
-FILE *fopen_read_gzipped(char *fn)
-{
-    FILE *fp;
-
-    const char *cmd_str = "gzip -d -c < %s 2> /dev/null";
-    char *cmd = (char *)malloc(strlen(cmd_str) + strlen(fn) + 1);
-
-    sprintf(cmd, cmd_str, fn);
-    fp = popen(cmd, "r");
-    if (fp == NULL) {
-        fprintf(stderr, "Failed to open pipe cmd: %s\n", cmd);
-    }
-    free(cmd);
-
-    return fp;
-}
-
-void fclose_read_gzipped(FILE * fp)
-{
-    pclose(fp);
-}
-#endif
-
 int directory_exists(char *dir)
 {
 #if defined (WIN32)
@@ -573,112 +538,6 @@
     return (graphic);
 }
 
-void load_lincityrc(void)
-{
-    //FIXME: this whole function should be moved to oldgui/*, because it contains only things concerning the old gui 
-#if 0
-    FILE *fp;
-    int arg;
-    char buf[128];
-
-    if ((fp = fopen(lincityrc_file, "r")) == 0) {
-        save_lincityrc();
-        return;
-    }
-    //FIXME: this whole function should be moved to oldgui/*, because it contains only things concerning the old gui 
-
-    while (fgets(buf, 128, fp)) {
-        if (sscanf(buf, "overwrite_transport=%d", &arg) == 1) {
-            overwrite_transport_flag = !!arg;
-            continue;
-        }
-        if (sscanf(buf, "no_init_help=%d", &arg) == 1) {
-            // Careful here ... 
-            no_init_help = !!arg;
-            continue;
-        }
-        if (sscanf(buf, "skip_splash_screen=%d", &arg) == 1) {
-            skip_splash_screen = !!arg;
-            continue;
-        }
-        if (sscanf(buf, "suppress_firsttime_module_help=%d", &arg) == 1) {
-            suppress_firsttime_module_help = !!arg;
-            continue;
-        }
-        if (sscanf(buf, "suppress_popups=%d", &arg) == 1) {
-            suppress_popups = !!arg;
-            continue;
-        }
-        if (sscanf(buf, "time_multiplex_stats=%d", &arg) == 1) {
-            time_multiplex_stats = !!arg;
-            continue;
-        }
-        if (sscanf(buf, "x_confine_pointer=%d", &arg) == 1) {
-            confine_flag = !!arg;
-            continue;
-        }
-        if (sscanf(buf, "pix_double=%d", &arg) == 1) {
-            pix_double = !!arg;
-            continue;
-        }
-        if (sscanf(buf, "borderx=%d", &arg) == 1) {
-            if (borderx >= 0) {
-                borderx = arg;
-            }
-            continue;
-        }
-        if (sscanf(buf, "bordery=%d", &arg) == 1) {
-            if (bordery >= 0) {
-                bordery = arg;
-            }
-            continue;
-        }
-    }
-    fclose(fp);
-#endif
-}
-
-void save_lincityrc(void)
-{
-    //FIXME: this whole function should be moved to oldgui/*, because it contains only things concerning the old gui 
-
-#if 0
-    FILE *fp;
-
-    if ((fp = fopen(lincityrc_file, "w")) == 0) {
-        return;
-    }
-
-    fprintf(fp,
-            "# Set this if you want to be able to overwrite one\n"
-            "# kind of transport with another.\n" "overwrite_transport=%d\n\n", overwrite_transport_flag);
-    fprintf(fp, "# Set this if you don't want the opening help screen.\n" "no_init_help=%d\n\n", no_init_help);
-    fprintf(fp,
-            "# Set this if you don't want the opening splash screen.\n"
-            "skip_splash_screen=%d\n\n", skip_splash_screen);
-    fprintf(fp,
-            "# Set this if you don't want help the first time you\n"
-            "# click to place an item.\n" "suppress_firsttime_module_help=%d\n\n", suppress_firsttime_module_help);
-    fprintf(fp,
-            "# Set this if don't want modal dialog boxes which you\n"
-            "# are required to click OK.  Instead, report the dialog\n"
-            "# box information to the message area.\n" "suppress_popups=%d\n\n", suppress_popups);
-    fprintf(fp,
-            "# Set this if want the different statistic windows to cycle\n"
-            "# through the right panel.\n" "time_multiplex_stats=%d\n\n", time_multiplex_stats);
-    fprintf(fp,
-            "# (X Windows and WIN32 only) Set this if you want pix doubling,\n"
-            "# where each pixel is drawn as a 2x2 square.\n" "pix_double=%d\n\n", pix_double);
-    fprintf(fp,
-            "# (X Windows and WIN32 only) Set this if you want a blank area\n"
-            "# around the playing area.\n" "borderx=%d\n" "bordery=%d\n\n", borderx, bordery);
-    fprintf(fp,
-            "# (X Windows only) Set this if you want to confine the pointer\n"
-            "# to within the window.\n" "x_confine_pointer=%d\n\n", confine_flag);
-    fclose(fp);
-#endif
-}
-
 void undosify_string(char *s)
 {
     /* Convert '\r\n' to '\n' in string */

Modified: trunk/src/lincity/ldsvguts.cpp
===================================================================
--- trunk/src/lincity/ldsvguts.cpp	2007-12-16 18:39:28 UTC (rev 1321)
+++ trunk/src/lincity/ldsvguts.cpp	2007-12-16 22:50:29 UTC (rev 1322)
@@ -1,6 +1,6 @@
 /* ---------------------------------------------------------------------- *
  * ldsvguts.c
- * This file is part of lincity.
+ * This file is part of lincity-ng.
  * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
  * ---------------------------------------------------------------------- */
 
@@ -77,6 +77,9 @@
 #include "lincity-ng/ErrorInterface.hpp"
 #include "stats.h"
 #include "ldsvguts.h"
+#include "loadsave.h"
+#include "simulate.h"
+#include "engine.h"
 
 #if defined (WIN32) && !defined (NDEBUG)
 #define START_FAST_SPEED 1
@@ -89,271 +92,24 @@
 #define SI_YELLOW 255
 
 /* Extern resources */
-extern int yn_dial_box(const char *, const char *, const char *, const char *);
 extern void ok_dial_box(const char *, int, const char *);
 extern void prog_box(const char *, int);
 
 extern void print_total_money(void);
 extern int count_groups(int);
 extern void reset_animation_times(void);
-extern void upgrade_to_v2(void);
 
 /* ---------------------------------------------------------------------- *
  * Private Fn Prototypes
  * ---------------------------------------------------------------------- */
-void dump_screen(void);
-int verify_city(char *cname);
+void upgrade_to_v2 (void);
 
 /* ---------------------------------------------------------------------- *
- * Private Global Variables
- * ---------------------------------------------------------------------- */
-
-char save_names[10][42];
-
-/* ---------------------------------------------------------------------- *
  * Public functions
  * ---------------------------------------------------------------------- */
-void remove_scene(char *cname)
-{
-    char *s;
-    int l;
-    if ((l = strlen(cname)) < 2)        /* Thanks to Chris J. Kiick */
-        return;
 
-    if ((s = (char *)malloc(lc_save_dir_len + l + 16)) == 0)
-        malloc_failure();
-    sprintf(s, "%s%c%s", lc_save_dir, PATH_SLASH, cname);
-    remove(s);
-    free(s);
-}
-
-void save_city_raw(char *cname)
+void load_city_old(char *cname)
 {
-    int x, y, q, n, p;
-    unsigned int z;
-    gzFile ofile = gzopen(cname, "wb");
-    if (ofile == NULL) {
-        printf(_("Save file <%s> - "), cname);
-        do_error(_("Can't open save file!"));
-    }
-    /* save without waterwell are in NG 1.1 format, eg scenario good_time is ver 98 when loaded */
-       //if (ldsv_version < VERSION_INT)
-       //   ldsv_version = VERSION_INT;
-    /* Now we have upgraded game */
-    ldsv_version = WATERWELL_V2;
-
-    gzprintf(ofile, "%d\n", ldsv_version);
-    q = sizeof(Map_Point_Info);
-    prog_box(_("Saving scene"), 0);
-    check_endian();
-    for (x = 0; x < WORLD_SIDE_LEN; x++) {
-        for (y = 0; y < WORLD_SIDE_LEN; y++) {
-            for (z = 0; z < sizeof(int); z++) {
-                n = *(((unsigned char *)&MP_INFO(x, y).population) + z);
-                gzprintf(ofile, "%d\n", n);
-            }
-            for (z = 0; z < sizeof(int); z++) {
-                n = *(((unsigned char *)&MP_INFO(x, y).flags) + z);
-                gzprintf(ofile, "%d\n", n);
-            }
-            for (z = 0; z < sizeof(unsigned short); z++) {
-                n = *(((unsigned char *)&MP_INFO(x, y).coal_reserve) + z);
-                gzprintf(ofile, "%d\n", n);
-            }
-            for (z = 0; z < sizeof(unsigned short); z++) {
-                n = *(((unsigned char *)&MP_INFO(x, y).ore_reserve) + z);
-                gzprintf(ofile, "%d\n", n);
-            }
-            for (z = 0; z < sizeof(int); z++) {
-                n = *(((unsigned char *)&MP_INFO(x, y).int_1) + z);
-                gzprintf(ofile, "%d\n", n);
-            }
-            for (z = 0; z < sizeof(int); z++) {
-                n = *(((unsigned char *)&MP_INFO(x, y).int_2) + z);
-                gzprintf(ofile, "%d\n", n);
-            }
-            for (z = 0; z < sizeof(int); z++) {
-                n = *(((unsigned char *)&MP_INFO(x, y).int_3) + z);
-                gzprintf(ofile, "%d\n", n);
-            }
-            for (z = 0; z < sizeof(int); z++) {
-                n = *(((unsigned char *)&MP_INFO(x, y).int_4) + z);
-                gzprintf(ofile, "%d\n", n);
-            }
-            for (z = 0; z < sizeof(int); z++) {
-                n = *(((unsigned char *)&MP_INFO(x, y).int_5) + z);
-                gzprintf(ofile, "%d\n", n);
-            }
-            for (z = 0; z < sizeof(int); z++) {
-                n = *(((unsigned char *)&MP_INFO(x, y).int_6) + z);
-                gzprintf(ofile, "%d\n", n);
-            }
-            for (z = 0; z < sizeof(int); z++) {
-                n = *(((unsigned char *)&MP_INFO(x, y).int_7) + z);
-                gzprintf(ofile, "%d\n", n);
-            }
-            gzprintf(ofile, "%d\n", (int)MP_POL(x, y));
-            gzprintf(ofile, "%d\n", (int)MP_TYPE(x, y));
-        }
-        prog_box("", (90 * x) / WORLD_SIDE_LEN);
-    }
-    check_endian();             /* we have to put the byte order back. */
-
-    gzprintf(ofile, "%d\n", main_screen_originx);
-    gzprintf(ofile, "%d\n", main_screen_originy);
-    gzprintf(ofile, "%d\n", total_time);
-    for (x = 0; x < MAX_NUMOF_SUBSTATIONS; x++) {
-        gzprintf(ofile, "%d\n", substationx[x]);
-        gzprintf(ofile, "%d\n", substationy[x]);
-    }
-    prog_box("", 92);
-    gzprintf(ofile, "%d\n", numof_substations);
-    for (x = 0; x < MAX_NUMOF_MARKETS; x++) {
-        gzprintf(ofile, "%d\n", marketx[x]);
-        gzprintf(ofile, "%d\n", markety[x]);
-    }
-    prog_box("", 94);
-    gzprintf(ofile, "%d\n", numof_markets);
-    gzprintf(ofile, "%d\n", people_pool);
-    gzprintf(ofile, "%d\n", total_money);
-    gzprintf(ofile, "%d\n", income_tax_rate);
-    gzprintf(ofile, "%d\n", coal_tax_rate);
-    gzprintf(ofile, "%d\n", dole_rate);
-    gzprintf(ofile, "%d\n", transport_cost_rate);
-    gzprintf(ofile, "%d\n", goods_tax_rate);
-    gzprintf(ofile, "%d\n", export_tax);
-    gzprintf(ofile, "%d\n", export_tax_rate);
-    gzprintf(ofile, "%d\n", import_cost);
-    gzprintf(ofile, "%d\n", import_cost_rate);
-    gzprintf(ofile, "%d\n", tech_level);
-    gzprintf(ofile, "%d\n", tpopulation);
-    gzprintf(ofile, "%d\n", tstarving_population);
-    gzprintf(ofile, "%d\n", tunemployed_population);
-    gzprintf(ofile, "%d\n", 0); /* waste_goods is obsolete */
-    gzprintf(ofile, "%d\n", power_made);
-    gzprintf(ofile, "%d\n", power_used);
-    gzprintf(ofile, "%d\n", coal_made);
-    gzprintf(ofile, "%d\n", coal_used);
-    gzprintf(ofile, "%d\n", goods_made);
-    gzprintf(ofile, "%d\n", goods_used);
-    gzprintf(ofile, "%d\n", ore_made);
-    gzprintf(ofile, "%d\n", ore_used);
-    gzprintf(ofile, "%d\n", 0); /* Removed diff_old_population, version 1.12 */
-
-    prog_box("", 96);
-    /* Changed, version 1.12 */
-    gzprintf(ofile, "%d\n", monthgraph_size);
-    for (x = 0; x < monthgraph_size; x++) {
-        gzprintf(ofile, "%d\n", monthgraph_pop[x]);
-        gzprintf(ofile, "%d\n", monthgraph_starve[x]);
-        gzprintf(ofile, "%d\n", monthgraph_nojobs[x]);
-        gzprintf(ofile, "%d\n", monthgraph_ppool[x]);
-    }
-    prog_box("", 98);
-    gzprintf(ofile, "%d\n", rockets_launched);
-    gzprintf(ofile, "%d\n", rockets_launched_success);
-    gzprintf(ofile, "%d\n", coal_survey_done);
-    for (x = 0; x < PBAR_DATA_SIZE; x++)
-        for (p = 0; p < NUM_PBARS; p++)
-            gzprintf(ofile, "%d\n", pbars[p].data[x]);
-
-    prog_box("", 99);
-
-    for (p = 0; p < NUM_PBARS; p++) {
-        gzprintf(ofile, "%d\n", pbars[p].oldtot);
-        gzprintf(ofile, "%d\n", pbars[p].diff);
-    }
-
-    gzprintf(ofile, "%d\n", cheat_flag);
-    gzprintf(ofile, "%d\n", total_pollution_deaths);
-    gzprintf(ofile, "%f\n", pollution_deaths_history);
-    gzprintf(ofile, "%d\n", total_starve_deaths);
-    gzprintf(ofile, "%f\n", starve_deaths_history);
-    gzprintf(ofile, "%d\n", total_unemployed_years);
-    gzprintf(ofile, "%f\n", unemployed_history);
-    gzprintf(ofile, "%d\n", max_pop_ever);
-    gzprintf(ofile, "%d\n", total_evacuated);
-    gzprintf(ofile, "%d\n", total_births);
-    for (x = 0; x < NUMOF_MODULES; x++)
-        gzprintf(ofile, "%d\n", module_help_flag[x]);
-    gzprintf(ofile, "%d\n", 0); /* dummy values */
-
-    gzprintf(ofile, "%d\n", 0); /* backward compatibility */
-
-    if (strlen(given_scene) > 1)
-        gzprintf(ofile, "%s\n", given_scene);
-    else
-        gzprintf(ofile, "dummy\n");     /* 1 */
-
-    gzprintf(ofile, "%d\n", highest_tech_level);        /* 2 */
-
-    gzprintf(ofile, "sust %d %d %d %d %d %d %d %d %d %d\n", sust_dig_ore_coal_count, sust_port_count, sust_old_money_count, sust_old_population_count, sust_old_tech_count, sust_fire_count, sust_old_money, sust_old_population, sust_old_tech, sustain_flag); /* 3 */
-
-    if (ldsv_version == WATERWELL_V2) {
-        gzprintf(ofile, "arid %d %d\n", global_aridity, global_mountainity);
-#ifdef DEBUG
-        fprintf(stderr," arid %d, mountain %d \n", global_aridity, global_mountainity);
-#endif
-        for (x = 0; x < WORLD_SIDE_LEN; x++) {
-            for (y = 0; y < WORLD_SIDE_LEN; y++) {
-                gzprintf(ofile,"%d %d %d %d %d %d %d %d %d %d %d %d\n"
-                        , ground[x][y].altitude
-                        , ground[x][y].ecotable
-                        , ground[x][y].wastes
-                        , ground[x][y].pollution
-                        , ground[x][y].water_alt
-                        , ground[x][y].water_pol
-                        , ground[x][y].water_wast
-                        , ground[x][y].water_next
-                        , ground[x][y].int1
-                        , ground[x][y].int2
-                        , ground[x][y].int3
-                        , ground[x][y].int4
-                        );
-#ifdef DEBUG
-                if (x == 10 && y == 10)
-                    fprintf(stderr," alt %d, int4 %d \n", ground[x][y].altitude, ground[x][y].int4);
-#endif
-            }
-        }
-    } else {
-        gzprintf(ofile, "dummy\n");     /* 4 */
-    }
-    gzprintf(ofile, "dummy\n"); /* 5 */
-
-    gzprintf(ofile, "dummy\n"); /* 6 */
-
-    gzprintf(ofile, "dummy\n"); /* 7 */
-
-    gzprintf(ofile, "dummy\n"); /* 8 */
-
-    gzprintf(ofile, "dummy\n"); /* 9 */
-
-    gzprintf(ofile, "dummy\n"); /* 10 */
-
-    gzclose(ofile);
-    prog_box("", 100);
-}
-
-void save_city(char *cname)
-{
-    char *s;
-    int l;
-
-    if ((l = strlen(cname)) < 2)
-        return;
-    if ((s = (char *)malloc(lc_save_dir_len + l + 16)) == 0)
-        malloc_failure();
-
-    sprintf(s, "%s%c%s", lc_save_dir, PATH_SLASH, cname);
-
-    //save_city_raw(s);
-    save_city_2(s);
-    free(s);
-}
-
-void load_city(char *cname)
-{
     unsigned long q;
     int i, x, y, n, p;
     unsigned int z;
@@ -362,8 +118,9 @@
     int dummy;
     gzFile gzfile;
     char s[256];
-    int need_upgrade=true;
 
+    fprintf(stderr, "old file format, so i will backup, then load with old function, and then convert to new format\n");
+ 
     gzfile = gzopen(cname, "rb");
     if (gzfile == NULL) {
         printf(_("Can't open <%s> (gzipped)"), cname);
@@ -380,23 +137,14 @@
     /* Add version to shared global variables for playing/saving games without waterwell */
     sscanf(gzgets(gzfile, s, 256), "%d", &ldsv_version);
     if (ldsv_version < MIN_LOAD_VERSION) {
-        ok_dial_box("too-old.mes", BAD, 0L);
+        //ok_dial_box("too-old.mes", BAD, 0L);  // FIXME: AL1 screen is not set, so ok_dial_box fails
+                                                //        => we have an error message, but not the good one ;-)
+        fprintf(stderr, "Too old file format, cannot load it, sorry\n");
         gzclose(gzfile);
         return;
     }
 
     fprintf(stderr, " ldsv_version = %i \n", ldsv_version);
-    /*if (ldsv_version < MIN_WATERWELL_VERSION) {
-        use_waterwell = false;
-    } else {
-        use_waterwell = true;
-        // needed until it is written in the saved file
-        // in case of load after having played an old game
-        if (ldsv_version >= WATERWELL_V2)
-            need_upgrade = false;
-    }*/
-    if (ldsv_version >= WATERWELL_V2)
-            need_upgrade = false;
     use_waterwell = true;
 
     init_pbars();
@@ -735,24 +483,10 @@
                                  * FIXME: move all initialisation elsewhere, in 
                                  *    engine.cpp or simulate.cpp.
                                  */
-    if (need_upgrade)
-        upgrade_to_v2();
+    upgrade_to_v2();
 
 }
 
-/*
-void load_saved_city(char *s)
-{
-    char *cname = (char *)malloc(strlen(lc_save_dir) + strlen(s) + 2);
-    sprintf(cname, "%s%c%s", lc_save_dir, PATH_SLASH, s);
-    if (false) 
-        load_city(cname);
-    else
-        load_city_2(cname);
-    free(cname);
-}
-*/
-
 void reset_animation_times(void)
 {
     int x, y;
@@ -763,64 +497,8 @@
             if (MP_GROUP(x, y) == GROUP_FIRE)
                 MP_INFO(x, y).int_3 = 0;
         }
-
-         /*   if (MP_GROUP_IS_RESIDENCE(x, y))
-                MP_INFO(x, y).int_3 = 0;//
-            else if (MP_GROUP(x, y) == GROUP_WINDMILL)
-                MP_INFO(x, y).int_4 = 0;//
-            else if (MP_GROUP(x, y) == GROUP_BLACKSMITH)
-                MP_INFO(x, y).int_4 = 0;//
-            else if (MP_GROUP(x, y) == GROUP_MILL)
-                MP_INFO(x, y).int_4 = 0;//
-            else if (MP_GROUP(x, y) == GROUP_POTTERY)
-                MP_INFO(x, y).int_4 = 0;//
-            else if (MP_GROUP(x, y) == GROUP_CRICKET)
-                MP_INFO(x, y).int_4 = 0;//
-            else if (MP_GROUP(x, y) == GROUP_FIRESTATION)
-                MP_INFO(x, y).int_4 = 0;//
-            else if (MP_GROUP(x, y) == GROUP_FIRE) {
-                MP_INFO(x, y).int_1 = 0;//
-                MP_INFO(x, y).int_3 = 0;
-            } else if (MP_GROUP(x, y) == GROUP_COMMUNE)
-                MP_INFO(x, y).int_1 = 0;//
-            else if (MP_GROUP(x, y) == GROUP_ROCKET)
-                MP_INFO(x, y).int_5 = 0;//
-            else if (MP_GROUP(x, y) == GROUP_INDUSTRY_H)
-                MP_INFO(x, y).int_6 = 0;//
-            else if (MP_GROUP(x, y) == GROUP_INDUSTRY_L)
-                MP_INFO(x, y).int_7 = 0;//
-        }*/
 }
 
-/* Returns 1 if the city is proper version *//* FIXME: AL1 unused in NG 1.1 */
-int verify_city(char *cname)
-{
-    gzFile fp;
-    char *s;
-    char str[256];
-    int v;
-
-    if (strlen(cname) == 0) {
-        return 0;
-    }
-    if ((s = (char *)malloc(lc_save_dir_len + strlen(cname) + 2)) == 0)
-        malloc_failure();
-    sprintf(s, "%s%c%s", lc_save_dir, PATH_SLASH, cname);
-    if (!file_exists(s)) {
-        free(s);
-        return 0;
-    }
-    fp = gzopen(s, "r");
-    if (fp == NULL) {
-        v = 0;
-    } else if (1 != sscanf(gzgets(fp, str, 256), "%d", &v)) {
-        v = 0;
-    }
-    gzclose(fp);
-    free(s);
-    return v == VERSION_INT;
-}
-
 void check_endian(void)
 {
     static int flag = 0;
@@ -882,3 +560,96 @@
     *(cs++) = c2;
     *cs = c1;
 }
+
+void upgrade_to_v2 (void)
+{
+    // Follow order and logic of new_city
+    int x,y;
+    int alt0 = 0;
+    int mount;
+    int c;
+#define IS_RIVER(x,y) (MP_INFO(x,y).flags & FLAG_IS_RIVER)
+
+    global_mountainity= 10 + rand () % 300;
+    mount = global_mountainity;
+
+    // Grey border (not visible on the map, x = 0 , x = 99, y = 0, y = 99) 
+    for (x = 0; x < WORLD_SIDE_LEN; x++)
+        for (y = 0; y < WORLD_SIDE_LEN; y++) {
+            ALT(x,y) = 0;
+            if ( !GROUP_IS_BARE(MP_GROUP(x, y)) ) {
+                /* be nice, put water under all existing builings / farms / parks ... */
+                /* This may change according to global_aridity and distance_to_river */
+                MP_INFO(x,y).flags |= FLAG_HAS_UNDERGROUND_WATER;
+            }
+        }
+
+    /* Let 10 years in game time to put waterwells where needed, then starvation will occur */
+    deadline=total_time + 1200 * 10;
+    flag_warning = true; // warn player.
+
+    /* Upgrade ground[x][y].water_alt and .altitude */
+    /* choose this order for rivers and beach scenario 
+     *  = say the lowest part of the map is South-east
+     *    and the sea may have a slope :-) 
+     *     (strictly speaking this is true, but at much smaller order of magnitude */
+
+    /* River mouth is on south of the map */
+    y = WORLD_SIDE_LEN -2;
+    for (x = WORLD_SIDE_LEN - 1; x >=0; x--)
+        if ( IS_RIVER(x,y) )
+            ALT(x,y) = 1;
+
+    alt0 = 1;
+    #define max(X, Y) (X>Y?X:Y)
+    #define min(X, Y) (X>Y?Y:X)
+    for (y = WORLD_SIDE_LEN - 2; y >= 0; y--) {
+        for (x = WORLD_SIDE_LEN - 1; x >= 0; x--) {
+            if ( IS_RIVER(x,y) ) {
+                // attempt to find large area of water = lake or sea => slope = 0
+                c = 0;
+                int alt=0;
+                if (x < WORLD_SIDE_LEN - 2)  {
+                    if IS_RIVER(x + 1, y + 1) {
+                        c++;
+                        alt = max (alt, ALT(x+1, y+1));
+                    }
+                    if IS_RIVER(x + 1, y ) {
+                        c++;
+                        alt = max (alt, ALT(x+1, y));
+                    }
+                }
+                if IS_RIVER(x , y +1 ) {
+                    c++;
+                    alt = max (alt, ALT(x, y+1));
+                }
+                if (x > 1) {
+                    if IS_RIVER(x - 1, y+1 ) {
+                        c++;
+                        alt = max (alt, ALT(x-1, y+1));
+                    }
+                    if IS_RIVER(x - 1, y ) {
+                        c++;
+                        alt = max (alt, ALT(x-1, y));
+                    }
+                }
+                if (c == 0) {
+                    fprintf(stderr," Warning (not important): In upgrade_to_v2, c = 0, x = %d, y =%d\n", x, y);
+                    continue;
+                }
+                if (c <= 2) {
+                    alt0 = alt + rand() % ( 2 + mount / 100 );
+                    alt += rand() % ( 2 + mount / 100 );
+                    ALT(x,y) = max(alt, alt0);
+                    //fprintf(stderr, " x %d, y %d, alt %d, alt0 %d , c=%d \n", x, y, alt, alt0, c);
+                } else {
+                    //fprintf(stderr, " x %d, y %d, alt %d, alt0 %d\n", x, y, alt, alt0);
+                    ALT(x,y) = alt;
+                }
+            }
+        }
+        alt0 ++; // minimum slope toward south
+    }
+
+    setup_land();
+}

Modified: trunk/src/lincity/ldsvguts.h
===================================================================
--- trunk/src/lincity/ldsvguts.h	2007-12-16 18:39:28 UTC (rev 1321)
+++ trunk/src/lincity/ldsvguts.h	2007-12-16 22:50:29 UTC (rev 1322)
@@ -1,14 +1,21 @@
 /* ---------------------------------------------------------------------- *
- * ldsvguts.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
+ * old_ldsvguts.h
+ * This file is part of lincity-ng
  * ---------------------------------------------------------------------- */
 
-/* this is the saving facility */
+/* This is the OLD saving facility, before lincity-NG 1.91 */
+/* Used for reading old games and convert them to new format + data structure */
 
-#ifndef __ldsvguts_h__
-#define __ldsvguts_h__
+#ifndef __old_ldsvguts_h__
+#define __old_ldsvguts_h__
 
+
+/* Load corrections if version <= MM_MS_C_VER (max markets/substations) */
+#define MM_MS_C_VER 97
+
+/* Load corrections if version <= MG_C_VER (max monthgraph size) */
+#define MG_C_VER 111
+
 /* Don't load if < MIN_LOAD_VERSION */
 #define MIN_LOAD_VERSION 97
 
@@ -16,39 +23,6 @@
    the symbol VERSION in config.h */
 #define VERSION_INT 113
 
-/* Disable waterwell if version < MIN_WATERWELL_VERSION */
-#define MIN_WATERWELL_VERSION 1180
+void load_city_old(char *);
 
-/* New load/save format */
-#define WATERWELL_V2 1316
-
-
-#if defined (WIN32)
-#   define PATH_SLASH '\\'
-#   define PATH_SLASH_STRING "\\"
-#else
-#   define PATH_SLASH '/'
-#   define PATH_SLASH_STRING "/"
-#endif
-
-#define OLD_LC_SAVE_DIR "Lin-city"
-#if defined (WIN32)
-#    define LC_SAVE_DIR "SAVED_GAMES"
-#    define LINCITYRC_FILENAME "lincity-ng.ini"
-#else
-#    define LC_SAVE_DIR ".lincity-ng"
-#    define LINCITYRC_FILENAME ".lincity-ng_rc"
-#endif
-#define RESULTS_FILENAME "results"
-
-
-
-
-//void load_saved_city(char *s);
-void sanity_check(void);
-void save_city(char *);
-void save_city_2(char *);
-void load_city(char *);
-void load_city_2(char *);
-
-#endif /* __ldsvguts_h__ */
+#endif /* __old_ldsvguts_h__ */

Modified: trunk/src/lincity/lin-city.h
===================================================================
--- trunk/src/lincity/lin-city.h	2007-12-16 18:39:28 UTC (rev 1321)
+++ trunk/src/lincity/lin-city.h	2007-12-16 22:50:29 UTC (rev 1322)
@@ -28,13 +28,6 @@
         NO USER CONFIGURABLE OPTIONS BEYOND THIS POINT
        ************************************************
 */
-
-/* Load corrections if version <= MM_MS_C_VER (max markets/substations) */
-#define MM_MS_C_VER 97
-
-/* Load corrections if version <= MG_C_VER (max monthgraph size) */
-#define MG_C_VER 111
-
 #if defined (_MSC_VER)
 #   define snprintf _snprintf
 #endif
@@ -134,7 +127,6 @@
 #define MAIN_SCREEN_NORMAL_FLAG    (1)
 #define MAIN_SCREEN_EQUALS_MINI    (2)
 
-#define MAX_ICON_LEN 4096       /* AL1 unused in NG */
 #define WORLD_SIDE_LEN 100      /* Minimap size is hardcoded 200 pixel => some job to do ... */
 #define NUMOF_DAYS_IN_MONTH 100
 #define NUMOF_DAYS_IN_YEAR (NUMOF_DAYS_IN_MONTH*12)

Modified: trunk/src/lincity/lintypes.cpp
===================================================================
--- trunk/src/lincity/lintypes.cpp	2007-12-16 18:39:28 UTC (rev 1321)
+++ trunk/src/lincity/lintypes.cpp	2007-12-16 22:50:29 UTC (rev 1322)
@@ -12,7 +12,7 @@
 #include "tinygettext/gettext.hpp"
 #include "fileutil.h"
 #include "gui_interface/readpng.h"
-#include "ldsvguts.h"
+#include "loadsave.h"
 
 struct TYPE main_types[NUM_OF_TYPES];
 

Modified: trunk/src/lincity/loadsave.cpp
===================================================================
--- trunk/src/lincity/loadsave.cpp	2007-12-16 18:39:28 UTC (rev 1321)
+++ trunk/src/lincity/loadsave.cpp	2007-12-16 22:50:29 UTC (rev 1322)
@@ -76,7 +76,7 @@
 #include "gui_interface/pbar_interface.h"
 #include "lincity-ng/ErrorInterface.hpp"
 #include "stats.h"
-#include "ldsvguts.h"
+#include "loadsave.h"
 
 #if defined (WIN32) && !defined (NDEBUG)
 #define START_FAST_SPEED 1
@@ -102,6 +102,23 @@
 /* ---------------------------------------------------------------------- *
  * Public functions
  * ---------------------------------------------------------------------- */
+
+void save_city(char *cname)
+{
+    char *s;
+    int l;
+
+    if ((l = strlen(cname)) < 2)
+        return;
+    if ((s = (char *)malloc(lc_save_dir_len + l + 16)) == 0)
+        malloc_failure();
+
+    sprintf(s, "%s%c%s", lc_save_dir, PATH_SLASH, cname);
+
+    save_city_2(s);
+    free(s);
+}
+
 void save_city_2(char *cname)
 {
     int x, y, p;
@@ -230,10 +247,7 @@
 
     for (x = 0; x < NUMOF_MODULES; x++)
         gzprintf(ofile, "%d\n", module_help_flag[x]);
-    gzprintf(ofile, "%d\n", 0); /* dummy values */
 
-    gzprintf(ofile, "%d\n", 0); /* backward compatibility */
-
     if (strlen(given_scene) > 1)
         gzprintf(ofile, "%s\n", given_scene);
     else
@@ -278,8 +292,8 @@
 
     sscanf(gzgets(gzfile, s, 256), "%d", &ldsv_version);
     if (ldsv_version < WATERWELL_V2) {
-        ok_dial_box("too-old.mes", BAD, 0L); //FIXME: AL1 i guess this will crash as screen is not set */
         gzclose(gzfile);
+        load_city_old( cname );
         return;
     }
 
@@ -344,20 +358,14 @@
     sscanf(gzgets(gzfile, s, 256), "%d", &main_screen_originy);
 
     sscanf(gzgets(gzfile, s, 256), "%d", &total_time);
-    if (ldsv_version <= MM_MS_C_VER)
-        i = OLD_MAX_NUMOF_SUBSTATIONS;
-    else
-        i = MAX_NUMOF_SUBSTATIONS;
-    for (x = 0; x < i; x++) {
+
+    for (x = 0; x < MAX_NUMOF_SUBSTATIONS; x++) {
         sscanf(gzgets(gzfile, s, 256), "%d", &substationx[x]);
         sscanf(gzgets(gzfile, s, 256), "%d", &substationy[x]);
     }
     sscanf(gzgets(gzfile, s, 256), "%d", &numof_substations);
-    if (ldsv_version <= MM_MS_C_VER)
-        i = OLD_MAX_NUMOF_MARKETS;
-    else
-        i = MAX_NUMOF_MARKETS;
-    for (x = 0; x < i; x++) {
+
+    for (x = 0; x < MAX_NUMOF_MARKETS; x++) {
         sscanf(gzgets(gzfile, s, 256), "%d", &marketx[x]);
         sscanf(gzgets(gzfile, s, 256), "%d", &markety[x]);
     }
@@ -392,11 +400,7 @@
     housed_population = tpopulation / NUMOF_DAYS_IN_MONTH;
 
     /* Get size of monthgraph array */
-    if (ldsv_version <= MG_C_VER) {
-        i = 120;
-    } else {
-        sscanf(gzgets(gzfile, s, 256), "%d", &i);
-    }
+    sscanf(gzgets(gzfile, s, 256), "%d", &i);
     for (x = 0; x < i; x++) {
         /* If more entries in file than will fit on screen, 
            then we need to skip past them. */
@@ -411,14 +415,6 @@
             sscanf(gzgets(gzfile, s, 256), "%d", &monthgraph_nojobs[x]);
             sscanf(gzgets(gzfile, s, 256), "%d", &monthgraph_ppool[x]);
         }
-        /* If our save file is old, skip past obsolete diffgraph entries */
-        if (ldsv_version <= MG_C_VER) {
-            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_power[x] */
-            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_coal[x] */
-            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_goods[x] */
-            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_ore[x] */
-            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_population[x] */
-        }
     }
     /* If screen bigger than number of entries in file, pad with zeroes */
     while (x < monthgraph_size) {
@@ -436,7 +432,6 @@
         for (p = 0; p < num_pbars; p++) {
             sscanf(gzgets(gzfile, s, 256), "%d", &(pbar_tmp));
             update_pbar(p, pbar_tmp, 1);
-/*	    sscanf( gzgets( gzfile, s, 256 ), "%d", &(pbars[p].data[x])); */
         }
     }
 
@@ -458,10 +453,9 @@
     sscanf(gzgets(gzfile, s, 256), "%d", &max_pop_ever);
     sscanf(gzgets(gzfile, s, 256), "%d", &total_evacuated);
     sscanf(gzgets(gzfile, s, 256), "%d", &total_births);
+
     for (x = 0; x < NUMOF_MODULES; x++)
         sscanf(gzgets(gzfile, s, 256), "%d", &(module_help_flag[x]));
-    sscanf(gzgets(gzfile, s, 256), "%d", &x);   /* just dummy reads */
-    sscanf(gzgets(gzfile, s, 256), "%d", &x);   /* for backwards compatibility. */
 
     sscanf(gzgets(gzfile, s, 256), "%128s", given_scene);
     if (strncmp(given_scene, "dummy", 5) == 0 || strlen(given_scene) < 3)

Added: trunk/src/lincity/loadsave.h
===================================================================
--- trunk/src/lincity/loadsave.h	2007-12-16 18:39:28 UTC (rev 1321)
+++ trunk/src/lincity/loadsave.h	2007-12-16 22:50:29 UTC (rev 1322)
@@ -0,0 +1,40 @@
+/* ---------------------------------------------------------------------- *
+ * loadsave.h
+ * This file is part of lincity-NG
+ * ---------------------------------------------------------------------- */
+
+/* This is the loading/saving facility */
+
+#ifndef __loadsave_h__
+#define __loadsave_h__
+
+#if defined (WIN32)
+#   define PATH_SLASH '\\'
+#   define PATH_SLASH_STRING "\\"
+#else
+#   define PATH_SLASH '/'
+#   define PATH_SLASH_STRING "/"
+#endif
+
+#if defined (WIN32)
+#    define LC_SAVE_DIR "SAVED_GAMES"
+#    define LINCITYRC_FILENAME "lincity-NG.ini"
+#else
+#    define LC_SAVE_DIR ".lincity-ng"
+#    define LINCITYRC_FILENAME ".lincity-NGrc"
+#endif
+#define RESULTS_FILENAME "results"
+
+
+/* New load/save format */
+#define WATERWELL_V2 1322
+
+
+//void load_saved_city(char *s);
+void save_city(char *);
+void save_city_2(char *);
+void load_city_2(char *);
+
+extern void load_city_old(char *);
+
+#endif /* __loadsave_h__ */

Modified: trunk/src/lincity/simulate.cpp
===================================================================
--- trunk/src/lincity/simulate.cpp	2007-12-16 18:39:28 UTC (rev 1321)
+++ trunk/src/lincity/simulate.cpp	2007-12-16 22:50:29 UTC (rev 1322)
@@ -47,7 +47,6 @@
 extern void ok_dial_box(const char *, int, const char *);
 
 /* AL1: they are all in engine.cpp */
-extern void connect_rivers(void);
 extern void do_daily_ecology(void);
 extern void do_pollution(void);
 extern void do_fire_health_cricket_power_cover(void);
@@ -71,7 +70,6 @@
 static void clear_game(void);
 static void nullify_mappoint(int x, int y);
 static void random_start(int *originx, int *originy);
-static void setup_land(void);
 static void coal_reserve_setup(void);
 static void ore_reserve_setup(void);
 static void setup_river(void);
@@ -192,98 +190,6 @@
 
 }
 
-void upgrade_to_v2 (void)
-{
-    // Follow order and logic of new_city
-    int x,y;
-    int alt0 = 0;
-    int mount;
-    int c;
-
-    global_mountainity= 10 + rand () % 300;
-    mount = global_mountainity;
-
-    // Grey border (not visible on the map, x = 0 , x = 99, y = 0, y = 99) 
-    for (x = 0; x < WORLD_SIDE_LEN; x++)
-        for (y = 0; y < WORLD_SIDE_LEN; y++) {
-            ALT(x,y) = 0;
-            if ( !GROUP_IS_BARE(MP_GROUP(x, y)) ) {
-                /* be nice, put water under all existing builings / farms / parks ... */
-                /* This may change according to global_aridity and distance_to_river */
-                MP_INFO(x,y).flags |= FLAG_HAS_UNDERGROUND_WATER;
-            }
-        }
-
-    /* Let 10 years in game time to put waterwells where needed, then starvation will occur */
-    deadline=total_time + 1200 * 10;
-    flag_warning = true; // warn player.
-
-    /* Upgrade ground[x][y].water_alt and .altitude */
-    /* choose this order for rivers and beach scenario 
-     *  = say the lowest part of the map is South-east
-     *    and the sea may have a slope :-) 
-     *     (strictly speaking this is true, but at much smaller order of magnitude */
-
-    /* River mouth is on south of the map */
-    y = WORLD_SIDE_LEN -2;
-    for (x = WORLD_SIDE_LEN - 1; x >=0; x--)
-        if ( IS_RIVER(x,y) )
-            ALT(x,y) = 1;
-
-    alt0 = 1;
-    #define max(X, Y) (X>Y?X:Y)
-    #define min(X, Y) (X>Y?Y:X)
-    for (y = WORLD_SIDE_LEN - 2; y >= 0; y--) {
-        for (x = WORLD_SIDE_LEN - 1; x >= 0; x--) {
-            if ( IS_RIVER(x,y) ) {
-                // attempt to find large area of water = lake or sea => slope = 0
-                c = 0;
-                int alt=0;
-                if (x < WORLD_SIDE_LEN - 2)  {
-                    if IS_RIVER(x + 1, y + 1) {
-                        c++;
-                        alt = max (alt, ALT(x+1, y+1));
-                    }
-                    if IS_RIVER(x + 1, y ) {
-                        c++;
-                        alt = max (alt, ALT(x+1, y));
-                    }
-                }
-                if IS_RIVER(x , y +1 ) {
-                    c++;
-                    alt = max (alt, ALT(x, y+1));
-                }
-                if (x > 1) {
-                    if IS_RIVER(x - 1, y+1 ) {
-                        c++;
-                        alt = max (alt, ALT(x-1, y+1));
-                    }
-                    if IS_RIVER(x - 1, y ) {
-                        c++;
-                        alt = max (alt, ALT(x-1, y));
-                    }
-                }
-                if (c == 0) {
-                    fprintf(stderr," error in upgrade_to_v2, c = 0, impossible, x = %d, y =%d\n", x, y);
-                    return;
-                }
-                if (c <= 2) {
-                    alt0 = alt + rand() % ( 2 + mount / 100 );
-                    alt += rand() % ( 2 + mount / 100 );
-                    ALT(x,y) = max(alt, alt0);
-                    fprintf(stderr, " x %d, y %d, alt %d, alt0 %d , c=%d \n", x, y, alt, alt0, c);
-                } else {
-                    fprintf(stderr, " x %d, y %d, alt %d, alt0 %d\n", x, y, alt, alt0);
-                    ALT(x,y) = alt;
-                }
-            }
-        }
-        alt0 ++; // minimum slope toward south
-    }
-
-    setup_land();
-}
-
 /* ---------------------------------------------------------------------- *
  * Private Functions
  * ---------------------------------------------------------------------- */
@@ -619,7 +525,6 @@
     /* Al1. NG 1.1 is this enough ? Are all global variables reseted ? */
     /* TODO reset screen, sustain info, max_tech when load scenario... */
     use_waterwell = true;
-    ldsv_version = WATERWELL_V2;
     global_aridity = 0;
     global_mountainity =0;
 }

Modified: trunk/src/lincity/simulate.h
===================================================================
--- trunk/src/lincity/simulate.h	2007-12-16 18:39:28 UTC (rev 1321)
+++ trunk/src/lincity/simulate.h	2007-12-16 22:50:29 UTC (rev 1322)
@@ -13,7 +13,9 @@
 void count_all_groups(int *group_count);
 void init_mappoint_array(void);
 void set_mappoint(int x, int y, short selected_type);
-void upgrade_to_v2(void);
 void do_rand_ecology(int x, int y);
+void setup_land(void);
 
+extern void connect_rivers(void);
+
 #endif /* __simulate_h__ */

Modified: trunk/src/lincity-ng/Dialog.cpp
===================================================================
--- trunk/src/lincity-ng/Dialog.cpp	2007-12-16 18:39:28 UTC (rev 1321)
+++ trunk/src/lincity-ng/Dialog.cpp	2007-12-16 22:50:29 UTC (rev 1322)
@@ -32,7 +32,7 @@
 #include "lincity/fileutil.h"
 #include "lincity/simulate.h"
 #include "lincity/lclib.h"
-#include "lincity/ldsvguts.h"
+#include "lincity/loadsave.h"
 
 #include "gui_interface/shared_globals.h"
 

Modified: trunk/src/lincity-ng/MainLincity.cpp
===================================================================
--- trunk/src/lincity-ng/MainLincity.cpp	2007-12-16 18:39:28 UTC (rev 1321)
+++ trunk/src/lincity-ng/MainLincity.cpp	2007-12-16 22:50:29 UTC (rev 1322)
@@ -29,7 +29,7 @@
 #include "lincity/lin-city.h"
 #include "lincity/lc_locale.h"
 #include "lincity/fileutil.h"
-#include "lincity/ldsvguts.h"
+#include "lincity/loadsave.h"
 
 #include "gui_interface/screen_interface.h"
 #include "gui_interface/mps.h"
@@ -97,10 +97,7 @@
  */
 bool loadCityNG( std::string filename ){
     if( file_exists( const_cast<char*>( filename.c_str()) ) ){
-        if (false)
-            load_city(const_cast<char*>(filename.c_str()));
-        else
-            load_city_2(const_cast<char*>(filename.c_str()));
+        load_city_2(const_cast<char*>(filename.c_str()));
         update_avail_modules(0);
         GameView* gv = getGameView();
         if( gv ){ gv->readOrigin(); }
@@ -124,13 +121,13 @@
   check_savedir ();
 
   /* Load preferences */
-  load_lincityrc ();
+  //load_lincityrc ();  //oldgui stuff, unused in NG
 
   /* Initialize random number generator */
   srand (time (0));
 
   /* Save preferences */
-    save_lincityrc ();
+    //save_lincityrc ();   //oldgui stuff, unused in NG 
 
     //    init_fonts ();
 

Modified: trunk/src/lincity-ng/main.cpp
===================================================================
--- trunk/src/lincity-ng/main.cpp	2007-12-16 18:39:28 UTC (rev 1321)
+++ trunk/src/lincity-ng/main.cpp	2007-12-16 22:50:29 UTC (rev 1322)
@@ -44,7 +44,7 @@
 #include "Sound.hpp"
 #include "Config.hpp"
 #include "PBar.hpp"
-#include "lincity/ldsvguts.h"
+#include "lincity/loadsave.h"
 
 #ifdef ENABLE_BINRELOC
 #include "binreloc.h"



From alainb at mail.berlios.de  Tue Dec 18 00:30:19 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Tue, 18 Dec 2007 00:30:19 +0100
Subject: [Lincity-ng-commit] r1323 - in trunk: data/opening src/lincity
	src/lincity-ng
Message-ID: <200712172330.lBHNUJpn012620@sheep.berlios.de>

Author: alainb
Date: 2007-12-18 00:29:59 +0100 (Tue, 18 Dec 2007)
New Revision: 1323

Modified:
   trunk/data/opening/Beach.scn
   trunk/data/opening/Rocket_98.scn
   trunk/data/opening/bad_times.scn
   trunk/data/opening/extreme_arid.scn
   trunk/data/opening/extreme_wetland.scn
   trunk/data/opening/good_times.scn
   trunk/src/lincity-ng/ScreenInterface.cpp
   trunk/src/lincity/ldsvguts.cpp
   trunk/src/lincity/loadsave.cpp
   trunk/src/lincity/simulate.cpp
Log:
upgraded scenarios , and removed broken new unused stuff :)

Modified: trunk/data/opening/Beach.scn
===================================================================
(Binary files differ)

Modified: trunk/data/opening/Rocket_98.scn
===================================================================
(Binary files differ)

Modified: trunk/data/opening/bad_times.scn
===================================================================
(Binary files differ)

Modified: trunk/data/opening/extreme_arid.scn
===================================================================
(Binary files differ)

Modified: trunk/data/opening/extreme_wetland.scn
===================================================================
(Binary files differ)

Modified: trunk/data/opening/good_times.scn
===================================================================
(Binary files differ)

Modified: trunk/src/lincity/ldsvguts.cpp
===================================================================
--- trunk/src/lincity/ldsvguts.cpp	2007-12-16 22:50:29 UTC (rev 1322)
+++ trunk/src/lincity/ldsvguts.cpp	2007-12-17 23:29:59 UTC (rev 1323)
@@ -565,13 +565,8 @@
 {
     // Follow order and logic of new_city
     int x,y;
-    int alt0 = 0;
-    int mount;
-    int c;
-#define IS_RIVER(x,y) (MP_INFO(x,y).flags & FLAG_IS_RIVER)
 
     global_mountainity= 10 + rand () % 300;
-    mount = global_mountainity;
 
     // Grey border (not visible on the map, x = 0 , x = 99, y = 0, y = 99) 
     for (x = 0; x < WORLD_SIDE_LEN; x++)
@@ -588,68 +583,9 @@
     deadline=total_time + 1200 * 10;
     flag_warning = true; // warn player.
 
-    /* Upgrade ground[x][y].water_alt and .altitude */
-    /* choose this order for rivers and beach scenario 
-     *  = say the lowest part of the map is South-east
-     *    and the sea may have a slope :-) 
-     *     (strictly speaking this is true, but at much smaller order of magnitude */
+    /* TODO AL1 Upgrade ground[x][y].water_alt and .altitude
+     * TODO This not used yet, so just keep initialisation to zero, until something good is done
+     */
 
-    /* River mouth is on south of the map */
-    y = WORLD_SIDE_LEN -2;
-    for (x = WORLD_SIDE_LEN - 1; x >=0; x--)
-        if ( IS_RIVER(x,y) )
-            ALT(x,y) = 1;
-
-    alt0 = 1;
-    #define max(X, Y) (X>Y?X:Y)
-    #define min(X, Y) (X>Y?Y:X)
-    for (y = WORLD_SIDE_LEN - 2; y >= 0; y--) {
-        for (x = WORLD_SIDE_LEN - 1; x >= 0; x--) {
-            if ( IS_RIVER(x,y) ) {
-                // attempt to find large area of water = lake or sea => slope = 0
-                c = 0;
-                int alt=0;
-                if (x < WORLD_SIDE_LEN - 2)  {
-                    if IS_RIVER(x + 1, y + 1) {
-                        c++;
-                        alt = max (alt, ALT(x+1, y+1));
-                    }
-                    if IS_RIVER(x + 1, y ) {
-                        c++;
-                        alt = max (alt, ALT(x+1, y));
-                    }
-                }
-                if IS_RIVER(x , y +1 ) {
-                    c++;
-                    alt = max (alt, ALT(x, y+1));
-                }
-                if (x > 1) {
-                    if IS_RIVER(x - 1, y+1 ) {
-                        c++;
-                        alt = max (alt, ALT(x-1, y+1));
-                    }
-                    if IS_RIVER(x - 1, y ) {
-                        c++;
-                        alt = max (alt, ALT(x-1, y));
-                    }
-                }
-                if (c == 0) {
-                    fprintf(stderr," Warning (not important): In upgrade_to_v2, c = 0, x = %d, y =%d\n", x, y);
-                    continue;
-                }
-                if (c <= 2) {
-                    alt0 = alt + rand() % ( 2 + mount / 100 );
-                    alt += rand() % ( 2 + mount / 100 );
-                    ALT(x,y) = max(alt, alt0);
-                    //fprintf(stderr, " x %d, y %d, alt %d, alt0 %d , c=%d \n", x, y, alt, alt0, c);
-                } else {
-                    //fprintf(stderr, " x %d, y %d, alt %d, alt0 %d\n", x, y, alt, alt0);
-                    ALT(x,y) = alt;
-                }
-            }
-        }
-        alt0 ++; // minimum slope toward south
-    }
-
     setup_land();
 }

Modified: trunk/src/lincity/loadsave.cpp
===================================================================
--- trunk/src/lincity/loadsave.cpp	2007-12-16 22:50:29 UTC (rev 1322)
+++ trunk/src/lincity/loadsave.cpp	2007-12-17 23:29:59 UTC (rev 1323)
@@ -97,7 +97,6 @@
 
 extern void print_total_money(void);
 extern int count_groups(int);
-extern void upgrade_to_v2(void);
 
 /* ---------------------------------------------------------------------- *
  * Public functions

Modified: trunk/src/lincity/simulate.cpp
===================================================================
--- trunk/src/lincity/simulate.cpp	2007-12-16 22:50:29 UTC (rev 1322)
+++ trunk/src/lincity/simulate.cpp	2007-12-17 23:29:59 UTC (rev 1323)
@@ -763,7 +763,7 @@
 void setup_land(void)
 {
     int x, y, xw, yw;
-    int aridity = rand() % 400 - 150;
+    int aridity = rand() % 450 - 150;
 
     global_aridity = aridity;
     

Modified: trunk/src/lincity-ng/ScreenInterface.cpp
===================================================================
--- trunk/src/lincity-ng/ScreenInterface.cpp	2007-12-16 22:50:29 UTC (rev 1322)
+++ trunk/src/lincity-ng/ScreenInterface.cpp	2007-12-17 23:29:59 UTC (rev 1323)
@@ -301,8 +301,7 @@
 {
     (void) title;
     (void) percent;
-#define DEBUG_PROGBOX
-#ifdef DEBUG_PROGBOX
+#ifdef DEBUG
     std::ostringstream text;
     text << "prog_box:'" << title << "' " << percent << "%\n";
     std::cout << text.str();



From alainb at mail.berlios.de  Tue Dec 18 00:43:12 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Tue, 18 Dec 2007 00:43:12 +0100
Subject: [Lincity-ng-commit] r1324 - trunk/src/lincity
Message-ID: <200712172343.lBHNhCI5007650@sheep.berlios.de>

Author: alainb
Date: 2007-12-18 00:43:10 +0100 (Tue, 18 Dec 2007)
New Revision: 1324

Added:
   trunk/src/lincity/old_ldsvguts.cpp
   trunk/src/lincity/old_ldsvguts.h
Removed:
   trunk/src/lincity/ldsvguts.cpp
   trunk/src/lincity/ldsvguts.h
Modified:
   trunk/src/lincity/simulate.cpp
Log:
cosmetic rename ldsvguts -> old_ldsvguts

Deleted: trunk/src/lincity/ldsvguts.cpp
===================================================================
--- trunk/src/lincity/ldsvguts.cpp	2007-12-17 23:29:59 UTC (rev 1323)
+++ trunk/src/lincity/ldsvguts.cpp	2007-12-17 23:43:10 UTC (rev 1324)
@@ -1,591 +0,0 @@
-/* ---------------------------------------------------------------------- *
- * ldsvguts.c
- * This file is part of lincity-ng.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * ---------------------------------------------------------------------- */
-
-/* this is for saving */
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <zlib.h>
-#include <iostream>
-#include "tinygettext/gettext.hpp"
-#include "gui_interface/screen_interface.h"
-#include "gui_interface/shared_globals.h"
-#include "stats.h"
-
-#include <fcntl.h>
-#include <sys/types.h>
-
-#if defined (TIME_WITH_SYS_TIME)
-#include <time.h>
-#include <sys/time.h>
-#else
-#if defined (HAVE_SYS_TIME_H)
-#include <sys/time.h>
-#else
-#include <time.h>
-#endif
-#endif
-
-#include <cstdlib>
-#include <string.h>
-#include <math.h>
-/*
-#if defined (WIN32)
-#include <winsock.h>
-#include <io.h>
-#include <direct.h>
-#include <process.h>
-#endif
-*/
-#ifdef __EMX__
-#define chown(x,y,z)
-#endif
-
-#if defined (HAVE_DIRENT_H)
-#include <dirent.h>
-#define NAMLEN(dirent) strlen((dirent)->d_name)
-#else
-#define dirent direct
-#define NAMLEN(dirent) (dirent)->d_namlen
-#if defined (HAVE_SYS_NDIR_H)
-#include <sys/ndir.h>
-#endif
-#if defined (HAVE_SYS_DIR_H)
-#include <sys/dir.h>
-#endif
-#if defined (HAVE_NDIR_H)
-#include <ndir.h>
-#endif
-#endif
-
-#include <ctype.h>
-//#include "common.h"
-/*
-#ifdef LC_X11
-#include <X11/cursorfont.h>
-#endif
-*/
-#include "lctypes.h"
-#include "lin-city.h"
-#include "engglobs.h"
-#include "fileutil.h"
-#include "power.h"
-#include "gui_interface/pbar_interface.h"
-#include "lincity-ng/ErrorInterface.hpp"
-#include "stats.h"
-#include "ldsvguts.h"
-#include "loadsave.h"
-#include "simulate.h"
-#include "engine.h"
-
-#if defined (WIN32) && !defined (NDEBUG)
-#define START_FAST_SPEED 1
-#define SKIP_OPENING_SCENE 1
-#endif
-
-#define SI_BLACK 252
-#define SI_RED 253
-#define SI_GREEN 254
-#define SI_YELLOW 255
-
-/* Extern resources */
-extern void ok_dial_box(const char *, int, const char *);
-extern void prog_box(const char *, int);
-
-extern void print_total_money(void);
-extern int count_groups(int);
-extern void reset_animation_times(void);
-
-/* ---------------------------------------------------------------------- *
- * Private Fn Prototypes
- * ---------------------------------------------------------------------- */
-void upgrade_to_v2 (void);
-
-/* ---------------------------------------------------------------------- *
- * Public functions
- * ---------------------------------------------------------------------- */
-
-void load_city_old(char *cname)
-{
-    unsigned long q;
-    int i, x, y, n, p;
-    unsigned int z;
-    int num_pbars, pbar_data_size;
-    int pbar_tmp;
-    int dummy;
-    gzFile gzfile;
-    char s[256];
-
-    fprintf(stderr, "old file format, so i will backup, then load with old function, and then convert to new format\n");
- 
-    gzfile = gzopen(cname, "rb");
-    if (gzfile == NULL) {
-        printf(_("Can't open <%s> (gzipped)"), cname);
-        do_error("Can't open it!");
-    }
-    /* Initialise additional structure FIXME random village does not go here*/
-    for (x = 0; x < WORLD_SIDE_LEN; x++)
-        for (y = 0; y < WORLD_SIDE_LEN; y++) {
-            MP_TECH(x,y) = 0;
-            MP_DATE(x,y) = 0;
-            MP_ANIM(x,y) = 0;
-        }
-
-    /* Add version to shared global variables for playing/saving games without waterwell */
-    sscanf(gzgets(gzfile, s, 256), "%d", &ldsv_version);
-    if (ldsv_version < MIN_LOAD_VERSION) {
-        //ok_dial_box("too-old.mes", BAD, 0L);  // FIXME: AL1 screen is not set, so ok_dial_box fails
-                                                //        => we have an error message, but not the good one ;-)
-        fprintf(stderr, "Too old file format, cannot load it, sorry\n");
-        gzclose(gzfile);
-        return;
-    }
-
-    fprintf(stderr, " ldsv_version = %i \n", ldsv_version);
-    use_waterwell = true;
-
-    init_pbars();
-    num_pbars = NUM_PBARS;
-    pbar_data_size = PBAR_DATA_SIZE;
-
-    init_inventory();
-
-    print_time_for_year();
-    q = (unsigned long)sizeof(Map_Point_Info);
-    prog_box(_("Loading scene"), 0);
-
-    for (x = 0; x < WORLD_SIDE_LEN; x++) {
-        for (y = 0; y < WORLD_SIDE_LEN; y++) {
-            for (z = 0; z < sizeof(int); z++) {
-                sscanf(gzgets(gzfile, s, 256), "%d", &n);
-                *(((unsigned char *)&MP_INFO(x, y).population) + z) = n;
-            }
-            for (z = 0; z < sizeof(int); z++) {
-                sscanf(gzgets(gzfile, s, 256), "%d", &n);
-                *(((unsigned char *)&MP_INFO(x, y).flags) + z) = n;
-            }
-            for (z = 0; z < sizeof(unsigned short); z++) {
-                sscanf(gzgets(gzfile, s, 256), "%d", &n);
-                *(((unsigned char *)&MP_INFO(x, y).coal_reserve) + z) = n;
-            }
-            for (z = 0; z < sizeof(unsigned short); z++) {
-                sscanf(gzgets(gzfile, s, 256), "%d", &n);
-                *(((unsigned char *)&MP_INFO(x, y).ore_reserve) + z) = n;
-            }
-            for (z = 0; z < sizeof(int); z++) {
-                sscanf(gzgets(gzfile, s, 256), "%d", &n);
-                *(((unsigned char *)&MP_INFO(x, y).int_1) + z) = n;
-            }
-            for (z = 0; z < sizeof(int); z++) {
-                sscanf(gzgets(gzfile, s, 256), "%d", &n);
-                *(((unsigned char *)&MP_INFO(x, y).int_2) + z) = n;
-            }
-            for (z = 0; z < sizeof(int); z++) {
-                sscanf(gzgets(gzfile, s, 256), "%d", &n);
-                *(((unsigned char *)&MP_INFO(x, y).int_3) + z) = n;
-            }
-            for (z = 0; z < sizeof(int); z++) {
-                sscanf(gzgets(gzfile, s, 256), "%d", &n);
-                *(((unsigned char *)&MP_INFO(x, y).int_4) + z) = n;
-            }
-            for (z = 0; z < sizeof(int); z++) {
-                sscanf(gzgets(gzfile, s, 256), "%d", &n);
-                *(((unsigned char *)&MP_INFO(x, y).int_5) + z) = n;
-            }
-            for (z = 0; z < sizeof(int); z++) {
-                sscanf(gzgets(gzfile, s, 256), "%d", &n);
-                *(((unsigned char *)&MP_INFO(x, y).int_6) + z) = n;
-            }
-            for (z = 0; z < sizeof(int); z++) {
-                sscanf(gzgets(gzfile, s, 256), "%d", &n);
-                *(((unsigned char *)&MP_INFO(x, y).int_7) + z) = n;
-            }
-            sscanf(gzgets(gzfile, s, 256), "%d", &n);
-            MP_POL(x, y) = (unsigned short)n;
-            sscanf(gzgets(gzfile, s, 256), "%d", &n);
-            MP_TYPE(x, y) = (short)n;
-
-            if (get_group_of_type(MP_TYPE(x, y)) == GROUP_MARKET)
-                inventory(x, y);
-        }
-        if (((93 * x) / WORLD_SIDE_LEN) % 3 == 0)
-            prog_box("", (93 * x) / WORLD_SIDE_LEN);
-    }
-    check_endian();
-    set_map_groups();
-
-    sscanf(gzgets(gzfile, s, 256), "%d", &main_screen_originx);
-    sscanf(gzgets(gzfile, s, 256), "%d", &main_screen_originy);
-    if (main_screen_originx > WORLD_SIDE_LEN - getMainWindowWidth() / 16 - 1)
-        main_screen_originx = WORLD_SIDE_LEN - getMainWindowWidth() / 16 - 1;
-
-    if (main_screen_originy > WORLD_SIDE_LEN - getMainWindowHeight() / 16 - 1)
-        main_screen_originy = WORLD_SIDE_LEN - getMainWindowHeight() / 16 - 1;
-
-    sscanf(gzgets(gzfile, s, 256), "%d", &total_time);
-    if (ldsv_version <= MM_MS_C_VER)
-        i = OLD_MAX_NUMOF_SUBSTATIONS;
-    else
-        i = MAX_NUMOF_SUBSTATIONS;
-    for (x = 0; x < i; x++) {
-        sscanf(gzgets(gzfile, s, 256), "%d", &substationx[x]);
-        sscanf(gzgets(gzfile, s, 256), "%d", &substationy[x]);
-    }
-    prog_box("", 92);
-    sscanf(gzgets(gzfile, s, 256), "%d", &numof_substations);
-    if (ldsv_version <= MM_MS_C_VER)
-        i = OLD_MAX_NUMOF_MARKETS;
-    else
-        i = MAX_NUMOF_MARKETS;
-    for (x = 0; x < i; x++) {
-        sscanf(gzgets(gzfile, s, 256), "%d", &marketx[x]);
-        sscanf(gzgets(gzfile, s, 256), "%d", &markety[x]);
-    }
-    prog_box("", 94);
-    sscanf(gzgets(gzfile, s, 256), "%d", &numof_markets);
-    sscanf(gzgets(gzfile, s, 256), "%d", &people_pool);
-    sscanf(gzgets(gzfile, s, 256), "%d", &total_money);
-    sscanf(gzgets(gzfile, s, 256), "%d", &income_tax_rate);
-    sscanf(gzgets(gzfile, s, 256), "%d", &coal_tax_rate);
-    sscanf(gzgets(gzfile, s, 256), "%d", &dole_rate);
-    sscanf(gzgets(gzfile, s, 256), "%d", &transport_cost_rate);
-    sscanf(gzgets(gzfile, s, 256), "%d", &goods_tax_rate);
-    sscanf(gzgets(gzfile, s, 256), "%d", &export_tax);
-    sscanf(gzgets(gzfile, s, 256), "%d", &export_tax_rate);
-    sscanf(gzgets(gzfile, s, 256), "%d", &import_cost);
-    sscanf(gzgets(gzfile, s, 256), "%d", &import_cost_rate);
-    sscanf(gzgets(gzfile, s, 256), "%d", &tech_level);
-    if (tech_level > MODERN_WINDMILL_TECH)
-        modern_windmill_flag = 1;
-    sscanf(gzgets(gzfile, s, 256), "%d", &tpopulation);
-    sscanf(gzgets(gzfile, s, 256), "%d", &tstarving_population);
-    sscanf(gzgets(gzfile, s, 256), "%d", &tunemployed_population);
-    sscanf(gzgets(gzfile, s, 256), "%d", &x);   /* waste_goods obsolete */
-    sscanf(gzgets(gzfile, s, 256), "%d", &power_made);
-    sscanf(gzgets(gzfile, s, 256), "%d", &power_used);
-    sscanf(gzgets(gzfile, s, 256), "%d", &coal_made);
-    sscanf(gzgets(gzfile, s, 256), "%d", &coal_used);
-    sscanf(gzgets(gzfile, s, 256), "%d", &goods_made);
-    sscanf(gzgets(gzfile, s, 256), "%d", &goods_used);
-    sscanf(gzgets(gzfile, s, 256), "%d", &ore_made);
-    sscanf(gzgets(gzfile, s, 256), "%d", &ore_used);
-    sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diff_old_population */
-
-    /* Update variables calculated from those above */
-    housed_population = tpopulation / NUMOF_DAYS_IN_MONTH;
-
-    prog_box("", 96);
-    /* Get size of monthgraph array */
-    if (ldsv_version <= MG_C_VER) {
-        i = 120;
-    } else {
-        sscanf(gzgets(gzfile, s, 256), "%d", &i);
-    }
-    for (x = 0; x < i; x++) {
-        /* If more entries in file than will fit on screen, 
-           then we need to skip past them. */
-        if (x >= monthgraph_size) {
-            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &monthgraph_pop[x] */
-            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &monthgraph_starve[x] */
-            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &monthgraph_nojobs[x] */
-            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &monthgraph_ppool[x] */
-        } else {
-            sscanf(gzgets(gzfile, s, 256), "%d", &monthgraph_pop[x]);
-            sscanf(gzgets(gzfile, s, 256), "%d", &monthgraph_starve[x]);
-            sscanf(gzgets(gzfile, s, 256), "%d", &monthgraph_nojobs[x]);
-            sscanf(gzgets(gzfile, s, 256), "%d", &monthgraph_ppool[x]);
-        }
-        /* If our save file is old, skip past obsolete diffgraph entries */
-        if (ldsv_version <= MG_C_VER) {
-            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_power[x] */
-            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_coal[x] */
-            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_goods[x] */
-            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_ore[x] */
-            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_population[x] */
-        }
-    }
-    /* If screen bigger than number of entries in file, pad with zeroes */
-    while (x < monthgraph_size) {
-        monthgraph_pop[x] = 0;
-        monthgraph_starve[x] = 0;
-        monthgraph_nojobs[x] = 0;
-        monthgraph_ppool[x] = 0;
-        x++;
-    }
-    prog_box("", 98);
-    sscanf(gzgets(gzfile, s, 256), "%d", &rockets_launched);
-    sscanf(gzgets(gzfile, s, 256), "%d", &rockets_launched_success);
-    sscanf(gzgets(gzfile, s, 256), "%d", &coal_survey_done);
-
-    for (x = 0; x < pbar_data_size; x++) {
-        for (p = 0; p < num_pbars; p++) {
-            sscanf(gzgets(gzfile, s, 256), "%d", &(pbar_tmp));
-            update_pbar(p, pbar_tmp, 1);
-/*	    sscanf( gzgets( gzfile, s, 256 ), "%d", &(pbars[p].data[x])); */
-        }
-    }
-
-    for (p = 0; p < num_pbars; p++)
-        pbars[p].data_size = pbar_data_size;
-
-    prog_box("", 99);
-
-    for (p = 0; p < num_pbars; p++) {
-        sscanf(gzgets(gzfile, s, 256), "%d", &(pbars[p].oldtot));
-        sscanf(gzgets(gzfile, s, 256), "%d", &(pbars[p].diff));
-    }
-
-    sscanf(gzgets(gzfile, s, 256), "%d", &cheat_flag);
-    sscanf(gzgets(gzfile, s, 256), "%d", &total_pollution_deaths);
-    sscanf(gzgets(gzfile, s, 256), "%f", &pollution_deaths_history);
-    sscanf(gzgets(gzfile, s, 256), "%d", &total_starve_deaths);
-    sscanf(gzgets(gzfile, s, 256), "%f", &starve_deaths_history);
-    sscanf(gzgets(gzfile, s, 256), "%d", &total_unemployed_years);
-    sscanf(gzgets(gzfile, s, 256), "%f", &unemployed_history);
-    sscanf(gzgets(gzfile, s, 256), "%d", &max_pop_ever);
-    sscanf(gzgets(gzfile, s, 256), "%d", &total_evacuated);
-    sscanf(gzgets(gzfile, s, 256), "%d", &total_births);
-    for (x = 0; x < NUMOF_MODULES; x++)
-        sscanf(gzgets(gzfile, s, 256), "%d", &(module_help_flag[x]));
-    sscanf(gzgets(gzfile, s, 256), "%d", &x);   /* just dummy reads */
-    sscanf(gzgets(gzfile, s, 256), "%d", &x);   /* for backwards compatibility. */
-
-    /* 10 dummy strings, for missed out things, have been put in save. */
-    /* Input from this point uses them. */
-    /* XXX: WCK: Huh? Missed out things? */
-
-    sscanf(gzgets(gzfile, s, 256), "%128s", given_scene);
-    if (strncmp(given_scene, "dummy", 5) == 0 || strlen(given_scene) < 3)
-        given_scene[0] = 0;
-    sscanf(gzgets(gzfile, s, 256), "%128s", s);
-    if (strncmp(given_scene, "dummy", 5) != 0)
-        sscanf(s, "%d", &highest_tech_level);
-    else
-        highest_tech_level = 0;
-
-    gzgets(gzfile, s, 200);   
-    if (sscanf
-        (s, "sust %d %d %d %d %d %d %d %d %d %d", &sust_dig_ore_coal_count, &sust_port_count, &sust_old_money_count,
-         &sust_old_population_count, &sust_old_tech_count, &sust_fire_count, &sust_old_money, &sust_old_population,
-         &sust_old_tech, &sustain_flag) == 10) {
-        sust_dig_ore_coal_tip_flag = sust_port_flag = 1;
-        /* GCS FIX: Check after loading file if screen is drawn OK */
-        /* draw_sustainable_window (); */
-    } else
-        sustain_flag = sust_dig_ore_coal_count = sust_port_count
-            = sust_old_money_count = sust_old_population_count
-            = sust_old_tech_count = sust_fire_count = sust_old_money = sust_old_population = sust_old_tech = 0;
-
-    if (ldsv_version == WATERWELL_V2) {
-        gzgets(gzfile, s, 80);   
-        sscanf(s, "arid %d %d", &global_aridity, &global_mountainity);
-#ifdef DEBUG
-        fprintf(stderr," arid %d, mountain %d \n", global_aridity, global_mountainity);
-#endif
-        for (x = 0; x < WORLD_SIDE_LEN; x++) {
-            for (y = 0; y < WORLD_SIDE_LEN; y++) {
-                gzgets(gzfile, s, 200);  
-                sscanf(s,"%d %d %d %d %d %d %d %d %d %d %d %d",&(ground[x][y].altitude)
-                        , &ground[x][y].ecotable
-                        , &ground[x][y].wastes
-                        , &ground[x][y].pollution
-                        , &ground[x][y].water_alt
-                        , &ground[x][y].water_pol
-                        , &ground[x][y].water_wast
-                        , &ground[x][y].water_next
-                        , &ground[x][y].int1
-                        , &ground[x][y].int2
-                        , &ground[x][y].int3
-                        , &ground[x][y].int4 
-                        );
-#ifdef DEBUG
-                if (x == 10 && y == 10)
-                    fprintf(stderr," alt %d, int4 %d \n", ground[x][y].altitude, ground[x][y].int4);
-#endif
-            }
-        }
-    }
-    gzclose(gzfile);
-
-    numof_shanties = count_groups(GROUP_SHANTY);
-    numof_communes = count_groups(GROUP_COMMUNE);
-    prog_box("", 100);
-
-    /* set up the university intake. */
-    x = count_groups(GROUP_UNIVERSITY);
-    if (x > 0) {
-        university_intake_rate = (count_groups(GROUP_SCHOOL) * 20) / x;
-        if (university_intake_rate > 100)
-            university_intake_rate = 100;
-    } else
-        university_intake_rate = 50;
-
-    unhighlight_module_button(selected_module);
-    selected_module = sbut[7];  /* 7 is track.  Watch out though! */
-    highlight_module_button(selected_module);
-    set_selected_module(CST_TRACK_LR);
-
-    print_total_money();
-    reset_animation_times();
-    /* kind upgrade of MP_TECH for old buildings, when we don't know
-     * eg light industries pollution depends on tech */
-    int tk = (3 * highest_tech_level) / 4;
-    if (tech_level >= tk)
-        tk = tech_level;
-
-    /* update tech dep for compatibility with old games */
-    for (x = 0; x < WORLD_SIDE_LEN; x++)
-        for (y = 0; y < WORLD_SIDE_LEN; y++) {
-
-            switch (MP_GROUP(x, y)) {
-            case (GROUP_WINDMILL):
-                MP_TECH(x,y) = MP_INFO(x, y).int_2;
-                MP_INFO(x, y).int_1 = (int)(WINDMILL_POWER + (((double)MP_TECH(x, y) * WINDMILL_POWER)
-                                                              / MAX_TECH_LEVEL));
-                break;
-
-            case (GROUP_COAL_POWER):
-                MP_TECH(x,y) = MP_INFO(x,y).int_4;
-                MP_INFO(x, y).int_1 = (int)(POWERS_COAL_OUTPUT + (((double)MP_TECH(x, y) * POWERS_COAL_OUTPUT)
-                                                                  / MAX_TECH_LEVEL));
-                break;
-
-            case (GROUP_SOLAR_POWER):
-                MP_TECH(x,y) = MP_INFO(x,y).int_2;
-                MP_INFO(x, y).int_3 = (int)(POWERS_SOLAR_OUTPUT + (((double)MP_TECH(x, y) * POWERS_SOLAR_OUTPUT)
-                                                                   / MAX_TECH_LEVEL));
-            case GROUP_ORGANIC_FARM:
-                MP_TECH(x,y) = MP_INFO(x,y).int_1;
-                break;
-
-            case GROUP_RECYCLE:
-                MP_TECH(x,y) = MP_INFO(x, y).int_4;
-                break;
-
-            case GROUP_INDUSTRY_L:
-                if ( MP_TECH(x,y) == 0 )
-                    if ( tk > GROUP_INDUSTRY_L_TECH )
-                        MP_TECH(x,y) = tk;
-                    else
-                        MP_TECH(x,y) = GROUP_INDUSTRY_L_TECH;
-                break;
-            }
-        }
-
-    map_power_grid(true);       /* WCK:  Is this safe to do here?
-                                 * AL1: No, in NG_1.1
-                                 * In case of error message with ok_dial_box
-                                 *    the dialog cannot appear because the screen
-                                 *    is not set up => crash.
-                                 * FIXME: move all initialisation elsewhere, in 
-                                 *    engine.cpp or simulate.cpp.
-                                 */
-    upgrade_to_v2();
-
-}
-
-void reset_animation_times(void)
-{
-    int x, y;
-
-    for (y = 0; y < WORLD_SIDE_LEN; y++)
-        for (x = 0; x < WORLD_SIDE_LEN; x++) {
-            MP_ANIM(x,y) = 0;
-            if (MP_GROUP(x, y) == GROUP_FIRE)
-                MP_INFO(x, y).int_3 = 0;
-        }
-}
-
-void check_endian(void)
-{
-    static int flag = 0;
-    char *cs;
-    int t, x, y;
-    t = 0;
-    cs = (char *)&t;
-    *cs = 1;
-    if (t == 1)                 /* little endian */
-        return;
-    if (flag == 0) {
-        flag = 1;
-    }
-    for (y = 0; y < WORLD_SIDE_LEN; y++) {
-        for (x = 0; x < WORLD_SIDE_LEN; x++) {
-            eswap32(&(MP_INFO(x, y).population));
-            eswap32(&(MP_INFO(x, y).flags));
-            if (sizeof(short) == 2) {
-                eswap16(&(MP_INFO(x, y).coal_reserve));
-                eswap16(&(MP_INFO(x, y).ore_reserve));
-            } else if (sizeof(short) == 4) {
-                eswap32((int *)&(MP_INFO(x, y).coal_reserve));
-                eswap32((int *)&(MP_INFO(x, y).ore_reserve));
-            } else {
-                /* prevent gcc warning on amd64: argument 2 has type 'long unsigned int' !!! */
-                printf("Strange size (%d) for short, please mail me.\n", (int) sizeof(short));
-            }
-            eswap32(&(MP_INFO(x, y).int_1));
-            eswap32(&(MP_INFO(x, y).int_2));
-            eswap32(&(MP_INFO(x, y).int_3));
-            eswap32(&(MP_INFO(x, y).int_4));
-            eswap32(&(MP_INFO(x, y).int_5));
-            eswap32(&(MP_INFO(x, y).int_6));
-            eswap32(&(MP_INFO(x, y).int_7));
-        }
-    }
-}
-
-void eswap32(int *i)
-{
-    char *cs, c1, c2, c3, c4;
-    cs = (char *)i;
-    c1 = *cs;
-    c2 = *(cs + 1);
-    c3 = *(cs + 2);
-    c4 = *(cs + 3);
-    *(cs++) = c4;
-    *(cs++) = c3;
-    *(cs++) = c2;
-    *cs = c1;
-}
-
-void eswap16(unsigned short *i)
-{
-    char *cs, c1, c2;
-    cs = (char *)i;
-    c1 = *cs;
-    c2 = *(cs + 1);
-    *(cs++) = c2;
-    *cs = c1;
-}
-
-void upgrade_to_v2 (void)
-{
-    // Follow order and logic of new_city
-    int x,y;
-
-    global_mountainity= 10 + rand () % 300;
-
-    // Grey border (not visible on the map, x = 0 , x = 99, y = 0, y = 99) 
-    for (x = 0; x < WORLD_SIDE_LEN; x++)
-        for (y = 0; y < WORLD_SIDE_LEN; y++) {
-            ALT(x,y) = 0;
-            if ( !GROUP_IS_BARE(MP_GROUP(x, y)) ) {
-                /* be nice, put water under all existing builings / farms / parks ... */
-                /* This may change according to global_aridity and distance_to_river */
-                MP_INFO(x,y).flags |= FLAG_HAS_UNDERGROUND_WATER;
-            }
-        }
-
-    /* Let 10 years in game time to put waterwells where needed, then starvation will occur */
-    deadline=total_time + 1200 * 10;
-    flag_warning = true; // warn player.
-
-    /* TODO AL1 Upgrade ground[x][y].water_alt and .altitude
-     * TODO This not used yet, so just keep initialisation to zero, until something good is done
-     */
-
-    setup_land();
-}

Deleted: trunk/src/lincity/ldsvguts.h
===================================================================
--- trunk/src/lincity/ldsvguts.h	2007-12-17 23:29:59 UTC (rev 1323)
+++ trunk/src/lincity/ldsvguts.h	2007-12-17 23:43:10 UTC (rev 1324)
@@ -1,28 +0,0 @@
-/* ---------------------------------------------------------------------- *
- * old_ldsvguts.h
- * This file is part of lincity-ng
- * ---------------------------------------------------------------------- */
-
-/* This is the OLD saving facility, before lincity-NG 1.91 */
-/* Used for reading old games and convert them to new format + data structure */
-
-#ifndef __old_ldsvguts_h__
-#define __old_ldsvguts_h__
-
-
-/* Load corrections if version <= MM_MS_C_VER (max markets/substations) */
-#define MM_MS_C_VER 97
-
-/* Load corrections if version <= MG_C_VER (max monthgraph size) */
-#define MG_C_VER 111
-
-/* Don't load if < MIN_LOAD_VERSION */
-#define MIN_LOAD_VERSION 97
-
-/* VERSION_INT is used in the load/save code.  All other code uses 
-   the symbol VERSION in config.h */
-#define VERSION_INT 113
-
-void load_city_old(char *);
-
-#endif /* __old_ldsvguts_h__ */

Copied: trunk/src/lincity/old_ldsvguts.cpp (from rev 1323, trunk/src/lincity/ldsvguts.cpp)
===================================================================
--- trunk/src/lincity/ldsvguts.cpp	2007-12-17 23:29:59 UTC (rev 1323)
+++ trunk/src/lincity/old_ldsvguts.cpp	2007-12-17 23:43:10 UTC (rev 1324)
@@ -0,0 +1,592 @@
+/* ---------------------------------------------------------------------- *
+ * old_ldsvguts.c
+ * This file is part of lincity-ng.
+ * ---------------------------------------------------------------------- */
+
+/* This file is for loading old games (before NG 1.91) 
+ * and convert them to new format + data structure
+ */
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <zlib.h>
+#include <iostream>
+#include "tinygettext/gettext.hpp"
+#include "gui_interface/screen_interface.h"
+#include "gui_interface/shared_globals.h"
+#include "stats.h"
+
+#include <fcntl.h>
+#include <sys/types.h>
+
+#if defined (TIME_WITH_SYS_TIME)
+#include <time.h>
+#include <sys/time.h>
+#else
+#if defined (HAVE_SYS_TIME_H)
+#include <sys/time.h>
+#else
+#include <time.h>
+#endif
+#endif
+
+#include <cstdlib>
+#include <string.h>
+#include <math.h>
+/*
+#if defined (WIN32)
+#include <winsock.h>
+#include <io.h>
+#include <direct.h>
+#include <process.h>
+#endif
+*/
+#ifdef __EMX__
+#define chown(x,y,z)
+#endif
+
+#if defined (HAVE_DIRENT_H)
+#include <dirent.h>
+#define NAMLEN(dirent) strlen((dirent)->d_name)
+#else
+#define dirent direct
+#define NAMLEN(dirent) (dirent)->d_namlen
+#if defined (HAVE_SYS_NDIR_H)
+#include <sys/ndir.h>
+#endif
+#if defined (HAVE_SYS_DIR_H)
+#include <sys/dir.h>
+#endif
+#if defined (HAVE_NDIR_H)
+#include <ndir.h>
+#endif
+#endif
+
+#include <ctype.h>
+//#include "common.h"
+/*
+#ifdef LC_X11
+#include <X11/cursorfont.h>
+#endif
+*/
+#include "lctypes.h"
+#include "lin-city.h"
+#include "engglobs.h"
+#include "fileutil.h"
+#include "power.h"
+#include "gui_interface/pbar_interface.h"
+#include "lincity-ng/ErrorInterface.hpp"
+#include "stats.h"
+#include "old_ldsvguts.h"
+#include "loadsave.h"
+#include "simulate.h"
+#include "engine.h"
+
+#if defined (WIN32) && !defined (NDEBUG)
+#define START_FAST_SPEED 1
+#define SKIP_OPENING_SCENE 1
+#endif
+
+#define SI_BLACK 252
+#define SI_RED 253
+#define SI_GREEN 254
+#define SI_YELLOW 255
+
+/* Extern resources */
+extern void ok_dial_box(const char *, int, const char *);
+extern void prog_box(const char *, int);
+
+extern void print_total_money(void);
+extern int count_groups(int);
+extern void reset_animation_times(void);
+
+/* ---------------------------------------------------------------------- *
+ * Private Fn Prototypes
+ * ---------------------------------------------------------------------- */
+void upgrade_to_v2 (void);
+
+/* ---------------------------------------------------------------------- *
+ * Public functions
+ * ---------------------------------------------------------------------- */
+
+void load_city_old(char *cname)
+{
+    unsigned long q;
+    int i, x, y, n, p;
+    unsigned int z;
+    int num_pbars, pbar_data_size;
+    int pbar_tmp;
+    int dummy;
+    gzFile gzfile;
+    char s[256];
+
+    fprintf(stderr, "old file format, so i will backup, then load with old function, and then convert to new format\n");
+ 
+    gzfile = gzopen(cname, "rb");
+    if (gzfile == NULL) {
+        printf(_("Can't open <%s> (gzipped)"), cname);
+        do_error("Can't open it!");
+    }
+    /* Initialise additional structure FIXME random village does not go here*/
+    for (x = 0; x < WORLD_SIDE_LEN; x++)
+        for (y = 0; y < WORLD_SIDE_LEN; y++) {
+            MP_TECH(x,y) = 0;
+            MP_DATE(x,y) = 0;
+            MP_ANIM(x,y) = 0;
+        }
+
+    /* Add version to shared global variables for playing/saving games without waterwell */
+    sscanf(gzgets(gzfile, s, 256), "%d", &ldsv_version);
+    if (ldsv_version < MIN_LOAD_VERSION) {
+        //ok_dial_box("too-old.mes", BAD, 0L);  // FIXME: AL1 screen is not set, so ok_dial_box fails
+                                                //        => we have an error message, but not the good one ;-)
+        fprintf(stderr, "Too old file format, cannot load it, sorry\n");
+        gzclose(gzfile);
+        return;
+    }
+
+    fprintf(stderr, " ldsv_version = %i \n", ldsv_version);
+    use_waterwell = true;
+
+    init_pbars();
+    num_pbars = NUM_PBARS;
+    pbar_data_size = PBAR_DATA_SIZE;
+
+    init_inventory();
+
+    print_time_for_year();
+    q = (unsigned long)sizeof(Map_Point_Info);
+    prog_box(_("Loading scene"), 0);
+
+    for (x = 0; x < WORLD_SIDE_LEN; x++) {
+        for (y = 0; y < WORLD_SIDE_LEN; y++) {
+            for (z = 0; z < sizeof(int); z++) {
+                sscanf(gzgets(gzfile, s, 256), "%d", &n);
+                *(((unsigned char *)&MP_INFO(x, y).population) + z) = n;
+            }
+            for (z = 0; z < sizeof(int); z++) {
+                sscanf(gzgets(gzfile, s, 256), "%d", &n);
+                *(((unsigned char *)&MP_INFO(x, y).flags) + z) = n;
+            }
+            for (z = 0; z < sizeof(unsigned short); z++) {
+                sscanf(gzgets(gzfile, s, 256), "%d", &n);
+                *(((unsigned char *)&MP_INFO(x, y).coal_reserve) + z) = n;
+            }
+            for (z = 0; z < sizeof(unsigned short); z++) {
+                sscanf(gzgets(gzfile, s, 256), "%d", &n);
+                *(((unsigned char *)&MP_INFO(x, y).ore_reserve) + z) = n;
+            }
+            for (z = 0; z < sizeof(int); z++) {
+                sscanf(gzgets(gzfile, s, 256), "%d", &n);
+                *(((unsigned char *)&MP_INFO(x, y).int_1) + z) = n;
+            }
+            for (z = 0; z < sizeof(int); z++) {
+                sscanf(gzgets(gzfile, s, 256), "%d", &n);
+                *(((unsigned char *)&MP_INFO(x, y).int_2) + z) = n;
+            }
+            for (z = 0; z < sizeof(int); z++) {
+                sscanf(gzgets(gzfile, s, 256), "%d", &n);
+                *(((unsigned char *)&MP_INFO(x, y).int_3) + z) = n;
+            }
+            for (z = 0; z < sizeof(int); z++) {
+                sscanf(gzgets(gzfile, s, 256), "%d", &n);
+                *(((unsigned char *)&MP_INFO(x, y).int_4) + z) = n;
+            }
+            for (z = 0; z < sizeof(int); z++) {
+                sscanf(gzgets(gzfile, s, 256), "%d", &n);
+                *(((unsigned char *)&MP_INFO(x, y).int_5) + z) = n;
+            }
+            for (z = 0; z < sizeof(int); z++) {
+                sscanf(gzgets(gzfile, s, 256), "%d", &n);
+                *(((unsigned char *)&MP_INFO(x, y).int_6) + z) = n;
+            }
+            for (z = 0; z < sizeof(int); z++) {
+                sscanf(gzgets(gzfile, s, 256), "%d", &n);
+                *(((unsigned char *)&MP_INFO(x, y).int_7) + z) = n;
+            }
+            sscanf(gzgets(gzfile, s, 256), "%d", &n);
+            MP_POL(x, y) = (unsigned short)n;
+            sscanf(gzgets(gzfile, s, 256), "%d", &n);
+            MP_TYPE(x, y) = (short)n;
+
+            if (get_group_of_type(MP_TYPE(x, y)) == GROUP_MARKET)
+                inventory(x, y);
+        }
+        if (((93 * x) / WORLD_SIDE_LEN) % 3 == 0)
+            prog_box("", (93 * x) / WORLD_SIDE_LEN);
+    }
+    check_endian();
+    set_map_groups();
+
+    sscanf(gzgets(gzfile, s, 256), "%d", &main_screen_originx);
+    sscanf(gzgets(gzfile, s, 256), "%d", &main_screen_originy);
+    if (main_screen_originx > WORLD_SIDE_LEN - getMainWindowWidth() / 16 - 1)
+        main_screen_originx = WORLD_SIDE_LEN - getMainWindowWidth() / 16 - 1;
+
+    if (main_screen_originy > WORLD_SIDE_LEN - getMainWindowHeight() / 16 - 1)
+        main_screen_originy = WORLD_SIDE_LEN - getMainWindowHeight() / 16 - 1;
+
+    sscanf(gzgets(gzfile, s, 256), "%d", &total_time);
+    if (ldsv_version <= MM_MS_C_VER)
+        i = OLD_MAX_NUMOF_SUBSTATIONS;
+    else
+        i = MAX_NUMOF_SUBSTATIONS;
+    for (x = 0; x < i; x++) {
+        sscanf(gzgets(gzfile, s, 256), "%d", &substationx[x]);
+        sscanf(gzgets(gzfile, s, 256), "%d", &substationy[x]);
+    }
+    prog_box("", 92);
+    sscanf(gzgets(gzfile, s, 256), "%d", &numof_substations);
+    if (ldsv_version <= MM_MS_C_VER)
+        i = OLD_MAX_NUMOF_MARKETS;
+    else
+        i = MAX_NUMOF_MARKETS;
+    for (x = 0; x < i; x++) {
+        sscanf(gzgets(gzfile, s, 256), "%d", &marketx[x]);
+        sscanf(gzgets(gzfile, s, 256), "%d", &markety[x]);
+    }
+    prog_box("", 94);
+    sscanf(gzgets(gzfile, s, 256), "%d", &numof_markets);
+    sscanf(gzgets(gzfile, s, 256), "%d", &people_pool);
+    sscanf(gzgets(gzfile, s, 256), "%d", &total_money);
+    sscanf(gzgets(gzfile, s, 256), "%d", &income_tax_rate);
+    sscanf(gzgets(gzfile, s, 256), "%d", &coal_tax_rate);
+    sscanf(gzgets(gzfile, s, 256), "%d", &dole_rate);
+    sscanf(gzgets(gzfile, s, 256), "%d", &transport_cost_rate);
+    sscanf(gzgets(gzfile, s, 256), "%d", &goods_tax_rate);
+    sscanf(gzgets(gzfile, s, 256), "%d", &export_tax);
+    sscanf(gzgets(gzfile, s, 256), "%d", &export_tax_rate);
+    sscanf(gzgets(gzfile, s, 256), "%d", &import_cost);
+    sscanf(gzgets(gzfile, s, 256), "%d", &import_cost_rate);
+    sscanf(gzgets(gzfile, s, 256), "%d", &tech_level);
+    if (tech_level > MODERN_WINDMILL_TECH)
+        modern_windmill_flag = 1;
+    sscanf(gzgets(gzfile, s, 256), "%d", &tpopulation);
+    sscanf(gzgets(gzfile, s, 256), "%d", &tstarving_population);
+    sscanf(gzgets(gzfile, s, 256), "%d", &tunemployed_population);
+    sscanf(gzgets(gzfile, s, 256), "%d", &x);   /* waste_goods obsolete */
+    sscanf(gzgets(gzfile, s, 256), "%d", &power_made);
+    sscanf(gzgets(gzfile, s, 256), "%d", &power_used);
+    sscanf(gzgets(gzfile, s, 256), "%d", &coal_made);
+    sscanf(gzgets(gzfile, s, 256), "%d", &coal_used);
+    sscanf(gzgets(gzfile, s, 256), "%d", &goods_made);
+    sscanf(gzgets(gzfile, s, 256), "%d", &goods_used);
+    sscanf(gzgets(gzfile, s, 256), "%d", &ore_made);
+    sscanf(gzgets(gzfile, s, 256), "%d", &ore_used);
+    sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diff_old_population */
+
+    /* Update variables calculated from those above */
+    housed_population = tpopulation / NUMOF_DAYS_IN_MONTH;
+
+    prog_box("", 96);
+    /* Get size of monthgraph array */
+    if (ldsv_version <= MG_C_VER) {
+        i = 120;
+    } else {
+        sscanf(gzgets(gzfile, s, 256), "%d", &i);
+    }
+    for (x = 0; x < i; x++) {
+        /* If more entries in file than will fit on screen, 
+           then we need to skip past them. */
+        if (x >= monthgraph_size) {
+            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &monthgraph_pop[x] */
+            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &monthgraph_starve[x] */
+            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &monthgraph_nojobs[x] */
+            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &monthgraph_ppool[x] */
+        } else {
+            sscanf(gzgets(gzfile, s, 256), "%d", &monthgraph_pop[x]);
+            sscanf(gzgets(gzfile, s, 256), "%d", &monthgraph_starve[x]);
+            sscanf(gzgets(gzfile, s, 256), "%d", &monthgraph_nojobs[x]);
+            sscanf(gzgets(gzfile, s, 256), "%d", &monthgraph_ppool[x]);
+        }
+        /* If our save file is old, skip past obsolete diffgraph entries */
+        if (ldsv_version <= MG_C_VER) {
+            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_power[x] */
+            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_coal[x] */
+            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_goods[x] */
+            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_ore[x] */
+            sscanf(gzgets(gzfile, s, 256), "%d", &dummy);       /* &diffgraph_population[x] */
+        }
+    }
+    /* If screen bigger than number of entries in file, pad with zeroes */
+    while (x < monthgraph_size) {
+        monthgraph_pop[x] = 0;
+        monthgraph_starve[x] = 0;
+        monthgraph_nojobs[x] = 0;
+        monthgraph_ppool[x] = 0;
+        x++;
+    }
+    prog_box("", 98);
+    sscanf(gzgets(gzfile, s, 256), "%d", &rockets_launched);
+    sscanf(gzgets(gzfile, s, 256), "%d", &rockets_launched_success);
+    sscanf(gzgets(gzfile, s, 256), "%d", &coal_survey_done);
+
+    for (x = 0; x < pbar_data_size; x++) {
+        for (p = 0; p < num_pbars; p++) {
+            sscanf(gzgets(gzfile, s, 256), "%d", &(pbar_tmp));
+            update_pbar(p, pbar_tmp, 1);
+/*	    sscanf( gzgets( gzfile, s, 256 ), "%d", &(pbars[p].data[x])); */
+        }
+    }
+
+    for (p = 0; p < num_pbars; p++)
+        pbars[p].data_size = pbar_data_size;
+
+    prog_box("", 99);
+
+    for (p = 0; p < num_pbars; p++) {
+        sscanf(gzgets(gzfile, s, 256), "%d", &(pbars[p].oldtot));
+        sscanf(gzgets(gzfile, s, 256), "%d", &(pbars[p].diff));
+    }
+
+    sscanf(gzgets(gzfile, s, 256), "%d", &cheat_flag);
+    sscanf(gzgets(gzfile, s, 256), "%d", &total_pollution_deaths);
+    sscanf(gzgets(gzfile, s, 256), "%f", &pollution_deaths_history);
+    sscanf(gzgets(gzfile, s, 256), "%d", &total_starve_deaths);
+    sscanf(gzgets(gzfile, s, 256), "%f", &starve_deaths_history);
+    sscanf(gzgets(gzfile, s, 256), "%d", &total_unemployed_years);
+    sscanf(gzgets(gzfile, s, 256), "%f", &unemployed_history);
+    sscanf(gzgets(gzfile, s, 256), "%d", &max_pop_ever);
+    sscanf(gzgets(gzfile, s, 256), "%d", &total_evacuated);
+    sscanf(gzgets(gzfile, s, 256), "%d", &total_births);
+    for (x = 0; x < NUMOF_MODULES; x++)
+        sscanf(gzgets(gzfile, s, 256), "%d", &(module_help_flag[x]));
+    sscanf(gzgets(gzfile, s, 256), "%d", &x);   /* just dummy reads */
+    sscanf(gzgets(gzfile, s, 256), "%d", &x);   /* for backwards compatibility. */
+
+    /* 10 dummy strings, for missed out things, have been put in save. */
+    /* Input from this point uses them. */
+    /* XXX: WCK: Huh? Missed out things? */
+
+    sscanf(gzgets(gzfile, s, 256), "%128s", given_scene);
+    if (strncmp(given_scene, "dummy", 5) == 0 || strlen(given_scene) < 3)
+        given_scene[0] = 0;
+    sscanf(gzgets(gzfile, s, 256), "%128s", s);
+    if (strncmp(given_scene, "dummy", 5) != 0)
+        sscanf(s, "%d", &highest_tech_level);
+    else
+        highest_tech_level = 0;
+
+    gzgets(gzfile, s, 200);   
+    if (sscanf
+        (s, "sust %d %d %d %d %d %d %d %d %d %d", &sust_dig_ore_coal_count, &sust_port_count, &sust_old_money_count,
+         &sust_old_population_count, &sust_old_tech_count, &sust_fire_count, &sust_old_money, &sust_old_population,
+         &sust_old_tech, &sustain_flag) == 10) {
+        sust_dig_ore_coal_tip_flag = sust_port_flag = 1;
+        /* GCS FIX: Check after loading file if screen is drawn OK */
+        /* draw_sustainable_window (); */
+    } else
+        sustain_flag = sust_dig_ore_coal_count = sust_port_count
+            = sust_old_money_count = sust_old_population_count
+            = sust_old_tech_count = sust_fire_count = sust_old_money = sust_old_population = sust_old_tech = 0;
+
+    if (ldsv_version == WATERWELL_V2) {
+        gzgets(gzfile, s, 80);   
+        sscanf(s, "arid %d %d", &global_aridity, &global_mountainity);
+#ifdef DEBUG
+        fprintf(stderr," arid %d, mountain %d \n", global_aridity, global_mountainity);
+#endif
+        for (x = 0; x < WORLD_SIDE_LEN; x++) {
+            for (y = 0; y < WORLD_SIDE_LEN; y++) {
+                gzgets(gzfile, s, 200);  
+                sscanf(s,"%d %d %d %d %d %d %d %d %d %d %d %d",&(ground[x][y].altitude)
+                        , &ground[x][y].ecotable
+                        , &ground[x][y].wastes
+                        , &ground[x][y].pollution
+                        , &ground[x][y].water_alt
+                        , &ground[x][y].water_pol
+                        , &ground[x][y].water_wast
+                        , &ground[x][y].water_next
+                        , &ground[x][y].int1
+                        , &ground[x][y].int2
+                        , &ground[x][y].int3
+                        , &ground[x][y].int4 
+                        );
+#ifdef DEBUG
+                if (x == 10 && y == 10)
+                    fprintf(stderr," alt %d, int4 %d \n", ground[x][y].altitude, ground[x][y].int4);
+#endif
+            }
+        }
+    }
+    gzclose(gzfile);
+
+    numof_shanties = count_groups(GROUP_SHANTY);
+    numof_communes = count_groups(GROUP_COMMUNE);
+    prog_box("", 100);
+
+    /* set up the university intake. */
+    x = count_groups(GROUP_UNIVERSITY);
+    if (x > 0) {
+        university_intake_rate = (count_groups(GROUP_SCHOOL) * 20) / x;
+        if (university_intake_rate > 100)
+            university_intake_rate = 100;
+    } else
+        university_intake_rate = 50;
+
+    unhighlight_module_button(selected_module);
+    selected_module = sbut[7];  /* 7 is track.  Watch out though! */
+    highlight_module_button(selected_module);
+    set_selected_module(CST_TRACK_LR);
+
+    print_total_money();
+    reset_animation_times();
+    /* kind upgrade of MP_TECH for old buildings, when we don't know
+     * eg light industries pollution depends on tech */
+    int tk = (3 * highest_tech_level) / 4;
+    if (tech_level >= tk)
+        tk = tech_level;
+
+    /* update tech dep for compatibility with old games */
+    for (x = 0; x < WORLD_SIDE_LEN; x++)
+        for (y = 0; y < WORLD_SIDE_LEN; y++) {
+
+            switch (MP_GROUP(x, y)) {
+            case (GROUP_WINDMILL):
+                MP_TECH(x,y) = MP_INFO(x, y).int_2;
+                MP_INFO(x, y).int_1 = (int)(WINDMILL_POWER + (((double)MP_TECH(x, y) * WINDMILL_POWER)
+                                                              / MAX_TECH_LEVEL));
+                break;
+
+            case (GROUP_COAL_POWER):
+                MP_TECH(x,y) = MP_INFO(x,y).int_4;
+                MP_INFO(x, y).int_1 = (int)(POWERS_COAL_OUTPUT + (((double)MP_TECH(x, y) * POWERS_COAL_OUTPUT)
+                                                                  / MAX_TECH_LEVEL));
+                break;
+
+            case (GROUP_SOLAR_POWER):
+                MP_TECH(x,y) = MP_INFO(x,y).int_2;
+                MP_INFO(x, y).int_3 = (int)(POWERS_SOLAR_OUTPUT + (((double)MP_TECH(x, y) * POWERS_SOLAR_OUTPUT)
+                                                                   / MAX_TECH_LEVEL));
+            case GROUP_ORGANIC_FARM:
+                MP_TECH(x,y) = MP_INFO(x,y).int_1;
+                break;
+
+            case GROUP_RECYCLE:
+                MP_TECH(x,y) = MP_INFO(x, y).int_4;
+                break;
+
+            case GROUP_INDUSTRY_L:
+                if ( MP_TECH(x,y) == 0 )
+                    if ( tk > GROUP_INDUSTRY_L_TECH )
+                        MP_TECH(x,y) = tk;
+                    else
+                        MP_TECH(x,y) = GROUP_INDUSTRY_L_TECH;
+                break;
+            }
+        }
+
+    map_power_grid(true);       /* WCK:  Is this safe to do here?
+                                 * AL1: No, in NG_1.1
+                                 * In case of error message with ok_dial_box
+                                 *    the dialog cannot appear because the screen
+                                 *    is not set up => crash.
+                                 * FIXME: move all initialisation elsewhere, in 
+                                 *    engine.cpp or simulate.cpp.
+                                 */
+    upgrade_to_v2();
+
+}
+
+void reset_animation_times(void)
+{
+    int x, y;
+
+    for (y = 0; y < WORLD_SIDE_LEN; y++)
+        for (x = 0; x < WORLD_SIDE_LEN; x++) {
+            MP_ANIM(x,y) = 0;
+            if (MP_GROUP(x, y) == GROUP_FIRE)
+                MP_INFO(x, y).int_3 = 0;
+        }
+}
+
+void check_endian(void)
+{
+    static int flag = 0;
+    char *cs;
+    int t, x, y;
+    t = 0;
+    cs = (char *)&t;
+    *cs = 1;
+    if (t == 1)                 /* little endian */
+        return;
+    if (flag == 0) {
+        flag = 1;
+    }
+    for (y = 0; y < WORLD_SIDE_LEN; y++) {
+        for (x = 0; x < WORLD_SIDE_LEN; x++) {
+            eswap32(&(MP_INFO(x, y).population));
+            eswap32(&(MP_INFO(x, y).flags));
+            if (sizeof(short) == 2) {
+                eswap16(&(MP_INFO(x, y).coal_reserve));
+                eswap16(&(MP_INFO(x, y).ore_reserve));
+            } else if (sizeof(short) == 4) {
+                eswap32((int *)&(MP_INFO(x, y).coal_reserve));
+                eswap32((int *)&(MP_INFO(x, y).ore_reserve));
+            } else {
+                /* prevent gcc warning on amd64: argument 2 has type 'long unsigned int' !!! */
+                printf("Strange size (%d) for short, please mail me.\n", (int) sizeof(short));
+            }
+            eswap32(&(MP_INFO(x, y).int_1));
+            eswap32(&(MP_INFO(x, y).int_2));
+            eswap32(&(MP_INFO(x, y).int_3));
+            eswap32(&(MP_INFO(x, y).int_4));
+            eswap32(&(MP_INFO(x, y).int_5));
+            eswap32(&(MP_INFO(x, y).int_6));
+            eswap32(&(MP_INFO(x, y).int_7));
+        }
+    }
+}
+
+void eswap32(int *i)
+{
+    char *cs, c1, c2, c3, c4;
+    cs = (char *)i;
+    c1 = *cs;
+    c2 = *(cs + 1);
+    c3 = *(cs + 2);
+    c4 = *(cs + 3);
+    *(cs++) = c4;
+    *(cs++) = c3;
+    *(cs++) = c2;
+    *cs = c1;
+}
+
+void eswap16(unsigned short *i)
+{
+    char *cs, c1, c2;
+    cs = (char *)i;
+    c1 = *cs;
+    c2 = *(cs + 1);
+    *(cs++) = c2;
+    *cs = c1;
+}
+
+void upgrade_to_v2 (void)
+{
+    // Follow order and logic of new_city
+    int x,y;
+
+    global_mountainity= 10 + rand () % 300;
+
+    // Grey border (not visible on the map, x = 0 , x = 99, y = 0, y = 99) 
+    for (x = 0; x < WORLD_SIDE_LEN; x++)
+        for (y = 0; y < WORLD_SIDE_LEN; y++) {
+            ALT(x,y) = 0;
+            if ( !GROUP_IS_BARE(MP_GROUP(x, y)) ) {
+                /* be nice, put water under all existing builings / farms / parks ... */
+                /* This may change according to global_aridity and distance_to_river */
+                MP_INFO(x,y).flags |= FLAG_HAS_UNDERGROUND_WATER;
+            }
+        }
+
+    /* Let 10 years in game time to put waterwells where needed, then starvation will occur */
+    deadline=total_time + 1200 * 10;
+    flag_warning = true; // warn player.
+
+    /* TODO AL1 Upgrade ground[x][y].water_alt and .altitude
+     * TODO This not used yet, so just keep initialisation to zero, until something good is done
+     */
+
+    setup_land();
+}

Copied: trunk/src/lincity/old_ldsvguts.h (from rev 1322, trunk/src/lincity/ldsvguts.h)

Modified: trunk/src/lincity/simulate.cpp
===================================================================
--- trunk/src/lincity/simulate.cpp	2007-12-17 23:29:59 UTC (rev 1323)
+++ trunk/src/lincity/simulate.cpp	2007-12-17 23:43:10 UTC (rev 1324)
@@ -32,7 +32,6 @@
 #include "gui_interface/shared_globals.h"
 #include "lctypes.h"
 #include "lin-city.h"
-#include "ldsvguts.h"
 #include "engglobs.h"
 #include "gui_interface/screen_interface.h"
 #include "power.h"



From alainb at mail.berlios.de  Tue Dec 18 22:31:02 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Tue, 18 Dec 2007 22:31:02 +0100
Subject: [Lincity-ng-commit] r1325 - in trunk/src/lincity: . modules
Message-ID: <200712182131.lBILV29g022859@sheep.berlios.de>

Author: alainb
Date: 2007-12-18 22:30:56 +0100 (Tue, 18 Dec 2007)
New Revision: 1325

Modified:
   trunk/src/lincity/modules/solar_power.cpp
   trunk/src/lincity/modules/solar_power.h
   trunk/src/lincity/modules/windmill.cpp
   trunk/src/lincity/old_ldsvguts.cpp
   trunk/src/lincity/old_ldsvguts.h
   trunk/src/lincity/simulate.cpp
Log:
fix old solar_power upgrade

Modified: trunk/src/lincity/modules/solar_power.cpp
===================================================================
--- trunk/src/lincity/modules/solar_power.cpp	2007-12-17 23:43:10 UTC (rev 1324)
+++ trunk/src/lincity/modules/solar_power.cpp	2007-12-18 21:30:56 UTC (rev 1325)
@@ -23,7 +23,7 @@
   MP_TECH(x,y) is the tech level when it was built.
 */
 
-void do_power_source(int x, int y)
+void do_power_source_solar(int x, int y)
 {
 
     if (get_jobs(x, y, SOLAR_POWER_JOBS)) {
@@ -44,7 +44,7 @@
     mps_store_title(i++, _("Power Station"));
     i++;
 
-    format_power(s, sizeof(s), MP_INFO(x, y).int_3);
+    format_power(s, sizeof(s), MP_INFO(x, y).int_1);
     mps_store_title(i++, _("Max Output"));
     mps_store_title(i++, s);
     i++;

Modified: trunk/src/lincity/modules/solar_power.h
===================================================================
--- trunk/src/lincity/modules/solar_power.h	2007-12-17 23:43:10 UTC (rev 1324)
+++ trunk/src/lincity/modules/solar_power.h	2007-12-18 21:30:56 UTC (rev 1325)
@@ -8,7 +8,7 @@
 #ifndef __solar_power_h__
 #define __solar_power_h__
 
-void do_power_source(int x, int y);
+void do_power_source_solar(int x, int y);
 void mps_solar_power(int x, int y);
 
 #endif /* __solar_power_h__ */

Modified: trunk/src/lincity/modules/windmill.cpp
===================================================================
--- trunk/src/lincity/modules/windmill.cpp	2007-12-17 23:43:10 UTC (rev 1324)
+++ trunk/src/lincity/modules/windmill.cpp	2007-12-18 21:30:56 UTC (rev 1325)
@@ -29,6 +29,7 @@
         MP_INFO(x, y).int_5 = MP_INFO(x, y).int_1;
         grid[MP_INFO(x, y).int_6]->avail_power += MP_INFO(x, y).int_1;
     } else {
+        MP_INFO(x,y).int_5 = 0;
         MP_ANIM(x, y) = real_time + MODERN_WINDMILL_ANIM_SPEED;
         return;
     }

Modified: trunk/src/lincity/old_ldsvguts.cpp
===================================================================
--- trunk/src/lincity/old_ldsvguts.cpp	2007-12-17 23:43:10 UTC (rev 1324)
+++ trunk/src/lincity/old_ldsvguts.cpp	2007-12-18 21:30:56 UTC (rev 1325)
@@ -455,8 +455,25 @@
                 break;
 
             case (GROUP_SOLAR_POWER):
-                MP_TECH(x,y) = MP_INFO(x,y).int_2;
-                MP_INFO(x, y).int_3 = (int)(POWERS_SOLAR_OUTPUT + (((double)MP_TECH(x, y) * POWERS_SOLAR_OUTPUT)
+                if ( MP_INFO(x,y).int_2 !=0 ) {
+                    MP_TECH(x,y) = MP_INFO(x,y).int_2;
+                } else {
+                    float PSO = POWERS_SOLAR_OUTPUT;
+                    float MT = MAX_TECH_LEVEL;
+                    //because of bug introduced then fixed near 1207 1218 or in waterwell branch
+                    if (MP_INFO(x,y).int_1 != 0) {
+                        MP_TECH(x,y) = (int) ((MP_INFO(x,y).int_1 - PSO) * MT)/PSO;
+                    } else if (MP_INFO(x,y).int_3 != 0) {
+                        MP_TECH(x,y) = (int) ((MP_INFO(x,y).int_3 - PSO) * MT)/PSO;
+                    } else {
+                        fprintf(stderr," Error, unknown tech level for solar plant at x=%d, y=%d\n", x, y);
+                        if (tk > GROUP_SOLAR_POWER_TECH)
+                            MP_TECH(x,y) = tk;
+                        else
+                            MP_TECH(x,y) = GROUP_SOLAR_POWER_TECH;
+                    }
+                }
+                MP_INFO(x, y).int_1 = (int)(POWERS_SOLAR_OUTPUT + (((double)MP_TECH(x, y) * POWERS_SOLAR_OUTPUT)
                                                                    / MAX_TECH_LEVEL));
             case GROUP_ORGANIC_FARM:
                 MP_TECH(x,y) = MP_INFO(x,y).int_1;

Modified: trunk/src/lincity/old_ldsvguts.h
===================================================================
--- trunk/src/lincity/old_ldsvguts.h	2007-12-17 23:43:10 UTC (rev 1324)
+++ trunk/src/lincity/old_ldsvguts.h	2007-12-18 21:30:56 UTC (rev 1325)
@@ -3,7 +3,7 @@
  * This file is part of lincity-ng
  * ---------------------------------------------------------------------- */
 
-/* This is the OLD saving facility, before lincity-NG 1.91 */
+/* This is the OLD facility, before lincity-NG 1.91 */
 /* Used for reading old games and convert them to new format + data structure */
 
 #ifndef __old_ldsvguts_h__

Modified: trunk/src/lincity/simulate.cpp
===================================================================
--- trunk/src/lincity/simulate.cpp	2007-12-17 23:43:10 UTC (rev 1324)
+++ trunk/src/lincity/simulate.cpp	2007-12-18 21:30:56 UTC (rev 1325)
@@ -417,7 +417,7 @@
                 do_power_line(x, y);
                 break;
             case GROUP_SOLAR_POWER:
-                do_power_source(x, y);
+                do_power_source_solar(x, y);
                 break;
             case GROUP_SUBSTATION:
                 do_power_substation(x, y);



From wolfgangb at mail.berlios.de  Wed Dec 19 14:19:43 2007
From: wolfgangb at mail.berlios.de (wolfgangb at BerliOS)
Date: Wed, 19 Dec 2007 14:19:43 +0100
Subject: [Lincity-ng-commit] r1326 - in trunk/data: help/de locale locale/gui
Message-ID: <200712191319.lBJDJhZj012490@sheep.berlios.de>

Author: wolfgangb
Date: 2007-12-19 14:19:42 +0100 (Wed, 19 Dec 2007)
New Revision: 1326

Added:
   trunk/data/help/de/waterwell.xml
Modified:
   trunk/data/help/de/button-index.xml
   trunk/data/help/de/commune.xml
   trunk/data/help/de/farm.xml
   trunk/data/help/de/index.xml
   trunk/data/help/de/industryl.xml
   trunk/data/help/de/msb-starve.xml
   trunk/data/help/de/park.xml
   trunk/data/help/de/residential.xml
   trunk/data/help/de/tutorial-basics.xml
   trunk/data/locale/de.po
   trunk/data/locale/gui/de.po
Log:
Updated German translation for waterwell.


Modified: trunk/data/help/de/button-index.xml
===================================================================
--- trunk/data/help/de/button-index.xml	2007-12-18 21:30:56 UTC (rev 1325)
+++ trunk/data/help/de/button-index.xml	2007-12-19 13:19:42 UTC (rev 1326)
@@ -18,6 +18,9 @@
 	<img src="images/gui/buttonpanel/residence/residence.png"/>
 	<p><a href="residential">Wohngebiet</a></p>
 
+    <img src="images/gui/buttonpanel/waterwell.png"/>
+    <p><a href="waterwell">Brunnen</a></p>
+
 	<!--<p style="subtitle">Bauernh?fe</p>-->
 	<img src="images/gui/buttonpanel/parks/farm.png"/>
 	<p><a href="farm">Bauernhof</a></p>

Modified: trunk/data/help/de/commune.xml
===================================================================
--- trunk/data/help/de/commune.xml	2007-12-18 21:30:56 UTC (rev 1325)
+++ trunk/data/help/de/commune.xml	2007-12-19 13:19:42 UTC (rev 1326)
@@ -5,6 +5,7 @@
 	<p style="hp">Sie werden wahrscheinlich "ein paar" K?hlereien brauchen um genug Kohle und Stahl f?r z.B. T?pfereien, Schmieden und Spinnereien zu produzieren.</p>
 	<p style="hp">Falls eine K?hlerei f?r 10 Jahre nichts mehr Produziert, wird sie geschlossen und sie verwandelt sich in einen Park.</p>
 	<p style="hp">K?hlereien k?nnen an jeder Stelle mit dem Verkehr verbunden werden, nicht nur am Tor!</p>
+	<p style="hp">Die Produktion der K?hlerei h?ngt vom Grundwasser ab. Felder mit Grundwasser sind gr?n, die anderen gelb-braun wie die W?ste.</p>
 	
 	<p style="hp">Dies ist eine K?hlerei</p>
 	<img src="images/tiles/commune1.png" halign="center"/>

Modified: trunk/data/help/de/farm.xml
===================================================================
--- trunk/data/help/de/farm.xml	2007-12-18 21:30:56 UTC (rev 1325)
+++ trunk/data/help/de/farm.xml	2007-12-19 13:19:42 UTC (rev 1326)
@@ -9,6 +9,8 @@
 	<img src="images/gui/buttonpanel/parks/farm.png" halign="center"/>
 	
 	<p style="hp">Bauernh?fe brauchen Arbeitspl?tze um mehr als nur eine minimale Menge an Essen zu produzieren. Die Bauernh?fe mit Energie zu versorgen steigert die Produktion ebenfallsp. Energie beinhaltet auch "altmodische" Windm?hlen, die helfen mehr Essen zu Produzieren und dabei keine Verschmutzung verursacht.</p>
+	<p style="hp">Die landwirtschaftliche Produktion h?ngt vom Grundwasser ab, 
+    Felder mit Grundwasser sind gr?n, andere gelbbraun wie die W?ste.</p>
 	<p style="hsubtitle">Siehe auch:</p>
 	<li><a href="market">Markt</a></li>
 	<li><a href="tech-level">Tech-Level</a></li>

Modified: trunk/data/help/de/index.xml
===================================================================
--- trunk/data/help/de/index.xml	2007-12-18 21:30:56 UTC (rev 1325)
+++ trunk/data/help/de/index.xml	2007-12-19 13:19:42 UTC (rev 1326)
@@ -52,6 +52,7 @@
 <li><a href="blacksmith">Schmiede</a></li>
 <li><a href="coalmine">Kohlegrube</a></li>
 <li><a href="commune">K?hlerei</a></li>
+<li><a href="waterwell">Brunnen</a></li>
 <li><a href="farm">Bauernhof</a></li>
 <li><a href="windmill">Windm?hle</a></li>
 <li><a href="mill">Spinnerei</a></li>

Modified: trunk/data/help/de/industryl.xml
===================================================================
--- trunk/data/help/de/industryl.xml	2007-12-18 21:30:56 UTC (rev 1325)
+++ trunk/data/help/de/industryl.xml	2007-12-19 13:19:42 UTC (rev 1326)
@@ -1,10 +1,10 @@
 <?xml version="1.0" encoding="utf-8"?>
 <Document style="helpdocument">
 	<p style="htitle">Leichtes Industrie Gebiet</p>
-	<p style="hp">Die leichte Industrie wandelt Erz in G?ter um. Diese verarbeitung wird effizienter, wenn Stahl verf?gbar ist. Energie erh?ht ebenfalls den Ausschuss. Windm?hlen sind jedoch <b>nicht</b> zur Energieversorgung f?r diese Gebiete geeignet.</p>
-	<p style="hp">Als Faustregel kann man das Obere jedoch ignoieren, der Haupts?chliche Ausschuss der leichten Industrie h?ngt vom verf?gbaren Rohmaterial ab, das <b>verbraucht werden</b> kann, so wie die zur Verf?gung stehenden Arbeitspl?tze.</p>
+	<p style="hp">Die leichte Industrie wandelt Erz in G?ter um. Diese Verarbeitung wird effizienter, wenn Stahl verf?gbar ist. Energie erh?ht ebenfalls die Produktionsmenge. Windm?hlen sind jedoch <b>nicht</b> zur Energieversorgung f?r diese Gebiete geeignet.</p>
+	<p style="hp">Als Faustregel kann man das Obere jedoch ignoieren, der haupts?chliche Aussto? der leichten Industrie h?ngt vom verf?gbaren Rohmaterial ab, das <b>verbraucht werden</b> kann, so wie von den zur Verf?gung stehenden Arbeitskr?ften.</p>
 	<p style="hp">Dieses Gebiet wird direkt an den Verkehr angeschlossen um Erz, Stahl und G?ter zu beziehen. Sie brauchen jedoch einen Markt f?r die Arbeitspl?tze.</p>
-	<p style="hp">Diese gebiete k?nnen <b>NUR</b> an der oberen linken Ecke mit dem Verkehr verbunden werden. Transport will curve in when it is connected.</p>
+	<p style="hp">Diese Gebiete k?nnen <b>NUR</b> an der oberen linken Ecke mit dem Verkehr verbunden werden. Es gibt eine Abzweigung im Verkehrsweg, wenn das Geb?ude angeschlossen ist.</p>
 	
 	<p style="hp">Dies ist die leichte Industrie</p>
 	<img src="images/tiles/industryll1.png" halign="center"/>

Modified: trunk/data/help/de/msb-starve.xml
===================================================================
--- trunk/data/help/de/msb-starve.xml	2007-12-18 21:30:56 UTC (rev 1325)
+++ trunk/data/help/de/msb-starve.xml	2007-12-19 13:19:42 UTC (rev 1326)
@@ -4,9 +4,12 @@
 	<img src="images/gui/mapview/roundbuttons/round_food.png" halign="center"/>
 	<p style="hp">In der Ern?hrungs?bersicht werden nur Wohngebiete 
     ber?cksichtigt.</p>
-	<p style="hp">Hellgr?n bedeutet, da? gen?gend Nahrung f?r alle Bewohner
+	<p style="hp">Hellgr?n bedeutet, da? gen?gend Nahrung von den M?rkten und 
+    Wasser von erreichbaren Brunnen f?r alle Bewohner
      vorhanden ist. Dunkelgr?n und Hellrot zeigen zunehmende Unterversorgung
      an.</p>
+    <p style="hp">Der Einzugsbereich von Brunnen wird dunkelblau angezeigt.</p>
+
 	<p style="hp">Linksklick auf die Minikarte beweg die Hauptansicht zur
     gew?hlten Stelle. Um die Minikarte ?ber die Hauptansicht zu legen 
     dr?cken sie 'v' oder den Overlay-Knopf links von der Minikarte.</p>

Modified: trunk/data/help/de/park.xml
===================================================================
--- trunk/data/help/de/park.xml	2007-12-18 21:30:56 UTC (rev 1325)
+++ trunk/data/help/de/park.xml	2007-12-19 13:19:42 UTC (rev 1326)
@@ -10,6 +10,8 @@
     ?ber ihr Entstehungsgebiet hinaus ausbreitet. </p>
 	<p style="hp">Der Wind kommt <b>von</b> S?dwest, also bauen sie die Parks
     entsprechend.</p>
+	<p style="hp">Parks ben?tigen Grundwasser, sie k?nnen also nur auf "gr?nen"
+    Feldern gebaut werden.</p>
 	
 	<p style="hp">Das ist ein Parkk</p>
 	<img src="images/tiles/parkland-plane.png" halign="center"/>

Modified: trunk/data/help/de/residential.xml
===================================================================
--- trunk/data/help/de/residential.xml	2007-12-18 21:30:56 UTC (rev 1325)
+++ trunk/data/help/de/residential.xml	2007-12-19 13:19:42 UTC (rev 1326)
@@ -1,14 +1,17 @@
 <?xml version="1.0" encoding="utf-8"?>
 <Document style="helpdocument">
 	<p style="htitle">Wohngebiete</p>
-	<p style="hp">Hier wohnt die Bev?lkerung. Um die Leute dazu zu bringen, sich
-    in dieser Gegend niederzulassen m?ssen sie mit Nahrung versorgt werden.
-    Es hilft auch, ihnen Arbeitspl?tze und Waren zur Verf?gung zu stellen.
-    Wohngebiete m?ssen dazu im Bereich eines Marktes liegen, oder mit einem
-    Transportweg verbunden sein. Es gibt drei verschiedene Arten von Wohngebieten:
-    welche mit geringer, mittlerer und hoher Siedlungsdichte. Jede Art hat
-    eine Unterschiedliche Geburten- und Sterberate. Dadurch k?nnen sie das
-    Wachstum Ihrer Bev?lkerung beeinflussen.</p>
+    <p style="hp">Hier wohnt die Bev?lkerung. Um die Leute dazu
+    zu bringen, sich in dieser Gegend niederzulassen m?ssen
+    sie mit Nahrung und Wasser versorgt werden.  Es hilft auch,
+    ihnen Arbeitspl?tze und Waren zur Verf?gung zu stellen.
+    Wohngebiete m?ssen dazu im Bereich eines Marktes liegen,
+    oder mit einem Transportweg verbunden sein. Auch m?ssen sie
+    im Bereich eines Brunnens liegen. Es gibt drei verschiedene
+    Arten von Wohngebieten: welche mit geringer, mittlerer und
+    hoher Siedlungsdichte. Jede Art hat eine Unterschiedliche
+    Geburten- und Sterberate. Dadurch k?nnen sie das Wachstum Ihrer
+    Bev?lkerung beeinflussen.</p>
 	<p style="hp">Sp?ter im Spiel, sobald sie das erforderliche Technologieniveau
     erreicht haben, k?nnen Sie auch moderner Geb?ude bauen, bis hin zu Hochh?usern.</p>
 
@@ -32,6 +35,8 @@
 	<img src="images/gui/buttonpanel/residence/residence-hightec-high.png" halign="center"/>
 
 	<p style="hsubtitle">Siehe auch:</p>
+	<li><a href="waterwell">Brunnen</a></li>
 	<li><a href="market">Markt</a></li>
+	<li><a href="transport">Transport</a></li>
 </Document>
 

Modified: trunk/data/help/de/tutorial-basics.xml
===================================================================
--- trunk/data/help/de/tutorial-basics.xml	2007-12-18 21:30:56 UTC (rev 1325)
+++ trunk/data/help/de/tutorial-basics.xml	2007-12-19 13:19:42 UTC (rev 1326)
@@ -5,6 +5,7 @@
 In Ihrem neuen Dorf gibt es bereits die grundlegenden Elemente: </p>
 <li>Bauernh?fe, die die M?rkte mit Nahrung beliefern </li>
 <li>K?hlereien, die Holzkohle sowie geringe Mengen Erz und Stahl erzeugen </li>
+<li>Einen Brunnen um die Leute mit Wasser zu versorgen</li>
 <li>Wohngebiete</li>
 <li>eine T?pferei, die Waren produziert</li>
 <li>Wege</li>
@@ -52,7 +53,7 @@
 <p style="hsubtitle">Stadtentwicklung </p>
 
 <p style="hp">Nicht vergessen, da? die Leute ohne Nahrung
-verhungern. Um das Bev?lkerungswachstum zu regulieren m?ssen
+verhungern und ohne Wasser Verdursten. Um das Bev?lkerungswachstum zu regulieren m?ssen
 sie ein Gleichgewicht aus den verschiedenen Arten von <a
 href="residential"> Wohngebieten </a> bauen. Diese haben
 verschiedene Geburten- und Sterberaten. Neu B?rger stellen mehr

Added: trunk/data/help/de/waterwell.xml
===================================================================
--- trunk/data/help/de/waterwell.xml	2007-12-18 21:30:56 UTC (rev 1325)
+++ trunk/data/help/de/waterwell.xml	2007-12-19 13:19:42 UTC (rev 1326)
@@ -0,0 +1,12 @@
+<?xml version="1.0"?>
+<Document style="helpdocument">
+	<p style="htitle">Brunnen</p>
+        <p style="hp">Versorgen die H?user im Einzugsbereich mit Wasser. 
+        Wassermangel hat die gleichen Folgen wie Nahrungsmangel. Informationen
+        zur Versorgung gibt es in der Nahrungsversorguns?bersicht der
+        Miniaturkarte.</p>
+
+	<p style="hp">Siehe auch:</p>
+	<li><a href="food">Nahrung</a></li>
+	<li><a href="msb-starve">Nahrungsversorguns?bersicht</a></li>
+</Document>

Modified: trunk/data/locale/de.po
===================================================================
--- trunk/data/locale/de.po	2007-12-18 21:30:56 UTC (rev 1325)
+++ trunk/data/locale/de.po	2007-12-19 13:19:42 UTC (rev 1326)
@@ -8,8 +8,8 @@
 msgstr ""
 "Project-Id-Version: lincity-ng 0.1\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-12-04 00:29+0100\n"
-"PO-Revision-Date: 2007-08-13 19:43+0100\n"
+"POT-Creation-Date: 2007-12-19 13:48+0100\n"
+"PO-Revision-Date: 2007-12-19 14:14+0100\n"
 "Last-Translator: Wolfgang Becker <uafr at gmx.de>\n"
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
@@ -17,402 +17,411 @@
 "Content-Transfer-Encoding: 8bit\n"
 "Plural-Forms: nplurals=2; plural=(n != 1);\n"
 
-#: src/lincity/engine.cpp:120
-msgid ""
-"ERROR: group does not exist. This should not happen! Please consider filling "
-"a bug report to lincity-ng team, with the saved game and what you did :-) "
-msgstr ""
-"Fehler: nicht vorhanden Gruppe. Das darf nicht passieren. Bitte schreiben "
-"sie einen Bugreport. Senden sie ihn zusammen mit dem Spielstand und einer "
-"Beschreibung, was sie gemacht haben an das LinCity NG Team."
+#: src/lincity/loadsave.cpp:127
+#, c-format
+msgid "Save file <%s> - "
+msgstr "Speichere Datei <%s> - "
 
-#: src/lincity/engine.cpp:152
+#: src/lincity/loadsave.cpp:128
+msgid "Can't open save file!"
+msgstr "Kann Speicherdatei nicht ?ffnen."
+
+#: src/lincity/loadsave.cpp:288
+#: src/lincity/old_ldsvguts.cpp:127
+#, c-format
+msgid "Can't open <%s> (gzipped)"
+msgstr "Kann <%s> (komprimiert) nicht ?ffnen."
+
+#: src/lincity/fileutil.cpp:232
+#: src/lincity/fileutil.cpp:276
+msgid "Error. Can't find LINCITY_HOME"
+msgstr "Kann LINCITY_HOME nicht finden."
+
+#: src/lincity/fileutil.cpp:478
+msgid "Error verifying package. Can't find colour.pal."
+msgstr "Fehler bei Paket?berpr?fung. Kann colour.pal nicht finden."
+
+#: src/lincity/fileutil.cpp:491
+#: src/lincity/fileutil.cpp:499
+#, c-format
+msgid "Couldn't create the save directory '%s'\n"
+msgstr "Kann Speicherverzeichniss '%s' nicht anlegen\n"
+
+#: src/lincity/fileutil.cpp:516
+#, c-format
+msgid "Out of memory: malloc failure\n"
+msgstr "Kein Speicher mehr vorhanden: malloc fehlgeschlagen\n"
+
+#: src/lincity/old_ldsvguts.cpp:159
+msgid "Loading scene"
+msgstr "Lade Szenario"
+
+#: src/lincity/simulate.cpp:90
+msgid "Upgrading from old game. You have 10 years to build water wells where needed. After, starvation will occur!  You should check starvation minimap, and read waterwell help page :-)"
+msgstr "Aktualisiere alten Spielstand. Sie haben zehn Jahre Zeit, um die notwendigen Brunnen zu bauen. Ansonsten werden die Leute verdursten. ?berpr?fen sie die Nahrungsversorgungskarte und lesen sie die Hilfeseite ?ber Brunnen."
+
+#: src/lincity/power.cpp:271
+msgid "You have too many power grids. Join some of them"
+msgstr "Sie haben zu viele Stromnetze. Verbinden sie welche."
+
+#: src/lincity/engine.cpp:149
 msgid "Port must be connected to river all along right side."
 msgstr "H?fen m?ssen mit der ganzen rechten Seite  am Flu? liegen."
 
-#: src/lincity/engine.cpp:161 src/lincity/engine.cpp:170
-msgid "Too many substations + windmills. You cannot build one more"
-msgstr ""
-"Es gibt zu viel Umspannwerke und Windm?hlen. Sie k?nnen keine mehr bauen."
+#: src/lincity/engine.cpp:161
+msgid "You can't build a water well here: it is all desert."
+msgstr "Sie k?nnen hier keinen Brunnen bauen, alle Felde sind W?ste."
 
-#: src/lincity/engine.cpp:200
-msgid "Too many markets. You cannot build one more"
-msgstr "Es gibt zu viele M?rkte. Sie k?nnenkeinen mehr bauen."
-
-#: src/lincity/engine.cpp:223
+#: src/lincity/engine.cpp:175
 msgid "You can't build a tip here: this area was once a landfill"
 msgstr "Hier k?nnen Sie keine M?llkippe errichten, da hier schonmal eine war."
 
-#: src/lincity/engine.cpp:248
+#: src/lincity/engine.cpp:190
 msgid "You can't build a mine here: This area was once a landfill"
 msgstr "Sie k?nnen hier keine Bergwerk bauen. Hier war mal eine M?llkippe"
 
-#: src/lincity/engine.cpp:252
+#: src/lincity/engine.cpp:201
 msgid "You can't build a mine here: there is no ore left at this site"
-msgstr ""
-"Sie k?nnen hier kein Bergwerk bauen, da es an dieser Stelle kein Erz mehr "
-"gibt."
+msgstr "Sie k?nnen hier kein Bergwerk bauen, da es an dieser Stelle kein Erz mehr gibt."
 
-#: src/lincity/engine.cpp:264
-msgid "You can't build a water well here: it is all desert."
-msgstr ""
-
-#: src/lincity/engine.cpp:274
+#: src/lincity/engine.cpp:210
 msgid "You can't build a park here: it is a desert, parks need water"
-msgstr ""
+msgstr "Sie k?nnen in der W?ste keinen Park bauen. Parks ben?tigen Grundwasser."
 
-#: src/lincity/engine.cpp:485
+#: src/lincity/engine.cpp:225
+msgid "Too many substations + windmills. You cannot build one more"
+msgstr "Es gibt zu viel Umspannwerke und Windm?hlen. Sie k?nnen keine mehr bauen."
+
+#: src/lincity/engine.cpp:234
+msgid "Too many markets. You cannot build one more"
+msgstr "Es gibt zu viele M?rkte. Sie k?nnenkeinen mehr bauen."
+
+#: src/lincity/engine.cpp:258
+msgid "ERROR: group does not exist. This should not happen! Please consider filling a bug report to lincity-ng team, with the saved game and what you did :-) "
+msgstr "Fehler: nicht vorhanden Gruppe. Das darf nicht passieren. Bitte schreiben sie einen Bugreport. Senden sie ihn zusammen mit dem Spielstand und einer Beschreibung, was sie gemacht haben an das LinCity NG Team."
+
+#: src/lincity/engine.cpp:559
 msgid "It's at a power line."
 msgstr "Es ist eine Stromleitung."
 
-#: src/lincity/engine.cpp:487
+#: src/lincity/engine.cpp:561
 msgid "It's at a solar power station."
 msgstr "Es ist ein Solarkraftwerk"
 
-#: src/lincity/engine.cpp:489
+#: src/lincity/engine.cpp:563
 msgid "It's at a substation."
 msgstr "Es ist ein Umspannh?uschen."
 
-#: src/lincity/engine.cpp:491
+#: src/lincity/engine.cpp:565
 msgid "It's at a residential area."
 msgstr "Es ist ein Wohngebiet."
 
-#: src/lincity/engine.cpp:493
+#: src/lincity/engine.cpp:567
 msgid "It's at a farm."
 msgstr "Es ist ein Bauernhof"
 
-#: src/lincity/engine.cpp:495
+#: src/lincity/engine.cpp:569
 msgid "It's at a market."
 msgstr "Es ist ein Markt."
 
-#: src/lincity/engine.cpp:497
+#: src/lincity/engine.cpp:571
 msgid "It's at a track."
 msgstr "Es ist ein Weg."
 
-#: src/lincity/engine.cpp:499
+#: src/lincity/engine.cpp:573
 msgid "It's at a coal mine."
 msgstr "Es ist eine Kohlegrube."
 
-#: src/lincity/engine.cpp:501
+#: src/lincity/engine.cpp:575
 msgid "It's at a railway."
 msgstr "Es ist eine Eisenbahnschine."
 
-#: src/lincity/engine.cpp:503
+#: src/lincity/engine.cpp:577
 msgid "It's at a coal power station."
 msgstr "Es ist ein Kohlekraftwerk."
 
-#: src/lincity/engine.cpp:505
+#: src/lincity/engine.cpp:579
 msgid "It's at a road."
 msgstr "Es ist eine Stra?e"
 
-#: src/lincity/engine.cpp:507
+#: src/lincity/engine.cpp:581
 msgid "It's at light industry."
 msgstr "Es ist ein Industriegebiet"
 
-#: src/lincity/engine.cpp:509
+#: src/lincity/engine.cpp:583
 msgid "It's at a university."
 msgstr "Es ist eine Universit?t"
 
-#: src/lincity/engine.cpp:511
+#: src/lincity/engine.cpp:585
 msgid "It's at a commune."
 msgstr "Es ist eine K?hlerei."
 
-#: src/lincity/engine.cpp:513
+#: src/lincity/engine.cpp:587
 msgid "It's at a tip."
 msgstr "Es ist eine M?llkippe."
 
-#: src/lincity/engine.cpp:515
+#: src/lincity/engine.cpp:589
 msgid "It's at a port."
 msgstr "Es ist ein Hafen."
 
-#: src/lincity/engine.cpp:517
+#: src/lincity/engine.cpp:591
 msgid "It's at a steel works."
 msgstr "Es ist ein Stahlwerk."
 
-#: src/lincity/engine.cpp:519
+#: src/lincity/engine.cpp:593
 msgid "It's at a recycle centre."
 msgstr "Es ist ein Recyclinghof."
 
-#: src/lincity/engine.cpp:521
+#: src/lincity/engine.cpp:595
 msgid "It's at a health centre."
 msgstr "Es ist ein Krankenhaus."
 
-#: src/lincity/engine.cpp:523
+#: src/lincity/engine.cpp:597
 msgid "It's at a rocket site."
 msgstr "Es ist eine Raketenbasis."
 
-#: src/lincity/engine.cpp:525
+#: src/lincity/engine.cpp:599
 msgid "It's at a windmill."
 msgstr "Es ist eine Windm?hle."
 
-#: src/lincity/engine.cpp:527
+#: src/lincity/engine.cpp:601
 msgid "It's at a school."
 msgstr "Es ist eine Schule."
 
-#: src/lincity/engine.cpp:529
+#: src/lincity/engine.cpp:603
 msgid "It's at a blacksmith."
 msgstr "Es ist ein Schmied."
 
-#: src/lincity/engine.cpp:531
+#: src/lincity/engine.cpp:605
 msgid "It's at a mill."
 msgstr "Es ist eine Spinnerei."
 
-#: src/lincity/engine.cpp:533
+#: src/lincity/engine.cpp:607
 msgid "It's at a pottery."
 msgstr "Es ist eine T?pferei."
 
-#: src/lincity/engine.cpp:535
+#: src/lincity/engine.cpp:609
 msgid "It's at a fire station!!!."
 msgstr "Es ist eine Feuerwehr!"
 
-#: src/lincity/engine.cpp:537
+#: src/lincity/engine.cpp:611
 msgid "It's at a sports field!!!."
 msgstr "Es ist ein Sportplatz."
 
-#: src/lincity/engine.cpp:539
+#: src/lincity/engine.cpp:613
 msgid "It's at a shanty town."
 msgstr "Es ist eine Barackensiedlung."
 
-#: src/lincity/engine.cpp:541
+#: src/lincity/engine.cpp:615
 msgid "UNKNOWN!"
 msgstr "Unbekannt."
 
-#: src/lincity/lintypes.cpp:20
+#: src/lincity/lintypes.cpp:21
 msgid "Empty"
 msgstr "Leer"
 
-#: src/lincity/lintypes.cpp:32
+#: src/lincity/lintypes.cpp:33
 msgid "Power line"
 msgstr "Stromleitung"
 
-#: src/lincity/lintypes.cpp:43
+#: src/lincity/lintypes.cpp:44
 msgid "Solar PS"
 msgstr "Solarkraftwerk"
 
-#: src/lincity/lintypes.cpp:54 src/lincity/modules/substation.cpp:93
+#: src/lincity/lintypes.cpp:55
+#: src/lincity/modules/substation.cpp:93
 msgid "Substation"
 msgstr "Umspannh?uschen"
 
-#: src/lincity/lintypes.cpp:65
+#: src/lincity/lintypes.cpp:66
 msgid "Residential LL"
 msgstr "Friedhof"
 
-#: src/lincity/lintypes.cpp:76
+#: src/lincity/lintypes.cpp:77
 msgid "Farm"
 msgstr "Bauernhof"
 
-#: src/lincity/lintypes.cpp:87 src/lincity/modules/market.cpp:979
-#: src/lincity-ng/Dialog.cpp:507
+#: src/lincity/lintypes.cpp:88
+#: src/lincity/modules/market.cpp:979
+#: src/lincity-ng/Dialog.cpp:508
 msgid "Market"
 msgstr "Markt"
 
-#: src/lincity/lintypes.cpp:98 src/lincity/modules/track.cpp:34
+#: src/lincity/lintypes.cpp:99
+#: src/lincity/modules/track.cpp:34
 msgid "Track"
 msgstr "Weg"
 
-#: src/lincity/lintypes.cpp:109
+#: src/lincity/lintypes.cpp:110
 msgid "Coalmine"
 msgstr "Kohlegrube"
 
-#: src/lincity/lintypes.cpp:120
+#: src/lincity/lintypes.cpp:121
 msgid "Railway"
 msgstr "Eisenbahn"
 
-#: src/lincity/lintypes.cpp:131
+#: src/lincity/lintypes.cpp:132
 msgid "Coal PS"
 msgstr "Kohlekraftwerk"
 
-#: src/lincity/lintypes.cpp:142 src/lincity/modules/road.cpp:43
+#: src/lincity/lintypes.cpp:143
+#: src/lincity/modules/road.cpp:43
 msgid "Road"
 msgstr "Stra?e"
 
-#: src/lincity/lintypes.cpp:153
+#: src/lincity/lintypes.cpp:154
 msgid "Lt. Industry"
 msgstr "Industriegebiet"
 
-#: src/lincity/lintypes.cpp:164 src/lincity/modules/university.cpp:59
+#: src/lincity/lintypes.cpp:165
+#: src/lincity/modules/university.cpp:59
 msgid "University"
 msgstr "Universit?t"
 
-#: src/lincity/lintypes.cpp:175 src/lincity/modules/commune.cpp:172
+#: src/lincity/lintypes.cpp:176
+#: src/lincity/modules/commune.cpp:174
 msgid "Commune"
 msgstr "K?hlerei"
 
-#: src/lincity/lintypes.cpp:186
+#: src/lincity/lintypes.cpp:187
 msgid "Ore mine"
 msgstr "Erzbergwerk"
 
-#: src/lincity/lintypes.cpp:197
+#: src/lincity/lintypes.cpp:198
 msgid "Rubbish tip"
 msgstr "M?llkippe"
 
-#: src/lincity/lintypes.cpp:208 src/lincity/modules/port.cpp:281
-#: src/lincity-ng/Dialog.cpp:561
+#: src/lincity/lintypes.cpp:209
+#: src/lincity/modules/port.cpp:281
+#: src/lincity-ng/Dialog.cpp:562
 msgid "Port"
 msgstr "Hafen"
 
-#: src/lincity/lintypes.cpp:219
+#: src/lincity/lintypes.cpp:220
 msgid "Hv. Industry"
 msgstr "Schwerindustrie"
 
-#: src/lincity/lintypes.cpp:230
+#: src/lincity/lintypes.cpp:231
 msgid "Park"
 msgstr "Park"
 
-#: src/lincity/lintypes.cpp:241 src/lincity-ng/MpsInterface.cpp:519
+#: src/lincity/lintypes.cpp:242
+#: src/lincity-ng/MpsInterface.cpp:519
 msgid "Recycle"
 msgstr "Wertstoffhof"
 
-#: src/lincity/lintypes.cpp:252 src/lincity/modules/water.cpp:17
+#: src/lincity/lintypes.cpp:253
+#: src/lincity/modules/water.cpp:17
 #: src/lincity/modules/residence.cpp:264
 msgid "Water"
 msgstr "Wasser"
 
-#: src/lincity/lintypes.cpp:263
+#: src/lincity/lintypes.cpp:264
 msgid "Health centre"
 msgstr "Krankenhaus"
 
-#: src/lincity/lintypes.cpp:274
+#: src/lincity/lintypes.cpp:275
 msgid "Rocket pad"
 msgstr "Raketenbasis"
 
-#: src/lincity/lintypes.cpp:285 src/lincity/modules/windmill.cpp:75
+#: src/lincity/lintypes.cpp:286
+#: src/lincity/modules/windmill.cpp:74
 #: src/lincity-ng/MpsInterface.cpp:509
 msgid "Windmill"
 msgstr "Windm?hle"
 
-#: src/lincity/lintypes.cpp:296 src/lincity/modules/monument.cpp:51
+#: src/lincity/lintypes.cpp:297
+#: src/lincity/modules/monument.cpp:51
 msgid "Monument"
 msgstr "Monument"
 
-#: src/lincity/lintypes.cpp:307 src/lincity/modules/school.cpp:43
+#: src/lincity/lintypes.cpp:308
+#: src/lincity/modules/school.cpp:43
 msgid "School"
 msgstr "Schule"
 
-#: src/lincity/lintypes.cpp:318 src/lincity/modules/blacksmith.cpp:90
+#: src/lincity/lintypes.cpp:319
+#: src/lincity/modules/blacksmith.cpp:91
 msgid "Blacksmith"
 msgstr "Schmied"
 
-#: src/lincity/lintypes.cpp:329
+#: src/lincity/lintypes.cpp:330
 msgid "Mill"
 msgstr "Spinnerei"
 
-#: src/lincity/lintypes.cpp:340 src/lincity/modules/pottery.cpp:104
+#: src/lincity/lintypes.cpp:341
+#: src/lincity/modules/pottery.cpp:105
 msgid "Pottery"
 msgstr "T?pferei"
 
-#: src/lincity/lintypes.cpp:351
+#: src/lincity/lintypes.cpp:352
 msgid "Fire sta'n"
 msgstr "Feuerwehr"
 
-#: src/lincity/lintypes.cpp:362 src/lincity/modules/cricket.cpp:91
+#: src/lincity/lintypes.cpp:363
+#: src/lincity/modules/cricket.cpp:92
 msgid "Sports field"
 msgstr "Sportplatz"
 
-#: src/lincity/lintypes.cpp:374
+#: src/lincity/lintypes.cpp:375
 msgid "Burnt"
 msgstr "Verbrannt"
 
-#: src/lincity/lintypes.cpp:386
+#: src/lincity/lintypes.cpp:387
 msgid "Shanty town"
 msgstr "Barackensiedlung"
 
-#: src/lincity/lintypes.cpp:398 src/lincity/modules/residence.cpp:283
-#: src/lincity-ng/MpsInterface.cpp:383 src/lincity-ng/EconomyGraph.cpp:134
+#: src/lincity/lintypes.cpp:399
+#: src/lincity/modules/residence.cpp:283
+#: src/lincity-ng/MpsInterface.cpp:383
+#: src/lincity-ng/EconomyGraph.cpp:134
 msgid "Fire"
 msgstr "Feuer"
 
-#: src/lincity/lintypes.cpp:410
+#: src/lincity/lintypes.cpp:411
 msgid "Used"
 msgstr "Bebaut"
 
-#: src/lincity/lintypes.cpp:421
+#: src/lincity/lintypes.cpp:422
 msgid "Residential ML"
 msgstr "Wohngebiet ML"
 
-#: src/lincity/lintypes.cpp:432
+#: src/lincity/lintypes.cpp:433
 msgid "Residential HL"
 msgstr "Wohngebiet HL"
 
-#: src/lincity/lintypes.cpp:443
+#: src/lincity/lintypes.cpp:444
 msgid "Residential LH"
 msgstr "gro?er Friedhof"
 
-#: src/lincity/lintypes.cpp:454
+#: src/lincity/lintypes.cpp:455
 msgid "Residential MH"
 msgstr "Wohngebiet MH"
 
-#: src/lincity/lintypes.cpp:465
+#: src/lincity/lintypes.cpp:466
 msgid "Residential HH"
 msgstr "Wohngebiet HH"
 
-#: src/lincity/lintypes.cpp:476
+#: src/lincity/lintypes.cpp:477
 msgid "Water well"
-msgstr ""
+msgstr "Brunnen"
 
-#: src/lincity/lintypes.cpp:488
+#: src/lincity/lintypes.cpp:489
 msgid "Desert"
-msgstr ""
+msgstr "W?ste"
 
-#: src/lincity/lintypes.cpp:500
+#: src/lincity/lintypes.cpp:501
 msgid "Tree"
-msgstr ""
+msgstr "Baum"
 
-#: src/lincity/lintypes.cpp:513
+#: src/lincity/lintypes.cpp:514
 msgid "Trees"
-msgstr ""
+msgstr "B?ume"
 
-#: src/lincity/lintypes.cpp:526
+#: src/lincity/lintypes.cpp:527
 msgid "Forest"
-msgstr ""
+msgstr "Wald"
 
-#: src/lincity/ldsvguts.cpp:137
-#, c-format
-msgid "Save file <%s> - "
-msgstr "Speichere Datei <%s> - "
-
-#: src/lincity/ldsvguts.cpp:138
-msgid "Can't open save file!"
-msgstr "Kann Speicherdatei nicht ?ffnen."
-
-#: src/lincity/ldsvguts.cpp:148
-msgid "Saving scene"
-msgstr "Speichere Szenario"
-
-#: src/lincity/ldsvguts.cpp:362
-#, c-format
-msgid "Can't open <%s> (gzipped)"
-msgstr "Kann <%s> (komprimiert) nicht ?ffnen."
-
-#: src/lincity/ldsvguts.cpp:395
-msgid "Loading scene"
-msgstr "Lade Szenario"
-
-#: src/lincity/fileutil.cpp:266 src/lincity/fileutil.cpp:310
-msgid "Error. Can't find LINCITY_HOME"
-msgstr "Kann LINCITY_HOME nicht finden."
-
-#: src/lincity/fileutil.cpp:512
-msgid "Error verifying package. Can't find colour.pal."
-msgstr "Fehler bei Paket?berpr?fung. Kann colour.pal nicht finden."
-
-#: src/lincity/fileutil.cpp:525 src/lincity/fileutil.cpp:533
-#, c-format
-msgid "Couldn't create the save directory '%s'\n"
-msgstr "Kann Speicherverzeichniss '%s' nicht anlegen\n"
-
-#: src/lincity/fileutil.cpp:550
-#, c-format
-msgid "Out of memory: malloc failure\n"
-msgstr "Kein Speicher mehr vorhanden: malloc fehlgeschlagen\n"
-
-#: src/lincity/simulate.cpp:97
-msgid ""
-"Upgrading from old game. You have 10 years to build water wells where "
-"needed. After, starvation will occur!  You should check starvation minimap, "
-"and read waterwell help page :-)"
-msgstr ""
-
 #: src/lincity/lclib.cpp:15
 msgid "Jan"
 msgstr "Jan"
@@ -461,110 +470,154 @@
 msgid "Dec"
 msgstr "Dez"
 
-#: src/lincity/power.cpp:102
-msgid "You have too many power grids. Join some of them"
-msgstr "Sie haben zu viele Stromnetze. Verbinden sie welche."
+#: src/lincity/modules/waterwell.cpp:56
+msgid "Water_well"
+msgstr "Brunnen"
 
+#: src/lincity/modules/waterwell.cpp:59
+#: src/lincity/modules/residence.cpp:288
+#: src/lincity-ng/MpsInterface.cpp:391
+msgid "Pollution"
+msgstr "Verschmutzung"
+
+#: src/lincity/modules/waterwell.cpp:62
+#: src/lincity/modules/water.cpp:20
+#: src/lincity/modules/commune.cpp:179
+#: src/lincity/modules/commune.cpp:181
+#: src/lincity/modules/commune.cpp:183
+#: src/lincity/modules/commune.cpp:185
+#: src/lincity-ng/MpsInterface.cpp:382
+#: src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity-ng/MpsInterface.cpp:388
+msgid "Yes"
+msgstr "Ja"
+
+#: src/lincity/modules/waterwell.cpp:63
+msgid "Drinkable"
+msgstr "Trinkbar"
+
 #: src/lincity/modules/health_centre.cpp:58
 msgid "Health Centre"
 msgstr "Krankenhaus"
 
 #: src/lincity/modules/health_centre.cpp:60
-#: src/lincity/modules/rocket_pad.cpp:198 src/lincity/modules/recycle.cpp:148
-#: src/lincity/modules/mill.cpp:92 src/lincity/modules/university.cpp:65
-#: src/lincity/modules/cricket.cpp:93 src/lincity/modules/pottery.cpp:108
-#: src/lincity/modules/blacksmith.cpp:95 src/lincity/modules/school.cpp:48
-#: src/lincity/modules/firestation.cpp:110
+#: src/lincity/modules/rocket_pad.cpp:194
+#: src/lincity/modules/recycle.cpp:149
+#: src/lincity/modules/mill.cpp:94
+#: src/lincity/modules/university.cpp:65
+#: src/lincity/modules/cricket.cpp:94
+#: src/lincity/modules/pottery.cpp:109
+#: src/lincity/modules/blacksmith.cpp:96
+#: src/lincity/modules/firestation.cpp:111
+#: src/lincity/modules/school.cpp:48
 msgid "Inventory"
 msgstr "Lager"
 
 #: src/lincity/modules/health_centre.cpp:61
-#: src/lincity/modules/rocket_pad.cpp:199 src/lincity/modules/market.cpp:984
-#: src/lincity/modules/road.cpp:47 src/lincity/modules/rail.cpp:51
-#: src/lincity/modules/coal_power.cpp:97 src/lincity/modules/university.cpp:66
-#: src/lincity/modules/cricket.cpp:94 src/lincity/modules/track.cpp:38
-#: src/lincity/modules/pottery.cpp:109 src/lincity/modules/school.cpp:49
-#: src/lincity/modules/firestation.cpp:111
+#: src/lincity/modules/rocket_pad.cpp:195
+#: src/lincity/modules/market.cpp:984
+#: src/lincity/modules/road.cpp:47
+#: src/lincity/modules/rail.cpp:51
+#: src/lincity/modules/coal_power.cpp:100
+#: src/lincity/modules/university.cpp:66
+#: src/lincity/modules/cricket.cpp:95
+#: src/lincity/modules/track.cpp:38
+#: src/lincity/modules/pottery.cpp:110
+#: src/lincity/modules/firestation.cpp:112
+#: src/lincity/modules/school.cpp:49
 msgid "Jobs"
 msgstr "Arbeitspl?tze"
 
 #: src/lincity/modules/health_centre.cpp:62
-#: src/lincity/modules/rocket_pad.cpp:200 src/lincity/modules/market.cpp:986
-#: src/lincity/modules/port.cpp:298 src/lincity/modules/road.cpp:49
-#: src/lincity/modules/rail.cpp:53 src/lincity/modules/mill.cpp:93
-#: src/lincity/modules/university.cpp:67 src/lincity/modules/cricket.cpp:95
-#: src/lincity/modules/track.cpp:40 src/lincity/modules/pottery.cpp:110
-#: src/lincity/modules/blacksmith.cpp:96 src/lincity/modules/school.cpp:50
-#: src/lincity/modules/firestation.cpp:112 src/lincity-ng/MpsInterface.cpp:451
+#: src/lincity/modules/rocket_pad.cpp:196
+#: src/lincity/modules/market.cpp:986
+#: src/lincity/modules/port.cpp:298
+#: src/lincity/modules/road.cpp:49
+#: src/lincity/modules/rail.cpp:53
+#: src/lincity/modules/mill.cpp:95
+#: src/lincity/modules/university.cpp:67
+#: src/lincity/modules/cricket.cpp:96
+#: src/lincity/modules/track.cpp:40
+#: src/lincity/modules/pottery.cpp:111
+#: src/lincity/modules/blacksmith.cpp:97
+#: src/lincity/modules/firestation.cpp:113
+#: src/lincity/modules/school.cpp:50
+#: src/lincity-ng/MpsInterface.cpp:451
 msgid "Goods"
 msgstr "Waren"
 
-#: src/lincity/modules/rocket_pad.cpp:192
+#: src/lincity/modules/rocket_pad.cpp:188
 msgid "Rocket Pad"
 msgstr "Raketenbasis"
 
-#: src/lincity/modules/rocket_pad.cpp:195
+#: src/lincity/modules/rocket_pad.cpp:191
 msgid "Completion"
 msgstr "Fertiggestellt"
 
-#: src/lincity/modules/rocket_pad.cpp:201 src/lincity/modules/market.cpp:988
-#: src/lincity/modules/port.cpp:302 src/lincity/modules/road.cpp:51
-#: src/lincity/modules/rail.cpp:55 src/lincity/modules/light_industry.cpp:288
-#: src/lincity/modules/commune.cpp:182 src/lincity/modules/track.cpp:42
+#: src/lincity/modules/rocket_pad.cpp:197
+#: src/lincity/modules/market.cpp:988
+#: src/lincity/modules/port.cpp:302
+#: src/lincity/modules/road.cpp:51
+#: src/lincity/modules/rail.cpp:55
+#: src/lincity/modules/light_industry.cpp:287
+#: src/lincity/modules/commune.cpp:184
+#: src/lincity/modules/track.cpp:42
 msgid "Steel"
 msgstr "Stahl"
 
-#: src/lincity/modules/windmill.cpp:76 src/lincity/modules/recycle.cpp:146
-#: src/lincity/modules/coal_power.cpp:98
-#: src/lincity/modules/organic_farm.cpp:230
-#: src/lincity/modules/solar_power.cpp:60
+#: src/lincity/modules/windmill.cpp:75
+#: src/lincity/modules/recycle.cpp:147
+#: src/lincity/modules/coal_power.cpp:101
+#: src/lincity/modules/organic_farm.cpp:228
+#: src/lincity/modules/solar_power.cpp:57
 msgid "Tech"
 msgstr "Tech"
 
-#: src/lincity/modules/windmill.cpp:80
+#: src/lincity/modules/windmill.cpp:79
 msgid "Local Status"
 msgstr "lokaler Status"
 
-#: src/lincity/modules/windmill.cpp:83
+#: src/lincity/modules/windmill.cpp:82
 msgid "Prod."
 msgstr "Produktion"
 
-#: src/lincity/modules/windmill.cpp:86 src/lincity/modules/windmill.cpp:99
+#: src/lincity/modules/windmill.cpp:85
+#: src/lincity/modules/windmill.cpp:98
 #: src/lincity/modules/substation.cpp:110
 msgid "Demand"
 msgstr "Bedarf"
 
-#: src/lincity/modules/windmill.cpp:90 src/lincity/modules/substation.cpp:101
+#: src/lincity/modules/windmill.cpp:89
+#: src/lincity/modules/substation.cpp:101
 msgid "Grid Status"
 msgstr "Netz Status"
 
-#: src/lincity/modules/windmill.cpp:93 src/lincity/modules/substation.cpp:104
+#: src/lincity/modules/windmill.cpp:92
+#: src/lincity/modules/substation.cpp:104
 msgid "T. Cap."
 msgstr "ges. Kap."
 
-#: src/lincity/modules/windmill.cpp:96 src/lincity/modules/substation.cpp:107
+#: src/lincity/modules/windmill.cpp:95
+#: src/lincity/modules/substation.cpp:107
 msgid "A. Cap."
 msgstr "Verf. Kap."
 
-#: src/lincity/modules/windmill.cpp:102 src/lincity/modules/coal_power.cpp:99
+#: src/lincity/modules/windmill.cpp:101
+#: src/lincity/modules/coal_power.cpp:102
 #: src/lincity/modules/substation.cpp:113
 #: src/lincity/modules/power_line.cpp:49
-#: src/lincity/modules/solar_power.cpp:61
+#: src/lincity/modules/solar_power.cpp:58
 msgid "Grid ID"
 msgstr "Netz ID"
 
-#: src/lincity/modules/water.cpp:20 src/lincity/modules/waterwell.cpp:50
-#: src/lincity/modules/commune.cpp:177 src/lincity/modules/commune.cpp:179
-#: src/lincity/modules/commune.cpp:181 src/lincity/modules/commune.cpp:183
-#: src/lincity-ng/MpsInterface.cpp:382 src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity/modules/water.cpp:20
+#: src/lincity/modules/commune.cpp:179
+#: src/lincity/modules/commune.cpp:181
+#: src/lincity/modules/commune.cpp:183
+#: src/lincity/modules/commune.cpp:185
+#: src/lincity-ng/MpsInterface.cpp:382
+#: src/lincity-ng/MpsInterface.cpp:385
 #: src/lincity-ng/MpsInterface.cpp:388
-msgid "Yes"
-msgstr "Ja"
-
-#: src/lincity/modules/water.cpp:20 src/lincity/modules/commune.cpp:177
-#: src/lincity/modules/commune.cpp:179 src/lincity/modules/commune.cpp:181
-#: src/lincity/modules/commune.cpp:183 src/lincity-ng/MpsInterface.cpp:382
-#: src/lincity-ng/MpsInterface.cpp:385 src/lincity-ng/MpsInterface.cpp:388
 msgid "No"
 msgstr "Nein"
 
@@ -572,60 +625,78 @@
 msgid "Navigable"
 msgstr "schiffbar"
 
-#: src/lincity/modules/recycle.cpp:137
+#: src/lincity/modules/recycle.cpp:138
 msgid "Recycling"
 msgstr "Wiederaufbereitung"
 
-#: src/lincity/modules/recycle.cpp:138
+#: src/lincity/modules/recycle.cpp:139
 msgid "Center"
 msgstr "Zentrum"
 
-#: src/lincity/modules/recycle.cpp:141
-#: src/lincity/modules/heavy_industry.cpp:288 src/lincity/modules/mill.cpp:90
-#: src/lincity/modules/light_industry.cpp:289
-#: src/lincity/modules/university.cpp:68 src/lincity/modules/pottery.cpp:106
-#: src/lincity/modules/blacksmith.cpp:93 src/lincity/modules/school.cpp:52
+#: src/lincity/modules/recycle.cpp:142
+#: src/lincity/modules/heavy_industry.cpp:290
+#: src/lincity/modules/mill.cpp:92
+#: src/lincity/modules/light_industry.cpp:288
+#: src/lincity/modules/university.cpp:68
+#: src/lincity/modules/pottery.cpp:107
+#: src/lincity/modules/blacksmith.cpp:94
+#: src/lincity/modules/school.cpp:52
 msgid "Capacity"
 msgstr "Kapazit?t"
 
-#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
-#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
-#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
-#: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/light_industry.cpp:281
-#: src/lincity/modules/organic_farm.cpp:223
+#: src/lincity/modules/recycle.cpp:144
+#: src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267
+#: src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273
+#: src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/residence.cpp:282
+#: src/lincity/modules/residence.cpp:285
+#: src/lincity/modules/light_industry.cpp:280
+#: src/lincity/modules/organic_farm.cpp:221
 msgid "YES"
 msgstr "Ja"
 
-#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
-#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
-#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
-#: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/heavy_industry.cpp:279
-#: src/lincity/modules/light_industry.cpp:281
+#: src/lincity/modules/recycle.cpp:144
+#: src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267
+#: src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273
+#: src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/residence.cpp:282
+#: src/lincity/modules/residence.cpp:285
+#: src/lincity/modules/heavy_industry.cpp:281
+#: src/lincity/modules/light_industry.cpp:280
 msgid "NO"
 msgstr "Nein"
 
-#: src/lincity/modules/recycle.cpp:144 src/lincity/modules/residence.cpp:271
-#: src/lincity/modules/heavy_industry.cpp:282
-#: src/lincity/modules/light_industry.cpp:282
-#: src/lincity/modules/organic_farm.cpp:227
+#: src/lincity/modules/recycle.cpp:145
+#: src/lincity/modules/residence.cpp:271
+#: src/lincity/modules/heavy_industry.cpp:284
+#: src/lincity/modules/light_industry.cpp:281
+#: src/lincity/modules/organic_farm.cpp:225
 msgid "Power"
 msgstr "Strom"
 
-#: src/lincity/modules/recycle.cpp:149
-#: src/lincity/modules/heavy_industry.cpp:286
-#: src/lincity/modules/market.cpp:987 src/lincity/modules/port.cpp:294
-#: src/lincity/modules/road.cpp:50 src/lincity/modules/rail.cpp:54
-#: src/lincity/modules/light_industry.cpp:287
-#: src/lincity/modules/commune.cpp:180 src/lincity/modules/track.cpp:41
-#: src/lincity/modules/pottery.cpp:111
+#: src/lincity/modules/recycle.cpp:150
+#: src/lincity/modules/heavy_industry.cpp:288
+#: src/lincity/modules/market.cpp:987
+#: src/lincity/modules/port.cpp:294
+#: src/lincity/modules/road.cpp:50
+#: src/lincity/modules/rail.cpp:54
+#: src/lincity/modules/light_industry.cpp:286
+#: src/lincity/modules/commune.cpp:182
+#: src/lincity/modules/track.cpp:41
+#: src/lincity/modules/pottery.cpp:112
 msgid "Ore"
 msgstr "Erz"
 
-#: src/lincity/modules/recycle.cpp:150 src/lincity/modules/market.cpp:989
-#: src/lincity/modules/road.cpp:52 src/lincity/modules/rail.cpp:56
-#: src/lincity/modules/commune.cpp:184 src/lincity/modules/track.cpp:43
+#: src/lincity/modules/recycle.cpp:151
+#: src/lincity/modules/market.cpp:989
+#: src/lincity/modules/road.cpp:52
+#: src/lincity/modules/rail.cpp:56
+#: src/lincity/modules/commune.cpp:186
+#: src/lincity/modules/track.cpp:43
 msgid "Waste"
 msgstr "M?ll"
 
@@ -633,11 +704,13 @@
 msgid "Coal Mine"
 msgstr "Kohlegrube"
 
-#: src/lincity/modules/coalmine.cpp:135 src/lincity/modules/oremine.cpp:144
+#: src/lincity/modules/coalmine.cpp:135
+#: src/lincity/modules/oremine.cpp:144
 msgid "Stock"
 msgstr "Lager"
 
-#: src/lincity/modules/coalmine.cpp:138 src/lincity/modules/coalmine.cpp:140
+#: src/lincity/modules/coalmine.cpp:138
+#: src/lincity/modules/coalmine.cpp:140
 #: src/lincity/modules/oremine.cpp:147
 msgid "Reserve"
 msgstr "Reserve"
@@ -662,7 +735,8 @@
 msgid "Employed"
 msgstr "Arbeit"
 
-#: src/lincity/modules/residence.cpp:276 src/lincity-ng/MpsInterface.cpp:396
+#: src/lincity/modules/residence.cpp:276
+#: src/lincity-ng/MpsInterface.cpp:396
 msgid "good"
 msgstr "gut"
 
@@ -678,16 +752,12 @@
 msgid "Health Cvr"
 msgstr "?rztl. Vers."
 
-#: src/lincity/modules/residence.cpp:286 src/lincity-ng/MpsInterface.cpp:389
+#: src/lincity/modules/residence.cpp:286
+#: src/lincity-ng/MpsInterface.cpp:389
 #: src/lincity-ng/MpsInterface.cpp:517
 msgid "Sport"
 msgstr "Sport"
 
-#: src/lincity/modules/residence.cpp:288 src/lincity/modules/waterwell.cpp:47
-#: src/lincity-ng/MpsInterface.cpp:391
-msgid "Pollution"
-msgstr "Verschmutzung"
-
 #: src/lincity/modules/monument.cpp:57
 msgid "Wisdom Bestowed"
 msgstr "Gesammelte Weisheit"
@@ -697,55 +767,57 @@
 msgid "% Complete"
 msgstr "% fertig"
 
-#: src/lincity/modules/waterwell.cpp:44
-msgid "Water_well"
-msgstr ""
-
-#: src/lincity/modules/waterwell.cpp:51
-msgid "Drinkable"
-msgstr ""
-
-#: src/lincity/modules/heavy_industry.cpp:268
+#: src/lincity/modules/heavy_industry.cpp:270
 msgid "Heavy"
 msgstr "Schwer"
 
-#: src/lincity/modules/heavy_industry.cpp:269
-#: src/lincity/modules/light_industry.cpp:277
+#: src/lincity/modules/heavy_industry.cpp:271
+#: src/lincity/modules/light_industry.cpp:276
 msgid "Industry"
 msgstr "Industrie"
 
-#: src/lincity/modules/heavy_industry.cpp:274
-#: src/lincity/modules/heavy_industry.cpp:287
-#: src/lincity/modules/market.cpp:985 src/lincity/modules/port.cpp:290
-#: src/lincity/modules/road.cpp:48 src/lincity/modules/rail.cpp:52
-#: src/lincity/modules/coal_power.cpp:82 src/lincity/modules/coal_power.cpp:96
-#: src/lincity/modules/mill.cpp:95 src/lincity/modules/commune.cpp:178
-#: src/lincity/modules/track.cpp:39 src/lincity/modules/pottery.cpp:112
-#: src/lincity/modules/blacksmith.cpp:97 src/lincity-ng/MpsInterface.cpp:447
+#: src/lincity/modules/heavy_industry.cpp:276
+#: src/lincity/modules/heavy_industry.cpp:289
+#: src/lincity/modules/market.cpp:985
+#: src/lincity/modules/port.cpp:290
+#: src/lincity/modules/road.cpp:48
+#: src/lincity/modules/rail.cpp:52
+#: src/lincity/modules/coal_power.cpp:85
+#: src/lincity/modules/coal_power.cpp:99
+#: src/lincity/modules/mill.cpp:97
+#: src/lincity/modules/commune.cpp:180
+#: src/lincity/modules/track.cpp:39
+#: src/lincity/modules/pottery.cpp:113
+#: src/lincity/modules/blacksmith.cpp:98
+#: src/lincity-ng/MpsInterface.cpp:447
 msgid "Coal"
 msgstr "Kohle"
 
-#: src/lincity/modules/heavy_industry.cpp:276
+#: src/lincity/modules/heavy_industry.cpp:278
 msgid "Grid"
 msgstr "Netz"
 
-#: src/lincity/modules/heavy_industry.cpp:284
-#: src/lincity/modules/light_industry.cpp:284
+#: src/lincity/modules/heavy_industry.cpp:286
+#: src/lincity/modules/light_industry.cpp:283
 msgid "Output"
 msgstr "Produktion"
 
-#: src/lincity/modules/heavy_industry.cpp:285
-#: src/lincity/modules/light_industry.cpp:286
+#: src/lincity/modules/heavy_industry.cpp:287
+#: src/lincity/modules/light_industry.cpp:285
 msgid "Store"
 msgstr "Lager"
 
-#: src/lincity/modules/market.cpp:983 src/lincity/modules/port.cpp:286
-#: src/lincity/modules/road.cpp:46 src/lincity/modules/rail.cpp:50
-#: src/lincity/modules/mill.cpp:94 src/lincity/modules/track.cpp:37
+#: src/lincity/modules/market.cpp:983
+#: src/lincity/modules/port.cpp:286
+#: src/lincity/modules/road.cpp:46
+#: src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/mill.cpp:96
+#: src/lincity/modules/track.cpp:37
 msgid "Food"
 msgstr "Nahrung"
 
-#: src/lincity/modules/port.cpp:306 src/lincity-ng/MpsInterface.cpp:535
+#: src/lincity/modules/port.cpp:306
+#: src/lincity-ng/MpsInterface.cpp:535
 msgid "Total"
 msgstr "Gesammt"
 
@@ -753,18 +825,18 @@
 msgid "Rail"
 msgstr "Eisenbahn"
 
-#: src/lincity/modules/coal_power.cpp:83
-#: src/lincity/modules/solar_power.cpp:47
+#: src/lincity/modules/coal_power.cpp:86
+#: src/lincity/modules/solar_power.cpp:44
 msgid "Power Station"
 msgstr "Kraftwerk"
 
-#: src/lincity/modules/coal_power.cpp:87
-#: src/lincity/modules/solar_power.cpp:51
+#: src/lincity/modules/coal_power.cpp:90
+#: src/lincity/modules/solar_power.cpp:48
 msgid "Max Output"
 msgstr "Maximalleistung"
 
-#: src/lincity/modules/coal_power.cpp:92
-#: src/lincity/modules/solar_power.cpp:56
+#: src/lincity/modules/coal_power.cpp:95
+#: src/lincity/modules/solar_power.cpp:53
 msgid "Current Output"
 msgstr "aktuelle Leistung"
 
@@ -772,7 +844,7 @@
 msgid "Local Demand"
 msgstr "lokaler Bedarf"
 
-#: src/lincity/modules/mill.cpp:88
+#: src/lincity/modules/mill.cpp:90
 msgid "Textile Mill"
 msgstr "Spinnerei"
 
@@ -784,7 +856,7 @@
 msgid "Power Line"
 msgstr "Stromleitung"
 
-#: src/lincity/modules/light_industry.cpp:276
+#: src/lincity/modules/light_industry.cpp:275
 msgid "Light"
 msgstr "Leicht"
 
@@ -813,249 +885,248 @@
 msgid "% Filled"
 msgstr "% voll"
 
-#: src/lincity/modules/commune.cpp:175
+#: src/lincity/modules/commune.cpp:177
 msgid "Activity"
 msgstr "Aktivit?t"
 
-#: src/lincity/modules/school.cpp:45
-msgid "Lessons Learned"
-msgstr "Unterrichtsstunden"
-
-#: src/lincity/modules/firestation.cpp:108
+#: src/lincity/modules/firestation.cpp:109
 msgid "Fire Station"
 msgstr "Feuerwehr"
 
-#: src/lincity/modules/organic_farm.cpp:219
+#: src/lincity/modules/organic_farm.cpp:217
 msgid "Organic Farm"
 msgstr "Bauernhof"
 
-#: src/lincity/modules/organic_farm.cpp:225
+#: src/lincity/modules/organic_farm.cpp:223
 msgid "NO "
 msgstr "Nein"
 
-#: src/lincity/modules/organic_farm.cpp:233
+#: src/lincity/modules/organic_farm.cpp:231
 msgid "Prod"
 msgstr "Produktion"
 
-#: src/lincity/modules/organic_farm.cpp:239
+#: src/lincity/modules/organic_farm.cpp:237
 msgid "Debug info"
 msgstr ""
 
-#: src/lincity/modules/organic_farm.cpp:240
+#: src/lincity/modules/organic_farm.cpp:238
 msgid "max with power&water"
-msgstr ""
+msgstr "Max mit Energie+Wasser"
 
-#: src/lincity/modules/organic_farm.cpp:241
+#: src/lincity/modules/organic_farm.cpp:239
 msgid "N tiles with water"
-msgstr ""
+msgstr "N Felder mit Wasser"
 
-#: src/lincity/modules/organic_farm.cpp:242
+#: src/lincity/modules/organic_farm.cpp:240
 #, fuzzy
 msgid "Current production"
 msgstr "aktuelle Leistung"
 
-#: src/lincity/modules/solar_power.cpp:46
+#: src/lincity/modules/school.cpp:45
+msgid "Lessons Learned"
+msgstr "Unterrichtsstunden"
+
+#: src/lincity/modules/solar_power.cpp:43
 msgid "Solar"
 msgstr "Solar"
 
-#: src/lincity-ng/Dialog.cpp:173
+#: src/lincity-ng/Dialog.cpp:174
 msgid "Launchsite"
 msgstr "Raketenbasis"
 
-#: src/lincity-ng/Dialog.cpp:352 src/lincity-ng/Dialog.cpp:353
+#: src/lincity-ng/Dialog.cpp:353
+#: src/lincity-ng/Dialog.cpp:354
 msgid "----- IN TEST MODE -------"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:355
+#: src/lincity-ng/Dialog.cpp:356
 #, c-format
 msgid "Game statistics from LinCity-NG Version %s"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:359
+#: src/lincity-ng/Dialog.cpp:360
 #, c-format
 msgid "Initial loaded scene - %s"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:364
+#: src/lincity-ng/Dialog.cpp:365
 #, c-format
 msgid "Economy is sustainable"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:368
+#: src/lincity-ng/Dialog.cpp:369
 #, c-format
 msgid "Population  %d  of which  %d  are not housed."
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:373
+#: src/lincity-ng/Dialog.cpp:374
 #, c-format
 msgid "Max population %d  Number evacuated %d Total births %d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:378
+#: src/lincity-ng/Dialog.cpp:379
 #, c-format
 msgid "Date %s %04d  Money %8d   Tech-level %5.1f (%5.1f)"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:385
+#: src/lincity-ng/Dialog.cpp:386
 #, c-format
 msgid ".Deaths by starvation %7d   History %8.3f"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:390
+#: src/lincity-ng/Dialog.cpp:391
 #, c-format
 msgid "Deaths from pollution %7d   History %8.3f"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:394
+#: src/lincity-ng/Dialog.cpp:395
 #, c-format
 msgid "Years of unemployment %7d   History %8.3f"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:398
+#: src/lincity-ng/Dialog.cpp:399
 #, c-format
 msgid "Rockets launched %2d  Successful launches %2d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:409
+#: src/lincity-ng/Dialog.cpp:410
 #, c-format
 msgid ".   Residences %4d         Markets %4d            Farms %4d"
-msgstr ""
+msgstr "N Felder mit Wasser"
 
-#: src/lincity-ng/Dialog.cpp:420
+#: src/lincity-ng/Dialog.cpp:421
 #, c-format
 msgid ".    Monuments %4d         Schools %4d     Universities %4d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:425
+#: src/lincity-ng/Dialog.cpp:426
 #, c-format
 msgid ".Fire stations %4d           Parks %4d    Sports fields %4d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:430
+#: src/lincity-ng/Dialog.cpp:431
 #, c-format
 msgid "Health centres %4d            Tips %4d         Shanties %4d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:438
+#: src/lincity-ng/Dialog.cpp:439
 #, c-format
 msgid ".    Windmills %4d     Coal powers %4d     Solar powers %4d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:444
+#: src/lincity-ng/Dialog.cpp:445
 #, c-format
 msgid ".  Substations %4d     Power lines %4d            Ports %4d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:449
+#: src/lincity-ng/Dialog.cpp:450
 #, c-format
 msgid ".       Tracks %4d           Roads %4d             Rail %4d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:457
+#: src/lincity-ng/Dialog.cpp:458
 #, c-format
 msgid ".    Potteries %4d     Blacksmiths %4d            Mills %4d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:462
+#: src/lincity-ng/Dialog.cpp:463
 #, c-format
 msgid ".   Light inds %4d      Heavy inds %4d        Recyclers %4d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:467
+#: src/lincity-ng/Dialog.cpp:468
 #, c-format
 msgid ".   Coal mines %4d       Ore mines %4d         Communes %4d"
 msgstr ""
 
-#: src/lincity-ng/ScreenInterface.cpp:264
-msgid "MM"
-msgstr "Mio"
-
-#: src/lincity-ng/ScreenInterface.cpp:275 src/lincity-ng/GameView.cpp:1609
-#: src/lincity-ng/GameView.cpp:1640
-msgid "$"
-msgstr "?"
-
-#: src/lincity-ng/GameView.cpp:237
+#: src/lincity-ng/GameView.cpp:239
 msgid "Minimap: outline map"
 msgstr "Minikarte: ?bersichtskarte"
 
-#: src/lincity-ng/GameView.cpp:240
+#: src/lincity-ng/GameView.cpp:242
 msgid "Minimap: unemployment"
 msgstr "Minikarte: Arbeitslosigkeit"
 
-#: src/lincity-ng/GameView.cpp:243
+#: src/lincity-ng/GameView.cpp:245
 msgid "Minimap: pollution"
 msgstr "Minikarte: Umweltverschmutzung"
 
-#: src/lincity-ng/GameView.cpp:246
+#: src/lincity-ng/GameView.cpp:248
 msgid "Minimap: nourishments"
 msgstr "Minikarte: Nahrungsmittel"
 
-#: src/lincity-ng/GameView.cpp:249
+#: src/lincity-ng/GameView.cpp:251
 msgid "Minimap: power supply"
 msgstr "Minikarte: Stromversorgung"
 
-#: src/lincity-ng/GameView.cpp:252
+#: src/lincity-ng/GameView.cpp:254
 msgid "Minimap: firedepartment cover"
 msgstr "Minikarte: Feuerwehrabdeckung"
 
-#: src/lincity-ng/GameView.cpp:255
+#: src/lincity-ng/GameView.cpp:257
 msgid "Minimap: sport cover"
 msgstr "Minikarte: Sportabdeckung"
 
-#: src/lincity-ng/GameView.cpp:258
+#: src/lincity-ng/GameView.cpp:260
 msgid "Minimap: medical care"
 msgstr "Minikarte: medizinische Versorgung"
 
-#: src/lincity-ng/GameView.cpp:261
+#: src/lincity-ng/GameView.cpp:263
 msgid "Minimap: coal depots"
 msgstr "Minikarte: Kohlefl?ze"
 
-#: src/lincity-ng/GameView.cpp:264
+#: src/lincity-ng/GameView.cpp:266
 msgid "Minimap: traffic density"
 msgstr "Minikarte: Verkehrsdichte"
 
-#: src/lincity-ng/GameView.cpp:1604
+#: src/lincity-ng/GameView.cpp:1587
 msgid "Estimated Bulldoze Cost: "
 msgstr "Gesch?tze Abbruchkosten:"
 
-#: src/lincity-ng/GameView.cpp:1606
+#: src/lincity-ng/GameView.cpp:1589
 msgid "Bulldoze Cost: "
 msgstr "Abrisskosten:"
 
-#: src/lincity-ng/GameView.cpp:1611
+#: src/lincity-ng/GameView.cpp:1592
+#: src/lincity-ng/GameView.cpp:1623
+#: src/lincity-ng/ScreenInterface.cpp:275
+msgid "$"
+msgstr "?"
+
+#: src/lincity-ng/GameView.cpp:1594
 msgid "n/a"
 msgstr "keine"
 
-#: src/lincity-ng/GameView.cpp:1629
+#: src/lincity-ng/GameView.cpp:1612
 msgid "Query Tool: Show information about selected building."
 msgstr "Abfragewerkzeug: Zeigt Informationen ?ber gew?hltes Geb?ude."
 
-#: src/lincity-ng/GameView.cpp:1633
+#: src/lincity-ng/GameView.cpp:1616
 msgid "Bulldozer: remove building -price varies-"
 msgstr "Planierraupe: Geb?ude abrei?en. Kosten variieren."
 
-#: src/lincity-ng/GameView.cpp:1640
+#: src/lincity-ng/GameView.cpp:1623
 msgid ": Cost to build "
 msgstr ": Baukosten "
 
-#: src/lincity-ng/GameView.cpp:1641
+#: src/lincity-ng/GameView.cpp:1624
 msgid ", to bulldoze "
 msgstr ", Abbruchkosten "
 
-#: src/lincity-ng/GameView.cpp:1641 src/lincity-ng/GameView.cpp:1644
+#: src/lincity-ng/GameView.cpp:1624
+#: src/lincity-ng/GameView.cpp:1627
 msgid "$."
 msgstr "?."
 
-#: src/lincity-ng/GameView.cpp:1643
+#: src/lincity-ng/GameView.cpp:1626
 msgid " To build "
 msgstr " Bauen von "
 
-#: src/lincity-ng/GameView.cpp:1643
+#: src/lincity-ng/GameView.cpp:1626
 msgid " of them "
 msgstr " davon "
 
-#: src/lincity-ng/GameView.cpp:1644
+#: src/lincity-ng/GameView.cpp:1627
 msgid "will cost about "
 msgstr "wird ungef?hr kosten "
 
@@ -1219,7 +1290,8 @@
 msgid "Claims"
 msgstr "Anspr?che"
 
-#: src/lincity-ng/MpsInterface.cpp:542 src/lincity-ng/MpsInterface.cpp:547
+#: src/lincity-ng/MpsInterface.cpp:542
+#: src/lincity-ng/MpsInterface.cpp:547
 msgid "Rate"
 msgstr "Rate"
 
@@ -1231,6 +1303,42 @@
 msgid "Cases"
 msgstr "F?lle"
 
+#: src/lincity-ng/EconomyGraph.cpp:124
+msgid "Mining"
+msgstr "Bergbau"
+
+#: src/lincity-ng/EconomyGraph.cpp:126
+msgid "Trade"
+msgstr "Handel"
+
+#: src/lincity-ng/EconomyGraph.cpp:128
+msgid "Money"
+msgstr "Geld"
+
+#: src/lincity-ng/EconomyGraph.cpp:130
+msgid "Popul."
+msgstr "Leute"
+
+#: src/lincity-ng/EconomyGraph.cpp:132
+msgid "Techn."
+msgstr "Tech"
+
+#: src/lincity-ng/EconomyGraph.cpp:137
+msgid "Economy Overview:"
+msgstr "Wirtschafts?bersicht"
+
+#: src/lincity-ng/EconomyGraph.cpp:140
+msgid "Sustainability:"
+msgstr "Nachhaltigkeit:"
+
+#: src/lincity-ng/EconomyGraph.cpp:143
+msgid "Frames per Second:"
+msgstr "Bilder pro Sekunde:"
+
+#: src/lincity-ng/EconomyGraph.cpp:219
+msgid "You lose."
+msgstr "Sie haben verloren."
+
 #: src/lincity-ng/ButtonPanel.cpp:200
 msgid "Query Tool"
 msgstr "Abfragewerkzeug"
@@ -1267,7 +1375,8 @@
 msgid " [Click right for help.]"
 msgstr "[Rechtsklick f?r Hife.]"
 
-#: src/lincity-ng/ButtonPanel.cpp:245 src/lincity-ng/ButtonPanel.cpp:288
+#: src/lincity-ng/ButtonPanel.cpp:245
+#: src/lincity-ng/ButtonPanel.cpp:288
 #, c-format
 msgid "%s (Techlevel %.1f required.)"
 msgstr "%s (Techlevel %.1f erforderlich.)"
@@ -1277,38 +1386,10 @@
 msgid "%s is disabled (loaded old game)."
 msgstr ""
 
-#: src/lincity-ng/EconomyGraph.cpp:124
-msgid "Mining"
-msgstr "Bergbau"
+#: src/lincity-ng/ScreenInterface.cpp:264
+msgid "MM"
+msgstr "Mio"
 
-#: src/lincity-ng/EconomyGraph.cpp:126
-msgid "Trade"
-msgstr "Handel"
+#~ msgid "Saving scene"
+#~ msgstr "Speichere Szenario"
 
-#: src/lincity-ng/EconomyGraph.cpp:128
-msgid "Money"
-msgstr "Geld"
-
-#: src/lincity-ng/EconomyGraph.cpp:130
-msgid "Popul."
-msgstr "Leute"
-
-#: src/lincity-ng/EconomyGraph.cpp:132
-msgid "Techn."
-msgstr "Tech"
-
-#: src/lincity-ng/EconomyGraph.cpp:137
-msgid "Economy Overview:"
-msgstr "Wirtschafts?bersicht"
-
-#: src/lincity-ng/EconomyGraph.cpp:140
-msgid "Sustainability:"
-msgstr "Nachhaltigkeit:"
-
-#: src/lincity-ng/EconomyGraph.cpp:143
-msgid "Frames per Second:"
-msgstr "Bilder pro Sekunde:"
-
-#: src/lincity-ng/EconomyGraph.cpp:219
-msgid "You lose."
-msgstr "Sie haben verloren."

Modified: trunk/data/locale/gui/de.po
===================================================================
--- trunk/data/locale/gui/de.po	2007-12-18 21:30:56 UTC (rev 1325)
+++ trunk/data/locale/gui/de.po	2007-12-19 13:19:42 UTC (rev 1326)
@@ -8,12 +8,12 @@
 msgstr ""
 "Project-Id-Version: LinCity NG\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: Tue Dec  4 01:12:57 2007\n"
-"PO-Revision-Date: 2007-08-13 19:49+0100\n"
+"POT-Creation-Date: Wed Dec 19 14:05:08 2007\n"
+"PO-Revision-Date: 2007-12-19 14:17+0100\n"
 "Last-Translator: Wolfgang Becker <uafr at gmx.de>\n"
 "Language-Team: German\n"
 "MIME-Version: 1.0\n"
-"Content-Type: text/plain; charset=utf-8\n"
+"Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
 "Plural-Forms: nplurals=2; plural=(n != 1);\n"
 
@@ -26,23 +26,15 @@
 msgstr "Ein Feuer ist ausgebrochen."
 
 #: data/gui/shfire-uc.xml
-msgid ""
-"A fire has broken out at a shanty town. It is in a fire cover area and "
-"APPEARS to be under control. "
-msgstr ""
-"In einer Barackensiedlung ist ein Feuer ausgebrochen. Es befindet sich im "
-"von der Feuerwehr abgedeckten Gebiet und SCHEINT unter Kontrolle zu sein."
+msgid "A fire has broken out at a shanty town. It is in a fire cover area and APPEARS to be under control. "
+msgstr "In einer Barackensiedlung ist ein Feuer ausgebrochen. Es befindet sich im von der Feuerwehr abgedeckten Gebiet und SCHEINT unter Kontrolle zu sein."
 
 #: data/gui/shfire-oc.xml
-msgid ""
-"A fire has broken out at a shanty town. The fire is OUT OF CONTROL and may "
-"spread to other areas. "
-msgstr ""
-"In einer Barackensiedlung ist ein Feuer ausgebrochen. Das Feuer ist AUSSER "
-"KONTROLLE und k?nnte sich in weitere Gebiete ausbreiten."
+msgid "A fire has broken out at a shanty town. The fire is OUT OF CONTROL and may spread to other areas. "
+msgstr "In einer Barackensiedlung ist ein Feuer ausgebrochen. Das Feuer ist AUSSER KONTROLLE und k?nnte sich in weitere Gebiete ausbreiten."
 
-#: data/gui/credits.xml data/gui/savegame.xml data/gui/newgame.xml
-#: data/gui/loadgame.xml
+#: data/gui/newgame.xml data/gui/loadgame.xml data/gui/credits.xml
+#: data/gui/savegame.xml
 msgid "Back"
 msgstr "Zur?ck"
 
@@ -68,10 +60,9 @@
 
 #: data/gui/bulldoze_shanty_yn.xml
 msgid "Bulldozing a shanty town costs a lot of money and may cause a fire."
-msgstr ""
-"Barackensiedlungen abreisen ist sehr teuer und kann Br?nde verursachen."
+msgstr "Barackensiedlungen abreisen ist sehr teuer und kann Br?nde verursachen."
 
-#: data/gui/portdialog.xml data/gui/tradedialog.xml
+#: data/gui/tradedialog.xml data/gui/portdialog.xml
 msgid "Buy"
 msgstr "Kaufen"
 
@@ -79,7 +70,7 @@
 msgid "Choose Scenario"
 msgstr "Szenario Ausw?hlen"
 
-#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
+#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
 msgid "Coal"
 msgstr "Kohle"
 
@@ -139,7 +130,7 @@
 msgid "Fire!"
 msgstr "Feuer!"
 
-#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
+#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
 msgid "Food"
 msgstr "Nahrung"
 
@@ -155,7 +146,7 @@
 msgid "Go back to Main Menu"
 msgstr "zur?ck zum Hauptmen?"
 
-#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
+#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
 msgid "Goods"
 msgstr "Waren"
 
@@ -179,7 +170,7 @@
 msgid "Import/Export available"
 msgstr "Handelsh?fen verf?gbar"
 
-#: data/gui/tradedialog.xml data/gui/pbar.xml
+#: data/gui/pbar.xml data/gui/tradedialog.xml
 msgid "Jobs"
 msgstr "Arbeitspl?tze"
 
@@ -227,29 +218,29 @@
 msgid "Money"
 msgstr "Verm?gen"
 
-#: data/gui/mainmenu.xml data/gui/newgame.xml
+#: data/gui/newgame.xml data/gui/mainmenu.xml
 msgid "New Game"
 msgstr "Neues Spiel"
 
-#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
-#: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalmineup.xml
-#: data/gui/coalpowerup.xml data/gui/solarpowerup.xml data/gui/parkup.xml
+#: data/gui/riverup.xml data/gui/hvindustryup.xml data/gui/windmillup.xml
+#: data/gui/ltindustryup.xml data/gui/cricketup.xml data/gui/coalmineup.xml
+#: data/gui/coalpowerup.xml data/gui/parkup.xml data/gui/solarpowerup.xml
 #: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/roadup.xml
 #: data/gui/rocketup.xml data/gui/millup.xml data/gui/healthup.xml
 #: data/gui/universityup.xml data/gui/recycleup.xml data/gui/blacksmithup.xml
-#: data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/firestationup.xml data/gui/schoolup.xml
 #: data/gui/import-exportup.xml data/gui/mod_wind_up.xml
 msgid "New Invention"
 msgstr "Neue Erfindung"
 
-#: data/gui/launch_rocket_yn.xml data/gui/bulldoze_river_yn.xml
-#: data/gui/bulldoze_monument_yn.xml data/gui/coal_survey_yn.xml
+#: data/gui/bulldoze_monument_yn.xml data/gui/launch_rocket_yn.xml
+#: data/gui/bulldoze_river_yn.xml data/gui/coal_survey_yn.xml
 #: data/gui/bulldoze_shanty_yn.xml
 msgid "No"
 msgstr "Nein"
 
-#: data/gui/no-credit-rocket.xml data/gui/no-credit-parkland.xml
-#: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
+#: data/gui/no-credit-solar-power.xml data/gui/no-credit-rocket.xml
+#: data/gui/no-credit-parkland.xml data/gui/no-credit-university.xml
 #: data/gui/no-credit-recycle.xml
 msgid "No Credit Available"
 msgstr "Kein Darlehn m?glich"
@@ -262,20 +253,22 @@
 msgid "Not Allowed"
 msgstr "Nicht zul?ssig"
 
-#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
-#: data/gui/cricketup.xml data/gui/options.xml data/gui/riverup.xml
-#: data/gui/coalmineup.xml data/gui/coalpowerup.xml data/gui/launch-good.xml
-#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
-#: data/gui/railwayup.xml data/gui/nobull-tip.xml data/gui/sustain.xml
-#: data/gui/roadup.xml data/gui/rocketup.xml data/gui/millup.xml
-#: data/gui/no-credit-rocket.xml data/gui/healthup.xml
+#: data/gui/riverup.xml data/gui/hvindustryup.xml
+#: data/gui/no-credit-solar-power.xml data/gui/windmillup.xml
+#: data/gui/options.xml data/gui/ltindustryup.xml data/gui/cricketup.xml
+#: data/gui/coalmineup.xml data/gui/launch-good.xml data/gui/coalpowerup.xml
+#: data/gui/parkup.xml data/gui/solarpowerup.xml data/gui/potteryup.xml
+#: data/gui/railwayup.xml data/gui/allgone.xml data/gui/nobull-tip.xml
+#: data/gui/sustain.xml data/gui/roadup.xml data/gui/rocketup.xml
+#: data/gui/millup.xml data/gui/no-credit-rocket.xml data/gui/healthup.xml
 #: data/gui/no-credit-parkland.xml data/gui/shfire-uc.xml data/gui/fire.xml
 #: data/gui/universityup.xml data/gui/launch-evac.xml data/gui/recycleup.xml
-#: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
-#: data/gui/no-credit-recycle.xml data/gui/launch-fail.xml
-#: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/no-credit-university.xml data/gui/no-credit-recycle.xml
+#: data/gui/launch-fail.xml data/gui/blacksmithup.xml
+#: data/gui/firestationup.xml data/gui/schoolup.xml
 #: data/gui/import-exportup.xml data/gui/launch-gone.xml
-#: data/gui/mod_wind_up.xml data/gui/shfire-oc.xml data/gui/warning.xml
+#: data/gui/mod_wind_up.xml data/gui/warning.xml data/gui/shfire-oc.xml
+#: data/gui/too-old.xml
 msgid "Ok"
 msgstr "OK"
 
@@ -283,11 +276,11 @@
 msgid "Okay"
 msgstr "Okay"
 
-#: data/gui/options.xml data/gui/mainmenu.xml
+#: data/gui/mainmenu.xml data/gui/options.xml
 msgid "Options"
 msgstr "Einstellungen"
 
-#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
+#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
 msgid "Ore"
 msgstr "Erz"
 
@@ -315,7 +308,7 @@
 msgid "Press this button to show statistics"
 msgstr "Dr?cken sie diesen Knopf um Statistiken anzuzeigen"
 
-#: data/gui/portdialog.xml data/gui/tradedialog.xml
+#: data/gui/tradedialog.xml data/gui/portdialog.xml
 msgid "Product"
 msgstr "Produkt"
 
@@ -376,23 +369,20 @@
 msgstr "Schulen verf?gbar"
 
 #: data/gui/coalmineup.xml
-msgid ""
-"See the help screen for more information on coal mines and coal surveys."
-msgstr ""
-"Sehen Sie in der Hilfe nach, um mehr Informationen ?ber Kohlebergwerke und "
-"Prospektoren zu erhalten."
+msgid "See the help screen for more information on coal mines and coal surveys."
+msgstr "Sehen Sie in der Hilfe nach, um mehr Informationen ?ber Kohlebergwerke und Prospektoren zu erhalten."
 
-#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
-#: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalpowerup.xml
-#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
+#: data/gui/riverup.xml data/gui/hvindustryup.xml data/gui/windmillup.xml
+#: data/gui/ltindustryup.xml data/gui/cricketup.xml data/gui/coalpowerup.xml
+#: data/gui/parkup.xml data/gui/solarpowerup.xml data/gui/potteryup.xml
 #: data/gui/railwayup.xml data/gui/rocketup.xml data/gui/millup.xml
 #: data/gui/healthup.xml data/gui/universityup.xml data/gui/recycleup.xml
-#: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/blacksmithup.xml data/gui/firestationup.xml data/gui/schoolup.xml
 #: data/gui/mod_wind_up.xml
 msgid "See the help screen for more information."
 msgstr "Siehe Hilfe f?r mehr Informationen."
 
-#: data/gui/portdialog.xml data/gui/tradedialog.xml
+#: data/gui/tradedialog.xml data/gui/portdialog.xml
 msgid "Sell"
 msgstr "Verkaufen"
 
@@ -402,9 +392,7 @@
 
 #: data/gui/minimap.xml
 msgid "Show Income and Expenses. Click this tab again to cycle through views."
-msgstr ""
-"Einnahmen und Ausgaben. Hier nochmal klicken um zwischen den verschiedenen "
-"Ansichten zu wechseln."
+msgstr "Einnahmen und Ausgaben. Hier nochmal klicken um zwischen den verschiedenen Ansichten zu wechseln."
 
 #: data/gui/minimapswitchbuttons.xml
 msgid "Show coal depots"
@@ -466,6 +454,10 @@
 msgid "Sorry you can't bulldoze a tip."
 msgstr "Leider k?nnen sie M?llkippen nicht abrei?en."
 
+#: data/gui/too-old.xml
+msgid "Sorry, the game you wanted is too old. Cannot load it. Still play with previous game."
+msgstr "Tut mir leid, der angeforderte Spielstand ist zu alt, den kann ich nicht laden. Das vorherige Spiel l?uft weiter."
+
 #: data/gui/options.xml
 msgid "Sound Effects"
 msgstr "Soundeffekte"
@@ -490,7 +482,7 @@
 msgid "Stats"
 msgstr "Stat."
 
-#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
+#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
 msgid "Steel"
 msgstr "Stahl"
 
@@ -504,9 +496,7 @@
 
 #: data/gui/coal_survey_yn.xml
 msgid "This will cost you 1 million once. After that it is free to call again."
-msgstr ""
-"Hierf?r fallen einmalige Kosten von einer Millionen an. Weitere Aufrufe sind "
-"kostenlos."
+msgstr "Hierf?r fallen einmalige Kosten von einer Millionen an. Weitere Aufrufe sind kostenlos."
 
 #: data/gui/launch-gone.xml
 msgid "Total Evacuation Complete."
@@ -524,13 +514,13 @@
 msgid "University available"
 msgstr "Universit?ten verf?gbar"
 
-#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_monument_yn.xml
+#: data/gui/bulldoze_monument_yn.xml data/gui/bulldoze_river_yn.xml
 #: data/gui/bulldoze_shanty_yn.xml
 msgid "Want to bulldoze?"
 msgstr "M?chten sie planieren?"
 
-#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_monument_yn.xml
-#: data/gui/bulldoze_shanty_yn.xml data/gui/warning.xml
+#: data/gui/bulldoze_monument_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml data/gui/warning.xml data/gui/too-old.xml
 msgid "Warning"
 msgstr "Warnung"
 
@@ -554,8 +544,8 @@
 msgid "Windmills available"
 msgstr "Windm?hlen verf?gbar"
 
-#: data/gui/launch_rocket_yn.xml data/gui/bulldoze_river_yn.xml
-#: data/gui/bulldoze_monument_yn.xml data/gui/coal_survey_yn.xml
+#: data/gui/bulldoze_monument_yn.xml data/gui/launch_rocket_yn.xml
+#: data/gui/bulldoze_river_yn.xml data/gui/coal_survey_yn.xml
 #: data/gui/bulldoze_shanty_yn.xml
 msgid "Yes"
 msgstr "Ja"
@@ -565,237 +555,116 @@
 msgstr "Sie sehen besser danach."
 
 #: data/gui/launch_rocket_yn.xml
-msgid ""
-"You can launch the rocket now or wait until later. If you wait it will "
-"continue costing you money to keep the rocket ready. Launch it later by "
-"clicking on the rocket area."
-msgstr ""
-"Sie k?nnen die Rakete jetzt starten, oder abwarten. Wenn sie warten kostet "
-"es sie weiterhin Geld, die Rakete abflugbereit zu halten. Klicken sie auf "
-"die Rakete um diesen Dialog sp?ter wieder zu ?ffnen."
+msgid "You can launch the rocket now or wait until later. If you wait it will continue costing you money to keep the rocket ready. Launch it later by clicking on the rocket area."
+msgstr "Sie k?nnen die Rakete jetzt starten, oder abwarten. Wenn sie warten kostet es sie weiterhin Geld, die Rakete abflugbereit zu halten. Klicken sie auf die Rakete um diesen Dialog sp?ter wieder zu ?ffnen."
 
 #: data/gui/import-exportup.xml
-msgid ""
-"You can now import and export coal, goods, ore and steel. Read the help "
-"pages on these subjects to find out how to use them. "
-msgstr ""
-"Sie k?nnen jetzt Kohle, Waren, Erz und Stahl Ein- und ausf?hren. Lesen sie "
-"die Hilfe um mehr zu erfahren."
+msgid "You can now import and export coal, goods, ore and steel. Read the help pages on these subjects to find out how to use them. "
+msgstr "Sie k?nnen jetzt Kohle, Waren, Erz und Stahl Ein- und ausf?hren. Lesen sie die Hilfe um mehr zu erfahren."
 
 #: data/gui/no-credit-parkland.xml
-msgid ""
-"You have a budget deficit. The legislative council will not allow you to "
-"build parks on credit."
-msgstr ""
-"Sie haben Schulden. Der Gemeinderat stimmt gegen den Bau von Parks auf "
-"Kredit."
+msgid "You have a budget deficit. The legislative council will not allow you to build parks on credit."
+msgstr "Sie haben Schulden. Der Gemeinderat stimmt gegen den Bau von Parks auf Kredit."
 
 #: data/gui/no-credit-recycle.xml
-msgid ""
-"You have a budget deficit. The legislative council will not allow you to "
-"build recycling centres on credit."
-msgstr ""
-"Sie haben Schulden. Der Gemeinderat stimmt gegen den Bau eines "
-"Recyclinzentrums auf Kredit."
+msgid "You have a budget deficit. The legislative council will not allow you to build recycling centres on credit."
+msgstr "Sie haben Schulden. Der Gemeinderat stimmt gegen den Bau eines Recyclinzentrums auf Kredit."
 
 #: data/gui/no-credit-rocket.xml
-msgid ""
-"You have a budget deficit. The legislative council will not allow you to "
-"build rocket launch pads on credit."
-msgstr ""
-"Sie haben Schulden. Der Gemeinderat stimmt gegen den Bau einer Rakete auf "
-"Kredit."
+msgid "You have a budget deficit. The legislative council will not allow you to build rocket launch pads on credit."
+msgstr "Sie haben Schulden. Der Gemeinderat stimmt gegen den Bau einer Rakete auf Kredit."
 
 #: data/gui/no-credit-solar-power.xml
-msgid ""
-"You have a budget deficit. The legislative council will not allow you to "
-"build solar power stations on credit."
-msgstr ""
-"Sie haben Schulden. Der Gemeinderat stimmt gegen den Bau von eines "
-"Solarkraftwerks auf Kredit."
+msgid "You have a budget deficit. The legislative council will not allow you to build solar power stations on credit."
+msgstr "Sie haben Schulden. Der Gemeinderat stimmt gegen den Bau von eines Solarkraftwerks auf Kredit."
 
 #: data/gui/no-credit-university.xml
-msgid ""
-"You have a budget deficit. The legislative council will not allow you to "
-"build universities on credit."
-msgstr ""
-"Sie haben Schulden. Der Gemeinderat stimmt gegen den Bau einer Universit?t "
-"auf Kredit."
+msgid "You have a budget deficit. The legislative council will not allow you to build universities on credit."
+msgstr "Sie haben Schulden. Der Gemeinderat stimmt gegen den Bau einer Universit?t auf Kredit."
 
 #: data/gui/launch-evac.xml
-msgid ""
-"You have evacuated 1000 people. You might want to reduce the size of your "
-"economy to reflect the reduced population. "
-msgstr ""
-"Sie haben 1000 Leute evakuiert. Sie sollten die gr??e ihrer Wirtschaft an "
-"die reduzierte Bev?lkerungszahl anpassen."
+msgid "You have evacuated 1000 people. You might want to reduce the size of your economy to reflect the reduced population. "
+msgstr "Sie haben 1000 Leute evakuiert. Sie sollten die gr??e ihrer Wirtschaft an die reduzierte Bev?lkerungszahl anpassen."
 
 #: data/gui/blacksmithup.xml
-msgid ""
-"You have reached the tech level which enables you to build blacksmiths. "
-"Blacksmiths use jobs and steel to make goods."
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Schmieden zu errichten. Schmieden ben?tigen Arbeitskr?fte und Stahl um G?ter "
-"herzustellen."
+msgid "You have reached the tech level which enables you to build blacksmiths. Blacksmiths use jobs and steel to make goods."
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, Schmieden zu errichten. Schmieden ben?tigen Arbeitskr?fte und Stahl um G?ter herzustellen."
 
 #: data/gui/coalpowerup.xml
-msgid ""
-"You have reached the tech level which enables you to build coal fired power "
-"stations."
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Kohlekraftwerke zu bauen."
+msgid "You have reached the tech level which enables you to build coal fired power stations."
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, Kohlekraftwerke zu bauen."
 
 #: data/gui/firestationup.xml
-msgid ""
-"You have reached the tech level which enables you to build fire stations. "
-"Fire stations prevent most fires from starting. If you haven't had any fires "
-"yet, you might not think you need them."
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Feuerwachen zu errichten. Feuerwachen verhindern den Ausbruch der meisten "
-"Br?nde. Sollten sie bisher keine Br?nde gehabt haben k?nnten sie denken, sie "
-"brauchen keine Feuerwachen."
+msgid "You have reached the tech level which enables you to build fire stations. Fire stations prevent most fires from starting. If you haven't had any fires yet, you might not think you need them."
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, Feuerwachen zu errichten. Feuerwachen verhindern den Ausbruch der meisten Br?nde. Sollten sie bisher keine Br?nde gehabt haben k?nnten sie denken, sie brauchen keine Feuerwachen."
 
 #: data/gui/healthup.xml
-msgid ""
-"You have reached the tech level which enables you to build health centres. "
-"Heath centres reduce the number of people killed by pollution and increase "
-"overall productivity."
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Krakenh?user zu errichten. Krankenh?user reduzieren die Zahl der Toten durch "
-"Umweltverschmutzung und erh?hen die allgemeine Produktivit?t."
+msgid "You have reached the tech level which enables you to build health centres. Heath centres reduce the number of people killed by pollution and increase overall productivity."
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, Krakenh?user zu errichten. Krankenh?user reduzieren die Zahl der Toten durch Umweltverschmutzung und erh?hen die allgemeine Produktivit?t."
 
 #: data/gui/hvindustryup.xml
-msgid ""
-"You have reached the tech level which enables you to build heavy industry "
-"(steel works). Heavy industry produces steel. "
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Schwerindustrie (Stahlwerke) zu bauen. Schwerindustrie erzeugt Stahl."
+msgid "You have reached the tech level which enables you to build heavy industry (steel works). Heavy industry produces steel. "
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, Schwerindustrie (Stahlwerke) zu bauen. Schwerindustrie erzeugt Stahl."
 
 #: data/gui/ltindustryup.xml
-msgid ""
-"You have reached the tech level which enables you to build light industry. "
-"Light industry produces goods. "
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Industriebetriebe zu errichten. Industriebetriebe stellen G?ter her."
+msgid "You have reached the tech level which enables you to build light industry. Light industry produces goods. "
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, Industriebetriebe zu errichten. Industriebetriebe stellen G?ter her."
 
 #: data/gui/millup.xml
-msgid ""
-"You have reached the tech level which enables you to build mills. Mills use "
-"jobs and food to make goods. Watch out, they can use a lot of food! "
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Spinnereien zu errichten. Spinnereien ben?tigen Arbeitskr?fte und Nahrung um "
-"G?ter herzustellen. Vorsicht, sie k?nnen sehr viel Nahrung verbrauchen."
+msgid "You have reached the tech level which enables you to build mills. Mills use jobs and food to make goods. Watch out, they can use a lot of food! "
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, Spinnereien zu errichten. Spinnereien ben?tigen Arbeitskr?fte und Nahrung um G?ter herzustellen. Vorsicht, sie k?nnen sehr viel Nahrung verbrauchen."
 
 #: data/gui/mod_wind_up.xml
-msgid ""
-"You have reached the tech level which enables you to build modern, more "
-"efficient, windmills. "
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"moderne Windm?hlen zu errichten. Diese sind effizienter und erzeugen "
-"elektischen Strom."
+msgid "You have reached the tech level which enables you to build modern, more efficient, windmills. "
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, moderne Windm?hlen zu errichten. Diese sind effizienter und erzeugen elektischen Strom."
 
 #: data/gui/parkup.xml
-msgid ""
-"You have reached the tech level which enables you to build parks. Parks are "
-"used to absorb pollution. "
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Parks zu errichten. Parks absorbiern Umweltverschmutzung."
+msgid "You have reached the tech level which enables you to build parks. Parks are used to absorb pollution. "
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, Parks zu errichten. Parks absorbiern Umweltverschmutzung."
 
 #: data/gui/potteryup.xml
-msgid ""
-"You have reached the tech level which enables you to build potteries. "
-"Potteries use jobs and ore to make goods. (You need ore mines to get ore) "
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"T?pfereien zu errichten. T?pfereien ben?tigen Arbeitskr?fte und Erz um G?ter "
-"herzustellen. (Sie ben?tigen Erzgruben um zu Erz zu geleangen.)"
+msgid "You have reached the tech level which enables you to build potteries. Potteries use jobs and ore to make goods. (You need ore mines to get ore) "
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, T?pfereien zu errichten. T?pfereien ben?tigen Arbeitskr?fte und Erz um G?ter herzustellen. (Sie ben?tigen Erzgruben um zu Erz zu geleangen.)"
 
 #: data/gui/railwayup.xml
 msgid "You have reached the tech level which enables you to build railways. "
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Eisenbahnen zu bauen."
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, Eisenbahnen zu bauen."
 
 #: data/gui/riverup.xml
 msgid "You have reached the tech level which enables you to build rivers. "
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Kan?le zu bauen."
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, Kan?le zu bauen."
 
 #: data/gui/roadup.xml
-msgid ""
-"You have reached the tech level which enables you to build roads. See the "
-"help screen for more information."
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Stra?en zu bauen. Lesen sie die Hilfe f?r mehr Details."
+msgid "You have reached the tech level which enables you to build roads. See the help screen for more information."
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, Stra?en zu bauen. Lesen sie die Hilfe f?r mehr Details."
 
 #: data/gui/rocketup.xml
-msgid ""
-"You have reached the tech level which enables you to build rocket launch "
-"pads. Rockets enable you to evacuate your population and is a way to 'win' "
-"the game."
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Raketenbasen zu bauen. Mit Raketen k?nnen Leute evakuiert werden, was eine "
-"Art ist, das SPiel zu gewinnen."
+msgid "You have reached the tech level which enables you to build rocket launch pads. Rockets enable you to evacuate your population and is a way to 'win' the game."
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, Raketenbasen zu bauen. Mit Raketen k?nnen Leute evakuiert werden, was eine Art ist, das SPiel zu gewinnen."
 
 #: data/gui/schoolup.xml
-msgid ""
-"You have reached the tech level which enables you to build schools. Schools "
-"use jobs and goods to increase tech level. "
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Schulen zu errichten. Schulen ben?tigen Arbeitskr?fte und G?ter um G?ter das "
-"Technologieniveau zu erh?hen."
+msgid "You have reached the tech level which enables you to build schools. Schools use jobs and goods to increase tech level. "
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, Schulen zu errichten. Schulen ben?tigen Arbeitskr?fte und G?ter um G?ter das Technologieniveau zu erh?hen."
 
 #: data/gui/solarpowerup.xml
-msgid ""
-"You have reached the tech level which enables you to build solar power "
-"stations. "
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Solarkraftwerke zu errichten."
+msgid "You have reached the tech level which enables you to build solar power stations. "
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, Solarkraftwerke zu errichten."
 
 #: data/gui/universityup.xml
-msgid ""
-"You have reached the tech level which enables you to build universities. "
-"Universities produces PhDs, which produce more technology. "
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Universit?ten zu errichten.Universit?ten bilden Informatiker aus, die mehr "
-"Technologie erzeugen."
+msgid "You have reached the tech level which enables you to build universities. Universities produces PhDs, which produce more technology. "
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, Universit?ten zu errichten.Universit?ten bilden Informatiker aus, die mehr Technologie erzeugen."
 
 #: data/gui/windmillup.xml
 msgid "You have reached the tech level which enables you to build windmills. "
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Windm?hlen zu bauen."
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, Windm?hlen zu bauen."
 
 #: data/gui/coalmineup.xml
-msgid ""
-"You have reached the tech level which enables you to dig deep coal mines."
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Kohleminen zu graben."
+msgid "You have reached the tech level which enables you to dig deep coal mines."
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, Kohleminen zu graben."
 
 #: data/gui/recycleup.xml
-msgid ""
-"You have reached the tech level which enables you to recycling centres. "
-"Recycling centres recycle used goods back into ore. "
-msgstr ""
-"Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Recyclingwerke zu bauen. Recyclingwerke k?nnen gebrauchte G?ter zur?ck in "
-"Erz aufarbeiten."
+msgid "You have reached the tech level which enables you to recycling centres. Recycling centres recycle used goods back into ore. "
+msgstr "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, Recyclingwerke zu bauen. Recyclingwerke k?nnen gebrauchte G?ter zur?ck in Erz aufarbeiten."
 
 #: data/gui/sustain.xml data/gui/launch-gone.xml
 msgid "You have won the game."
@@ -806,30 +675,16 @@
 msgstr "Sie sollten in einer anderen Stadt neu anfangen."
 
 #: data/gui/cricketup.xml
-msgid ""
-"Your people have invented basketball. Basketball Courts use a few jobs and "
-"goods and make people in the surrounding areas (about 10 units in each "
-"direction) happier."
-msgstr ""
-"Ihre Leute haben Korbball erfunden. Korbballfelder brauchen ein paar "
-"Arbeiter und G?ter und machen die Leute in der Umgebung (etwa 10 Einheiten "
-"in jede Richtung) gl?cklicher."
+msgid "Your people have invented basketball. Basketball Courts use a few jobs and goods and make people in the surrounding areas (about 10 units in each direction) happier."
+msgstr "Ihre Leute haben Korbball erfunden. Korbballfelder brauchen ein paar Arbeiter und G?ter und machen die Leute in der Umgebung (etwa 10 Einheiten in jede Richtung) gl?cklicher."
 
 #: data/gui/launch-fail.xml
-msgid ""
-"Your rocket crashed shortly after launch. People no longer trust the "
-"technology for evacuation. You must launch five more unmanned rockets to "
-"restore confidence."
-msgstr ""
-"Iher Rakete ist kurz nach dem Start abgest?rzt. Die Leute trauen der Technik "
-"die Evakuierung nicht mehr zu. Sie m?ssen f?nf weitere unbemannte Raketen "
-"starten um ihr Vertrauen zur?ckzugewinnen."
+msgid "Your rocket crashed shortly after launch. People no longer trust the technology for evacuation. You must launch five more unmanned rockets to restore confidence."
+msgstr "Iher Rakete ist kurz nach dem Start abgest?rzt. Die Leute trauen der Technik die Evakuierung nicht mehr zu. Sie m?ssen f?nf weitere unbemannte Raketen starten um ihr Vertrauen zur?ckzugewinnen."
 
 #: data/gui/minimap.xml
 msgid "[+] Zoom in view so that less buildings but more details are visible"
-msgstr ""
-"[+] Ansicht vergr??ern, so da? weniger Geb?ude aber mehr Details sichtbar "
-"sind."
+msgstr "[+] Ansicht vergr??ern, so da? weniger Geb?ude aber mehr Details sichtbar sind."
 
 #: data/gui/minimap.xml
 msgid "[-] Zoom out"
@@ -850,3 +705,4 @@
 #: data/gui/savegame.xml
 msgid "save to selected slot"
 msgstr "Speichern"
+



From alainb at mail.berlios.de  Wed Dec 19 22:55:35 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Wed, 19 Dec 2007 22:55:35 +0100
Subject: [Lincity-ng-commit] r1327 - in trunk: data/opening src/lincity
	src/lincity/modules src/lincity-ng
Message-ID: <200712192155.lBJLtZTC025064@sheep.berlios.de>

Author: alainb
Date: 2007-12-19 22:55:18 +0100 (Wed, 19 Dec 2007)
New Revision: 1327

Modified:
   trunk/data/opening/Beach.scn
   trunk/data/opening/Rocket_98.scn
   trunk/data/opening/extreme_arid.scn
   trunk/data/opening/extreme_wetland.scn
   trunk/data/opening/good_times.scn
   trunk/src/lincity-ng/Mps.cpp
   trunk/src/lincity/modules/solar_power.cpp
   trunk/src/lincity/old_ldsvguts.cpp
   trunk/src/lincity/power.h
   trunk/src/lincity/transport.cpp
Log:
fix in loading old games wrt solar_plants
use MP_TECH everywhere
upgrade scenarios

Modified: trunk/data/opening/Beach.scn
===================================================================
(Binary files differ)

Modified: trunk/data/opening/Rocket_98.scn
===================================================================
(Binary files differ)

Modified: trunk/data/opening/extreme_arid.scn
===================================================================
(Binary files differ)

Modified: trunk/data/opening/extreme_wetland.scn
===================================================================
(Binary files differ)

Modified: trunk/data/opening/good_times.scn
===================================================================
(Binary files differ)

Modified: trunk/src/lincity/modules/solar_power.cpp
===================================================================
--- trunk/src/lincity/modules/solar_power.cpp	2007-12-19 13:19:42 UTC (rev 1326)
+++ trunk/src/lincity/modules/solar_power.cpp	2007-12-19 21:55:18 UTC (rev 1327)
@@ -54,6 +54,6 @@
     mps_store_title(i++, s);
     i++;
 
-    mps_store_sfp(i++, _("Tech"), MP_INFO(x, y).int_2 * 100.0 / MAX_TECH_LEVEL);
+    mps_store_sfp(i++, _("Tech"), ( MP_TECH(x, y) * 100.0 / MAX_TECH_LEVEL ) );
     mps_store_sd(i++, _("Grid ID"), MP_INFO(x, y).int_6);
 }

Modified: trunk/src/lincity/old_ldsvguts.cpp
===================================================================
--- trunk/src/lincity/old_ldsvguts.cpp	2007-12-19 13:19:42 UTC (rev 1326)
+++ trunk/src/lincity/old_ldsvguts.cpp	2007-12-19 21:55:18 UTC (rev 1327)
@@ -437,7 +437,7 @@
     if (tech_level >= tk)
         tk = tech_level;
 
-    /* update tech dep for compatibility with old games */
+    /* update tech dep */
     for (x = 0; x < WORLD_SIDE_LEN; x++)
         for (y = 0; y < WORLD_SIDE_LEN; y++) {
 
@@ -455,26 +455,32 @@
                 break;
 
             case (GROUP_SOLAR_POWER):
-                if ( MP_INFO(x,y).int_2 !=0 ) {
-                    MP_TECH(x,y) = MP_INFO(x,y).int_2;
-                } else {
+                {
                     float PSO = POWERS_SOLAR_OUTPUT;
                     float MT = MAX_TECH_LEVEL;
+                    int t1, t2 , t3;
+                        t1 = (int) ((MP_INFO(x,y).int_1 - PSO) * MT)/PSO;
+                        t2 = MP_INFO(x,y).int_2;
+                        t3 = (int) ((MP_INFO(x,y).int_3 - PSO) * MT)/PSO;
                     //because of bug introduced then fixed near 1207 1218 or in waterwell branch
-                    if (MP_INFO(x,y).int_1 != 0) {
-                        MP_TECH(x,y) = (int) ((MP_INFO(x,y).int_1 - PSO) * MT)/PSO;
-                    } else if (MP_INFO(x,y).int_3 != 0) {
-                        MP_TECH(x,y) = (int) ((MP_INFO(x,y).int_3 - PSO) * MT)/PSO;
+                    if (MP_INFO(x,y).int_2 != 0) {
+                        MP_TECH(x,y) = t2;
+                    } else if ( MP_INFO(x,y).int_3 >=0 ) {
+                        MP_TECH(x,y) = t3;
+                    } else if (MP_INFO(x,y).int_1 != 0) {
+                        MP_TECH(x,y) = t1;
                     } else {
-                        fprintf(stderr," Error, unknown tech level for solar plant at x=%d, y=%d\n", x, y);
+                        fprintf(stderr,"    Error, unknown tech level for solar plant at x=%d, y=%d\n", x, y);
                         if (tk > GROUP_SOLAR_POWER_TECH)
                             MP_TECH(x,y) = tk;
                         else
                             MP_TECH(x,y) = GROUP_SOLAR_POWER_TECH;
                     }
+                    //fprintf(stderr,"TECH %d, t1 %d, t2 %d, t3 %d, plant at x=%d, y=%d\n", MP_TECH(x,y), t1, t2, t3, x, y);
+                    MP_INFO(x, y).int_1 = (int)(POWERS_SOLAR_OUTPUT + (((double)MP_TECH(x, y) * POWERS_SOLAR_OUTPUT)
+                                / MAX_TECH_LEVEL));
+                    break;
                 }
-                MP_INFO(x, y).int_1 = (int)(POWERS_SOLAR_OUTPUT + (((double)MP_TECH(x, y) * POWERS_SOLAR_OUTPUT)
-                                                                   / MAX_TECH_LEVEL));
             case GROUP_ORGANIC_FARM:
                 MP_TECH(x,y) = MP_INFO(x,y).int_1;
                 break;

Modified: trunk/src/lincity/power.h
===================================================================
--- trunk/src/lincity/power.h	2007-12-19 13:19:42 UTC (rev 1326)
+++ trunk/src/lincity/power.h	2007-12-19 21:55:18 UTC (rev 1327)
@@ -53,7 +53,8 @@
 #define IS_OLD_WINDMILL(x,y) \
 ((MP_GROUP(x,y) == GROUP_WINDMILL) && \
  (MP_TYPE(x,y) != CST_USED) && \
- (MP_INFO(x,y).int_2 < MODERN_WINDMILL_TECH))
+ (MP_TECH(x,y) < MODERN_WINDMILL_TECH))
+// (MP_INFO(x,y).int_2 < MODERN_WINDMILL_TECH))
 
 #define GRID_CURRENT(x,y) (MP_INFO(x,y).int_7 == grid_inc)
 

Modified: trunk/src/lincity/transport.cpp
===================================================================
--- trunk/src/lincity/transport.cpp	2007-12-19 13:19:42 UTC (rev 1326)
+++ trunk/src/lincity/transport.cpp	2007-12-19 21:55:18 UTC (rev 1327)
@@ -336,7 +336,7 @@
                         group = MP_GROUP(x + 2, y);
                     switch (group) {
                     case GROUP_WINDMILL:
-                        if (MP_INFO(x + 1, y).int_2 < MODERN_WINDMILL_TECH)
+                        if (MP_TECH(x + 1, y) < MODERN_WINDMILL_TECH)
                             break;
                     case GROUP_POWER_LINE:
                     case GROUP_SOLAR_POWER:
@@ -357,7 +357,7 @@
                         group = MP_GROUP(x, y + 2);
                     switch (group) {
                     case GROUP_WINDMILL:
-                        if (MP_INFO(x, y + 1).int_2 < MODERN_WINDMILL_TECH)
+                        if (MP_TECH(x, y + 1) < MODERN_WINDMILL_TECH)
                             break;
                     case GROUP_POWER_LINE:
                     case GROUP_SOLAR_POWER:

Modified: trunk/src/lincity-ng/Mps.cpp
===================================================================
--- trunk/src/lincity-ng/Mps.cpp	2007-12-19 13:19:42 UTC (rev 1326)
+++ trunk/src/lincity-ng/Mps.cpp	2007-12-19 21:55:18 UTC (rev 1327)
@@ -257,7 +257,7 @@
             getSound()->playSound( "Water" );
             break;
         case GROUP_WINDMILL:
-            if( MP_INFO(mps_x, mps_y ).int_2 < MODERN_WINDMILL_TECH ){ 
+            if( MP_TECH(mps_x, mps_y ) < MODERN_WINDMILL_TECH ){ 
                 getSound()->playSound( "WindMill" );
             } else {
                 getSound()->playSound( "WindMillHTech" );



From wolfgangb at mail.berlios.de  Thu Dec 20 00:21:44 2007
From: wolfgangb at mail.berlios.de (wolfgangb at BerliOS)
Date: Thu, 20 Dec 2007 00:21:44 +0100
Subject: [Lincity-ng-commit] r1328 - trunk/src/lincity-ng
Message-ID: <200712192321.lBJNLiSS030343@sheep.berlios.de>

Author: wolfgangb
Date: 2007-12-20 00:21:44 +0100 (Thu, 20 Dec 2007)
New Revision: 1328

Modified:
   trunk/src/lincity-ng/main.cpp
Log:
Show write direcory on console.


Modified: trunk/src/lincity-ng/main.cpp
===================================================================
--- trunk/src/lincity-ng/main.cpp	2007-12-19 21:55:18 UTC (rev 1327)
+++ trunk/src/lincity-ng/main.cpp	2007-12-19 23:21:44 UTC (rev 1328)
@@ -180,9 +180,13 @@
     PHYSFS_permitSymbolicLinks(1);
 
     //show search Path 
-    for(char** i = PHYSFS_getSearchPath(); *i != NULL; i++)
+    for(char** i = PHYSFS_getSearchPath(); *i != NULL; i++){
         printf("[%s] is in the search path.\n", *i);
+    }
+    //show write directory
+    printf("[%s] is the write directory.\n", PHYSFS_getWriteDir());
 
+
     // ugly: set LINCITY_HOME environment variable
     const char* lincityhome = PHYSFS_getRealDir("colour.pal");
     if(lincityhome == 0) {
@@ -190,8 +194,7 @@
     }
     std::cout << "LINCITY_HOME: " << lincityhome << "\n";
     char tmp[256];
-    snprintf(tmp, sizeof(tmp), "LINCITY_HOME=%s", lincityhome);
-    putenv(tmp);
+    setenv("LINCITY_HOME", lincityhome, 1);
 }
 
 void initVideo(int width, int height)



From wolfgangb at mail.berlios.de  Thu Dec 20 20:05:31 2007
From: wolfgangb at mail.berlios.de (wolfgangb at BerliOS)
Date: Thu, 20 Dec 2007 20:05:31 +0100
Subject: [Lincity-ng-commit] r1329 - in trunk/src: lincity lincity-ng
Message-ID: <200712201905.lBKJ5VuP026177@sheep.berlios.de>

Author: wolfgangb
Date: 2007-12-20 20:05:31 +0100 (Thu, 20 Dec 2007)
New Revision: 1329

Modified:
   trunk/src/lincity-ng/main.cpp
   trunk/src/lincity/engglobs.cpp
   trunk/src/lincity/engglobs.h
   trunk/src/lincity/fileutil.cpp
   trunk/src/lincity/loadsave.h
Log:
Fix for Windows.


Modified: trunk/src/lincity/engglobs.cpp
===================================================================
--- trunk/src/lincity/engglobs.cpp	2007-12-19 23:21:44 UTC (rev 1328)
+++ trunk/src/lincity/engglobs.cpp	2007-12-20 19:05:31 UTC (rev 1329)
@@ -21,10 +21,6 @@
 
 int pix_double = 0;
 
-#if defined (WIN32)
-char windowsfontfile[LC_PATH_MAX];
-#endif
-
 int cheat_flag;
 int modern_windmill_flag = 0;
 

Modified: trunk/src/lincity/engglobs.h
===================================================================
--- trunk/src/lincity/engglobs.h	2007-12-19 23:21:44 UTC (rev 1328)
+++ trunk/src/lincity/engglobs.h	2007-12-20 19:05:31 UTC (rev 1329)
@@ -12,13 +12,6 @@
 
 extern int pix_double;
 
-// extern char graphic_path[256];
-
-#if defined (WIN32)
-extern char windowsfontfile[256];
-#endif
-
-
 /* */
 extern int use_waterwell, ldsv_version;
 

Modified: trunk/src/lincity/fileutil.cpp
===================================================================
--- trunk/src/lincity/fileutil.cpp	2007-12-19 23:21:44 UTC (rev 1328)
+++ trunk/src/lincity/fileutil.cpp	2007-12-20 19:05:31 UTC (rev 1329)
@@ -8,6 +8,7 @@
 #include <stdlib.h>
 #include <stdarg.h>             /* XXX: GCS FIX: What does configure need to know? */
 #include <string.h>
+#include <physfs.h>
 #include "engglobs.h"
 #include "gui_interface/screen_interface.h"
 #include "tinygettext/gettext.hpp"
@@ -407,18 +408,10 @@
 
 void init_path_strings(void)
 {
-    char *homedir = NULL;
-
     find_libdir();
+    //TODO: use, remove unused vars.
+    const char* homedir = PHYSFS_getUserDir();
 
-#if defined (WIN32)
-    homedir = LIBDIR;
-#elif defined (__EMX__)
-    homedir = getenv("HOME");
-#else
-    homedir = getenv("HOME");
-#endif
-
     /* Various dirs and files */
     lc_save_dir_len = strlen(homedir) + strlen(LC_SAVE_DIR) + 1;
     if ((lc_save_dir = (char *)malloc(lc_save_dir_len + 1)) == 0)
@@ -439,14 +432,6 @@
 
     /* Font stuff */
     sprintf(fontfile, "%s%c%s", opening_path, PATH_SLASH, "iso8859-1-8x8.raw");
-#if defined (WIN32)
-    /* GCS: Use windows font for extra speed */
-    strcpy(windowsfontfile, LIBDIR);
-    if (!pix_double)
-        strcat(windowsfontfile, "\\opening\\winfont_8x8.fnt");
-    else
-        strcat(windowsfontfile, "\\opening\\winfont_16x16.fnt");
-#endif
 
     /* Temp file for results */
     lc_temp_filename = (char *)malloc(lc_save_dir_len + 16);

Modified: trunk/src/lincity/loadsave.h
===================================================================
--- trunk/src/lincity/loadsave.h	2007-12-19 23:21:44 UTC (rev 1328)
+++ trunk/src/lincity/loadsave.h	2007-12-20 19:05:31 UTC (rev 1329)
@@ -16,13 +16,9 @@
 #   define PATH_SLASH_STRING "/"
 #endif
 
-#if defined (WIN32)
-#    define LC_SAVE_DIR "SAVED_GAMES"
-#    define LINCITYRC_FILENAME "lincity-NG.ini"
-#else
-#    define LC_SAVE_DIR ".lincity-ng"
-#    define LINCITYRC_FILENAME ".lincity-NGrc"
-#endif
+# define LC_SAVE_DIR ".lincity-ng"
+# define LINCITYRC_FILENAME ".lincity-NGrc"
+
 #define RESULTS_FILENAME "results"
 
 

Modified: trunk/src/lincity-ng/main.cpp
===================================================================
--- trunk/src/lincity-ng/main.cpp	2007-12-19 23:21:44 UTC (rev 1328)
+++ trunk/src/lincity-ng/main.cpp	2007-12-20 19:05:31 UTC (rev 1329)
@@ -193,8 +193,13 @@
         throw std::runtime_error("Couldn't locate lincity data (colour.pal).");
     }
     std::cout << "LINCITY_HOME: " << lincityhome << "\n";
+#ifndef WIN32
+    setenv("LINCITY_HOME", lincityhome, 1);
+#else
     char tmp[256];
-    setenv("LINCITY_HOME", lincityhome, 1);
+    snprintf( tmp, 256, "LINCITY_HOME=%s", lincityhome ); 
+    putenv( tmp );
+#endif    
 }
 
 void initVideo(int width, int height)



From wolfgangb at mail.berlios.de  Mon Dec 31 00:20:29 2007
From: wolfgangb at mail.berlios.de (wolfgangb at BerliOS)
Date: Mon, 31 Dec 2007 00:20:29 +0100
Subject: [Lincity-ng-commit] r1330 - in trunk/data: . help/en
Message-ID: <200712302320.lBUNKTgw011839@sheep.berlios.de>

Author: wolfgangb
Date: 2007-12-31 00:20:28 +0100 (Mon, 31 Dec 2007)
New Revision: 1330

Modified:
   trunk/data/Jamfile
   trunk/data/help/en/tutorial-basics.xml
Log:
Add scenarios to release.
Fix typo in help page.


Modified: trunk/data/Jamfile
===================================================================
--- trunk/data/Jamfile	2007-12-20 19:05:31 UTC (rev 1329)
+++ trunk/data/Jamfile	2007-12-30 23:20:28 UTC (rev 1330)
@@ -74,5 +74,5 @@
 # Stuff from old lincity, still needed for the lib at the moment
 InstallData colour.pal ;
 # InstallData [ Wildcard icons : *.csi ] : icons ;
-InstallData opening/good_times.scn opening/bad_times.scn opening/Beach.scn : opening ;
+InstallData opening/good_times.scn opening/bad_times.scn opening/Beach.scn opening/extreme_arid.scn opening/extreme_wetland.scn : opening ;
 

Modified: trunk/data/help/en/tutorial-basics.xml
===================================================================
--- trunk/data/help/en/tutorial-basics.xml	2007-12-20 19:05:31 UTC (rev 1329)
+++ trunk/data/help/en/tutorial-basics.xml	2007-12-30 23:20:28 UTC (rev 1330)
@@ -4,7 +4,7 @@
 <p style="hp">Choose "new game " &gt; "random village". Other scenarii are for more or less experienced players. </p>
 <p style="hp">Notice that the random village contains basic resources: </p>
 <li>Farms for feeding markets with foods </li>
-<li>A Water well for people
+<li>A Water well for people</li>
 <li>Communes which produces charcoal and small amount of ore and steel </li>
 <li>Residential areas</li>
 <li>Pottery</li>



From wolfgangb at mail.berlios.de  Mon Dec 31 00:41:11 2007
From: wolfgangb at mail.berlios.de (wolfgangb at BerliOS)
Date: Mon, 31 Dec 2007 00:41:11 +0100
Subject: [Lincity-ng-commit] r1331 - in trunk/data/help: en nl
Message-ID: <200712302341.lBUNfBm3003326@sheep.berlios.de>

Author: wolfgangb
Date: 2007-12-31 00:41:10 +0100 (Mon, 31 Dec 2007)
New Revision: 1331

Modified:
   trunk/data/help/en/windmill.xml
   trunk/data/help/nl/windmill.xml
Log:
Bug #12783 windmill help broken

Modified: trunk/data/help/en/windmill.xml
===================================================================
--- trunk/data/help/en/windmill.xml	2007-12-30 23:20:28 UTC (rev 1330)
+++ trunk/data/help/en/windmill.xml	2007-12-30 23:41:10 UTC (rev 1331)
@@ -21,7 +21,7 @@
 	<li><a href="residential">Residential</a></li>
 	<li><a href="tech-level">Tech-level</a></li>
 	<li><a href="msb-power">Power overlay</a></li>
-	<li><a href="powersolar">Solar power station</p>
+	<li><a href="powersolar">Solar power station</a></li>
 	
 	
 </Document>

Modified: trunk/data/help/nl/windmill.xml
===================================================================
--- trunk/data/help/nl/windmill.xml	2007-12-30 23:20:28 UTC (rev 1330)
+++ trunk/data/help/nl/windmill.xml	2007-12-30 23:41:10 UTC (rev 1331)
@@ -20,6 +20,6 @@
 	<li><a href="powerline">Electriciteitsdraden</a></li>
 	<li><a href="tech-level">Technologie nivo</a></li>
 	<li><a href="msb-power">Electriciteitskaart</a></li>
-	<li><a href="powersolar">Zonne-energiecentrale</p>
+	<li><a href="powersolar">Zonne-energiecentrale</a></li>
 	
-</Document>
\ No newline at end of file
+</Document>



From asmbsd at mail.berlios.de  Mon Dec 31 08:37:10 2007
From: asmbsd at mail.berlios.de (asmbsd at BerliOS)
Date: Mon, 31 Dec 2007 08:37:10 +0100
Subject: [Lincity-ng-commit] r1332 - in trunk/data: help/ru locale locale/gui
Message-ID: <200712310737.lBV7bADP005607@sheep.berlios.de>

Author: asmbsd
Date: 2007-12-31 08:37:08 +0100 (Mon, 31 Dec 2007)
New Revision: 1332

Added:
   trunk/data/help/ru/waterwell.xml
Modified:
   trunk/data/help/ru/blacksmith.xml
   trunk/data/help/ru/bulldoze.xml
   trunk/data/help/ru/button-index.xml
   trunk/data/help/ru/food.xml
   trunk/data/help/ru/index.xml
   trunk/data/help/ru/msb-starve.xml
   trunk/data/help/ru/residential.xml
   trunk/data/help/ru/tutorial-basics.xml
   trunk/data/locale/gui/ru.po
   trunk/data/locale/ru.po
Log:
Russian translate. (waterwall)


Modified: trunk/data/help/ru/blacksmith.xml
===================================================================
--- trunk/data/help/ru/blacksmith.xml	2007-12-30 23:41:10 UTC (rev 1331)
+++ trunk/data/help/ru/blacksmith.xml	2007-12-31 07:37:08 UTC (rev 1332)
@@ -1,10 +1,10 @@
 <?xml version="1.0"?>
 <Document style="helpdocument">
 	<p style="htitle">???????</p>
-	<p style="hp">??????? ??????????????? ????? ? ????? ? ?????. ?? ?????? ???????????? ??????? ?? ?????? ?????? ????. ??! ??????????? ???? ??????? ?????.</p>
+	<p style="hp">??????? ??????????????? ????? ? ????? ? ?????. ?? ?????? ???????????? ??????? ?? ?????? ?????? ????. ??! ??????????? ??? ???? ??????? ?????.</p>
 	<p style="hp">?? ???? ??????? ????????????? ????????? 5/6 ??????.</p>
 	<p style="hp">??????? ?? ??????????? ????????? ? ????????????? ??????. ??? ?????? ??????? ??? ????? ?????? ? ??????? ? ?????? ??????? ????????.</p>
-	<p style="hp">??? ?? ??????? ????? ?????? ???????? ???????, ????? ?????? ?? ??? ? ?????????? ??????. ??? ?? ?? ???????? ????? ?????? ???????? ??? ??? ???.</p>
+	<p style="hp">??? ?? ??????? ????? ?????? ???????? ???????, ????? ?????? ?? ??? ? ?????????? ??????. ??? ?? ?? ???????? ????? ?????? ???????? ???, ??? ???.</p>
 
 	<p style="hp">??? ???????:</p>
 	<img src="images/tiles/blacksmith0.png" halign="center"/>

Modified: trunk/data/help/ru/bulldoze.xml
===================================================================
--- trunk/data/help/ru/bulldoze.xml	2007-12-30 23:41:10 UTC (rev 1331)
+++ trunk/data/help/ru/bulldoze.xml	2007-12-31 07:37:08 UTC (rev 1332)
@@ -2,8 +2,8 @@
 <Document style="helpdocument">
 	<p style="htitle">?????????</p>
 	<p style="hp">?????????? ????????? ???? ?????????. ??????? ?? ?????????, ???? ??????? ?? ??? ??????????. ??????????? ????? ?????. ????? ?? ??????? ? ??????????? ?????????, ?? ?????? ??????? ????????? ????? ??????.</p>
-	<p style="hp">????????? ??????, ??? ??????????? ????????? ????? ????? ??????? ?????, ?? ????? ???? ??? ? ???? :-D. ????????? ?????????? ???????????? ?? ?????? ?? ?????????? ??????, ? ??? ?? ? ????????????. ???????? ????????? ????????, ???? ???????? ??-?? ???????? ?????????????.</p>
-	<p style="hp">??????????? ????, ??? ?? ????? ??????, ?? ?? ???? ??????????? ???????? ???????????? ?????.</p>
+	<p style="hp">????????? ??????, ??? ??????????? ????????? ????? ????? ??????? ?????, ?? ????? ???? ??? ? ???? :-D. ????????? ?????????? ???????????? ?? ?????? ?? ?????????? ??????, ? ??? ?? ?? ????????????. ???????? ????????? ????????, ???? ???????? ??-?? ???????? ?????????????.</p>
+	<p style="hp">??????????? ????, ??? ?? ????? ??????, ??-?? ???? ??????????? ???????? ???????????? ?????.</p>
 	<p style="hp">??? ?????? ??????????</p>
 	<img src="images/gui/buttonpanel/base/bulldozer.png" halign="center"/>
 	<p style="hsubtitle">?? ???:</p>

Modified: trunk/data/help/ru/button-index.xml
===================================================================
--- trunk/data/help/ru/button-index.xml	2007-12-30 23:41:10 UTC (rev 1331)
+++ trunk/data/help/ru/button-index.xml	2007-12-31 07:37:08 UTC (rev 1332)
@@ -13,6 +13,10 @@
 	<!--<p style="subtitle">??????????</p>-->
 	<img src="images/gui/buttonpanel/residence/residence.png"/>
 	<p><a href="residential">??????????? ?????????</a></p>
+	
+	<!--<p style="subtitle">Water well</p>-->
+	<img src="images/gui/buttonpanel/waterwell.png"/>
+	<p><a href="waterwell">??????? ????????</a></p>
 
 	<!--<p style="subtitle">?????</p>-->
 	<img src="images/gui/buttonpanel/parks/farm.png"/>

Modified: trunk/data/help/ru/food.xml
===================================================================
--- trunk/data/help/ru/food.xml	2007-12-30 23:41:10 UTC (rev 1331)
+++ trunk/data/help/ru/food.xml	2007-12-31 07:37:08 UTC (rev 1332)
@@ -3,7 +3,7 @@
 	<p style="htitle">???</p>
 	<p style="hp">??? ?????? ?? ??????, ??? ????? ???? ????????????? ????? ????.</p>
 	<p style="hp">????? ????? ???, ??? ???? ??? ?? ??????. ???? ???? ???????? ??????? ?? ??????, ?? ??? ??????? ?? ?????? ??????.</p>
-	<p style="hp">???????? ?????????? ???. ??? ?????????????? ?? ? ??????(?????). ??? ????? ???????????? <i>??????? ?????</i> ???, ??? ??????.</p>
+	<p style="hp">???????? ?????????? ???. ??? ?????????????? ?? ? ??????(?????). ??? ????? ???????????? <i>???????</i> ????? ???.</p>
 	
 	<p style="hsubtitle">??. ???:</p>
 	<li><a href="farm">?????</a></li>

Modified: trunk/data/help/ru/index.xml
===================================================================
--- trunk/data/help/ru/index.xml	2007-12-30 23:41:10 UTC (rev 1331)
+++ trunk/data/help/ru/index.xml	2007-12-31 07:37:08 UTC (rev 1332)
@@ -75,5 +75,6 @@
 <li><a href="tutorial-advanced">??????????? ???????</a></li>
 <li><a href="tutorial-scenario">???????? ????</a></li>
 <li><a href="university">???????????</a></li>
+<li><a href="waterwell">??????? ????????</a></li>
 <li><a href="windmill">???????? ????????</a></li>
 </Document>

Modified: trunk/data/help/ru/msb-starve.xml
===================================================================
--- trunk/data/help/ru/msb-starve.xml	2007-12-30 23:41:10 UTC (rev 1331)
+++ trunk/data/help/ru/msb-starve.xml	2007-12-31 07:37:08 UTC (rev 1332)
@@ -2,8 +2,9 @@
 <Document style="helpdocument">
 	<p style="htitle">???? ?????????</p>
 	<img src="images/gui/mapview/roundbuttons/round_food.png" halign="center"/>
-	<p style="hp">?????????? ????????? ?? ?????.</p>
+	<p style="hp">?????????? ???? ????????? ?? ?????.</p>
 	<p style="hp">?????? ??????? ?????????? ??, ??? ??? ? ?????? ????? ????????. ????? ??????? ? ??????? ???? ?????????? ??? ??? ?? ???????.</p>
+        <p style="hp">???? ? ????? ???????? ? ?????-?????.</p>
 	
 	<p style="hsubtitle">?? ???:</p>
 	<li><a href="mini-screen">???? ?????</a></li>

Modified: trunk/data/help/ru/residential.xml
===================================================================
--- trunk/data/help/ru/residential.xml	2007-12-30 23:41:10 UTC (rev 1331)
+++ trunk/data/help/ru/residential.xml	2007-12-31 07:37:08 UTC (rev 1332)
@@ -1,7 +1,8 @@
 <?xml version="1.0"?>
 <Document style="helpdocument">
 	<p style="htitle">??????????</p>
-	<p style="hp">??? ?? ?????, ??? ????? ????. ??? ?? ???? ???? ? ???????????, ?? ????? ???????. ??? ?? ???????? ????? ????????????????? ? ??????. ??? ????? ??? ??????? ???????? ??? ????????? ?????????. ???? 3 ???? ??????????: ?????, ??????? ? ?????? ?????????? ?????????. ??? ????? ?????? ??????? ??????????? ? ?????????? ????????? ? ????. ??? ???? ??????????? ?????????????? ???-?? ?????????..</p>
+	<p style="hp">??? ?? ?????, ??? ????? ????. ??? ?? ???? ???? ? ???????????, ?? ????? ??????? (???? ? ???????? ?????? ??????? ? ?????????/?????). ??? ?? ???????? ????? ????????????????? ? ??????.</p> 
+	<p style="hp">???? 3 ???? ??????????: ?????, ??????? ? ?????? ?????????? ?????????. ??? ????? ?????? ??????? ??????????? ? ?????????? ????????? ? ????. ??? ???? ??????????? ?????????????? ???-?? ?????????..</p>
 	<p style="hp">? ?????????? ???? ?? ?????? ????? ??????????? ??????? ??????????? ????.</p>
 
 	<p style="hp">??? ???????? ????? ?????????? ?????????(???????????)</p>
@@ -19,5 +20,7 @@
 
 	<p style="hsubtitle">?? ???:</p>
 	<li><a href="market">????????</a></li>
+	<li><a href="transport">?????????</a></li>
+        <li><a href="waterwell">??????? ????????</a></li>
 </Document>
 

Modified: trunk/data/help/ru/tutorial-basics.xml
===================================================================
--- trunk/data/help/ru/tutorial-basics.xml	2007-12-30 23:41:10 UTC (rev 1331)
+++ trunk/data/help/ru/tutorial-basics.xml	2007-12-31 07:37:08 UTC (rev 1332)
@@ -26,7 +26,7 @@
 <p style="hp">?????? ?????????????? ? ??????? ???????. ? ???? ???? ???? <a href="finance"> ?????????? ???????</a>. ???????????? ? ???, ??? ?? ???? ??????? ???? ?? ????? ???????: ???? ??? ?????? ??????????? ?????????????, ?? ?? ?? ?????? ?????? ????????? ?????? ? ??? ?? ? ??? ??????? ????????. ??? ????? ???????? ? ??????????? (?? <a href="tutorial-scenario"> ???????? ??????? ???????</a>. </p>
 
 <p style="hsubtitle">????????? ??????</p>
-<p style="hp">??????? ???? ??? ????, ??? ???????. ????????????? ?????????, ??????? <a href="residential"> ??????????? ????????? </a> (??? ????? ?????? ?????? ???????????/??????????). ????? ????????? ??????? ?????? ??????? ????, ?????? ???, ??????? ? ??.</p>
+<p style="hp">???????, ???? ??? ???? ? ????, ??? ???????. ????????????? ?????????, ??????? <a href="residential">??????????? ?????????</a> (??? ????? ?????? ?????? ???????????/??????????). ????? ????????? ??????? ?????? ??????? ????, ?????? ???, ??????? ? ??.</p>
 <p style="hp">?? ?????? ??????????? ???? ????????? (?????????? ???????, ?????????...) ? ?????????? ? ???, ??? ??? ??????. </p>
 <p style="hp">?????? ?????? ????? ???????? ?? ??????, ???? ????????? <a href="tech-level"> ??????? ??????? </a>.</p>
 <p style="hp"> ??? ?? ?????? ??????? ???? ???? ????????: ??? <a href="sustain"> ?????????? ????????? </a> ??? ????????? ???? ? <a href="rocket"> ?????? ???</a>.</p>

Added: trunk/data/help/ru/waterwell.xml
===================================================================
--- trunk/data/help/ru/waterwell.xml	2007-12-30 23:41:10 UTC (rev 1331)
+++ trunk/data/help/ru/waterwell.xml	2007-12-31 07:37:08 UTC (rev 1332)
@@ -0,0 +1,9 @@
+<?xml version="1.0"?>
+<Document style="helpdocument">
+	<p style="htitle">??????? ????????</p>
+        <p style="hp">???????? ????? ???? ? ????? ???? ????????. Lack of water will have the same consequences as lack of food. Informations is shown in starvation overlay/minimap.</p>
+
+	<p style="hp">?? ???:</p>
+	<li><a href="food">???</a></li>
+	<li><a href="msb-starve">???? ?????????.</a></li>
+</Document>

Modified: trunk/data/locale/gui/ru.po
===================================================================
--- trunk/data/locale/gui/ru.po	2007-12-30 23:41:10 UTC (rev 1331)
+++ trunk/data/locale/gui/ru.po	2007-12-31 07:37:08 UTC (rev 1332)
@@ -109,7 +109,7 @@
 
 #: data/gui/launch-good.xml
 msgid "Doing well."
-msgstr "?????? ??????."
+msgstr "????????? ??????."
 
 #: data/gui/minimap.xml
 msgid "Eco"
@@ -161,7 +161,7 @@
 
 #: data/gui/portdialog.xml
 msgid "Harbour Trade Settings"
-msgstr ""
+msgstr "????????? ?????"
 
 #: data/gui/healthup.xml
 msgid "Health Centres available"
@@ -500,7 +500,7 @@
 #: data/gui/coal_survey_yn.xml
 msgid "This will cost you 1 million once. After that it is free to call again."
 msgstr ""
-"??? ???????? ??????? 1 ??????? ??????, ? ?????????? ??????? ?? ????????. "
+"??? ???????? ??????? 1 ??????? ??????. ? ?????????? ?????????. "
 
 #: data/gui/launch-gone.xml
 msgid "Total Evacuation Complete."
@@ -508,15 +508,15 @@
 
 #: data/gui/tradedialog.xml
 msgid "Trade Settings"
-msgstr ""
+msgstr "???????? ?????????"
 
 #: data/gui/creditslist.xml
 msgid "Translation"
-msgstr ""
+msgstr "???????"
 
 #: data/gui/universityup.xml
 msgid "University available"
-msgstr "???????????? ????????. "
+msgstr "???????????? ????????."
 
 #: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_monument_yn.xml
 #: data/gui/bulldoze_shanty_yn.xml
@@ -538,7 +538,7 @@
 
 #: data/gui/bulldoze_river_yn.xml
 msgid "Warning: Bulldozing water is expensive"
-msgstr "????????: ??????? ?????? ?????. "
+msgstr "????????: ??????? ???????? ?????. "
 
 #: data/gui/launch-gone.xml
 msgid "Well done you have evacuated all your people."
@@ -564,13 +564,16 @@
 "continue costing you money to keep the rocket ready. Launch it later by "
 "clicking on the rocket area."
 msgstr ""
+"?? ?????? ????????? ?????? ?????? ??? ?????. "
+"?????????? ?????? ????? ?????. "
+"????? ????????? ?????, ??????? ?? ???????? ????????."
 
 #: data/gui/import-exportup.xml
 msgid ""
 "You can now import and export coal, goods, ore and steel. Read the help "
 "pages on these subjects to find out how to use them. "
 msgstr ""
-"?????? ?? ??????? ???????? ? ????????? ???????. ??? ?????, ????? ? ??????. "
+"?????? ?? ?????? ???????? ? ????????? ???????. ??? ?????, ????? ? ??????. "
 "?????????? ??????, ??? ?? ????? ?????, ??? ???? ????????????."
 
 #: data/gui/no-credit-parkland.xml
@@ -578,37 +581,39 @@
 "You have a budget deficit. The legislative council will not allow you to "
 "build parks on credit."
 msgstr ""
+"????? ??????????? ??????? ? ????"
 
 #: data/gui/no-credit-recycle.xml
 msgid ""
 "You have a budget deficit. The legislative council will not allow you to "
 "build recycling centres on credit."
 msgstr ""
+"?????? ??????????? ????????? ??????? ??? ????????????? ???????."
 
 #: data/gui/no-credit-rocket.xml
 msgid ""
 "You have a budget deficit. The legislative council will not allow you to "
 "build rocket launch pads on credit."
-msgstr ""
+msgstr "???????? ????????? ????????? ??????? ??? ????????????? ???????."
 
 #: data/gui/no-credit-solar-power.xml
 msgid ""
 "You have a budget deficit. The legislative council will not allow you to "
 "build solar power stations on credit."
-msgstr ""
+msgstr "????????? ?????????????? ????????? ??????? ??? ????????????? ???????."
 
 #: data/gui/no-credit-university.xml
 msgid ""
 "You have a budget deficit. The legislative council will not allow you to "
 "build universities on credit."
-msgstr ""
+msgstr "???????????? ????????? ??????? ??? ????????????? ???????."
 
 #: data/gui/launch-evac.xml
 msgid ""
 "You have evacuated 1000 people. You might want to reduce the size of your "
 "economy to reflect the reduced population. "
 msgstr ""
-"?? ?????? 1000 ???????. ?????? ????? ??????? ?? ?????????? ? ?????? "
+"?? ???????????? 1000 ???????. ?????? ????? ??????? ?? ?????????? ? ?????? "
 "?????????."
 
 #: data/gui/blacksmithup.xml
@@ -623,7 +628,8 @@
 msgid ""
 "You have reached the tech level which enables you to build coal fired power "
 "stations."
-msgstr "??????? ???????? ???????? ????????? ??????? ???????? ??????????????."
+msgstr ""
+"??????? ???????? ???????? ????????? ??????? ???????? ??????????????."
 
 #: data/gui/firestationup.xml
 msgid ""
@@ -639,14 +645,15 @@
 "You have reached the tech level which enables you to build health centres. "
 "Heath centres reduce the number of people killed by pollution and increase "
 "overall productivity."
-msgstr "??????? ???????? ???????? ????????? ??????? ????????."
+msgstr ""
+"??????? ???????? ???????? ????????? ??????? ????????."
 
 #: data/gui/hvindustryup.xml
 msgid ""
 "You have reached the tech level which enables you to build heavy industry "
 "(steel works). Heavy industry produces steel. "
 msgstr ""
-"??????? ???????? ???????? ????????? ??????? ??????? ?????????(??????????? "
+"??????? ???????? ???????? ????????? ??????? ??????? ????????? (??????????? "
 "?????)."
 
 #: data/gui/ltindustryup.xml
@@ -663,7 +670,7 @@
 "jobs and food to make goods. Watch out, they can use a lot of food! "
 msgstr ""
 "??????? ???????? ???????? ????????? ??????? ????????. ??? ???? ?????? ? "
-"????????? ??????????? ?????? ?? ???. ??? ????? ????????? ??????? ????? ???!"
+"????????? ??????????? ?????? ?? ???. ??? ????? ????????? ??????? ????? ???!"
 
 #: data/gui/mod_wind_up.xml
 msgid ""
@@ -686,6 +693,8 @@
 "You have reached the tech level which enables you to build potteries. "
 "Potteries use jobs and ore to make goods. (You need ore mines to get ore) "
 msgstr ""
+"??????? ???????? ???????? ????????? ??????? ?????????."
+"????????? ???? ?????? ? ?? ???? ?????? ??????."
 
 #: data/gui/railwayup.xml
 msgid "You have reached the tech level which enables you to build railways. "
@@ -715,8 +724,8 @@
 "You have reached the tech level which enables you to build schools. Schools "
 "use jobs and goods to increase tech level. "
 msgstr ""
-"??????? ???????? ???????? ????????? ??????? ?????. ????? ???? ?????? ? ????? "
-"???????????? ? ??????? ???????."
+"??????? ???????? ???????? ????????? ??????? ?????. ????? ???? ??????, ? ????? "
+"??????????????? ? ??????? ???????."
 
 #: data/gui/solarpowerup.xml
 msgid ""
@@ -738,12 +747,15 @@
 msgid ""
 "You have reached the tech level which enables you to dig deep coal mines."
 msgstr ""
+"??????? ???????? ???????? ????????? ?????? ???????? ???????? ?????."
 
 #: data/gui/recycleup.xml
 msgid ""
 "You have reached the tech level which enables you to recycling centres. "
 "Recycling centres recycle used goods back into ore. "
 msgstr ""
+"??????? ???????? ???????? ????????? ?????? ??????? ?????? ???????????."
+"?????? ??????????? ?? ?????????????? ??????? ?????? ????."
 
 #: data/gui/sustain.xml data/gui/launch-gone.xml
 msgid "You have won the game."
@@ -759,6 +771,8 @@
 "goods and make people in the surrounding areas (about 10 units in each "
 "direction) happier."
 msgstr ""
+"???? ???? ????????? ?????????. ????????????? ???????? ?????????? ?????? ? "
+"?????? ? ?????? ????? (? ???? 10 ??????) ???????????."
 
 #: data/gui/launch-fail.xml
 msgid ""

Modified: trunk/data/locale/ru.po
===================================================================
--- trunk/data/locale/ru.po	2007-12-30 23:41:10 UTC (rev 1331)
+++ trunk/data/locale/ru.po	2007-12-31 07:37:08 UTC (rev 1332)
@@ -2,6 +2,7 @@
 # This file is distributed under the same license as the lincity-ng package.
 # Copyright (C) 2007 Leonid Myravjev <asm at asm.pp.ru>.
 #
+#, fuzzy
 msgid ""
 msgstr ""
 "Project-Id-Version: ru\n"
@@ -14,27 +15,64 @@
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
 
-#: src/lincity/engine.cpp:120
+#: src/lincity/power.cpp:102
+msgid "You have too many power grids. Join some of them"
+msgstr "??????? ????? ????????. ???????????? ? ?????????????"
+
+#: src/lincity/fileutil.cpp:266 src/lincity/fileutil.cpp:310
+msgid "Error. Can't find LINCITY_HOME"
+msgstr "??????, ?? ???? ????? LINCITY_HOME"
+
+#: src/lincity/fileutil.cpp:512
+msgid "Error verifying package. Can't find colour.pal."
+msgstr "???????? ?????? ?? ??????. ?? ???? ????? colour.pal"
+
+#: src/lincity/fileutil.cpp:525 src/lincity/fileutil.cpp:533
+#, c-format
+msgid "Couldn't create the save directory '%s'\n"
+msgstr "?? ???? ??????? ?????????? ??? ?????????? '%s'\n"
+
+#: src/lincity/fileutil.cpp:550
+#, c-format
+msgid "Out of memory: malloc failure\n"
+msgstr "??????????? ?????? ?? ???????!!!\n"
+
+#: src/lincity/ldsvguts.cpp:137
+#, c-format
+msgid "Save file <%s> - "
+msgstr "????????? ? <%s> - "
+
+#: src/lincity/ldsvguts.cpp:138
+msgid "Can't open save file!"
+msgstr "?? ???? ??????? ????"
+
+#: src/lincity/ldsvguts.cpp:362
+#, c-format
+msgid "Can't open <%s> (gzipped)"
+msgstr "?? ???? ??????? <%s> (???? gzip)"
+
+#: src/lincity/simulate.cpp:90 src/lincity/simulate.cpp:97
 msgid ""
-"ERROR: group does not exist. This should not happen! Please consider filling "
-"a bug report to lincity-ng team, with the saved game and what you did :-) "
+"Upgrading from old game. You have 10 years to build water wells where "
+"needed. After, starvation will occur!  You should check starvation minimap, "
+"and read waterwell help page :-)"
 msgstr ""
-"??????: ?????? ?? ??????????. ??? ?? ???????! ?????????? ???????? ????? ?? "
-"??????, ? ??????????? ????? ? ????????, ??? ?? ??????? :-D "
+"?????????? ?? ?????? ????. ? ??? ???? 10 ???, ?? ?? ??? ?? ????????? ??????? ????????. "
+"????? ????? ???????? ?????! ?? ?????? ????????? ???? ????????? ?? ?????????. "
+"??? ?? ???????? ????????? ? ??????? :-)"
 
+#: src/lincity/ldsvguts.cpp:395
+msgid "Loading scene"
+msgstr "???????? ????????? "
+
 #: src/lincity/engine.cpp:152
 msgid "Port must be connected to river all along right side."
 msgstr "????? ?????? ??????????? ? ?????, ??????? ????????? ??????"
 
-#: src/lincity/engine.cpp:161 src/lincity/engine.cpp:170
-msgid "Too many substations + windmills. You cannot build one more"
-msgstr ""
-"??????? ????? ?????????? ? ???????? ???????. ?? ?? ?????? ?? ?????? ???????"
+#: src/lincity/engine.cpp:161 src/lincity/engine.cpp:264
+msgid "You can't build a water well here: it is all desert."
+msgstr "?? ?? ?????? ??????? ?????? ???????? ?????: ??? ???????."
 
-#: src/lincity/engine.cpp:200
-msgid "Too many markets. You cannot build one more"
-msgstr "??????? ????? ?????????. ?????? ??????? ??????"
-
 #: src/lincity/engine.cpp:223
 msgid "You can't build a tip here: this area was once a landfill"
 msgstr "?? ?? ?????? ??????? ??????: ????? ?????? ???????"
@@ -47,13 +85,26 @@
 msgid "You can't build a mine here: there is no ore left at this site"
 msgstr "?????? ????????? ????? ?????: ???? ??? ???????????"
 
-#: src/lincity/engine.cpp:264
-msgid "You can't build a water well here: it is all desert."
+#: src/lincity/engine.cpp:210 src/lincity/engine.cpp:274
+msgid "You can't build a park here: it is a desert, parks need water"
+msgstr "?????? ????????? ???? ?????: ??? ???????, ????? ????? ????"
+
+#: src/lincity/engine.cpp:161 src/lincity/engine.cpp:170
+msgid "Too many substations + windmills. You cannot build one more"
 msgstr ""
+"??????? ????? ?????????? ? ???????? ???????. ?? ?? ?????? ?? ?????? ???????"
 
-#: src/lincity/engine.cpp:274
-msgid "You can't build a park here: it is a desert, parks need water"
+#: src/lincity/engine.cpp:200
+msgid "Too many markets. You cannot build one more"
+msgstr "??????? ????? ?????????. ?????? ??????? ??????"
+
+#: src/lincity/engine.cpp:120
+msgid ""
+"ERROR: group does not exist. This should not happen! Please consider filling "
+"a bug report to lincity-ng team, with the saved game and what you did :-) "
 msgstr ""
+"??????: ?????? ?? ??????????. ??? ?? ???????! ?????????? ???????? ????? ?? "
+"??????, ? ??????????? ????? ? ????????, ??? ?? ??????? :-D "
 
 #: src/lincity/engine.cpp:485
 msgid "It's at a power line."
@@ -340,73 +391,26 @@
 msgid "Residential HH"
 msgstr "?????????? ??"
 
-#: src/lincity/lintypes.cpp:476
+#: src/lincity/lintypes.cpp:477 src/lincity/lintypes.cpp:476
 msgid "Water well"
-msgstr ""
+msgstr "??????? ????????"
 
-#: src/lincity/lintypes.cpp:488
+#: src/lincity/lintypes.cpp:489 src/lincity/lintypes.cpp:488
 msgid "Desert"
-msgstr ""
+msgstr "???????"
 
-#: src/lincity/lintypes.cpp:500
+#: src/lincity/lintypes.cpp:501 src/lincity/lintypes.cpp:500
 msgid "Tree"
-msgstr ""
+msgstr "??????"
 
-#: src/lincity/lintypes.cpp:513
+#: src/lincity/lintypes.cpp:514 src/lincity/lintypes.cpp:513
 msgid "Trees"
-msgstr ""
+msgstr "???????"
 
-#: src/lincity/lintypes.cpp:526
+#: src/lincity/lintypes.cpp:527 src/lincity/lintypes.cpp:526
 msgid "Forest"
-msgstr ""
+msgstr "???"
 
-#: src/lincity/ldsvguts.cpp:137
-#, c-format
-msgid "Save file <%s> - "
-msgstr "????????? ? <%s> - "
-
-#: src/lincity/ldsvguts.cpp:138
-msgid "Can't open save file!"
-msgstr "?? ???? ??????? ????"
-
-#: src/lincity/ldsvguts.cpp:148
-msgid "Saving scene"
-msgstr "?????????? ?????????"
-
-#: src/lincity/ldsvguts.cpp:362
-#, c-format
-msgid "Can't open <%s> (gzipped)"
-msgstr "?? ???? ??????? <%s> (???? gzip)"
-
-#: src/lincity/ldsvguts.cpp:395
-msgid "Loading scene"
-msgstr "???????? ????????? "
-
-#: src/lincity/fileutil.cpp:266 src/lincity/fileutil.cpp:310
-msgid "Error. Can't find LINCITY_HOME"
-msgstr "??????, ?? ???? ????? LINCITY_HOME"
-
-#: src/lincity/fileutil.cpp:512
-msgid "Error verifying package. Can't find colour.pal."
-msgstr "???????? ?????? ?? ??????. ?? ???? ????? colour.pal"
-
-#: src/lincity/fileutil.cpp:525 src/lincity/fileutil.cpp:533
-#, c-format
-msgid "Couldn't create the save directory '%s'\n"
-msgstr "?? ???? ??????? ?????????? ??? ?????????? '%s'\n"
-
-#: src/lincity/fileutil.cpp:550
-#, c-format
-msgid "Out of memory: malloc failure\n"
-msgstr "??????????? ?????? ?? ???????!!!\n"
-
-#: src/lincity/simulate.cpp:97
-msgid ""
-"Upgrading from old game. You have 10 years to build water wells where "
-"needed. After, starvation will occur!  You should check starvation minimap, "
-"and read waterwell help page :-)"
-msgstr ""
-
 #: src/lincity/lclib.cpp:15
 msgid "Jan"
 msgstr "???"
@@ -455,59 +459,6 @@
 msgid "Dec"
 msgstr "???"
 
-#: src/lincity/power.cpp:102
-msgid "You have too many power grids. Join some of them"
-msgstr "??????? ????? ????????. ???????????? ? ?????????????"
-
-#: src/lincity/modules/health_centre.cpp:58
-msgid "Health Centre"
-msgstr "???????? "
-
-#: src/lincity/modules/health_centre.cpp:60
-#: src/lincity/modules/rocket_pad.cpp:198 src/lincity/modules/recycle.cpp:148
-#: src/lincity/modules/mill.cpp:92 src/lincity/modules/university.cpp:65
-#: src/lincity/modules/cricket.cpp:93 src/lincity/modules/pottery.cpp:108
-#: src/lincity/modules/blacksmith.cpp:95 src/lincity/modules/school.cpp:48
-#: src/lincity/modules/firestation.cpp:110
-msgid "Inventory"
-msgstr "?????????"
-
-#: src/lincity/modules/health_centre.cpp:61
-#: src/lincity/modules/rocket_pad.cpp:199 src/lincity/modules/market.cpp:984
-#: src/lincity/modules/road.cpp:47 src/lincity/modules/rail.cpp:51
-#: src/lincity/modules/coal_power.cpp:97 src/lincity/modules/university.cpp:66
-#: src/lincity/modules/cricket.cpp:94 src/lincity/modules/track.cpp:38
-#: src/lincity/modules/pottery.cpp:109 src/lincity/modules/school.cpp:49
-#: src/lincity/modules/firestation.cpp:111
-msgid "Jobs"
-msgstr "??????"
-
-#: src/lincity/modules/health_centre.cpp:62
-#: src/lincity/modules/rocket_pad.cpp:200 src/lincity/modules/market.cpp:986
-#: src/lincity/modules/port.cpp:298 src/lincity/modules/road.cpp:49
-#: src/lincity/modules/rail.cpp:53 src/lincity/modules/mill.cpp:93
-#: src/lincity/modules/university.cpp:67 src/lincity/modules/cricket.cpp:95
-#: src/lincity/modules/track.cpp:40 src/lincity/modules/pottery.cpp:110
-#: src/lincity/modules/blacksmith.cpp:96 src/lincity/modules/school.cpp:50
-#: src/lincity/modules/firestation.cpp:112 src/lincity-ng/MpsInterface.cpp:451
-msgid "Goods"
-msgstr "??????"
-
-#: src/lincity/modules/rocket_pad.cpp:192
-msgid "Rocket Pad"
-msgstr "???????? ???????? "
-
-#: src/lincity/modules/rocket_pad.cpp:195
-msgid "Completion"
-msgstr "?????????"
-
-#: src/lincity/modules/rocket_pad.cpp:201 src/lincity/modules/market.cpp:988
-#: src/lincity/modules/port.cpp:302 src/lincity/modules/road.cpp:51
-#: src/lincity/modules/rail.cpp:55 src/lincity/modules/light_industry.cpp:288
-#: src/lincity/modules/commune.cpp:182 src/lincity/modules/track.cpp:42
-msgid "Steel"
-msgstr "?????"
-
 #: src/lincity/modules/windmill.cpp:76 src/lincity/modules/recycle.cpp:146
 #: src/lincity/modules/coal_power.cpp:98
 #: src/lincity/modules/organic_farm.cpp:230
@@ -532,11 +483,13 @@
 msgid "Grid Status"
 msgstr "????????????"
 
-#: src/lincity/modules/windmill.cpp:93 src/lincity/modules/substation.cpp:104
+#: src/lincity/modules/windmill.cpp:92 src/lincity/modules/substation.cpp:104
+#: src/lincity/modules/windmill.cpp:93
 msgid "T. Cap."
 msgstr ""
 
-#: src/lincity/modules/windmill.cpp:96 src/lincity/modules/substation.cpp:107
+#: src/lincity/modules/windmill.cpp:95 src/lincity/modules/substation.cpp:107
+#: src/lincity/modules/windmill.cpp:96
 msgid "A. Cap."
 msgstr ""
 
@@ -547,82 +500,6 @@
 msgid "Grid ID"
 msgstr "?????? ID"
 
-#: src/lincity/modules/water.cpp:20 src/lincity/modules/waterwell.cpp:50
-#: src/lincity/modules/commune.cpp:177 src/lincity/modules/commune.cpp:179
-#: src/lincity/modules/commune.cpp:181 src/lincity/modules/commune.cpp:183
-#: src/lincity-ng/MpsInterface.cpp:382 src/lincity-ng/MpsInterface.cpp:385
-#: src/lincity-ng/MpsInterface.cpp:388
-msgid "Yes"
-msgstr "??"
-
-#: src/lincity/modules/water.cpp:20 src/lincity/modules/commune.cpp:177
-#: src/lincity/modules/commune.cpp:179 src/lincity/modules/commune.cpp:181
-#: src/lincity/modules/commune.cpp:183 src/lincity-ng/MpsInterface.cpp:382
-#: src/lincity-ng/MpsInterface.cpp:385 src/lincity-ng/MpsInterface.cpp:388
-msgid "No"
-msgstr "???"
-
-#: src/lincity/modules/water.cpp:21
-msgid "Navigable"
-msgstr "?????????"
-
-#: src/lincity/modules/recycle.cpp:137
-msgid "Recycling"
-msgstr "???????????"
-
-#: src/lincity/modules/recycle.cpp:138
-msgid "Center"
-msgstr "?????"
-
-#: src/lincity/modules/recycle.cpp:141
-#: src/lincity/modules/heavy_industry.cpp:288 src/lincity/modules/mill.cpp:90
-#: src/lincity/modules/light_industry.cpp:289
-#: src/lincity/modules/university.cpp:68 src/lincity/modules/pottery.cpp:106
-#: src/lincity/modules/blacksmith.cpp:93 src/lincity/modules/school.cpp:52
-msgid "Capacity"
-msgstr "?????? "
-
-#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
-#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
-#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
-#: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/light_industry.cpp:281
-#: src/lincity/modules/organic_farm.cpp:223
-msgid "YES"
-msgstr "??"
-
-#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
-#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
-#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
-#: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/heavy_industry.cpp:279
-#: src/lincity/modules/light_industry.cpp:281
-msgid "NO"
-msgstr "???"
-
-#: src/lincity/modules/recycle.cpp:144 src/lincity/modules/residence.cpp:271
-#: src/lincity/modules/heavy_industry.cpp:282
-#: src/lincity/modules/light_industry.cpp:282
-#: src/lincity/modules/organic_farm.cpp:227
-msgid "Power"
-msgstr "???????"
-
-#: src/lincity/modules/recycle.cpp:149
-#: src/lincity/modules/heavy_industry.cpp:286
-#: src/lincity/modules/market.cpp:987 src/lincity/modules/port.cpp:294
-#: src/lincity/modules/road.cpp:50 src/lincity/modules/rail.cpp:54
-#: src/lincity/modules/light_industry.cpp:287
-#: src/lincity/modules/commune.cpp:180 src/lincity/modules/track.cpp:41
-#: src/lincity/modules/pottery.cpp:111
-msgid "Ore"
-msgstr "????"
-
-#: src/lincity/modules/recycle.cpp:150 src/lincity/modules/market.cpp:989
-#: src/lincity/modules/road.cpp:52 src/lincity/modules/rail.cpp:56
-#: src/lincity/modules/commune.cpp:184 src/lincity/modules/track.cpp:43
-msgid "Waste"
-msgstr "?????"
-
 #: src/lincity/modules/coalmine.cpp:132
 msgid "Coal Mine"
 msgstr "???????? ?????"
@@ -640,48 +517,6 @@
 msgid "EMPTY"
 msgstr "?????"
 
-#: src/lincity/modules/residence.cpp:255
-msgid "Residence"
-msgstr "??????????"
-
-#: src/lincity/modules/residence.cpp:259
-msgid "People"
-msgstr "???????"
-
-#: src/lincity/modules/residence.cpp:268
-msgid "Fed"
-msgstr "???????"
-
-#: src/lincity/modules/residence.cpp:274
-msgid "Employed"
-msgstr "?????????"
-
-#: src/lincity/modules/residence.cpp:276 src/lincity-ng/MpsInterface.cpp:396
-msgid "good"
-msgstr "??????"
-
-#: src/lincity/modules/residence.cpp:276
-msgid "poor"
-msgstr "?????"
-
-#: src/lincity/modules/residence.cpp:277
-msgid "Job"
-msgstr "??????"
-
-#: src/lincity/modules/residence.cpp:280
-msgid "Health Cvr"
-msgstr "????????"
-
-#: src/lincity/modules/residence.cpp:286 src/lincity-ng/MpsInterface.cpp:389
-#: src/lincity-ng/MpsInterface.cpp:517
-msgid "Sport"
-msgstr "?????"
-
-#: src/lincity/modules/residence.cpp:288 src/lincity/modules/waterwell.cpp:47
-#: src/lincity-ng/MpsInterface.cpp:391
-msgid "Pollution"
-msgstr "?????????"
-
 #: src/lincity/modules/monument.cpp:57
 msgid "Wisdom Bestowed"
 msgstr "?????? ??????????????"
@@ -691,23 +526,25 @@
 msgid "% Complete"
 msgstr "% ?????????"
 
-#: src/lincity/modules/waterwell.cpp:44
-msgid "Water_well"
-msgstr ""
+#: src/lincity/modules/commune.cpp:175
+msgid "Activity"
+msgstr "??????????"
 
-#: src/lincity/modules/waterwell.cpp:51
-msgid "Drinkable"
-msgstr ""
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/waterwell.cpp:50
+#: src/lincity/modules/commune.cpp:177 src/lincity/modules/commune.cpp:179
+#: src/lincity/modules/commune.cpp:181 src/lincity/modules/commune.cpp:183
+#: src/lincity-ng/MpsInterface.cpp:382 src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity-ng/MpsInterface.cpp:388
+msgid "Yes"
+msgstr "??"
 
-#: src/lincity/modules/heavy_industry.cpp:268
-msgid "Heavy"
-msgstr "??????? "
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/commune.cpp:177
+#: src/lincity/modules/commune.cpp:179 src/lincity/modules/commune.cpp:181
+#: src/lincity/modules/commune.cpp:183 src/lincity-ng/MpsInterface.cpp:382
+#: src/lincity-ng/MpsInterface.cpp:385 src/lincity-ng/MpsInterface.cpp:388
+msgid "No"
+msgstr "???"
 
-#: src/lincity/modules/heavy_industry.cpp:269
-#: src/lincity/modules/light_industry.cpp:277
-msgid "Industry"
-msgstr "?????????"
-
 #: src/lincity/modules/heavy_industry.cpp:274
 #: src/lincity/modules/heavy_industry.cpp:287
 #: src/lincity/modules/market.cpp:985 src/lincity/modules/port.cpp:290
@@ -719,72 +556,121 @@
 msgid "Coal"
 msgstr "?????"
 
-#: src/lincity/modules/heavy_industry.cpp:276
-msgid "Grid"
-msgstr "?????????????"
+#: src/lincity/modules/recycle.cpp:149
+#: src/lincity/modules/heavy_industry.cpp:286
+#: src/lincity/modules/market.cpp:987 src/lincity/modules/port.cpp:294
+#: src/lincity/modules/road.cpp:50 src/lincity/modules/rail.cpp:54
+#: src/lincity/modules/light_industry.cpp:287
+#: src/lincity/modules/commune.cpp:180 src/lincity/modules/track.cpp:41
+#: src/lincity/modules/pottery.cpp:111
+msgid "Ore"
+msgstr "????"
 
-#: src/lincity/modules/heavy_industry.cpp:284
-#: src/lincity/modules/light_industry.cpp:284
-msgid "Output"
-msgstr "???????"
+#: src/lincity/modules/rocket_pad.cpp:201 src/lincity/modules/market.cpp:988
+#: src/lincity/modules/port.cpp:302 src/lincity/modules/road.cpp:51
+#: src/lincity/modules/rail.cpp:55 src/lincity/modules/light_industry.cpp:288
+#: src/lincity/modules/commune.cpp:182 src/lincity/modules/track.cpp:42
+msgid "Steel"
+msgstr "?????"
 
-#: src/lincity/modules/heavy_industry.cpp:285
-#: src/lincity/modules/light_industry.cpp:286
-msgid "Store"
-msgstr "?????"
+#: src/lincity/modules/recycle.cpp:150 src/lincity/modules/market.cpp:989
+#: src/lincity/modules/road.cpp:52 src/lincity/modules/rail.cpp:56
+#: src/lincity/modules/commune.cpp:184 src/lincity/modules/track.cpp:43
+msgid "Waste"
+msgstr "?????"
 
+#: src/lincity/modules/firestation.cpp:108
+msgid "Fire Station"
+msgstr "???????? ???????"
+
+#: src/lincity/modules/health_centre.cpp:60
+#: src/lincity/modules/rocket_pad.cpp:198 src/lincity/modules/recycle.cpp:148
+#: src/lincity/modules/mill.cpp:92 src/lincity/modules/university.cpp:65
+#: src/lincity/modules/cricket.cpp:93 src/lincity/modules/pottery.cpp:108
+#: src/lincity/modules/blacksmith.cpp:95 src/lincity/modules/school.cpp:48
+#: src/lincity/modules/firestation.cpp:110
+msgid "Inventory"
+msgstr "?????????"
+
+#: src/lincity/modules/health_centre.cpp:61
+#: src/lincity/modules/rocket_pad.cpp:199 src/lincity/modules/market.cpp:984
+#: src/lincity/modules/road.cpp:47 src/lincity/modules/rail.cpp:51
+#: src/lincity/modules/coal_power.cpp:97 src/lincity/modules/university.cpp:66
+#: src/lincity/modules/cricket.cpp:94 src/lincity/modules/track.cpp:38
+#: src/lincity/modules/pottery.cpp:109 src/lincity/modules/school.cpp:49
+#: src/lincity/modules/firestation.cpp:111
+msgid "Jobs"
+msgstr "??????"
+
+#: src/lincity/modules/health_centre.cpp:62
+#: src/lincity/modules/rocket_pad.cpp:200 src/lincity/modules/market.cpp:986
+#: src/lincity/modules/port.cpp:298 src/lincity/modules/road.cpp:49
+#: src/lincity/modules/rail.cpp:53 src/lincity/modules/mill.cpp:93
+#: src/lincity/modules/university.cpp:67 src/lincity/modules/cricket.cpp:95
+#: src/lincity/modules/track.cpp:40 src/lincity/modules/pottery.cpp:110
+#: src/lincity/modules/blacksmith.cpp:96 src/lincity/modules/school.cpp:50
+#: src/lincity/modules/firestation.cpp:112 src/lincity-ng/MpsInterface.cpp:451
+msgid "Goods"
+msgstr "??????"
+
 #: src/lincity/modules/market.cpp:983 src/lincity/modules/port.cpp:286
 #: src/lincity/modules/road.cpp:46 src/lincity/modules/rail.cpp:50
 #: src/lincity/modules/mill.cpp:94 src/lincity/modules/track.cpp:37
 msgid "Food"
 msgstr "???"
 
-#: src/lincity/modules/port.cpp:306 src/lincity-ng/MpsInterface.cpp:535
-msgid "Total"
-msgstr "????? "
+#: src/lincity/modules/university.cpp:61
+msgid "Tech Produced"
+msgstr "??????????? ???????"
 
-#: src/lincity/modules/rail.cpp:47
-msgid "Rail"
-msgstr "??????"
+#: src/lincity/modules/recycle.cpp:141
+#: src/lincity/modules/heavy_industry.cpp:288 src/lincity/modules/mill.cpp:90
+#: src/lincity/modules/light_industry.cpp:289
+#: src/lincity/modules/university.cpp:68 src/lincity/modules/pottery.cpp:106
+#: src/lincity/modules/blacksmith.cpp:93 src/lincity/modules/school.cpp:52
+msgid "Capacity"
+msgstr "?????? "
 
-#: src/lincity/modules/coal_power.cpp:83
-#: src/lincity/modules/solar_power.cpp:47
-msgid "Power Station"
-msgstr "????????????? ???????"
+#: src/lincity/modules/water.cpp:21
+msgid "Navigable"
+msgstr "?????????"
 
-#: src/lincity/modules/coal_power.cpp:87
-#: src/lincity/modules/solar_power.cpp:51
-msgid "Max Output"
-msgstr "???? ???????"
+#: src/lincity/modules/health_centre.cpp:58
+msgid "Health Centre"
+msgstr "???????? "
 
-#: src/lincity/modules/coal_power.cpp:92
-#: src/lincity/modules/solar_power.cpp:56
-msgid "Current Output"
-msgstr "?????????? ???????"
+#: src/lincity/modules/waterwell.cpp:56 src/lincity/modules/waterwell.cpp:44
+msgid "Water_well"
+msgstr ""
 
-#: src/lincity/modules/substation.cpp:97
-msgid "Local Demand"
-msgstr "????????? ??????????"
+#: src/lincity/modules/residence.cpp:288 src/lincity/modules/waterwell.cpp:47
+#: src/lincity-ng/MpsInterface.cpp:391
+msgid "Pollution"
+msgstr "?????????"
 
-#: src/lincity/modules/mill.cpp:88
-msgid "Textile Mill"
-msgstr "??????????? ???????"
+#: src/lincity/modules/waterwell.cpp:63 src/lincity/modules/waterwell.cpp:51
+msgid "Drinkable"
+msgstr "????? ??? ?????"
 
-#: src/lincity/modules/oremine.cpp:141
-msgid "Ore Mine"
-msgstr "????? ????"
+#: src/lincity/modules/rocket_pad.cpp:192
+msgid "Rocket Pad"
+msgstr "???????? ???????? "
 
+#: src/lincity/modules/rocket_pad.cpp:195
+msgid "Completion"
+msgstr "?????????"
+
 #: src/lincity/modules/power_line.cpp:46
 msgid "Power Line"
 msgstr "????????????"
 
-#: src/lincity/modules/light_industry.cpp:276
-msgid "Light"
-msgstr "????"
+#: src/lincity/modules/port.cpp:306 src/lincity-ng/MpsInterface.cpp:535
+msgid "Total"
+msgstr "????? "
 
-#: src/lincity/modules/university.cpp:61
-msgid "Tech Produced"
-msgstr "??????????? ???????"
+#: src/lincity/modules/rail.cpp:47
+msgid "Rail"
+msgstr "??????"
 
 #: src/lincity/modules/tip.cpp:100
 msgid "Landfill"
@@ -807,18 +693,93 @@
 msgid "% Filled"
 msgstr "% ??????????"
 
-#: src/lincity/modules/commune.cpp:175
-msgid "Activity"
-msgstr "??????????"
+#: src/lincity/modules/light_industry.cpp:276
+msgid "Light"
+msgstr "????"
 
+#: src/lincity/modules/heavy_industry.cpp:269
+#: src/lincity/modules/light_industry.cpp:277
+msgid "Industry"
+msgstr "?????????"
+
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
+#: src/lincity/modules/light_industry.cpp:281
+#: src/lincity/modules/organic_farm.cpp:223
+msgid "YES"
+msgstr "??"
+
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
+#: src/lincity/modules/heavy_industry.cpp:279
+#: src/lincity/modules/light_industry.cpp:281
+msgid "NO"
+msgstr "???"
+
+#: src/lincity/modules/recycle.cpp:144 src/lincity/modules/residence.cpp:271
+#: src/lincity/modules/heavy_industry.cpp:282
+#: src/lincity/modules/light_industry.cpp:282
+#: src/lincity/modules/organic_farm.cpp:227
+msgid "Power"
+msgstr "???????"
+
+#: src/lincity/modules/heavy_industry.cpp:284
+#: src/lincity/modules/light_industry.cpp:284
+msgid "Output"
+msgstr "???????"
+
+#: src/lincity/modules/heavy_industry.cpp:285
+#: src/lincity/modules/light_industry.cpp:286
+msgid "Store"
+msgstr "?????"
+
+#: src/lincity/modules/recycle.cpp:137
+msgid "Recycling"
+msgstr "???????????"
+
+#: src/lincity/modules/recycle.cpp:138
+msgid "Center"
+msgstr "?????"
+
 #: src/lincity/modules/school.cpp:45
 msgid "Lessons Learned"
 msgstr "?????? ?????????"
 
-#: src/lincity/modules/firestation.cpp:108
-msgid "Fire Station"
-msgstr "???????? ???????"
+#: src/lincity/modules/oremine.cpp:141
+msgid "Ore Mine"
+msgstr "????? ????"
 
+#: src/lincity/modules/mill.cpp:88
+msgid "Textile Mill"
+msgstr "??????????? ???????"
+
+#: src/lincity/modules/coal_power.cpp:83
+#: src/lincity/modules/solar_power.cpp:47
+msgid "Power Station"
+msgstr "????????????? ???????"
+
+#: src/lincity/modules/coal_power.cpp:87
+#: src/lincity/modules/solar_power.cpp:51
+msgid "Max Output"
+msgstr "???? ???????"
+
+#: src/lincity/modules/coal_power.cpp:92
+#: src/lincity/modules/solar_power.cpp:56
+msgid "Current Output"
+msgstr "?????????? ???????"
+
+#: src/lincity/modules/heavy_industry.cpp:268
+msgid "Heavy"
+msgstr "??????? "
+
+#: src/lincity/modules/heavy_industry.cpp:276
+msgid "Grid"
+msgstr "?????????????"
+
 #: src/lincity/modules/organic_farm.cpp:219
 msgid "Organic Farm"
 msgstr "???????????? ?????"
@@ -831,136 +792,75 @@
 msgid "Prod"
 msgstr "???????"
 
+#: src/lincity/modules/organic_farm.cpp:237
 #: src/lincity/modules/organic_farm.cpp:239
 msgid "Debug info"
 msgstr ""
 
+#: src/lincity/modules/organic_farm.cpp:238
 #: src/lincity/modules/organic_farm.cpp:240
 msgid "max with power&water"
 msgstr ""
 
+#: src/lincity/modules/organic_farm.cpp:239
 #: src/lincity/modules/organic_farm.cpp:241
 msgid "N tiles with water"
 msgstr ""
 
+#: src/lincity/modules/organic_farm.cpp:240
 #: src/lincity/modules/organic_farm.cpp:242
 #, fuzzy
 msgid "Current production"
-msgstr "?????????? ???????"
+msgstr ""
+"#-#-#-#-#  messages.pot (PACKAGE VERSION)  #-#-#-#-#\n"
+"#-#-#-#-#  ru.po (ru)  #-#-#-#-#\n"
+"?????????? ???????"
 
 #: src/lincity/modules/solar_power.cpp:46
 msgid "Solar"
 msgstr "??????"
 
-#: src/lincity-ng/Dialog.cpp:173
-msgid "Launchsite"
-msgstr "?????????"
+#: src/lincity/modules/substation.cpp:97
+msgid "Local Demand"
+msgstr "????????? ??????????"
 
-#: src/lincity-ng/Dialog.cpp:352 src/lincity-ng/Dialog.cpp:353
-msgid "----- IN TEST MODE -------"
-msgstr "----- ? ???????? ?????? -------"
+#: src/lincity/modules/residence.cpp:255
+msgid "Residence"
+msgstr "??????????"
 
-#: src/lincity-ng/Dialog.cpp:355
-#, c-format
-msgid "Game statistics from LinCity-NG Version %s"
-msgstr "?????????? ???? LinCity-NG ?????? %s"
+#: src/lincity/modules/residence.cpp:259
+msgid "People"
+msgstr "???????"
 
-#: src/lincity-ng/Dialog.cpp:359
-#, c-format
-msgid "Initial loaded scene - %s"
-msgstr "????????? ????? - %s"
+#: src/lincity/modules/residence.cpp:268
+msgid "Fed"
+msgstr "???????"
 
-#: src/lincity-ng/Dialog.cpp:364
-#, c-format
-msgid "Economy is sustainable"
-msgstr "????????? ?????????? "
+#: src/lincity/modules/residence.cpp:274
+msgid "Employed"
+msgstr "?????????"
 
-#: src/lincity-ng/Dialog.cpp:368
-#, c-format
-msgid "Population  %d  of which  %d  are not housed."
-msgstr "????????? %d ?? ??? %d ?????????."
+#: src/lincity/modules/residence.cpp:276 src/lincity-ng/MpsInterface.cpp:396
+msgid "good"
+msgstr "??????"
 
-#: src/lincity-ng/Dialog.cpp:373
-#, c-format
-msgid "Max population %d  Number evacuated %d Total births %d"
-msgstr ""
-"???????????? ????????? %d , ???-?? ?????????????? %d , ???-?? ???????? %d"
+#: src/lincity/modules/residence.cpp:276
+msgid "poor"
+msgstr "?????"
 
-#: src/lincity-ng/Dialog.cpp:378
-#, c-format
-msgid "Date %s %04d  Money %8d   Tech-level %5.1f (%5.1f)"
-msgstr "???? %s %04d  ?????? %8d ??????? ???????? %5.1f (%5.1f)"
+#: src/lincity/modules/residence.cpp:277
+msgid "Job"
+msgstr "??????"
 
-#: src/lincity-ng/Dialog.cpp:385
-#, c-format
-msgid ".Deaths by starvation %7d   History %8.3f"
-msgstr "??????? ?? ??????        %7d ??????? %8.3f"
+#: src/lincity/modules/residence.cpp:280
+msgid "Health Cvr"
+msgstr "????????"
 
-#: src/lincity-ng/Dialog.cpp:390
-#, c-format
-msgid "Deaths from pollution %7d   History %8.3f"
-msgstr "??????? ?? ??????????? %7d ??????? %8.3f"
+#: src/lincity/modules/residence.cpp:286 src/lincity-ng/MpsInterface.cpp:389
+#: src/lincity-ng/MpsInterface.cpp:517
+msgid "Sport"
+msgstr "?????"
 
-#: src/lincity-ng/Dialog.cpp:394
-#, c-format
-msgid "Years of unemployment %7d   History %8.3f"
-msgstr "??? ??? ?????? %7d  ??????? %8.3f"
-
-#: src/lincity-ng/Dialog.cpp:398
-#, c-format
-msgid "Rockets launched %2d  Successful launches %2d"
-msgstr "????????? ????? %2d ?? ??? ?????? %2d"
-
-#: src/lincity-ng/Dialog.cpp:409
-#, c-format
-msgid ".   Residences %4d         Markets %4d            Farms %4d"
-msgstr ".   ?????????? %4d         ???????? %4d           ????? %4d"
-
-#: src/lincity-ng/Dialog.cpp:420
-#, c-format
-msgid ".    Monuments %4d         Schools %4d     Universities %4d"
-msgstr ".    ????????? %4d         ????? %4d       ???????????? %4d"
-
-#: src/lincity-ng/Dialog.cpp:425
-#, c-format
-msgid ".Fire stations %4d           Parks %4d    Sports fields %4d"
-msgstr ".???????? ??????? %4d        ????? %4d    ????????????? %4d"
-
-#: src/lincity-ng/Dialog.cpp:430
-#, c-format
-msgid "Health centres %4d            Tips %4d         Shanties %4d"
-msgstr "???????? %4d                  ??????? %4d      ?????? %4d"
-
-#: src/lincity-ng/Dialog.cpp:438
-#, c-format
-msgid ".    Windmills %4d     Coal powers %4d     Solar powers %4d"
-msgstr ".    ???????? %4d      ???????? ?? %4d     ????????? ?? %4d"
-
-#: src/lincity-ng/Dialog.cpp:444
-#, c-format
-msgid ".  Substations %4d     Power lines %4d            Ports %4d"
-msgstr ".  ?????????? %4d      ???????????? %4d           ????? %4d"
-
-#: src/lincity-ng/Dialog.cpp:449
-#, c-format
-msgid ".       Tracks %4d           Roads %4d             Rail %4d"
-msgstr ".       ????????? %4d        ??????    %4d         ????? %4d"
-
-#: src/lincity-ng/Dialog.cpp:457
-#, c-format
-msgid ".    Potteries %4d     Blacksmiths %4d            Mills %4d"
-msgstr ".    ????????? %4d     ?????????   %4d            ???????? %4d"
-
-#: src/lincity-ng/Dialog.cpp:462
-#, c-format
-msgid ".   Light inds %4d      Heavy inds %4d        Recyclers %4d"
-msgstr ".   ?????? ???-?? %4d   ??????? ???-?? %4d    ??????????? %4d"
-
-#: src/lincity-ng/Dialog.cpp:467
-#, c-format
-msgid ".   Coal mines %4d       Ore mines %4d         Communes %4d"
-msgstr ".   ???????? ????? %4d   ????? ???? %4d        ?????? %4d"
-
 #: src/lincity-ng/ScreenInterface.cpp:264
 msgid "MM"
 msgstr "??"
@@ -970,94 +870,52 @@
 msgid "$"
 msgstr "???"
 
-#: src/lincity-ng/GameView.cpp:237
-msgid "Minimap: outline map"
-msgstr "????-?????: ?????????"
+#: src/lincity-ng/ButtonPanel.cpp:200
+msgid "Query Tool"
+msgstr "??????"
 
-#: src/lincity-ng/GameView.cpp:240
-msgid "Minimap: unemployment"
-msgstr "????-?????: ??????"
+#: src/lincity-ng/ButtonPanel.cpp:201
+msgid "Bulldozer"
+msgstr "?????????"
 
-#: src/lincity-ng/GameView.cpp:243
-msgid "Minimap: pollution"
-msgstr "????-?????: ???????????"
+#: src/lincity-ng/ButtonPanel.cpp:203
+msgid "Residential: 50 denizens, low birthrate, high deathrate"
+msgstr "??????????: 50 ???????, ?????? ???????????, ??????? ??????????."
 
-#: src/lincity-ng/GameView.cpp:246
-msgid "Minimap: nourishments"
-msgstr "????-?????: ???????"
+#: src/lincity-ng/ButtonPanel.cpp:204
+msgid "Residential: 100 denizens, high birthrate, low deathrate"
+msgstr "??????????: 100 ???????, ??????? ???????????, ?????? ??????????."
 
-#: src/lincity-ng/GameView.cpp:249
-msgid "Minimap: power supply"
-msgstr "????-?????: ??????????????"
+#: src/lincity-ng/ButtonPanel.cpp:205
+msgid "Residential: 200 denizens, high birthrate, high deathrate"
+msgstr "??????????: 200 ???????, ??????? ???????????, ??????? ??????????."
 
-#: src/lincity-ng/GameView.cpp:252
-msgid "Minimap: firedepartment cover"
-msgstr "????-?????: ???????? ??????"
+#: src/lincity-ng/ButtonPanel.cpp:206
+msgid "Residential: 100 denizens, low birthrate, high deathrate"
+msgstr "??????????: 100 ???????, ?????? ???????????, ??????? ??????????."
 
-#: src/lincity-ng/GameView.cpp:255
-msgid "Minimap: sport cover"
-msgstr "????-?????: ?????"
+#: src/lincity-ng/ButtonPanel.cpp:207
+msgid "Residential: 200 denizens, high birthrate, low deathrate"
+msgstr "??????????: 200 ???????, ??????? ???????????, ?????? ??????????."
 
-#: src/lincity-ng/GameView.cpp:258
-msgid "Minimap: medical care"
-msgstr "????-?????: ????????"
+#: src/lincity-ng/ButtonPanel.cpp:208
+msgid "Residential: 400 denizens, high birthrate, high deathrate"
+msgstr "??????????: 400 ???????, ??????? ???????????, ??????? ??????????."
 
-#: src/lincity-ng/GameView.cpp:261
-msgid "Minimap: coal depots"
-msgstr "????-?????: ???????? ?????"
+#: src/lincity-ng/ButtonPanel.cpp:217
+msgid " [Click right for help.]"
+msgstr " [????? ?????? ??? ??????.]"
 
-#: src/lincity-ng/GameView.cpp:264
-msgid "Minimap: traffic density"
-msgstr "????-?????: ??????"
+#: src/lincity-ng/ButtonPanel.cpp:245 src/lincity-ng/ButtonPanel.cpp:288
+#, c-format
+msgid "%s (Techlevel %.1f required.)"
+msgstr "%s (????? %.1f ??????? ???????.)"
 
-#: src/lincity-ng/GameView.cpp:1604
-msgid "Estimated Bulldoze Cost: "
-msgstr "???? ?????: "
+#: src/lincity-ng/ButtonPanel.cpp:254
+#, c-format
+msgid "%s is disabled (loaded old game)."
+msgstr ""
 
-#: src/lincity-ng/GameView.cpp:1606
-msgid "Bulldoze Cost: "
-msgstr "???? ?????: "
-
-#: src/lincity-ng/GameView.cpp:1611
-msgid "n/a"
-msgstr "?/?"
-
-#: src/lincity-ng/GameView.cpp:1629
-msgid "Query Tool: Show information about selected building."
-msgstr "??????: ???????? ?????????? ? ????????? ??????????. "
-
-#: src/lincity-ng/GameView.cpp:1633
-msgid "Bulldozer: remove building -price varies-"
-msgstr "?????????: ??????? ?????? -???? ?????????-"
-
-#: src/lincity-ng/GameView.cpp:1640
-msgid ": Cost to build "
-msgstr ": ????????? ????????? "
-
-#: src/lincity-ng/GameView.cpp:1641
-msgid ", to bulldoze "
-msgstr ", ?????????? "
-
-#: src/lincity-ng/GameView.cpp:1641 src/lincity-ng/GameView.cpp:1644
-msgid "$."
-msgstr "???."
-
-#: src/lincity-ng/GameView.cpp:1643
-msgid " To build "
-msgstr " ??????? "
-
-#: src/lincity-ng/GameView.cpp:1643
-msgid " of them "
-msgstr " ?? "
-
-#: src/lincity-ng/GameView.cpp:1644
-msgid "will cost about "
-msgstr "?????? ?? "
-
-#: src/lincity-ng/MainMenu.cpp:199
-msgid "empty"
-msgstr "?????"
-
 #: src/lincity-ng/MpsInterface.cpp:227
 msgid "build something here"
 msgstr "??? ????? ???????"
@@ -1226,52 +1084,115 @@
 msgid "Cases"
 msgstr "?????"
 
-#: src/lincity-ng/ButtonPanel.cpp:200
-msgid "Query Tool"
-msgstr "??????"
+#: src/lincity-ng/Dialog.cpp:173
+msgid "Launchsite"
+msgstr "?????????"
 
-#: src/lincity-ng/ButtonPanel.cpp:201
-msgid "Bulldozer"
-msgstr "?????????"
+#: src/lincity-ng/Dialog.cpp:352 src/lincity-ng/Dialog.cpp:353
+msgid "----- IN TEST MODE -------"
+msgstr "----- ? ???????? ?????? -------"
 
-#: src/lincity-ng/ButtonPanel.cpp:203
-msgid "Residential: 50 denizens, low birthrate, high deathrate"
-msgstr "??????????: 50 ???????, ?????? ???????????, ??????? ??????????."
+#: src/lincity-ng/Dialog.cpp:355
+#, c-format
+msgid "Game statistics from LinCity-NG Version %s"
+msgstr "?????????? ???? LinCity-NG ?????? %s"
 
-#: src/lincity-ng/ButtonPanel.cpp:204
-msgid "Residential: 100 denizens, high birthrate, low deathrate"
-msgstr "??????????: 100 ???????, ??????? ???????????, ?????? ??????????."
+#: src/lincity-ng/Dialog.cpp:359
+#, c-format
+msgid "Initial loaded scene - %s"
+msgstr "????????? ????? - %s"
 
-#: src/lincity-ng/ButtonPanel.cpp:205
-msgid "Residential: 200 denizens, high birthrate, high deathrate"
-msgstr "??????????: 200 ???????, ??????? ???????????, ??????? ??????????."
+#: src/lincity-ng/Dialog.cpp:364
+#, c-format
+msgid "Economy is sustainable"
+msgstr "????????? ?????????? "
 
-#: src/lincity-ng/ButtonPanel.cpp:206
-msgid "Residential: 100 denizens, low birthrate, high deathrate"
-msgstr "??????????: 100 ???????, ?????? ???????????, ??????? ??????????."
+#: src/lincity-ng/Dialog.cpp:368
+#, c-format
+msgid "Population  %d  of which  %d  are not housed."
+msgstr "????????? %d ?? ??? %d ?????????."
 
-#: src/lincity-ng/ButtonPanel.cpp:207
-msgid "Residential: 200 denizens, high birthrate, low deathrate"
-msgstr "??????????: 200 ???????, ??????? ???????????, ?????? ??????????."
+#: src/lincity-ng/Dialog.cpp:373
+#, c-format
+msgid "Max population %d  Number evacuated %d Total births %d"
+msgstr ""
+"???????????? ????????? %d , ???-?? ?????????????? %d , ???-?? ???????? %d"
 
-#: src/lincity-ng/ButtonPanel.cpp:208
-msgid "Residential: 400 denizens, high birthrate, high deathrate"
-msgstr "??????????: 400 ???????, ??????? ???????????, ??????? ??????????."
+#: src/lincity-ng/Dialog.cpp:378
+#, c-format
+msgid "Date %s %04d  Money %8d   Tech-level %5.1f (%5.1f)"
+msgstr "???? %s %04d  ?????? %8d ??????? ???????? %5.1f (%5.1f)"
 
-#: src/lincity-ng/ButtonPanel.cpp:217
-msgid " [Click right for help.]"
-msgstr " [????? ?????? ??? ??????.]"
+#: src/lincity-ng/Dialog.cpp:385
+#, c-format
+msgid ".Deaths by starvation %7d   History %8.3f"
+msgstr "??????? ?? ??????        %7d ??????? %8.3f"
 
-#: src/lincity-ng/ButtonPanel.cpp:245 src/lincity-ng/ButtonPanel.cpp:288
+#: src/lincity-ng/Dialog.cpp:390
 #, c-format
-msgid "%s (Techlevel %.1f required.)"
-msgstr "%s (????? %.1f ??????? ???????.)"
+msgid "Deaths from pollution %7d   History %8.3f"
+msgstr "??????? ?? ??????????? %7d ??????? %8.3f"
 
-#: src/lincity-ng/ButtonPanel.cpp:254
+#: src/lincity-ng/Dialog.cpp:394
 #, c-format
-msgid "%s is disabled (loaded old game)."
-msgstr ""
+msgid "Years of unemployment %7d   History %8.3f"
+msgstr "??? ??? ?????? %7d  ??????? %8.3f"
 
+#: src/lincity-ng/Dialog.cpp:398
+#, c-format
+msgid "Rockets launched %2d  Successful launches %2d"
+msgstr "????????? ????? %2d ?? ??? ?????? %2d"
+
+#: src/lincity-ng/Dialog.cpp:409
+#, c-format
+msgid ".   Residences %4d         Markets %4d            Farms %4d"
+msgstr ".   ?????????? %4d         ???????? %4d           ????? %4d"
+
+#: src/lincity-ng/Dialog.cpp:420
+#, c-format
+msgid ".    Monuments %4d         Schools %4d     Universities %4d"
+msgstr ".    ????????? %4d         ????? %4d       ???????????? %4d"
+
+#: src/lincity-ng/Dialog.cpp:425
+#, c-format
+msgid ".Fire stations %4d           Parks %4d    Sports fields %4d"
+msgstr ".???????? ??????? %4d        ????? %4d    ????????????? %4d"
+
+#: src/lincity-ng/Dialog.cpp:430
+#, c-format
+msgid "Health centres %4d            Tips %4d         Shanties %4d"
+msgstr "???????? %4d                  ??????? %4d      ?????? %4d"
+
+#: src/lincity-ng/Dialog.cpp:438
+#, c-format
+msgid ".    Windmills %4d     Coal powers %4d     Solar powers %4d"
+msgstr ".    ???????? %4d      ???????? ?? %4d     ????????? ?? %4d"
+
+#: src/lincity-ng/Dialog.cpp:444
+#, c-format
+msgid ".  Substations %4d     Power lines %4d            Ports %4d"
+msgstr ".  ?????????? %4d      ???????????? %4d           ????? %4d"
+
+#: src/lincity-ng/Dialog.cpp:449
+#, c-format
+msgid ".       Tracks %4d           Roads %4d             Rail %4d"
+msgstr ".       ????????? %4d        ??????    %4d         ????? %4d"
+
+#: src/lincity-ng/Dialog.cpp:457
+#, c-format
+msgid ".    Potteries %4d     Blacksmiths %4d            Mills %4d"
+msgstr ".    ????????? %4d     ?????????   %4d            ???????? %4d"
+
+#: src/lincity-ng/Dialog.cpp:462
+#, c-format
+msgid ".   Light inds %4d      Heavy inds %4d        Recyclers %4d"
+msgstr ".   ?????? ???-?? %4d   ??????? ???-?? %4d    ??????????? %4d"
+
+#: src/lincity-ng/Dialog.cpp:467
+#, c-format
+msgid ".   Coal mines %4d       Ore mines %4d         Communes %4d"
+msgstr ".   ???????? ????? %4d   ????? ???? %4d        ?????? %4d"
+
 #: src/lincity-ng/EconomyGraph.cpp:124
 msgid "Mining"
 msgstr "??????"
@@ -1307,3 +1228,95 @@
 #: src/lincity-ng/EconomyGraph.cpp:219
 msgid "You lose."
 msgstr "?? ?????????."
+
+#: src/lincity-ng/MainMenu.cpp:199
+msgid "empty"
+msgstr "?????"
+
+#: src/lincity-ng/GameView.cpp:237
+msgid "Minimap: outline map"
+msgstr "????-?????: ?????????"
+
+#: src/lincity-ng/GameView.cpp:240
+msgid "Minimap: unemployment"
+msgstr "????-?????: ??????"
+
+#: src/lincity-ng/GameView.cpp:243
+msgid "Minimap: pollution"
+msgstr "????-?????: ???????????"
+
+#: src/lincity-ng/GameView.cpp:246
+msgid "Minimap: nourishments"
+msgstr "????-?????: ???????"
+
+#: src/lincity-ng/GameView.cpp:249
+msgid "Minimap: power supply"
+msgstr "????-?????: ??????????????"
+
+#: src/lincity-ng/GameView.cpp:252
+msgid "Minimap: firedepartment cover"
+msgstr "????-?????: ???????? ??????"
+
+#: src/lincity-ng/GameView.cpp:255
+msgid "Minimap: sport cover"
+msgstr "????-?????: ?????"
+
+#: src/lincity-ng/GameView.cpp:258
+msgid "Minimap: medical care"
+msgstr "????-?????: ????????"
+
+#: src/lincity-ng/GameView.cpp:261
+msgid "Minimap: coal depots"
+msgstr "????-?????: ???????? ?????"
+
+#: src/lincity-ng/GameView.cpp:264
+msgid "Minimap: traffic density"
+msgstr "????-?????: ??????"
+
+#: src/lincity-ng/GameView.cpp:1604
+msgid "Estimated Bulldoze Cost: "
+msgstr "???? ?????: "
+
+#: src/lincity-ng/GameView.cpp:1606
+msgid "Bulldoze Cost: "
+msgstr "???? ?????: "
+
+#: src/lincity-ng/GameView.cpp:1611
+msgid "n/a"
+msgstr "?/?"
+
+#: src/lincity-ng/GameView.cpp:1629
+msgid "Query Tool: Show information about selected building."
+msgstr "??????: ???????? ?????????? ? ????????? ??????????. "
+
+#: src/lincity-ng/GameView.cpp:1633
+msgid "Bulldozer: remove building -price varies-"
+msgstr "?????????: ??????? ?????? -???? ?????????-"
+
+#: src/lincity-ng/GameView.cpp:1640
+msgid ": Cost to build "
+msgstr ": ????????? ????????? "
+
+#: src/lincity-ng/GameView.cpp:1641
+msgid ", to bulldoze "
+msgstr ", ?????????? "
+
+#: src/lincity-ng/GameView.cpp:1641 src/lincity-ng/GameView.cpp:1644
+msgid "$."
+msgstr "???."
+
+#: src/lincity-ng/GameView.cpp:1643
+msgid " To build "
+msgstr " ??????? "
+
+#: src/lincity-ng/GameView.cpp:1643
+msgid " of them "
+msgstr " ?? "
+
+#: src/lincity-ng/GameView.cpp:1644
+msgid "will cost about "
+msgstr "?????? ?? "
+
+#: src/lincity/ldsvguts.cpp:148
+msgid "Saving scene"
+msgstr "?????????? ?????????"



From asmbsd at mail.berlios.de  Mon Dec 31 08:55:20 2007
From: asmbsd at mail.berlios.de (asmbsd at BerliOS)
Date: Mon, 31 Dec 2007 08:55:20 +0100
Subject: [Lincity-ng-commit] r1333 - in trunk/data: help/ru locale
Message-ID: <200712310755.lBV7tKsK006512@sheep.berlios.de>

Author: asmbsd
Date: 2007-12-31 08:55:19 +0100 (Mon, 31 Dec 2007)
New Revision: 1333

Modified:
   trunk/data/help/ru/windmill.xml
   trunk/data/locale/ru.po
Log:
Russian translate (mini fix)


Modified: trunk/data/help/ru/windmill.xml
===================================================================
--- trunk/data/help/ru/windmill.xml	2007-12-31 07:37:08 UTC (rev 1332)
+++ trunk/data/help/ru/windmill.xml	2007-12-31 07:55:19 UTC (rev 1333)
@@ -22,6 +22,4 @@
 	<li><a href="tech-level">??????? ???????</a></li>
 	<li><a href="msb-power">???? ??????????????</a></li>
 	<li><a href="powersolar">????????? ??????????????</a></li>
-	
-	
 </Document>

Modified: trunk/data/locale/ru.po
===================================================================
--- trunk/data/locale/ru.po	2007-12-31 07:37:08 UTC (rev 1332)
+++ trunk/data/locale/ru.po	2007-12-31 07:55:19 UTC (rev 1333)
@@ -641,7 +641,7 @@
 
 #: src/lincity/modules/waterwell.cpp:56 src/lincity/modules/waterwell.cpp:44
 msgid "Water_well"
-msgstr ""
+msgstr "??????? ????????"
 
 #: src/lincity/modules/residence.cpp:288 src/lincity/modules/waterwell.cpp:47
 #: src/lincity-ng/MpsInterface.cpp:391



From asmbsd at mail.berlios.de  Mon Dec 31 09:06:05 2007
From: asmbsd at mail.berlios.de (asmbsd at BerliOS)
Date: Mon, 31 Dec 2007 09:06:05 +0100
Subject: [Lincity-ng-commit] r1334 - trunk/data/help/ru
Message-ID: <200712310806.lBV8655U006941@sheep.berlios.de>

Author: asmbsd
Date: 2007-12-31 09:06:04 +0100 (Mon, 31 Dec 2007)
New Revision: 1334

Modified:
   trunk/data/help/ru/waterwell.xml
Log:
Russian translate (mini fix)


Modified: trunk/data/help/ru/waterwell.xml
===================================================================
--- trunk/data/help/ru/waterwell.xml	2007-12-31 07:55:19 UTC (rev 1333)
+++ trunk/data/help/ru/waterwell.xml	2007-12-31 08:06:04 UTC (rev 1334)
@@ -1,7 +1,7 @@
 <?xml version="1.0"?>
 <Document style="helpdocument">
 	<p style="htitle">??????? ????????</p>
-        <p style="hp">???????? ????? ???? ? ????? ???? ????????. Lack of water will have the same consequences as lack of food. Informations is shown in starvation overlay/minimap.</p>
+	<p style="hp">???????? ????? ???? ? ????? ???? ????????. ????????? ???? ? ?????????? ???????? ? ?????????? ???. ?????????? ? ????????? ????? ??????? ?? ?????????.</p>
 
 	<p style="hp">?? ???:</p>
 	<li><a href="food">???</a></li>



From alainb at mail.berlios.de  Tue Dec  4 01:33:21 2007
From: alainb at mail.berlios.de (alainb at BerliOS)
Date: Tue, 04 Dec 2007 00:33:21 -0000
Subject: [Lincity-ng-commit] r1309 - in trunk: . data data/gui data/help
	data/help/en data/locale data/locale/gui src/lincity/modules
	src/tools
Message-ID: <200712040032.lB40WIrL001411@sheep.berlios.de>

Author: alainb
Date: 2007-12-04 01:32:10 +0100 (Tue, 04 Dec 2007)
New Revision: 1309

Added:
   trunk/src/tools/update_po.sh
Removed:
   trunk/data/help/ask-dir.hlp
   trunk/data/help/blacksmith.hlp
   trunk/data/help/bulldoze.hlp
   trunk/data/help/button-index.hlp
   trunk/data/help/button-index2.hlp
   trunk/data/help/button-index3.hlp
   trunk/data/help/coal.hlp
   trunk/data/help/coalmine.hlp
   trunk/data/help/coalmine2.hlp
   trunk/data/help/commune.hlp
   trunk/data/help/cricket.hlp
   trunk/data/help/economy.hlp
   trunk/data/help/export.hlp
   trunk/data/help/farm.hlp
   trunk/data/help/fast.hlp
   trunk/data/help/finance.hlp
   trunk/data/help/firestation.hlp
   trunk/data/help/fonttest.hlp
   trunk/data/help/food.hlp
   trunk/data/help/goods.hlp
   trunk/data/help/health.hlp
   trunk/data/help/housing.hlp
   trunk/data/help/index.hlp
   trunk/data/help/industryh.hlp
   trunk/data/help/industryl.hlp
   trunk/data/help/jobs.hlp
   trunk/data/help/keyboard.hlp
   trunk/data/help/loadgame.hlp
   trunk/data/help/market.hlp
   trunk/data/help/market2.hlp
   trunk/data/help/medium.hlp
   trunk/data/help/menu.hlp
   trunk/data/help/mill.hlp
   trunk/data/help/mini-screen.hlp
   trunk/data/help/monument.hlp
   trunk/data/help/msb-coal.hlp
   trunk/data/help/msb-cricket.hlp
   trunk/data/help/msb-fire.hlp
   trunk/data/help/msb-health.hlp
   trunk/data/help/msb-normal.hlp
   trunk/data/help/msb-pol.hlp
   trunk/data/help/msb-power.hlp
   trunk/data/help/msb-starve.hlp
   trunk/data/help/msb-ub40.hlp
   trunk/data/help/newgame.hlp
   trunk/data/help/opening.hlp
   trunk/data/help/openload.hlp
   trunk/data/help/ore.hlp
   trunk/data/help/oremine.hlp
   trunk/data/help/other-costs.hlp
   trunk/data/help/park.hlp
   trunk/data/help/pause.hlp
   trunk/data/help/pbar.hlp
   trunk/data/help/pollution.hlp
   trunk/data/help/port.hlp
   trunk/data/help/pottery.hlp
   trunk/data/help/powerline.hlp
   trunk/data/help/powerline2.hlp
   trunk/data/help/powerscoal.hlp
   trunk/data/help/powerssolar.hlp
   trunk/data/help/rail.hlp
   trunk/data/help/recycle.hlp
   trunk/data/help/residential.hlp
   trunk/data/help/river.hlp
   trunk/data/help/road.hlp
   trunk/data/help/rocket.hlp
   trunk/data/help/school.hlp
   trunk/data/help/slow.hlp
   trunk/data/help/steel.hlp
   trunk/data/help/substation.hlp
   trunk/data/help/sustain.hlp
   trunk/data/help/tech-level.hlp
   trunk/data/help/tip.hlp
   trunk/data/help/track.hlp
   trunk/data/help/transport.hlp
   trunk/data/help/transport2.hlp
   trunk/data/help/transport3.hlp
   trunk/data/help/transport4.hlp
   trunk/data/help/university.hlp
   trunk/data/help/windmill.hlp
Modified:
   trunk/TODO
   trunk/data/Jamfile
   trunk/data/gui/warning.xml
   trunk/data/help/en/msb-starve.xml
   trunk/data/help/en/residential.xml
   trunk/data/help/en/waterwell.xml
   trunk/data/locale/ca.po
   trunk/data/locale/cs.po
   trunk/data/locale/de.po
   trunk/data/locale/es.po
   trunk/data/locale/fr.po
   trunk/data/locale/gui/ca.po
   trunk/data/locale/gui/cs.po
   trunk/data/locale/gui/de.po
   trunk/data/locale/gui/es.po
   trunk/data/locale/gui/fr.po
   trunk/data/locale/gui/nl.po
   trunk/data/locale/gui/pl.po
   trunk/data/locale/gui/pt_BR.po
   trunk/data/locale/gui/ru.po
   trunk/data/locale/gui/sv.po
   trunk/data/locale/nl.po
   trunk/data/locale/pl.po
   trunk/data/locale/pt_BR.po
   trunk/data/locale/ru.po
   trunk/data/locale/sv.po
   trunk/src/lincity/modules/organic_farm.cpp
Log:
update english help files (waterwell, starvation-overlay, communes, farms, park, residential, index, button-index
update .po files in locale and locale/gui
remove .hlp files (it was used by oldgui)


Modified: trunk/TODO
===================================================================
--- trunk/TODO	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/TODO	2007-12-04 00:32:10 UTC (rev 1309)
@@ -73,9 +73,6 @@
      won't change to anything else. At least the caption is not shown.
 
 --Game--
- [H] Check that info obtained with query tool exists/are correct for
-        waterwell, residences, farms, communes, parks
-
  [M] Print out more debug infos that user can send in with debug reports:
      architecture?, SDL version, opengl driver name, SDL software driver name,
      SDL sound driver name, screen resolution

Modified: trunk/data/Jamfile
===================================================================
--- trunk/data/Jamfile	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/Jamfile	2007-12-04 00:32:10 UTC (rev 1309)
@@ -68,7 +68,7 @@
 if $(build) = $(target)
 {
     DoXmlGetText locale/gui/messages.pot : [ Wildcard gui : *.xml ] ;
-    DoXmlGetText locale/messages.pot : [ Wildcard gui : *.xml ] ;
+    #DoXmlGetText locale/messages.pot : [ Wildcard gui : *.xml ] ;
 }
 
 # Stuff from old lincity, still needed for the lib at the moment

Modified: trunk/data/gui/warning.xml
===================================================================
--- trunk/data/gui/warning.xml	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/gui/warning.xml	2007-12-04 00:32:10 UTC (rev 1309)
@@ -5,7 +5,7 @@
 <Window xmlns="http://lincity-ng.berlios.de/gui" border="5" titlesize="25" width="700" height="200">
   <title>
     <Document>
-      <Paragraph style="title" translatable="yes" halign="center" name="DialogTitle">Not Allowed</Paragraph>
+      <Paragraph style="title" translatable="yes" halign="center" name="DialogTitle">Warning</Paragraph>
     </Document>
   </title>
   <title-background>

Deleted: trunk/data/help/ask-dir.hlp
===================================================================
--- trunk/data/help/ask-dir.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/ask-dir.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,11 +0,0 @@
-text -1 33 LinCity is about to create
-text -1 45 a (hidden) directory in
-text -1 57 which to save your games.
-
-text -1 70 The path is
-
-
-tcolour 88 0
-tbutton -1 170 opening.hlp Yes I want to create this directory
-tcolour 3 0
-tbutton -1 190 return1 NO, get me out of here

Deleted: trunk/data/help/blacksmith.hlp
===================================================================
--- trunk/data/help/blacksmith.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/blacksmith.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,28 +0,0 @@
-text -1 15 Blacksmiths
-
-text -1 30 Blacksmiths turn steel and coal into goods.
-text -1 40 You will use them mostly early on in the
-text -1 50 game. They also use jobs, of course.
-
-text -1 65 Before you have steel works, you must rely
-text -1 75 on the steel produced by communes. 5 or 6
-text -1 85 per blacksmith is recommended.
-
-text -1 120 Blacksmiths do not have to be connected
-text -1 130 to transport. They can get all they need
-text -1 140 from markets that are within range.
-
-text -1 155 You can see when a blacksmith is working
-text -1 165 in the usual way, by clicking on it, and
-text -1 175 every so often the animation will come
-text -1 185 to life.
-
-text 50 220 This is a blacksmith
-icon 240 210 blacksmith1.csi
-
-text 20 300 See also:
-
-tbutton 100 300 market.hlp Markets
-tbutton 100 320 ore.hlp Ore
-tbutton 100 340 commune.hlp Communes
-tbutton 100 360 steel.hlp Steel

Deleted: trunk/data/help/bulldoze.hlp
===================================================================
--- trunk/data/help/bulldoze.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/bulldoze.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,25 +0,0 @@
-text -1 15 Bulldoze
-text -1 40 To demolish an area, you select the
-text -1 50 bulldoze button, then click on the area
-text -1 60 you wish to get rid of.
-text -1 75 Demolition costs money. When you build
-text -1 85 an area, the cost to build it and demolish
-text -1 95 it are shown at the botton left of the screen.
-
-text -1 110 Some things, such as monuments, are very
-text -1 120 expensive to demolish. The cost of
-text -1 130 demolition takes acount not only of the
-text -1 140 physical cost of disposal, but also the
-text -1 150 political cost. For example, to demolish a
-text -1 160 monument, you will have protesters and court
-text -1 170 costs as well.
-
-text -1 185 At this time, demolishing river areas are the
-text -1 195 only way to cross them with transport. Think
-text -1 205 of the demolished river with transport crossing
-text -1 215 the cleared area as a bridge.
-
-text 50 280 See also:
-tbutton 50 300 transport.hlp Transport
-tbutton 50 320 river.hlp Rivers
-

Deleted: trunk/data/help/button-index.hlp
===================================================================
--- trunk/data/help/button-index.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/button-index.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,54 +0,0 @@
-text -1 5 Select button index page 1 of 3
-text -1 20 Click on a button for a help page
-
-text 80 54 Power lines
-icon 50 50 powerline-button.csi
-button 48 48 20 20 powerline.hlp
-
-text 80 78 Solar Power station
-icon 50 74 powerssolar-button.csi
-button 48 72 20 20 powerssolar.hlp
-
-text 80 102 Substation
-icon 50 98 substation-button.csi
-button 48 96 20 20 substation.hlp
-
-text 80 126 Residential area
-icon 50 122 residence-button.csi
-button 48 120 20 20 residential.hlp
-
-text 80 150 Farm
-icon 50 146 organic-farm-button.csi
-button 48 144 20 20 farm.hlp
-
-text 80 174 Market
-icon 50 170 market-button.csi
-button 48 168 20 20 market.hlp
-
-text 80 198 Bulldoze
-icon 50 194 buldoze-button.csi
-button 48 192 20 20 bulldoze.hlp
-
-text 80 222 Track (transport)
-icon 50 218 tracklr.csi
-button 48 216 20 20 track.hlp
-
-text 80 246 Coalmine
-icon 50 242 coalmine-button.csi
-button 48 240 20 20 coalmine.hlp
-
-text 80 270 Railway
-icon 50 266 rail-button.csi
-button 48 264 20 20 rail.hlp
-
-text 80 294 Coal fired power station
-icon 50 290 powerscoal-button.csi
-button 48 288 20 20 powerscoal.hlp
-
-text 80 318 Road
-icon 50 314 road-button.csi
-button 48 312 20 20 road.hlp
-
-
-text -1 380 Next Page
-button -1 376 84 14 button-index2.hlp

Deleted: trunk/data/help/button-index2.hlp
===================================================================
--- trunk/data/help/button-index2.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/button-index2.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,54 +0,0 @@
-text -1 5 Select button index page 2 of 3
-text -1 20 Click on a button for a help page
-
-text 80 54 Light industrial areas
-icon 50 50 industryl-button.csi
-button 48 48 20 20 industryl.hlp
-
-text 80 78 University
-icon 50 74 university-button.csi
-button 48 72 20 20 university.hlp
-
-text 80 102 Commune
-icon 50 98 commune-button.csi
-button 48 96 20 20 commune.hlp
-
-text 80 126 Ore mine
-icon 50 122 oremine-button.csi
-button 48 120 20 20 oremine.hlp
-
-text 80 150 Import
-icon 50 146 im_port-button.csi
-button 48 144 20 20 export.hlp
-
-text 80 174 Export
-icon 50 170 ex_port-button.csi
-button 48 168 20 20 export.hlp
-
-text 80 198 Heavy industry (steel works)
-icon 50 194 industryh-button.csi
-button 48 192 20 20 industryh.hlp
-
-text 80 222 Parkland
-icon 50 218 parkland-button.csi
-button 48 216 20 20 park.hlp
-
-text 80 246 Recycle centre
-icon 50 242 recycle-button.csi
-button 48 240 20 20 recycle.hlp
-
-text 80 270 Water/Rivers
-icon 50 266 water-button.csi
-button 48 264 20 20 river.hlp
-
-text 80 294 Health Centre
-icon 50 290 health-button.csi
-button 48 288 20 20 health.hlp
-
-text 80 318 Rocket Launch Pad
-icon 50 314 rocket-button.csi
-button 48 312 20 20 rocket.hlp
-
-
-text -1 364 Next Page
-button -1 360 84 14 button-index3.hlp

Deleted: trunk/data/help/button-index3.hlp
===================================================================
--- trunk/data/help/button-index3.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/button-index3.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,34 +0,0 @@
-text -1 5 Select button index page 3 of 3
-text -1 20 Click on a button for a help page
-
-text 80 54 Windmill
-icon 50 50 windmill-button.csi
-button 48 48 20 20 windmill.hlp
-
-text 80 78 Monument
-icon 50 74 monument-button.csi
-button 48 72 20 20 monument.hlp
-
-text 80 102 School
-icon 50 98 school-button.csi
-button 48 96 20 20 school.hlp
-
-text 80 126 Blacksmith
-icon 50 122 blacksmith-button.csi
-button 48 120 20 20 blacksmith.hlp
-
-text 80 150 Mill
-icon 50 146 mill-button.csi
-button 48 144 20 20 mill.hlp
-
-text 80 174 Pottery
-icon 50 170 pottery-button.csi
-button 48 168 20 20 pottery.hlp
-
-text 80 198 Fire station
-icon 50 194 firestation-button.csi
-button 48 192 20 20 firestation.hlp
-
-text 80 222 Cricket pitch
-icon 50 218 cricket-button.csi
-button 48 216 20 20 cricket.hlp

Deleted: trunk/data/help/coal.hlp
===================================================================
--- trunk/data/help/coal.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/coal.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,28 +0,0 @@
-text -1 15 Coal
-
-text -1 30 Coal is used by coal fired power stations
-text -1 40 to make electricity (power). It is also
-text -1 50 used by potteries, mills and blacksmiths in
-text -1 60 the process of making goods. Heavy industry
-text -1 70 (steel works) use coal when they cannot
-text -1 80 get electricity.
-
-text -1 95 Coal is dug from under the ground by
-text -1 105 coal mines. There is a finite coal
-text -1 115 reserve which you can see with use of
-text -1 125 the coal reserve button (see coal mines).
-
-text -1 140 Communes provide a little 'coal' as well.
-text -1 150 Really this is charcoal make from copiced
-text -1 160 woods. They only provide small amounts,
-text -1 170 enough for a few potteries and blacksmiths.
-
-text 50 300 See also:
-tbutton 50 320 coalmine.hlp Coal mines
-tbutton 50 340 commune.hlp Communes
-tbutton 150 320 pottery.hlp Potteries
-tbutton 150 340 blacksmith.hlp Blacksmiths
-
-
-
-

Deleted: trunk/data/help/coalmine.hlp
===================================================================
--- trunk/data/help/coalmine.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/coalmine.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,47 +0,0 @@
-text -1 15 Coal mine - page 1 of 2
-text -1 30 Coal mines dig coal from under the ground.
-text -1 40 There must be a coal vein close to the mine.
-text -1 50 To see where the veins are, you can click
-text -1 60 on the coal button just above the mini screen.
-
-text 100 80 It looks like this
-icon 260 75 ms-coal-button.csi
- 
-text -1 95 The first time you use this button, it will
-text -1 105 cost you 1 million. After that it is free.
-text -1 120 You don't need to use this button, but you
-text -1 130 will have to find the coal by trial and error.
-
-text -1 145 Coal mines need jobs to dig coal.
-
-icon 120 200 coalmine-full.csi
-icon 104 200 roadlr.csi
-icon 88 200 roadlr.csi
-icon 72 200 roadlr.csi
-icon 56 200 roaddr.csi
-/icon 40 200 roaddr.csi
-icon 40 216 powerscoal-full.csi
-
-icon 120 184 raildr.csi
-icon 136 184 raillr.csi
-icon 150 184 raillr.csi
-icon 166 184 raillr.csi
-icon 180 184 raillr.csi
-
-text 210 190 This shows a coal fired
-text 210 200 power station connected
-text 210 210 to a coalmine with
-text 210 220 a road.
-text 210 235 A railway is coming out
-text 210 245 of the top gate of the
-text 210 255 coalmine and going off
-text 210 265 to the right.
-
-text 120 270 Coalmine
-tbutton 42 285 powerscoal.hlp Coal PS
-
-text -1 310 The graphics show the amount of coal
-text -1 320 already dug but not put onto transport.
-text -1 330 The above coal mine has maximum stock.
- 
-tbutton -1 370 coalmine2.hlp More about coal mines

Deleted: trunk/data/help/coalmine2.hlp
===================================================================
--- trunk/data/help/coalmine2.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/coalmine2.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,22 +0,0 @@
-text -1 15 Coal mine - page 2 of 2
-
-text -1 45 The graphics show the amount of coal
-text -1 55 already dug but not put onto transport.
-text -1 65 The following coal mines show the stock
-text -1 75 levels, from left to right, empty to full.
-
-icon 40 100 coalmine-empty.csi
-icon 125 100 coalmine-low.csi
-icon 210 100 coalmine-med.csi
-icon 295 100 coalmine-full.csi
-
-text -1 200 Clicking on a coal mine will show you,
-text -1 210 in the mappoint stats window, the coal stock
-text -1 220 at the pit, and, more importantly, the
-text -1 230 coal reserve available to be dug.
-
-text 40 280 See also:
-tbutton 40 300 coal.hlp Coal
-tbutton 40 320 transport.hlp Transport
-
-tbutton -1 360 button-index.hlp Back to button index

Deleted: trunk/data/help/commune.hlp
===================================================================
--- trunk/data/help/commune.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/commune.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,44 +0,0 @@
-text -1 15 Commune
-
-text -1 30 Communes (for want of a better name) are
-text -1 40 areas where charcoal burners coppice woods
-text -1 50 to make charcoal (the same as coal here).
-text -1 60 They also produce small amounts of ore
-text -1 70 and steel.
-
-text -1 140 You will probably need a 'few' communes to
-text -1 150 provide enough coal and steel for areas such
-text -1 160 as potteries, blacksmiths and mills.
-
-icon 40 200 tracklr.csi
-icon 56 200 tracklr.csi
-icon 72 200 tracklr.csi
-icon 88 200 trackldr.csi
-icon 88 216 commune1.csi
-icon 104 200 tracklr.csi
-icon 120 200 tracklr.csi
-icon 136 200 tracklr.csi
-icon 152 200 tracklr.csi
-icon 168 200 tracklr.csi
-icon 184 200 tracklr.csi
-icon 200 200 tracklr.csi
-icon 216 200 tracklr.csi
-icon 232 200 trackldr.csi
-icon 232 216 trackur.csi
-icon 248 200 trackldr.csi
-icon 248 216 commune1.csi
-icon 264 200 tracklr.csi
-icon 280 200 tracklr.csi
-icon 296 200 tracklr.csi
-icon 310 200 tracklr.csi
-
-text -1 300 Communes can connect to transport at
-text -1 310 any point around it, not only to the gate.
-
-
-text 25 342 See also:
-tbutton 120 340 pottery.hlp Potteries
-tbutton 230 340 blacksmith.hlp Blacksmiths
-tbutton 50 360 mill.hlp Mills
-tbutton 120 360 oremine.hlp Ore mines
-tbutton 230 360 steel.hlp Steel

Deleted: trunk/data/help/cricket.hlp
===================================================================
--- trunk/data/help/cricket.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/cricket.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,44 +0,0 @@
-text -1 15 Cricket grounds
-
-text -1 30 Cricket grounds provide sport and
-text -1 40 entertainment for your residents.
-text -1 50 They need goods and jobs to work.
-text -1 60 They do not have
-text -1 70 to be connected to transport, if not,
-text -1 80 they do have to be within range of a
-text -1 90 market that can supply the jobs and goods.
-text -1 100 They also cost money to run.
-
-text -1 115 When you put a cricket ground in, it does
-text -1 125 not start straight away. There is usually a
-text -1 135 three month wait before cricket cover is
-text -1 145 provided.
-
-text -1 155 To see the range that your cricket grounds
-text -1 165 cover, click on the cricket button
-text -1 175 above the 'mini screen'. Areas that have
-text -1 185 cricket cover are displayed as normal, areas
-text -1 195 not covered are just dark green.
-
-text -1 210 The cricket button above the
-text 80 225 mini-screen looks like this
-icon 306 221 cricket-button.csi
-
-text -1 240 Cricket grounds increase the desirability
-text -1 250 of residential areas within their range.
-
-text 20 270 See also:
-tbutton 100 270 mini-screen.hlp Mini-Screen
-tbutton 100 290 goods.hlp Goods
-tbutton 100 310 market.hlp Markets
-tbutton 100 330 jobs.hlp Jobs
-
-text 220 270 Cricket grounds
-text 220 280 go through an
-text 220 290 animation sequence
-text 220 300 every month to
-text 220 310 show that they
-text 220 320 are working.
-
-text 50 360 This is a cricket ground
-icon 260 350 cricket1.csi

Deleted: trunk/data/help/economy.hlp
===================================================================
--- trunk/data/help/economy.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/economy.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,26 +0,0 @@
-text -1 70 This is the economy window.
-
-text -1 100 This shows 4 different economic factors
-text -1 110 with graphs.
-
-text -1 130 The brown line represents your population.
-text -1 140 It is shown as a log scale.
-
-text -1 160 The blue line represents the demand for
-text -1 170 housing. The height of the graph is
-text -1 180 proportional to the square root of the
-text -1 190 'unhoused' population.
-
-text -1 210 The solid yellow 'bars' show that there is
-text -1 220 unemployment. The scale of this graph
-text -1 230 changes with your population. This graph
-text -1 240 is solid to draw your attention to it.
-
-text -1 260 The solid red 'bars' show that there is
-text -1 270 starvation. The scale of this graph
-text -1 280 changes with your population. This graph
-text -1 290 is solid to draw your attention to it.
-
-text -1 310 The unemployment bars are drawn over the
-text -1 320 top of the two lines. The starvation bars
-text -1 330 are drawn over everything else.

Modified: trunk/data/help/en/msb-starve.xml
===================================================================
--- trunk/data/help/en/msb-starve.xml	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/en/msb-starve.xml	2007-12-04 00:32:10 UTC (rev 1309)
@@ -3,8 +3,9 @@
 	<p style="htitle">Starvation overlay</p>
 	<img src="images/gui/mapview/roundbuttons/round_food.png" halign="center"/>
 	<p style="hp">The starvation mini screen shows only residential areas.</p>
-	<p style="hp">Bright green means that there is enough food in that residential area. Darker green and bright red show increasingly severe starvation in each residential area shown.</p>
-	<p style="hp">Left click on the mini screen to reposition the main window. Left click on the mini screen title to choose a different mini screen view. Toggle overlay mode by pressing 'v' or middle click on the mini screen title.</p>
+        <p style="hp">Bright green means that there is enough food (from market) and water (in the range of a water well) in that residential area. Bright red shows starvation in each residential area shown.</p>
+        <p style="hp">Waterwell cover is shown in dark blue</p>
+	<p style="hp">Left click on the mini screen to reposition the main window. Toggle overlay mode by pressing 'v' or use the big button "overlay".</p>
 	
 	<p style="hsubtitle">See also:</p>
 	<li><a href="mini-screen">Minimap</a></li>

Modified: trunk/data/help/en/residential.xml
===================================================================
--- trunk/data/help/en/residential.xml	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/en/residential.xml	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,7 +1,8 @@
 <?xml version="1.0"?>
 <Document style="helpdocument">
 	<p style="htitle">Residential area</p>
-	<p style="hp">This is where people live. To encourage people to live in this area they must be fed. It also helps to provide them with work and goods to buy. They must be within range of a market or connected to transport. There are 3 different types of residential areas: Low, Medium and High density housing. These have different birth and death rates associated with them. This gives you some control over your population.</p>
+        <p style="hp">This is where people live. To encourage people to live in this area they must be fed (be within the range of a water well and get food from markets or transports). It also helps to provide them with work and goods to buy. They must be within range of a market or connected to transport (like most buildings).</p>
+        <p style="hp">There are 3 different types of residential areas: Low, Medium and High density housing. These have different birth and death rates associated with them. This gives you some control over your population.</p>
 	<p style="hp">Later in the game, if you have sufficient technology, you can build more 'modern' housing, even tower blocks.</p>
 
 	<p style="hp">This is a low density housing (hightech)</p>
@@ -19,6 +20,7 @@
 
 	<p style="hsubtitle">See also:</p>
 	<li><a href="market">Market</a></li>
+	<li><a href="transport">Transport</a></li>
         <li><a href="waterwell">Water well</a></li>
 </Document>
 

Modified: trunk/data/help/en/waterwell.xml
===================================================================
--- trunk/data/help/en/waterwell.xml	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/en/waterwell.xml	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,7 +1,6 @@
 <?xml version="1.0"?>
 <Document style="helpdocument">
 	<p style="htitle">Water well</p>
-	<p style="hp"><b> Work in progress. May crash/hang ... (no warranty: reread the GPL license ;-)</b></p>
         <p style="hp">Provide water to houses within the range. Lack of water will have the same consequences as lack of food. Informations is shown in starvation overlay/minimap.</p>
 
 	<p style="hp">See also:</p>

Deleted: trunk/data/help/export.hlp
===================================================================
--- trunk/data/help/export.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/export.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,48 +0,0 @@
-text -1 15 Import and export areas
-
-text -1 30 Importing and exporting work in the same
-text -1 40 way except that the first costs you money
-text -1 50 and the second makes you money. For this
-text -1 60 reason, only exporting will be dealt with
-text -1 70 in detail.
-
-text -1 85 To export, you connect transport to the
-text -1 95 gate that deals with that product. For
-text -1 105 example, to export ore, you would connect
-text -1 115 a road, perhaps, that has ore on it, to
-text -1 125 the ore 'gate'. The example below shows a
-text -1 135 road exporting ore.
-
-icon 100 170 ex_port.csi
-icon 68 186 roadlr.csi
-icon 84 186 roadlr.csi
-icon 164 154 waterd.csi
-icon 164 170 waterlud.csi
-icon 164 186 waterlud.csi
-icon 164 202 waterlud.csi
-icon 164 218 waterlur.csi
-icon 180 218 waterl.csi
-
-text 200 170 They MUST be connected
-text 200 180 to rivers all along
-text 200 190 the right hand side.
-tbutton 230 205 river.hlp See rivers
-
-text -1 250 The gates, from top to bottom, export coal,
-text -1 260 ore, goods and steel.
-
-text -1 275 The export area will take as much as it is
-text -1 285 given. If you need to export, but want to 
-text -1 295 restrict the amount, you may want to use a
-text -1 305 type of transport with less capacity, use a
-text -1 315 long piece or pass the product through a market.
-text -1 325 You will need to experiment to get the right
-text -1 335 transport configuration.
-
-text 30 362 See also:
-tbutton 110 360 transport.hlp Transport
-tbutton 110 380 market.hlp Markets
-tbutton 220 360 coal.hlp Coal
-tbutton 290 360 ore.hlp Ore
-tbutton 220 380 goods.hlp Goods
-tbutton 290 380 steel.hlp Steel

Deleted: trunk/data/help/farm.hlp
===================================================================
--- trunk/data/help/farm.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/farm.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,37 +0,0 @@
-text -1 15 Farms
-text -1 30 Farms grow food for people to eat, and to
-text -1 40 supply the raw materials for mills. Farmers
-text -1 50 can sell food to markets. They deliver it
-text -1 60 by tractor, so do not need transport. However
-text -1 70 they can sell to transport if you wish.
-text -1 90 The left figure shows a market with a farm
-text -1 100 supplying food to it. The right figure shows
-text -1 110 almost the same situation, but the farm is
-text -1 120 not within range. The left market is full
-text -1 130 of food, the right one has none.
-
-icon 28 152 farm3.csi
-icon 103 160 market-full.csi
-icon 210 152 farm7.csi
-icon 338 160 market-low.csi
-
-tbutton 98 200 market.hlp Market
-text 170 180 Farm
-
-text -1 230 Farms need jobs to produce more than a minimal
-text -1 240 amount of food. Giving the farm power also
-text -1 250 increases the amount of food produced.
-text -1 260 Power, also includes 'old' style windmills
-text -1 270 that help the food to be processed, thus
-text -1 280 cutting down on waste.
- 
-text -1 295 Note: In the above example there are no jobs
-text -1 305 being supplied to the markets
-text -1 315 so they would not produce much food.
-
-text 50 342 See also:
-tbutton 150 340 tech-level.hlp Tech-level
-tbutton 250 340 transport.hlp Transport
-tbutton 150 360 windmill.hlp Windmill
-tbutton 250 360 food.hlp Food
-

Deleted: trunk/data/help/fast.hlp
===================================================================
--- trunk/data/help/fast.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/fast.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,9 +0,0 @@
-
-text -1 200 This is the fast speed button. 
-text -1 210 It causes the game to run as
-text -1 220 fast as possible. 
-text -1 230 On slow machines the speed buttons
-text -1 240 may have no effect.
-text -1 255 Care should be taken when using
-text -1 265 fast mode on fast machines;
-text -1 275 'situations' can develop vary fast!

Deleted: trunk/data/help/finance.hlp
===================================================================
--- trunk/data/help/finance.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/finance.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,26 +0,0 @@
-text -1 30 This is the finance window.
-
-text 20 60 The finance window is updated every January 1st. 
-text 20 70 The figures below 'income' and 'expend' show your 
-text 20 80 income and expenditure for the previous year.
-
-text 20 100 The 'Tot' figure is the amount of money in your 
-text 20 110 account. There are certain things you cannot do
-text 20 120 when you are 'in the red'.
-
-text 20 150 The meanings on the abbreviations are:
-
-text 20 160 Income:
-text 100 170 IT = Income tax.
-text 100 180 CT = Coal tax.
-text 100 190 GT = Goods tax.
-text 100 200 XP = Export tax.
-
-text 20 220 Expenditure:
-text 100 230 OC = Other costs.
-text 100 240 UC = Unemployment costs.
-text 100 250 TC = Transport costs.
-text 100 260 IP = Import costs.
-
-text 20 310 Left clicking on this window will cycle through
-text 20 320 windows for finance, other costs and housing.

Deleted: trunk/data/help/firestation.hlp
===================================================================
--- trunk/data/help/firestation.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/firestation.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,44 +0,0 @@
-text -1 15 Fire stations
-
-text -1 30 Fire stations prevent the start and
-text -1 40 spread of fire with in the range that
-text -1 50 they cover. They need to be supplied with
-text -1 60 goods and jobs to work. They do NOT have
-text -1 70 to be connected to transport, they do,
-text -1 80 of course, have to be within range of a
-text -1 90 market that can supply the jobs and goods.
-text -1 100 They also cost money to run.
-
-text -1 115 When you put a fire station in, it does
-text -1 125 not start straight away. There is usually a
-text -1 135 three month wait before fire cover is provided.
-/text -1 145 provided.
-
-text -1 155 To see the area that your fire stations
-text -1 165 cover, click on the fire station button
-text -1 175 above the 'mini screen'. Areas that have
-text -1 185 fire cover are displayed as normal, areas
-text -1 195 not covered are just dark green.
-
-text -1 210 The fire station button above the
-text 80 225 mini-screen looks like this
-icon 306 221 firestation-button.csi
-
-text -1 240 Fire stations increase the desirability of
-text -1 250 residential areas within their range.
-
-text 20 270 See also:
-tbutton 100 270 mini-screen.hlp Mini-Screen
-tbutton 100 290 goods.hlp Goods
-tbutton 100 310 market.hlp Markets
-tbutton 100 330 jobs.hlp Jobs
-
-text 220 270 Fire stations go
-text 220 280 through an
-text 220 290 animation sequence
-text 220 300 every month to
-text 220 310 show that they
-text 220 320 are working.
-
-text 60 360 This is a fire station
-icon 260 350 firestation1.csi

Deleted: trunk/data/help/fonttest.hlp
===================================================================
--- trunk/data/help/fonttest.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/fonttest.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,20 +0,0 @@
-text -1 10 Font test page.
-
-text -1 30 Your font looks like this:
-text -1 40 --------------------------
-
-text -1 60 !"#$%&'()*+,-./0
-text -1 75 123456789:;<=>?@
-text -1 90 ABCDEFGHIJKLMNOP
-text -1 105 QRSTUVWXYZ[\]^_`
-text -1 120 abcdefghijklmnop
-text -1 135 qrstuvwxyz{|}~?
-text -1 150 ????????????????
-text -1 165 ????????????????
-text -1 180 ????????????????
-text -1 195 ????????????????
-text -1 210 ????????????????
-text -1 225 ????????????????
-text -1 240 ????????????????
-text -1 255 ???????????????
-

Deleted: trunk/data/help/food.hlp
===================================================================
--- trunk/data/help/food.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/food.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,14 +0,0 @@
-
-text -1 15 Food
-
-text -1 100 Food is grown in farms or can be
-text -1 110 imported through a port.
-
-text -1 125 Your people need food in order to
-text -1 135 survive. If you starve them, they
-text -1 145 will move away from that area and
-text -1 155 some may starve to death.
-
-text -1 170 Mills also use food. They turn, say,
-text -1 180 cotton into cloths. They can use a
-text -1 190 lot of food - beware.

Deleted: trunk/data/help/goods.hlp
===================================================================
--- trunk/data/help/goods.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/goods.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,15 +0,0 @@
-
-text -1 15 Goods
-
-text -1 100 Goods are needed for most areas
-text -1 110 to work. People also like lots
-text -1 120 of them, and are attracted to
-text -1 130 areas where you can get them.
-
-text -1 145 Goods are taxed, so making lots
-text -1 155 will help your finances.
-
-text -1 170 Goods are produced by Potteries,
-text -1 180 Blacksmiths, Mills and Light
-text -1 190 industry.
-

Deleted: trunk/data/help/health.hlp
===================================================================
--- trunk/data/help/health.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/health.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,41 +0,0 @@
-text -1 15 Health Centre
-
-text -1 30 Health centres provide health cover for
-text -1 40 residences. They act in an area of about
-text -1 50 10 'squares' in each direction.
-
-text -1 65 Health cover makes the residence a more
-text -1 75 desirable place to live, less people die
-text -1 85 from pollution related illness and the
-text -1 95 people living there are more efficient
-text -1 105 at providing jobs to the surrounding
-text -1 115 areas. (They spend less time off sick.)
-
-text -1 130 Health centres are very expensive, 60000
-text -1 140 per year. However, they reduce the cost
-text -1 150 of 'unnatural deaths' and can provide
-text -1 160 extra income tax (as long as there are
-text -1 170 places for the people to work).
-
-text -1 185 After you put a health centre in, it
-text -1 195 takes three months for it to become
-text -1 205 active. They use goods. They don't,
-text -1 215 however, use jobs as such, these are
-text -1 225 taken into account when calculating the
-text -1 235 extra jobs created by the reduction in
-text -1 245 sickness of the surrounding areas.
-
-text -1 260 Health centres do not need to be connected
-text -1 270 transport, if not, they need to be within
-text -1 280 range of a market.
-
-text -1 295 To see the coverage of health cover, click
-text -1 305 on the health icon above the 'mini screen'
-text -1 315 (bottom left of centre on the display). The
-text -1 325 areas that show up as normal have health
-text -1 335 cover.
-
-text -1 350 Both the select and the 'mini screen'
-text -1 365 buttons look like this.
-
-icon 300 362 health-button.csi

Deleted: trunk/data/help/housing.hlp
===================================================================
--- trunk/data/help/housing.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/housing.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,29 +0,0 @@
-text -1 30 This is the people window.
-
-text 20 60 The window shows 7 statistics:
-
-text 20 80 1.  Pop - this shows the population
-text 60 90 in your residences. This figure does not
-text 60 100 include the homeless.
-
-text 20 120 2.  Housed - this shows the total number of people
-text 60 130 in your city that live in residences.
-
-text 20 150 3.  Housed % - this shows the percentage
-text 60 160 of your city that live in residences.
-
-text 20 180 4.  Shanties - this shows the number of shanty 
-text 60 190 towns in your city.
-
-text 20 210 5.  Unn Dths - this shows the number
-text 60 220 of people that died through starvation
-text 60 230 or from pollution, in the last month.
-
-text 20 250 6.  Unemp % - this shows the percentage
-text 60 260 of your population that is unemployed.
-
-text 20 280 7.  Starv % - this shows the percentage 
-text 60 290 of your population that is starving.
-
-text 20 310 Left clicking on this window will cycle through
-text 20 320 windows for finance, other costs and housing.

Deleted: trunk/data/help/index.hlp
===================================================================
--- trunk/data/help/index.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/index.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,17 +0,0 @@
-text -1 5 Welcome to Lincity help
-
-text -1  90 You can click on words within boxes to
-text -1 100 select a help page on that topic.
-text -1 110 Like the 'keyboard' button below.
-
-tbutton -1 180 keyboard.hlp Using the KEYBOARD
-tbutton -1 200 button-index.hlp Click here to see button index page
-tbutton -1 220 opening.hlp Click here to see the opening screen
-tbutton -1 240 fonttest.hlp View current font
-
-text -1 290 While playing the game, you can get
-text -1 300 context sensitive help with most things
-text -1 310 using the right mouse button.
-
-text -1 325 Also, the first time you select each area
-text -1 335 its help screen will be shown.

Deleted: trunk/data/help/industryh.hlp
===================================================================
--- trunk/data/help/industryh.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/industryh.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,54 +0,0 @@
-text -1 15 Heavy industry (steel works)
-
-text -1 30 Steel works produce steel from ore, power
-text -1 40 and jobs. Ore is obtained directly from the
-text -1 50 connected transport, the steel is placed onto
-text -1 60 the transport as well. Jobs are obtained from
-text -1 70 a local market.
-text -1 80 Transport connects to the top left corner.
-
-text -1 95 Power can be got to the steel works in two
-text -1 105 ways. The first is from coal, which is
-text -1 115 obtained directly from connected transport.
-text -1 125 The second is from electricity, you must
-text -1 135 have one, or more, active substations within
-text -1 145 range of the steel works. (Windmills do NOT
-text -1 155 supply power to steel works.)
-
-text -1 170 A typical steel works is shown below.
-text 80 185 Steel works produce
-tbutton 240 183 pollution.hlp Pollution
-
-icon 140 220 industryhm1.csi
-icon 124 220 raillr.csi
-icon 108 220 raillr.csi
-text 20 220 Ore and
-text 20 230 steel come 
-text 20 240 by rail.
-
-icon 140 300 market-full.csi
-icon 124 316 roadlr.csi
-icon 108 316 roadlr.csi
-text 20 300 A market to
-text 30 310 supply
-text 30 320 jobs.
-
-icon 240 226 substation-G.csi
-icon 240 210 powerlrdl.csi
-icon 256 210 powerlhl.csi
-icon 272 210 powerlhd.csi
-icon 288 210 powerlhl.csi
-icon 304 210 powerlhl.csi
-icon 320 210 powerlhd.csi
-icon 336 210 powerlhl.csi
-text 280 235 Power from a
-text 280 245 power station.
-
-tbutton 218 262 substation.hlp Substation
-tbutton 180 310 market.hlp Market
-
-text 20 362 See also:
-tbutton 100 360 transport.hlp Transport
-tbutton 200 360 power.hlp Power
-tbutton 265 360 coal.hlp Coal
-tbutton 320 360 ore.hlp Ore

Deleted: trunk/data/help/industryl.hlp
===================================================================
--- trunk/data/help/industryl.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/industryl.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,47 +0,0 @@
-text -1 15 Light industrial areas
-
-text -1 30 Light industry converts ore into goods. The
-text -1 40 conversion becomes more efficient if steel
-text -1 50 is also available. Power increases the output
-text -1 60 further still. Windmills do NOT provide power
-text -1 70 for these areas.
-
-text -1 85 As a rule of thumb, ignoring the above, the
-text -1 95 output of a light industrial area is mainly
-text -1 105 dependent on the amount of raw materials,
-text -1 115 including jobs, that it can get, also the
-text -1 125 amount of goods that can be TAKEN AWAY.
-
-text -1 140 These areas connect directly to transport
-text -1 150 to exchange ore, steel and goods. They
-text -1 160 may need a market to supply jobs.
-
-text -1 175 These areas connect to transport ONLY to
-text -1 185 the top left hand corner, as shown.
-text -1 195 Transport will curve in when it is connected.
-
-icon 110 250 industrylm1.csi
-icon 94 250 roadlr.csi
-icon 78 250 roadlr.csi
-icon 110 234 railud.csi
-icon 110 218 railud.csi
-
-icon 250 250 industrylm1.csi
-icon 234 250 roaddr.csi
-icon 234 266 roadud.csi
-icon 234 282 roadud.csi
-icon 234 298 roadud.csi
-icon 250 234 raildr.csi
-icon 266 234 raillr.csi
-icon 282 234 raillr.csi
-icon 298 234 raillr.csi
-icon 180 270 market-full.csi
-
-text -1 320 The market is within range of both areas.
-text -1 330 (The market must have jobs to supply)
-
-text 25 350 See also:
-tbutton 65 370 transport.hlp Transport
-tbutton 160 370 road.hlp Roads
-tbutton 222 370 rail.hlp Railways
-tbutton 310 370 market.hlp Markets

Deleted: trunk/data/help/jobs.hlp
===================================================================
--- trunk/data/help/jobs.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/jobs.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,38 +0,0 @@
-text -1 15 Jobs
-
-text -1 30 People living in residential areas
-text -1 40 provide jobs. Jobs are used by most areas
-text -1 50 for them to function. Some areas only
-text -1 60 need jobs when they are under construction,
-text -1 70 for example monuments.
-
-text -1 85 Jobs can be supplied by markets; you
-text -1 95 can have a market within range of the
-text -1 105 area you wish to supply. The market, of
-text -1 115 course, must get it's jobs from somewhere.
-text -1 125 Markets get their jobs in two ways. First,
-text -1 135 if there is a residential area within range,
-text -1 145 it will be supplying jobs to the market in
-text -1 155 proportion to its population and how many
-text -1 165 markets the jobs must be shared between.
-text -1 175 The second way is by transport. A market
-text -1 185 some distance away that has a surplus of
-text -1 195 jobs, will put some on transport. Any
-text -1 205 markets that are short of jobs that are
-text -1 215 connected to that transport will grab the
-text -1 225 jobs flowing along the track road or rail.
-
-text -1 240 If a market becomes 'full' of jobs, it will
-text -1 250 stop accepting them from residential areas.
-text -1 260 When this happens, if there are no other
-text -1 270 non full markets within range, the people
-text -1 280 will become unemployed.
-
-text -1 295 A health centre within range of a 
-text -1 305 residential area, will increase the number
-text -1 315 of jobs provided to any local markets.
-
-text 20 340 See also:
-tbutton 140 340 residential.hlp Residences
-tbutton 140 360 transport.hlp Transport
-tbutton 140 380 market.hlp Markets

Deleted: trunk/data/help/keyboard.hlp
===================================================================
--- trunk/data/help/keyboard.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/keyboard.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,25 +0,0 @@
-text -1  40 The keyboard interface
-text -1  50 ======================
-
-text 40  90 H                Help
-text 40 100 L                Load
-text 40 110 P                Pause/Unpause
-text 40 120 Q                Quit
-text 40 130 S                Save
-
-text 40 150 Arrow Keys       Scroll Main Screen (X11,WIN32)
-text 40 160 Arrow Keys       Move Cursor (LIBSVGA)
-text 40 170 SHIFT-Arrow      Faster Scrolling (X11,WIN32)
-
-text 40 180 Space            Same as left mouse button
-text 40 190 Enter            Same as left mouse button
-text 40 200 Backspace        Same as right mouse button
-
-text 40 220 R                Display stats
-text 40 230 O                Game options
-text 40 240 V                Toggle overlay mode
-
-text 40 260 In dialogue boxes, you can press space
-text 40 270 or return to select OK. The space, return
-text 40 280 or the y key to select YES. The backspace
-text 40 290 or the n key to select NO.

Deleted: trunk/data/help/loadgame.hlp
===================================================================
--- trunk/data/help/loadgame.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/loadgame.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,17 +0,0 @@
-
-tbutton -1 46 return1 Good Times
-
-text -1 60 You are about 600 years into the game,
-text -1 70 feeding everyone, making money and 
-text -1 80 increasing your tech level. Good times are here!
-text -1 90 They won't stay that way without your help...
-
-tbutton -1 116 return2 Bad Times
-
-text -1 130 The same as the above but with
-text -1 140 *minus* 25 million, or so, in the bank.
-text -1 150 The idea here is to try and get back in
-text -1 160 the black. Not as easy as it sounds as the
-text -1 170 interest payments can get quite large. 
-
-tbutton -1 370 return9 Load one of your scenes

Deleted: trunk/data/help/market.hlp
===================================================================
--- trunk/data/help/market.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/market.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,34 +0,0 @@
-text -1 15 Market
-text -1 30 Market is probably a bad name for these areas.
-text -1 40 They are more like job centres, shops,
-text -1 50 warehouses and markets all rolled into one.
-text -1 65 They buy and sell food, jobs, coal, goods,
-text -1 75 ore and steel to surrounding areas, and
-text -1 85 to transport such as roads.
-text -1 100 In the following example, a residential area
-text -1 110 is supplying jobs to a market, the market is
-text -1 120 supplying jobs to the, half built, monument.
-text -1 130 NOTE, in this example the residents
-text -1 140 are not being fed!
-text -1 160 The areas are more or less at the extent
-text -1 170 of their range.
-
-icon 90 200 monument2.csi
-icon 180 200 market-low.csi
-icon 270 192 resmedlow.csi
-
-tbutton 72 240 monument.hlp Monument
-text 174 242 Market
-tbutton 256 252 residential.hlp Residence
-
-tbutton -1 280 market2.hlp Controlling what markets can buy and sell
-
-text 80 315 See also:
-tbutton 80 335 food.hlp Food
-tbutton 140 335 jobs.hlp Jobs
-tbutton 200 335 coal.hlp Coal
-tbutton 260 335 goods.hlp Goods
-tbutton 88 360 ore.hlp Ore
-tbutton 148 360 steel.hlp Steel
-tbutton 218 360 transport.hlp Transport
-  

Deleted: trunk/data/help/market2.hlp
===================================================================
--- trunk/data/help/market2.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/market2.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,20 +0,0 @@
-text -1 15 Controlling what markets can buy and sell
-text -1 40 You can control the functioning of a market
-text -1 50 by selecting what may be bought and sold
-text -1 60 from transport. Click twice on a market
-text -1 70 (not the select button) and towards the top
-text -1 80 left hand side a window will appear allowing
-text -1 90 you to select what is traded.
-text -1 105 The default is to trade in everything.
-
-icon 50 140 checked_box.csi
-text 80 146 Means the trade is allowed.
-icon 50 170 unchecked_box.csi
-text 80 176 Means the trade is NOT allowed.
-
-text -1 200 The numbers between the words Buy and Sell
-text -1 210 are the map reference for that market.
-
-text 50 290 See also:
-tbutton 50 310 transport.hlp Transport
- 
\ No newline at end of file

Deleted: trunk/data/help/medium.hlp
===================================================================
--- trunk/data/help/medium.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/medium.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,7 +0,0 @@
-
-text -1 200 This is the medium speed button. 
-text -1 210 It causes the game to run at
-text -1 220 medium speed. 
-text -1 230 On slow machines the speed buttons
-text -1 240 may have no effect.
-

Deleted: trunk/data/help/menu.hlp
===================================================================
--- trunk/data/help/menu.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/menu.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,10 +0,0 @@
-text -1 50 Main Menu
-
-tcolour 226 80
-tbutton -1 100 newgame.hlp ============== New Game ==============
-tbutton -1 140 loadgame.hlp ================ Load ================
-tbutton -1 180 return1 ================ Save ================
-tbutton -1 220 return2 ============== Options ===============
-tbutton -1 260 index.hlp ================ Help ================
-tbutton -1 300 return3 ================ Quit ================
-tcolour -1 -1

Deleted: trunk/data/help/mill.hlp
===================================================================
--- trunk/data/help/mill.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/mill.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,28 +0,0 @@
-text -1 15 Mills
-
-text -1 30 Mills convert food, coal and jobs into
-text -1 40 goods. Food?... well, cotton and wool are
-text -1 50 counted as food in this game.
-
-text -1 65 Mills use quite a lot of food, so you can
-text -1 75 easily get into food shortages if you don't
-text -1 85 take this into account. (It is less of a
-text -1 95 problem when you have windmills, as they can
-text -1 105 power farms which makes them more efficient.
-
-text -1 120 Mills do not have to be connected to
-text -1 130 transport. If not, they do have to be in
-text -1 140 range of a market with coal, jobs and food.
-text -1 150 You can tell when mills are working by the
-text -1 160 smoke and steam coming from the building.
-
-text 30 190 This is a non-working mill.
-icon 290 180 mill0.csi
-
-text 20 250 See also:
-tbutton 100 250 goods.hlp Goods
-tbutton 100 270 food.hlp Food
-tbutton 100 290 coal.hlp Coal
-tbutton 100 310 jobs.hlp Jobs
-tbutton 100 330 transport.hlp Transport
-tbutton 100 350 windmill.hlp Windmills

Deleted: trunk/data/help/mini-screen.hlp
===================================================================
--- trunk/data/help/mini-screen.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/mini-screen.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,19 +0,0 @@
-text -1 100 This is the 'mini' screen.
-
-text -1 120 This shows, in reduced scale, the whole
-text -1 130 of your playing area. The buttons above,
-text -1 140 when you click on them, show information
-text -1 150 such as pollution levels over the whole
-text -1 160 of your playing area.
-
-text -1 170 Click the right mouse button on each of
-text -1 180 the buttons above the mini screen to
-text -1 190 activate their help pages.
-
-text -1 220 Clicking the left button within the mini
-text -1 230 screen window moves the active playing
-text -1 240 area to the place where you clicked.
-
-text -1 260 The green square shows the area covered
-text -1 270 by the main screen. (Where this text is
-text -1 280 being displayed.)

Deleted: trunk/data/help/monument.hlp
===================================================================
--- trunk/data/help/monument.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/monument.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,54 +0,0 @@
-text -1 15 Monuments
-
-text -1 30 Monuments provide a focal point for
-text -1 40 the teaching and inspiration of
-text -1 50 inventers. Every monument you build will
-text -1 60 increase the rate of technology growth,
-text -1 70 but their effectiveness drops to zero as
-text -1 80 you get toward 40% tech level.
-
-text -1 95 To build a monument, you need to provide
-text -1 105 jobs, a LOT of jobs. For this reason they
-text -1 115 are useful for controlling unemployment.
-text -1 125 This is only a short term solution to an
-text -1 135 unemployment problem as monuments don't
-text -1 145 use any jobs after they are fully built.
-
-text -1 160 You can tell how far building has
-text -1 170 progressed by clicking on the monument
-text -1 180 and looking at the stats window (top left
-text -1 190 of centre). Also the graphic changes as it
-text -1 200 is built. The following 6 graphics show the
-text -1 210 stages of construction from 0% to 100%
-
-icon 50 230 monument0.csi
-icon 100 230 monument1.csi
-icon 150 230 monument2.csi
-icon 200 230 monument3.csi
-icon 250 230 monument4.csi
-icon 300 230 monument5.csi
-
-text -1 270 HINT: How to stop monument building sucking
-text -1 280 too many jobs out of an area and therefore
-text -1 290 starving other areas of jobs: Build a
-text -1 300 monument farm away from other areas.
-
-text 10 320 Track connected
-text 10 330 to the main part
-text 10 340 of the game.
-
-icon 148 330 tracklr.csi
-icon 164 330 tracklr.csi
-icon 180 330 tracklr.csi
-icon 196 330 tracklr.csi
-icon 212 330 tracklr.csi
-icon 228 330 tracklr.csi
-icon 244 330 tracklr.csi
-icon 260 330 tracklr.csi
-icon 276 330 tracklr.csi
-icon 292 330 market-med.csi
-icon 324 330 monument4.csi
-
-text 150 370 You will need a          here
-tbutton 286 368 market.hlp market
- 
\ No newline at end of file

Deleted: trunk/data/help/msb-coal.hlp
===================================================================
--- trunk/data/help/msb-coal.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/msb-coal.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,21 +0,0 @@
-text -1 30 This is the coal mini screen.
-
-text -1 80 The coal mini screen shows the 
-text -1 90 coal reserves beneath your 'city'.
-text -1 100 The coal seams are shown as white on a
-text -1 110 black background. You will have to build
-text -1 120 a coal mine close to one of these seams
-text -1 130 to extract its coal.
-
-text -1 150 The first time you ask for this
-text -1 160 information, you will have to undertake
-text -1 170 a coal survey, which will cost you one
-text -1 180 million currency units. After that the
-text -1 190 information is free to look at again.
-
-text -1 270 Left click on the mini screen 
-text -1 280 to reposition the main window.
-text -1 300 Left click on the mini screen title 
-text -1 310 to choose a different mini screen view.
-text -1 330 Toggle overlay mode by pressing 'v' 
-text -1 340 or middle click on the mini screen title (X only)

Deleted: trunk/data/help/msb-cricket.hlp
===================================================================
--- trunk/data/help/msb-cricket.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/msb-cricket.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,17 +0,0 @@
-text -1 30 This is the cricket cover mini screen.
-
-text -1 80 Areas that have cricket pitches within range
-text -1 90 are shown as dark green.
-
-text -1 110 Areas that are out of range of a
-text -1 120 cricket pitch are displayed as normal.
-
-text -1 140 Remember, cricket pitches take three
-text -1 150 months to become active.
-
-text -1 270 Left click on the mini screen 
-text -1 280 to reposition the main window.
-text -1 300 Left click on the mini screen title 
-text -1 310 to choose a different mini screen view.
-text -1 330 Toggle overlay mode by pressing 'v' 
-text -1 340 or middle click on the mini screen title (X only)

Deleted: trunk/data/help/msb-fire.hlp
===================================================================
--- trunk/data/help/msb-fire.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/msb-fire.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,17 +0,0 @@
-text -1 30 This is the fire cover mini screen.
-
-text -1 80 Areas that have a fire station within 
-text -1 90 range are shown as dark green.
-
-text -1 110 The areas out of range of a fire 
-text -1 120 station are displayed as normal.
-
-text -1 140 Remember, fire stations take three months
-text -1 150 to become active.
-
-text -1 270 Left click on the mini screen 
-text -1 280 to reposition the main window.
-text -1 300 Left click on the mini screen title 
-text -1 310 to choose a different mini screen view.
-text -1 330 Toggle overlay mode by pressing 'v' 
-text -1 340 or middle click on the mini screen title (X only)

Deleted: trunk/data/help/msb-health.hlp
===================================================================
--- trunk/data/help/msb-health.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/msb-health.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,17 +0,0 @@
-text -1 30 This is the health cover mini screen.
-
-text -1 80 Areas that have a health centre within range
-text -1 90 are shown as dark green.
-
-text -1 110 The areas out of range of a 
-text -1 120 health centre are displayed as normal.
-
-text -1 140 Remember, health centres take three
-text -1 150 months to become active.
-
-text -1 270 Left click on the mini screen 
-text -1 280 to reposition the main window.
-text -1 300 Left click on the mini screen title 
-text -1 310 to choose a different mini screen view.
-text -1 330 Toggle overlay mode by pressing 'v' 
-text -1 340 or middle click on the mini screen title (X only)

Deleted: trunk/data/help/msb-normal.hlp
===================================================================
--- trunk/data/help/msb-normal.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/msb-normal.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,11 +0,0 @@
-text -1 30 This is the land use mini screen.
-
-text -1 80 The land use mini screen shows buildings, 
-text -1 90 roads, water and green space in the city.
-
-text -1 270 Left click on the mini screen 
-text -1 280 to reposition the main window.
-text -1 300 Left click on the mini screen title 
-text -1 310 to choose a different mini screen view.
-text -1 330 Toggle overlay mode by pressing 'v' 
-text -1 340 or middle click on the mini screen title (X only)

Deleted: trunk/data/help/msb-pol.hlp
===================================================================
--- trunk/data/help/msb-pol.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/msb-pol.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,19 +0,0 @@
-text -1 30 This is the pollution mini screen.
-
-text -1 80 The pollution mini screen shows the 
-text -1 90 pollution levels across the city.
-
-text -1 110 Pollution gets stronger as you go from:
-text -1 125 Light-green -> Dark-green -> Darker-green
-text -1 135 Dark-red -> Lighter-red -> Bright-red.
-
-text -1 150 Places with residential areas that
-text -1 160 show as red, will cause sickness and make
-text -1 170 the area less desirable to live in.
-
-text -1 270 Left click on the mini screen 
-text -1 280 to reposition the main window.
-text -1 300 Left click on the mini screen title 
-text -1 310 to choose a different mini screen view.
-text -1 330 Toggle overlay mode by pressing 'v' 
-text -1 340 or middle click on the mini screen title (X only)

Deleted: trunk/data/help/msb-power.hlp
===================================================================
--- trunk/data/help/msb-power.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/msb-power.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,19 +0,0 @@
-text -1 30 This is the power mini screen.
-
-text -1 80 Areas that have low tech windmill power 
-text -1 90 are shown as dark green.
-
-text -1 110 The areas within the main power grid are 
-text -1 120 shown as light green.
-
-text -1 140 The unpowerd areas are displayed as normal.
-
-text -1 160 This button uses power.  Try not to leave it
-text -1 170 turned on too long.
-
-text -1 270 Left click on the mini screen 
-text -1 280 to reposition the main window.
-text -1 300 Left click on the mini screen title 
-text -1 310 to choose a different mini screen view.
-text -1 330 Toggle overlay mode by pressing 'v' 
-text -1 340 or middle click on the mini screen title (X only)

Deleted: trunk/data/help/msb-starve.hlp
===================================================================
--- trunk/data/help/msb-starve.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/msb-starve.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,17 +0,0 @@
-text -1 30 This is the starvation mini screen.
-
-text -1 80 The starvation mini screen shows 
-text -1 90 only residential areas.
-
-text -1 110 Bright green means that there is enough
-text -1 120 food in that residential area. 
-text -1 130 Darker green and bright red show 
-text -1 140 increasingly severe starvation in each
-text -1 150 residential area shown.
-
-text -1 270 Left click on the mini screen 
-text -1 280 to reposition the main window.
-text -1 300 Left click on the mini screen title 
-text -1 310 to choose a different mini screen view.
-text -1 330 Toggle overlay mode by pressing 'v' 
-text -1 340 or middle click on the mini screen title (X only)

Deleted: trunk/data/help/msb-ub40.hlp
===================================================================
--- trunk/data/help/msb-ub40.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/msb-ub40.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,17 +0,0 @@
-text -1 30 This is the unemployment mini screen.
-
-text -1 80 The unemployment mini screen shows 
-text -1 90 only residential areas.
-
-text -1 110 Bright green means that there is no 
-text -1 120 unemployment in that residential area. 
-text -1 130 Darker green and bright red show 
-text -1 140 increasingly severe unemployment in each
-text -1 150 residential area shown.
-
-text -1 270 Left click on the mini screen 
-text -1 280 to reposition the main window.
-text -1 300 Left click on the mini screen title 
-text -1 310 to choose a different mini screen view.
-text -1 330 Toggle overlay mode by pressing 'v' 
-text -1 340 or middle click on the mini screen title (X only)

Deleted: trunk/data/help/newgame.hlp
===================================================================
--- trunk/data/help/newgame.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/newgame.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,9 +0,0 @@
-text -1 100 New Game Menu
-
-tcolour 226 80
-tbutton -1 200 return0 === New Game - with random village ===
-tbutton -1 240 return1 ===== New Game - with bare board =====
-#tbutton -1 280 return2 ======= Connect - network game =======
-tcolour -1 -1
-
-

Deleted: trunk/data/help/opening.hlp
===================================================================
--- trunk/data/help/opening.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/opening.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,51 +0,0 @@
-text -1 10 Welcome to Lincity
-
-text -1 30 To get started, build something like this:
-
-icon 76 158 trackdr.csi
-icon 92 158 trackldr.csi
-icon 108 158 tracklr.csi
-icon 124 158 tracklr.csi
-icon 140 158 tracklr.csi
-icon 156 158 trackldr.csi
-icon 172 158 trackldr.csi
-icon 188 158 tracklr.csi
-icon 204 158 tracklr.csi
-icon 220 158 tracklr.csi
-icon 236 158 tracklr.csi
-icon 252 158 trackld.csi
-
-icon 204 126 market-med.csi
-icon 140 126 pottery4.csi
-icon 140 62 farm11.csi
-icon 204 78 resmedlow.csi
-
-icon 92 174 commune8.csi
-icon 76 174 trackur.csi
-icon 172 174 commune8.csi
-icon 156 174 trackur.csi
-icon 253 174 oremine2.csi
-
-
-tbutton 260 96 residential.hlp Residences
-tbutton 72 136 pottery.hlp Pottery
-tbutton 96 96 farm.hlp Farm
-tbutton 244 136 market.hlp Market
-tbutton 130 245 commune.hlp Communes
-tbutton 254 245 oremine.hlp Ore mine
-tbutton 16 160 track.hlp Tracks
-
-#text -1 295 Click in the boxes to find more about
-#text -1 305 a particular area.
-
-tcolour 226 80
-tbutton -1 280 openload.hlp === Load - built in or saved scene ===
-tbutton -1 300 return0 === New Game - with random village ===
-tbutton -1 320 return1 ===== New Game - with bare board =====
-#tbutton -1 340 return2 ======= Connect - network game =======
-tcolour -1 -1
-
-text -1 363 Right mouse button will often get you help
-#text -1 370 all sorts of help while playing.
-text -1 380 Enjoy the game - and good luck...
-

Deleted: trunk/data/help/openload.hlp
===================================================================
--- trunk/data/help/openload.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/openload.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,17 +0,0 @@
-
-tbutton -1 46 return1 Good Times
-
-text -1 60 You are about 600 years into the game,
-text -1 70 feeding everyone, making money and 
-text -1 80 increasing your tech level. Good times are here!
-text -1 90 They won't stay that way without your help...
-
-tbutton -1 116 return2 Bad Times
-
-text -1 130 The same as the above but with
-text -1 140 *minus* 25 million, or so, in the bank.
-text -1 150 The idea here is to try and get back in
-text -1 160 the black. Not as easy as it sounds as the
-text -1 170 interest payments can get quite large. 
-
-tbutton -1 370 return9 Load one of your scenes

Deleted: trunk/data/help/ore.hlp
===================================================================
--- trunk/data/help/ore.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/ore.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,9 +0,0 @@
-
-text -1 15 Ore
-
-text -1 100 Ore is one of the game's basic
-text -1 110 raw materials. Communes oremines
-text -1 120 and recyclers produce ore.
-
-text -1 135 Potteries, light industry and
-text -1 145 heavy industry use ore.

Deleted: trunk/data/help/oremine.hlp
===================================================================
--- trunk/data/help/oremine.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/oremine.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,22 +0,0 @@
-text -1 15 Ore mine
-
-text -1 30 Ore mines provide ore to make goods and
-text -1 40 steel. You may build an ore mine anywhere.
-text -1 60 The ore under the area is
-text -1 70 slowly consumed; you cannot bulldoze it and
-text -1 80 build another one and hope to get more ore.
-
-text -1 95 When an ore mine is exhausted, it turns into
-text -1 105 a lake. If you then want to reclaim this land
-text -1 115 you will have to bulldoze 16 water areas!
-
-text -1 130 The following 4 graphics show ore mines that
-text -1 140 are hardly worked to nearly exhausted.
-
-text -1 155 Transport (not shown) connects to the top left
-text -1 165 hand corner of the ore mine.
-
-icon 30 200 oremine1.csi
-icon 125 200 oremine3.csi
-icon 215 200 oremine5.csi
-icon 310 200 oremine7.csi

Deleted: trunk/data/help/other-costs.hlp
===================================================================
--- trunk/data/help/other-costs.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/other-costs.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,21 +0,0 @@
-text -1 30 This is the other costs window.
-
-text 20 60 This shows a breakdown of the 'other costs' 
-text 20 70 that are shown in the finance window.
-
-text 20 90 The meanings on the abbreviations are:
-
-text 50 110 It - Interest costs.
-text 50 120 Sc - School costs.
-text 50 130 Un - University costs.
-text 50 140 Dt - Unnatural deaths costs.
-text 50 150 Wn - Windmill costs.
-text 50 160 Hl - Health costs.
-text 50 170 Rk - Rocket costs.
-text 50 180 Fr - Fire station costs.
-text 50 190 Ck - Cricket costs.
-text 50 200 Rc - Recycling costs.
-
-text 20 310 Left clicking on this window will cycle through
-text 20 320 windows for finance, other costs and housing.
-

Deleted: trunk/data/help/park.hlp
===================================================================
--- trunk/data/help/park.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/park.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,14 +0,0 @@
-text -1 15 Parks
-
-text -1 40 Parks are very simple, they clear pollution.
-
-text -1 55 A number of areas produce pollution. They are
-text -1 65 roads, railways, coal mines and light and heavy
-text -1 75 industry. Some produce more than others.
-
-text -1 90 You can use parks to shield residential areas
-text -1 100 or to stop pollution escaping from the
-text -1 110 local area of the source.
-
-text -1 125 The wind comes FROM the south west, so
-text -1 135 build you parks accordingly.

Deleted: trunk/data/help/pause.hlp
===================================================================
--- trunk/data/help/pause.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/pause.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,6 +0,0 @@
-
-text -1 200 This is the pause button. 
-text -1 210 It pauses the game.
-text -1 220 You can restart the game by 
-text -1 230 clicking on it again.
-

Deleted: trunk/data/help/pbar.hlp
===================================================================
--- trunk/data/help/pbar.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/pbar.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,28 +0,0 @@
-text -1 50 This indicator is called the pbar.  It shows
-text -1 60 the change in quantity of things stored at markets.
-
-text -1 80 A green bar on the right side indicates an increase.
-text -1 90 A red bar on the left side indicates a decrease.
-text -1 100 The size of the bar indicates the amount of change.
-
-text -1 120 The number at the right indicates the total quantity.
-
-text 50 180 The things are as follows
-icon 50 190 pbarpop.csi
-text 75 195 Population
-icon 50 205 pbartech.csi
-text 75 210 Technology Level
-icon 50 220 pbarfood.csi
-text 75 225 Food
-icon 50 235 pbarjobs.csi
-text 75 240 Jobs
-icon 50 250 pbarcoal.csi
-text 75 255 Coal
-icon 50 265 pbarore.csi
-text 75 270 Ore
-icon 50 280 pbargoods.csi
-text 75 285 Goods
-icon 50 295 pbarsteel.csi
-text 75 300 Steel
-icon 50 310 pbarmoney.csi
-text 75 315 Money

Deleted: trunk/data/help/pollution.hlp
===================================================================
--- trunk/data/help/pollution.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/pollution.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,25 +0,0 @@
-text -1 15 Pollution
-
-text -1 40 Most areas produce some pollution.
-text -1 50 The following are areas that can cause
-text -1 60 heavy pollution:
-text -1 75 Heavy industry.
-text -1 85 Light industry.
-text -1 95 Coal fired power stations.
-text -1 105 Coal mines.
-text -1 115 Markets that are full of waste.
-text -1 125 Roads/Rail, particularly when full of waste.
-
-text -1 150 People do not like living in polluted areas.
-text -1 160 They will move out, or even become ill and die.
-
-text -1 200 The prevailing wind is from the bottom left.
-text -1 210 Therefore the pollution tends to drift towards
-text -1 220 the top right hand side.
-
-text -1 290 Generally you would build strategically so
-text -1 300 people are not exposed to pollution. This
-text -1 310 is not always possible however. If this is
-text -1 320 the case then parks form quite a nice barrier.
-text -1 330 The more parks, the greater the protection.
-

Deleted: trunk/data/help/port.hlp
===================================================================
--- trunk/data/help/port.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/port.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,49 +0,0 @@
-text -1 15 Ports
-
-text -1 30 Ports let you import and export goods,
-text -1 40 steel, ore, coal and food. Importing
-text -1 50 costs you money and exporting makes you
-text -1 60 money. 
-
-text -1 85 To be of use a port must be connected to
-text -1 95 transport at the dock gate at the top left
-text -1 105 of the area. You chose what to import
-text -1 115 by double clicking on the area. This 
-text -1 125 brings up a menu with boxes to select
-text -1 135 what you import or export.
-
-icon 100 170 ex_port.csi
-icon 68 170 roadlr.csi
-icon 84 170 roadlr.csi
-icon 164 154 waterd.csi
-icon 164 170 waterlud.csi
-icon 164 186 waterlud.csi
-icon 164 202 waterlud.csi
-icon 164 218 waterlur.csi
-icon 180 218 waterl.csi
-
-text 200 170 They MUST be connected
-text 200 180 to rivers all along
-text 200 190 the right hand side.
-tbutton 230 205 river.hlp See rivers
-
-text -1 250 Nothing will be imported or exported until 
-text -1 260 you have checked the appropriate box.
-
-text -1 275 The export area will take as much as it is
-text -1 285 given. If you need to export, but want to 
-text -1 295 restrict the amount, you may want to use a
-text -1 305 type of transport with less capacity, use a
-text -1 315 long piece or pass the product through a market.
-text -1 325 You will need to experiment to get the right
-text -1 335 transport configuration.
-
-text -1 347 Note: Exporters discount large exports.
-
-text 30 362 See also:
-tbutton 110 360 transport.hlp Transport
-tbutton 110 380 market.hlp Markets
-tbutton 220 360 coal.hlp Coal
-tbutton 290 360 ore.hlp Ore
-tbutton 220 380 goods.hlp Goods
-tbutton 290 380 steel.hlp Steel

Deleted: trunk/data/help/pottery.hlp
===================================================================
--- trunk/data/help/pottery.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/pottery.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,22 +0,0 @@
-text -1 15 Potteries
-
-text -1 30 Potteries use ore, coal and jobs to make
-text -1 40 goods. They do not have to be connected
-text -1 50 to transport but they do, of course, have
-text -1 60 to be within range of a market with ore,
-text -1 70 coal and jobs and be able to receive goods.
-
-text -1 85 You can tell when potteries are working by
-text -1 95 the kilns producing smoke. If the bottom
-text -1 105 kiln is not making smoke, then you are
-text -1 115 producing less than 100% of possible output.
-
-text 50 150 This is a pottery
-icon 200 140 pottery0.csi
-
-text 80 200 See also:
-tbutton 200 220 transport.hlp Transport
-tbutton 200 240 ore.hlp Ore
-tbutton 200 260 coal.hlp Coal
-tbutton 200 280 jobs.hlp Jobs
-tbutton 200 300 market.hlp Markets

Deleted: trunk/data/help/powerline.hlp
===================================================================
--- trunk/data/help/powerline.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/powerline.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,28 +0,0 @@
-text -1 15 Power lines
-text -1 30 Power lines carry power from solar and coal
-text -1 40 power stations to substations.
-text -1 60 Power lines connect to the top left corner of
-text -1 70 each of the three types of icons, solar and
-text -1 80 coal power stations and substations.
-text -1 95 The example below shows a substation being
-text -1 105 fed by a solar power station,
-text -1 115 using power lines.
-icon 220 200 powerssolar.csi
-icon 220 184 powerlvl.csi
-icon 204 200 powerlhl.csi
-icon 188 200 powerlhd.csi
-icon 172 200 powerlhl.csi
-icon 156 200 powerlrdl.csi
-icon 156 216 substation-G.csi
-
-text 110 184 Power lines
-
-text 126 254 Substation
-button 124 252 84 12 substation.hlp
-
-text 190 280 Solar power station
-button 188 278 156 12 powerssolar.hlp
-
-text -1 325 Power lines can cross tracks, roads, railways
-text -1 335 and rivers. See...
-tbutton -1 350 powerline2.hlp Crossing transport and rivers

Deleted: trunk/data/help/powerline2.hlp
===================================================================
--- trunk/data/help/powerline2.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/powerline2.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,81 +0,0 @@
-text -1 15 Crossing transport and rivers
-
-text -1 30 Power lines cross UNDER tracks, roads,
-text -1 40 railways and rivers. If a power line is
-text -1 50 placed either side of a transport or river
-text -1 60 area, they act as if they are joined.
-text -1 75 See the examples below.
-
-icon 40 110 powerlhl.csi
-icon 56 110 powerlhl.csi
-icon 72 110 powerlhl.csi
-icon 88 110 roadud.csi
-icon 104 110 powerlhl.csi
-icon 120 110 powerlhl.csi
-icon 88 94 roadud.csi
-icon 88 126 roadud.csi
-text 145 108 These power lines are
-text 145 118 connected under the road.
-
-icon 40 170 powerlhl.csi
-icon 56 170 powerlhl.csi
-icon 72 170 powerlhl.csi
-icon 88 170 railud.csi
-icon 104 170 powerlhl.csi
-icon 120 170 powerlhl.csi
-icon 88 154 railld.csi
-icon 72 154 raillr.csi
-icon 88 186 raillur.csi
-icon 72 186 raillr.csi
-icon 104 186 raillr.csi
-
-text 145 168 These power lines are
-text 145 178 connected under the rails.
- 
-icon 50 210 water.csi
-icon 66 210 water.csi
-icon 50 226 water.csi
-icon 66 226 water.csi
-icon 66 242 water.csi
-/icon 82 242 water.csi
-icon 66 258 water.csi
-icon 82 258 water.csi
-icon 50 274 water.csi
-icon 66 274 water.csi
-icon 66 290 water.csi
-icon 82 290 water.csi
-icon 66 306 water.csi
-icon 82 306 water.csi
-icon 82 322 water.csi
-icon 98 322 water.csi
-icon 82 338 water.csi
-icon 98 338 water.csi
-
-icon 34 242 powerlhl.csi
-icon 50 242 powerlhl.csi
-icon 82 242 powerlhl.csi
-icon 98 242 powerlhl.csi
-
-icon 34 322 powerlhl.csi
-icon 50 322 powerlhl.csi
-icon 66 322 powerlhl.csi
-/icon 98 322 powerlhd.csi
-icon 114 322 powerlhd.csi
-icon 130 322 powerlhd.csi
-
-icon 98 306 powerlvd.csi
-icon 98 290 powerlvd.csi
-
-text 130 230 These power lines are connected
-text 130 240 under the river. Often you will
-text 130 250 have to bulldoze a bit of river
-text 130 260 to do this, it's expensive!
-
-text 155 300 None of these 3 bits of power
-text 155 310 line are joined. The leftmost
-text 155 320 one is not connected because
-text 155 330 it tries to go under 2 river
-text 155 340 blocks. The right ones are
-text 155 350 note joined because they must
-text 135 360 be in a straight line to connect.
-

Deleted: trunk/data/help/powerscoal.hlp
===================================================================
--- trunk/data/help/powerscoal.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/powerscoal.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,51 +0,0 @@
-text -1 15 Coal fired power station
-
-text -1 30 Coal fired power stations produce
-text -1 40 packets of electricity which are placed
-text -1 50 onto connected power lines.
-
-text -1 65 Power lines connect at the top left
-text -1 75 corner of the station, transport connects
-text -1 85 to the next possition in. See the example.
-
-icon 100 150 powerscoal-full.csi
-icon 84 150 powerlhl.csi
-icon 68 150 powerlhl.csi
-icon 52 150 powerlhl.csi
-
-text 180 160 Coal fired power station
-text 180 180 See also:
-tbutton 255 178 transport.hlp Transport
-tbutton 180 200 tech-level.hlp Tech level
-tbutton 275 200 powerline.hlp Power lines
-
-icon 84 166 roadlr.csi
-icon 68 166 roaddr.csi
-icon 68 182 roadud.csi
-
-icon 100 134 powerlvl.csi
-icon 100 118 powerlldl.csi
-icon 84 118 powerlhl.csi
-icon 68 118 powerlhl.csi
-
-icon 116 134 raildr.csi
-icon 132 134 raillr.csi
-icon 148 134 raillr.csi
-icon 164 134 raillr.csi
-
-text -1 240 The above example shows a coal fired
-text -1 250 power station with all its connection
-text -1 260 points used. To the left there is a road,
-text -1 270 above this there are two power lines,
-text -1 280 then to their right a railway is connected
-text -1 290 to the other transport connection point.
-
-text -1 305 The efficiency of the conversion of coal
-text -1 315 to electricity increases with increasing
-text -1 325 tech level - when the station is BUILT.
-text -1 335 You may want to demolish an old station
-text -1 345 and replace it with a newer, more
-text -1 355 efficient one, when your tech level has
-text -1 365 increased by a significant amount.
-
-

Deleted: trunk/data/help/powerssolar.hlp
===================================================================
--- trunk/data/help/powerssolar.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/powerssolar.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,34 +0,0 @@
-text -1 15 Solar power station
-text -1 30 Solar power stations output their power to
-text -1 40 power lines in packets. The amount of
-text -1 50 power that it can produce increases with
-text -1 60 the tech-level when it was *built*.
-text -1 100 The example below shows a solar power station
-text -1 110 feeding a substation. A medium populated
-text -1 120 residential area is within range.
-
-icon 220 200 powerssolar.csi
-icon 220 184 powerlvl.csi
-icon 204 200 powerlhl.csi
-icon 188 200 powerlhd.csi
-icon 172 200 powerlhl.csi
-icon 156 200 powerlrdl.csi
-icon 156 216 substation-G.csi
-icon 130 280 resmedlow.csi
-
-text 60 228 Substation
-button 58 226 84 12 substation.hlp
-
-text 110 184 Power lines
-button 108 182 92 12 powerline.hlp
-
-text 195 280 Solar power station
-//button 193 278 156 12 powerssolar.hlp
-
-text 110 335 Residential
-button 108 333 92 12 residential.hlp
-
-text 280 320 See also
-text 282 335 Tech-level
-button 280 333 84 12 tech-level.hlp
-

Deleted: trunk/data/help/rail.hlp
===================================================================
--- trunk/data/help/rail.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/rail.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,14 +0,0 @@
-text -1 15 Railways
-text -1 50 Railways carry even more than roads.
-text -1 60 They produce slightly less
-text -1 70 pollution than roads. They are quite
-text -1 80 expensive to buy and maintain though.
-text -1 90 They are well worth the expense when you
-text -1 100 have a lot to transport over a long
-text -1 110 distance.
-
-text 50 150 See also:
-tbutton 50 170 transport.hlp Transport
-tbutton 50 190 commune.hlp Communes
-tbutton 50 210 pollution.hlp Pollution
-

Deleted: trunk/data/help/recycle.hlp
===================================================================
--- trunk/data/help/recycle.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/recycle.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,26 +0,0 @@
-text -1 15 Recycle centres
-
-text -1 40 Used goods produce waste. 
-
-text -1 95 Recycle centres convert used goods into ore.
-text -1 105 They must be connected to transport at the
-text -1 115 top left hand corner. Jobs and money are
-text -1 125 used to collect the waste goods and convert
-text -1 135 them into fresh ore.
-
-text -1 150 The efficiency of the centres is dependent
-text -1 160 on the tech level when the area is built.
-
-text -1 175 It is possible to run a sustainable economy,
-text -1 185 (ie no ore dug etc) with less than 100%
-text -1 195 efficient recycle centres if you have some
-text -1 205 mills to make up for the 'lost' waste goods.
-
-icon 180 300 roaddr.csi
-icon 180 316 recycle-centre.csi
-icon 196 300 roadlr.csi
-icon 212 300 roadlr.csi
-icon 164 316 raildr.csi
-icon 164 332 railud.csi
-icon 164 348 railud.csi
-

Deleted: trunk/data/help/residential.hlp
===================================================================
--- trunk/data/help/residential.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/residential.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,25 +0,0 @@
-text -1 15 Residential area
-text -1 30 This is where people live. To encorage
-text -1 40 people to live in this area they must be
-text -1 50 fed. It also helps to provide them with
-text -1 60 work and goods to buy. They must be within
-text -1 70 range of a market or connected to transport.
-text -1 95 The following 3 icons show low, medium
-text -1 105 and high density housing, There are
-text -1 115 different birth and death rates associated
-text -1 125 with each area, this gives you some control
-text -1 135 over your population.
-
-icon 55 170 reslowlow.csi
-icon 215 170 resmedlow.csi
-icon 295 170 reshilow.csi
-
-tbutton 155 245 market.hlp Market
-icon 220 230 market-full.csi
-text -1 290 The above market is within range of the last
-text -1 300 two residential areas, however, it is
-text -1 310 probably out range of the first.
-
-text -1 350 Later in the game, if you have sufficient
-text -1 360 technology, you can build more 'modern'
-text -1 370 housing, even tower blocks.

Deleted: trunk/data/help/river.hlp
===================================================================
--- trunk/data/help/river.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/river.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,32 +0,0 @@
-text -1 15 Rivers/Water
-
-text -1 30 Rivers are here mainly to get in your way.
-text -1 40 They are expensive to bridge, dig and
-text -1 50 demolish. Their only 'use' is that ports
-text -1 60 must be connected to rivers.
-
-text -1 75 There are two types of water. Lakes are
-text -1 85 water that is NOT connected to the river
-text -1 95 system, river is water that IS connected
-text -1 105 to the river system. The river system
-text -1 115 is defined as all the water that is
-text -1 125 there at the start of the game.
-text -1 135 For example, when an ore mine empties
-text -1 145 it turns into water. If this is
-text -1 155 connected to a piece of river, it
-text -1 165 becomes part of the river, else it is
-text -1 175 just a lake.
-
-text -1 190 If you demolish some river to make a
-text -1 200 path for, say, transport, you have
-text -1 210 built a bridge. Both sides of your gap
-text -1 220 are still part of the river system. This
-text -1 230 is one of the reasons it is so expensive
-text -1 240 to 'demolish' water.
-
-text -1 255 Once a piece of water is part of the river
-text -1 265 system it CANNOT revert to being a lake.
-
-text -1 280 Power lines can transfer power under ONE
-text -1 290 piece of river in the same way that it can
-text -1 300 pass under transport.

Deleted: trunk/data/help/road.hlp
===================================================================
--- trunk/data/help/road.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/road.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,12 +0,0 @@
-text -1 15 Roads
-text -1 50 Roads carry more than tracks, but not as
-text -1 60 much as railways. They produce more
-text -1 70 pollution than railways as well. They are
-text -1 80 cheaper to buy and maintain than railways
-text -1 90 - I knew there must be a reason for them.
-
-text 50 140 See also:
-tbutton 50 160 transport.hlp Transport
-tbutton 50 180 commune.hlp Communes
-tbutton 50 220 pollution.hlp Pollution
-

Deleted: trunk/data/help/rocket.hlp
===================================================================
--- trunk/data/help/rocket.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/rocket.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,41 +0,0 @@
-text -1 15 Rocket Launch Pad
-
-text -1 30 Rockets enable you to evacuate your
-text -1 40 population to another world, and thus
-text -1 50 end the game.
-
-text -1 65 You must have five successful unmanned
-text -1 75 launches before you can start evacuating.
-text -1 85 Each successful evacuation rocket holds
-text -1 95 1000 people.
-
-text -1 110 If any launch fails, you must launch
-text -1 120 a further 5 unmanned rockets before you
-text -1 130 can evacuate any more people.
-
-text -1 145 The tech level at the time of launch
-text -1 155 is the probability of a successful launch.
-text -1 165 This means that if your tech level is,
-text -1 175 say, 80%, then you have only a four in
-text -1 185 five chance of success. 100% or more
-text -1 195 means that a launch will always succeed.
-text -1 205 (Some of the _first 5_ may still fail.)
-text -1 215 You must build a new launch pad for each
-text -1 225 rocket you build.
-
-text -1 240 Rocket Launch Pads do not need to be
-text -1 250 connected to transport, they can get all they
-text -1 260 need from local markets. They use large
-text -1 270 quantities of steel, goods, jobs and money
-text -1 280 to build. When the rocket is built, you
-text -1 290 will get a message asking you if you want
-text -1 300 to launch now or later. If you choose
-text -1 310 later, then you can launch it when you wish
-text -1 320 by clicking on the area. You can have any
-text -1 330 number of rockets waiting to launch.
-
-text -1 345 When a rocket is built, but waiting to be
-text -1 355 launched, it no longer uses steel, goods or
-text -1 365 jobs, but still continues to cost a lot of
-text -1 375 money.
-

Deleted: trunk/data/help/school.hlp
===================================================================
--- trunk/data/help/school.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/school.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,34 +0,0 @@
-text -1 15 Schools
-
-text -1 30 Schools use jobs and goods to produce
-text -1 40 technology in a similar way to
-text -1 50 universities. They use many less jobs
-text -1 60 and goods than universities, but
-text -1 70 produce far fewer tech points. Given
-text -1 80 the choice of putting 4 or five schools
-text -1 90 in a given area, or a university, it is
-text -1 100 often (but not always) better to put a
-text -1 110 university in.
-
-text -1 125 Schools do NOT need to connect to
-text -1 135 transport, but do need to be within
-text -1 145 range of a market than can supply the
-text -1 155 quantity of jobs and goods to make the
-text -1 165 school work.
-
-text -1 180 Schools cost money to run. You can see
-text -1 190 the total cost for the LAST year by
-text -1 205 clicking on the money button.
-icon 316 202 ms-ocost-button.csi
-
-text -1 220 The value 'scl' is the school cost.
-
-text 20 250 See also:
-tbutton 100 250 market.hlp Markets
-tbutton 100 270 university.hlp Universities
-tbutton 100 290 transport.hlp Transport
-tbutton 100 310 goods.hlp Goods
-tbutton 100 330 jobs.hlp Jobs
-
-text 275 264 A school
-icon 290 280 school0.csi

Deleted: trunk/data/help/slow.hlp
===================================================================
--- trunk/data/help/slow.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/slow.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,7 +0,0 @@
-
-text -1 200 This is the slow button. 
-text -1 210 It causes the to game run at
-text -1 220 it's slowest speed. 
-text -1 230 On slow machines the speed buttons
-text -1 240 may have no effect.
-

Deleted: trunk/data/help/steel.hlp
===================================================================
--- trunk/data/help/steel.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/steel.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,27 +0,0 @@
-text -1 15 Steel
-
-text -1 40 Steel is generally made by heavy industry
-text -1 50 (steel works). You must have attained
-text -1 60 a sufficient tech level to build a steel
-text -1 70 works. Before this, communes are your only
-text -1 80 source of steel. Communes produce a small
-text -1 90 amount of steel (from ore), so you will
-text -1 100 usually need a number of communes to
-text -1 110 provide enough steel for your needs.
-
-text -1 125 Steel is used by blacksmiths to make goods.
-text -1 135 Steel is used by light industry for tools
-text -1 145 and products (goods). Light industry works
-text -1 155 without steel, though its output is much
-text -1 165 reduced.
-
-text -1 180 Rockets use a lot of steel, mainly to build
-text -1 190 the launch site, (seems that there is no
-text -1 200 aluminium or titanium, 'steel' is used in the
-text -1 210 construction of the rockets as well - don't
-text -1 220 worry about it, I don't).
-
-text -1 235 Railways also use steel to maintain them.
-
-text -1 250 Steel production is taxed.
-

Deleted: trunk/data/help/substation.hlp
===================================================================
--- trunk/data/help/substation.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/substation.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,30 +0,0 @@
-text -1 15 Substations
-text -1 35 Substations take power packets from power
-text -1 45 lines and distribute the power to the
-text -1 55 surrounding area. You can see if, for example,
-text -1 65 your residential area is powered by clicking
-text -1 75 on the icon, then looking at the mappoint
-text -1 85 stats window.
-text -1 100 The example below shows a solar power station
-text -1 110 feeding a substation. A medium populated
-text -1 120 residential area is within range.
-
-icon 220 200 powerssolar.csi
-icon 220 184 powerlvl.csi
-icon 204 200 powerlhl.csi
-icon 188 200 powerlhd.csi
-icon 172 200 powerlhl.csi
-icon 156 200 powerlrdl.csi
-text 60 228 Substation
-icon 156 216 substation-G.csi
-icon 130 280 resmedlow.csi
-
-tbutton 108 182 powerline.hlp Power lines
-//text 110 184 Power lines
-//button 108 182 92 12 powerline.hlp
-
-text 195 280 Solar power station
-button 193 278 156 12 powerssolar.hlp
-
-text 110 335 Residential
-button 108 333 92 12 residential.hlp

Deleted: trunk/data/help/sustain.hlp
===================================================================
--- trunk/data/help/sustain.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/sustain.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,38 +0,0 @@
-
-text -1 15 Sustainability progress window
-
-text -1 30 This window contains six coloured lines.  When they
-text -1 40 all reach the right hand side of the window,
-text -1 50 you have a sustainable economy.
-
-text 16 70 MIN (orange) you are not digging any ore
-text 48 80 or coal, and are not dumping waste on a tip.
-
-text 16 105 PRT (grey) you are not importing or exporting.
-
-text 16 130 MNY (green) your money is stable or rising,
-text 48 140 this means you cannot build anything but
-text 48 150 the cheapest of areas.
-
-text 16 175 POP (blue) your population is stable to within
-text 48 185 2% of the value when the 180 year count
-text 48 195 started. If it goes outside of this band,
-text 48 205 the new population will be the new value and
-text 48 215 the year count will be set back to zero.
-text 48 225 Also, your population must be at least 5000.
-
-text 16 250 TEC (yellow) your technology is increasing
-text 48 260 or falling by only a very small amount.
-text 48 270 If it falls by more than 1%, the year
-text 48 280 is set back to zero. Also, your tech level
-text 48 290 must be at least 50.
-
-text 16 315 FIR (red) all areas that can catch fire have
-text 48 325 fire cover. The following areas do *not* have
-text 48 335 to have fire cover: monuments, oremines,
-text 48 345 power lines and rockets.
- 
-text 16 365 Years required for sustainability:
-text -1 375 MIN=180 PRT=180 MNY=60 POP=60 TEC=120 FIR=60
-
-

Deleted: trunk/data/help/tech-level.hlp
===================================================================
--- trunk/data/help/tech-level.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/tech-level.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,41 +0,0 @@
-
-text -1 15 Tech Level
-
-text -1 40 Your city's technology level determines
-text -1 50 a number of things such as what you can
-text -1 60 build and the efficiency of certain
-text -1 70 processes.
-
-text -1 85 To increase your technology, you must
-text -1 95 build (and supply with the appropriate
-text -1 105 inputs) Monuments, Schools and 
-text -1 115 Universities.
-
-text -1 130 When your tech level is very low, you
-text -1 140 can only build monuments. When a few of
-text -1 150 these have been around for a while, you
-text -1 160 will then 'invent' schools. Schools
-text -1 170 produce more technology than monuments.
-
-text -1 185 When your tech level reaches a higher
-text -1 195 value still, you will 'invent'
-text -1 205 universities. These produce even more
-text -1 215 technology than schools, but are VERY
-text -1 225 resource hungry.
-
-text -1 240 The more technology you have, the faster
-text -1 250 it 'erodes'. This means that the higher
-text -1 260 you want your tech level to be, the more
-text -1 270 schools and universities you will need.
-
-text -1 280 Also, be aware that if for some reason you
-text -1 290 need to take out, say, a university or two
-text -1 300 (or they are suddenly starved of resources)
-text -1 310 your tech level is likely to start FALLING.
-
-text 20 335 See also:
-tbutton 100 347 school.hlp Schools
-tbutton 100 365 university.hlp Universities
-
-
-

Deleted: trunk/data/help/tip.hlp
===================================================================
--- trunk/data/help/tip.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/tip.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,26 +0,0 @@
-text -1 15 Tips (rubbish dumps)
-
-text -1 30 Tips provide a place to put your
-text -1 40 rubbish. If you accumulate too much
-text -1 50 at markets, they are forced to burn
-text -1 60 some. This makes quite a lot of
-text -1 70 pollution so you should be wary of
-text -1 80 letting rubbish accumulate.
-
-text -1 95 As the tip is filled, it slowly turns
-text -1 105 into a hill, which is grassed over
-text -1 115 when it is full.
-
-text -1 130 The following 4 graphics show tips that
-text -1 140 are hardly worked to nearly exhausted.
-
-text -1 155 Transport (not shown) connects to the top left
-text -1 165 hand corner of the tip as usual.
-
-icon 30 200 tip1.csi
-icon 125 200 tip2.csi
-icon 215 200 tip3.csi
-icon 310 200 tip4.csi
-
-text 40 300 See also:
-tbutton 40 320 market.hlp Markets

Deleted: trunk/data/help/track.hlp
===================================================================
--- trunk/data/help/track.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/track.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,9 +0,0 @@
-text -1 15 Tracks
-text -1 50 Tracks are the simplest, and cheapest,
-text -1 60 form of transport. They also have the lowest 
-text -1 70 capacity. On the other hand, they produce
-text -1 80 no pollution.
-
-text 50 140 See also:
-tbutton 50 160 transport.hlp Transport
-tbutton 50 180 commune.hlp Communes

Deleted: trunk/data/help/transport.hlp
===================================================================
--- trunk/data/help/transport.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/transport.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,30 +0,0 @@
-text -1 15 Transport - page 1 of 4
-
-text -1 30 There are three types of transport in lin-city,
-text -1 40 tracks, roads and railways. There is a fourth
-text -1 50 form that consists of 'hopping across a field'.
-text -1 60 This is a short range form of trading and will
-text -1 70 not be referred to as transport again. However,
-text -1 80 it is very important and will be dealt with
-text -1 90 before tracks, roads and railways.
-
-text -1 115 People can obtain food, goods and employment
-text -1 125 from markets that are within walking distance
-text -1 135 of their residential area. See below for an
-text -1 145 example of the distances involved. Be
-text -1 155 conservative until you have got the feel of it.
-
-icon 60 200 resmedlow.csi
-icon 130 270 resmedlow.csi
-icon 220 230 market-full.csi
-
-tbutton 30 270 residential.hlp Residences
-tbutton 210 270 market.hlp Market
-
-text 120 204 This residence is out of range.
-text 192 304 This one is within
-text 188 314 range of the market.
-
-text -1 341 [This is only a rough guide, no rulers please]
-
-tbutton -1 375 transport2.hlp Next Page

Deleted: trunk/data/help/transport2.hlp
===================================================================
--- trunk/data/help/transport2.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/transport2.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,34 +0,0 @@
-text -1 15 Transport  page 2 of 4
-
-text -1 40 All areas that require jobs (employees) get
-text -1 50 them from markets. (For example a steel works
-text -1 60 will get its employees from a local market.)
-text -1 70 They can also get them from passing transport.
-
-text -1 85 Farms can sell their food directly to markets,
-text -1 95 they do not have to deal with transport at all.
-
-text -1 110 Mills, Potteries and blacksmiths sell goods
-text -1 120 directly to nearby markets, they also get
-text -1 130 their raw materials from the same markets.
-#text -1 140 
-
-text -1 160 The following areas deal with transport
-text -1 170 and markets. It's up to you what you use,
-text -1 180 - markets hold more 'stock' than transport.
-
-tbutton 65 215 residential.hlp Residences
-tbutton 65 235 powerssolar.hlp Solar Power Stations
-tbutton 65 255 farm.hlp Farms
-tbutton 65 275 university.hlp Universities
-tbutton 65 295 health.hlp Medical Centres
-tbutton 65 315 rocket.hlp Rocket Launch Sites
-
-tbutton 250 215 windmill.hlp Wind Mills
-tbutton 250 235 monument.hlp Monuments
-tbutton 250 255 school.hlp Schools
-tbutton 250 275 blacksmith.hlp Blacksmiths
-tbutton 250 295 mill.hlp Mills
-tbutton 250 315 pottery.hlp Potteries
-
-tbutton -1 360 transport3.hlp Next Page - tracks, roads and railways

Deleted: trunk/data/help/transport3.hlp
===================================================================
--- trunk/data/help/transport3.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/transport3.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,60 +0,0 @@
-text -1 15 Tracks Roads and Railways Page 3 of 4
-
-text -1 30 Tracks, roads and railways are used to
-text -1 40 carry food, jobs, goods, coal, ore and steel
-text -1 50 between areas.
-
-text -1 65 The following areas connect to transport
-text -1 75 at the top left hand edge (see example
-text -1 85 below).
-
-tbutton 34 100 industryl.hlp Light indusrty
-tbutton 180 100 oremine.hlp Ore mines
-tbutton 280 100 tip.hlp Tips
-tbutton 34 120 port.hlp Ports
-tbutton 100 120 coalmine.hlp Coal mines
-tbutton 220 120 industryh.hlp Heavy industry
-tbutton 100 140 recycle.hlp Recycling centres
-
-text -1 165 An exception is the coal power station.
-
-
-icon 120 200 coalmine-full.csi
-icon 104 200 roadlr.csi
-icon 88 200 roadlr.csi
-icon 72 200 roadlr.csi
-icon 56 200 roaddr.csi
-/icon 40 200 roaddr.csi
-icon 40 216 powerscoal-full.csi
-
-icon 120 184 raildr.csi
-icon 136 184 raillr.csi
-icon 150 184 raillr.csi
-icon 166 184 raillr.csi
-icon 180 184 raillr.csi
-
-text 210 190 This shows a coal fired
-text 210 200 power station connected
-text 210 210 to a coalmine with
-text 210 220 a road.
-text 210 235 A railway is coming out
-text 210 245 of the top gate of the
-text 210 255 coalmine and going off
-text 210 265 to the right.
-
-icon 104 248 roadud.csi
-icon 104 264 roadud.csi
-icon 104 280 roadud.csi
-icon 104 296 roadud.csi
-icon 88 296 market-full.csi
-
-text 130 296 This market is connected to this
-text 130 306 road, the road is NOT connected
-text 130 316 to either the mine nor the
-text 130 326 power station.
-
-tbutton 130 270 coalmine.hlp Coalmine
-tbutton 21 285 powercoal.hlp Coal PS
-tbutton 25 310 market.hlp Market
-
-tbutton -1 350 transport4.hlp Next page - Crossing rivers

Deleted: trunk/data/help/transport4.hlp
===================================================================
--- trunk/data/help/transport4.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/transport4.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,29 +0,0 @@
-
-text -1 15 Transport - page 4 of 4
-
-text -1 30 Crossing rivers
-
-text -1 45 To cross a river with transport,
-text -1 55 simply bulldoze the river away and
-text -1 65 build a road, or whatever, through
-text -1 75 the gap.
-
-text -1 90 (With a little imagination), think
-text -1 100 of this as building a bridge.
-text -1 110 It costs you enough as bulldozing
-text -1 120 water is very expensive.
-
-icon 200 200 waterd.csi
-icon 200 216 waterurd.csi
-icon 216 216 waterld.csi
-icon 200 232 waterur.csi
-icon 216 232 waterlu.csi
-icon 184 248 roadlr.csi
-icon 200 248 roadlr.csi
-icon 216 248 roadlr.csi
-icon 232 248 roadlr.csi
-icon 248 248 roadlr.csi
-icon 216 264 waterrd.csi
-icon 232 264 waterld.csi
-icon 216 280 waterur.csi
-icon 232 280 waterlu.csi

Deleted: trunk/data/help/university.hlp
===================================================================
--- trunk/data/help/university.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/university.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,34 +0,0 @@
-text -1 15 University
-
-text -1 30 Universities help to increase your
-text -1 40 technology level. In the process they
-text -1 50 consume goods and jobs. They produce more
-text -1 60 than schools for a given goods/jobs input.
-text -1 70 However, they use a lot of these
-text -1 80 and also cost quite a lot of money to run,
-text -1 90 so you should have the economic and
-text -1 100 industrial capacity to supply them.
-
-text -1 115 You will need a number of universities to
-text -1 125 achieve a tech level close to 100%
-
-text -1 145 Universities do not need to be connected to
-text -1 155 transport; they can get all thier requirements
-text -1 165 from markets (which must be in range and have
-text -1 175 goods and jobs available).
-
-text -1 190 ---- NOTE ----
-text -1 203 You MUST have 5 schools PER university to
-text -1 213 supply it with students.
-
-text 40 245 See also:
-tbutton 50 265 market.hlp Markets
-tbutton 50 285 transport.hlp Transport
-tbutton 50 305 goods.hlp Goods
-tbutton 50 325 jobs.hlp Jobs
-
-icon 220 260 university.csi
-text 195 320 A university
-/text 150 335 [ Thanks to:
-/text 150 345 jasper at wulfrun.demon.co.uk ]
-

Deleted: trunk/data/help/windmill.hlp
===================================================================
--- trunk/data/help/windmill.hlp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/help/windmill.hlp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -1,34 +0,0 @@
-text -1 15 Windmills
-
-text -1 30 Windmills provide power for residences
-text -1 40 and farms. They enable the farmer to
-text -1 50 process food more eficiently and make
-text -1 60 residences more desirable.
-
-text -1 75 Providing power to residences makes the
-text -1 85 people there use more goods.
-
-text -1 95 Low tech windmills do NOT provide power
-text -1 105 to industries. (Heavy industry
-text -1 115 can get power from coal, light industry
-text -1 125 needs 'real' electricity to be
-text -1 135 'powered', they still work without power
-text -1 145 at a lower output.)
-
-text -1 160 There are two forms of windmills. The
-text -1 170 first is a low-tech 'wooden' windmill.
-text -1 180 The second is a 'modern' wind-farm type.
-
-icon 130 210 windmill1w.csi
-icon 230 210 windmill1g.csi
-
-text -1 255 The type you get depends on your
-text -1 265 tech-level when you build it.
-
-icon 216 316 windmill1g.csi
-icon 216 300 powerlldl.csi
-icon 200 300 powerlhd.csi
-icon 184 300 powerlhl.csi
-
-text -1 360 High tech ones can supply power lines.
-

Modified: trunk/data/locale/ca.po
===================================================================
--- trunk/data/locale/ca.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/ca.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -5,7 +5,7 @@
 msgstr ""
 "Project-Id-Version: ca\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2005-08-07 13:44+0000\n"
+"POT-Creation-Date: 2007-12-04 00:29+0100\n"
 "PO-Revision-Date: 2005-08-12 20:05+0000\n"
 "Last-Translator: Joan Padr?? <info at lutesor.com>\n"
 "Language-Team: Catal?? <ca at li.org>\n"
@@ -14,494 +14,501 @@
 "Content-Transfer-Encoding: 8bit\n"
 "X-Generator: KBabel 1.10.1\n"
 
-#: src/lincity/fileutil.cpp:292 src/lincity/fileutil.cpp:341
-msgid "Error. Can't find LINCITY_HOME"
-msgstr "Error: No es pot trobar el LINCITY_HOME"
-
-#: src/lincity/fileutil.cpp:561
-msgid "Error verifying package. Can't find colour.pal."
-msgstr "Error verificar paquet. No es troba color.pal."
-
-#: src/lincity/fileutil.cpp:580
-#, c-format
-msgid "Couldn't create the save directory '%s'\n"
-msgstr "No s'ha pogut crear el directori '%s'\n"
-
-#: src/lincity/fileutil.cpp:635
-#, c-format
-msgid "Out of memory: malloc failure\n"
-msgstr "Mem??ria insuficient: fallida general\n"
-
-#: src/lincity/power.cpp:93
-msgid "You have too many power grids. Join some of them"
-msgstr ""
-
-#: src/lincity/engine.cpp:121
+#: src/lincity/engine.cpp:120
 msgid ""
 "ERROR: group does not exist. This should not happen! Please consider filling "
 "a bug report to lincity-ng team, with the saved game and what you did :-) "
 msgstr ""
 
-#: src/lincity/engine.cpp:147
+#: src/lincity/engine.cpp:152
 msgid "Port must be connected to river all along right side."
 msgstr ""
 
-#: src/lincity/engine.cpp:156 src/lincity/engine.cpp:165
+#: src/lincity/engine.cpp:161 src/lincity/engine.cpp:170
 msgid "Too many substations + windmills. You cannot build one more"
 msgstr ""
 
-#: src/lincity/engine.cpp:195
+#: src/lincity/engine.cpp:200
 msgid "Too many markets. You cannot build one more"
 msgstr ""
 
-#: src/lincity/engine.cpp:218
+#: src/lincity/engine.cpp:223
 msgid "You can't build a tip here: this area was once a landfill"
 msgstr ""
 
-#: src/lincity/engine.cpp:243
+#: src/lincity/engine.cpp:248
 msgid "You can't build a mine here: This area was once a landfill"
 msgstr ""
 
-#: src/lincity/engine.cpp:247
+#: src/lincity/engine.cpp:252
 msgid "You can't build a mine here: there is no ore left at this site"
 msgstr ""
 
-#: src/lincity/engine.cpp:259
+#: src/lincity/engine.cpp:264
 msgid "You can't build a water well here: it is all desert."
 msgstr ""
 
-#: src/lincity/engine.cpp:269
+#: src/lincity/engine.cpp:274
 msgid "You can't build a park here: it is a desert, parks need water"
 msgstr ""
 
-#: src/lincity/engine.cpp:691
+#: src/lincity/engine.cpp:485
 msgid "It's at a power line."
 msgstr "Aix?? ??s una l??nea electrica"
 
-#: src/lincity/engine.cpp:693
+#: src/lincity/engine.cpp:487
 msgid "It's at a solar power station."
 msgstr "Aix?? ??s una central solar"
 
-#: src/lincity/engine.cpp:695
+#: src/lincity/engine.cpp:489
 msgid "It's at a substation."
 msgstr "Aix?? ??s una sub-estaci??"
 
-#: src/lincity/engine.cpp:697
+#: src/lincity/engine.cpp:491
 msgid "It's at a residential area."
 msgstr "Aix?? ??s una area residencial"
 
-#: src/lincity/engine.cpp:699
+#: src/lincity/engine.cpp:493
 msgid "It's at a farm."
 msgstr "Aix?? ??s una Grange"
 
-#: src/lincity/engine.cpp:701
+#: src/lincity/engine.cpp:495
 msgid "It's at a market."
 msgstr "Aix?? ??s un Mercat"
 
-#: src/lincity/engine.cpp:703
+#: src/lincity/engine.cpp:497
 msgid "It's at a track."
 msgstr "Aix?? ??s un cam??"
 
-#: src/lincity/engine.cpp:705
+#: src/lincity/engine.cpp:499
 msgid "It's at a coal mine."
 msgstr "Aix?? ??s una mine de carb??"
 
-#: src/lincity/engine.cpp:707
+#: src/lincity/engine.cpp:501
 msgid "It's at a railway."
 msgstr "Aix?? ??s una Via"
 
-#: src/lincity/engine.cpp:709
+#: src/lincity/engine.cpp:503
 msgid "It's at a coal power station."
 msgstr "Aix?? ??s una central de carb??"
 
-#: src/lincity/engine.cpp:711
+#: src/lincity/engine.cpp:505
 msgid "It's at a road."
 msgstr "Aix?? ??s una Carretera"
 
-#: src/lincity/engine.cpp:713
+#: src/lincity/engine.cpp:507
 msgid "It's at light industry."
 msgstr "Aix?? ??s una Ind??stria electrica"
 
-#: src/lincity/engine.cpp:715
+#: src/lincity/engine.cpp:509
 msgid "It's at a university."
 msgstr "Aix?? ??s una Universitat"
 
-#: src/lincity/engine.cpp:717
+#: src/lincity/engine.cpp:511
 msgid "It's at a commune."
 msgstr "Aix?? ??s una comune"
 
-#: src/lincity/engine.cpp:719
+#: src/lincity/engine.cpp:513
 msgid "It's at a tip."
 msgstr "Aix?? ??s una deixeller??a"
 
-#: src/lincity/engine.cpp:721
+#: src/lincity/engine.cpp:515
 msgid "It's at a port."
 msgstr "Aix?? ??s el Port"
 
-#: src/lincity/engine.cpp:723
+#: src/lincity/engine.cpp:517
 msgid "It's at a steel works."
 msgstr "Taller Mec??nic"
 
-#: src/lincity/engine.cpp:725
+#: src/lincity/engine.cpp:519
 msgid "It's at a recycle centre."
 msgstr "Centre de Reciclat"
 
-#: src/lincity/engine.cpp:727
+#: src/lincity/engine.cpp:521
 msgid "It's at a health centre."
 msgstr "Aix?? ??s un Centre Hospitalari"
 
-#: src/lincity/engine.cpp:729
+#: src/lincity/engine.cpp:523
 msgid "It's at a rocket site."
 msgstr "Aix?? ??s una plataforma de cohets"
 
-#: src/lincity/engine.cpp:731
+#: src/lincity/engine.cpp:525
 msgid "It's at a windmill."
 msgstr "Aix?? ??s un mol??"
 
-#: src/lincity/engine.cpp:733
+#: src/lincity/engine.cpp:527
 msgid "It's at a school."
 msgstr "Aix?? ??s una Escola"
 
-#: src/lincity/engine.cpp:735
+#: src/lincity/engine.cpp:529
 msgid "It's at a blacksmith."
 msgstr "Aix?? ??s una Farga"
 
-#: src/lincity/engine.cpp:737
+#: src/lincity/engine.cpp:531
 msgid "It's at a mill."
 msgstr "Aix?? ??s una f??brica"
 
-#: src/lincity/engine.cpp:739
+#: src/lincity/engine.cpp:533
 msgid "It's at a pottery."
 msgstr "Aix?? ??s un taller de cer??mique"
 
-#: src/lincity/engine.cpp:741
+#: src/lincity/engine.cpp:535
 msgid "It's at a fire station!!!."
 msgstr "Aix?? ??s una Estaci?? de Bombers"
 
-#: src/lincity/engine.cpp:743
+#: src/lincity/engine.cpp:537
 msgid "It's at a sports field!!!."
 msgstr "Aix?? ??s un Poliesportiu"
 
-#: src/lincity/engine.cpp:745
+#: src/lincity/engine.cpp:539
 msgid "It's at a shanty town."
 msgstr "Aix?? ??s na gossera"
 
-#: src/lincity/engine.cpp:747
+#: src/lincity/engine.cpp:541
 msgid "UNKNOWN!"
 msgstr "DESCONEGUT!"
 
-#: src/lincity/lintypes.cpp:22
+#: src/lincity/lintypes.cpp:20
 msgid "Empty"
 msgstr "Buit"
 
-#: src/lincity/lintypes.cpp:34
+#: src/lincity/lintypes.cpp:32
 msgid "Power line"
 msgstr "Linea el??ctrica "
 
-#: src/lincity/lintypes.cpp:46
+#: src/lincity/lintypes.cpp:43
 msgid "Solar PS"
 msgstr "Solar PS"
 
-#: src/lincity/lintypes.cpp:58 src/lincity/modules/substation.cpp:91
+#: src/lincity/lintypes.cpp:54 src/lincity/modules/substation.cpp:93
 msgid "Substation"
 msgstr "Sub-estaci??"
 
-#: src/lincity/lintypes.cpp:70
+#: src/lincity/lintypes.cpp:65
 msgid "Residential LL"
 msgstr "Residencial LL"
 
-#: src/lincity/lintypes.cpp:82
+#: src/lincity/lintypes.cpp:76
 msgid "Farm"
 msgstr "Granja"
 
-#: src/lincity/lintypes.cpp:94 src/lincity/modules/market.cpp:1143
-#: src/lincity-ng/Dialog.cpp:486
+#: src/lincity/lintypes.cpp:87 src/lincity/modules/market.cpp:979
+#: src/lincity-ng/Dialog.cpp:507
 msgid "Market"
 msgstr "Mercat"
 
-#: src/lincity/lintypes.cpp:106 src/lincity/modules/track.cpp:38
+#: src/lincity/lintypes.cpp:98 src/lincity/modules/track.cpp:34
 msgid "Track"
 msgstr "Cam??"
 
-#: src/lincity/lintypes.cpp:118
+#: src/lincity/lintypes.cpp:109
 msgid "Coalmine"
 msgstr "Mina de carb??"
 
-#: src/lincity/lintypes.cpp:130
+#: src/lincity/lintypes.cpp:120
 msgid "Railway"
 msgstr "Via"
 
-#: src/lincity/lintypes.cpp:142
+#: src/lincity/lintypes.cpp:131
 msgid "Coal PS"
 msgstr "Coure PS"
 
-#: src/lincity/lintypes.cpp:154 src/lincity/modules/road.cpp:47
+#: src/lincity/lintypes.cpp:142 src/lincity/modules/road.cpp:43
 msgid "Road"
 msgstr "Carretera"
 
-#: src/lincity/lintypes.cpp:166
+#: src/lincity/lintypes.cpp:153
 msgid "Lt. Industry"
 msgstr "Petita Ind??stria"
 
-#: src/lincity/lintypes.cpp:178 src/lincity/modules/university.cpp:67
+#: src/lincity/lintypes.cpp:164 src/lincity/modules/university.cpp:59
 msgid "University"
 msgstr "Universitat"
 
-#: src/lincity/lintypes.cpp:190 src/lincity/modules/commune.cpp:142
+#: src/lincity/lintypes.cpp:175 src/lincity/modules/commune.cpp:172
 msgid "Commune"
 msgstr "Comuna"
 
-#: src/lincity/lintypes.cpp:202
+#: src/lincity/lintypes.cpp:186
 msgid "Ore mine"
 msgstr "Mina de coure"
 
-#: src/lincity/lintypes.cpp:214
+#: src/lincity/lintypes.cpp:197
 msgid "Rubbish tip"
 msgstr "Deixelleria"
 
-#: src/lincity/lintypes.cpp:226 src/lincity/modules/port.cpp:202
-#: src/lincity-ng/Dialog.cpp:540
+#: src/lincity/lintypes.cpp:208 src/lincity/modules/port.cpp:281
+#: src/lincity-ng/Dialog.cpp:561
 msgid "Port"
 msgstr "Port"
 
-#: src/lincity/lintypes.cpp:238
+#: src/lincity/lintypes.cpp:219
 msgid "Hv. Industry"
 msgstr "Industria pesada"
 
-#: src/lincity/lintypes.cpp:250
+#: src/lincity/lintypes.cpp:230
 msgid "Park"
 msgstr "Parq"
 
-#: src/lincity/lintypes.cpp:262 src/lincity-ng/MpsInterface.cpp:513
+#: src/lincity/lintypes.cpp:241 src/lincity-ng/MpsInterface.cpp:519
 msgid "Recycle"
 msgstr "Reciclat"
 
-#: src/lincity/lintypes.cpp:274 src/lincity/modules/water.cpp:19
+#: src/lincity/lintypes.cpp:252 src/lincity/modules/water.cpp:17
+#: src/lincity/modules/residence.cpp:264
 msgid "Water"
 msgstr "Aig??a"
 
-#: src/lincity/lintypes.cpp:286
+#: src/lincity/lintypes.cpp:263
 msgid "Health centre"
 msgstr "Centre Hospitalari"
 
-#: src/lincity/lintypes.cpp:298
+#: src/lincity/lintypes.cpp:274
 msgid "Rocket pad"
 msgstr "Cohet"
 
-#: src/lincity/lintypes.cpp:310 src/lincity/modules/windmill.cpp:73
-#: src/lincity-ng/MpsInterface.cpp:503
+#: src/lincity/lintypes.cpp:285 src/lincity/modules/windmill.cpp:75
+#: src/lincity-ng/MpsInterface.cpp:509
 msgid "Windmill"
 msgstr "Mol??"
 
-#: src/lincity/lintypes.cpp:322 src/lincity/modules/monument.cpp:57
+#: src/lincity/lintypes.cpp:296 src/lincity/modules/monument.cpp:51
 msgid "Monument"
 msgstr "Monument"
 
-#: src/lincity/lintypes.cpp:334 src/lincity/modules/school.cpp:49
+#: src/lincity/lintypes.cpp:307 src/lincity/modules/school.cpp:43
 msgid "School"
 msgstr "Escola"
 
-#: src/lincity/lintypes.cpp:346 src/lincity/modules/blacksmith.cpp:97
+#: src/lincity/lintypes.cpp:318 src/lincity/modules/blacksmith.cpp:90
 msgid "Blacksmith"
 msgstr "Farga"
 
-#: src/lincity/lintypes.cpp:358
+#: src/lincity/lintypes.cpp:329
 msgid "Mill"
 msgstr "Mol??"
 
-#: src/lincity/lintypes.cpp:370 src/lincity/modules/pottery.cpp:119
+#: src/lincity/lintypes.cpp:340 src/lincity/modules/pottery.cpp:104
 msgid "Pottery"
 msgstr "Terrisseria"
 
-#: src/lincity/lintypes.cpp:382
+#: src/lincity/lintypes.cpp:351
 msgid "Fire sta'n"
 msgstr "Bombers"
 
-#: src/lincity/lintypes.cpp:394 src/lincity/modules/cricket.cpp:99
+#: src/lincity/lintypes.cpp:362 src/lincity/modules/cricket.cpp:91
 msgid "Sports field"
 msgstr "Estadi Poliesportiu"
 
-#: src/lincity/lintypes.cpp:407
+#: src/lincity/lintypes.cpp:374
 msgid "Burnt"
 msgstr "Cremar"
 
-#: src/lincity/lintypes.cpp:420
+#: src/lincity/lintypes.cpp:386
 msgid "Shanty town"
 msgstr "Pipican "
 
-#: src/lincity/lintypes.cpp:433 src/lincity/modules/residence.cpp:292
-#: src/lincity-ng/MpsInterface.cpp:377 src/lincity-ng/EconomyGraph.cpp:131
+#: src/lincity/lintypes.cpp:398 src/lincity/modules/residence.cpp:283
+#: src/lincity-ng/MpsInterface.cpp:383 src/lincity-ng/EconomyGraph.cpp:134
 msgid "Fire"
 msgstr "Foc"
 
-#: src/lincity/lintypes.cpp:446
+#: src/lincity/lintypes.cpp:410
 msgid "Used"
 msgstr "Ocupat"
 
-#: src/lincity/lintypes.cpp:458
+#: src/lincity/lintypes.cpp:421
 msgid "Residential ML"
 msgstr "Residencia ML"
 
-#: src/lincity/lintypes.cpp:470
+#: src/lincity/lintypes.cpp:432
 msgid "Residential HL"
 msgstr "Residencia HL"
 
-#: src/lincity/lintypes.cpp:444
+#: src/lincity/lintypes.cpp:443
 msgid "Residential LH"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:455
+#: src/lincity/lintypes.cpp:454
 msgid "Residential MH"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:466
+#: src/lincity/lintypes.cpp:465
 msgid "Residential HH"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:477
+#: src/lincity/lintypes.cpp:476
 msgid "Water well"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:489
+#: src/lincity/lintypes.cpp:488
 msgid "Desert"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:501
+#: src/lincity/lintypes.cpp:500
 msgid "Tree"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:514
+#: src/lincity/lintypes.cpp:513
 msgid "Trees"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:527
+#: src/lincity/lintypes.cpp:526
 msgid "Forest"
 msgstr ""
 
-#: src/lincity/ldsvguts.cpp:128
+#: src/lincity/ldsvguts.cpp:137
 #, c-format
 msgid "Save file <%s> - "
 msgstr "Desa fitxer<%s> - "
 
-#: src/lincity/ldsvguts.cpp:129
+#: src/lincity/ldsvguts.cpp:138
 msgid "Can't open save file!"
 msgstr "No es pot obrir el fitxer de desar!"
 
-#: src/lincity/ldsvguts.cpp:134
+#: src/lincity/ldsvguts.cpp:148
 msgid "Saving scene"
 msgstr "Desant escena"
 
-#: src/lincity/ldsvguts.cpp:334
+#: src/lincity/ldsvguts.cpp:362
 #, c-format
 msgid "Can't open <%s> (gzipped)"
 msgstr "No es pot obrir <%s> (gzipped)"
 
-#: src/lincity/ldsvguts.cpp:352
+#: src/lincity/ldsvguts.cpp:395
 msgid "Loading scene"
 msgstr "Obrint escena"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/fileutil.cpp:266 src/lincity/fileutil.cpp:310
+msgid "Error. Can't find LINCITY_HOME"
+msgstr "Error: No es pot trobar el LINCITY_HOME"
+
+#: src/lincity/fileutil.cpp:512
+msgid "Error verifying package. Can't find colour.pal."
+msgstr "Error verificar paquet. No es troba color.pal."
+
+#: src/lincity/fileutil.cpp:525 src/lincity/fileutil.cpp:533
+#, c-format
+msgid "Couldn't create the save directory '%s'\n"
+msgstr "No s'ha pogut crear el directori '%s'\n"
+
+#: src/lincity/fileutil.cpp:550
+#, c-format
+msgid "Out of memory: malloc failure\n"
+msgstr "Mem??ria insuficient: fallida general\n"
+
+#: src/lincity/simulate.cpp:97
+msgid ""
+"Upgrading from old game. You have 10 years to build water wells where "
+"needed. After, starvation will occur!  You should check starvation minimap, "
+"and read waterwell help page :-)"
+msgstr ""
+
+#: src/lincity/lclib.cpp:15
 msgid "Jan"
 msgstr "Gener"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Feb"
 msgstr "Febrer"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Mar"
 msgstr "Mar??"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Apr"
 msgstr "Abril"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "May"
 msgstr "Maig"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jun"
 msgstr "Juny"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jul"
 msgstr "Jul."
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Aug"
 msgstr "Agost"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Sep"
 msgstr "Set."
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Oct"
 msgstr "Oct."
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Nov"
 msgstr "Nov."
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Dec"
 msgstr "Dec."
 
-#: src/lincity/modules/health_centre.cpp:66
+#: src/lincity/power.cpp:102
+msgid "You have too many power grids. Join some of them"
+msgstr ""
+
+#: src/lincity/modules/health_centre.cpp:58
 msgid "Health Centre"
 msgstr "Hospital"
 
-#: src/lincity/modules/firestation.cpp:121 src/lincity/modules/cricket.cpp:101
-#: src/lincity/modules/university.cpp:74
-#: src/lincity/modules/health_centre.cpp:68
-#: src/lincity/modules/rocket_pad.cpp:169
-#: src/lincity/modules/blacksmith.cpp:102 src/lincity/modules/recycle.cpp:181
-#: src/lincity/modules/school.cpp:54 src/lincity/modules/mill.cpp:107
-#: src/lincity/modules/pottery.cpp:123
+#: src/lincity/modules/health_centre.cpp:60
+#: src/lincity/modules/rocket_pad.cpp:198 src/lincity/modules/recycle.cpp:148
+#: src/lincity/modules/mill.cpp:92 src/lincity/modules/university.cpp:65
+#: src/lincity/modules/cricket.cpp:93 src/lincity/modules/pottery.cpp:108
+#: src/lincity/modules/blacksmith.cpp:95 src/lincity/modules/school.cpp:48
+#: src/lincity/modules/firestation.cpp:110
 msgid "Inventory"
 msgstr "Inventari"
 
-#: src/lincity/modules/firestation.cpp:122 src/lincity/modules/cricket.cpp:102
-#: src/lincity/modules/market.cpp:1149 src/lincity/modules/university.cpp:75
-#: src/lincity/modules/health_centre.cpp:69
-#: src/lincity/modules/rocket_pad.cpp:170 src/lincity/modules/road.cpp:52
-#: src/lincity/modules/rail.cpp:55 src/lincity/modules/school.cpp:55
-#: src/lincity/modules/pottery.cpp:124 src/lincity/modules/coal_power.cpp:105
-#: src/lincity/modules/track.cpp:43
+#: src/lincity/modules/health_centre.cpp:61
+#: src/lincity/modules/rocket_pad.cpp:199 src/lincity/modules/market.cpp:984
+#: src/lincity/modules/road.cpp:47 src/lincity/modules/rail.cpp:51
+#: src/lincity/modules/coal_power.cpp:97 src/lincity/modules/university.cpp:66
+#: src/lincity/modules/cricket.cpp:94 src/lincity/modules/track.cpp:38
+#: src/lincity/modules/pottery.cpp:109 src/lincity/modules/school.cpp:49
+#: src/lincity/modules/firestation.cpp:111
 msgid "Jobs"
 msgstr "Ocupaci??"
 
-#: src/lincity/modules/firestation.cpp:124 src/lincity/modules/cricket.cpp:104
-#: src/lincity/modules/market.cpp:1153 src/lincity/modules/university.cpp:77
-#: src/lincity/modules/health_centre.cpp:71
-#: src/lincity/modules/rocket_pad.cpp:172 src/lincity/modules/road.cpp:56
-#: src/lincity/modules/blacksmith.cpp:103 src/lincity/modules/port.cpp:219
-#: src/lincity/modules/rail.cpp:59 src/lincity/modules/school.cpp:57
-#: src/lincity/modules/mill.cpp:108 src/lincity/modules/pottery.cpp:126
-#: src/lincity/modules/track.cpp:47 src/lincity-ng/MpsInterface.cpp:445
+#: src/lincity/modules/health_centre.cpp:62
+#: src/lincity/modules/rocket_pad.cpp:200 src/lincity/modules/market.cpp:986
+#: src/lincity/modules/port.cpp:298 src/lincity/modules/road.cpp:49
+#: src/lincity/modules/rail.cpp:53 src/lincity/modules/mill.cpp:93
+#: src/lincity/modules/university.cpp:67 src/lincity/modules/cricket.cpp:95
+#: src/lincity/modules/track.cpp:40 src/lincity/modules/pottery.cpp:110
+#: src/lincity/modules/blacksmith.cpp:96 src/lincity/modules/school.cpp:50
+#: src/lincity/modules/firestation.cpp:112 src/lincity-ng/MpsInterface.cpp:451
 msgid "Goods"
 msgstr "Mercader??es"
 
-#: src/lincity/modules/rocket_pad.cpp:163
+#: src/lincity/modules/rocket_pad.cpp:192
 msgid "Rocket Pad"
 msgstr "Plataforma de cohets"
 
-#: src/lincity/modules/rocket_pad.cpp:166
+#: src/lincity/modules/rocket_pad.cpp:195
 msgid "Completion"
 msgstr "Acabat"
 
-#: src/lincity/modules/commune.cpp:152 src/lincity/modules/market.cpp:1157
-#: src/lincity/modules/rocket_pad.cpp:174 src/lincity/modules/road.cpp:60
-#: src/lincity/modules/port.cpp:223 src/lincity/modules/rail.cpp:63
-#: src/lincity/modules/light_industry.cpp:368 src/lincity/modules/track.cpp:51
+#: src/lincity/modules/rocket_pad.cpp:201 src/lincity/modules/market.cpp:988
+#: src/lincity/modules/port.cpp:302 src/lincity/modules/road.cpp:51
+#: src/lincity/modules/rail.cpp:55 src/lincity/modules/light_industry.cpp:288
+#: src/lincity/modules/commune.cpp:182 src/lincity/modules/track.cpp:42
 msgid "Steel"
 msgstr "Acer"
 
-#: src/lincity/modules/windmill.cpp:77 src/lincity/modules/windmill.cpp:88
-#: src/lincity/modules/recycle.cpp:178 src/lincity/modules/coal_power.cpp:107
-#: src/lincity/modules/organic_farm.cpp:196
-#: src/lincity/modules/solar_power.cpp:58
+#: src/lincity/modules/windmill.cpp:76 src/lincity/modules/recycle.cpp:146
+#: src/lincity/modules/coal_power.cpp:98
+#: src/lincity/modules/organic_farm.cpp:230
+#: src/lincity/modules/solar_power.cpp:60
 msgid "Tech"
 msgstr "Tec"
 
@@ -513,784 +520,786 @@
 msgid "Prod."
 msgstr "Prod."
 
-#: src/lincity/modules/windmill.cpp:86 src/lincity/modules/windmill.cpp:101
-#: src/lincity/modules/substation.cpp:108
+#: src/lincity/modules/windmill.cpp:86 src/lincity/modules/windmill.cpp:99
+#: src/lincity/modules/substation.cpp:110
 msgid "Demand"
 msgstr "Demanda"
 
-#: src/lincity/modules/windmill.cpp:92 src/lincity/modules/substation.cpp:99
+#: src/lincity/modules/windmill.cpp:90 src/lincity/modules/substation.cpp:101
 msgid "Grid Status"
 msgstr "Estat Graella"
 
-#: src/lincity/modules/windmill.cpp:95 src/lincity/modules/substation.cpp:102
+#: src/lincity/modules/windmill.cpp:93 src/lincity/modules/substation.cpp:104
 msgid "T. Cap."
 msgstr "T. Cap"
 
-#: src/lincity/modules/windmill.cpp:98 src/lincity/modules/substation.cpp:105
+#: src/lincity/modules/windmill.cpp:96 src/lincity/modules/substation.cpp:107
 msgid "A. Cap."
 msgstr "A. Cap"
 
-#: src/lincity/modules/windmill.cpp:104 src/lincity/modules/power_line.cpp:53
-#: src/lincity/modules/coal_power.cpp:109
-#: src/lincity/modules/solar_power.cpp:60
-#: src/lincity/modules/substation.cpp:111
+#: src/lincity/modules/windmill.cpp:102 src/lincity/modules/coal_power.cpp:99
+#: src/lincity/modules/substation.cpp:113
+#: src/lincity/modules/power_line.cpp:49
+#: src/lincity/modules/solar_power.cpp:61
 msgid "Grid ID"
 msgstr "Graella ID"
 
-#: src/lincity/modules/commune.cpp:147 src/lincity/modules/commune.cpp:149
-#: src/lincity/modules/commune.cpp:151 src/lincity/modules/commune.cpp:153
-#: src/lincity/modules/water.cpp:22 src/lincity-ng/MpsInterface.cpp:376
-#: src/lincity-ng/MpsInterface.cpp:379 src/lincity-ng/MpsInterface.cpp:382
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/waterwell.cpp:50
+#: src/lincity/modules/commune.cpp:177 src/lincity/modules/commune.cpp:179
+#: src/lincity/modules/commune.cpp:181 src/lincity/modules/commune.cpp:183
+#: src/lincity-ng/MpsInterface.cpp:382 src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity-ng/MpsInterface.cpp:388
 msgid "Yes"
 msgstr "Si"
 
-#: src/lincity/modules/commune.cpp:147 src/lincity/modules/commune.cpp:149
-#: src/lincity/modules/commune.cpp:151 src/lincity/modules/commune.cpp:153
-#: src/lincity/modules/water.cpp:22 src/lincity-ng/MpsInterface.cpp:376
-#: src/lincity-ng/MpsInterface.cpp:379 src/lincity-ng/MpsInterface.cpp:382
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/commune.cpp:177
+#: src/lincity/modules/commune.cpp:179 src/lincity/modules/commune.cpp:181
+#: src/lincity/modules/commune.cpp:183 src/lincity-ng/MpsInterface.cpp:382
+#: src/lincity-ng/MpsInterface.cpp:385 src/lincity-ng/MpsInterface.cpp:388
 msgid "No"
 msgstr "No"
 
-#: src/lincity/modules/water.cpp:23
+#: src/lincity/modules/water.cpp:21
 msgid "Navigable"
 msgstr "Navegable"
 
-#: src/lincity/modules/recycle.cpp:169
+#: src/lincity/modules/recycle.cpp:137
 msgid "Recycling"
 msgstr "Reciclar"
 
-#: src/lincity/modules/recycle.cpp:170
+#: src/lincity/modules/recycle.cpp:138
 msgid "Center"
 msgstr "Centre"
 
-#: src/lincity/modules/university.cpp:79
-#: src/lincity/modules/blacksmith.cpp:100
-#: src/lincity/modules/light_industry.cpp:370
-#: src/lincity/modules/recycle.cpp:173 src/lincity/modules/school.cpp:60
-#: src/lincity/modules/mill.cpp:105 src/lincity/modules/pottery.cpp:121
-#: src/lincity/modules/heavy_industry.cpp:346
+#: src/lincity/modules/recycle.cpp:141
+#: src/lincity/modules/heavy_industry.cpp:288 src/lincity/modules/mill.cpp:90
+#: src/lincity/modules/light_industry.cpp:289
+#: src/lincity/modules/university.cpp:68 src/lincity/modules/pottery.cpp:106
+#: src/lincity/modules/blacksmith.cpp:93 src/lincity/modules/school.cpp:52
 msgid "Capacity"
 msgstr "Capacitat"
 
-#: src/lincity/modules/light_industry.cpp:359
-#: src/lincity/modules/recycle.cpp:175
-#: src/lincity/modules/organic_farm.cpp:188
-#: src/lincity/modules/residence.cpp:279 src/lincity/modules/residence.cpp:282
-#: src/lincity/modules/residence.cpp:285 src/lincity/modules/residence.cpp:288
-#: src/lincity/modules/residence.cpp:291 src/lincity/modules/residence.cpp:294
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
+#: src/lincity/modules/light_industry.cpp:281
+#: src/lincity/modules/organic_farm.cpp:223
 msgid "YES"
 msgstr "Si"
 
-#: src/lincity/modules/light_industry.cpp:359
-#: src/lincity/modules/recycle.cpp:175
-#: src/lincity/modules/heavy_industry.cpp:334
-#: src/lincity/modules/residence.cpp:279 src/lincity/modules/residence.cpp:282
-#: src/lincity/modules/residence.cpp:285 src/lincity/modules/residence.cpp:288
-#: src/lincity/modules/residence.cpp:291 src/lincity/modules/residence.cpp:294
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
+#: src/lincity/modules/heavy_industry.cpp:279
+#: src/lincity/modules/light_industry.cpp:281
 msgid "NO"
 msgstr "No"
 
-#: src/lincity/modules/light_industry.cpp:360
-#: src/lincity/modules/recycle.cpp:176
-#: src/lincity/modules/heavy_industry.cpp:337
-#: src/lincity/modules/organic_farm.cpp:193
-#: src/lincity/modules/residence.cpp:280
+#: src/lincity/modules/recycle.cpp:144 src/lincity/modules/residence.cpp:271
+#: src/lincity/modules/heavy_industry.cpp:282
+#: src/lincity/modules/light_industry.cpp:282
+#: src/lincity/modules/organic_farm.cpp:227
 msgid "Power"
 msgstr "Energ??a"
 
-#: src/lincity/modules/commune.cpp:150 src/lincity/modules/market.cpp:1155
-#: src/lincity/modules/road.cpp:58 src/lincity/modules/port.cpp:215
-#: src/lincity/modules/rail.cpp:61 src/lincity/modules/light_industry.cpp:366
-#: src/lincity/modules/recycle.cpp:182 src/lincity/modules/pottery.cpp:128
-#: src/lincity/modules/heavy_industry.cpp:342 src/lincity/modules/track.cpp:49
+#: src/lincity/modules/recycle.cpp:149
+#: src/lincity/modules/heavy_industry.cpp:286
+#: src/lincity/modules/market.cpp:987 src/lincity/modules/port.cpp:294
+#: src/lincity/modules/road.cpp:50 src/lincity/modules/rail.cpp:54
+#: src/lincity/modules/light_industry.cpp:287
+#: src/lincity/modules/commune.cpp:180 src/lincity/modules/track.cpp:41
+#: src/lincity/modules/pottery.cpp:111
 msgid "Ore"
 msgstr "Coure"
 
-#: src/lincity/modules/commune.cpp:154 src/lincity/modules/market.cpp:1159
-#: src/lincity/modules/road.cpp:62 src/lincity/modules/rail.cpp:65
-#: src/lincity/modules/recycle.cpp:184 src/lincity/modules/track.cpp:53
+#: src/lincity/modules/recycle.cpp:150 src/lincity/modules/market.cpp:989
+#: src/lincity/modules/road.cpp:52 src/lincity/modules/rail.cpp:56
+#: src/lincity/modules/commune.cpp:184 src/lincity/modules/track.cpp:43
 msgid "Waste"
 msgstr "Escombrer??es"
 
-#: src/lincity/modules/coalmine.cpp:168
+#: src/lincity/modules/coalmine.cpp:132
 msgid "Coal Mine"
 msgstr "Mina de carb??"
 
-#: src/lincity/modules/coalmine.cpp:171 src/lincity/modules/oremine.cpp:187
+#: src/lincity/modules/coalmine.cpp:135 src/lincity/modules/oremine.cpp:144
 msgid "Stock"
 msgstr "Magatsem"
 
-#: src/lincity/modules/coalmine.cpp:175 src/lincity/modules/coalmine.cpp:177
-#: src/lincity/modules/oremine.cpp:191
+#: src/lincity/modules/coalmine.cpp:138 src/lincity/modules/coalmine.cpp:140
+#: src/lincity/modules/oremine.cpp:147
 msgid "Reserve"
 msgstr "Reserva"
 
-#: src/lincity/modules/coalmine.cpp:177
+#: src/lincity/modules/coalmine.cpp:140
 msgid "EMPTY"
 msgstr "BUIT"
 
-#: src/lincity/modules/residence.cpp:273
+#: src/lincity/modules/residence.cpp:255
 msgid "Residence"
 msgstr "Residencia"
 
-#: src/lincity/modules/residence.cpp:277
+#: src/lincity/modules/residence.cpp:259
 msgid "People"
 msgstr "Persones"
 
-#: src/lincity/modules/residence.cpp:283
+#: src/lincity/modules/residence.cpp:268
 msgid "Fed"
 msgstr "Menjar"
 
-#: src/lincity/modules/residence.cpp:286
+#: src/lincity/modules/residence.cpp:274
 msgid "Employed"
 msgstr "Ampleats"
 
-#: src/lincity/modules/residence.cpp:299 src/lincity-ng/MpsInterface.cpp:390
+#: src/lincity/modules/residence.cpp:276 src/lincity-ng/MpsInterface.cpp:396
 msgid "good"
 msgstr "B??"
 
-#: src/lincity/modules/residence.cpp:299
+#: src/lincity/modules/residence.cpp:276
 msgid "poor"
 msgstr "Pobres"
 
-#: src/lincity/modules/residence.cpp:300
+#: src/lincity/modules/residence.cpp:277
 msgid "Job"
 msgstr "Treballs"
 
-#: src/lincity/modules/residence.cpp:289
+#: src/lincity/modules/residence.cpp:280
 msgid "Health Cvr"
 msgstr "Salud Cvr"
 
-#: src/lincity/modules/residence.cpp:295 src/lincity-ng/MpsInterface.cpp:383
-#: src/lincity-ng/MpsInterface.cpp:511
+#: src/lincity/modules/residence.cpp:286 src/lincity-ng/MpsInterface.cpp:389
+#: src/lincity-ng/MpsInterface.cpp:517
 msgid "Sport"
 msgstr "Esport"
 
-#: src/lincity/modules/residence.cpp:297 src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity/modules/residence.cpp:288 src/lincity/modules/waterwell.cpp:47
+#: src/lincity-ng/MpsInterface.cpp:391
 msgid "Pollution"
 msgstr "Contaminaci??"
 
-#: src/lincity/modules/monument.cpp:63
+#: src/lincity/modules/monument.cpp:57
 msgid "Wisdom Bestowed"
 msgstr ""
 
-#: src/lincity/modules/monument.cpp:67
+#: src/lincity/modules/monument.cpp:61
 #, c-format
 msgid "% Complete"
 msgstr "%Complert"
 
-#: src/lincity/modules/heavy_industry.cpp:323
+#: src/lincity/modules/waterwell.cpp:44
+msgid "Water_well"
+msgstr ""
+
+#: src/lincity/modules/waterwell.cpp:51
+msgid "Drinkable"
+msgstr ""
+
+#: src/lincity/modules/heavy_industry.cpp:268
 msgid "Heavy"
 msgstr "Force"
 
-#: src/lincity/modules/light_industry.cpp:355
-#: src/lincity/modules/heavy_industry.cpp:324
+#: src/lincity/modules/heavy_industry.cpp:269
+#: src/lincity/modules/light_industry.cpp:277
 msgid "Industry"
 msgstr "Industria"
 
-#: src/lincity/modules/commune.cpp:148 src/lincity/modules/market.cpp:1151
-#: src/lincity/modules/road.cpp:54 src/lincity/modules/blacksmith.cpp:105
-#: src/lincity/modules/port.cpp:211 src/lincity/modules/rail.cpp:57
-#: src/lincity/modules/mill.cpp:112 src/lincity/modules/pottery.cpp:130
-#: src/lincity/modules/coal_power.cpp:89
-#: src/lincity/modules/coal_power.cpp:103
-#: src/lincity/modules/heavy_industry.cpp:329
-#: src/lincity/modules/heavy_industry.cpp:344 src/lincity/modules/track.cpp:45
-#: src/lincity-ng/MpsInterface.cpp:441
+#: src/lincity/modules/heavy_industry.cpp:274
+#: src/lincity/modules/heavy_industry.cpp:287
+#: src/lincity/modules/market.cpp:985 src/lincity/modules/port.cpp:290
+#: src/lincity/modules/road.cpp:48 src/lincity/modules/rail.cpp:52
+#: src/lincity/modules/coal_power.cpp:82 src/lincity/modules/coal_power.cpp:96
+#: src/lincity/modules/mill.cpp:95 src/lincity/modules/commune.cpp:178
+#: src/lincity/modules/track.cpp:39 src/lincity/modules/pottery.cpp:112
+#: src/lincity/modules/blacksmith.cpp:97 src/lincity-ng/MpsInterface.cpp:447
 msgid "Coal"
 msgstr "Carb??"
 
-#: src/lincity/modules/heavy_industry.cpp:331
+#: src/lincity/modules/heavy_industry.cpp:276
 msgid "Grid"
 msgstr "Graella"
 
-#: src/lincity/modules/light_industry.cpp:362
-#: src/lincity/modules/heavy_industry.cpp:339
+#: src/lincity/modules/heavy_industry.cpp:284
+#: src/lincity/modules/light_industry.cpp:284
 msgid "Output"
 msgstr "Sortida"
 
-#: src/lincity/modules/light_industry.cpp:364
-#: src/lincity/modules/heavy_industry.cpp:340
+#: src/lincity/modules/heavy_industry.cpp:285
+#: src/lincity/modules/light_industry.cpp:286
 msgid "Store"
 msgstr "Magatzem"
 
-#: src/lincity/modules/market.cpp:1147 src/lincity/modules/road.cpp:50
-#: src/lincity/modules/port.cpp:207 src/lincity/modules/rail.cpp:53
-#: src/lincity/modules/mill.cpp:110 src/lincity/modules/track.cpp:41
+#: src/lincity/modules/market.cpp:983 src/lincity/modules/port.cpp:286
+#: src/lincity/modules/road.cpp:46 src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/mill.cpp:94 src/lincity/modules/track.cpp:37
 msgid "Food"
 msgstr "Aliment"
 
-#: src/lincity/modules/port.cpp:227 src/lincity-ng/MpsInterface.cpp:527
+#: src/lincity/modules/port.cpp:306 src/lincity-ng/MpsInterface.cpp:535
 msgid "Total"
 msgstr "Total"
 
-#: src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/rail.cpp:47
 msgid "Rail"
 msgstr "Via"
 
-#: src/lincity/modules/coal_power.cpp:90
-#: src/lincity/modules/solar_power.cpp:45
+#: src/lincity/modules/coal_power.cpp:83
+#: src/lincity/modules/solar_power.cpp:47
 msgid "Power Station"
 msgstr "Central el??ctrica"
 
-#: src/lincity/modules/coal_power.cpp:94
-#: src/lincity/modules/solar_power.cpp:49
+#: src/lincity/modules/coal_power.cpp:87
+#: src/lincity/modules/solar_power.cpp:51
 msgid "Max Output"
 msgstr "Sortida m??xima"
 
-#: src/lincity/modules/coal_power.cpp:99
-#: src/lincity/modules/solar_power.cpp:54
+#: src/lincity/modules/coal_power.cpp:92
+#: src/lincity/modules/solar_power.cpp:56
 msgid "Current Output"
 msgstr "Sortida actual"
 
-#: src/lincity/modules/substation.cpp:95
+#: src/lincity/modules/substation.cpp:97
 msgid "Local Demand"
 msgstr "Demanda Local"
 
-#: src/lincity/modules/mill.cpp:103
+#: src/lincity/modules/mill.cpp:88
 msgid "Textile Mill"
 msgstr "F??brica t??xtil"
 
-#: src/lincity/modules/oremine.cpp:184
+#: src/lincity/modules/oremine.cpp:141
 msgid "Ore Mine"
 msgstr "Mine de coure"
 
-#: src/lincity/modules/power_line.cpp:50
+#: src/lincity/modules/power_line.cpp:46
 msgid "Power Line"
 msgstr "Linea electrica"
 
-#: src/lincity/modules/light_industry.cpp:354
+#: src/lincity/modules/light_industry.cpp:276
 msgid "Light"
 msgstr "Electricitat"
 
-#: src/lincity/modules/university.cpp:69
+#: src/lincity/modules/university.cpp:61
 msgid "Tech Produced"
 msgstr "Tecnologies produides"
 
-#: src/lincity/modules/tip.cpp:109
+#: src/lincity/modules/tip.cpp:100
 msgid "Landfill"
 msgstr "Abocador"
 
-#: src/lincity/modules/tip.cpp:112
+#: src/lincity/modules/tip.cpp:103
 msgid "Last Month"
 msgstr "??ltim mes"
 
-#: src/lincity/modules/tip.cpp:113
+#: src/lincity/modules/tip.cpp:104
 msgid "Tons"
 msgstr "Tones"
 
-#: src/lincity/modules/tip.cpp:114
+#: src/lincity/modules/tip.cpp:105
 msgid "Percent"
 msgstr "Percentatge"
 
-#: src/lincity/modules/tip.cpp:117
+#: src/lincity/modules/tip.cpp:107
 #, c-format
 msgid "% Filled"
 msgstr "% Pl??"
 
-#: src/lincity/modules/commune.cpp:145
+#: src/lincity/modules/commune.cpp:175
 msgid "Activity"
 msgstr "Activitat"
 
-#: src/lincity/modules/school.cpp:51
+#: src/lincity/modules/school.cpp:45
 msgid "Lessons Learned"
 msgstr "Llisons apreses"
 
-#: src/lincity/modules/firestation.cpp:119
+#: src/lincity/modules/firestation.cpp:108
 msgid "Fire Station"
 msgstr "Bombers"
 
-#: src/lincity/modules/organic_farm.cpp:183
+#: src/lincity/modules/organic_farm.cpp:219
 msgid "Organic Farm"
 msgstr "Grange org??nique"
 
-#: src/lincity/modules/organic_farm.cpp:190
+#: src/lincity/modules/organic_farm.cpp:225
 msgid "NO "
 msgstr "NO"
 
-#: src/lincity/modules/organic_farm.cpp:200
+#: src/lincity/modules/organic_farm.cpp:233
 msgid "Prod"
 msgstr "Prod"
 
-#: src/lincity/modules/organic_farm.cpp:238
+#: src/lincity/modules/organic_farm.cpp:239
 msgid "Debug info"
 msgstr ""
 
-#: src/lincity/modules/organic_farm.cpp:239
-msgid " max with power & water"
-msgstr ""
-
 #: src/lincity/modules/organic_farm.cpp:240
-msgid " number of tile with water"
+msgid "max with power&water"
 msgstr ""
 
 #: src/lincity/modules/organic_farm.cpp:241
-msgid " current production"
+msgid "N tiles with water"
 msgstr ""
 
-#: src/lincity/modules/solar_power.cpp:44
+#: src/lincity/modules/organic_farm.cpp:242
+#, fuzzy
+msgid "Current production"
+msgstr "Sortida actual"
+
+#: src/lincity/modules/solar_power.cpp:46
 msgid "Solar"
 msgstr "Solar"
 
-#: src/lincity/modules/waterwell.cpp:44
-msgid "Water_well"
-msgstr ""
-
-#: src/lincity/modules/waterwell.cpp:51
-msgid "Drinkable"
-msgstr ""
-
 #: src/lincity-ng/Dialog.cpp:173
 msgid "Launchsite"
 msgstr "Zona de Llansament"
 
-#: src/lincity-ng/Dialog.cpp:341 src/lincity-ng/Dialog.cpp:342
+#: src/lincity-ng/Dialog.cpp:352 src/lincity-ng/Dialog.cpp:353
 msgid "----- IN TEST MODE -------"
 msgstr "-----MODE PROBA--------"
 
-#: src/lincity-ng/Dialog.cpp:344
+#: src/lincity-ng/Dialog.cpp:355
 #, c-format
 msgid "Game statistics from LinCity-NG Version %s"
 msgstr "Estad??stiques de joc per la versi?? %s de LinCity-NG"
 
-#: src/lincity-ng/Dialog.cpp:348
+#: src/lincity-ng/Dialog.cpp:359
 #, c-format
 msgid "Initial loaded scene - %s"
 msgstr "Escenari inicial carregat - %s"
 
-#: src/lincity-ng/Dialog.cpp:353
+#: src/lincity-ng/Dialog.cpp:364
 #, c-format
 msgid "Economy is sustainable"
 msgstr "L'econom??a es sustanible"
 
-#: src/lincity-ng/Dialog.cpp:357
+#: src/lincity-ng/Dialog.cpp:368
 #, c-format
 msgid "Population  %d  of which  %d  are not housed."
 msgstr "Poblaci??  %d dels que un %d no viuan en casas"
 
-#: src/lincity-ng/Dialog.cpp:362
+#: src/lincity-ng/Dialog.cpp:373
 #, c-format
 msgid "Max population %d  Number evacuated %d Total births %d"
 msgstr "Maxime poblaci??%d  Nombre evacuats%d Total nascuts%d"
 
-#: src/lincity-ng/Dialog.cpp:367
+#: src/lincity-ng/Dialog.cpp:378
 #, c-format
 msgid "Date %s %04d  Money %8d   Tech-level %5.1f (%5.1f)"
 msgstr "Date%s %04d  Capital %8d  Nivell Tecnic %5.1f (%5.1f)"
 
-#: src/lincity-ng/Dialog.cpp:374
+#: src/lincity-ng/Dialog.cpp:385
 #, c-format
 msgid ".Deaths by starvation %7d   History %8.3f"
 msgstr "Morts per fam %7d   Hist??ric %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:379
+#: src/lincity-ng/Dialog.cpp:390
 #, c-format
 msgid "Deaths from pollution %7d   History %8.3f"
 msgstr "Morts per contaminaci?? %7d Hist??ric %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:383
+#: src/lincity-ng/Dialog.cpp:394
 #, c-format
 msgid "Years of unemployment %7d   History %8.3f"
 msgstr "Anys de paro"
 
-#: src/lincity-ng/Dialog.cpp:387
+#: src/lincity-ng/Dialog.cpp:398
 #, c-format
 msgid "Rockets launched %2d  Successful launches %2d"
 msgstr "Cohets llansats%2d Pr??xim llansament% 2d"
 
-#: src/lincity-ng/Dialog.cpp:397
+#: src/lincity-ng/Dialog.cpp:409
 #, c-format
 msgid ".   Residences %4d         Markets %4d            Farms %4d"
 msgstr ".Residencias%4d         Mercats%4d             Granges%4d"
 
-#: src/lincity-ng/Dialog.cpp:418
+#: src/lincity-ng/Dialog.cpp:420
 #, c-format
 msgid ".    Monuments %4d         Schools %4d     Universities %4d"
 msgstr ".   Monuments%4d          Escoles%4d      Universitats%4d"
 
-#: src/lincity-ng/Dialog.cpp:423
+#: src/lincity-ng/Dialog.cpp:425
 #, c-format
 msgid ".Fire stations %4d           Parks %4d    Sports fields %4d"
 msgstr ".Bombers%4d                 Parcs%4d     Esports%4d"
 
-#: src/lincity-ng/Dialog.cpp:449
+#: src/lincity-ng/Dialog.cpp:430
 #, c-format
 msgid "Health centres %4d            Tips %4d         Shanties %4d"
 msgstr "Centres Salut   t%4d          Abodcadors%4d      Pipicans %4d"
 
-#: src/lincity-ng/Dialog.cpp:433
+#: src/lincity-ng/Dialog.cpp:438
 #, c-format
 msgid ".    Windmills %4d     Coal powers %4d     Solar powers %4d"
 msgstr ".    Molins%4d     Potencia carb??%4d       Potencia Solar%4d"
 
-#: src/lincity-ng/Dialog.cpp:439
+#: src/lincity-ng/Dialog.cpp:444
 #, c-format
 msgid ".  Substations %4d     Power lines %4d            Ports %4d"
 msgstr ".  Sub-estacions %4d     L??neas El??ctriques%4d        Ports%4d"
 
-#: src/lincity-ng/Dialog.cpp:408
+#: src/lincity-ng/Dialog.cpp:449
 #, c-format
 msgid ".       Tracks %4d           Roads %4d             Rail %4d"
 msgstr ".       Camins %4d           Carreteras %4d          Vias %4d"
 
-#: src/lincity-ng/Dialog.cpp:413
+#: src/lincity-ng/Dialog.cpp:457
 #, c-format
 msgid ".    Potteries %4d     Blacksmiths %4d            Mills %4d"
 msgstr ".    Terrisserias %4d     Fargues%4d            Molins%4d"
 
-#: src/lincity-ng/Dialog.cpp:444
+#: src/lincity-ng/Dialog.cpp:462
 #, c-format
 msgid ".   Light inds %4d      Heavy inds %4d        Recyclers %4d"
 msgstr ".   Ind. lleugera%4d     Ind. Pesada%4d       Reciclat%4d"
 
-#: src/lincity-ng/Dialog.cpp:428
+#: src/lincity-ng/Dialog.cpp:467
 #, c-format
 msgid ".   Coal mines %4d       Ore mines %4d         Communes %4d"
 msgstr ".   Mines Carb??%4d         Mines Coure%4d        Comunes%4d"
 
-#: src/lincity-ng/ScreenInterface.cpp:261
+#: src/lincity-ng/ScreenInterface.cpp:264
 msgid "MM"
 msgstr ""
 
-#: src/lincity-ng/ScreenInterface.cpp:258 src/lincity-ng/GameView.cpp:1518
-#: src/lincity-ng/GameView.cpp:1549
+#: src/lincity-ng/ScreenInterface.cpp:275 src/lincity-ng/GameView.cpp:1609
+#: src/lincity-ng/GameView.cpp:1640
 msgid "$"
 msgstr "$"
 
-#: src/lincity-ng/GameView.cpp:236
+#: src/lincity-ng/GameView.cpp:237
 msgid "Minimap: outline map"
 msgstr "Minimapa: perfil del mapa"
 
-#: src/lincity-ng/GameView.cpp:239
+#: src/lincity-ng/GameView.cpp:240
 msgid "Minimap: unemployment"
 msgstr "Minimap; Parats"
 
-#: src/lincity-ng/GameView.cpp:242
+#: src/lincity-ng/GameView.cpp:243
 msgid "Minimap: pollution"
 msgstr "Minimap Contaminaci??"
 
-#: src/lincity-ng/GameView.cpp:245
+#: src/lincity-ng/GameView.cpp:246
 msgid "Minimap: nourishments"
 msgstr "Minimapa: alimentaci??"
 
-#: src/lincity-ng/GameView.cpp:248
+#: src/lincity-ng/GameView.cpp:249
 msgid "Minimap: power supply"
 msgstr "Minimap: suport energ??a"
 
-#: src/lincity-ng/GameView.cpp:251
+#: src/lincity-ng/GameView.cpp:252
 msgid "Minimap: firedepartment cover"
 msgstr "Minimap Departament de foc"
 
-#: src/lincity-ng/GameView.cpp:254
+#: src/lincity-ng/GameView.cpp:255
 msgid "Minimap: sport cover"
 msgstr "Minimapa: esports"
 
-#: src/lincity-ng/GameView.cpp:257
+#: src/lincity-ng/GameView.cpp:258
 msgid "Minimap: medical care"
 msgstr "Minimapa: Salut"
 
-#: src/lincity-ng/GameView.cpp:260
+#: src/lincity-ng/GameView.cpp:261
 msgid "Minimap: coal depots"
 msgstr "Minimapa:dip??sits carb??"
 
-#: src/lincity-ng/GameView.cpp:263
+#: src/lincity-ng/GameView.cpp:264
 msgid "Minimap: traffic density"
 msgstr "Minimapa: Densitat de trafec"
 
-#: src/lincity-ng/GameView.cpp:1513
+#: src/lincity-ng/GameView.cpp:1604
 msgid "Estimated Bulldoze Cost: "
 msgstr "Cost estimat escabadora"
 
-#: src/lincity-ng/GameView.cpp:1515
+#: src/lincity-ng/GameView.cpp:1606
 msgid "Bulldoze Cost: "
 msgstr "Cost Escabadora:"
 
-#: src/lincity-ng/GameView.cpp:1520
+#: src/lincity-ng/GameView.cpp:1611
 msgid "n/a"
 msgstr "n/a"
 
-#: src/lincity-ng/GameView.cpp:1538
+#: src/lincity-ng/GameView.cpp:1629
 msgid "Query Tool: Show information about selected building."
 msgstr "Eina de investigar. Mostre informaci?? sobres el edifici seleccionat"
 
-#: src/lincity-ng/GameView.cpp:1542
+#: src/lincity-ng/GameView.cpp:1633
 msgid "Bulldozer: remove building -price varies-"
 msgstr "Enderroc: el.liminar l'edifici -preu variable-"
 
-#: src/lincity-ng/GameView.cpp:1549
+#: src/lincity-ng/GameView.cpp:1640
 msgid ": Cost to build "
 msgstr "Cost de construcci??"
 
-#: src/lincity-ng/GameView.cpp:1550
+#: src/lincity-ng/GameView.cpp:1641
 msgid ", to bulldoze "
 msgstr "Excava"
 
-#: src/lincity-ng/GameView.cpp:1550 src/lincity-ng/GameView.cpp:1553
+#: src/lincity-ng/GameView.cpp:1641 src/lincity-ng/GameView.cpp:1644
 msgid "$."
 msgstr "$"
 
-#: src/lincity-ng/GameView.cpp:1552
+#: src/lincity-ng/GameView.cpp:1643
 msgid " To build "
 msgstr "Construeix"
 
-#: src/lincity-ng/GameView.cpp:1552
+#: src/lincity-ng/GameView.cpp:1643
 msgid " of them "
 msgstr "d'ells"
 
-#: src/lincity-ng/GameView.cpp:1553
+#: src/lincity-ng/GameView.cpp:1644
 msgid "will cost about "
 msgstr "Et costar??"
 
-#: src/lincity-ng/MainMenu.cpp:162
+#: src/lincity-ng/MainMenu.cpp:199
 msgid "empty"
 msgstr "Buit"
 
-#: src/lincity-ng/MpsInterface.cpp:221
+#: src/lincity-ng/MpsInterface.cpp:227
 msgid "build something here"
 msgstr "Construir aqu??"
 
-#: src/lincity-ng/MpsInterface.cpp:223
+#: src/lincity-ng/MpsInterface.cpp:229
 msgid "no further information available"
 msgstr "Informaci?? no disponible"
 
-#: src/lincity-ng/MpsInterface.cpp:375
+#: src/lincity-ng/MpsInterface.cpp:381
 msgid "Coverage"
 msgstr "Cubert"
 
-#: src/lincity-ng/MpsInterface.cpp:380
+#: src/lincity-ng/MpsInterface.cpp:386
 msgid "Health"
 msgstr "Salut"
 
-#: src/lincity-ng/MpsInterface.cpp:388
+#: src/lincity-ng/MpsInterface.cpp:394
 msgid "clear"
 msgstr "Borrar"
 
-#: src/lincity-ng/MpsInterface.cpp:392
+#: src/lincity-ng/MpsInterface.cpp:398
 msgid "fair"
 msgstr "Fals"
 
-#: src/lincity-ng/MpsInterface.cpp:394
+#: src/lincity-ng/MpsInterface.cpp:400
 msgid "smelly"
 msgstr "Pudent"
 
-#: src/lincity-ng/MpsInterface.cpp:396
+#: src/lincity-ng/MpsInterface.cpp:402
 msgid "smokey"
 msgstr "Fums"
 
-#: src/lincity-ng/MpsInterface.cpp:398
+#: src/lincity-ng/MpsInterface.cpp:404
 msgid "smoggy"
 msgstr "nuvols t??xics"
 
-#: src/lincity-ng/MpsInterface.cpp:400
+#: src/lincity-ng/MpsInterface.cpp:406
 msgid "bad"
 msgstr "enrrera"
 
-#: src/lincity-ng/MpsInterface.cpp:402
+#: src/lincity-ng/MpsInterface.cpp:408
 msgid "very bad"
 msgstr "m??s enrrera"
 
-#: src/lincity-ng/MpsInterface.cpp:404
+#: src/lincity-ng/MpsInterface.cpp:410
 msgid "death!"
 msgstr "mort"
 
-#: src/lincity-ng/MpsInterface.cpp:409
+#: src/lincity-ng/MpsInterface.cpp:415
 msgid "Bulldoze Cost"
 msgstr "Cost Escabadora"
 
-#: src/lincity-ng/MpsInterface.cpp:415
+#: src/lincity-ng/MpsInterface.cpp:421
 msgid "N/A"
 msgstr "N/A"
 
-#: src/lincity-ng/MpsInterface.cpp:433
+#: src/lincity-ng/MpsInterface.cpp:439
 msgid "Tax Income"
 msgstr "Ingres Impostos"
 
-#: src/lincity-ng/MpsInterface.cpp:437
+#: src/lincity-ng/MpsInterface.cpp:443
 msgid "Income"
 msgstr "Ingressos"
 
-#: src/lincity-ng/MpsInterface.cpp:449
+#: src/lincity-ng/MpsInterface.cpp:455
 msgid "Export"
 msgstr "Exportar"
 
-#: src/lincity-ng/MpsInterface.cpp:453
+#: src/lincity-ng/MpsInterface.cpp:459
 msgid "Expenses"
 msgstr "Despesses"
 
-#: src/lincity-ng/MpsInterface.cpp:457
+#: src/lincity-ng/MpsInterface.cpp:463
 msgid "Unemp."
 msgstr "Parats"
 
-#: src/lincity-ng/MpsInterface.cpp:461
+#: src/lincity-ng/MpsInterface.cpp:467
 msgid "Transport"
 msgstr "Transport"
 
-#: src/lincity-ng/MpsInterface.cpp:465
+#: src/lincity-ng/MpsInterface.cpp:471
 msgid "Imports"
 msgstr "Importar"
 
-#: src/lincity-ng/MpsInterface.cpp:469
+#: src/lincity-ng/MpsInterface.cpp:475
 msgid "Others"
 msgstr "Altres"
 
-#: src/lincity-ng/MpsInterface.cpp:474
+#: src/lincity-ng/MpsInterface.cpp:480
 msgid "Net"
 msgstr "Net"
 
-#: src/lincity-ng/MpsInterface.cpp:486
+#: src/lincity-ng/MpsInterface.cpp:492
 msgid "Other Costs"
 msgstr "Altres costos"
 
-#: src/lincity-ng/MpsInterface.cpp:491
+#: src/lincity-ng/MpsInterface.cpp:497
 msgid "For year"
 msgstr "Per any"
 
-#: src/lincity-ng/MpsInterface.cpp:495
+#: src/lincity-ng/MpsInterface.cpp:501
 msgid "Interest"
 msgstr "Inter??s"
 
-#: src/lincity-ng/MpsInterface.cpp:497
+#: src/lincity-ng/MpsInterface.cpp:503
 msgid "Schools"
 msgstr "Escola"
 
-#: src/lincity-ng/MpsInterface.cpp:499
+#: src/lincity-ng/MpsInterface.cpp:505
 msgid "Univers."
 msgstr "Univers."
 
-#: src/lincity-ng/MpsInterface.cpp:501
+#: src/lincity-ng/MpsInterface.cpp:507
 msgid "Deaths"
 msgstr "Morts"
 
-#: src/lincity-ng/MpsInterface.cpp:505
+#: src/lincity-ng/MpsInterface.cpp:511
 msgid "Hospital"
 msgstr "Hospital"
 
-#: src/lincity-ng/MpsInterface.cpp:507
+#: src/lincity-ng/MpsInterface.cpp:513
 msgid "Rockets"
 msgstr "Cohets"
 
-#: src/lincity-ng/MpsInterface.cpp:509
+#: src/lincity-ng/MpsInterface.cpp:515
 msgid "Fire Stn"
 msgstr "Bombers"
 
-#: src/lincity-ng/MpsInterface.cpp:525
+#: src/lincity-ng/MpsInterface.cpp:533
 msgid "Population"
 msgstr "Poblaci??"
 
-#: src/lincity-ng/MpsInterface.cpp:528
+#: src/lincity-ng/MpsInterface.cpp:536
 msgid "Housed"
 msgstr "Ocupat"
 
-#: src/lincity-ng/MpsInterface.cpp:529
+#: src/lincity-ng/MpsInterface.cpp:537
 msgid "Homeless"
 msgstr "Buit"
 
-#: src/lincity-ng/MpsInterface.cpp:530
+#: src/lincity-ng/MpsInterface.cpp:538
 msgid "Shanties"
 msgstr "Pipican"
 
-#: src/lincity-ng/MpsInterface.cpp:531
+#: src/lincity-ng/MpsInterface.cpp:539
 msgid "Unn Dths"
 msgstr "Morts inesperats"
 
-#: src/lincity-ng/MpsInterface.cpp:532
+#: src/lincity-ng/MpsInterface.cpp:540
 msgid "Unemployment"
 msgstr "Parats"
 
-#: src/lincity-ng/MpsInterface.cpp:533
+#: src/lincity-ng/MpsInterface.cpp:541
 msgid "Claims"
 msgstr "Reivindicacions"
 
-#: src/lincity-ng/MpsInterface.cpp:534 src/lincity-ng/MpsInterface.cpp:539
+#: src/lincity-ng/MpsInterface.cpp:542 src/lincity-ng/MpsInterface.cpp:547
 msgid "Rate"
 msgstr "Rati"
 
-#: src/lincity-ng/MpsInterface.cpp:536
+#: src/lincity-ng/MpsInterface.cpp:544
 msgid "Starvation"
 msgstr "Fam"
 
-#: src/lincity-ng/MpsInterface.cpp:537
+#: src/lincity-ng/MpsInterface.cpp:545
 msgid "Cases"
 msgstr "Casos"
 
-#: src/lincity-ng/ButtonPanel.cpp:198
+#: src/lincity-ng/ButtonPanel.cpp:200
 msgid "Query Tool"
 msgstr "Eina de preguntar"
 
-#: src/lincity-ng/ButtonPanel.cpp:199
+#: src/lincity-ng/ButtonPanel.cpp:201
 msgid "Bulldozer"
 msgstr "Escabadora"
 
-#: src/lincity-ng/ButtonPanel.cpp:201
+#: src/lincity-ng/ButtonPanel.cpp:203
 msgid "Residential: 50 denizens, low birthrate, high deathrate"
 msgstr "Residencia; 50 habitants, pocs naixaments,alta defunci??"
 
-#: src/lincity-ng/ButtonPanel.cpp:202
+#: src/lincity-ng/ButtonPanel.cpp:204
 msgid "Residential: 100 denizens, high birthrate, low deathrate"
 msgstr "Residencial; 100 hab., alta natalitat, poques morts"
 
-#: src/lincity-ng/ButtonPanel.cpp:203
+#: src/lincity-ng/ButtonPanel.cpp:205
 msgid "Residential: 200 denizens, high birthrate, high deathrate"
 msgstr "Residencial;200 hab., alta natalitat, alta defunci??"
 
-#: src/lincity-ng/ButtonPanel.cpp:204
+#: src/lincity-ng/ButtonPanel.cpp:206
 msgid "Residential: 100 denizens, low birthrate, high deathrate"
 msgstr "Residencial; 100 hab. baixa natalitat, alta mortalitat"
 
-#: src/lincity-ng/ButtonPanel.cpp:205
+#: src/lincity-ng/ButtonPanel.cpp:207
 msgid "Residential: 200 denizens, high birthrate, low deathrate"
 msgstr "Residencial; 200 hab, alta natalitat, baixa mortalitat"
 
-#: src/lincity-ng/ButtonPanel.cpp:206
+#: src/lincity-ng/ButtonPanel.cpp:208
 msgid "Residential: 400 denizens, high birthrate, high deathrate"
 msgstr "Residencial; 400 hab.,alta natalitat, alta mortalitat"
 
-#: src/lincity-ng/ButtonPanel.cpp:215
+#: src/lincity-ng/ButtonPanel.cpp:217
 msgid " [Click right for help.]"
 msgstr " [Clic esquerra per ajuda.]"
 
-#: src/lincity-ng/ButtonPanel.cpp:243 src/lincity-ng/ButtonPanel.cpp:286
+#: src/lincity-ng/ButtonPanel.cpp:245 src/lincity-ng/ButtonPanel.cpp:288
 #, c-format
 msgid "%s (Techlevel %.1f required.)"
 msgstr ""
 
-#: src/lincity-ng/ButtonPanel.cpp:252
+#: src/lincity-ng/ButtonPanel.cpp:254
 #, c-format
 msgid "%s is disabled (loaded old game)."
 msgstr ""
 
-#: src/lincity-ng/EconomyGraph.cpp:121
+#: src/lincity-ng/EconomyGraph.cpp:124
 msgid "Mining"
 msgstr "Miner??a"
 
-#: src/lincity-ng/EconomyGraph.cpp:123
+#: src/lincity-ng/EconomyGraph.cpp:126
 msgid "Trade"
 msgstr "Comunicacions"
 
-#: src/lincity-ng/EconomyGraph.cpp:125
+#: src/lincity-ng/EconomyGraph.cpp:128
 msgid "Money"
 msgstr "Diners"
 
-#: src/lincity-ng/EconomyGraph.cpp:127
+#: src/lincity-ng/EconomyGraph.cpp:130
 msgid "Popul."
 msgstr "Poblaci??"
 
-#: src/lincity-ng/EconomyGraph.cpp:129
+#: src/lincity-ng/EconomyGraph.cpp:132
 msgid "Techn."
 msgstr "Tecn."
 
-#: src/lincity-ng/EconomyGraph.cpp:134
+#: src/lincity-ng/EconomyGraph.cpp:137
 msgid "Economy Overview:"
 msgstr "Econom??a oberta"
 
-#: src/lincity-ng/EconomyGraph.cpp:137
+#: src/lincity-ng/EconomyGraph.cpp:140
 msgid "Sustainability:"
 msgstr "Sustenibilitat"
 
-#: src/lincity-ng/EconomyGraph.cpp:140
+#: src/lincity-ng/EconomyGraph.cpp:143
 msgid "Frames per Second:"
 msgstr "Imatges per segon:"
 
-#: src/lincity-ng/EconomyGraph.cpp:216
+#: src/lincity-ng/EconomyGraph.cpp:219
 msgid "You lose."
 msgstr "Has perdut"

Modified: trunk/data/locale/cs.po
===================================================================
--- trunk/data/locale/cs.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/cs.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -7,7 +7,7 @@
 msgstr ""
 "Project-Id-Version: Lincity-ng\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-01-27 22:03+0100\n"
+"POT-Creation-Date: 2007-12-04 00:29+0100\n"
 "PO-Revision-Date: 2006-09-04 07:22+0200\n"
 "Last-Translator: Ondrej Novy <onovy at nomi.cz>\n"
 "Language-Team: Czech <cs at li.org>\n"
@@ -15,494 +15,501 @@
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
 
-#: src/lincity/fileutil.cpp:292 src/lincity/fileutil.cpp:341
-msgid "Error. Can't find LINCITY_HOME"
-msgstr "Chyba: Nemohu naj??t LINCITY_HOME"
-
-#: src/lincity/fileutil.cpp:561
-msgid "Error verifying package. Can't find colour.pal."
-msgstr "Do??lo k chyb?? p??i kontrole bal????ku. Nemohu naj??t colour.pal."
-
-#: src/lincity/fileutil.cpp:580 src/lincity/fileutil.cpp:589
-#, c-format
-msgid "Couldn't create the save directory '%s'\n"
-msgstr "Nemohu vytvo??it adres???? pro ukl??d??n?? her '%s'\n"
-
-#: src/lincity/fileutil.cpp:635
-#, c-format
-msgid "Out of memory: malloc failure\n"
-msgstr "Nedostatek pam??ti: malloc selhal\n"
-
-#: src/lincity/power.cpp:93
-msgid "You have too many power grids. Join some of them"
-msgstr ""
-
-#: src/lincity/engine.cpp:121
+#: src/lincity/engine.cpp:120
 msgid ""
 "ERROR: group does not exist. This should not happen! Please consider filling "
 "a bug report to lincity-ng team, with the saved game and what you did :-) "
 msgstr ""
 
-#: src/lincity/engine.cpp:147
+#: src/lincity/engine.cpp:152
 msgid "Port must be connected to river all along right side."
 msgstr ""
 
-#: src/lincity/engine.cpp:156 src/lincity/engine.cpp:165
+#: src/lincity/engine.cpp:161 src/lincity/engine.cpp:170
 msgid "Too many substations + windmills. You cannot build one more"
 msgstr ""
 
-#: src/lincity/engine.cpp:195
+#: src/lincity/engine.cpp:200
 msgid "Too many markets. You cannot build one more"
 msgstr ""
 
-#: src/lincity/engine.cpp:218
+#: src/lincity/engine.cpp:223
 msgid "You can't build a tip here: this area was once a landfill"
 msgstr ""
 
-#: src/lincity/engine.cpp:243
+#: src/lincity/engine.cpp:248
 msgid "You can't build a mine here: This area was once a landfill"
 msgstr ""
 
-#: src/lincity/engine.cpp:247
+#: src/lincity/engine.cpp:252
 msgid "You can't build a mine here: there is no ore left at this site"
 msgstr ""
 
-#: src/lincity/engine.cpp:259
+#: src/lincity/engine.cpp:264
 msgid "You can't build a water well here: it is all desert."
 msgstr ""
 
-#: src/lincity/engine.cpp:269
+#: src/lincity/engine.cpp:274
 msgid "You can't build a park here: it is a desert, parks need water"
 msgstr ""
 
-#: src/lincity/engine.cpp:691
+#: src/lincity/engine.cpp:485
 msgid "It's at a power line."
 msgstr "Vypukl u elektrick??ho veden??."
 
-#: src/lincity/engine.cpp:693
+#: src/lincity/engine.cpp:487
 msgid "It's at a solar power station."
 msgstr "Vypukl u sol??rn?? elektr??rny."
 
-#: src/lincity/engine.cpp:695
+#: src/lincity/engine.cpp:489
 msgid "It's at a substation."
 msgstr "Vypukl u rozvodny."
 
-#: src/lincity/engine.cpp:697
+#: src/lincity/engine.cpp:491
 msgid "It's at a residential area."
 msgstr "Vypukl u obytn?? z??ny."
 
-#: src/lincity/engine.cpp:699
+#: src/lincity/engine.cpp:493
 msgid "It's at a farm."
 msgstr "Vypukl u farmy."
 
-#: src/lincity/engine.cpp:701
+#: src/lincity/engine.cpp:495
 msgid "It's at a market."
 msgstr "Vypukl u obchodu."
 
-#: src/lincity/engine.cpp:703
+#: src/lincity/engine.cpp:497
 msgid "It's at a track."
 msgstr "Vypukl u ??vozu."
 
-#: src/lincity/engine.cpp:705
+#: src/lincity/engine.cpp:499
 msgid "It's at a coal mine."
 msgstr "Vypukl u uheln??ho dolu"
 
-#: src/lincity/engine.cpp:707
+#: src/lincity/engine.cpp:501
 msgid "It's at a railway."
 msgstr "Vypukl u ??eleznice."
 
-#: src/lincity/engine.cpp:709
+#: src/lincity/engine.cpp:503
 msgid "It's at a coal power station."
 msgstr "Vypukl u uheln?? elektr??rny."
 
-#: src/lincity/engine.cpp:711
+#: src/lincity/engine.cpp:505
 msgid "It's at a road."
 msgstr "Vypukl u silnice."
 
-#: src/lincity/engine.cpp:713
+#: src/lincity/engine.cpp:507
 msgid "It's at light industry."
 msgstr "Vypukl u z??ny lehk??ho pr??myslu."
 
-#: src/lincity/engine.cpp:715
+#: src/lincity/engine.cpp:509
 msgid "It's at a university."
 msgstr "Vypukl u univerzity."
 
-#: src/lincity/engine.cpp:717
+#: src/lincity/engine.cpp:511
 msgid "It's at a commune."
 msgstr "Vypukl u mil????e."
 
-#: src/lincity/engine.cpp:719
+#: src/lincity/engine.cpp:513
 msgid "It's at a tip."
 msgstr "Vypukl u skl??dky."
 
-#: src/lincity/engine.cpp:721
+#: src/lincity/engine.cpp:515
 msgid "It's at a port."
 msgstr "Vypukl u p????stavu."
 
-#: src/lincity/engine.cpp:723
+#: src/lincity/engine.cpp:517
 msgid "It's at a steel works."
 msgstr "Vypukl u sl??v??rny."
 
-#: src/lincity/engine.cpp:725
+#: src/lincity/engine.cpp:519
 msgid "It's at a recycle centre."
 msgstr "Vypukl u recykla??n??ho centra."
 
-#: src/lincity/engine.cpp:727
+#: src/lincity/engine.cpp:521
 msgid "It's at a health centre."
 msgstr "Vypukl u zdravotn??ho st??ediska."
 
-#: src/lincity/engine.cpp:729
+#: src/lincity/engine.cpp:523
 msgid "It's at a rocket site."
 msgstr "Vypukl u odpalovac?? rampy."
 
-#: src/lincity/engine.cpp:731
+#: src/lincity/engine.cpp:525
 msgid "It's at a windmill."
 msgstr "Vypukl u v??trn??ho ml??nu."
 
-#: src/lincity/engine.cpp:733
+#: src/lincity/engine.cpp:527
 msgid "It's at a school."
 msgstr "Vypukl u ??koly."
 
-#: src/lincity/engine.cpp:735
+#: src/lincity/engine.cpp:529
 msgid "It's at a blacksmith."
 msgstr "Vypukl u kov??rny."
 
-#: src/lincity/engine.cpp:737
+#: src/lincity/engine.cpp:531
 msgid "It's at a mill."
 msgstr "Vypukl u zpracov??vatelsk??ho z??vodu."
 
-#: src/lincity/engine.cpp:739
+#: src/lincity/engine.cpp:533
 msgid "It's at a pottery."
 msgstr "Vypukl u hrn????rny"
 
-#: src/lincity/engine.cpp:741
+#: src/lincity/engine.cpp:535
 msgid "It's at a fire station!!!."
 msgstr "Vypukl u hasi??sk?? stanice."
 
-#: src/lincity/engine.cpp:743
+#: src/lincity/engine.cpp:537
 msgid "It's at a sports field!!!."
 msgstr "Vypukl u sportovn??ho h??i??t??."
 
-#: src/lincity/engine.cpp:745
+#: src/lincity/engine.cpp:539
 msgid "It's at a shanty town."
 msgstr ""
 
-#: src/lincity/engine.cpp:747
+#: src/lincity/engine.cpp:541
 msgid "UNKNOWN!"
 msgstr "NEZN??M??!"
 
-#: src/lincity/lintypes.cpp:22
+#: src/lincity/lintypes.cpp:20
 msgid "Empty"
 msgstr "Pr??zdn??"
 
-#: src/lincity/lintypes.cpp:34
+#: src/lincity/lintypes.cpp:32
 msgid "Power line"
 msgstr "Elektrick?? veden??"
 
-#: src/lincity/lintypes.cpp:46
+#: src/lincity/lintypes.cpp:43
 msgid "Solar PS"
 msgstr "Sol??rn?? elektr??rna"
 
-#: src/lincity/lintypes.cpp:58 src/lincity/modules/substation.cpp:91
+#: src/lincity/lintypes.cpp:54 src/lincity/modules/substation.cpp:93
 msgid "Substation"
 msgstr "Rozvodna"
 
-#: src/lincity/lintypes.cpp:70
+#: src/lincity/lintypes.cpp:65
 msgid "Residential LL"
 msgstr "Obytn?? z??na"
 
-#: src/lincity/lintypes.cpp:82
+#: src/lincity/lintypes.cpp:76
 msgid "Farm"
 msgstr "Farma"
 
-#: src/lincity/lintypes.cpp:94 src/lincity/modules/market.cpp:1143
-#: src/lincity-ng/Dialog.cpp:486
+#: src/lincity/lintypes.cpp:87 src/lincity/modules/market.cpp:979
+#: src/lincity-ng/Dialog.cpp:507
 msgid "Market"
 msgstr "Obchod"
 
-#: src/lincity/lintypes.cpp:106 src/lincity/modules/track.cpp:38
+#: src/lincity/lintypes.cpp:98 src/lincity/modules/track.cpp:34
 msgid "Track"
 msgstr "??voz"
 
-#: src/lincity/lintypes.cpp:118
+#: src/lincity/lintypes.cpp:109
 msgid "Coalmine"
 msgstr "Uheln?? d??l"
 
-#: src/lincity/lintypes.cpp:130
+#: src/lincity/lintypes.cpp:120
 msgid "Railway"
 msgstr "??eleznice"
 
-#: src/lincity/lintypes.cpp:142
+#: src/lincity/lintypes.cpp:131
 msgid "Coal PS"
 msgstr "Uheln?? elektr??rna"
 
-#: src/lincity/lintypes.cpp:154 src/lincity/modules/road.cpp:47
+#: src/lincity/lintypes.cpp:142 src/lincity/modules/road.cpp:43
 msgid "Road"
 msgstr "Silnice"
 
-#: src/lincity/lintypes.cpp:166
+#: src/lincity/lintypes.cpp:153
 msgid "Lt. Industry"
 msgstr "Lehk?? pr??mysl"
 
-#: src/lincity/lintypes.cpp:178 src/lincity/modules/university.cpp:67
+#: src/lincity/lintypes.cpp:164 src/lincity/modules/university.cpp:59
 msgid "University"
 msgstr "Univerzita"
 
-#: src/lincity/lintypes.cpp:190 src/lincity/modules/commune.cpp:146
+#: src/lincity/lintypes.cpp:175 src/lincity/modules/commune.cpp:172
 msgid "Commune"
 msgstr "Mil????"
 
-#: src/lincity/lintypes.cpp:202
+#: src/lincity/lintypes.cpp:186
 msgid "Ore mine"
 msgstr "D??l ??elezn?? rudy"
 
-#: src/lincity/lintypes.cpp:214
+#: src/lincity/lintypes.cpp:197
 msgid "Rubbish tip"
 msgstr "Skl??dka"
 
-#: src/lincity/lintypes.cpp:226 src/lincity/modules/port.cpp:173
-#: src/lincity-ng/Dialog.cpp:540
+#: src/lincity/lintypes.cpp:208 src/lincity/modules/port.cpp:281
+#: src/lincity-ng/Dialog.cpp:561
 msgid "Port"
 msgstr "P????stav"
 
-#: src/lincity/lintypes.cpp:238
+#: src/lincity/lintypes.cpp:219
 msgid "Hv. Industry"
 msgstr "Sl??v??rna"
 
-#: src/lincity/lintypes.cpp:250
+#: src/lincity/lintypes.cpp:230
 msgid "Park"
 msgstr "Park"
 
-#: src/lincity/lintypes.cpp:262 src/lincity-ng/MpsInterface.cpp:516
+#: src/lincity/lintypes.cpp:241 src/lincity-ng/MpsInterface.cpp:519
 msgid "Recycle"
 msgstr "Recyklace"
 
-#: src/lincity/lintypes.cpp:274 src/lincity/modules/water.cpp:19
+#: src/lincity/lintypes.cpp:252 src/lincity/modules/water.cpp:17
+#: src/lincity/modules/residence.cpp:264
 msgid "Water"
 msgstr "Voda"
 
-#: src/lincity/lintypes.cpp:286
+#: src/lincity/lintypes.cpp:263
 msgid "Health centre"
 msgstr "Zdravotn?? st."
 
-#: src/lincity/lintypes.cpp:298
+#: src/lincity/lintypes.cpp:274
 msgid "Rocket pad"
 msgstr "Odpal. rampa"
 
-#: src/lincity/lintypes.cpp:310 src/lincity/modules/windmill.cpp:73
-#: src/lincity-ng/MpsInterface.cpp:506
+#: src/lincity/lintypes.cpp:285 src/lincity/modules/windmill.cpp:75
+#: src/lincity-ng/MpsInterface.cpp:509
 msgid "Windmill"
 msgstr "V??trn?? ml??n"
 
-#: src/lincity/lintypes.cpp:322 src/lincity/modules/monument.cpp:57
+#: src/lincity/lintypes.cpp:296 src/lincity/modules/monument.cpp:51
 msgid "Monument"
 msgstr "Monument"
 
-#: src/lincity/lintypes.cpp:334 src/lincity/modules/school.cpp:49
+#: src/lincity/lintypes.cpp:307 src/lincity/modules/school.cpp:43
 msgid "School"
 msgstr "??kola"
 
-#: src/lincity/lintypes.cpp:346 src/lincity/modules/blacksmith.cpp:97
+#: src/lincity/lintypes.cpp:318 src/lincity/modules/blacksmith.cpp:90
 msgid "Blacksmith"
 msgstr "Kov??rna"
 
-#: src/lincity/lintypes.cpp:358
+#: src/lincity/lintypes.cpp:329
 msgid "Mill"
 msgstr "Zprac. z??vod"
 
-#: src/lincity/lintypes.cpp:370 src/lincity/modules/pottery.cpp:119
+#: src/lincity/lintypes.cpp:340 src/lincity/modules/pottery.cpp:104
 msgid "Pottery"
 msgstr "Hrn??????stv??"
 
-#: src/lincity/lintypes.cpp:382
+#: src/lincity/lintypes.cpp:351
 msgid "Fire sta'n"
 msgstr "Po????rn?? st."
 
-#: src/lincity/lintypes.cpp:394 src/lincity/modules/cricket.cpp:99
+#: src/lincity/lintypes.cpp:362 src/lincity/modules/cricket.cpp:91
 msgid "Sports field"
 msgstr "Sportovn?? h??i??t??"
 
-#: src/lincity/lintypes.cpp:407
+#: src/lincity/lintypes.cpp:374
 msgid "Burnt"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:420
+#: src/lincity/lintypes.cpp:386
 msgid "Shanty town"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:433 src/lincity/modules/residence.cpp:292
-#: src/lincity-ng/MpsInterface.cpp:380 src/lincity-ng/EconomyGraph.cpp:131
+#: src/lincity/lintypes.cpp:398 src/lincity/modules/residence.cpp:283
+#: src/lincity-ng/MpsInterface.cpp:383 src/lincity-ng/EconomyGraph.cpp:134
 msgid "Fire"
 msgstr "Ohe??"
 
-#: src/lincity/lintypes.cpp:446
+#: src/lincity/lintypes.cpp:410
 msgid "Used"
 msgstr "Pou??ito"
 
-#: src/lincity/lintypes.cpp:458
+#: src/lincity/lintypes.cpp:421
 msgid "Residential ML"
 msgstr "St??edn?? obydl??"
 
-#: src/lincity/lintypes.cpp:470
+#: src/lincity/lintypes.cpp:432
 msgid "Residential HL"
 msgstr "Hust?? obydl??"
 
-#: src/lincity/lintypes.cpp:482
+#: src/lincity/lintypes.cpp:443
 msgid "Residential LH"
 msgstr "Lehk?? domy"
 
-#: src/lincity/lintypes.cpp:494
+#: src/lincity/lintypes.cpp:454
 msgid "Residential MH"
 msgstr "St??edn?? domy"
 
-#: src/lincity/lintypes.cpp:506
+#: src/lincity/lintypes.cpp:465
 msgid "Residential HH"
 msgstr "Hust?? domy"
 
-#: src/lincity/lintypes.cpp:477
+#: src/lincity/lintypes.cpp:476
 msgid "Water well"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:489
+#: src/lincity/lintypes.cpp:488
 msgid "Desert"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:501
+#: src/lincity/lintypes.cpp:500
 msgid "Tree"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:514
+#: src/lincity/lintypes.cpp:513
 msgid "Trees"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:527
+#: src/lincity/lintypes.cpp:526
 msgid "Forest"
 msgstr ""
 
-#: src/lincity/ldsvguts.cpp:128
+#: src/lincity/ldsvguts.cpp:137
 #, c-format
 msgid "Save file <%s> - "
 msgstr "Ulo??it soubor <%s> - "
 
-#: src/lincity/ldsvguts.cpp:129
+#: src/lincity/ldsvguts.cpp:138
 msgid "Can't open save file!"
 msgstr "Nemohu otev????t soubor s ulo??enou hrou!"
 
-#: src/lincity/ldsvguts.cpp:134
+#: src/lincity/ldsvguts.cpp:148
 msgid "Saving scene"
 msgstr "Ukl??d??m sc??nu"
 
-#: src/lincity/ldsvguts.cpp:334
+#: src/lincity/ldsvguts.cpp:362
 #, c-format
 msgid "Can't open <%s> (gzipped)"
 msgstr "Nemohu otev????t <%s> (komprese gzip)"
 
-#: src/lincity/ldsvguts.cpp:352
+#: src/lincity/ldsvguts.cpp:395
 msgid "Loading scene"
 msgstr "Na????t??m sc??nu"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/fileutil.cpp:266 src/lincity/fileutil.cpp:310
+msgid "Error. Can't find LINCITY_HOME"
+msgstr "Chyba: Nemohu naj??t LINCITY_HOME"
+
+#: src/lincity/fileutil.cpp:512
+msgid "Error verifying package. Can't find colour.pal."
+msgstr "Do??lo k chyb?? p??i kontrole bal????ku. Nemohu naj??t colour.pal."
+
+#: src/lincity/fileutil.cpp:525 src/lincity/fileutil.cpp:533
+#, c-format
+msgid "Couldn't create the save directory '%s'\n"
+msgstr "Nemohu vytvo??it adres???? pro ukl??d??n?? her '%s'\n"
+
+#: src/lincity/fileutil.cpp:550
+#, c-format
+msgid "Out of memory: malloc failure\n"
+msgstr "Nedostatek pam??ti: malloc selhal\n"
+
+#: src/lincity/simulate.cpp:97
+msgid ""
+"Upgrading from old game. You have 10 years to build water wells where "
+"needed. After, starvation will occur!  You should check starvation minimap, "
+"and read waterwell help page :-)"
+msgstr ""
+
+#: src/lincity/lclib.cpp:15
 msgid "Jan"
 msgstr "Led"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Feb"
 msgstr "??no"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Mar"
 msgstr "B??e"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Apr"
 msgstr "Dub"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "May"
 msgstr "Kv??"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jun"
 msgstr "??er"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jul"
 msgstr "??rv"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Aug"
 msgstr "Srp"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Sep"
 msgstr "Z????"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Oct"
 msgstr "????j"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Nov"
 msgstr "Lis"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Dec"
 msgstr "Pro"
 
-#: src/lincity/modules/health_centre.cpp:66
+#: src/lincity/power.cpp:102
+msgid "You have too many power grids. Join some of them"
+msgstr ""
+
+#: src/lincity/modules/health_centre.cpp:58
 msgid "Health Centre"
 msgstr "Zdravotn?? st??edisko"
 
-#: src/lincity/modules/health_centre.cpp:68
-#: src/lincity/modules/rocket_pad.cpp:169 src/lincity/modules/recycle.cpp:181
-#: src/lincity/modules/mill.cpp:107 src/lincity/modules/university.cpp:74
-#: src/lincity/modules/cricket.cpp:101 src/lincity/modules/pottery.cpp:123
-#: src/lincity/modules/blacksmith.cpp:102
-#: src/lincity/modules/firestation.cpp:121 src/lincity/modules/school.cpp:54
+#: src/lincity/modules/health_centre.cpp:60
+#: src/lincity/modules/rocket_pad.cpp:198 src/lincity/modules/recycle.cpp:148
+#: src/lincity/modules/mill.cpp:92 src/lincity/modules/university.cpp:65
+#: src/lincity/modules/cricket.cpp:93 src/lincity/modules/pottery.cpp:108
+#: src/lincity/modules/blacksmith.cpp:95 src/lincity/modules/school.cpp:48
+#: src/lincity/modules/firestation.cpp:110
 msgid "Inventory"
 msgstr "Invent????"
 
-#: src/lincity/modules/health_centre.cpp:69
-#: src/lincity/modules/rocket_pad.cpp:170 src/lincity/modules/market.cpp:1149
-#: src/lincity/modules/road.cpp:52 src/lincity/modules/rail.cpp:55
-#: src/lincity/modules/coal_power.cpp:105
-#: src/lincity/modules/university.cpp:75 src/lincity/modules/cricket.cpp:102
-#: src/lincity/modules/track.cpp:43 src/lincity/modules/pottery.cpp:124
-#: src/lincity/modules/firestation.cpp:122 src/lincity/modules/school.cpp:55
+#: src/lincity/modules/health_centre.cpp:61
+#: src/lincity/modules/rocket_pad.cpp:199 src/lincity/modules/market.cpp:984
+#: src/lincity/modules/road.cpp:47 src/lincity/modules/rail.cpp:51
+#: src/lincity/modules/coal_power.cpp:97 src/lincity/modules/university.cpp:66
+#: src/lincity/modules/cricket.cpp:94 src/lincity/modules/track.cpp:38
+#: src/lincity/modules/pottery.cpp:109 src/lincity/modules/school.cpp:49
+#: src/lincity/modules/firestation.cpp:111
 msgid "Jobs"
 msgstr "Pr??ce"
 
-#: src/lincity/modules/health_centre.cpp:71
-#: src/lincity/modules/rocket_pad.cpp:172 src/lincity/modules/market.cpp:1153
-#: src/lincity/modules/port.cpp:190 src/lincity/modules/road.cpp:56
-#: src/lincity/modules/rail.cpp:59 src/lincity/modules/mill.cpp:108
-#: src/lincity/modules/university.cpp:77 src/lincity/modules/cricket.cpp:104
-#: src/lincity/modules/track.cpp:47 src/lincity/modules/pottery.cpp:126
-#: src/lincity/modules/blacksmith.cpp:103
-#: src/lincity/modules/firestation.cpp:124 src/lincity/modules/school.cpp:57
-#: src/lincity-ng/MpsInterface.cpp:448
+#: src/lincity/modules/health_centre.cpp:62
+#: src/lincity/modules/rocket_pad.cpp:200 src/lincity/modules/market.cpp:986
+#: src/lincity/modules/port.cpp:298 src/lincity/modules/road.cpp:49
+#: src/lincity/modules/rail.cpp:53 src/lincity/modules/mill.cpp:93
+#: src/lincity/modules/university.cpp:67 src/lincity/modules/cricket.cpp:95
+#: src/lincity/modules/track.cpp:40 src/lincity/modules/pottery.cpp:110
+#: src/lincity/modules/blacksmith.cpp:96 src/lincity/modules/school.cpp:50
+#: src/lincity/modules/firestation.cpp:112 src/lincity-ng/MpsInterface.cpp:451
 msgid "Goods"
 msgstr "Zbo????"
 
-#: src/lincity/modules/rocket_pad.cpp:163
+#: src/lincity/modules/rocket_pad.cpp:192
 msgid "Rocket Pad"
 msgstr "Odpalovac?? rampa"
 
-#: src/lincity/modules/rocket_pad.cpp:166
+#: src/lincity/modules/rocket_pad.cpp:195
 msgid "Completion"
 msgstr "Postaveno"
 
-#: src/lincity/modules/rocket_pad.cpp:174 src/lincity/modules/market.cpp:1157
-#: src/lincity/modules/port.cpp:194 src/lincity/modules/road.cpp:60
-#: src/lincity/modules/rail.cpp:63 src/lincity/modules/light_industry.cpp:368
-#: src/lincity/modules/commune.cpp:156 src/lincity/modules/track.cpp:51
+#: src/lincity/modules/rocket_pad.cpp:201 src/lincity/modules/market.cpp:988
+#: src/lincity/modules/port.cpp:302 src/lincity/modules/road.cpp:51
+#: src/lincity/modules/rail.cpp:55 src/lincity/modules/light_industry.cpp:288
+#: src/lincity/modules/commune.cpp:182 src/lincity/modules/track.cpp:42
 msgid "Steel"
 msgstr "Ocel"
 
-#: src/lincity/modules/windmill.cpp:77 src/lincity/modules/windmill.cpp:88
-#: src/lincity/modules/recycle.cpp:178 src/lincity/modules/coal_power.cpp:107
-#: src/lincity/modules/organic_farm.cpp:196
-#: src/lincity/modules/solar_power.cpp:58
+#: src/lincity/modules/windmill.cpp:76 src/lincity/modules/recycle.cpp:146
+#: src/lincity/modules/coal_power.cpp:98
+#: src/lincity/modules/organic_farm.cpp:230
+#: src/lincity/modules/solar_power.cpp:60
 msgid "Tech"
 msgstr "Tech"
 
@@ -514,797 +521,787 @@
 msgid "Prod."
 msgstr "Prod."
 
-#: src/lincity/modules/windmill.cpp:86 src/lincity/modules/windmill.cpp:101
-#: src/lincity/modules/substation.cpp:108
+#: src/lincity/modules/windmill.cpp:86 src/lincity/modules/windmill.cpp:99
+#: src/lincity/modules/substation.cpp:110
 msgid "Demand"
 msgstr "Pot??eba"
 
-#: src/lincity/modules/windmill.cpp:92 src/lincity/modules/substation.cpp:99
+#: src/lincity/modules/windmill.cpp:90 src/lincity/modules/substation.cpp:101
 msgid "Grid Status"
 msgstr "Stav s??t??"
 
-#: src/lincity/modules/windmill.cpp:95 src/lincity/modules/substation.cpp:102
+#: src/lincity/modules/windmill.cpp:93 src/lincity/modules/substation.cpp:104
 msgid "T. Cap."
 msgstr ""
 
-#: src/lincity/modules/windmill.cpp:98 src/lincity/modules/substation.cpp:105
+#: src/lincity/modules/windmill.cpp:96 src/lincity/modules/substation.cpp:107
 msgid "A. Cap."
 msgstr ""
 
-#: src/lincity/modules/windmill.cpp:104 src/lincity/modules/coal_power.cpp:109
-#: src/lincity/modules/substation.cpp:111
-#: src/lincity/modules/power_line.cpp:53
-#: src/lincity/modules/solar_power.cpp:60
+#: src/lincity/modules/windmill.cpp:102 src/lincity/modules/coal_power.cpp:99
+#: src/lincity/modules/substation.cpp:113
+#: src/lincity/modules/power_line.cpp:49
+#: src/lincity/modules/solar_power.cpp:61
 msgid "Grid ID"
 msgstr "ID s??t??"
 
-#: src/lincity/modules/water.cpp:22 src/lincity/modules/commune.cpp:151
-#: src/lincity/modules/commune.cpp:153 src/lincity/modules/commune.cpp:155
-#: src/lincity/modules/commune.cpp:157 src/lincity-ng/MpsInterface.cpp:379
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/waterwell.cpp:50
+#: src/lincity/modules/commune.cpp:177 src/lincity/modules/commune.cpp:179
+#: src/lincity/modules/commune.cpp:181 src/lincity/modules/commune.cpp:183
 #: src/lincity-ng/MpsInterface.cpp:382 src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity-ng/MpsInterface.cpp:388
 msgid "Yes"
 msgstr "Ano"
 
-#: src/lincity/modules/water.cpp:22 src/lincity/modules/commune.cpp:151
-#: src/lincity/modules/commune.cpp:153 src/lincity/modules/commune.cpp:155
-#: src/lincity/modules/commune.cpp:157 src/lincity-ng/MpsInterface.cpp:379
-#: src/lincity-ng/MpsInterface.cpp:382 src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/commune.cpp:177
+#: src/lincity/modules/commune.cpp:179 src/lincity/modules/commune.cpp:181
+#: src/lincity/modules/commune.cpp:183 src/lincity-ng/MpsInterface.cpp:382
+#: src/lincity-ng/MpsInterface.cpp:385 src/lincity-ng/MpsInterface.cpp:388
 msgid "No"
 msgstr "Ne"
 
-#: src/lincity/modules/water.cpp:23
+#: src/lincity/modules/water.cpp:21
 msgid "Navigable"
 msgstr ""
 
-#: src/lincity/modules/recycle.cpp:169
+#: src/lincity/modules/recycle.cpp:137
 msgid "Recycling"
 msgstr "Recykla??n??"
 
-#: src/lincity/modules/recycle.cpp:170
+#: src/lincity/modules/recycle.cpp:138
 msgid "Center"
 msgstr "centrum"
 
-#: src/lincity/modules/recycle.cpp:173
-#: src/lincity/modules/heavy_industry.cpp:346 src/lincity/modules/mill.cpp:105
-#: src/lincity/modules/light_industry.cpp:370
-#: src/lincity/modules/university.cpp:79 src/lincity/modules/pottery.cpp:121
-#: src/lincity/modules/blacksmith.cpp:100 src/lincity/modules/school.cpp:60
+#: src/lincity/modules/recycle.cpp:141
+#: src/lincity/modules/heavy_industry.cpp:288 src/lincity/modules/mill.cpp:90
+#: src/lincity/modules/light_industry.cpp:289
+#: src/lincity/modules/university.cpp:68 src/lincity/modules/pottery.cpp:106
+#: src/lincity/modules/blacksmith.cpp:93 src/lincity/modules/school.cpp:52
 msgid "Capacity"
 msgstr "Kapacita"
 
-#: src/lincity/modules/recycle.cpp:175 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
 #: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/residence.cpp:288 src/lincity/modules/residence.cpp:291
-#: src/lincity/modules/residence.cpp:294
-#: src/lincity/modules/light_industry.cpp:359
-#: src/lincity/modules/organic_farm.cpp:188
+#: src/lincity/modules/light_industry.cpp:281
+#: src/lincity/modules/organic_farm.cpp:223
 msgid "YES"
 msgstr "ANO"
 
-#: src/lincity/modules/recycle.cpp:175 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
 #: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/residence.cpp:288 src/lincity/modules/residence.cpp:291
-#: src/lincity/modules/residence.cpp:294
-#: src/lincity/modules/heavy_industry.cpp:334
-#: src/lincity/modules/light_industry.cpp:359
+#: src/lincity/modules/heavy_industry.cpp:279
+#: src/lincity/modules/light_industry.cpp:281
 msgid "NO"
 msgstr "NE"
 
-#: src/lincity/modules/recycle.cpp:176 src/lincity/modules/residence.cpp:280
-#: src/lincity/modules/heavy_industry.cpp:337
-#: src/lincity/modules/light_industry.cpp:360
-#: src/lincity/modules/organic_farm.cpp:193
+#: src/lincity/modules/recycle.cpp:144 src/lincity/modules/residence.cpp:271
+#: src/lincity/modules/heavy_industry.cpp:282
+#: src/lincity/modules/light_industry.cpp:282
+#: src/lincity/modules/organic_farm.cpp:227
 msgid "Power"
 msgstr "Elekt??ina"
 
-#: src/lincity/modules/recycle.cpp:182
-#: src/lincity/modules/heavy_industry.cpp:342
-#: src/lincity/modules/market.cpp:1155 src/lincity/modules/port.cpp:186
-#: src/lincity/modules/road.cpp:58 src/lincity/modules/rail.cpp:61
-#: src/lincity/modules/light_industry.cpp:366
-#: src/lincity/modules/commune.cpp:154 src/lincity/modules/track.cpp:49
-#: src/lincity/modules/pottery.cpp:128
+#: src/lincity/modules/recycle.cpp:149
+#: src/lincity/modules/heavy_industry.cpp:286
+#: src/lincity/modules/market.cpp:987 src/lincity/modules/port.cpp:294
+#: src/lincity/modules/road.cpp:50 src/lincity/modules/rail.cpp:54
+#: src/lincity/modules/light_industry.cpp:287
+#: src/lincity/modules/commune.cpp:180 src/lincity/modules/track.cpp:41
+#: src/lincity/modules/pottery.cpp:111
 msgid "Ore"
 msgstr "Ruda"
 
-#: src/lincity/modules/recycle.cpp:184 src/lincity/modules/market.cpp:1159
-#: src/lincity/modules/road.cpp:62 src/lincity/modules/rail.cpp:65
-#: src/lincity/modules/commune.cpp:158 src/lincity/modules/track.cpp:53
+#: src/lincity/modules/recycle.cpp:150 src/lincity/modules/market.cpp:989
+#: src/lincity/modules/road.cpp:52 src/lincity/modules/rail.cpp:56
+#: src/lincity/modules/commune.cpp:184 src/lincity/modules/track.cpp:43
 msgid "Waste"
 msgstr "Odpad"
 
-#: src/lincity/modules/coalmine.cpp:168
+#: src/lincity/modules/coalmine.cpp:132
 msgid "Coal Mine"
 msgstr "Uheln?? d??l"
 
-#: src/lincity/modules/coalmine.cpp:171 src/lincity/modules/oremine.cpp:187
+#: src/lincity/modules/coalmine.cpp:135 src/lincity/modules/oremine.cpp:144
 msgid "Stock"
 msgstr "Z??soba"
 
-#: src/lincity/modules/coalmine.cpp:175 src/lincity/modules/coalmine.cpp:177
-#: src/lincity/modules/oremine.cpp:191
+#: src/lincity/modules/coalmine.cpp:138 src/lincity/modules/coalmine.cpp:140
+#: src/lincity/modules/oremine.cpp:147
 msgid "Reserve"
 msgstr "Rezerva"
 
-#: src/lincity/modules/coalmine.cpp:177
+#: src/lincity/modules/coalmine.cpp:140
 msgid "EMPTY"
 msgstr "PR??ZDN??"
 
-#: src/lincity/modules/residence.cpp:273
+#: src/lincity/modules/residence.cpp:255
 msgid "Residence"
 msgstr "Obydl??"
 
-#: src/lincity/modules/residence.cpp:277
+#: src/lincity/modules/residence.cpp:259
 msgid "People"
 msgstr "Lid??"
 
-#: src/lincity/modules/residence.cpp:283
+#: src/lincity/modules/residence.cpp:268
 msgid "Fed"
 msgstr "Nakrmeno"
 
-#: src/lincity/modules/residence.cpp:286
+#: src/lincity/modules/residence.cpp:274
 msgid "Employed"
 msgstr "Zam??stn??no"
 
-#: src/lincity/modules/residence.cpp:299 src/lincity-ng/MpsInterface.cpp:393
+#: src/lincity/modules/residence.cpp:276 src/lincity-ng/MpsInterface.cpp:396
 msgid "good"
 msgstr "dobr??"
 
-#: src/lincity/modules/residence.cpp:299
+#: src/lincity/modules/residence.cpp:276
 msgid "poor"
 msgstr "??patn??"
 
-#: src/lincity/modules/residence.cpp:300
+#: src/lincity/modules/residence.cpp:277
 msgid "Job"
 msgstr "Pr??ce"
 
-#: src/lincity/modules/residence.cpp:289
+#: src/lincity/modules/residence.cpp:280
 msgid "Health Cvr"
 msgstr "Zdravotn?? p."
 
-#: src/lincity/modules/residence.cpp:295 src/lincity-ng/MpsInterface.cpp:386
-#: src/lincity-ng/MpsInterface.cpp:514
+#: src/lincity/modules/residence.cpp:286 src/lincity-ng/MpsInterface.cpp:389
+#: src/lincity-ng/MpsInterface.cpp:517
 msgid "Sport"
 msgstr "Sport"
 
-#: src/lincity/modules/residence.cpp:297 src/lincity-ng/MpsInterface.cpp:388
+#: src/lincity/modules/residence.cpp:288 src/lincity/modules/waterwell.cpp:47
+#: src/lincity-ng/MpsInterface.cpp:391
 msgid "Pollution"
 msgstr "Zne??ist??n??"
 
-#: src/lincity/modules/monument.cpp:63
+#: src/lincity/modules/monument.cpp:57
 msgid "Wisdom Bestowed"
 msgstr ""
 
-#: src/lincity/modules/monument.cpp:67
+#: src/lincity/modules/monument.cpp:61
 #, c-format
 msgid "% Complete"
 msgstr "% hotovo"
 
-#: src/lincity/modules/heavy_industry.cpp:323
+#: src/lincity/modules/waterwell.cpp:44
+msgid "Water_well"
+msgstr ""
+
+#: src/lincity/modules/waterwell.cpp:51
+msgid "Drinkable"
+msgstr ""
+
+#: src/lincity/modules/heavy_industry.cpp:268
 msgid "Heavy"
 msgstr "T????k??"
 
-#: src/lincity/modules/heavy_industry.cpp:324
-#: src/lincity/modules/light_industry.cpp:355
+#: src/lincity/modules/heavy_industry.cpp:269
+#: src/lincity/modules/light_industry.cpp:277
 msgid "Industry"
 msgstr "Pr??mysl"
 
-#: src/lincity/modules/heavy_industry.cpp:329
-#: src/lincity/modules/heavy_industry.cpp:344
-#: src/lincity/modules/market.cpp:1151 src/lincity/modules/port.cpp:182
-#: src/lincity/modules/road.cpp:54 src/lincity/modules/rail.cpp:57
-#: src/lincity/modules/coal_power.cpp:89
-#: src/lincity/modules/coal_power.cpp:103 src/lincity/modules/mill.cpp:112
-#: src/lincity/modules/commune.cpp:152 src/lincity/modules/track.cpp:45
-#: src/lincity/modules/pottery.cpp:130 src/lincity/modules/blacksmith.cpp:105
-#: src/lincity-ng/MpsInterface.cpp:444
+#: src/lincity/modules/heavy_industry.cpp:274
+#: src/lincity/modules/heavy_industry.cpp:287
+#: src/lincity/modules/market.cpp:985 src/lincity/modules/port.cpp:290
+#: src/lincity/modules/road.cpp:48 src/lincity/modules/rail.cpp:52
+#: src/lincity/modules/coal_power.cpp:82 src/lincity/modules/coal_power.cpp:96
+#: src/lincity/modules/mill.cpp:95 src/lincity/modules/commune.cpp:178
+#: src/lincity/modules/track.cpp:39 src/lincity/modules/pottery.cpp:112
+#: src/lincity/modules/blacksmith.cpp:97 src/lincity-ng/MpsInterface.cpp:447
 msgid "Coal"
 msgstr "D??l"
 
-#: src/lincity/modules/heavy_industry.cpp:331
+#: src/lincity/modules/heavy_industry.cpp:276
 msgid "Grid"
 msgstr "S????"
 
-#: src/lincity/modules/heavy_industry.cpp:339
-#: src/lincity/modules/light_industry.cpp:362
+#: src/lincity/modules/heavy_industry.cpp:284
+#: src/lincity/modules/light_industry.cpp:284
 msgid "Output"
 msgstr "V??kon"
 
-#: src/lincity/modules/heavy_industry.cpp:340
-#: src/lincity/modules/light_industry.cpp:364
+#: src/lincity/modules/heavy_industry.cpp:285
+#: src/lincity/modules/light_industry.cpp:286
 msgid "Store"
 msgstr "Sklad"
 
-#: src/lincity/modules/market.cpp:1147 src/lincity/modules/port.cpp:178
-#: src/lincity/modules/road.cpp:50 src/lincity/modules/rail.cpp:53
-#: src/lincity/modules/mill.cpp:110 src/lincity/modules/track.cpp:41
+#: src/lincity/modules/market.cpp:983 src/lincity/modules/port.cpp:286
+#: src/lincity/modules/road.cpp:46 src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/mill.cpp:94 src/lincity/modules/track.cpp:37
 msgid "Food"
 msgstr "J??dlo"
 
-#: src/lincity/modules/port.cpp:198 src/lincity-ng/MpsInterface.cpp:532
+#: src/lincity/modules/port.cpp:306 src/lincity-ng/MpsInterface.cpp:535
 msgid "Total"
 msgstr "Celkem"
 
-#: src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/rail.cpp:47
 msgid "Rail"
 msgstr "??elezn??ce"
 
-#: src/lincity/modules/coal_power.cpp:90
-#: src/lincity/modules/solar_power.cpp:45
+#: src/lincity/modules/coal_power.cpp:83
+#: src/lincity/modules/solar_power.cpp:47
 msgid "Power Station"
 msgstr "Elektr??rna"
 
-#: src/lincity/modules/coal_power.cpp:94
-#: src/lincity/modules/solar_power.cpp:49
+#: src/lincity/modules/coal_power.cpp:87
+#: src/lincity/modules/solar_power.cpp:51
 msgid "Max Output"
 msgstr "Maxim??ln?? v??kon"
 
-#: src/lincity/modules/coal_power.cpp:99
-#: src/lincity/modules/solar_power.cpp:54
+#: src/lincity/modules/coal_power.cpp:92
+#: src/lincity/modules/solar_power.cpp:56
 msgid "Current Output"
 msgstr "Aktu??ln?? v??kon"
 
-#: src/lincity/modules/substation.cpp:95
+#: src/lincity/modules/substation.cpp:97
 msgid "Local Demand"
 msgstr "M??stn?? po??adavky"
 
-#: src/lincity/modules/mill.cpp:103
+#: src/lincity/modules/mill.cpp:88
 msgid "Textile Mill"
 msgstr "Zpracovatelsk?? z??vod"
 
-#: src/lincity/modules/oremine.cpp:184
+#: src/lincity/modules/oremine.cpp:141
 msgid "Ore Mine"
 msgstr "D??l ??elezn?? rudy"
 
-#: src/lincity/modules/power_line.cpp:50
+#: src/lincity/modules/power_line.cpp:46
 msgid "Power Line"
 msgstr "Elektrick?? veden??"
 
-#: src/lincity/modules/light_industry.cpp:354
+#: src/lincity/modules/light_industry.cpp:276
 msgid "Light"
 msgstr "Lehk??"
 
-#: src/lincity/modules/university.cpp:69
+#: src/lincity/modules/university.cpp:61
 msgid "Tech Produced"
 msgstr "Vymy??len?? technologie"
 
-#: src/lincity/modules/tip.cpp:109
+#: src/lincity/modules/tip.cpp:100
 msgid "Landfill"
 msgstr "Skl??dka"
 
-#: src/lincity/modules/tip.cpp:112
+#: src/lincity/modules/tip.cpp:103
 msgid "Last Month"
 msgstr "Minul?? m??s??c"
 
-#: src/lincity/modules/tip.cpp:113
+#: src/lincity/modules/tip.cpp:104
 msgid "Tons"
 msgstr "Tun"
 
-#: src/lincity/modules/tip.cpp:114
+#: src/lincity/modules/tip.cpp:105
 msgid "Percent"
 msgstr "Procent"
 
-#: src/lincity/modules/tip.cpp:117
+#: src/lincity/modules/tip.cpp:107
 #, c-format
 msgid "% Filled"
 msgstr "% zapln??no"
 
-#: src/lincity/modules/commune.cpp:149
+#: src/lincity/modules/commune.cpp:175
 msgid "Activity"
 msgstr "Aktivita"
 
-#: src/lincity/modules/school.cpp:51
+#: src/lincity/modules/school.cpp:45
 msgid "Lessons Learned"
 msgstr "Odu??en??ch hodin"
 
-#: src/lincity/modules/firestation.cpp:119
+#: src/lincity/modules/firestation.cpp:108
 msgid "Fire Station"
 msgstr "Po????rn?? stanice"
 
-#: src/lincity/modules/organic_farm.cpp:183
+#: src/lincity/modules/organic_farm.cpp:219
 msgid "Organic Farm"
 msgstr "??ivo??isn?? farma"
 
-#: src/lincity/modules/organic_farm.cpp:190
+#: src/lincity/modules/organic_farm.cpp:225
 msgid "NO "
 msgstr "NE "
 
-#: src/lincity/modules/organic_farm.cpp:200
+#: src/lincity/modules/organic_farm.cpp:233
 msgid "Prod"
 msgstr "Prod"
 
-#: src/lincity/modules/organic_farm.cpp:238
+#: src/lincity/modules/organic_farm.cpp:239
 msgid "Debug info"
 msgstr ""
 
-#: src/lincity/modules/organic_farm.cpp:239
-msgid " max with power & water"
-msgstr ""
-
 #: src/lincity/modules/organic_farm.cpp:240
-msgid " number of tile with water"
+msgid "max with power&water"
 msgstr ""
 
 #: src/lincity/modules/organic_farm.cpp:241
-msgid " current production"
+msgid "N tiles with water"
 msgstr ""
 
-#: src/lincity/modules/solar_power.cpp:44
+#: src/lincity/modules/organic_farm.cpp:242
+#, fuzzy
+msgid "Current production"
+msgstr "Aktu??ln?? v??kon"
+
+#: src/lincity/modules/solar_power.cpp:46
 msgid "Solar"
 msgstr "Slune??n??"
 
-#: src/lincity/modules/waterwell.cpp:44
-msgid "Water_well"
-msgstr ""
-
-#: src/lincity/modules/waterwell.cpp:51
-msgid "Drinkable"
-msgstr ""
-
 #: src/lincity-ng/Dialog.cpp:173
 msgid "Launchsite"
 msgstr "Odpalovac?? rampa"
 
-#: src/lincity-ng/Dialog.cpp:341 src/lincity-ng/Dialog.cpp:342
+#: src/lincity-ng/Dialog.cpp:352 src/lincity-ng/Dialog.cpp:353
 msgid "----- IN TEST MODE -------"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:344
+#: src/lincity-ng/Dialog.cpp:355
 #, c-format
 msgid "Game statistics from LinCity-NG Version %s"
 msgstr "Hern?? statistiky pro LinCity-NG verze %s"
 
-#: src/lincity-ng/Dialog.cpp:348
+#: src/lincity-ng/Dialog.cpp:359
 #, c-format
 msgid "Initial loaded scene - %s"
 msgstr "Sc??na na po????tku - %s"
 
-#: src/lincity-ng/Dialog.cpp:353
+#: src/lincity-ng/Dialog.cpp:364
 #, c-format
 msgid "Economy is sustainable"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:357
+#: src/lincity-ng/Dialog.cpp:368
 #, c-format
 msgid "Population  %d  of which  %d  are not housed."
 msgstr "Populace: %d (%d nen?? ubytov??no)."
 
-#: src/lincity-ng/Dialog.cpp:362
+#: src/lincity-ng/Dialog.cpp:373
 #, c-format
 msgid "Max population %d  Number evacuated %d Total births %d"
 msgstr "Nejvy?????? populace %d  Evakuov??no %d  Celkem narozeno %d"
 
-#: src/lincity-ng/Dialog.cpp:367
+#: src/lincity-ng/Dialog.cpp:378
 #, c-format
 msgid "Date %s %04d  Money %8d   Tech-level %5.1f (%5.1f)"
 msgstr ""
-"Datum    %s %04d               Pen??ze     %8d     Techn. ??rove?? %5.1f "
-"(%5.1f)"
+"Datum    %s %04d               Pen??ze     %8d     Techn. ??rove?? %5.1f (%5.1f)"
 
-#: src/lincity-ng/Dialog.cpp:374
+#: src/lincity-ng/Dialog.cpp:385
 #, c-format
 msgid ".Deaths by starvation %7d   History %8.3f"
 msgstr "Hlady um??elo           %7d  Historie        %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:379
+#: src/lincity-ng/Dialog.cpp:390
 #, c-format
 msgid "Deaths from pollution %7d   History %8.3f"
 msgstr "Ze vzduchu se otr??vilo %7d  Historie        %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:383
+#: src/lincity-ng/Dialog.cpp:394
 #, c-format
 msgid "Years of unemployment %7d   History %8.3f"
 msgstr "Rok?? nezam??stn??no      %7d  Historie        %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:387
+#: src/lincity-ng/Dialog.cpp:398
 #, c-format
 msgid "Rockets launched %2d  Successful launches %2d"
 msgstr "Odstartov??no raket          %2d  ??spe??n?? starty    %2d"
 
-#: src/lincity-ng/Dialog.cpp:397
+#: src/lincity-ng/Dialog.cpp:409
 #, c-format
 msgid ".   Residences %4d         Markets %4d            Farms %4d"
-msgstr ""
-".          Obydl?? %4d           Obchod?? %4d                  Farem %4d"
+msgstr ".          Obydl?? %4d           Obchod?? %4d                  Farem %4d"
 
-#: src/lincity-ng/Dialog.cpp:418
+#: src/lincity-ng/Dialog.cpp:420
 #, c-format
 msgid ".    Monuments %4d         Schools %4d     Universities %4d"
-msgstr ""
-".       Monument?? %4d              ??kol %4d              Univerzit %4d"
+msgstr ".       Monument?? %4d              ??kol %4d              Univerzit %4d"
 
-#: src/lincity-ng/Dialog.cpp:423
+#: src/lincity-ng/Dialog.cpp:425
 #, c-format
 msgid ".Fire stations %4d           Parks %4d    Sports fields %4d"
-msgstr ""
-".Po????rn??ch stanic %4d             Park?? %4d      Sportovn??ch h??i??t %4d"
+msgstr ".Po????rn??ch stanic %4d             Park?? %4d      Sportovn??ch h??i??t %4d"
 
-#: src/lincity-ng/Dialog.cpp:449
+#: src/lincity-ng/Dialog.cpp:430
 #, c-format
 msgid "Health centres %4d            Tips %4d         Shanties %4d"
-msgstr ""
-".Zdrav. st??ediska %4d           Skl??dek %4d               Shanties %4d"
+msgstr ".Zdrav. st??ediska %4d           Skl??dek %4d               Shanties %4d"
 
-#: src/lincity-ng/Dialog.cpp:433
+#: src/lincity-ng/Dialog.cpp:438
 #, c-format
 msgid ".    Windmills %4d     Coal powers %4d     Solar powers %4d"
-msgstr ""
-".  V??trn??ch ml??n?? %4d  Uhel. elektr??ren %4d     Slune??. elektr??ren %4d"
+msgstr ".  V??trn??ch ml??n?? %4d  Uhel. elektr??ren %4d     Slune??. elektr??ren %4d"
 
-#: src/lincity-ng/Dialog.cpp:439
+#: src/lincity-ng/Dialog.cpp:444
 #, c-format
 msgid ".  Substations %4d     Power lines %4d            Ports %4d"
-msgstr ""
-".        Rozvoden %4d Elektrick?? veden?? %4d               P????stav?? %4d"
+msgstr ".        Rozvoden %4d Elektrick?? veden?? %4d               P????stav?? %4d"
 
-#: src/lincity-ng/Dialog.cpp:408
+#: src/lincity-ng/Dialog.cpp:449
 #, c-format
 msgid ".       Tracks %4d           Roads %4d             Rail %4d"
-msgstr ""
-".           ??voz?? %4d            Silnic %4d               ??eleznic %4d"
+msgstr ".           ??voz?? %4d            Silnic %4d               ??eleznic %4d"
 
-#: src/lincity-ng/Dialog.cpp:413
+#: src/lincity-ng/Dialog.cpp:457
 #, c-format
 msgid ".    Potteries %4d     Blacksmiths %4d            Mills %4d"
-msgstr ""
-".      Hrn??????stv?? %4d         Kov????stv?? %4d         Zpracov. z??vod "
-"%4d"
+msgstr ".      Hrn??????stv?? %4d         Kov????stv?? %4d         Zpracov. z??vod %4d"
 
-#: src/lincity-ng/Dialog.cpp:444
+#: src/lincity-ng/Dialog.cpp:462
 #, c-format
 msgid ".   Light inds %4d      Heavy inds %4d        Recyclers %4d"
-msgstr ""
-".   Lehk?? pr??mysl %4d     T????k?? pr??mysl %4d              Recyklace %4d"
+msgstr ".   Lehk?? pr??mysl %4d     T????k?? pr??mysl %4d              Recyklace %4d"
 
-#: src/lincity-ng/Dialog.cpp:428
+#: src/lincity-ng/Dialog.cpp:467
 #, c-format
 msgid ".   Coal mines %4d       Ore mines %4d         Communes %4d"
-msgstr ""
-".   Uheln??ch dol?? %4d      Dol?? na rudu %4d                 Mil?????? %4d"
+msgstr ".   Uheln??ch dol?? %4d      Dol?? na rudu %4d                 Mil?????? %4d"
 
-#: src/lincity-ng/ScreenInterface.cpp:258
+#: src/lincity-ng/ScreenInterface.cpp:264
 msgid "MM"
 msgstr ""
 
-#: src/lincity-ng/GameView.cpp:1520 src/lincity-ng/GameView.cpp:1551
-#: src/lincity-ng/ScreenInterface.cpp:269
+#: src/lincity-ng/ScreenInterface.cpp:275 src/lincity-ng/GameView.cpp:1609
+#: src/lincity-ng/GameView.cpp:1640
 msgid "$"
 msgstr "$"
 
-#: src/lincity-ng/GameView.cpp:236
+#: src/lincity-ng/GameView.cpp:237
 msgid "Minimap: outline map"
 msgstr "Minimapa: obrysy"
 
-#: src/lincity-ng/GameView.cpp:239
+#: src/lincity-ng/GameView.cpp:240
 msgid "Minimap: unemployment"
 msgstr "Minimapa: nezam??stnanost"
 
-#: src/lincity-ng/GameView.cpp:242
+#: src/lincity-ng/GameView.cpp:243
 msgid "Minimap: pollution"
 msgstr "Minimapa: zne??i??t??n??"
 
-#: src/lincity-ng/GameView.cpp:245
+#: src/lincity-ng/GameView.cpp:246
 msgid "Minimap: nourishments"
 msgstr "Minimapa: stravov??n??"
 
-#: src/lincity-ng/GameView.cpp:248
+#: src/lincity-ng/GameView.cpp:249
 msgid "Minimap: power supply"
 msgstr "Minimapa: dod??vka elekt??iny"
 
-#: src/lincity-ng/GameView.cpp:251
+#: src/lincity-ng/GameView.cpp:252
 msgid "Minimap: firedepartment cover"
 msgstr "Minimapa: pokryt?? hasi??sk??mi sbory"
 
-#: src/lincity-ng/GameView.cpp:254
+#: src/lincity-ng/GameView.cpp:255
 msgid "Minimap: sport cover"
 msgstr "Minimapa: pokryt?? sportem"
 
-#: src/lincity-ng/GameView.cpp:257
+#: src/lincity-ng/GameView.cpp:258
 msgid "Minimap: medical care"
 msgstr "Minimapa: dostupnost zdravotn?? p????e"
 
-#: src/lincity-ng/GameView.cpp:260
+#: src/lincity-ng/GameView.cpp:261
 msgid "Minimap: coal depots"
 msgstr "Minimapa: uheln?? nalezi??t??"
 
-#: src/lincity-ng/GameView.cpp:263
+#: src/lincity-ng/GameView.cpp:264
 msgid "Minimap: traffic density"
 msgstr "Minimapa: hustota provozu"
 
-#: src/lincity-ng/GameView.cpp:1515
+#: src/lincity-ng/GameView.cpp:1604
 msgid "Estimated Bulldoze Cost: "
 msgstr "Odhadovan?? cena zbour??n??: "
 
-#: src/lincity-ng/GameView.cpp:1517
+#: src/lincity-ng/GameView.cpp:1606
 msgid "Bulldoze Cost: "
 msgstr "Cena zbour??n??: "
 
-#: src/lincity-ng/GameView.cpp:1522
+#: src/lincity-ng/GameView.cpp:1611
 msgid "n/a"
 msgstr "n/a"
 
-#: src/lincity-ng/GameView.cpp:1540
+#: src/lincity-ng/GameView.cpp:1629
 msgid "Query Tool: Show information about selected building."
 msgstr "Dotazova??: Zobraz?? informace o vybr??nn?? budov??."
 
-#: src/lincity-ng/GameView.cpp:1544
+#: src/lincity-ng/GameView.cpp:1633
 msgid "Bulldozer: remove building -price varies-"
 msgstr "Buldozer: odstran?? budovu -cena se m??n??-"
 
-#: src/lincity-ng/GameView.cpp:1551
+#: src/lincity-ng/GameView.cpp:1640
 msgid ": Cost to build "
 msgstr ": Cena v??stavby "
 
-#: src/lincity-ng/GameView.cpp:1552
+#: src/lincity-ng/GameView.cpp:1641
 msgid ", to bulldoze "
 msgstr ", za zbour??n?? "
 
-#: src/lincity-ng/GameView.cpp:1552 src/lincity-ng/GameView.cpp:1555
+#: src/lincity-ng/GameView.cpp:1641 src/lincity-ng/GameView.cpp:1644
 msgid "$."
 msgstr "$."
 
-#: src/lincity-ng/GameView.cpp:1554
+#: src/lincity-ng/GameView.cpp:1643
 msgid " To build "
 msgstr " Postaven?? "
 
-#: src/lincity-ng/GameView.cpp:1554
+#: src/lincity-ng/GameView.cpp:1643
 msgid " of them "
 msgstr " kus?? "
 
-#: src/lincity-ng/GameView.cpp:1555
+#: src/lincity-ng/GameView.cpp:1644
 msgid "will cost about "
 msgstr "bude st??t zhruba "
 
-#: src/lincity-ng/MainMenu.cpp:175
+#: src/lincity-ng/MainMenu.cpp:199
 msgid "empty"
 msgstr "pr??zdn??"
 
-#: src/lincity-ng/MpsInterface.cpp:224
+#: src/lincity-ng/MpsInterface.cpp:227
 msgid "build something here"
 msgstr ""
 
-#: src/lincity-ng/MpsInterface.cpp:226
+#: src/lincity-ng/MpsInterface.cpp:229
 msgid "no further information available"
 msgstr ""
 
-#: src/lincity-ng/MpsInterface.cpp:378
+#: src/lincity-ng/MpsInterface.cpp:381
 msgid "Coverage"
 msgstr "Pokryt??"
 
-#: src/lincity-ng/MpsInterface.cpp:383
+#: src/lincity-ng/MpsInterface.cpp:386
 msgid "Health"
 msgstr "Zdrav??"
 
-#: src/lincity-ng/MpsInterface.cpp:391
+#: src/lincity-ng/MpsInterface.cpp:394
 msgid "clear"
 msgstr "??ist??"
 
-#: src/lincity-ng/MpsInterface.cpp:395
+#: src/lincity-ng/MpsInterface.cpp:398
 msgid "fair"
 msgstr "uspokojiv??"
 
-#: src/lincity-ng/MpsInterface.cpp:397
+#: src/lincity-ng/MpsInterface.cpp:400
 msgid "smelly"
 msgstr "zap??chaj??c??"
 
-#: src/lincity-ng/MpsInterface.cpp:399
+#: src/lincity-ng/MpsInterface.cpp:402
 msgid "smokey"
 msgstr "pra??n??"
 
-#: src/lincity-ng/MpsInterface.cpp:401
+#: src/lincity-ng/MpsInterface.cpp:404
 msgid "smoggy"
 msgstr "smog"
 
-#: src/lincity-ng/MpsInterface.cpp:403
+#: src/lincity-ng/MpsInterface.cpp:406
 msgid "bad"
 msgstr "??patn??"
 
-#: src/lincity-ng/MpsInterface.cpp:405
+#: src/lincity-ng/MpsInterface.cpp:408
 msgid "very bad"
 msgstr "velmi ??patn??"
 
-#: src/lincity-ng/MpsInterface.cpp:407
+#: src/lincity-ng/MpsInterface.cpp:410
 msgid "death!"
 msgstr "smrt??c??!"
 
-#: src/lincity-ng/MpsInterface.cpp:412
+#: src/lincity-ng/MpsInterface.cpp:415
 msgid "Bulldoze Cost"
 msgstr "Cena zbour??n??"
 
-#: src/lincity-ng/MpsInterface.cpp:418
+#: src/lincity-ng/MpsInterface.cpp:421
 msgid "N/A"
 msgstr "N/A"
 
-#: src/lincity-ng/MpsInterface.cpp:436
+#: src/lincity-ng/MpsInterface.cpp:439
 msgid "Tax Income"
 msgstr "P????jem z dan??"
 
-#: src/lincity-ng/MpsInterface.cpp:440
+#: src/lincity-ng/MpsInterface.cpp:443
 msgid "Income"
 msgstr "P????jmy"
 
-#: src/lincity-ng/MpsInterface.cpp:452
+#: src/lincity-ng/MpsInterface.cpp:455
 msgid "Export"
 msgstr "V??voz"
 
-#: src/lincity-ng/MpsInterface.cpp:456
+#: src/lincity-ng/MpsInterface.cpp:459
 msgid "Expenses"
 msgstr "N??klady"
 
-#: src/lincity-ng/MpsInterface.cpp:460
+#: src/lincity-ng/MpsInterface.cpp:463
 msgid "Unemp."
 msgstr "Nezam."
 
-#: src/lincity-ng/MpsInterface.cpp:464
+#: src/lincity-ng/MpsInterface.cpp:467
 msgid "Transport"
 msgstr "P??eprava"
 
-#: src/lincity-ng/MpsInterface.cpp:468
+#: src/lincity-ng/MpsInterface.cpp:471
 msgid "Imports"
 msgstr "Dovoz"
 
-#: src/lincity-ng/MpsInterface.cpp:472
+#: src/lincity-ng/MpsInterface.cpp:475
 msgid "Others"
 msgstr "Ostatn??"
 
-#: src/lincity-ng/MpsInterface.cpp:477
+#: src/lincity-ng/MpsInterface.cpp:480
 msgid "Net"
 msgstr "S????"
 
-#: src/lincity-ng/MpsInterface.cpp:489
+#: src/lincity-ng/MpsInterface.cpp:492
 msgid "Other Costs"
 msgstr "Ostatn?? n??klady"
 
-#: src/lincity-ng/MpsInterface.cpp:494
+#: src/lincity-ng/MpsInterface.cpp:497
 msgid "For year"
 msgstr "Ro??n??"
 
-#: src/lincity-ng/MpsInterface.cpp:498
+#: src/lincity-ng/MpsInterface.cpp:501
 msgid "Interest"
 msgstr "??roky"
 
-#: src/lincity-ng/MpsInterface.cpp:500
+#: src/lincity-ng/MpsInterface.cpp:503
 msgid "Schools"
 msgstr "??koly"
 
-#: src/lincity-ng/MpsInterface.cpp:502
+#: src/lincity-ng/MpsInterface.cpp:505
 msgid "Univers."
 msgstr "Univer."
 
-#: src/lincity-ng/MpsInterface.cpp:504
+#: src/lincity-ng/MpsInterface.cpp:507
 msgid "Deaths"
 msgstr "Mrtv??"
 
-#: src/lincity-ng/MpsInterface.cpp:508
+#: src/lincity-ng/MpsInterface.cpp:511
 msgid "Hospital"
 msgstr "Nemocnice"
 
-#: src/lincity-ng/MpsInterface.cpp:510
+#: src/lincity-ng/MpsInterface.cpp:513
 msgid "Rockets"
 msgstr "Rakety"
 
-#: src/lincity-ng/MpsInterface.cpp:512
+#: src/lincity-ng/MpsInterface.cpp:515
 msgid "Fire Stn"
 msgstr "Po????rn?? st."
 
-#: src/lincity-ng/MpsInterface.cpp:530
+#: src/lincity-ng/MpsInterface.cpp:533
 msgid "Population"
 msgstr "Populace"
 
-#: src/lincity-ng/MpsInterface.cpp:533
+#: src/lincity-ng/MpsInterface.cpp:536
 msgid "Housed"
 msgstr "Ubytov??no"
 
-#: src/lincity-ng/MpsInterface.cpp:534
+#: src/lincity-ng/MpsInterface.cpp:537
 msgid "Homeless"
 msgstr "Bezdomovci"
 
-#: src/lincity-ng/MpsInterface.cpp:535
+#: src/lincity-ng/MpsInterface.cpp:538
 msgid "Shanties"
 msgstr ""
 
-#: src/lincity-ng/MpsInterface.cpp:536
+#: src/lincity-ng/MpsInterface.cpp:539
 msgid "Unn Dths"
 msgstr ""
 
-#: src/lincity-ng/MpsInterface.cpp:537
+#: src/lincity-ng/MpsInterface.cpp:540
 msgid "Unemployment"
 msgstr "Nezam??stnan??"
 
-#: src/lincity-ng/MpsInterface.cpp:538
+#: src/lincity-ng/MpsInterface.cpp:541
 msgid "Claims"
 msgstr ""
 
-#: src/lincity-ng/MpsInterface.cpp:539 src/lincity-ng/MpsInterface.cpp:544
+#: src/lincity-ng/MpsInterface.cpp:542 src/lincity-ng/MpsInterface.cpp:547
 msgid "Rate"
 msgstr ""
 
-#: src/lincity-ng/MpsInterface.cpp:541
+#: src/lincity-ng/MpsInterface.cpp:544
 msgid "Starvation"
 msgstr "Hladov??"
 
-#: src/lincity-ng/MpsInterface.cpp:542
+#: src/lincity-ng/MpsInterface.cpp:545
 msgid "Cases"
 msgstr ""
 
-#: src/lincity-ng/ButtonPanel.cpp:198
+#: src/lincity-ng/ButtonPanel.cpp:200
 msgid "Query Tool"
 msgstr "Dotazova??"
 
-#: src/lincity-ng/ButtonPanel.cpp:199
+#: src/lincity-ng/ButtonPanel.cpp:201
 msgid "Bulldozer"
 msgstr "Buldozer"
 
-#: src/lincity-ng/ButtonPanel.cpp:201
+#: src/lincity-ng/ButtonPanel.cpp:203
 msgid "Residential: 50 denizens, low birthrate, high deathrate"
 msgstr "Obydl??: 50 obyvatel, n??zka porodnost, vysok?? ??mrtnost"
 
-#: src/lincity-ng/ButtonPanel.cpp:202
+#: src/lincity-ng/ButtonPanel.cpp:204
 msgid "Residential: 100 denizens, high birthrate, low deathrate"
 msgstr "Obydl??: 100 obyvatel, vysok?? porodnost, n??zk?? ??mrtnost"
 
-#: src/lincity-ng/ButtonPanel.cpp:203
+#: src/lincity-ng/ButtonPanel.cpp:205
 msgid "Residential: 200 denizens, high birthrate, high deathrate"
 msgstr "Obydl??: 200 obyvatel, vysok?? porodnost, vysok?? ??mrtnost"
 
-#: src/lincity-ng/ButtonPanel.cpp:204
+#: src/lincity-ng/ButtonPanel.cpp:206
 msgid "Residential: 100 denizens, low birthrate, high deathrate"
 msgstr "Obydl??: 100 obyvatel, n??zk?? porodnost, vysok?? ??mrtnost"
 
-#: src/lincity-ng/ButtonPanel.cpp:205
+#: src/lincity-ng/ButtonPanel.cpp:207
 msgid "Residential: 200 denizens, high birthrate, low deathrate"
 msgstr "Obydl??: 200 obyvatel, vysok?? porodnost, n??zk?? ??mrtnost"
 
-#: src/lincity-ng/ButtonPanel.cpp:206
+#: src/lincity-ng/ButtonPanel.cpp:208
 msgid "Residential: 400 denizens, high birthrate, high deathrate"
 msgstr "Obydl??: 400 obyvatel, vysok?? porodnost, vysok?? ??mrtnost"
 
-#: src/lincity-ng/ButtonPanel.cpp:215
+#: src/lincity-ng/ButtonPanel.cpp:217
 msgid " [Click right for help.]"
 msgstr " [Stiskn??te prav?? tla????tko pro n??pov??du.]"
 
-#: src/lincity-ng/ButtonPanel.cpp:243 src/lincity-ng/ButtonPanel.cpp:277
+#: src/lincity-ng/ButtonPanel.cpp:245 src/lincity-ng/ButtonPanel.cpp:288
 #, c-format
 msgid "%s (Techlevel %.1f required.)"
 msgstr "%s (Po??adov??na technologick?? ??rove?? %.1f)"
 
-#: src/lincity-ng/ButtonPanel.cpp:252
+#: src/lincity-ng/ButtonPanel.cpp:254
 #, c-format
 msgid "%s is disabled (loaded old game)."
 msgstr ""
 
-#: src/lincity-ng/EconomyGraph.cpp:121
+#: src/lincity-ng/EconomyGraph.cpp:124
 msgid "Mining"
 msgstr "T????ba"
 
-#: src/lincity-ng/EconomyGraph.cpp:123
+#: src/lincity-ng/EconomyGraph.cpp:126
 msgid "Trade"
 msgstr "Obchod"
 
-#: src/lincity-ng/EconomyGraph.cpp:125
+#: src/lincity-ng/EconomyGraph.cpp:128
 msgid "Money"
 msgstr "Pen??ze"
 
-#: src/lincity-ng/EconomyGraph.cpp:127
+#: src/lincity-ng/EconomyGraph.cpp:130
 msgid "Popul."
 msgstr "Popul."
 
-#: src/lincity-ng/EconomyGraph.cpp:129
+#: src/lincity-ng/EconomyGraph.cpp:132
 msgid "Techn."
 msgstr "Techn."
 
-#: src/lincity-ng/EconomyGraph.cpp:134
+#: src/lincity-ng/EconomyGraph.cpp:137
 msgid "Economy Overview:"
 msgstr "P??ehled ekonomiky:"
 
-#: src/lincity-ng/EconomyGraph.cpp:137
+#: src/lincity-ng/EconomyGraph.cpp:140
 msgid "Sustainability:"
 msgstr ""
 
-#: src/lincity-ng/EconomyGraph.cpp:140
+#: src/lincity-ng/EconomyGraph.cpp:143
 msgid "Frames per Second:"
 msgstr "Sn??mk?? za sekundu:"
 
-#: src/lincity-ng/EconomyGraph.cpp:216
+#: src/lincity-ng/EconomyGraph.cpp:219
 msgid "You lose."
 msgstr "Prohr??l jsi."

Modified: trunk/data/locale/de.po
===================================================================
--- trunk/data/locale/de.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/de.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -7,40 +7,17 @@
 msgid ""
 msgstr ""
 "Project-Id-Version: lincity-ng 0.1\n"
-"POT-Creation-Date: 2007-01-27 22:03+0100\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2007-12-04 00:29+0100\n"
 "PO-Revision-Date: 2007-08-13 19:43+0100\n"
 "Last-Translator: Wolfgang Becker <uafr at gmx.de>\n"
+"Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
 "Plural-Forms: nplurals=2; plural=(n != 1);\n"
-"Language-Team: \n"
 
-#: src/lincity/fileutil.cpp:292
-#: src/lincity/fileutil.cpp:341
-msgid "Error. Can't find LINCITY_HOME"
-msgstr "Kann LINCITY_HOME nicht finden."
-
-#: src/lincity/fileutil.cpp:561
-msgid "Error verifying package. Can't find colour.pal."
-msgstr "Fehler bei Paket??berpr??fung. Kann colour.pal nicht finden."
-
-#: src/lincity/fileutil.cpp:580
-#: src/lincity/fileutil.cpp:589
-#, c-format
-msgid "Couldn't create the save directory '%s'\n"
-msgstr "Kann Speicherverzeichniss '%s' nicht anlegen\n"
-
-#: src/lincity/fileutil.cpp:635
-#, c-format
-msgid "Out of memory: malloc failure\n"
-msgstr "Kein Speicher mehr vorhanden: malloc fehlgeschlagen\n"
-
-#: src/lincity/power.cpp:97
-msgid "You have too many power grids. Join some of them"
-msgstr "Sie haben zu viele Stromnetze. Verbinden sie welche."
-
-#: src/lincity/engine.cpp:198
+#: src/lincity/engine.cpp:120
 msgid ""
 "ERROR: group does not exist. This should not happen! Please consider filling "
 "a bug report to lincity-ng team, with the saved game and what you did :-) "
@@ -49,1345 +26,1289 @@
 "sie einen Bugreport. Senden sie ihn zusammen mit dem Spielstand und einer "
 "Beschreibung, was sie gemacht haben an das LinCity NG Team."
 
-#: src/lincity/engine.cpp:226
+#: src/lincity/engine.cpp:152
 msgid "Port must be connected to river all along right side."
 msgstr "H??fen m??ssen mit der ganzen rechten Seite  am Flu?? liegen."
 
-#: src/lincity/engine.cpp:236
-#: src/lincity/engine.cpp:246
+#: src/lincity/engine.cpp:161 src/lincity/engine.cpp:170
 msgid "Too many substations + windmills. You cannot build one more"
 msgstr ""
 "Es gibt zu viel Umspannwerke und Windm??hlen. Sie k??nnen keine mehr bauen."
 
-#: src/lincity/engine.cpp:280
+#: src/lincity/engine.cpp:200
 msgid "Too many markets. You cannot build one more"
 msgstr "Es gibt zu viele M??rkte. Sie k??nnenkeinen mehr bauen."
 
-#: src/lincity/engine.cpp:305
+#: src/lincity/engine.cpp:223
 msgid "You can't build a tip here: this area was once a landfill"
-msgstr ""
-"Hier k??nnen Sie keine M??llkippe errichten, da hier schonmal eine war."
+msgstr "Hier k??nnen Sie keine M??llkippe errichten, da hier schonmal eine war."
 
-#: src/lincity/engine.cpp:330
+#: src/lincity/engine.cpp:248
 msgid "You can't build a mine here: This area was once a landfill"
 msgstr "Sie k??nnen hier keine Bergwerk bauen. Hier war mal eine M??llkippe"
 
-#: src/lincity/engine.cpp:335
+#: src/lincity/engine.cpp:252
 msgid "You can't build a mine here: there is no ore left at this site"
 msgstr ""
 "Sie k??nnen hier kein Bergwerk bauen, da es an dieser Stelle kein Erz mehr "
 "gibt."
 
-#: src/lincity/engine.cpp:259
+#: src/lincity/engine.cpp:264
 msgid "You can't build a water well here: it is all desert."
 msgstr ""
 
-#: src/lincity/engine.cpp:269
+#: src/lincity/engine.cpp:274
 msgid "You can't build a park here: it is a desert, parks need water"
 msgstr ""
 
-#: src/lincity/engine.cpp:609
+#: src/lincity/engine.cpp:485
 msgid "It's at a power line."
 msgstr "Es ist eine Stromleitung."
 
-#: src/lincity/engine.cpp:611
+#: src/lincity/engine.cpp:487
 msgid "It's at a solar power station."
 msgstr "Es ist ein Solarkraftwerk"
 
-#: src/lincity/engine.cpp:613
+#: src/lincity/engine.cpp:489
 msgid "It's at a substation."
 msgstr "Es ist ein Umspannh??uschen."
 
-#: src/lincity/engine.cpp:615
+#: src/lincity/engine.cpp:491
 msgid "It's at a residential area."
 msgstr "Es ist ein Wohngebiet."
 
-#: src/lincity/engine.cpp:617
+#: src/lincity/engine.cpp:493
 msgid "It's at a farm."
 msgstr "Es ist ein Bauernhof"
 
-#: src/lincity/engine.cpp:619
+#: src/lincity/engine.cpp:495
 msgid "It's at a market."
 msgstr "Es ist ein Markt."
 
-#: src/lincity/engine.cpp:621
+#: src/lincity/engine.cpp:497
 msgid "It's at a track."
 msgstr "Es ist ein Weg."
 
-#: src/lincity/engine.cpp:623
+#: src/lincity/engine.cpp:499
 msgid "It's at a coal mine."
 msgstr "Es ist eine Kohlegrube."
 
-#: src/lincity/engine.cpp:625
+#: src/lincity/engine.cpp:501
 msgid "It's at a railway."
 msgstr "Es ist eine Eisenbahnschine."
 
-#: src/lincity/engine.cpp:627
+#: src/lincity/engine.cpp:503
 msgid "It's at a coal power station."
 msgstr "Es ist ein Kohlekraftwerk."
 
-#: src/lincity/engine.cpp:629
+#: src/lincity/engine.cpp:505
 msgid "It's at a road."
 msgstr "Es ist eine Stra??e"
 
-#: src/lincity/engine.cpp:631
+#: src/lincity/engine.cpp:507
 msgid "It's at light industry."
 msgstr "Es ist ein Industriegebiet"
 
-#: src/lincity/engine.cpp:633
+#: src/lincity/engine.cpp:509
 msgid "It's at a university."
 msgstr "Es ist eine Universit??t"
 
-#: src/lincity/engine.cpp:635
+#: src/lincity/engine.cpp:511
 msgid "It's at a commune."
 msgstr "Es ist eine K??hlerei."
 
-#: src/lincity/engine.cpp:637
+#: src/lincity/engine.cpp:513
 msgid "It's at a tip."
 msgstr "Es ist eine M??llkippe."
 
-#: src/lincity/engine.cpp:639
+#: src/lincity/engine.cpp:515
 msgid "It's at a port."
 msgstr "Es ist ein Hafen."
 
-#: src/lincity/engine.cpp:641
+#: src/lincity/engine.cpp:517
 msgid "It's at a steel works."
 msgstr "Es ist ein Stahlwerk."
 
-#: src/lincity/engine.cpp:643
+#: src/lincity/engine.cpp:519
 msgid "It's at a recycle centre."
 msgstr "Es ist ein Recyclinghof."
 
-#: src/lincity/engine.cpp:645
+#: src/lincity/engine.cpp:521
 msgid "It's at a health centre."
 msgstr "Es ist ein Krankenhaus."
 
-#: src/lincity/engine.cpp:647
+#: src/lincity/engine.cpp:523
 msgid "It's at a rocket site."
 msgstr "Es ist eine Raketenbasis."
 
-#: src/lincity/engine.cpp:649
+#: src/lincity/engine.cpp:525
 msgid "It's at a windmill."
 msgstr "Es ist eine Windm??hle."
 
-#: src/lincity/engine.cpp:651
+#: src/lincity/engine.cpp:527
 msgid "It's at a school."
 msgstr "Es ist eine Schule."
 
-#: src/lincity/engine.cpp:653
+#: src/lincity/engine.cpp:529
 msgid "It's at a blacksmith."
 msgstr "Es ist ein Schmied."
 
-#: src/lincity/engine.cpp:655
+#: src/lincity/engine.cpp:531
 msgid "It's at a mill."
 msgstr "Es ist eine Spinnerei."
 
-#: src/lincity/engine.cpp:657
+#: src/lincity/engine.cpp:533
 msgid "It's at a pottery."
 msgstr "Es ist eine T??pferei."
 
-#: src/lincity/engine.cpp:659
+#: src/lincity/engine.cpp:535
 msgid "It's at a fire station!!!."
 msgstr "Es ist eine Feuerwehr!"
 
-#: src/lincity/engine.cpp:661
+#: src/lincity/engine.cpp:537
 msgid "It's at a sports field!!!."
 msgstr "Es ist ein Sportplatz."
 
-#: src/lincity/engine.cpp:663
+#: src/lincity/engine.cpp:539
 msgid "It's at a shanty town."
 msgstr "Es ist eine Barackensiedlung."
 
-#: src/lincity/engine.cpp:665
+#: src/lincity/engine.cpp:541
 msgid "UNKNOWN!"
 msgstr "Unbekannt."
 
-#: src/lincity/lintypes.cpp:22
+#: src/lincity/lintypes.cpp:20
 msgid "Empty"
 msgstr "Leer"
 
-#: src/lincity/lintypes.cpp:34
+#: src/lincity/lintypes.cpp:32
 msgid "Power line"
 msgstr "Stromleitung"
 
-#: src/lincity/lintypes.cpp:46
+#: src/lincity/lintypes.cpp:43
 msgid "Solar PS"
 msgstr "Solarkraftwerk"
 
-#: src/lincity/lintypes.cpp:58
-#: src/lincity/modules/substation.cpp:96
+#: src/lincity/lintypes.cpp:54 src/lincity/modules/substation.cpp:93
 msgid "Substation"
 msgstr "Umspannh??uschen"
 
-#: src/lincity/lintypes.cpp:70
+#: src/lincity/lintypes.cpp:65
 msgid "Residential LL"
 msgstr "Friedhof"
 
-#: src/lincity/lintypes.cpp:82
+#: src/lincity/lintypes.cpp:76
 msgid "Farm"
 msgstr "Bauernhof"
 
-#: src/lincity/lintypes.cpp:94
-#: src/lincity/modules/market.cpp:1152
-#: src/lincity-ng/Dialog.cpp:506
+#: src/lincity/lintypes.cpp:87 src/lincity/modules/market.cpp:979
+#: src/lincity-ng/Dialog.cpp:507
 msgid "Market"
 msgstr "Markt"
 
-#: src/lincity/lintypes.cpp:106
-#: src/lincity/modules/track.cpp:38
+#: src/lincity/lintypes.cpp:98 src/lincity/modules/track.cpp:34
 msgid "Track"
 msgstr "Weg"
 
-#: src/lincity/lintypes.cpp:118
+#: src/lincity/lintypes.cpp:109
 msgid "Coalmine"
 msgstr "Kohlegrube"
 
-#: src/lincity/lintypes.cpp:130
+#: src/lincity/lintypes.cpp:120
 msgid "Railway"
 msgstr "Eisenbahn"
 
-#: src/lincity/lintypes.cpp:142
+#: src/lincity/lintypes.cpp:131
 msgid "Coal PS"
 msgstr "Kohlekraftwerk"
 
-#: src/lincity/lintypes.cpp:154
-#: src/lincity/modules/road.cpp:47
+#: src/lincity/lintypes.cpp:142 src/lincity/modules/road.cpp:43
 msgid "Road"
 msgstr "Stra??e"
 
-#: src/lincity/lintypes.cpp:166
+#: src/lincity/lintypes.cpp:153
 msgid "Lt. Industry"
 msgstr "Industriegebiet"
 
-#: src/lincity/lintypes.cpp:178
-#: src/lincity/modules/university.cpp:67
+#: src/lincity/lintypes.cpp:164 src/lincity/modules/university.cpp:59
 msgid "University"
 msgstr "Universit??t"
 
-#: src/lincity/lintypes.cpp:190
-#: src/lincity/modules/commune.cpp:146
+#: src/lincity/lintypes.cpp:175 src/lincity/modules/commune.cpp:172
 msgid "Commune"
 msgstr "K??hlerei"
 
-#: src/lincity/lintypes.cpp:202
+#: src/lincity/lintypes.cpp:186
 msgid "Ore mine"
 msgstr "Erzbergwerk"
 
-#: src/lincity/lintypes.cpp:214
+#: src/lincity/lintypes.cpp:197
 msgid "Rubbish tip"
 msgstr "M??llkippe"
 
-#: src/lincity/lintypes.cpp:226
-#: src/lincity/modules/port.cpp:340
-#: src/lincity-ng/Dialog.cpp:560
+#: src/lincity/lintypes.cpp:208 src/lincity/modules/port.cpp:281
+#: src/lincity-ng/Dialog.cpp:561
 msgid "Port"
 msgstr "Hafen"
 
-#: src/lincity/lintypes.cpp:238
+#: src/lincity/lintypes.cpp:219
 msgid "Hv. Industry"
 msgstr "Schwerindustrie"
 
-#: src/lincity/lintypes.cpp:250
+#: src/lincity/lintypes.cpp:230
 msgid "Park"
 msgstr "Park"
 
-#: src/lincity/lintypes.cpp:262
-#: src/lincity-ng/MpsInterface.cpp:516
+#: src/lincity/lintypes.cpp:241 src/lincity-ng/MpsInterface.cpp:519
 msgid "Recycle"
 msgstr "Wertstoffhof"
 
-#: src/lincity/lintypes.cpp:274
-#: src/lincity/modules/water.cpp:19
+#: src/lincity/lintypes.cpp:252 src/lincity/modules/water.cpp:17
+#: src/lincity/modules/residence.cpp:264
 msgid "Water"
 msgstr "Wasser"
 
-#: src/lincity/lintypes.cpp:286
+#: src/lincity/lintypes.cpp:263
 msgid "Health centre"
 msgstr "Krankenhaus"
 
-#: src/lincity/lintypes.cpp:298
+#: src/lincity/lintypes.cpp:274
 msgid "Rocket pad"
 msgstr "Raketenbasis"
 
-#: src/lincity/lintypes.cpp:310
-#: src/lincity/modules/windmill.cpp:78
-#: src/lincity-ng/MpsInterface.cpp:506
+#: src/lincity/lintypes.cpp:285 src/lincity/modules/windmill.cpp:75
+#: src/lincity-ng/MpsInterface.cpp:509
 msgid "Windmill"
 msgstr "Windm??hle"
 
-#: src/lincity/lintypes.cpp:322
-#: src/lincity/modules/monument.cpp:57
+#: src/lincity/lintypes.cpp:296 src/lincity/modules/monument.cpp:51
 msgid "Monument"
 msgstr "Monument"
 
-#: src/lincity/lintypes.cpp:334
-#: src/lincity/modules/school.cpp:49
+#: src/lincity/lintypes.cpp:307 src/lincity/modules/school.cpp:43
 msgid "School"
 msgstr "Schule"
 
-#: src/lincity/lintypes.cpp:346
-#: src/lincity/modules/blacksmith.cpp:100
+#: src/lincity/lintypes.cpp:318 src/lincity/modules/blacksmith.cpp:90
 msgid "Blacksmith"
 msgstr "Schmied"
 
-#: src/lincity/lintypes.cpp:358
+#: src/lincity/lintypes.cpp:329
 msgid "Mill"
 msgstr "Spinnerei"
 
-#: src/lincity/lintypes.cpp:370
-#: src/lincity/modules/pottery.cpp:119
+#: src/lincity/lintypes.cpp:340 src/lincity/modules/pottery.cpp:104
 msgid "Pottery"
 msgstr "T??pferei"
 
-#: src/lincity/lintypes.cpp:382
+#: src/lincity/lintypes.cpp:351
 msgid "Fire sta'n"
 msgstr "Feuerwehr"
 
-#: src/lincity/lintypes.cpp:394
-#: src/lincity/modules/cricket.cpp:99
+#: src/lincity/lintypes.cpp:362 src/lincity/modules/cricket.cpp:91
 msgid "Sports field"
 msgstr "Sportplatz"
 
-#: src/lincity/lintypes.cpp:407
+#: src/lincity/lintypes.cpp:374
 msgid "Burnt"
 msgstr "Verbrannt"
 
-#: src/lincity/lintypes.cpp:420
+#: src/lincity/lintypes.cpp:386
 msgid "Shanty town"
 msgstr "Barackensiedlung"
 
-#: src/lincity/lintypes.cpp:433
-#: src/lincity/modules/residence.cpp:292
-#: src/lincity-ng/MpsInterface.cpp:380
-#: src/lincity-ng/EconomyGraph.cpp:133
+#: src/lincity/lintypes.cpp:398 src/lincity/modules/residence.cpp:283
+#: src/lincity-ng/MpsInterface.cpp:383 src/lincity-ng/EconomyGraph.cpp:134
 msgid "Fire"
 msgstr "Feuer"
 
-#: src/lincity/lintypes.cpp:446
+#: src/lincity/lintypes.cpp:410
 msgid "Used"
 msgstr "Bebaut"
 
-#: src/lincity/lintypes.cpp:458
+#: src/lincity/lintypes.cpp:421
 msgid "Residential ML"
 msgstr "Wohngebiet ML"
 
-#: src/lincity/lintypes.cpp:470
+#: src/lincity/lintypes.cpp:432
 msgid "Residential HL"
 msgstr "Wohngebiet HL"
 
-#: src/lincity/lintypes.cpp:482
+#: src/lincity/lintypes.cpp:443
 msgid "Residential LH"
 msgstr "gro??er Friedhof"
 
-#: src/lincity/lintypes.cpp:494
+#: src/lincity/lintypes.cpp:454
 msgid "Residential MH"
 msgstr "Wohngebiet MH"
 
-#: src/lincity/lintypes.cpp:506
+#: src/lincity/lintypes.cpp:465
 msgid "Residential HH"
 msgstr "Wohngebiet HH"
 
-#: src/lincity/lintypes.cpp:477
+#: src/lincity/lintypes.cpp:476
 msgid "Water well"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:489
+#: src/lincity/lintypes.cpp:488
 msgid "Desert"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:501
+#: src/lincity/lintypes.cpp:500
 msgid "Tree"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:514
+#: src/lincity/lintypes.cpp:513
 msgid "Trees"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:527
+#: src/lincity/lintypes.cpp:526
 msgid "Forest"
 msgstr ""
 
-#: src/lincity/ldsvguts.cpp:128
+#: src/lincity/ldsvguts.cpp:137
 #, c-format
 msgid "Save file <%s> - "
 msgstr "Speichere Datei <%s> - "
 
-#: src/lincity/ldsvguts.cpp:129
+#: src/lincity/ldsvguts.cpp:138
 msgid "Can't open save file!"
 msgstr "Kann Speicherdatei nicht ??ffnen."
 
-#: src/lincity/ldsvguts.cpp:134
+#: src/lincity/ldsvguts.cpp:148
 msgid "Saving scene"
 msgstr "Speichere Szenario"
 
-#: src/lincity/ldsvguts.cpp:334
+#: src/lincity/ldsvguts.cpp:362
 #, c-format
 msgid "Can't open <%s> (gzipped)"
 msgstr "Kann <%s> (komprimiert) nicht ??ffnen."
 
-#: src/lincity/ldsvguts.cpp:352
+#: src/lincity/ldsvguts.cpp:395
 msgid "Loading scene"
 msgstr "Lade Szenario"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/fileutil.cpp:266 src/lincity/fileutil.cpp:310
+msgid "Error. Can't find LINCITY_HOME"
+msgstr "Kann LINCITY_HOME nicht finden."
+
+#: src/lincity/fileutil.cpp:512
+msgid "Error verifying package. Can't find colour.pal."
+msgstr "Fehler bei Paket??berpr??fung. Kann colour.pal nicht finden."
+
+#: src/lincity/fileutil.cpp:525 src/lincity/fileutil.cpp:533
+#, c-format
+msgid "Couldn't create the save directory '%s'\n"
+msgstr "Kann Speicherverzeichniss '%s' nicht anlegen\n"
+
+#: src/lincity/fileutil.cpp:550
+#, c-format
+msgid "Out of memory: malloc failure\n"
+msgstr "Kein Speicher mehr vorhanden: malloc fehlgeschlagen\n"
+
+#: src/lincity/simulate.cpp:97
+msgid ""
+"Upgrading from old game. You have 10 years to build water wells where "
+"needed. After, starvation will occur!  You should check starvation minimap, "
+"and read waterwell help page :-)"
+msgstr ""
+
+#: src/lincity/lclib.cpp:15
 msgid "Jan"
 msgstr "Jan"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Feb"
 msgstr "Feb"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Mar"
 msgstr "M??r"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Apr"
 msgstr "Apr"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "May"
 msgstr "Mai"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jun"
 msgstr "Jun"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jul"
 msgstr "Jul"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Aug"
 msgstr "Aug"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Sep"
 msgstr "Sep"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Oct"
 msgstr "Okt"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Nov"
 msgstr "Nov"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Dec"
 msgstr "Dez"
 
-#: src/lincity/modules/health_centre.cpp:66
+#: src/lincity/power.cpp:102
+msgid "You have too many power grids. Join some of them"
+msgstr "Sie haben zu viele Stromnetze. Verbinden sie welche."
+
+#: src/lincity/modules/health_centre.cpp:58
 msgid "Health Centre"
 msgstr "Krankenhaus"
 
-#: src/lincity/modules/health_centre.cpp:68
-#: src/lincity/modules/rocket_pad.cpp:245
-#: src/lincity/modules/recycle.cpp:181
-#: src/lincity/modules/mill.cpp:107
-#: src/lincity/modules/university.cpp:74
-#: src/lincity/modules/cricket.cpp:101
-#: src/lincity/modules/pottery.cpp:123
-#: src/lincity/modules/blacksmith.cpp:105
-#: src/lincity/modules/firestation.cpp:121
-#: src/lincity/modules/school.cpp:54
+#: src/lincity/modules/health_centre.cpp:60
+#: src/lincity/modules/rocket_pad.cpp:198 src/lincity/modules/recycle.cpp:148
+#: src/lincity/modules/mill.cpp:92 src/lincity/modules/university.cpp:65
+#: src/lincity/modules/cricket.cpp:93 src/lincity/modules/pottery.cpp:108
+#: src/lincity/modules/blacksmith.cpp:95 src/lincity/modules/school.cpp:48
+#: src/lincity/modules/firestation.cpp:110
 msgid "Inventory"
 msgstr "Lager"
 
-#: src/lincity/modules/health_centre.cpp:69
-#: src/lincity/modules/rocket_pad.cpp:246
-#: src/lincity/modules/market.cpp:1158
-#: src/lincity/modules/road.cpp:52
-#: src/lincity/modules/rail.cpp:55
-#: src/lincity/modules/coal_power.cpp:107
-#: src/lincity/modules/university.cpp:75
-#: src/lincity/modules/cricket.cpp:102
-#: src/lincity/modules/track.cpp:43
-#: src/lincity/modules/pottery.cpp:124
-#: src/lincity/modules/firestation.cpp:122
-#: src/lincity/modules/school.cpp:55
+#: src/lincity/modules/health_centre.cpp:61
+#: src/lincity/modules/rocket_pad.cpp:199 src/lincity/modules/market.cpp:984
+#: src/lincity/modules/road.cpp:47 src/lincity/modules/rail.cpp:51
+#: src/lincity/modules/coal_power.cpp:97 src/lincity/modules/university.cpp:66
+#: src/lincity/modules/cricket.cpp:94 src/lincity/modules/track.cpp:38
+#: src/lincity/modules/pottery.cpp:109 src/lincity/modules/school.cpp:49
+#: src/lincity/modules/firestation.cpp:111
 msgid "Jobs"
 msgstr "Arbeitspl??tze"
 
-#: src/lincity/modules/health_centre.cpp:71
-#: src/lincity/modules/rocket_pad.cpp:248
-#: src/lincity/modules/market.cpp:1162
-#: src/lincity/modules/port.cpp:357
-#: src/lincity/modules/road.cpp:56
-#: src/lincity/modules/rail.cpp:59
-#: src/lincity/modules/mill.cpp:108
-#: src/lincity/modules/university.cpp:77
-#: src/lincity/modules/cricket.cpp:104
-#: src/lincity/modules/track.cpp:47
-#: src/lincity/modules/pottery.cpp:126
-#: src/lincity/modules/blacksmith.cpp:106
-#: src/lincity/modules/firestation.cpp:124
-#: src/lincity/modules/school.cpp:57
-#: src/lincity-ng/MpsInterface.cpp:448
+#: src/lincity/modules/health_centre.cpp:62
+#: src/lincity/modules/rocket_pad.cpp:200 src/lincity/modules/market.cpp:986
+#: src/lincity/modules/port.cpp:298 src/lincity/modules/road.cpp:49
+#: src/lincity/modules/rail.cpp:53 src/lincity/modules/mill.cpp:93
+#: src/lincity/modules/university.cpp:67 src/lincity/modules/cricket.cpp:95
+#: src/lincity/modules/track.cpp:40 src/lincity/modules/pottery.cpp:110
+#: src/lincity/modules/blacksmith.cpp:96 src/lincity/modules/school.cpp:50
+#: src/lincity/modules/firestation.cpp:112 src/lincity-ng/MpsInterface.cpp:451
 msgid "Goods"
 msgstr "Waren"
 
-#: src/lincity/modules/rocket_pad.cpp:239
+#: src/lincity/modules/rocket_pad.cpp:192
 msgid "Rocket Pad"
 msgstr "Raketenbasis"
 
-#: src/lincity/modules/rocket_pad.cpp:242
+#: src/lincity/modules/rocket_pad.cpp:195
 msgid "Completion"
 msgstr "Fertiggestellt"
 
-#: src/lincity/modules/rocket_pad.cpp:250
-#: src/lincity/modules/market.cpp:1166
-#: src/lincity/modules/port.cpp:361
-#: src/lincity/modules/road.cpp:60
-#: src/lincity/modules/rail.cpp:63
-#: src/lincity/modules/light_industry.cpp:368
-#: src/lincity/modules/commune.cpp:156
-#: src/lincity/modules/track.cpp:51
+#: src/lincity/modules/rocket_pad.cpp:201 src/lincity/modules/market.cpp:988
+#: src/lincity/modules/port.cpp:302 src/lincity/modules/road.cpp:51
+#: src/lincity/modules/rail.cpp:55 src/lincity/modules/light_industry.cpp:288
+#: src/lincity/modules/commune.cpp:182 src/lincity/modules/track.cpp:42
 msgid "Steel"
 msgstr "Stahl"
 
-#: src/lincity/modules/windmill.cpp:79
-#: src/lincity/modules/recycle.cpp:178
-#: src/lincity/modules/coal_power.cpp:109
-#: src/lincity/modules/organic_farm.cpp:224
-#: src/lincity/modules/solar_power.cpp:57
+#: src/lincity/modules/windmill.cpp:76 src/lincity/modules/recycle.cpp:146
+#: src/lincity/modules/coal_power.cpp:98
+#: src/lincity/modules/organic_farm.cpp:230
+#: src/lincity/modules/solar_power.cpp:60
 msgid "Tech"
 msgstr "Tech"
 
-#: src/lincity/modules/windmill.cpp:84
+#: src/lincity/modules/windmill.cpp:80
 msgid "Local Status"
 msgstr "lokaler Status"
 
-#: src/lincity/modules/windmill.cpp:87
+#: src/lincity/modules/windmill.cpp:83
 msgid "Prod."
 msgstr "Produktion"
 
-#: src/lincity/modules/windmill.cpp:90
-#: src/lincity/modules/windmill.cpp:103
-#: src/lincity/modules/substation.cpp:113
+#: src/lincity/modules/windmill.cpp:86 src/lincity/modules/windmill.cpp:99
+#: src/lincity/modules/substation.cpp:110
 msgid "Demand"
 msgstr "Bedarf"
 
-#: src/lincity/modules/windmill.cpp:94
-#: src/lincity/modules/substation.cpp:104
+#: src/lincity/modules/windmill.cpp:90 src/lincity/modules/substation.cpp:101
 msgid "Grid Status"
 msgstr "Netz Status"
 
-#: src/lincity/modules/windmill.cpp:97
-#: src/lincity/modules/substation.cpp:107
+#: src/lincity/modules/windmill.cpp:93 src/lincity/modules/substation.cpp:104
 msgid "T. Cap."
 msgstr "ges. Kap."
 
-#: src/lincity/modules/windmill.cpp:100
-#: src/lincity/modules/substation.cpp:110
+#: src/lincity/modules/windmill.cpp:96 src/lincity/modules/substation.cpp:107
 msgid "A. Cap."
 msgstr "Verf. Kap."
 
-#: src/lincity/modules/windmill.cpp:106
-#: src/lincity/modules/coal_power.cpp:111
-#: src/lincity/modules/substation.cpp:116
-#: src/lincity/modules/power_line.cpp:53
-#: src/lincity/modules/solar_power.cpp:59
+#: src/lincity/modules/windmill.cpp:102 src/lincity/modules/coal_power.cpp:99
+#: src/lincity/modules/substation.cpp:113
+#: src/lincity/modules/power_line.cpp:49
+#: src/lincity/modules/solar_power.cpp:61
 msgid "Grid ID"
 msgstr "Netz ID"
 
-#: src/lincity/modules/water.cpp:22
-#: src/lincity/modules/commune.cpp:151
-#: src/lincity/modules/commune.cpp:153
-#: src/lincity/modules/commune.cpp:155
-#: src/lincity/modules/commune.cpp:157
-#: src/lincity-ng/MpsInterface.cpp:379
-#: src/lincity-ng/MpsInterface.cpp:382
-#: src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/waterwell.cpp:50
+#: src/lincity/modules/commune.cpp:177 src/lincity/modules/commune.cpp:179
+#: src/lincity/modules/commune.cpp:181 src/lincity/modules/commune.cpp:183
+#: src/lincity-ng/MpsInterface.cpp:382 src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity-ng/MpsInterface.cpp:388
 msgid "Yes"
 msgstr "Ja"
 
-#: src/lincity/modules/water.cpp:22
-#: src/lincity/modules/commune.cpp:151
-#: src/lincity/modules/commune.cpp:153
-#: src/lincity/modules/commune.cpp:155
-#: src/lincity/modules/commune.cpp:157
-#: src/lincity-ng/MpsInterface.cpp:379
-#: src/lincity-ng/MpsInterface.cpp:382
-#: src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/commune.cpp:177
+#: src/lincity/modules/commune.cpp:179 src/lincity/modules/commune.cpp:181
+#: src/lincity/modules/commune.cpp:183 src/lincity-ng/MpsInterface.cpp:382
+#: src/lincity-ng/MpsInterface.cpp:385 src/lincity-ng/MpsInterface.cpp:388
 msgid "No"
 msgstr "Nein"
 
-#: src/lincity/modules/water.cpp:23
+#: src/lincity/modules/water.cpp:21
 msgid "Navigable"
 msgstr "schiffbar"
 
-#: src/lincity/modules/recycle.cpp:169
+#: src/lincity/modules/recycle.cpp:137
 msgid "Recycling"
 msgstr "Wiederaufbereitung"
 
-#: src/lincity/modules/recycle.cpp:170
+#: src/lincity/modules/recycle.cpp:138
 msgid "Center"
 msgstr "Zentrum"
 
-#: src/lincity/modules/recycle.cpp:173
-#: src/lincity/modules/heavy_industry.cpp:351
-#: src/lincity/modules/mill.cpp:105
-#: src/lincity/modules/light_industry.cpp:370
-#: src/lincity/modules/university.cpp:79
-#: src/lincity/modules/pottery.cpp:121
-#: src/lincity/modules/blacksmith.cpp:103
-#: src/lincity/modules/school.cpp:60
+#: src/lincity/modules/recycle.cpp:141
+#: src/lincity/modules/heavy_industry.cpp:288 src/lincity/modules/mill.cpp:90
+#: src/lincity/modules/light_industry.cpp:289
+#: src/lincity/modules/university.cpp:68 src/lincity/modules/pottery.cpp:106
+#: src/lincity/modules/blacksmith.cpp:93 src/lincity/modules/school.cpp:52
 msgid "Capacity"
 msgstr "Kapazit??t"
 
-#: src/lincity/modules/recycle.cpp:175
-#: src/lincity/modules/residence.cpp:279
-#: src/lincity/modules/residence.cpp:282
-#: src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/residence.cpp:288
-#: src/lincity/modules/residence.cpp:291
-#: src/lincity/modules/residence.cpp:294
-#: src/lincity/modules/light_industry.cpp:359
-#: src/lincity/modules/organic_farm.cpp:217
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
+#: src/lincity/modules/light_industry.cpp:281
+#: src/lincity/modules/organic_farm.cpp:223
 msgid "YES"
 msgstr "Ja"
 
-#: src/lincity/modules/recycle.cpp:175
-#: src/lincity/modules/residence.cpp:279
-#: src/lincity/modules/residence.cpp:282
-#: src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/residence.cpp:288
-#: src/lincity/modules/residence.cpp:291
-#: src/lincity/modules/residence.cpp:294
-#: src/lincity/modules/heavy_industry.cpp:339
-#: src/lincity/modules/light_industry.cpp:359
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
+#: src/lincity/modules/heavy_industry.cpp:279
+#: src/lincity/modules/light_industry.cpp:281
 msgid "NO"
 msgstr "Nein"
 
-#: src/lincity/modules/recycle.cpp:176
-#: src/lincity/modules/residence.cpp:280
-#: src/lincity/modules/heavy_industry.cpp:342
-#: src/lincity/modules/light_industry.cpp:360
-#: src/lincity/modules/organic_farm.cpp:221
+#: src/lincity/modules/recycle.cpp:144 src/lincity/modules/residence.cpp:271
+#: src/lincity/modules/heavy_industry.cpp:282
+#: src/lincity/modules/light_industry.cpp:282
+#: src/lincity/modules/organic_farm.cpp:227
 msgid "Power"
 msgstr "Strom"
 
-#: src/lincity/modules/recycle.cpp:182
-#: src/lincity/modules/heavy_industry.cpp:347
-#: src/lincity/modules/market.cpp:1164
-#: src/lincity/modules/port.cpp:353
-#: src/lincity/modules/road.cpp:58
-#: src/lincity/modules/rail.cpp:61
-#: src/lincity/modules/light_industry.cpp:366
-#: src/lincity/modules/commune.cpp:154
-#: src/lincity/modules/track.cpp:49
-#: src/lincity/modules/pottery.cpp:128
+#: src/lincity/modules/recycle.cpp:149
+#: src/lincity/modules/heavy_industry.cpp:286
+#: src/lincity/modules/market.cpp:987 src/lincity/modules/port.cpp:294
+#: src/lincity/modules/road.cpp:50 src/lincity/modules/rail.cpp:54
+#: src/lincity/modules/light_industry.cpp:287
+#: src/lincity/modules/commune.cpp:180 src/lincity/modules/track.cpp:41
+#: src/lincity/modules/pottery.cpp:111
 msgid "Ore"
 msgstr "Erz"
 
-#: src/lincity/modules/recycle.cpp:184
-#: src/lincity/modules/market.cpp:1168
-#: src/lincity/modules/road.cpp:62
-#: src/lincity/modules/rail.cpp:65
-#: src/lincity/modules/commune.cpp:158
-#: src/lincity/modules/track.cpp:53
+#: src/lincity/modules/recycle.cpp:150 src/lincity/modules/market.cpp:989
+#: src/lincity/modules/road.cpp:52 src/lincity/modules/rail.cpp:56
+#: src/lincity/modules/commune.cpp:184 src/lincity/modules/track.cpp:43
 msgid "Waste"
 msgstr "M??ll"
 
-#: src/lincity/modules/coalmine.cpp:168
+#: src/lincity/modules/coalmine.cpp:132
 msgid "Coal Mine"
 msgstr "Kohlegrube"
 
-#: src/lincity/modules/coalmine.cpp:171
-#: src/lincity/modules/oremine.cpp:186
+#: src/lincity/modules/coalmine.cpp:135 src/lincity/modules/oremine.cpp:144
 msgid "Stock"
 msgstr "Lager"
 
-#: src/lincity/modules/coalmine.cpp:175
-#: src/lincity/modules/coalmine.cpp:177
-#: src/lincity/modules/oremine.cpp:190
+#: src/lincity/modules/coalmine.cpp:138 src/lincity/modules/coalmine.cpp:140
+#: src/lincity/modules/oremine.cpp:147
 msgid "Reserve"
 msgstr "Reserve"
 
-#: src/lincity/modules/coalmine.cpp:177
+#: src/lincity/modules/coalmine.cpp:140
 msgid "EMPTY"
 msgstr "LEER"
 
-#: src/lincity/modules/residence.cpp:273
+#: src/lincity/modules/residence.cpp:255
 msgid "Residence"
 msgstr "Wohngebiet"
 
-#: src/lincity/modules/residence.cpp:277
+#: src/lincity/modules/residence.cpp:259
 msgid "People"
 msgstr "Leute"
 
-#: src/lincity/modules/residence.cpp:283
+#: src/lincity/modules/residence.cpp:268
 msgid "Fed"
 msgstr "Nahrung"
 
-#: src/lincity/modules/residence.cpp:286
+#: src/lincity/modules/residence.cpp:274
 msgid "Employed"
 msgstr "Arbeit"
 
-#: src/lincity/modules/residence.cpp:299
-#: src/lincity-ng/MpsInterface.cpp:393
+#: src/lincity/modules/residence.cpp:276 src/lincity-ng/MpsInterface.cpp:396
 msgid "good"
 msgstr "gut"
 
-#: src/lincity/modules/residence.cpp:299
+#: src/lincity/modules/residence.cpp:276
 msgid "poor"
 msgstr "schlecht"
 
-#: src/lincity/modules/residence.cpp:300
+#: src/lincity/modules/residence.cpp:277
 msgid "Job"
 msgstr "Arbeitsplatz"
 
-#: src/lincity/modules/residence.cpp:289
+#: src/lincity/modules/residence.cpp:280
 msgid "Health Cvr"
 msgstr "??rztl. Vers."
 
-#: src/lincity/modules/residence.cpp:295
-#: src/lincity-ng/MpsInterface.cpp:386
-#: src/lincity-ng/MpsInterface.cpp:514
+#: src/lincity/modules/residence.cpp:286 src/lincity-ng/MpsInterface.cpp:389
+#: src/lincity-ng/MpsInterface.cpp:517
 msgid "Sport"
 msgstr "Sport"
 
-#: src/lincity/modules/residence.cpp:297
-#: src/lincity-ng/MpsInterface.cpp:388
+#: src/lincity/modules/residence.cpp:288 src/lincity/modules/waterwell.cpp:47
+#: src/lincity-ng/MpsInterface.cpp:391
 msgid "Pollution"
 msgstr "Verschmutzung"
 
-#: src/lincity/modules/monument.cpp:63
+#: src/lincity/modules/monument.cpp:57
 msgid "Wisdom Bestowed"
 msgstr "Gesammelte Weisheit"
 
-#: src/lincity/modules/monument.cpp:67
+#: src/lincity/modules/monument.cpp:61
 #, c-format
 msgid "% Complete"
 msgstr "% fertig"
 
-#: src/lincity/modules/heavy_industry.cpp:328
+#: src/lincity/modules/waterwell.cpp:44
+msgid "Water_well"
+msgstr ""
+
+#: src/lincity/modules/waterwell.cpp:51
+msgid "Drinkable"
+msgstr ""
+
+#: src/lincity/modules/heavy_industry.cpp:268
 msgid "Heavy"
 msgstr "Schwer"
 
-#: src/lincity/modules/heavy_industry.cpp:329
-#: src/lincity/modules/light_industry.cpp:355
+#: src/lincity/modules/heavy_industry.cpp:269
+#: src/lincity/modules/light_industry.cpp:277
 msgid "Industry"
 msgstr "Industrie"
 
-#: src/lincity/modules/heavy_industry.cpp:334
-#: src/lincity/modules/heavy_industry.cpp:349
-#: src/lincity/modules/market.cpp:1160
-#: src/lincity/modules/port.cpp:349
-#: src/lincity/modules/road.cpp:54
-#: src/lincity/modules/rail.cpp:57
-#: src/lincity/modules/coal_power.cpp:91
-#: src/lincity/modules/coal_power.cpp:105
-#: src/lincity/modules/mill.cpp:112
-#: src/lincity/modules/commune.cpp:152
-#: src/lincity/modules/track.cpp:45
-#: src/lincity/modules/pottery.cpp:130
-#: src/lincity/modules/blacksmith.cpp:108
-#: src/lincity-ng/MpsInterface.cpp:444
+#: src/lincity/modules/heavy_industry.cpp:274
+#: src/lincity/modules/heavy_industry.cpp:287
+#: src/lincity/modules/market.cpp:985 src/lincity/modules/port.cpp:290
+#: src/lincity/modules/road.cpp:48 src/lincity/modules/rail.cpp:52
+#: src/lincity/modules/coal_power.cpp:82 src/lincity/modules/coal_power.cpp:96
+#: src/lincity/modules/mill.cpp:95 src/lincity/modules/commune.cpp:178
+#: src/lincity/modules/track.cpp:39 src/lincity/modules/pottery.cpp:112
+#: src/lincity/modules/blacksmith.cpp:97 src/lincity-ng/MpsInterface.cpp:447
 msgid "Coal"
 msgstr "Kohle"
 
-#: src/lincity/modules/heavy_industry.cpp:336
+#: src/lincity/modules/heavy_industry.cpp:276
 msgid "Grid"
 msgstr "Netz"
 
-#: src/lincity/modules/heavy_industry.cpp:344
-#: src/lincity/modules/light_industry.cpp:362
+#: src/lincity/modules/heavy_industry.cpp:284
+#: src/lincity/modules/light_industry.cpp:284
 msgid "Output"
 msgstr "Produktion"
 
-#: src/lincity/modules/heavy_industry.cpp:345
-#: src/lincity/modules/light_industry.cpp:364
+#: src/lincity/modules/heavy_industry.cpp:285
+#: src/lincity/modules/light_industry.cpp:286
 msgid "Store"
 msgstr "Lager"
 
-#: src/lincity/modules/market.cpp:1156
-#: src/lincity/modules/port.cpp:345
-#: src/lincity/modules/road.cpp:50
-#: src/lincity/modules/rail.cpp:53
-#: src/lincity/modules/mill.cpp:110
-#: src/lincity/modules/track.cpp:41
+#: src/lincity/modules/market.cpp:983 src/lincity/modules/port.cpp:286
+#: src/lincity/modules/road.cpp:46 src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/mill.cpp:94 src/lincity/modules/track.cpp:37
 msgid "Food"
 msgstr "Nahrung"
 
-#: src/lincity/modules/port.cpp:365
-#: src/lincity-ng/MpsInterface.cpp:532
+#: src/lincity/modules/port.cpp:306 src/lincity-ng/MpsInterface.cpp:535
 msgid "Total"
 msgstr "Gesammt"
 
-#: src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/rail.cpp:47
 msgid "Rail"
 msgstr "Eisenbahn"
 
-#: src/lincity/modules/coal_power.cpp:92
-#: src/lincity/modules/solar_power.cpp:44
+#: src/lincity/modules/coal_power.cpp:83
+#: src/lincity/modules/solar_power.cpp:47
 msgid "Power Station"
 msgstr "Kraftwerk"
 
-#: src/lincity/modules/coal_power.cpp:96
-#: src/lincity/modules/solar_power.cpp:48
+#: src/lincity/modules/coal_power.cpp:87
+#: src/lincity/modules/solar_power.cpp:51
 msgid "Max Output"
 msgstr "Maximalleistung"
 
-#: src/lincity/modules/coal_power.cpp:101
-#: src/lincity/modules/solar_power.cpp:53
+#: src/lincity/modules/coal_power.cpp:92
+#: src/lincity/modules/solar_power.cpp:56
 msgid "Current Output"
 msgstr "aktuelle Leistung"
 
-#: src/lincity/modules/substation.cpp:100
+#: src/lincity/modules/substation.cpp:97
 msgid "Local Demand"
 msgstr "lokaler Bedarf"
 
-#: src/lincity/modules/mill.cpp:103
+#: src/lincity/modules/mill.cpp:88
 msgid "Textile Mill"
 msgstr "Spinnerei"
 
-#: src/lincity/modules/oremine.cpp:183
+#: src/lincity/modules/oremine.cpp:141
 msgid "Ore Mine"
 msgstr "Erzbergwerk"
 
-#: src/lincity/modules/power_line.cpp:50
+#: src/lincity/modules/power_line.cpp:46
 msgid "Power Line"
 msgstr "Stromleitung"
 
-#: src/lincity/modules/light_industry.cpp:354
+#: src/lincity/modules/light_industry.cpp:276
 msgid "Light"
 msgstr "Leicht"
 
-#: src/lincity/modules/university.cpp:69
+#: src/lincity/modules/university.cpp:61
 msgid "Tech Produced"
 msgstr "Tech erforscht"
 
-#: src/lincity/modules/tip.cpp:109
+#: src/lincity/modules/tip.cpp:100
 msgid "Landfill"
 msgstr "M??llkippe"
 
-#: src/lincity/modules/tip.cpp:112
+#: src/lincity/modules/tip.cpp:103
 msgid "Last Month"
 msgstr "Vormonat"
 
-#: src/lincity/modules/tip.cpp:113
+#: src/lincity/modules/tip.cpp:104
 msgid "Tons"
 msgstr "Tonnen"
 
-#: src/lincity/modules/tip.cpp:114
+#: src/lincity/modules/tip.cpp:105
 msgid "Percent"
 msgstr "Prozent"
 
-#: src/lincity/modules/tip.cpp:117
+#: src/lincity/modules/tip.cpp:107
 #, c-format
 msgid "% Filled"
 msgstr "% voll"
 
-#: src/lincity/modules/commune.cpp:149
+#: src/lincity/modules/commune.cpp:175
 msgid "Activity"
 msgstr "Aktivit??t"
 
-#: src/lincity/modules/school.cpp:51
+#: src/lincity/modules/school.cpp:45
 msgid "Lessons Learned"
 msgstr "Unterrichtsstunden"
 
-#: src/lincity/modules/firestation.cpp:119
+#: src/lincity/modules/firestation.cpp:108
 msgid "Fire Station"
 msgstr "Feuerwehr"
 
-#: src/lincity/modules/organic_farm.cpp:213
+#: src/lincity/modules/organic_farm.cpp:219
 msgid "Organic Farm"
 msgstr "Bauernhof"
 
-#: src/lincity/modules/organic_farm.cpp:219
+#: src/lincity/modules/organic_farm.cpp:225
 msgid "NO "
 msgstr "Nein"
 
-#: src/lincity/modules/organic_farm.cpp:228
+#: src/lincity/modules/organic_farm.cpp:233
 msgid "Prod"
 msgstr "Produktion"
 
-#: src/lincity/modules/organic_farm.cpp:238
+#: src/lincity/modules/organic_farm.cpp:239
 msgid "Debug info"
 msgstr ""
 
-#: src/lincity/modules/organic_farm.cpp:239
-msgid " max with power & water"
-msgstr ""
-
 #: src/lincity/modules/organic_farm.cpp:240
-msgid " number of tile with water"
+msgid "max with power&water"
 msgstr ""
 
 #: src/lincity/modules/organic_farm.cpp:241
-msgid " current production"
+msgid "N tiles with water"
 msgstr ""
 
-#: src/lincity/modules/solar_power.cpp:43
+#: src/lincity/modules/organic_farm.cpp:242
+#, fuzzy
+msgid "Current production"
+msgstr "aktuelle Leistung"
+
+#: src/lincity/modules/solar_power.cpp:46
 msgid "Solar"
 msgstr "Solar"
 
-#: src/lincity/modules/waterwell.cpp:44
-msgid "Water_well"
-msgstr ""
-
-#: src/lincity/modules/waterwell.cpp:51
-msgid "Drinkable"
-msgstr ""
-
 #: src/lincity-ng/Dialog.cpp:173
 msgid "Launchsite"
 msgstr "Raketenbasis"
 
-#: src/lincity-ng/Dialog.cpp:351
-#: src/lincity-ng/Dialog.cpp:352
+#: src/lincity-ng/Dialog.cpp:352 src/lincity-ng/Dialog.cpp:353
 msgid "----- IN TEST MODE -------"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:354
+#: src/lincity-ng/Dialog.cpp:355
 #, c-format
 msgid "Game statistics from LinCity-NG Version %s"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:358
+#: src/lincity-ng/Dialog.cpp:359
 #, c-format
 msgid "Initial loaded scene - %s"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:363
+#: src/lincity-ng/Dialog.cpp:364
 #, c-format
 msgid "Economy is sustainable"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:367
+#: src/lincity-ng/Dialog.cpp:368
 #, c-format
 msgid "Population  %d  of which  %d  are not housed."
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:372
+#: src/lincity-ng/Dialog.cpp:373
 #, c-format
 msgid "Max population %d  Number evacuated %d Total births %d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:377
+#: src/lincity-ng/Dialog.cpp:378
 #, c-format
 msgid "Date %s %04d  Money %8d   Tech-level %5.1f (%5.1f)"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:384
+#: src/lincity-ng/Dialog.cpp:385
 #, c-format
 msgid ".Deaths by starvation %7d   History %8.3f"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:389
+#: src/lincity-ng/Dialog.cpp:390
 #, c-format
 msgid "Deaths from pollution %7d   History %8.3f"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:393
+#: src/lincity-ng/Dialog.cpp:394
 #, c-format
 msgid "Years of unemployment %7d   History %8.3f"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:397
+#: src/lincity-ng/Dialog.cpp:398
 #, c-format
 msgid "Rockets launched %2d  Successful launches %2d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:408
+#: src/lincity-ng/Dialog.cpp:409
 #, c-format
 msgid ".   Residences %4d         Markets %4d            Farms %4d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:419
+#: src/lincity-ng/Dialog.cpp:420
 #, c-format
 msgid ".    Monuments %4d         Schools %4d     Universities %4d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:424
+#: src/lincity-ng/Dialog.cpp:425
 #, c-format
 msgid ".Fire stations %4d           Parks %4d    Sports fields %4d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:429
+#: src/lincity-ng/Dialog.cpp:430
 #, c-format
 msgid "Health centres %4d            Tips %4d         Shanties %4d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:437
+#: src/lincity-ng/Dialog.cpp:438
 #, c-format
 msgid ".    Windmills %4d     Coal powers %4d     Solar powers %4d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:443
+#: src/lincity-ng/Dialog.cpp:444
 #, c-format
 msgid ".  Substations %4d     Power lines %4d            Ports %4d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:448
+#: src/lincity-ng/Dialog.cpp:449
 #, c-format
 msgid ".       Tracks %4d           Roads %4d             Rail %4d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:456
+#: src/lincity-ng/Dialog.cpp:457
 #, c-format
 msgid ".    Potteries %4d     Blacksmiths %4d            Mills %4d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:461
+#: src/lincity-ng/Dialog.cpp:462
 #, c-format
 msgid ".   Light inds %4d      Heavy inds %4d        Recyclers %4d"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:466
+#: src/lincity-ng/Dialog.cpp:467
 #, c-format
 msgid ".   Coal mines %4d       Ore mines %4d         Communes %4d"
 msgstr ""
 
-#: src/lincity-ng/ScreenInterface.cpp:261
+#: src/lincity-ng/ScreenInterface.cpp:264
 msgid "MM"
 msgstr "Mio"
 
-#: src/lincity-ng/GameView.cpp:1574
-#: src/lincity-ng/GameView.cpp:1605
-#: src/lincity-ng/ScreenInterface.cpp:272
+#: src/lincity-ng/ScreenInterface.cpp:275 src/lincity-ng/GameView.cpp:1609
+#: src/lincity-ng/GameView.cpp:1640
 msgid "$"
 msgstr "???"
 
-#: src/lincity-ng/GameView.cpp:236
+#: src/lincity-ng/GameView.cpp:237
 msgid "Minimap: outline map"
 msgstr "Minikarte: ??bersichtskarte"
 
-#: src/lincity-ng/GameView.cpp:239
+#: src/lincity-ng/GameView.cpp:240
 msgid "Minimap: unemployment"
 msgstr "Minikarte: Arbeitslosigkeit"
 
-#: src/lincity-ng/GameView.cpp:242
+#: src/lincity-ng/GameView.cpp:243
 msgid "Minimap: pollution"
 msgstr "Minikarte: Umweltverschmutzung"
 
-#: src/lincity-ng/GameView.cpp:245
+#: src/lincity-ng/GameView.cpp:246
 msgid "Minimap: nourishments"
 msgstr "Minikarte: Nahrungsmittel"
 
-#: src/lincity-ng/GameView.cpp:248
+#: src/lincity-ng/GameView.cpp:249
 msgid "Minimap: power supply"
 msgstr "Minikarte: Stromversorgung"
 
-#: src/lincity-ng/GameView.cpp:251
+#: src/lincity-ng/GameView.cpp:252
 msgid "Minimap: firedepartment cover"
 msgstr "Minikarte: Feuerwehrabdeckung"
 
-#: src/lincity-ng/GameView.cpp:254
+#: src/lincity-ng/GameView.cpp:255
 msgid "Minimap: sport cover"
 msgstr "Minikarte: Sportabdeckung"
 
-#: src/lincity-ng/GameView.cpp:257
+#: src/lincity-ng/GameView.cpp:258
 msgid "Minimap: medical care"
 msgstr "Minikarte: medizinische Versorgung"
 
-#: src/lincity-ng/GameView.cpp:260
+#: src/lincity-ng/GameView.cpp:261
 msgid "Minimap: coal depots"
 msgstr "Minikarte: Kohlefl??ze"
 
-#: src/lincity-ng/GameView.cpp:263
+#: src/lincity-ng/GameView.cpp:264
 msgid "Minimap: traffic density"
 msgstr "Minikarte: Verkehrsdichte"
 
-#: src/lincity-ng/GameView.cpp:1569
+#: src/lincity-ng/GameView.cpp:1604
 msgid "Estimated Bulldoze Cost: "
 msgstr "Gesch??tze Abbruchkosten:"
 
-#: src/lincity-ng/GameView.cpp:1571
+#: src/lincity-ng/GameView.cpp:1606
 msgid "Bulldoze Cost: "
 msgstr "Abrisskosten:"
 
-#: src/lincity-ng/GameView.cpp:1576
+#: src/lincity-ng/GameView.cpp:1611
 msgid "n/a"
 msgstr "keine"
 
-#: src/lincity-ng/GameView.cpp:1594
+#: src/lincity-ng/GameView.cpp:1629
 msgid "Query Tool: Show information about selected building."
 msgstr "Abfragewerkzeug: Zeigt Informationen ??ber gew??hltes Geb??ude."
 
-#: src/lincity-ng/GameView.cpp:1598
+#: src/lincity-ng/GameView.cpp:1633
 msgid "Bulldozer: remove building -price varies-"
 msgstr "Planierraupe: Geb??ude abrei??en. Kosten variieren."
 
-#: src/lincity-ng/GameView.cpp:1605
+#: src/lincity-ng/GameView.cpp:1640
 msgid ": Cost to build "
 msgstr ": Baukosten "
 
-#: src/lincity-ng/GameView.cpp:1606
+#: src/lincity-ng/GameView.cpp:1641
 msgid ", to bulldoze "
 msgstr ", Abbruchkosten "
 
-#: src/lincity-ng/GameView.cpp:1606
-#: src/lincity-ng/GameView.cpp:1609
+#: src/lincity-ng/GameView.cpp:1641 src/lincity-ng/GameView.cpp:1644
 msgid "$."
 msgstr "???."
 
-#: src/lincity-ng/GameView.cpp:1608
+#: src/lincity-ng/GameView.cpp:1643
 msgid " To build "
 msgstr " Bauen von "
 
-#: src/lincity-ng/GameView.cpp:1608
+#: src/lincity-ng/GameView.cpp:1643
 msgid " of them "
 msgstr " davon "
 
-#: src/lincity-ng/GameView.cpp:1609
+#: src/lincity-ng/GameView.cpp:1644
 msgid "will cost about "
 msgstr "wird ungef??hr kosten "
 
-#: src/lincity-ng/MainMenu.cpp:193
+#: src/lincity-ng/MainMenu.cpp:199
 msgid "empty"
 msgstr "leer"
 
-#: src/lincity-ng/MpsInterface.cpp:224
+#: src/lincity-ng/MpsInterface.cpp:227
 msgid "build something here"
 msgstr "Hier k??nnen sie bauen."
 
-#: src/lincity-ng/MpsInterface.cpp:226
+#: src/lincity-ng/MpsInterface.cpp:229
 msgid "no further information available"
 msgstr "keine weitenen Infos"
 
-#: src/lincity-ng/MpsInterface.cpp:378
+#: src/lincity-ng/MpsInterface.cpp:381
 msgid "Coverage"
 msgstr "Abdeckung"
 
-#: src/lincity-ng/MpsInterface.cpp:383
+#: src/lincity-ng/MpsInterface.cpp:386
 msgid "Health"
 msgstr "Gesundheit"
 
-#: src/lincity-ng/MpsInterface.cpp:391
+#: src/lincity-ng/MpsInterface.cpp:394
 msgid "clear"
 msgstr "sauber"
 
-#: src/lincity-ng/MpsInterface.cpp:395
+#: src/lincity-ng/MpsInterface.cpp:398
 msgid "fair"
 msgstr "ordentlich"
 
-#: src/lincity-ng/MpsInterface.cpp:397
+#: src/lincity-ng/MpsInterface.cpp:400
 msgid "smelly"
 msgstr "stinkig"
 
-#: src/lincity-ng/MpsInterface.cpp:399
+#: src/lincity-ng/MpsInterface.cpp:402
 msgid "smokey"
 msgstr "rauchig"
 
-#: src/lincity-ng/MpsInterface.cpp:401
+#: src/lincity-ng/MpsInterface.cpp:404
 msgid "smoggy"
 msgstr "smog"
 
-#: src/lincity-ng/MpsInterface.cpp:403
+#: src/lincity-ng/MpsInterface.cpp:406
 msgid "bad"
 msgstr "schlecht"
 
-#: src/lincity-ng/MpsInterface.cpp:405
+#: src/lincity-ng/MpsInterface.cpp:408
 msgid "very bad"
 msgstr "sehr schlecht"
 
-#: src/lincity-ng/MpsInterface.cpp:407
+#: src/lincity-ng/MpsInterface.cpp:410
 msgid "death!"
 msgstr "t??tlich"
 
-#: src/lincity-ng/MpsInterface.cpp:412
+#: src/lincity-ng/MpsInterface.cpp:415
 msgid "Bulldoze Cost"
 msgstr "Abrisskosten"
 
-#: src/lincity-ng/MpsInterface.cpp:418
+#: src/lincity-ng/MpsInterface.cpp:421
 msgid "N/A"
 msgstr "keine"
 
-#: src/lincity-ng/MpsInterface.cpp:436
+#: src/lincity-ng/MpsInterface.cpp:439
 msgid "Tax Income"
 msgstr "Steuereinnahmen"
 
-#: src/lincity-ng/MpsInterface.cpp:440
+#: src/lincity-ng/MpsInterface.cpp:443
 msgid "Income"
 msgstr "Einnahmen"
 
-#: src/lincity-ng/MpsInterface.cpp:452
+#: src/lincity-ng/MpsInterface.cpp:455
 msgid "Export"
 msgstr "Export"
 
-#: src/lincity-ng/MpsInterface.cpp:456
+#: src/lincity-ng/MpsInterface.cpp:459
 msgid "Expenses"
 msgstr "Ausgaben"
 
-#: src/lincity-ng/MpsInterface.cpp:460
+#: src/lincity-ng/MpsInterface.cpp:463
 msgid "Unemp."
 msgstr "Arbeitsl."
 
-#: src/lincity-ng/MpsInterface.cpp:464
+#: src/lincity-ng/MpsInterface.cpp:467
 msgid "Transport"
 msgstr "Transport"
 
-#: src/lincity-ng/MpsInterface.cpp:468
+#: src/lincity-ng/MpsInterface.cpp:471
 msgid "Imports"
 msgstr "Import"
 
-#: src/lincity-ng/MpsInterface.cpp:472
+#: src/lincity-ng/MpsInterface.cpp:475
 msgid "Others"
 msgstr "Sonstige"
 
-#: src/lincity-ng/MpsInterface.cpp:477
+#: src/lincity-ng/MpsInterface.cpp:480
 msgid "Net"
 msgstr "Netto"
 
-#: src/lincity-ng/MpsInterface.cpp:489
+#: src/lincity-ng/MpsInterface.cpp:492
 msgid "Other Costs"
 msgstr "sonst. Kosten"
 
-#: src/lincity-ng/MpsInterface.cpp:494
+#: src/lincity-ng/MpsInterface.cpp:497
 msgid "For year"
 msgstr "F??r"
 
-#: src/lincity-ng/MpsInterface.cpp:498
+#: src/lincity-ng/MpsInterface.cpp:501
 msgid "Interest"
 msgstr "Zinsen"
 
-#: src/lincity-ng/MpsInterface.cpp:500
+#: src/lincity-ng/MpsInterface.cpp:503
 msgid "Schools"
 msgstr "Schulen"
 
-#: src/lincity-ng/MpsInterface.cpp:502
+#: src/lincity-ng/MpsInterface.cpp:505
 msgid "Univers."
 msgstr "Unis"
 
-#: src/lincity-ng/MpsInterface.cpp:504
+#: src/lincity-ng/MpsInterface.cpp:507
 msgid "Deaths"
 msgstr "Todesf??lle"
 
-#: src/lincity-ng/MpsInterface.cpp:508
+#: src/lincity-ng/MpsInterface.cpp:511
 msgid "Hospital"
 msgstr "Krankenh??user"
 
-#: src/lincity-ng/MpsInterface.cpp:510
+#: src/lincity-ng/MpsInterface.cpp:513
 msgid "Rockets"
 msgstr "Raketen"
 
-#: src/lincity-ng/MpsInterface.cpp:512
+#: src/lincity-ng/MpsInterface.cpp:515
 msgid "Fire Stn"
 msgstr "Feuerwehr"
 
-#: src/lincity-ng/MpsInterface.cpp:530
+#: src/lincity-ng/MpsInterface.cpp:533
 msgid "Population"
 msgstr "Bev??lkerung"
 
-#: src/lincity-ng/MpsInterface.cpp:533
+#: src/lincity-ng/MpsInterface.cpp:536
 msgid "Housed"
 msgstr "mit Wohnung"
 
-#: src/lincity-ng/MpsInterface.cpp:534
+#: src/lincity-ng/MpsInterface.cpp:537
 msgid "Homeless"
 msgstr "Obdachlos"
 
-#: src/lincity-ng/MpsInterface.cpp:535
+#: src/lincity-ng/MpsInterface.cpp:538
 msgid "Shanties"
 msgstr "Barackensiedlungen"
 
-#: src/lincity-ng/MpsInterface.cpp:536
+#: src/lincity-ng/MpsInterface.cpp:539
 msgid "Unn Dths"
 msgstr "Unn Tdsfl"
 
-#: src/lincity-ng/MpsInterface.cpp:537
+#: src/lincity-ng/MpsInterface.cpp:540
 msgid "Unemployment"
 msgstr "Arbeitslosigkeit"
 
-#: src/lincity-ng/MpsInterface.cpp:538
+#: src/lincity-ng/MpsInterface.cpp:541
 msgid "Claims"
 msgstr "Anspr??che"
 
-#: src/lincity-ng/MpsInterface.cpp:539
-#: src/lincity-ng/MpsInterface.cpp:544
+#: src/lincity-ng/MpsInterface.cpp:542 src/lincity-ng/MpsInterface.cpp:547
 msgid "Rate"
 msgstr "Rate"
 
-#: src/lincity-ng/MpsInterface.cpp:541
+#: src/lincity-ng/MpsInterface.cpp:544
 msgid "Starvation"
 msgstr "Verhungert"
 
-#: src/lincity-ng/MpsInterface.cpp:542
+#: src/lincity-ng/MpsInterface.cpp:545
 msgid "Cases"
 msgstr "F??lle"
 
-#: src/lincity-ng/ButtonPanel.cpp:198
+#: src/lincity-ng/ButtonPanel.cpp:200
 msgid "Query Tool"
 msgstr "Abfragewerkzeug"
 
-#: src/lincity-ng/ButtonPanel.cpp:199
+#: src/lincity-ng/ButtonPanel.cpp:201
 msgid "Bulldozer"
 msgstr "Bulldozer"
 
-#: src/lincity-ng/ButtonPanel.cpp:201
+#: src/lincity-ng/ButtonPanel.cpp:203
 msgid "Residential: 50 denizens, low birthrate, high deathrate"
 msgstr "Wohngebiet: 50 Bewohner, niedrige Geburts- hohe Sterberate."
 
-#: src/lincity-ng/ButtonPanel.cpp:202
+#: src/lincity-ng/ButtonPanel.cpp:204
 msgid "Residential: 100 denizens, high birthrate, low deathrate"
 msgstr "Wohngebiet: 100 Bewohner, hohe Geburts- niedrige Sterberate."
 
-#: src/lincity-ng/ButtonPanel.cpp:203
+#: src/lincity-ng/ButtonPanel.cpp:205
 msgid "Residential: 200 denizens, high birthrate, high deathrate"
 msgstr "Wohngebiet: 200 Bewohner, hohe Geburts- und Sterberate"
 
-#: src/lincity-ng/ButtonPanel.cpp:204
+#: src/lincity-ng/ButtonPanel.cpp:206
 msgid "Residential: 100 denizens, low birthrate, high deathrate"
 msgstr "Wohngebiet: 100 Bewohner, niedrige Geburts- hohe Sterberate."
 
-#: src/lincity-ng/ButtonPanel.cpp:205
+#: src/lincity-ng/ButtonPanel.cpp:207
 msgid "Residential: 200 denizens, high birthrate, low deathrate"
 msgstr "Wohngebiet: 200 Bewohner, hohe Geburts- niedrige Sterberate."
 
-#: src/lincity-ng/ButtonPanel.cpp:206
+#: src/lincity-ng/ButtonPanel.cpp:208
 msgid "Residential: 400 denizens, high birthrate, high deathrate"
 msgstr "Wohngebiet: 400 Bewohner, hohe Geburts- und Sterberate."
 
-#: src/lincity-ng/ButtonPanel.cpp:215
+#: src/lincity-ng/ButtonPanel.cpp:217
 msgid " [Click right for help.]"
 msgstr "[Rechtsklick f??r Hife.]"
 
-#: src/lincity-ng/ButtonPanel.cpp:243
-#: src/lincity-ng/ButtonPanel.cpp:277
+#: src/lincity-ng/ButtonPanel.cpp:245 src/lincity-ng/ButtonPanel.cpp:288
 #, c-format
 msgid "%s (Techlevel %.1f required.)"
 msgstr "%s (Techlevel %.1f erforderlich.)"
 
-#: src/lincity-ng/ButtonPanel.cpp:252
+#: src/lincity-ng/ButtonPanel.cpp:254
 #, c-format
 msgid "%s is disabled (loaded old game)."
 msgstr ""
 
-#: src/lincity-ng/EconomyGraph.cpp:123
+#: src/lincity-ng/EconomyGraph.cpp:124
 msgid "Mining"
 msgstr "Bergbau"
 
-#: src/lincity-ng/EconomyGraph.cpp:125
+#: src/lincity-ng/EconomyGraph.cpp:126
 msgid "Trade"
 msgstr "Handel"
 
-#: src/lincity-ng/EconomyGraph.cpp:127
+#: src/lincity-ng/EconomyGraph.cpp:128
 msgid "Money"
 msgstr "Geld"
 
-#: src/lincity-ng/EconomyGraph.cpp:129
+#: src/lincity-ng/EconomyGraph.cpp:130
 msgid "Popul."
 msgstr "Leute"
 
-#: src/lincity-ng/EconomyGraph.cpp:131
+#: src/lincity-ng/EconomyGraph.cpp:132
 msgid "Techn."
 msgstr "Tech"
 
-#: src/lincity-ng/EconomyGraph.cpp:136
+#: src/lincity-ng/EconomyGraph.cpp:137
 msgid "Economy Overview:"
 msgstr "Wirtschafts??bersicht"
 
-#: src/lincity-ng/EconomyGraph.cpp:139
+#: src/lincity-ng/EconomyGraph.cpp:140
 msgid "Sustainability:"
 msgstr "Nachhaltigkeit:"
 
-#: src/lincity-ng/EconomyGraph.cpp:142
+#: src/lincity-ng/EconomyGraph.cpp:143
 msgid "Frames per Second:"
 msgstr "Bilder pro Sekunde:"
 
-#: src/lincity-ng/EconomyGraph.cpp:218
+#: src/lincity-ng/EconomyGraph.cpp:219
 msgid "You lose."
 msgstr "Sie haben verloren."

Modified: trunk/data/locale/es.po
===================================================================
--- trunk/data/locale/es.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/es.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -8,10 +8,10 @@
 msgstr ""
 "Project-Id-Version: locale.es\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-01-27 22:03+0100\n"
+"POT-Creation-Date: 2007-12-04 00:29+0100\n"
 "PO-Revision-Date: 2005-10-23 22:20+0200\n"
-"Last-Translator: Jorge Gonz??lez Gonz??lez "
-"<jorge.gonzalez.gonzalez at hispalinux.es>\n"
+"Last-Translator: Jorge Gonz??lez Gonz??lez <jorge.gonzalez.gonzalez at hispalinux."
+"es>\n"
 "Language-Team: Espa??ol <traductores at es.gnome.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
@@ -19,498 +19,505 @@
 "X-Generator: KBabel 1.10.2\n"
 "Plural-Forms:  nplurals=2; plural=(n != 1);\n"
 
-#: src/lincity/fileutil.cpp:292 src/lincity/fileutil.cpp:341
-msgid "Error. Can't find LINCITY_HOME"
-msgstr "Error: no se puede localizar LINCITY_HOME"
-
-#: src/lincity/fileutil.cpp:561
-msgid "Error verifying package. Can't find colour.pal."
-msgstr ""
-"Error al verificar el paquete. No se puede encontrar la paleta de colores."
-
-#: src/lincity/fileutil.cpp:580 src/lincity/fileutil.cpp:589
-#, c-format
-msgid "Couldn't create the save directory '%s'\n"
-msgstr "No se puede crear el directorio ??%s?? para guardar las partidas\n"
-
-#: src/lincity/fileutil.cpp:635
-#, c-format
-msgid "Out of memory: malloc failure\n"
-msgstr "Sin memoria: error de ??malloc??\n"
-
-#: src/lincity/power.cpp:93
-msgid "You have too many power grids. Join some of them"
-msgstr ""
-
-#: src/lincity/engine.cpp:121
+#: src/lincity/engine.cpp:120
 msgid ""
 "ERROR: group does not exist. This should not happen! Please consider filling "
 "a bug report to lincity-ng team, with the saved game and what you did :-) "
 msgstr ""
 
-#: src/lincity/engine.cpp:147
+#: src/lincity/engine.cpp:152
 msgid "Port must be connected to river all along right side."
 msgstr ""
 
-#: src/lincity/engine.cpp:156 src/lincity/engine.cpp:165
+#: src/lincity/engine.cpp:161 src/lincity/engine.cpp:170
 msgid "Too many substations + windmills. You cannot build one more"
 msgstr ""
 
-#: src/lincity/engine.cpp:195
+#: src/lincity/engine.cpp:200
 msgid "Too many markets. You cannot build one more"
 msgstr ""
 
-#: src/lincity/engine.cpp:218
+#: src/lincity/engine.cpp:223
 msgid "You can't build a tip here: this area was once a landfill"
 msgstr ""
 
-#: src/lincity/engine.cpp:243
+#: src/lincity/engine.cpp:248
 msgid "You can't build a mine here: This area was once a landfill"
 msgstr ""
 
-#: src/lincity/engine.cpp:247
+#: src/lincity/engine.cpp:252
 msgid "You can't build a mine here: there is no ore left at this site"
 msgstr ""
 
-#: src/lincity/engine.cpp:259
+#: src/lincity/engine.cpp:264
 msgid "You can't build a water well here: it is all desert."
 msgstr ""
 
-#: src/lincity/engine.cpp:269
+#: src/lincity/engine.cpp:274
 msgid "You can't build a park here: it is a desert, parks need water"
 msgstr ""
 
-#: src/lincity/engine.cpp:691
+#: src/lincity/engine.cpp:485
 msgid "It's at a power line."
 msgstr "Est?? en una torre de tensi??n."
 
-#: src/lincity/engine.cpp:693
+#: src/lincity/engine.cpp:487
 msgid "It's at a solar power station."
 msgstr "Est?? en una central el??ctrica solar."
 
-#: src/lincity/engine.cpp:695
+#: src/lincity/engine.cpp:489
 msgid "It's at a substation."
 msgstr "Est?? en una subestaci??n."
 
-#: src/lincity/engine.cpp:697
+#: src/lincity/engine.cpp:491
 msgid "It's at a residential area."
 msgstr "Est?? en una zona residencial."
 
-#: src/lincity/engine.cpp:699
+#: src/lincity/engine.cpp:493
 msgid "It's at a farm."
 msgstr "Est?? en una granja."
 
-#: src/lincity/engine.cpp:701
+#: src/lincity/engine.cpp:495
 msgid "It's at a market."
 msgstr "Est?? en un comercio."
 
-#: src/lincity/engine.cpp:703
+#: src/lincity/engine.cpp:497
 msgid "It's at a track."
 msgstr "Est?? en un camino."
 
-#: src/lincity/engine.cpp:705
+#: src/lincity/engine.cpp:499
 msgid "It's at a coal mine."
 msgstr "Est?? en una mina de carb??n."
 
-#: src/lincity/engine.cpp:707
+#: src/lincity/engine.cpp:501
 msgid "It's at a railway."
 msgstr "Est?? en una v??a de tren."
 
-#: src/lincity/engine.cpp:709
+#: src/lincity/engine.cpp:503
 msgid "It's at a coal power station."
 msgstr "Est?? en una central t??rmica."
 
-#: src/lincity/engine.cpp:711
+#: src/lincity/engine.cpp:505
 msgid "It's at a road."
 msgstr "Est?? en una carretera."
 
-#: src/lincity/engine.cpp:713
+#: src/lincity/engine.cpp:507
 msgid "It's at light industry."
 msgstr "Est?? en una industria ligera."
 
-#: src/lincity/engine.cpp:715
+#: src/lincity/engine.cpp:509
 msgid "It's at a university."
 msgstr "Est?? en una universidad."
 
-#: src/lincity/engine.cpp:717
+#: src/lincity/engine.cpp:511
 msgid "It's at a commune."
 msgstr "Est?? en una comuna."
 
-#: src/lincity/engine.cpp:719
+#: src/lincity/engine.cpp:513
 msgid "It's at a tip."
 msgstr "Est?? en un vertedero."
 
-#: src/lincity/engine.cpp:721
+#: src/lincity/engine.cpp:515
 msgid "It's at a port."
 msgstr "Est?? en un puerto."
 
-#: src/lincity/engine.cpp:723
+#: src/lincity/engine.cpp:517
 msgid "It's at a steel works."
 msgstr "Est?? en una industria pesada"
 
-#: src/lincity/engine.cpp:725
+#: src/lincity/engine.cpp:519
 msgid "It's at a recycle centre."
 msgstr "Est?? en un centro de reciclaje."
 
-#: src/lincity/engine.cpp:727
+#: src/lincity/engine.cpp:521
 msgid "It's at a health centre."
 msgstr "Est?? en un hospital."
 
-#: src/lincity/engine.cpp:729
+#: src/lincity/engine.cpp:523
 msgid "It's at a rocket site."
 msgstr "Est?? en una plataforma de cohetes."
 
-#: src/lincity/engine.cpp:731
+#: src/lincity/engine.cpp:525
 msgid "It's at a windmill."
 msgstr "Est?? en un molino de viento."
 
-#: src/lincity/engine.cpp:733
+#: src/lincity/engine.cpp:527
 msgid "It's at a school."
 msgstr "Est?? en una escuela."
 
-#: src/lincity/engine.cpp:735
+#: src/lincity/engine.cpp:529
 msgid "It's at a blacksmith."
 msgstr "Est?? en una herrer??a."
 
-#: src/lincity/engine.cpp:737
+#: src/lincity/engine.cpp:531
 msgid "It's at a mill."
 msgstr "Est?? en una f??brica."
 
-#: src/lincity/engine.cpp:739
+#: src/lincity/engine.cpp:533
 msgid "It's at a pottery."
 msgstr "Est?? en una alfarer??a."
 
-#: src/lincity/engine.cpp:741
+#: src/lincity/engine.cpp:535
 msgid "It's at a fire station!!!."
 msgstr "??Est?? en un parque de bomberos!"
 
-#: src/lincity/engine.cpp:743
+#: src/lincity/engine.cpp:537
 msgid "It's at a sports field!!!."
 msgstr "Est?? en una cancha de deportes."
 
-#: src/lincity/engine.cpp:745
+#: src/lincity/engine.cpp:539
 msgid "It's at a shanty town."
 msgstr "Est?? en un barrio de chabolas."
 
-#: src/lincity/engine.cpp:747
+#: src/lincity/engine.cpp:541
 msgid "UNKNOWN!"
 msgstr "Desconocido"
 
-#: src/lincity/lintypes.cpp:22
+#: src/lincity/lintypes.cpp:20
 msgid "Empty"
 msgstr "Vac??o"
 
-#: src/lincity/lintypes.cpp:34
+#: src/lincity/lintypes.cpp:32
 msgid "Power line"
 msgstr "Torre de tensi??n"
 
-#: src/lincity/lintypes.cpp:46
+#: src/lincity/lintypes.cpp:43
 msgid "Solar PS"
 msgstr "Central el??ctrica solar"
 
-#: src/lincity/lintypes.cpp:58 src/lincity/modules/substation.cpp:91
+#: src/lincity/lintypes.cpp:54 src/lincity/modules/substation.cpp:93
 msgid "Substation"
 msgstr "Subestaci??n"
 
-#: src/lincity/lintypes.cpp:70
+#: src/lincity/lintypes.cpp:65
 msgid "Residential LL"
 msgstr "Residencial (baja capacidad, baja tecnolog??a)"
 
-#: src/lincity/lintypes.cpp:82
+#: src/lincity/lintypes.cpp:76
 msgid "Farm"
 msgstr "Granja"
 
-#: src/lincity/lintypes.cpp:94 src/lincity/modules/market.cpp:1143
-#: src/lincity-ng/Dialog.cpp:486
+#: src/lincity/lintypes.cpp:87 src/lincity/modules/market.cpp:979
+#: src/lincity-ng/Dialog.cpp:507
 msgid "Market"
 msgstr "Comercio"
 
-#: src/lincity/lintypes.cpp:106 src/lincity/modules/track.cpp:38
+#: src/lincity/lintypes.cpp:98 src/lincity/modules/track.cpp:34
 msgid "Track"
 msgstr "Camino"
 
-#: src/lincity/lintypes.cpp:118
+#: src/lincity/lintypes.cpp:109
 msgid "Coalmine"
 msgstr "Mina de carb??n"
 
-#: src/lincity/lintypes.cpp:130
+#: src/lincity/lintypes.cpp:120
 msgid "Railway"
 msgstr "V??a de tren"
 
-#: src/lincity/lintypes.cpp:142
+#: src/lincity/lintypes.cpp:131
 msgid "Coal PS"
 msgstr "Central t??rmica"
 
-#: src/lincity/lintypes.cpp:154 src/lincity/modules/road.cpp:47
+#: src/lincity/lintypes.cpp:142 src/lincity/modules/road.cpp:43
 msgid "Road"
 msgstr "Carretera"
 
-#: src/lincity/lintypes.cpp:166
+#: src/lincity/lintypes.cpp:153
 msgid "Lt. Industry"
 msgstr "Industria ligera"
 
-#: src/lincity/lintypes.cpp:178 src/lincity/modules/university.cpp:67
+#: src/lincity/lintypes.cpp:164 src/lincity/modules/university.cpp:59
 msgid "University"
 msgstr "Universidad"
 
-#: src/lincity/lintypes.cpp:190 src/lincity/modules/commune.cpp:146
+#: src/lincity/lintypes.cpp:175 src/lincity/modules/commune.cpp:172
 msgid "Commune"
 msgstr "Comuna"
 
-#: src/lincity/lintypes.cpp:202
+#: src/lincity/lintypes.cpp:186
 msgid "Ore mine"
 msgstr "Mina de mineral"
 
-#: src/lincity/lintypes.cpp:214
+#: src/lincity/lintypes.cpp:197
 msgid "Rubbish tip"
 msgstr "Vertedero"
 
-#: src/lincity/lintypes.cpp:226 src/lincity/modules/port.cpp:173
-#: src/lincity-ng/Dialog.cpp:540
+#: src/lincity/lintypes.cpp:208 src/lincity/modules/port.cpp:281
+#: src/lincity-ng/Dialog.cpp:561
 msgid "Port"
 msgstr "Puerto"
 
-#: src/lincity/lintypes.cpp:238
+#: src/lincity/lintypes.cpp:219
 msgid "Hv. Industry"
 msgstr "Industria pesada"
 
-#: src/lincity/lintypes.cpp:250
+#: src/lincity/lintypes.cpp:230
 msgid "Park"
 msgstr "Parque"
 
-#: src/lincity/lintypes.cpp:262 src/lincity-ng/MpsInterface.cpp:516
+#: src/lincity/lintypes.cpp:241 src/lincity-ng/MpsInterface.cpp:519
 msgid "Recycle"
 msgstr "Reciclaje"
 
-#: src/lincity/lintypes.cpp:274 src/lincity/modules/water.cpp:19
+#: src/lincity/lintypes.cpp:252 src/lincity/modules/water.cpp:17
+#: src/lincity/modules/residence.cpp:264
 msgid "Water"
 msgstr "Agua"
 
-#: src/lincity/lintypes.cpp:286
+#: src/lincity/lintypes.cpp:263
 msgid "Health centre"
 msgstr "Hospital"
 
-#: src/lincity/lintypes.cpp:298
+#: src/lincity/lintypes.cpp:274
 msgid "Rocket pad"
 msgstr "Plataforma de cohetes"
 
-#: src/lincity/lintypes.cpp:310 src/lincity/modules/windmill.cpp:73
-#: src/lincity-ng/MpsInterface.cpp:506
+#: src/lincity/lintypes.cpp:285 src/lincity/modules/windmill.cpp:75
+#: src/lincity-ng/MpsInterface.cpp:509
 msgid "Windmill"
 msgstr "Molino de viento"
 
-#: src/lincity/lintypes.cpp:322 src/lincity/modules/monument.cpp:57
+#: src/lincity/lintypes.cpp:296 src/lincity/modules/monument.cpp:51
 msgid "Monument"
 msgstr "Monumento"
 
-#: src/lincity/lintypes.cpp:334 src/lincity/modules/school.cpp:49
+#: src/lincity/lintypes.cpp:307 src/lincity/modules/school.cpp:43
 msgid "School"
 msgstr "Escuela"
 
-#: src/lincity/lintypes.cpp:346 src/lincity/modules/blacksmith.cpp:97
+#: src/lincity/lintypes.cpp:318 src/lincity/modules/blacksmith.cpp:90
 msgid "Blacksmith"
 msgstr "Herrer??a"
 
-#: src/lincity/lintypes.cpp:358
+#: src/lincity/lintypes.cpp:329
 msgid "Mill"
 msgstr "F??brica"
 
-#: src/lincity/lintypes.cpp:370 src/lincity/modules/pottery.cpp:119
+#: src/lincity/lintypes.cpp:340 src/lincity/modules/pottery.cpp:104
 msgid "Pottery"
 msgstr "Alfarer??a"
 
-#: src/lincity/lintypes.cpp:382
+#: src/lincity/lintypes.cpp:351
 msgid "Fire sta'n"
 msgstr "Parque de bomberos"
 
-#: src/lincity/lintypes.cpp:394 src/lincity/modules/cricket.cpp:99
+#: src/lincity/lintypes.cpp:362 src/lincity/modules/cricket.cpp:91
 msgid "Sports field"
 msgstr "Cancha de deportes"
 
-#: src/lincity/lintypes.cpp:407
+#: src/lincity/lintypes.cpp:374
 msgid "Burnt"
 msgstr "Quemado"
 
-#: src/lincity/lintypes.cpp:420
+#: src/lincity/lintypes.cpp:386
 msgid "Shanty town"
 msgstr "Barrio de chabolas"
 
-#: src/lincity/lintypes.cpp:433 src/lincity/modules/residence.cpp:292
-#: src/lincity-ng/MpsInterface.cpp:380 src/lincity-ng/EconomyGraph.cpp:131
+#: src/lincity/lintypes.cpp:398 src/lincity/modules/residence.cpp:283
+#: src/lincity-ng/MpsInterface.cpp:383 src/lincity-ng/EconomyGraph.cpp:134
 msgid "Fire"
 msgstr "Fuegos"
 
-#: src/lincity/lintypes.cpp:446
+#: src/lincity/lintypes.cpp:410
 msgid "Used"
 msgstr "Usado"
 
-#: src/lincity/lintypes.cpp:458
+#: src/lincity/lintypes.cpp:421
 msgid "Residential ML"
 msgstr "Residencial (media capacidad, baja tecnolog??a)"
 
-#: src/lincity/lintypes.cpp:470
+#: src/lincity/lintypes.cpp:432
 msgid "Residential HL"
 msgstr "Residencial (alta capacidad, baja tecnolog??a)"
 
-#: src/lincity/lintypes.cpp:482
+#: src/lincity/lintypes.cpp:443
 #, fuzzy
 msgid "Residential LH"
 msgstr "Residencial (baja capacidad, baja tecnolog??a)"
 
-#: src/lincity/lintypes.cpp:494
+#: src/lincity/lintypes.cpp:454
 #, fuzzy
 msgid "Residential MH"
 msgstr "Residencial (media capacidad, baja tecnolog??a)"
 
-#: src/lincity/lintypes.cpp:506
+#: src/lincity/lintypes.cpp:465
 #, fuzzy
 msgid "Residential HH"
 msgstr "Residencial (alta capacidad, baja tecnolog??a)"
 
-#: src/lincity/lintypes.cpp:477
+#: src/lincity/lintypes.cpp:476
 msgid "Water well"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:489
+#: src/lincity/lintypes.cpp:488
 msgid "Desert"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:501
+#: src/lincity/lintypes.cpp:500
 msgid "Tree"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:514
+#: src/lincity/lintypes.cpp:513
 msgid "Trees"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:527
+#: src/lincity/lintypes.cpp:526
 msgid "Forest"
 msgstr ""
 
-#: src/lincity/ldsvguts.cpp:128
+#: src/lincity/ldsvguts.cpp:137
 #, c-format
 msgid "Save file <%s> - "
 msgstr "Guardar archivo <%s> - "
 
-#: src/lincity/ldsvguts.cpp:129
+#: src/lincity/ldsvguts.cpp:138
 msgid "Can't open save file!"
 msgstr "No se puede abrir el archivo"
 
-#: src/lincity/ldsvguts.cpp:134
+#: src/lincity/ldsvguts.cpp:148
 msgid "Saving scene"
 msgstr "Guardando el escenario"
 
-#: src/lincity/ldsvguts.cpp:334
+#: src/lincity/ldsvguts.cpp:362
 #, c-format
 msgid "Can't open <%s> (gzipped)"
 msgstr "No se puede abrir <%s> (est?? comprimido en gzip)"
 
-#: src/lincity/ldsvguts.cpp:352
+#: src/lincity/ldsvguts.cpp:395
 msgid "Loading scene"
 msgstr "Cargando escenario"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/fileutil.cpp:266 src/lincity/fileutil.cpp:310
+msgid "Error. Can't find LINCITY_HOME"
+msgstr "Error: no se puede localizar LINCITY_HOME"
+
+#: src/lincity/fileutil.cpp:512
+msgid "Error verifying package. Can't find colour.pal."
+msgstr ""
+"Error al verificar el paquete. No se puede encontrar la paleta de colores."
+
+#: src/lincity/fileutil.cpp:525 src/lincity/fileutil.cpp:533
+#, c-format
+msgid "Couldn't create the save directory '%s'\n"
+msgstr "No se puede crear el directorio ??%s?? para guardar las partidas\n"
+
+#: src/lincity/fileutil.cpp:550
+#, c-format
+msgid "Out of memory: malloc failure\n"
+msgstr "Sin memoria: error de ??malloc??\n"
+
+#: src/lincity/simulate.cpp:97
+msgid ""
+"Upgrading from old game. You have 10 years to build water wells where "
+"needed. After, starvation will occur!  You should check starvation minimap, "
+"and read waterwell help page :-)"
+msgstr ""
+
+#: src/lincity/lclib.cpp:15
 msgid "Jan"
 msgstr "Ene"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Feb"
 msgstr "Feb"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Mar"
 msgstr "Mar"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Apr"
 msgstr "Abr"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "May"
 msgstr "May"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jun"
 msgstr "Jun"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jul"
 msgstr "Jul"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Aug"
 msgstr "Ago"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Sep"
 msgstr "Sep"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Oct"
 msgstr "Oct"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Nov"
 msgstr "Nov"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Dec"
 msgstr "Dic"
 
-#: src/lincity/modules/health_centre.cpp:66
+#: src/lincity/power.cpp:102
+msgid "You have too many power grids. Join some of them"
+msgstr ""
+
+#: src/lincity/modules/health_centre.cpp:58
 msgid "Health Centre"
 msgstr "Hospital"
 
-#: src/lincity/modules/health_centre.cpp:68
-#: src/lincity/modules/rocket_pad.cpp:169 src/lincity/modules/recycle.cpp:181
-#: src/lincity/modules/mill.cpp:107 src/lincity/modules/university.cpp:74
-#: src/lincity/modules/cricket.cpp:101 src/lincity/modules/pottery.cpp:123
-#: src/lincity/modules/blacksmith.cpp:102
-#: src/lincity/modules/firestation.cpp:121 src/lincity/modules/school.cpp:54
+#: src/lincity/modules/health_centre.cpp:60
+#: src/lincity/modules/rocket_pad.cpp:198 src/lincity/modules/recycle.cpp:148
+#: src/lincity/modules/mill.cpp:92 src/lincity/modules/university.cpp:65
+#: src/lincity/modules/cricket.cpp:93 src/lincity/modules/pottery.cpp:108
+#: src/lincity/modules/blacksmith.cpp:95 src/lincity/modules/school.cpp:48
+#: src/lincity/modules/firestation.cpp:110
 msgid "Inventory"
 msgstr "Inventario"
 
-#: src/lincity/modules/health_centre.cpp:69
-#: src/lincity/modules/rocket_pad.cpp:170 src/lincity/modules/market.cpp:1149
-#: src/lincity/modules/road.cpp:52 src/lincity/modules/rail.cpp:55
-#: src/lincity/modules/coal_power.cpp:105
-#: src/lincity/modules/university.cpp:75 src/lincity/modules/cricket.cpp:102
-#: src/lincity/modules/track.cpp:43 src/lincity/modules/pottery.cpp:124
-#: src/lincity/modules/firestation.cpp:122 src/lincity/modules/school.cpp:55
+#: src/lincity/modules/health_centre.cpp:61
+#: src/lincity/modules/rocket_pad.cpp:199 src/lincity/modules/market.cpp:984
+#: src/lincity/modules/road.cpp:47 src/lincity/modules/rail.cpp:51
+#: src/lincity/modules/coal_power.cpp:97 src/lincity/modules/university.cpp:66
+#: src/lincity/modules/cricket.cpp:94 src/lincity/modules/track.cpp:38
+#: src/lincity/modules/pottery.cpp:109 src/lincity/modules/school.cpp:49
+#: src/lincity/modules/firestation.cpp:111
 msgid "Jobs"
 msgstr "Empleos"
 
-#: src/lincity/modules/health_centre.cpp:71
-#: src/lincity/modules/rocket_pad.cpp:172 src/lincity/modules/market.cpp:1153
-#: src/lincity/modules/port.cpp:190 src/lincity/modules/road.cpp:56
-#: src/lincity/modules/rail.cpp:59 src/lincity/modules/mill.cpp:108
-#: src/lincity/modules/university.cpp:77 src/lincity/modules/cricket.cpp:104
-#: src/lincity/modules/track.cpp:47 src/lincity/modules/pottery.cpp:126
-#: src/lincity/modules/blacksmith.cpp:103
-#: src/lincity/modules/firestation.cpp:124 src/lincity/modules/school.cpp:57
-#: src/lincity-ng/MpsInterface.cpp:448
+#: src/lincity/modules/health_centre.cpp:62
+#: src/lincity/modules/rocket_pad.cpp:200 src/lincity/modules/market.cpp:986
+#: src/lincity/modules/port.cpp:298 src/lincity/modules/road.cpp:49
+#: src/lincity/modules/rail.cpp:53 src/lincity/modules/mill.cpp:93
+#: src/lincity/modules/university.cpp:67 src/lincity/modules/cricket.cpp:95
+#: src/lincity/modules/track.cpp:40 src/lincity/modules/pottery.cpp:110
+#: src/lincity/modules/blacksmith.cpp:96 src/lincity/modules/school.cpp:50
+#: src/lincity/modules/firestation.cpp:112 src/lincity-ng/MpsInterface.cpp:451
 msgid "Goods"
 msgstr "Mercanc??as"
 
-#: src/lincity/modules/rocket_pad.cpp:163
+#: src/lincity/modules/rocket_pad.cpp:192
 msgid "Rocket Pad"
 msgstr "Plataforma de cohetes"
 
-#: src/lincity/modules/rocket_pad.cpp:166
+#: src/lincity/modules/rocket_pad.cpp:195
 msgid "Completion"
 msgstr "Completado"
 
-#: src/lincity/modules/rocket_pad.cpp:174 src/lincity/modules/market.cpp:1157
-#: src/lincity/modules/port.cpp:194 src/lincity/modules/road.cpp:60
-#: src/lincity/modules/rail.cpp:63 src/lincity/modules/light_industry.cpp:368
-#: src/lincity/modules/commune.cpp:156 src/lincity/modules/track.cpp:51
+#: src/lincity/modules/rocket_pad.cpp:201 src/lincity/modules/market.cpp:988
+#: src/lincity/modules/port.cpp:302 src/lincity/modules/road.cpp:51
+#: src/lincity/modules/rail.cpp:55 src/lincity/modules/light_industry.cpp:288
+#: src/lincity/modules/commune.cpp:182 src/lincity/modules/track.cpp:42
 msgid "Steel"
 msgstr "Acero"
 
-#: src/lincity/modules/windmill.cpp:77 src/lincity/modules/windmill.cpp:88
-#: src/lincity/modules/recycle.cpp:178 src/lincity/modules/coal_power.cpp:107
-#: src/lincity/modules/organic_farm.cpp:196
-#: src/lincity/modules/solar_power.cpp:58
+#: src/lincity/modules/windmill.cpp:76 src/lincity/modules/recycle.cpp:146
+#: src/lincity/modules/coal_power.cpp:98
+#: src/lincity/modules/organic_farm.cpp:230
+#: src/lincity/modules/solar_power.cpp:60
 msgid "Tech"
 msgstr "Tecnolog??a"
 
@@ -522,806 +529,803 @@
 msgid "Prod."
 msgstr "Producci??n"
 
-#: src/lincity/modules/windmill.cpp:86 src/lincity/modules/windmill.cpp:101
-#: src/lincity/modules/substation.cpp:108
+#: src/lincity/modules/windmill.cpp:86 src/lincity/modules/windmill.cpp:99
+#: src/lincity/modules/substation.cpp:110
 msgid "Demand"
 msgstr "Demanda"
 
-#: src/lincity/modules/windmill.cpp:92 src/lincity/modules/substation.cpp:99
+#: src/lincity/modules/windmill.cpp:90 src/lincity/modules/substation.cpp:101
 msgid "Grid Status"
 msgstr "Estado de la l??nea"
 
-#: src/lincity/modules/windmill.cpp:95 src/lincity/modules/substation.cpp:102
+#: src/lincity/modules/windmill.cpp:93 src/lincity/modules/substation.cpp:104
 msgid "T. Cap."
 msgstr "Capacidad total"
 
-#: src/lincity/modules/windmill.cpp:98 src/lincity/modules/substation.cpp:105
+#: src/lincity/modules/windmill.cpp:96 src/lincity/modules/substation.cpp:107
 msgid "A. Cap."
 msgstr "Capacidad disponible"
 
-#: src/lincity/modules/windmill.cpp:104 src/lincity/modules/coal_power.cpp:109
-#: src/lincity/modules/substation.cpp:111
-#: src/lincity/modules/power_line.cpp:53
-#: src/lincity/modules/solar_power.cpp:60
+#: src/lincity/modules/windmill.cpp:102 src/lincity/modules/coal_power.cpp:99
+#: src/lincity/modules/substation.cpp:113
+#: src/lincity/modules/power_line.cpp:49
+#: src/lincity/modules/solar_power.cpp:61
 msgid "Grid ID"
 msgstr "ID de la l??nea"
 
-#: src/lincity/modules/water.cpp:22 src/lincity/modules/commune.cpp:151
-#: src/lincity/modules/commune.cpp:153 src/lincity/modules/commune.cpp:155
-#: src/lincity/modules/commune.cpp:157 src/lincity-ng/MpsInterface.cpp:379
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/waterwell.cpp:50
+#: src/lincity/modules/commune.cpp:177 src/lincity/modules/commune.cpp:179
+#: src/lincity/modules/commune.cpp:181 src/lincity/modules/commune.cpp:183
 #: src/lincity-ng/MpsInterface.cpp:382 src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity-ng/MpsInterface.cpp:388
 msgid "Yes"
 msgstr "S??"
 
-#: src/lincity/modules/water.cpp:22 src/lincity/modules/commune.cpp:151
-#: src/lincity/modules/commune.cpp:153 src/lincity/modules/commune.cpp:155
-#: src/lincity/modules/commune.cpp:157 src/lincity-ng/MpsInterface.cpp:379
-#: src/lincity-ng/MpsInterface.cpp:382 src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/commune.cpp:177
+#: src/lincity/modules/commune.cpp:179 src/lincity/modules/commune.cpp:181
+#: src/lincity/modules/commune.cpp:183 src/lincity-ng/MpsInterface.cpp:382
+#: src/lincity-ng/MpsInterface.cpp:385 src/lincity-ng/MpsInterface.cpp:388
 msgid "No"
 msgstr "No"
 
-#: src/lincity/modules/water.cpp:23
+#: src/lincity/modules/water.cpp:21
 msgid "Navigable"
 msgstr "Navegable"
 
-#: src/lincity/modules/recycle.cpp:169
+#: src/lincity/modules/recycle.cpp:137
 msgid "Recycling"
 msgstr "Centro de "
 
-#: src/lincity/modules/recycle.cpp:170
+#: src/lincity/modules/recycle.cpp:138
 msgid "Center"
 msgstr "reciclaje"
 
-#: src/lincity/modules/recycle.cpp:173
-#: src/lincity/modules/heavy_industry.cpp:346 src/lincity/modules/mill.cpp:105
-#: src/lincity/modules/light_industry.cpp:370
-#: src/lincity/modules/university.cpp:79 src/lincity/modules/pottery.cpp:121
-#: src/lincity/modules/blacksmith.cpp:100 src/lincity/modules/school.cpp:60
+#: src/lincity/modules/recycle.cpp:141
+#: src/lincity/modules/heavy_industry.cpp:288 src/lincity/modules/mill.cpp:90
+#: src/lincity/modules/light_industry.cpp:289
+#: src/lincity/modules/university.cpp:68 src/lincity/modules/pottery.cpp:106
+#: src/lincity/modules/blacksmith.cpp:93 src/lincity/modules/school.cpp:52
 msgid "Capacity"
 msgstr "Capacidad"
 
-#: src/lincity/modules/recycle.cpp:175 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
 #: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/residence.cpp:288 src/lincity/modules/residence.cpp:291
-#: src/lincity/modules/residence.cpp:294
-#: src/lincity/modules/light_industry.cpp:359
-#: src/lincity/modules/organic_farm.cpp:188
+#: src/lincity/modules/light_industry.cpp:281
+#: src/lincity/modules/organic_farm.cpp:223
 msgid "YES"
 msgstr "S??"
 
-#: src/lincity/modules/recycle.cpp:175 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
 #: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/residence.cpp:288 src/lincity/modules/residence.cpp:291
-#: src/lincity/modules/residence.cpp:294
-#: src/lincity/modules/heavy_industry.cpp:334
-#: src/lincity/modules/light_industry.cpp:359
+#: src/lincity/modules/heavy_industry.cpp:279
+#: src/lincity/modules/light_industry.cpp:281
 msgid "NO"
 msgstr "No"
 
-#: src/lincity/modules/recycle.cpp:176 src/lincity/modules/residence.cpp:280
-#: src/lincity/modules/heavy_industry.cpp:337
-#: src/lincity/modules/light_industry.cpp:360
-#: src/lincity/modules/organic_farm.cpp:193
+#: src/lincity/modules/recycle.cpp:144 src/lincity/modules/residence.cpp:271
+#: src/lincity/modules/heavy_industry.cpp:282
+#: src/lincity/modules/light_industry.cpp:282
+#: src/lincity/modules/organic_farm.cpp:227
 msgid "Power"
 msgstr "Electricidad"
 
-#: src/lincity/modules/recycle.cpp:182
-#: src/lincity/modules/heavy_industry.cpp:342
-#: src/lincity/modules/market.cpp:1155 src/lincity/modules/port.cpp:186
-#: src/lincity/modules/road.cpp:58 src/lincity/modules/rail.cpp:61
-#: src/lincity/modules/light_industry.cpp:366
-#: src/lincity/modules/commune.cpp:154 src/lincity/modules/track.cpp:49
-#: src/lincity/modules/pottery.cpp:128
+#: src/lincity/modules/recycle.cpp:149
+#: src/lincity/modules/heavy_industry.cpp:286
+#: src/lincity/modules/market.cpp:987 src/lincity/modules/port.cpp:294
+#: src/lincity/modules/road.cpp:50 src/lincity/modules/rail.cpp:54
+#: src/lincity/modules/light_industry.cpp:287
+#: src/lincity/modules/commune.cpp:180 src/lincity/modules/track.cpp:41
+#: src/lincity/modules/pottery.cpp:111
 msgid "Ore"
 msgstr "Mineral"
 
-#: src/lincity/modules/recycle.cpp:184 src/lincity/modules/market.cpp:1159
-#: src/lincity/modules/road.cpp:62 src/lincity/modules/rail.cpp:65
-#: src/lincity/modules/commune.cpp:158 src/lincity/modules/track.cpp:53
+#: src/lincity/modules/recycle.cpp:150 src/lincity/modules/market.cpp:989
+#: src/lincity/modules/road.cpp:52 src/lincity/modules/rail.cpp:56
+#: src/lincity/modules/commune.cpp:184 src/lincity/modules/track.cpp:43
 msgid "Waste"
 msgstr "Residuos"
 
-#: src/lincity/modules/coalmine.cpp:168
+#: src/lincity/modules/coalmine.cpp:132
 msgid "Coal Mine"
 msgstr "Mina de carb??n"
 
-#: src/lincity/modules/coalmine.cpp:171 src/lincity/modules/oremine.cpp:187
+#: src/lincity/modules/coalmine.cpp:135 src/lincity/modules/oremine.cpp:144
 msgid "Stock"
 msgstr "Disponible"
 
-#: src/lincity/modules/coalmine.cpp:175 src/lincity/modules/coalmine.cpp:177
-#: src/lincity/modules/oremine.cpp:191
+#: src/lincity/modules/coalmine.cpp:138 src/lincity/modules/coalmine.cpp:140
+#: src/lincity/modules/oremine.cpp:147
 msgid "Reserve"
 msgstr "Reservas"
 
-#: src/lincity/modules/coalmine.cpp:177
+#: src/lincity/modules/coalmine.cpp:140
 msgid "EMPTY"
 msgstr "VAC??O"
 
-#: src/lincity/modules/residence.cpp:273
+#: src/lincity/modules/residence.cpp:255
 msgid "Residence"
 msgstr "Residencia"
 
-#: src/lincity/modules/residence.cpp:277
+#: src/lincity/modules/residence.cpp:259
 msgid "People"
 msgstr "Habitantes"
 
-#: src/lincity/modules/residence.cpp:283
+#: src/lincity/modules/residence.cpp:268
 msgid "Fed"
 msgstr "Alimento"
 
-#: src/lincity/modules/residence.cpp:286
+#: src/lincity/modules/residence.cpp:274
 msgid "Employed"
 msgstr "Con trabajo"
 
-#: src/lincity/modules/residence.cpp:299 src/lincity-ng/MpsInterface.cpp:393
+#: src/lincity/modules/residence.cpp:276 src/lincity-ng/MpsInterface.cpp:396
 msgid "good"
 msgstr "bien"
 
-#: src/lincity/modules/residence.cpp:299
+#: src/lincity/modules/residence.cpp:276
 msgid "poor"
 msgstr "pobre"
 
-#: src/lincity/modules/residence.cpp:300
+#: src/lincity/modules/residence.cpp:277
 msgid "Job"
 msgstr "Empleo"
 
-#: src/lincity/modules/residence.cpp:289
+#: src/lincity/modules/residence.cpp:280
 msgid "Health Cvr"
 msgstr "Cobertura sanitaria"
 
-#: src/lincity/modules/residence.cpp:295 src/lincity-ng/MpsInterface.cpp:386
-#: src/lincity-ng/MpsInterface.cpp:514
+#: src/lincity/modules/residence.cpp:286 src/lincity-ng/MpsInterface.cpp:389
+#: src/lincity-ng/MpsInterface.cpp:517
 msgid "Sport"
 msgstr "Deportes"
 
-#: src/lincity/modules/residence.cpp:297 src/lincity-ng/MpsInterface.cpp:388
+#: src/lincity/modules/residence.cpp:288 src/lincity/modules/waterwell.cpp:47
+#: src/lincity-ng/MpsInterface.cpp:391
 msgid "Pollution"
 msgstr "Poluci??n"
 
-#: src/lincity/modules/monument.cpp:63
+#: src/lincity/modules/monument.cpp:57
 msgid "Wisdom Bestowed"
 msgstr "Dispensador de sabidur??a"
 
-#: src/lincity/modules/monument.cpp:67
+#: src/lincity/modules/monument.cpp:61
 #, c-format
 msgid "% Complete"
 msgstr "% completado"
 
-#: src/lincity/modules/heavy_industry.cpp:323
+#: src/lincity/modules/waterwell.cpp:44
+msgid "Water_well"
+msgstr ""
+
+#: src/lincity/modules/waterwell.cpp:51
+msgid "Drinkable"
+msgstr ""
+
+#: src/lincity/modules/heavy_industry.cpp:268
 msgid "Heavy"
 msgstr "Industria pesada"
 
-#: src/lincity/modules/heavy_industry.cpp:324
-#: src/lincity/modules/light_industry.cpp:355
+#: src/lincity/modules/heavy_industry.cpp:269
+#: src/lincity/modules/light_industry.cpp:277
 msgid "Industry"
 msgstr " "
 
-#: src/lincity/modules/heavy_industry.cpp:329
-#: src/lincity/modules/heavy_industry.cpp:344
-#: src/lincity/modules/market.cpp:1151 src/lincity/modules/port.cpp:182
-#: src/lincity/modules/road.cpp:54 src/lincity/modules/rail.cpp:57
-#: src/lincity/modules/coal_power.cpp:89
-#: src/lincity/modules/coal_power.cpp:103 src/lincity/modules/mill.cpp:112
-#: src/lincity/modules/commune.cpp:152 src/lincity/modules/track.cpp:45
-#: src/lincity/modules/pottery.cpp:130 src/lincity/modules/blacksmith.cpp:105
-#: src/lincity-ng/MpsInterface.cpp:444
+#: src/lincity/modules/heavy_industry.cpp:274
+#: src/lincity/modules/heavy_industry.cpp:287
+#: src/lincity/modules/market.cpp:985 src/lincity/modules/port.cpp:290
+#: src/lincity/modules/road.cpp:48 src/lincity/modules/rail.cpp:52
+#: src/lincity/modules/coal_power.cpp:82 src/lincity/modules/coal_power.cpp:96
+#: src/lincity/modules/mill.cpp:95 src/lincity/modules/commune.cpp:178
+#: src/lincity/modules/track.cpp:39 src/lincity/modules/pottery.cpp:112
+#: src/lincity/modules/blacksmith.cpp:97 src/lincity-ng/MpsInterface.cpp:447
 msgid "Coal"
 msgstr "Carb??n"
 
-#: src/lincity/modules/heavy_industry.cpp:331
+#: src/lincity/modules/heavy_industry.cpp:276
 msgid "Grid"
 msgstr "L??nea"
 
-#: src/lincity/modules/heavy_industry.cpp:339
-#: src/lincity/modules/light_industry.cpp:362
+#: src/lincity/modules/heavy_industry.cpp:284
+#: src/lincity/modules/light_industry.cpp:284
 msgid "Output"
 msgstr "Producci??n"
 
-#: src/lincity/modules/heavy_industry.cpp:340
-#: src/lincity/modules/light_industry.cpp:364
+#: src/lincity/modules/heavy_industry.cpp:285
+#: src/lincity/modules/light_industry.cpp:286
 msgid "Store"
 msgstr "Almacenado"
 
-#: src/lincity/modules/market.cpp:1147 src/lincity/modules/port.cpp:178
-#: src/lincity/modules/road.cpp:50 src/lincity/modules/rail.cpp:53
-#: src/lincity/modules/mill.cpp:110 src/lincity/modules/track.cpp:41
+#: src/lincity/modules/market.cpp:983 src/lincity/modules/port.cpp:286
+#: src/lincity/modules/road.cpp:46 src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/mill.cpp:94 src/lincity/modules/track.cpp:37
 msgid "Food"
 msgstr "Alimentos"
 
-#: src/lincity/modules/port.cpp:198 src/lincity-ng/MpsInterface.cpp:532
+#: src/lincity/modules/port.cpp:306 src/lincity-ng/MpsInterface.cpp:535
 msgid "Total"
 msgstr "Total"
 
-#: src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/rail.cpp:47
 msgid "Rail"
 msgstr "V??a"
 
-#: src/lincity/modules/coal_power.cpp:90
-#: src/lincity/modules/solar_power.cpp:45
+#: src/lincity/modules/coal_power.cpp:83
+#: src/lincity/modules/solar_power.cpp:47
 msgid "Power Station"
 msgstr "Central el??ctrica"
 
-#: src/lincity/modules/coal_power.cpp:94
-#: src/lincity/modules/solar_power.cpp:49
+#: src/lincity/modules/coal_power.cpp:87
+#: src/lincity/modules/solar_power.cpp:51
 msgid "Max Output"
 msgstr "Producci??n m??xima"
 
-#: src/lincity/modules/coal_power.cpp:99
-#: src/lincity/modules/solar_power.cpp:54
+#: src/lincity/modules/coal_power.cpp:92
+#: src/lincity/modules/solar_power.cpp:56
 msgid "Current Output"
 msgstr "Producci??n actual"
 
-#: src/lincity/modules/substation.cpp:95
+#: src/lincity/modules/substation.cpp:97
 msgid "Local Demand"
 msgstr "Demanda local"
 
-#: src/lincity/modules/mill.cpp:103
+#: src/lincity/modules/mill.cpp:88
 msgid "Textile Mill"
 msgstr "F??brica textil"
 
-#: src/lincity/modules/oremine.cpp:184
+#: src/lincity/modules/oremine.cpp:141
 msgid "Ore Mine"
 msgstr "Mina de mineral"
 
-#: src/lincity/modules/power_line.cpp:50
+#: src/lincity/modules/power_line.cpp:46
 msgid "Power Line"
 msgstr "Torre de tensi??n"
 
-#: src/lincity/modules/light_industry.cpp:354
+#: src/lincity/modules/light_industry.cpp:276
 msgid "Light"
 msgstr "Industria ligera"
 
-#: src/lincity/modules/university.cpp:69
+#: src/lincity/modules/university.cpp:61
 msgid "Tech Produced"
 msgstr "Tecnolog??a producida"
 
-#: src/lincity/modules/tip.cpp:109
+#: src/lincity/modules/tip.cpp:100
 msgid "Landfill"
 msgstr "Vertedero"
 
-#: src/lincity/modules/tip.cpp:112
+#: src/lincity/modules/tip.cpp:103
 msgid "Last Month"
 msgstr "??ltimo mes"
 
-#: src/lincity/modules/tip.cpp:113
+#: src/lincity/modules/tip.cpp:104
 msgid "Tons"
 msgstr "Toneladas"
 
-#: src/lincity/modules/tip.cpp:114
+#: src/lincity/modules/tip.cpp:105
 msgid "Percent"
 msgstr "Porcentaje"
 
-#: src/lincity/modules/tip.cpp:117
+#: src/lincity/modules/tip.cpp:107
 #, c-format
 msgid "% Filled"
 msgstr "% lleno"
 
-#: src/lincity/modules/commune.cpp:149
+#: src/lincity/modules/commune.cpp:175
 msgid "Activity"
 msgstr "Actividad"
 
-#: src/lincity/modules/school.cpp:51
+#: src/lincity/modules/school.cpp:45
 msgid "Lessons Learned"
 msgstr "Lecciones aprendidas"
 
-#: src/lincity/modules/firestation.cpp:119
+#: src/lincity/modules/firestation.cpp:108
 msgid "Fire Station"
 msgstr "Parque de bomberos"
 
-#: src/lincity/modules/organic_farm.cpp:183
+#: src/lincity/modules/organic_farm.cpp:219
 msgid "Organic Farm"
 msgstr "Granja org??nica"
 
-#: src/lincity/modules/organic_farm.cpp:190
+#: src/lincity/modules/organic_farm.cpp:225
 msgid "NO "
 msgstr "NO "
 
-#: src/lincity/modules/organic_farm.cpp:200
+#: src/lincity/modules/organic_farm.cpp:233
 msgid "Prod"
 msgstr "Producci??n"
 
-#: src/lincity/modules/organic_farm.cpp:238
+#: src/lincity/modules/organic_farm.cpp:239
 msgid "Debug info"
 msgstr ""
 
-#: src/lincity/modules/organic_farm.cpp:239
-msgid " max with power & water"
-msgstr ""
-
 #: src/lincity/modules/organic_farm.cpp:240
-msgid " number of tile with water"
+msgid "max with power&water"
 msgstr ""
 
 #: src/lincity/modules/organic_farm.cpp:241
-msgid " current production"
+msgid "N tiles with water"
 msgstr ""
 
-#: src/lincity/modules/solar_power.cpp:44
+#: src/lincity/modules/organic_farm.cpp:242
+#, fuzzy
+msgid "Current production"
+msgstr "Producci??n actual"
+
+#: src/lincity/modules/solar_power.cpp:46
 msgid "Solar"
 msgstr "Solar"
 
-#: src/lincity/modules/waterwell.cpp:44
-msgid "Water_well"
-msgstr ""
-
-#: src/lincity/modules/waterwell.cpp:51
-msgid "Drinkable"
-msgstr ""
-
 #: src/lincity-ng/Dialog.cpp:173
 msgid "Launchsite"
 msgstr "Zona de lanzamiento"
 
-#: src/lincity-ng/Dialog.cpp:341 src/lincity-ng/Dialog.cpp:342
+#: src/lincity-ng/Dialog.cpp:352 src/lincity-ng/Dialog.cpp:353
 msgid "----- IN TEST MODE -------"
 msgstr "----- MODO DE PRUEBA -------"
 
-#: src/lincity-ng/Dialog.cpp:344
+#: src/lincity-ng/Dialog.cpp:355
 #, c-format
 msgid "Game statistics from LinCity-NG Version %s"
 msgstr "Estad??sticas de juego para la versi??n %s de LinCity-NG"
 
-#: src/lincity-ng/Dialog.cpp:348
+#: src/lincity-ng/Dialog.cpp:359
 #, c-format
 msgid "Initial loaded scene - %s"
 msgstr "Escenario inicial cargado - %s"
 
-#: src/lincity-ng/Dialog.cpp:353
+#: src/lincity-ng/Dialog.cpp:364
 #, c-format
 msgid "Economy is sustainable"
 msgstr "La econom??a es sostenible"
 
-#: src/lincity-ng/Dialog.cpp:357
+#: src/lincity-ng/Dialog.cpp:368
 #, c-format
 msgid "Population  %d  of which  %d  are not housed."
 msgstr "Poblaci??n  %d de los cuales %d no viven en casas."
 
-#: src/lincity-ng/Dialog.cpp:362
+#: src/lincity-ng/Dialog.cpp:373
 #, c-format
 msgid "Max population %d  Number evacuated %d Total births %d"
 msgstr "Poblaci??n m??xima %d  N??mero de evacuados %d Nacimientos totales %d"
 
-#: src/lincity-ng/Dialog.cpp:367
+#: src/lincity-ng/Dialog.cpp:378
 #, c-format
 msgid "Date %s %04d  Money %8d   Tech-level %5.1f (%5.1f)"
 msgstr "Fecha %s %04d  Dinero  %8d   Nivel tecnol??gico %5.1f (%5.1f)"
 
-#: src/lincity-ng/Dialog.cpp:374
+#: src/lincity-ng/Dialog.cpp:385
 #, c-format
 msgid ".Deaths by starvation %7d   History %8.3f"
 msgstr "Muertes por hambruna %7d   Hist??rico %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:379
+#: src/lincity-ng/Dialog.cpp:390
 #, c-format
 msgid "Deaths from pollution %7d   History %8.3f"
 msgstr "Muertes por poluci??n %7d   Hist??rico %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:383
+#: src/lincity-ng/Dialog.cpp:394
 #, c-format
 msgid "Years of unemployment %7d   History %8.3f"
 msgstr "A??os de paro         %7d   Hist??rico %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:387
+#: src/lincity-ng/Dialog.cpp:398
 #, c-format
 msgid "Rockets launched %2d  Successful launches %2d"
 msgstr "Cohetes lanzados %2d  Lanzamientos exitosos %2d"
 
-#: src/lincity-ng/Dialog.cpp:397
+#: src/lincity-ng/Dialog.cpp:409
 #, c-format
 msgid ".   Residences %4d         Markets %4d            Farms %4d"
 msgstr ""
 "        Residencias %4d             Comercios %4d                 Granjas %4d"
 
-#: src/lincity-ng/Dialog.cpp:418
+#: src/lincity-ng/Dialog.cpp:420
 #, c-format
 msgid ".    Monuments %4d         Schools %4d     Universities %4d"
 msgstr ""
 "         Monumentos %4d              Escuelas %4d           Universidades %4d"
 
-#: src/lincity-ng/Dialog.cpp:423
+#: src/lincity-ng/Dialog.cpp:425
 #, c-format
 msgid ".Fire stations %4d           Parks %4d    Sports fields %4d"
 msgstr ""
 "Parques de bomberos %4d               Parques %4d      Canchas de deporte %4d"
 
-#: src/lincity-ng/Dialog.cpp:449
+#: src/lincity-ng/Dialog.cpp:430
 #, c-format
 msgid "Health centres %4d            Tips %4d         Shanties %4d"
 msgstr ""
 "         Hospitales %4d            Vertederos %4d                Chabolas %4d"
 
-#: src/lincity-ng/Dialog.cpp:433
+#: src/lincity-ng/Dialog.cpp:438
 #, c-format
 msgid ".    Windmills %4d     Coal powers %4d     Solar powers %4d"
 msgstr ""
-"  Molinos de viento %4d    Centrales t??rmicas %4d       Centrales solares "
-"%4d"
+"  Molinos de viento %4d    Centrales t??rmicas %4d       Centrales solares %4d"
 
-#: src/lincity-ng/Dialog.cpp:439
+#: src/lincity-ng/Dialog.cpp:444
 #, c-format
 msgid ".  Substations %4d     Power lines %4d            Ports %4d"
 msgstr ""
-"      Subestaciones %4d     Torres de tensi??n %4d                 Puertos "
-"%4d"
+"      Subestaciones %4d     Torres de tensi??n %4d                 Puertos %4d"
 
-#: src/lincity-ng/Dialog.cpp:408
+#: src/lincity-ng/Dialog.cpp:449
 #, c-format
 msgid ".       Tracks %4d           Roads %4d             Rail %4d"
 msgstr ""
-"            Caminos %4d            Carreteras %4d            V??as de tren "
-"%4d"
+"            Caminos %4d            Carreteras %4d            V??as de tren %4d"
 
-#: src/lincity-ng/Dialog.cpp:413
+#: src/lincity-ng/Dialog.cpp:457
 #, c-format
 msgid ".    Potteries %4d     Blacksmiths %4d            Mills %4d"
 msgstr ""
-"         Alfarer??as %4d             Herrer??as %4d                F??bricas "
-"%4d"
+"         Alfarer??as %4d             Herrer??as %4d                F??bricas %4d"
 
-#: src/lincity-ng/Dialog.cpp:444
+#: src/lincity-ng/Dialog.cpp:462
 #, c-format
 msgid ".   Light inds %4d      Heavy inds %4d        Recyclers %4d"
 msgstr ""
 " Industrias ligeras %4d    Industrias pesadas %4d    Centros de reciclaje %4d"
 
-#: src/lincity-ng/Dialog.cpp:428
+#: src/lincity-ng/Dialog.cpp:467
 #, c-format
 msgid ".   Coal mines %4d       Ore mines %4d         Communes %4d"
 msgstr ""
-"    Minas de carb??n %4d      Minas de mineral %4d                 Comunas "
-"%4d"
+"    Minas de carb??n %4d      Minas de mineral %4d                 Comunas %4d"
 
-#: src/lincity-ng/ScreenInterface.cpp:258
+#: src/lincity-ng/ScreenInterface.cpp:264
 msgid "MM"
 msgstr ""
 
-#: src/lincity-ng/GameView.cpp:1520 src/lincity-ng/GameView.cpp:1551
-#: src/lincity-ng/ScreenInterface.cpp:269
+#: src/lincity-ng/ScreenInterface.cpp:275 src/lincity-ng/GameView.cpp:1609
+#: src/lincity-ng/GameView.cpp:1640
 msgid "$"
 msgstr "???"
 
-#: src/lincity-ng/GameView.cpp:236
+#: src/lincity-ng/GameView.cpp:237
 msgid "Minimap: outline map"
 msgstr "Minimapa: perfil del mapa"
 
-#: src/lincity-ng/GameView.cpp:239
+#: src/lincity-ng/GameView.cpp:240
 msgid "Minimap: unemployment"
 msgstr "Minimapa: paro"
 
-#: src/lincity-ng/GameView.cpp:242
+#: src/lincity-ng/GameView.cpp:243
 msgid "Minimap: pollution"
 msgstr "Minimapa: poluci??n"
 
-#: src/lincity-ng/GameView.cpp:245
+#: src/lincity-ng/GameView.cpp:246
 msgid "Minimap: nourishments"
 msgstr "Minimapa: alimentaci??n"
 
-#: src/lincity-ng/GameView.cpp:248
+#: src/lincity-ng/GameView.cpp:249
 msgid "Minimap: power supply"
 msgstr "Minimapa: cobertura el??ctrica"
 
-#: src/lincity-ng/GameView.cpp:251
+#: src/lincity-ng/GameView.cpp:252
 msgid "Minimap: firedepartment cover"
 msgstr "Minimapa: cobertura de los bomberos"
 
-#: src/lincity-ng/GameView.cpp:254
+#: src/lincity-ng/GameView.cpp:255
 msgid "Minimap: sport cover"
 msgstr "Minimapa: cobertura de las canchas de deporte"
 
-#: src/lincity-ng/GameView.cpp:257
+#: src/lincity-ng/GameView.cpp:258
 msgid "Minimap: medical care"
 msgstr "Minimapa: cobertura sanitaria"
 
-#: src/lincity-ng/GameView.cpp:260
+#: src/lincity-ng/GameView.cpp:261
 msgid "Minimap: coal depots"
 msgstr "Minimapa: dep??sitos de carb??n"
 
-#: src/lincity-ng/GameView.cpp:263
+#: src/lincity-ng/GameView.cpp:264
 msgid "Minimap: traffic density"
 msgstr "Minimapa: densidad del tr??fico"
 
-#: src/lincity-ng/GameView.cpp:1515
+#: src/lincity-ng/GameView.cpp:1604
 msgid "Estimated Bulldoze Cost: "
 msgstr "Coste estimado del derribo: "
 
-#: src/lincity-ng/GameView.cpp:1517
+#: src/lincity-ng/GameView.cpp:1606
 msgid "Bulldoze Cost: "
 msgstr "Coste del derribo: "
 
-#: src/lincity-ng/GameView.cpp:1522
+#: src/lincity-ng/GameView.cpp:1611
 msgid "n/a"
 msgstr "n/a"
 
-#: src/lincity-ng/GameView.cpp:1540
+#: src/lincity-ng/GameView.cpp:1629
 msgid "Query Tool: Show information about selected building."
 msgstr ""
 "Herramienta de consulta: mostrar informaci??n sobre el edificio seleccionado."
 
-#: src/lincity-ng/GameView.cpp:1544
+#: src/lincity-ng/GameView.cpp:1633
 msgid "Bulldozer: remove building -price varies-"
 msgstr "Derribo: eliminar el edificio -precio variable-"
 
-#: src/lincity-ng/GameView.cpp:1551
+#: src/lincity-ng/GameView.cpp:1640
 msgid ": Cost to build "
 msgstr ": coste de la construcci??n "
 
-#: src/lincity-ng/GameView.cpp:1552
+#: src/lincity-ng/GameView.cpp:1641
 msgid ", to bulldoze "
 msgstr ", para derribar "
 
-#: src/lincity-ng/GameView.cpp:1552 src/lincity-ng/GameView.cpp:1555
+#: src/lincity-ng/GameView.cpp:1641 src/lincity-ng/GameView.cpp:1644
 msgid "$."
 msgstr "???."
 
-#: src/lincity-ng/GameView.cpp:1554
+#: src/lincity-ng/GameView.cpp:1643
 msgid " To build "
 msgstr " para construir "
 
-#: src/lincity-ng/GameView.cpp:1554
+#: src/lincity-ng/GameView.cpp:1643
 msgid " of them "
 msgstr " de ellos "
 
-#: src/lincity-ng/GameView.cpp:1555
+#: src/lincity-ng/GameView.cpp:1644
 msgid "will cost about "
 msgstr "costar?? sobre "
 
-#: src/lincity-ng/MainMenu.cpp:175
+#: src/lincity-ng/MainMenu.cpp:199
 msgid "empty"
 msgstr "vac??o"
 
-#: src/lincity-ng/MpsInterface.cpp:224
+#: src/lincity-ng/MpsInterface.cpp:227
 msgid "build something here"
 msgstr "construye algo aqu??"
 
-#: src/lincity-ng/MpsInterface.cpp:226
+#: src/lincity-ng/MpsInterface.cpp:229
 msgid "no further information available"
 msgstr "no hay m??s informaci??n disponible"
 
-#: src/lincity-ng/MpsInterface.cpp:378
+#: src/lincity-ng/MpsInterface.cpp:381
 msgid "Coverage"
 msgstr "Cobertura"
 
-#: src/lincity-ng/MpsInterface.cpp:383
+#: src/lincity-ng/MpsInterface.cpp:386
 msgid "Health"
 msgstr "Sanitaria"
 
-#: src/lincity-ng/MpsInterface.cpp:391
+#: src/lincity-ng/MpsInterface.cpp:394
 msgid "clear"
 msgstr "limpio"
 
-#: src/lincity-ng/MpsInterface.cpp:395
+#: src/lincity-ng/MpsInterface.cpp:398
 msgid "fair"
 msgstr "regular"
 
-#: src/lincity-ng/MpsInterface.cpp:397
+#: src/lincity-ng/MpsInterface.cpp:400
 msgid "smelly"
 msgstr "apestoso"
 
-#: src/lincity-ng/MpsInterface.cpp:399
+#: src/lincity-ng/MpsInterface.cpp:402
 msgid "smokey"
 msgstr "nubes de humos"
 
-#: src/lincity-ng/MpsInterface.cpp:401
+#: src/lincity-ng/MpsInterface.cpp:404
 msgid "smoggy"
 msgstr "nubes t??xicas"
 
-#: src/lincity-ng/MpsInterface.cpp:403
+#: src/lincity-ng/MpsInterface.cpp:406
 msgid "bad"
 msgstr "mala"
 
-#: src/lincity-ng/MpsInterface.cpp:405
+#: src/lincity-ng/MpsInterface.cpp:408
 msgid "very bad"
 msgstr "muy mala"
 
-#: src/lincity-ng/MpsInterface.cpp:407
+#: src/lincity-ng/MpsInterface.cpp:410
 msgid "death!"
 msgstr "??la muerte!"
 
-#: src/lincity-ng/MpsInterface.cpp:412
+#: src/lincity-ng/MpsInterface.cpp:415
 msgid "Bulldoze Cost"
 msgstr "Coste del derribo"
 
-#: src/lincity-ng/MpsInterface.cpp:418
+#: src/lincity-ng/MpsInterface.cpp:421
 msgid "N/A"
 msgstr "N/A"
 
-#: src/lincity-ng/MpsInterface.cpp:436
+#: src/lincity-ng/MpsInterface.cpp:439
 msgid "Tax Income"
 msgstr "Ingresos por impuestos"
 
-#: src/lincity-ng/MpsInterface.cpp:440
+#: src/lincity-ng/MpsInterface.cpp:443
 msgid "Income"
 msgstr "Ingresos"
 
-#: src/lincity-ng/MpsInterface.cpp:452
+#: src/lincity-ng/MpsInterface.cpp:455
 msgid "Export"
 msgstr "Exportaciones"
 
-#: src/lincity-ng/MpsInterface.cpp:456
+#: src/lincity-ng/MpsInterface.cpp:459
 msgid "Expenses"
 msgstr "Gastos"
 
-#: src/lincity-ng/MpsInterface.cpp:460
+#: src/lincity-ng/MpsInterface.cpp:463
 msgid "Unemp."
 msgstr "Paro"
 
-#: src/lincity-ng/MpsInterface.cpp:464
+#: src/lincity-ng/MpsInterface.cpp:467
 msgid "Transport"
 msgstr "Transportes"
 
-#: src/lincity-ng/MpsInterface.cpp:468
+#: src/lincity-ng/MpsInterface.cpp:471
 msgid "Imports"
 msgstr "Importaciones"
 
-#: src/lincity-ng/MpsInterface.cpp:472
+#: src/lincity-ng/MpsInterface.cpp:475
 msgid "Others"
 msgstr "Otros"
 
-#: src/lincity-ng/MpsInterface.cpp:477
+#: src/lincity-ng/MpsInterface.cpp:480
 msgid "Net"
 msgstr "Neto"
 
-#: src/lincity-ng/MpsInterface.cpp:489
+#: src/lincity-ng/MpsInterface.cpp:492
 msgid "Other Costs"
 msgstr "Otros gastos"
 
-#: src/lincity-ng/MpsInterface.cpp:494
+#: src/lincity-ng/MpsInterface.cpp:497
 msgid "For year"
 msgstr "Al a??o"
 
-#: src/lincity-ng/MpsInterface.cpp:498
+#: src/lincity-ng/MpsInterface.cpp:501
 msgid "Interest"
 msgstr "Intereses"
 
-#: src/lincity-ng/MpsInterface.cpp:500
+#: src/lincity-ng/MpsInterface.cpp:503
 msgid "Schools"
 msgstr "Escuelas"
 
-#: src/lincity-ng/MpsInterface.cpp:502
+#: src/lincity-ng/MpsInterface.cpp:505
 msgid "Univers."
 msgstr "Universidades"
 
-#: src/lincity-ng/MpsInterface.cpp:504
+#: src/lincity-ng/MpsInterface.cpp:507
 msgid "Deaths"
 msgstr "Muertes"
 
-#: src/lincity-ng/MpsInterface.cpp:508
+#: src/lincity-ng/MpsInterface.cpp:511
 msgid "Hospital"
 msgstr "Hospitales"
 
-#: src/lincity-ng/MpsInterface.cpp:510
+#: src/lincity-ng/MpsInterface.cpp:513
 msgid "Rockets"
 msgstr "Cohetes"
 
-#: src/lincity-ng/MpsInterface.cpp:512
+#: src/lincity-ng/MpsInterface.cpp:515
 msgid "Fire Stn"
 msgstr "Parques de bomberos"
 
-#: src/lincity-ng/MpsInterface.cpp:530
+#: src/lincity-ng/MpsInterface.cpp:533
 msgid "Population"
 msgstr "Poblaci??n"
 
-#: src/lincity-ng/MpsInterface.cpp:533
+#: src/lincity-ng/MpsInterface.cpp:536
 msgid "Housed"
 msgstr "Alojados"
 
-#: src/lincity-ng/MpsInterface.cpp:534
+#: src/lincity-ng/MpsInterface.cpp:537
 msgid "Homeless"
 msgstr "Sin techo"
 
-#: src/lincity-ng/MpsInterface.cpp:535
+#: src/lincity-ng/MpsInterface.cpp:538
 msgid "Shanties"
 msgstr "Chabolas"
 
-#: src/lincity-ng/MpsInterface.cpp:536
+#: src/lincity-ng/MpsInterface.cpp:539
 msgid "Unn Dths"
 msgstr "Muertes s??bitas"
 
-#: src/lincity-ng/MpsInterface.cpp:537
+#: src/lincity-ng/MpsInterface.cpp:540
 msgid "Unemployment"
 msgstr "Paro"
 
-#: src/lincity-ng/MpsInterface.cpp:538
+#: src/lincity-ng/MpsInterface.cpp:541
 msgid "Claims"
 msgstr "Reivindicaciones"
 
-#: src/lincity-ng/MpsInterface.cpp:539 src/lincity-ng/MpsInterface.cpp:544
+#: src/lincity-ng/MpsInterface.cpp:542 src/lincity-ng/MpsInterface.cpp:547
 msgid "Rate"
 msgstr "Ratio"
 
-#: src/lincity-ng/MpsInterface.cpp:541
+#: src/lincity-ng/MpsInterface.cpp:544
 msgid "Starvation"
 msgstr "Hambruna"
 
-#: src/lincity-ng/MpsInterface.cpp:542
+#: src/lincity-ng/MpsInterface.cpp:545
 msgid "Cases"
 msgstr "Casos"
 
-#: src/lincity-ng/ButtonPanel.cpp:198
+#: src/lincity-ng/ButtonPanel.cpp:200
 msgid "Query Tool"
 msgstr "Herramienta de consulta"
 
-#: src/lincity-ng/ButtonPanel.cpp:199
+#: src/lincity-ng/ButtonPanel.cpp:201
 msgid "Bulldozer"
 msgstr "M??quina excavadora"
 
-#: src/lincity-ng/ButtonPanel.cpp:201
+#: src/lincity-ng/ButtonPanel.cpp:203
 msgid "Residential: 50 denizens, low birthrate, high deathrate"
 msgstr ""
 "Residencial: 50 vecinos, baja tasa de nacimientos, alta tasa de muertes"
 
-#: src/lincity-ng/ButtonPanel.cpp:202
+#: src/lincity-ng/ButtonPanel.cpp:204
 msgid "Residential: 100 denizens, high birthrate, low deathrate"
 msgstr ""
 "Residencial: 100 vecinos, alta tasa de nacimientos, baja tasa de muertes"
 
-#: src/lincity-ng/ButtonPanel.cpp:203
+#: src/lincity-ng/ButtonPanel.cpp:205
 msgid "Residential: 200 denizens, high birthrate, high deathrate"
 msgstr ""
 "Residencial: 200 vecinos, alta tasa de nacimientos, alta tasa de muertes"
 
-#: src/lincity-ng/ButtonPanel.cpp:204
+#: src/lincity-ng/ButtonPanel.cpp:206
 msgid "Residential: 100 denizens, low birthrate, high deathrate"
 msgstr ""
 "Residencial: 100 vecinos, baja tasa de nacimientos, alta tasa de muertes"
 
-#: src/lincity-ng/ButtonPanel.cpp:205
+#: src/lincity-ng/ButtonPanel.cpp:207
 msgid "Residential: 200 denizens, high birthrate, low deathrate"
 msgstr ""
 "Residencial: 200 vecinos, alta tasa de nacimientos, baja tasa de muertes"
 
-#: src/lincity-ng/ButtonPanel.cpp:206
+#: src/lincity-ng/ButtonPanel.cpp:208
 msgid "Residential: 400 denizens, high birthrate, high deathrate"
 msgstr ""
 "Residencial: 400 vecinos, alta tasa de nacimientos, alta tasa de muertes"
 
-#: src/lincity-ng/ButtonPanel.cpp:215
+#: src/lincity-ng/ButtonPanel.cpp:217
 msgid " [Click right for help.]"
 msgstr " [Pulsa el bot??n derecho para obtener ayuda.]"
 
-#: src/lincity-ng/ButtonPanel.cpp:243 src/lincity-ng/ButtonPanel.cpp:277
+#: src/lincity-ng/ButtonPanel.cpp:245 src/lincity-ng/ButtonPanel.cpp:288
 #, c-format
 msgid "%s (Techlevel %.1f required.)"
 msgstr ""
 
-#: src/lincity-ng/ButtonPanel.cpp:252
+#: src/lincity-ng/ButtonPanel.cpp:254
 #, c-format
 msgid "%s is disabled (loaded old game)."
 msgstr ""
 
-#: src/lincity-ng/EconomyGraph.cpp:121
+#: src/lincity-ng/EconomyGraph.cpp:124
 msgid "Mining"
 msgstr "Miner??a"
 
-#: src/lincity-ng/EconomyGraph.cpp:123
+#: src/lincity-ng/EconomyGraph.cpp:126
 msgid "Trade"
 msgstr "Comercio"
 
-#: src/lincity-ng/EconomyGraph.cpp:125
+#: src/lincity-ng/EconomyGraph.cpp:128
 msgid "Money"
 msgstr "Dinero"
 
-#: src/lincity-ng/EconomyGraph.cpp:127
+#: src/lincity-ng/EconomyGraph.cpp:130
 msgid "Popul."
 msgstr "Poblac."
 
-#: src/lincity-ng/EconomyGraph.cpp:129
+#: src/lincity-ng/EconomyGraph.cpp:132
 msgid "Techn."
 msgstr "Tecno."
 
-#: src/lincity-ng/EconomyGraph.cpp:134
+#: src/lincity-ng/EconomyGraph.cpp:137
 msgid "Economy Overview:"
 msgstr "Visi??n general econ??mica:"
 
-#: src/lincity-ng/EconomyGraph.cpp:137
+#: src/lincity-ng/EconomyGraph.cpp:140
 msgid "Sustainability:"
 msgstr "Sostenibilidad:"
 
-#: src/lincity-ng/EconomyGraph.cpp:140
+#: src/lincity-ng/EconomyGraph.cpp:143
 msgid "Frames per Second:"
 msgstr "Cuadros por segundo:"
 
-#: src/lincity-ng/EconomyGraph.cpp:216
+#: src/lincity-ng/EconomyGraph.cpp:219
 msgid "You lose."
 msgstr "Has perdido."

Modified: trunk/data/locale/fr.po
===================================================================
--- trunk/data/locale/fr.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/fr.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -11,559 +11,545 @@
 msgstr ""
 "Project-Id-Version: fr\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-01-27 22:03+0100\n"
-"PO-Revision-Date: 2007-11-28 01:23+0100\n"
+"POT-Creation-Date: 2007-12-04 00:29+0100\n"
+"PO-Revision-Date: 2007-12-04 01:07+0100\n"
 "Last-Translator: alain <alain.baeckeroot at laposte.net>\n"
 "Language-Team: fran??ais <fr at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
 
-#: src/lincity/fileutil.cpp:292
-#: src/lincity/fileutil.cpp:341
-msgid "Error. Can't find LINCITY_HOME"
-msgstr "Erreur. Impossible de trouver LINCITY_HOME"
+#: src/lincity/engine.cpp:120
+msgid "ERROR: group does not exist. This should not happen! Please consider filling a bug report to lincity-ng team, with the saved game and what you did :-) "
+msgstr "ERREUR: ce group n'existe pas. Ceci ne devrait _jamais_ se produire. SVP envoyez un rapport de bug ?? l'??quipe linicty-ng, si possible avec une copie de la suvegarde du jeu et ce que vous avez fait pour obtenir ce message :-)"
 
-#: src/lincity/fileutil.cpp:561
-msgid "Error verifying package. Can't find colour.pal."
-msgstr ""
-"Erreur de v??rification du paquet. Impossible de trouver la couleur pal."
-
-#: src/lincity/fileutil.cpp:580
-#: src/lincity/fileutil.cpp:589
-#, c-format
-msgid "Couldn't create the save directory '%s'\n"
-msgstr "Impossible de cr??er le r??pertoire de sauvegarde '%s'\n"
-
-#: src/lincity/fileutil.cpp:635
-#, c-format
-msgid "Out of memory: malloc failure\n"
-msgstr "M??moire insuffisante : ??chec de malloc\n"
-
-#: src/lincity/power.cpp:93
-msgid "You have too many power grids. Join some of them"
-msgstr ""
-"Vous avez de trop nombreux r??seaux ??lectriques. R??unissez-en quelques uns."
-
-#: src/lincity/engine.cpp:199
-msgid ""
-"ERROR: group does not exist. This should not happen! Please consider filling "
-"a bug report to lincity-ng team, with the saved game and what you did :-) "
-msgstr ""
-"ERREUR: ce group n'existe pas. Ceci ne devrait _jamais_ se produire. SVP "
-"envoyez un rapport de bug ?? l'??quipe linicty-ng, si possible avec une "
-"copie de la suvegarde du jeu et ce que vous avez fait pour obtenir ce "
-"message :-)"
-
-#: src/lincity/engine.cpp:225
+#: src/lincity/engine.cpp:152
 msgid "Port must be connected to river all along right side."
-msgstr ""
-"Les ports doivent ??tre connect??s ?? une rivi??re tout au long du cot?? "
-"droit."
+msgstr "Les ports doivent ??tre connect??s ?? une rivi??re tout au long du cot?? droit."
 
-#: src/lincity/engine.cpp:234
-#: src/lincity/engine.cpp:243
+#: src/lincity/engine.cpp:161
+#: src/lincity/engine.cpp:170
 msgid "Too many substations + windmills. You cannot build one more"
-msgstr ""
-"Trop d'??oliennes + transformateurs. Vous ne pouvez pas en construire "
-"davantage."
+msgstr "Trop d'??oliennes + transformateurs. Vous ne pouvez pas en construire davantage."
 
-#: src/lincity/engine.cpp:273
+#: src/lincity/engine.cpp:200
 msgid "Too many markets. You cannot build one more"
 msgstr "Trop de march??s; Vous ne pouvez pas en construire d'avantage."
 
-#: src/lincity/engine.cpp:296
+#: src/lincity/engine.cpp:223
 msgid "You can't build a tip here: this area was once a landfill"
-msgstr ""
-"Vous ne pouvez pas construire de d??charge ici. Il y en a d??j?? eu une dans "
-"le pass??."
+msgstr "Vous ne pouvez pas construire de d??charge ici. Il y en a d??j?? eu une dans le pass??."
 
-#: src/lincity/engine.cpp:321
+#: src/lincity/engine.cpp:248
 msgid "You can't build a mine here: This area was once a landfill"
-msgstr ""
-"Vous ne pouvez pas construire une mine ici. Il y a eu une d??charge ici."
+msgstr "Vous ne pouvez pas construire une mine ici. Il y a eu une d??charge ici."
 
-#: src/lincity/engine.cpp:325
+#: src/lincity/engine.cpp:252
 msgid "You can't build a mine here: there is no ore left at this site"
-msgstr ""
-"Vous ne pouvez pas construire une carri??re ici. Il ne reste plus de minerai."
+msgstr "Vous ne pouvez pas construire une carri??re ici. Il ne reste plus de minerai."
 
-#: src/lincity/engine.cpp:337
+#: src/lincity/engine.cpp:264
 msgid "You can't build a water well here: it is all desert."
 msgstr "Vous ne pouvez pas construire de puit ici. C'est un d??sert."
 
-#: src/lincity/engine.cpp:347
+#: src/lincity/engine.cpp:274
 msgid "You can't build a park here: it is a desert, parks need water"
-msgstr ""
-"Vous ne pouvez pas construire de parc ici. C'est un d??sert, hors les parcs "
-"ont besoin d'eau."
+msgstr "Vous ne pouvez pas construire de parc ici. C'est un d??sert, hors les parcs ont besoin d'eau."
 
-#: src/lincity/engine.cpp:691
+#: src/lincity/engine.cpp:485
 msgid "It's at a power line."
 msgstr "C'est sur une ligne ??lectrique"
 
-#: src/lincity/engine.cpp:693
+#: src/lincity/engine.cpp:487
 msgid "It's at a solar power station."
 msgstr "C'est dans une centrale ??lectrique solaire"
 
-#: src/lincity/engine.cpp:695
+#: src/lincity/engine.cpp:489
 msgid "It's at a substation."
 msgstr "C'est dans un transformateur "
 
-#: src/lincity/engine.cpp:697
+#: src/lincity/engine.cpp:491
 msgid "It's at a residential area."
 msgstr "C'est dans une zone r??sidentielle."
 
-#: src/lincity/engine.cpp:699
+#: src/lincity/engine.cpp:493
 msgid "It's at a farm."
 msgstr "C'est dans une ferme."
 
-#: src/lincity/engine.cpp:701
+#: src/lincity/engine.cpp:495
 msgid "It's at a market."
 msgstr "C'est dans un march??."
 
-#: src/lincity/engine.cpp:703
+#: src/lincity/engine.cpp:497
 msgid "It's at a track."
 msgstr "C'est sur une piste."
 
-#: src/lincity/engine.cpp:705
+#: src/lincity/engine.cpp:499
 msgid "It's at a coal mine."
 msgstr "C'est dans une mine de charbon."
 
-#: src/lincity/engine.cpp:707
+#: src/lincity/engine.cpp:501
 msgid "It's at a railway."
 msgstr "C'est sur une ligne de chemin de fer."
 
-#: src/lincity/engine.cpp:709
+#: src/lincity/engine.cpp:503
 msgid "It's at a coal power station."
 msgstr "C'est dans une centrale ??lectrique au charbon."
 
-#: src/lincity/engine.cpp:711
+#: src/lincity/engine.cpp:505
 msgid "It's at a road."
 msgstr "C'est sur une route."
 
-#: src/lincity/engine.cpp:713
+#: src/lincity/engine.cpp:507
 msgid "It's at light industry."
 msgstr "C'est dans une industrie l??g??re."
 
-#: src/lincity/engine.cpp:715
+#: src/lincity/engine.cpp:509
 msgid "It's at a university."
 msgstr "C'est dans une universit??."
 
-#: src/lincity/engine.cpp:717
+#: src/lincity/engine.cpp:511
 msgid "It's at a commune."
 msgstr "C'est dans une commune."
 
-#: src/lincity/engine.cpp:719
+#: src/lincity/engine.cpp:513
 msgid "It's at a tip."
 msgstr "C'est dans une d??charge."
 
-#: src/lincity/engine.cpp:721
+#: src/lincity/engine.cpp:515
 msgid "It's at a port."
 msgstr "C'est dans un port."
 
-#: src/lincity/engine.cpp:723
+#: src/lincity/engine.cpp:517
 msgid "It's at a steel works."
 msgstr "C'est dans une aci??rie."
 
-#: src/lincity/engine.cpp:725
+#: src/lincity/engine.cpp:519
 msgid "It's at a recycle centre."
 msgstr "C'est dans un centre de recyclage."
 
-#: src/lincity/engine.cpp:727
+#: src/lincity/engine.cpp:521
 msgid "It's at a health centre."
 msgstr "C'est dans un centre de soins."
 
-#: src/lincity/engine.cpp:729
+#: src/lincity/engine.cpp:523
 msgid "It's at a rocket site."
 msgstr "C'est dans un site de lancement de fus??e."
 
-#: src/lincity/engine.cpp:731
+#: src/lincity/engine.cpp:525
 msgid "It's at a windmill."
 msgstr "C'est dans un moulin ?? vent."
 
-#: src/lincity/engine.cpp:733
+#: src/lincity/engine.cpp:527
 msgid "It's at a school."
 msgstr "C'est dans une ??cole."
 
-#: src/lincity/engine.cpp:735
+#: src/lincity/engine.cpp:529
 msgid "It's at a blacksmith."
 msgstr "C'est dans une forge."
 
-#: src/lincity/engine.cpp:737
+#: src/lincity/engine.cpp:531
 msgid "It's at a mill."
 msgstr "C'est dans une fabrique."
 
-#: src/lincity/engine.cpp:739
+#: src/lincity/engine.cpp:533
 msgid "It's at a pottery."
 msgstr "C'est dans une poterie."
 
-#: src/lincity/engine.cpp:741
+#: src/lincity/engine.cpp:535
 msgid "It's at a fire station!!!."
 msgstr "C'est dans une caserne de pompier!!!."
 
-#: src/lincity/engine.cpp:743
+#: src/lincity/engine.cpp:537
 msgid "It's at a sports field!!!."
 msgstr "C'est dans un gymnase!!!."
 
-#: src/lincity/engine.cpp:745
+#: src/lincity/engine.cpp:539
 msgid "It's at a shanty town."
 msgstr "C'est dans un bidonville."
 
-#: src/lincity/engine.cpp:747
+#: src/lincity/engine.cpp:541
 msgid "UNKNOWN!"
 msgstr "INCONNU!"
 
-#: src/lincity/lintypes.cpp:22
+#: src/lincity/lintypes.cpp:20
 msgid "Empty"
 msgstr "Vide"
 
-#: src/lincity/lintypes.cpp:34
+#: src/lincity/lintypes.cpp:32
 msgid "Power line"
 msgstr "Lignes ??lectriques"
 
-#: src/lincity/lintypes.cpp:46
+#: src/lincity/lintypes.cpp:43
 msgid "Solar PS"
 msgstr "Centrale ??lectrique solaire"
 
-#: src/lincity/lintypes.cpp:58
-#: src/lincity/modules/substation.cpp:91
+#: src/lincity/lintypes.cpp:54
+#: src/lincity/modules/substation.cpp:93
 msgid "Substation"
 msgstr "Transformateur"
 
-#: src/lincity/lintypes.cpp:70
+#: src/lincity/lintypes.cpp:65
 msgid "Residential LL"
 msgstr "R??sidences faible densit??"
 
-#: src/lincity/lintypes.cpp:82
+#: src/lincity/lintypes.cpp:76
 msgid "Farm"
 msgstr "Ferme"
 
-#: src/lincity/lintypes.cpp:94
-#: src/lincity/modules/market.cpp:1143
-#: src/lincity-ng/Dialog.cpp:486
+#: src/lincity/lintypes.cpp:87
+#: src/lincity/modules/market.cpp:979
+#: src/lincity-ng/Dialog.cpp:507
 msgid "Market"
 msgstr "March??"
 
-#: src/lincity/lintypes.cpp:106
-#: src/lincity/modules/track.cpp:38
+#: src/lincity/lintypes.cpp:98
+#: src/lincity/modules/track.cpp:34
 msgid "Track"
 msgstr "Voie"
 
-#: src/lincity/lintypes.cpp:118
+#: src/lincity/lintypes.cpp:109
 msgid "Coalmine"
 msgstr "Mine de charbon"
 
-#: src/lincity/lintypes.cpp:130
+#: src/lincity/lintypes.cpp:120
 msgid "Railway"
 msgstr "Chemin de fer"
 
-#: src/lincity/lintypes.cpp:142
+#: src/lincity/lintypes.cpp:131
 msgid "Coal PS"
 msgstr "Centrale ??lectrique au charbon"
 
-#: src/lincity/lintypes.cpp:154
-#: src/lincity/modules/road.cpp:47
+#: src/lincity/lintypes.cpp:142
+#: src/lincity/modules/road.cpp:43
 msgid "Road"
 msgstr "Route"
 
-#: src/lincity/lintypes.cpp:166
+#: src/lincity/lintypes.cpp:153
 msgid "Lt. Industry"
 msgstr "Industrie l??g??re"
 
-#: src/lincity/lintypes.cpp:178
-#: src/lincity/modules/university.cpp:67
+#: src/lincity/lintypes.cpp:164
+#: src/lincity/modules/university.cpp:59
 msgid "University"
 msgstr "Universit??"
 
-#: src/lincity/lintypes.cpp:190
-#: src/lincity/modules/commune.cpp:146
+#: src/lincity/lintypes.cpp:175
+#: src/lincity/modules/commune.cpp:172
 msgid "Commune"
 msgstr "Commune"
 
-#: src/lincity/lintypes.cpp:202
+#: src/lincity/lintypes.cpp:186
 msgid "Ore mine"
 msgstr "Mine de minerai"
 
-#: src/lincity/lintypes.cpp:214
+#: src/lincity/lintypes.cpp:197
 msgid "Rubbish tip"
 msgstr "D??charge"
 
-#: src/lincity/lintypes.cpp:226
-#: src/lincity/modules/port.cpp:173
-#: src/lincity-ng/Dialog.cpp:540
+#: src/lincity/lintypes.cpp:208
+#: src/lincity/modules/port.cpp:281
+#: src/lincity-ng/Dialog.cpp:561
 msgid "Port"
 msgstr "Port"
 
-#: src/lincity/lintypes.cpp:238
+#: src/lincity/lintypes.cpp:219
 msgid "Hv. Industry"
 msgstr "Industrie lourde"
 
-#: src/lincity/lintypes.cpp:250
+#: src/lincity/lintypes.cpp:230
 msgid "Park"
 msgstr "Parc"
 
-#: src/lincity/lintypes.cpp:262
-#: src/lincity-ng/MpsInterface.cpp:516
+#: src/lincity/lintypes.cpp:241
+#: src/lincity-ng/MpsInterface.cpp:519
 msgid "Recycle"
 msgstr "Recyclage"
 
-#: src/lincity/lintypes.cpp:274
-#: src/lincity/modules/water.cpp:19
+#: src/lincity/lintypes.cpp:252
+#: src/lincity/modules/water.cpp:17
+#: src/lincity/modules/residence.cpp:264
 msgid "Water"
 msgstr "Eau"
 
-#: src/lincity/lintypes.cpp:286
+#: src/lincity/lintypes.cpp:263
 msgid "Health centre"
 msgstr "Centre de soins"
 
-#: src/lincity/lintypes.cpp:298
+#: src/lincity/lintypes.cpp:274
 msgid "Rocket pad"
 msgstr "Base de lancement de fus??e"
 
-#: src/lincity/lintypes.cpp:310
-#: src/lincity/modules/windmill.cpp:73
-#: src/lincity-ng/MpsInterface.cpp:506
+#: src/lincity/lintypes.cpp:285
+#: src/lincity/modules/windmill.cpp:75
+#: src/lincity-ng/MpsInterface.cpp:509
 msgid "Windmill"
 msgstr "Moulin ?? vent"
 
-#: src/lincity/lintypes.cpp:322
-#: src/lincity/modules/monument.cpp:57
+#: src/lincity/lintypes.cpp:296
+#: src/lincity/modules/monument.cpp:51
 msgid "Monument"
 msgstr "Monument"
 
-#: src/lincity/lintypes.cpp:334
-#: src/lincity/modules/school.cpp:49
+#: src/lincity/lintypes.cpp:307
+#: src/lincity/modules/school.cpp:43
 msgid "School"
 msgstr "Ecole"
 
-#: src/lincity/lintypes.cpp:346
-#: src/lincity/modules/blacksmith.cpp:97
+#: src/lincity/lintypes.cpp:318
+#: src/lincity/modules/blacksmith.cpp:90
 msgid "Blacksmith"
 msgstr "Forge"
 
-#: src/lincity/lintypes.cpp:358
+#: src/lincity/lintypes.cpp:329
 msgid "Mill"
 msgstr "Fabrique"
 
-#: src/lincity/lintypes.cpp:370
-#: src/lincity/modules/pottery.cpp:119
+#: src/lincity/lintypes.cpp:340
+#: src/lincity/modules/pottery.cpp:104
 msgid "Pottery"
 msgstr "Poterie"
 
-#: src/lincity/lintypes.cpp:382
+#: src/lincity/lintypes.cpp:351
 msgid "Fire sta'n"
 msgstr "Caserne de pompiers"
 
-#: src/lincity/lintypes.cpp:394
-#: src/lincity/modules/cricket.cpp:99
+#: src/lincity/lintypes.cpp:362
+#: src/lincity/modules/cricket.cpp:91
 msgid "Sports field"
 msgstr "Stade"
 
-#: src/lincity/lintypes.cpp:407
+#: src/lincity/lintypes.cpp:374
 msgid "Burnt"
 msgstr "Brul??"
 
-#: src/lincity/lintypes.cpp:420
+#: src/lincity/lintypes.cpp:386
 msgid "Shanty town"
 msgstr "Bidonville"
 
-#: src/lincity/lintypes.cpp:433
-#: src/lincity/modules/residence.cpp:292
-#: src/lincity-ng/MpsInterface.cpp:380
-#: src/lincity-ng/EconomyGraph.cpp:131
+#: src/lincity/lintypes.cpp:398
+#: src/lincity/modules/residence.cpp:283
+#: src/lincity-ng/MpsInterface.cpp:383
+#: src/lincity-ng/EconomyGraph.cpp:134
 msgid "Fire"
 msgstr "Feu"
 
-#: src/lincity/lintypes.cpp:446
+#: src/lincity/lintypes.cpp:410
 msgid "Used"
 msgstr "Utilis??"
 
-#: src/lincity/lintypes.cpp:458
+#: src/lincity/lintypes.cpp:421
 msgid "Residential ML"
 msgstr "R??sidences ?? moyenne densit??"
 
-#: src/lincity/lintypes.cpp:470
+#: src/lincity/lintypes.cpp:432
 msgid "Residential HL"
 msgstr "R??sidences ?? haute densit??"
 
-#: src/lincity/lintypes.cpp:482
+#: src/lincity/lintypes.cpp:443
 msgid "Residential LH"
 msgstr "R??sidences modernes ?? faible densit??"
 
-#: src/lincity/lintypes.cpp:494
+#: src/lincity/lintypes.cpp:454
 msgid "Residential MH"
 msgstr "R??sidences modernes ?? moyenne densit??"
 
-#: src/lincity/lintypes.cpp:506
+#: src/lincity/lintypes.cpp:465
 msgid "Residential HH"
 msgstr "R??sidences modernes ?? forte densit??"
 
-#: src/lincity/lintypes.cpp:477
+#: src/lincity/lintypes.cpp:476
 msgid "Water well"
 msgstr "Puit"
 
-#: src/lincity/lintypes.cpp:489
+#: src/lincity/lintypes.cpp:488
 msgid "Desert"
 msgstr "D??sert"
 
-#: src/lincity/lintypes.cpp:501
+#: src/lincity/lintypes.cpp:500
 msgid "Tree"
 msgstr "Arbre"
 
-#: src/lincity/lintypes.cpp:514
+#: src/lincity/lintypes.cpp:513
 msgid "Trees"
 msgstr "Arbres"
 
-#: src/lincity/lintypes.cpp:527
+#: src/lincity/lintypes.cpp:526
 msgid "Forest"
 msgstr "For??t"
 
-#: src/lincity/ldsvguts.cpp:128
+#: src/lincity/ldsvguts.cpp:137
 #, c-format
 msgid "Save file <%s> - "
 msgstr "Sauver le fichier <%s> - "
 
-#: src/lincity/ldsvguts.cpp:129
+#: src/lincity/ldsvguts.cpp:138
 msgid "Can't open save file!"
 msgstr "Impossible de sauver le fichier !"
 
-#: src/lincity/ldsvguts.cpp:134
+#: src/lincity/ldsvguts.cpp:148
 msgid "Saving scene"
 msgstr "Sauvegarde de la sc??ne"
 
-#: src/lincity/ldsvguts.cpp:334
+#: src/lincity/ldsvguts.cpp:362
 #, c-format
 msgid "Can't open <%s> (gzipped)"
 msgstr "Impossible d'ouvrir <%s> (gzipp??)"
 
-#: src/lincity/ldsvguts.cpp:352
+#: src/lincity/ldsvguts.cpp:395
 msgid "Loading scene"
 msgstr "Chargement de la sc??ne"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/fileutil.cpp:266
+#: src/lincity/fileutil.cpp:310
+msgid "Error. Can't find LINCITY_HOME"
+msgstr "Erreur. Impossible de trouver LINCITY_HOME"
+
+#: src/lincity/fileutil.cpp:512
+msgid "Error verifying package. Can't find colour.pal."
+msgstr "Erreur de v??rification du paquet. Impossible de trouver la couleur pal."
+
+#: src/lincity/fileutil.cpp:525
+#: src/lincity/fileutil.cpp:533
+#, c-format
+msgid "Couldn't create the save directory '%s'\n"
+msgstr "Impossible de cr??er le r??pertoire de sauvegarde '%s'\n"
+
+#: src/lincity/fileutil.cpp:550
+#, c-format
+msgid "Out of memory: malloc failure\n"
+msgstr "M??moire insuffisante : ??chec de malloc\n"
+
+#: src/lincity/simulate.cpp:97
+msgid "Upgrading from old game. You have 10 years to build water wells where needed. After, starvation will occur!  You should check starvation minimap, and read waterwell help page :-)"
+msgstr "Mise ?? jour depuis une ancienne version. Vous avez 10 ans pour construire des puits o?? c'est n??cessaire. Ensuite la p??nurie d'eau causera des famines! Vous devriez regarder la mini-carte \"alimentation/famine\", et lire l'aide sur les puits :-) "
+
+#: src/lincity/lclib.cpp:15
 msgid "Jan"
 msgstr "Jan"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Feb"
 msgstr "F??v"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Mar"
 msgstr "Mar"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Apr"
 msgstr "Avr"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "May"
 msgstr "Mai"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jun"
 msgstr "Jun"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jul"
 msgstr "Jul"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Aug"
 msgstr "Ao??"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Sep"
 msgstr "Sep"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Oct"
 msgstr "Oct"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Nov"
 msgstr "Nov"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Dec"
 msgstr "D??c"
 
-#: src/lincity/modules/health_centre.cpp:66
+#: src/lincity/power.cpp:102
+msgid "You have too many power grids. Join some of them"
+msgstr "Vous avez de trop nombreux r??seaux ??lectriques. R??unissez-en quelques uns."
+
+#: src/lincity/modules/health_centre.cpp:58
 msgid "Health Centre"
 msgstr "Centre de Soins"
 
-#: src/lincity/modules/health_centre.cpp:68
-#: src/lincity/modules/rocket_pad.cpp:169
-#: src/lincity/modules/recycle.cpp:181
-#: src/lincity/modules/mill.cpp:107
-#: src/lincity/modules/university.cpp:74
-#: src/lincity/modules/cricket.cpp:101
-#: src/lincity/modules/pottery.cpp:123
-#: src/lincity/modules/blacksmith.cpp:102
-#: src/lincity/modules/firestation.cpp:121
-#: src/lincity/modules/school.cpp:54
+#: src/lincity/modules/health_centre.cpp:60
+#: src/lincity/modules/rocket_pad.cpp:198
+#: src/lincity/modules/recycle.cpp:148
+#: src/lincity/modules/mill.cpp:92
+#: src/lincity/modules/university.cpp:65
+#: src/lincity/modules/cricket.cpp:93
+#: src/lincity/modules/pottery.cpp:108
+#: src/lincity/modules/blacksmith.cpp:95
+#: src/lincity/modules/school.cpp:48
+#: src/lincity/modules/firestation.cpp:110
 msgid "Inventory"
 msgstr "Surplus"
 
-#: src/lincity/modules/health_centre.cpp:69
-#: src/lincity/modules/rocket_pad.cpp:170
-#: src/lincity/modules/market.cpp:1149
-#: src/lincity/modules/road.cpp:52
-#: src/lincity/modules/rail.cpp:55
-#: src/lincity/modules/coal_power.cpp:105
-#: src/lincity/modules/university.cpp:75
-#: src/lincity/modules/cricket.cpp:102
-#: src/lincity/modules/track.cpp:43
-#: src/lincity/modules/pottery.cpp:124
-#: src/lincity/modules/firestation.cpp:122
-#: src/lincity/modules/school.cpp:55
+#: src/lincity/modules/health_centre.cpp:61
+#: src/lincity/modules/rocket_pad.cpp:199
+#: src/lincity/modules/market.cpp:984
+#: src/lincity/modules/road.cpp:47
+#: src/lincity/modules/rail.cpp:51
+#: src/lincity/modules/coal_power.cpp:97
+#: src/lincity/modules/university.cpp:66
+#: src/lincity/modules/cricket.cpp:94
+#: src/lincity/modules/track.cpp:38
+#: src/lincity/modules/pottery.cpp:109
+#: src/lincity/modules/school.cpp:49
+#: src/lincity/modules/firestation.cpp:111
 msgid "Jobs"
 msgstr "Emplois"
 
-#: src/lincity/modules/health_centre.cpp:71
-#: src/lincity/modules/rocket_pad.cpp:172
-#: src/lincity/modules/market.cpp:1153
-#: src/lincity/modules/port.cpp:190
-#: src/lincity/modules/road.cpp:56
-#: src/lincity/modules/rail.cpp:59
-#: src/lincity/modules/mill.cpp:108
-#: src/lincity/modules/university.cpp:77
-#: src/lincity/modules/cricket.cpp:104
-#: src/lincity/modules/track.cpp:47
-#: src/lincity/modules/pottery.cpp:126
-#: src/lincity/modules/blacksmith.cpp:103
-#: src/lincity/modules/firestation.cpp:124
-#: src/lincity/modules/school.cpp:57
-#: src/lincity-ng/MpsInterface.cpp:448
+#: src/lincity/modules/health_centre.cpp:62
+#: src/lincity/modules/rocket_pad.cpp:200
+#: src/lincity/modules/market.cpp:986
+#: src/lincity/modules/port.cpp:298
+#: src/lincity/modules/road.cpp:49
+#: src/lincity/modules/rail.cpp:53
+#: src/lincity/modules/mill.cpp:93
+#: src/lincity/modules/university.cpp:67
+#: src/lincity/modules/cricket.cpp:95
+#: src/lincity/modules/track.cpp:40
+#: src/lincity/modules/pottery.cpp:110
+#: src/lincity/modules/blacksmith.cpp:96
+#: src/lincity/modules/school.cpp:50
+#: src/lincity/modules/firestation.cpp:112
+#: src/lincity-ng/MpsInterface.cpp:451
 msgid "Goods"
 msgstr "Biens"
 
-#: src/lincity/modules/rocket_pad.cpp:163
+#: src/lincity/modules/rocket_pad.cpp:192
 msgid "Rocket Pad"
 msgstr "Base de lancement de fus??e"
 
-#: src/lincity/modules/rocket_pad.cpp:166
+#: src/lincity/modules/rocket_pad.cpp:195
 msgid "Completion"
 msgstr "Avancement"
 
-#: src/lincity/modules/rocket_pad.cpp:174
-#: src/lincity/modules/market.cpp:1157
-#: src/lincity/modules/port.cpp:194
-#: src/lincity/modules/road.cpp:60
-#: src/lincity/modules/rail.cpp:63
-#: src/lincity/modules/light_industry.cpp:368
-#: src/lincity/modules/commune.cpp:156
-#: src/lincity/modules/track.cpp:51
+#: src/lincity/modules/rocket_pad.cpp:201
+#: src/lincity/modules/market.cpp:988
+#: src/lincity/modules/port.cpp:302
+#: src/lincity/modules/road.cpp:51
+#: src/lincity/modules/rail.cpp:55
+#: src/lincity/modules/light_industry.cpp:288
+#: src/lincity/modules/commune.cpp:182
+#: src/lincity/modules/track.cpp:42
 msgid "Steel"
 msgstr "Acier"
 
-#: src/lincity/modules/windmill.cpp:77
-#: src/lincity/modules/windmill.cpp:88
-#: src/lincity/modules/recycle.cpp:178
-#: src/lincity/modules/coal_power.cpp:107
-#: src/lincity/modules/organic_farm.cpp:196
-#: src/lincity/modules/solar_power.cpp:58
+#: src/lincity/modules/windmill.cpp:76
+#: src/lincity/modules/recycle.cpp:146
+#: src/lincity/modules/coal_power.cpp:98
+#: src/lincity/modules/organic_farm.cpp:230
+#: src/lincity/modules/solar_power.cpp:60
 msgid "Tech"
 msgstr "Tech"
 
@@ -576,844 +562,836 @@
 msgstr "Production."
 
 #: src/lincity/modules/windmill.cpp:86
-#: src/lincity/modules/windmill.cpp:101
-#: src/lincity/modules/substation.cpp:108
+#: src/lincity/modules/windmill.cpp:99
+#: src/lincity/modules/substation.cpp:110
 msgid "Demand"
 msgstr "Demande"
 
-#: src/lincity/modules/windmill.cpp:92
-#: src/lincity/modules/substation.cpp:99
+#: src/lincity/modules/windmill.cpp:90
+#: src/lincity/modules/substation.cpp:101
 msgid "Grid Status"
 msgstr "Status du r??seau"
 
-#: src/lincity/modules/windmill.cpp:95
-#: src/lincity/modules/substation.cpp:102
+#: src/lincity/modules/windmill.cpp:93
+#: src/lincity/modules/substation.cpp:104
 msgid "T. Cap."
 msgstr "Capacit?? maximale"
 
-#: src/lincity/modules/windmill.cpp:98
-#: src/lincity/modules/substation.cpp:105
+#: src/lincity/modules/windmill.cpp:96
+#: src/lincity/modules/substation.cpp:107
 msgid "A. Cap."
 msgstr "Capacit?? actuelle"
 
-#: src/lincity/modules/windmill.cpp:104
-#: src/lincity/modules/coal_power.cpp:109
-#: src/lincity/modules/substation.cpp:111
-#: src/lincity/modules/power_line.cpp:53
-#: src/lincity/modules/solar_power.cpp:60
+#: src/lincity/modules/windmill.cpp:102
+#: src/lincity/modules/coal_power.cpp:99
+#: src/lincity/modules/substation.cpp:113
+#: src/lincity/modules/power_line.cpp:49
+#: src/lincity/modules/solar_power.cpp:61
 msgid "Grid ID"
 msgstr "Num??ro de r??seau"
 
-#: src/lincity/modules/water.cpp:22
-#: src/lincity/modules/commune.cpp:151
-#: src/lincity/modules/commune.cpp:153
-#: src/lincity/modules/commune.cpp:155
-#: src/lincity/modules/commune.cpp:157
-#: src/lincity-ng/MpsInterface.cpp:379
+#: src/lincity/modules/water.cpp:20
+#: src/lincity/modules/waterwell.cpp:50
+#: src/lincity/modules/commune.cpp:177
+#: src/lincity/modules/commune.cpp:179
+#: src/lincity/modules/commune.cpp:181
+#: src/lincity/modules/commune.cpp:183
 #: src/lincity-ng/MpsInterface.cpp:382
 #: src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity-ng/MpsInterface.cpp:388
 msgid "Yes"
 msgstr "Oui"
 
-#: src/lincity/modules/water.cpp:22
-#: src/lincity/modules/commune.cpp:151
-#: src/lincity/modules/commune.cpp:153
-#: src/lincity/modules/commune.cpp:155
-#: src/lincity/modules/commune.cpp:157
-#: src/lincity-ng/MpsInterface.cpp:379
+#: src/lincity/modules/water.cpp:20
+#: src/lincity/modules/commune.cpp:177
+#: src/lincity/modules/commune.cpp:179
+#: src/lincity/modules/commune.cpp:181
+#: src/lincity/modules/commune.cpp:183
 #: src/lincity-ng/MpsInterface.cpp:382
 #: src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity-ng/MpsInterface.cpp:388
 msgid "No"
 msgstr "Non"
 
-#: src/lincity/modules/water.cpp:23
+#: src/lincity/modules/water.cpp:21
 msgid "Navigable"
 msgstr "Navigable"
 
-#: src/lincity/modules/recycle.cpp:169
+#: src/lincity/modules/recycle.cpp:137
 msgid "Recycling"
 msgstr "Recyclage"
 
-#: src/lincity/modules/recycle.cpp:170
+#: src/lincity/modules/recycle.cpp:138
 msgid "Center"
 msgstr "Centre"
 
-#: src/lincity/modules/recycle.cpp:173
-#: src/lincity/modules/heavy_industry.cpp:346
-#: src/lincity/modules/mill.cpp:105
-#: src/lincity/modules/light_industry.cpp:370
-#: src/lincity/modules/university.cpp:79
-#: src/lincity/modules/pottery.cpp:121
-#: src/lincity/modules/blacksmith.cpp:100
-#: src/lincity/modules/school.cpp:60
+#: src/lincity/modules/recycle.cpp:141
+#: src/lincity/modules/heavy_industry.cpp:288
+#: src/lincity/modules/mill.cpp:90
+#: src/lincity/modules/light_industry.cpp:289
+#: src/lincity/modules/university.cpp:68
+#: src/lincity/modules/pottery.cpp:106
+#: src/lincity/modules/blacksmith.cpp:93
+#: src/lincity/modules/school.cpp:52
 msgid "Capacity"
 msgstr "Capacit??"
 
-#: src/lincity/modules/recycle.cpp:175
+#: src/lincity/modules/recycle.cpp:143
+#: src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267
+#: src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273
 #: src/lincity/modules/residence.cpp:279
 #: src/lincity/modules/residence.cpp:282
 #: src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/residence.cpp:288
-#: src/lincity/modules/residence.cpp:291
-#: src/lincity/modules/residence.cpp:294
-#: src/lincity/modules/light_industry.cpp:359
-#: src/lincity/modules/organic_farm.cpp:188
+#: src/lincity/modules/light_industry.cpp:281
+#: src/lincity/modules/organic_farm.cpp:223
 msgid "YES"
 msgstr "OUI"
 
-#: src/lincity/modules/recycle.cpp:175
+#: src/lincity/modules/recycle.cpp:143
+#: src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267
+#: src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273
 #: src/lincity/modules/residence.cpp:279
 #: src/lincity/modules/residence.cpp:282
 #: src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/residence.cpp:288
-#: src/lincity/modules/residence.cpp:291
-#: src/lincity/modules/residence.cpp:294
-#: src/lincity/modules/heavy_industry.cpp:334
-#: src/lincity/modules/light_industry.cpp:359
+#: src/lincity/modules/heavy_industry.cpp:279
+#: src/lincity/modules/light_industry.cpp:281
 msgid "NO"
 msgstr "NON"
 
-#: src/lincity/modules/recycle.cpp:176
-#: src/lincity/modules/residence.cpp:280
-#: src/lincity/modules/heavy_industry.cpp:337
-#: src/lincity/modules/light_industry.cpp:360
-#: src/lincity/modules/organic_farm.cpp:193
+#: src/lincity/modules/recycle.cpp:144
+#: src/lincity/modules/residence.cpp:271
+#: src/lincity/modules/heavy_industry.cpp:282
+#: src/lincity/modules/light_industry.cpp:282
+#: src/lincity/modules/organic_farm.cpp:227
 msgid "Power"
 msgstr "Energie"
 
-#: src/lincity/modules/recycle.cpp:182
-#: src/lincity/modules/heavy_industry.cpp:342
-#: src/lincity/modules/market.cpp:1155
-#: src/lincity/modules/port.cpp:186
-#: src/lincity/modules/road.cpp:58
-#: src/lincity/modules/rail.cpp:61
-#: src/lincity/modules/light_industry.cpp:366
-#: src/lincity/modules/commune.cpp:154
-#: src/lincity/modules/track.cpp:49
-#: src/lincity/modules/pottery.cpp:128
+#: src/lincity/modules/recycle.cpp:149
+#: src/lincity/modules/heavy_industry.cpp:286
+#: src/lincity/modules/market.cpp:987
+#: src/lincity/modules/port.cpp:294
+#: src/lincity/modules/road.cpp:50
+#: src/lincity/modules/rail.cpp:54
+#: src/lincity/modules/light_industry.cpp:287
+#: src/lincity/modules/commune.cpp:180
+#: src/lincity/modules/track.cpp:41
+#: src/lincity/modules/pottery.cpp:111
 msgid "Ore"
 msgstr "Minerai"
 
-#: src/lincity/modules/recycle.cpp:184
-#: src/lincity/modules/market.cpp:1159
-#: src/lincity/modules/road.cpp:62
-#: src/lincity/modules/rail.cpp:65
-#: src/lincity/modules/commune.cpp:158
-#: src/lincity/modules/track.cpp:53
+#: src/lincity/modules/recycle.cpp:150
+#: src/lincity/modules/market.cpp:989
+#: src/lincity/modules/road.cpp:52
+#: src/lincity/modules/rail.cpp:56
+#: src/lincity/modules/commune.cpp:184
+#: src/lincity/modules/track.cpp:43
 msgid "Waste"
 msgstr "D??chets"
 
-#: src/lincity/modules/coalmine.cpp:168
+#: src/lincity/modules/coalmine.cpp:132
 msgid "Coal Mine"
 msgstr "Mine de Charbon"
 
-#: src/lincity/modules/coalmine.cpp:171
-#: src/lincity/modules/oremine.cpp:187
+#: src/lincity/modules/coalmine.cpp:135
+#: src/lincity/modules/oremine.cpp:144
 msgid "Stock"
 msgstr "Stock"
 
-#: src/lincity/modules/coalmine.cpp:175
-#: src/lincity/modules/coalmine.cpp:177
-#: src/lincity/modules/oremine.cpp:191
+#: src/lincity/modules/coalmine.cpp:138
+#: src/lincity/modules/coalmine.cpp:140
+#: src/lincity/modules/oremine.cpp:147
 msgid "Reserve"
 msgstr "R??serve"
 
-#: src/lincity/modules/coalmine.cpp:177
+#: src/lincity/modules/coalmine.cpp:140
 msgid "EMPTY"
 msgstr "VIDE"
 
-#: src/lincity/modules/residence.cpp:273
+#: src/lincity/modules/residence.cpp:255
 msgid "Residence"
 msgstr "R??sidence"
 
-#: src/lincity/modules/residence.cpp:277
+#: src/lincity/modules/residence.cpp:259
 msgid "People"
 msgstr "Habitants"
 
-#: src/lincity/modules/residence.cpp:283
+#: src/lincity/modules/residence.cpp:268
 msgid "Fed"
 msgstr "Nourris"
 
-#: src/lincity/modules/residence.cpp:286
+#: src/lincity/modules/residence.cpp:274
 msgid "Employed"
 msgstr "Employ??s"
 
-#: src/lincity/modules/residence.cpp:299
-#: src/lincity-ng/MpsInterface.cpp:393
+#: src/lincity/modules/residence.cpp:276
+#: src/lincity-ng/MpsInterface.cpp:396
 msgid "good"
 msgstr "bon"
 
-#: src/lincity/modules/residence.cpp:299
+#: src/lincity/modules/residence.cpp:276
 msgid "poor"
 msgstr "pauvre"
 
-#: src/lincity/modules/residence.cpp:300
+#: src/lincity/modules/residence.cpp:277
 msgid "Job"
 msgstr "Travail"
 
-#: src/lincity/modules/residence.cpp:289
+#: src/lincity/modules/residence.cpp:280
 msgid "Health Cvr"
 msgstr "Assurance sant??"
 
-#: src/lincity/modules/residence.cpp:295
-#: src/lincity-ng/MpsInterface.cpp:386
-#: src/lincity-ng/MpsInterface.cpp:514
+#: src/lincity/modules/residence.cpp:286
+#: src/lincity-ng/MpsInterface.cpp:389
+#: src/lincity-ng/MpsInterface.cpp:517
 msgid "Sport"
 msgstr "Sport"
 
-#: src/lincity/modules/residence.cpp:297
-#: src/lincity-ng/MpsInterface.cpp:388
+#: src/lincity/modules/residence.cpp:288
+#: src/lincity/modules/waterwell.cpp:47
+#: src/lincity-ng/MpsInterface.cpp:391
 msgid "Pollution"
 msgstr "Pollution"
 
-#: src/lincity/modules/monument.cpp:63
+#: src/lincity/modules/monument.cpp:57
 msgid "Wisdom Bestowed"
 msgstr "Sagesse Accord??e"
 
-#: src/lincity/modules/monument.cpp:67
+#: src/lincity/modules/monument.cpp:61
 #, c-format
 msgid "% Complete"
 msgstr "% R??alis??"
 
-#: src/lincity/modules/heavy_industry.cpp:323
+#: src/lincity/modules/waterwell.cpp:44
+msgid "Water_well"
+msgstr "Puit"
+
+#: src/lincity/modules/waterwell.cpp:51
+msgid "Drinkable"
+msgstr "Potable"
+
+#: src/lincity/modules/heavy_industry.cpp:268
 msgid "Heavy"
 msgstr "Lourde"
 
-#: src/lincity/modules/heavy_industry.cpp:324
-#: src/lincity/modules/light_industry.cpp:355
+#: src/lincity/modules/heavy_industry.cpp:269
+#: src/lincity/modules/light_industry.cpp:277
 msgid "Industry"
 msgstr "Industrie"
 
-#: src/lincity/modules/heavy_industry.cpp:329
-#: src/lincity/modules/heavy_industry.cpp:344
-#: src/lincity/modules/market.cpp:1151
-#: src/lincity/modules/port.cpp:182
-#: src/lincity/modules/road.cpp:54
-#: src/lincity/modules/rail.cpp:57
-#: src/lincity/modules/coal_power.cpp:89
-#: src/lincity/modules/coal_power.cpp:103
-#: src/lincity/modules/mill.cpp:112
-#: src/lincity/modules/commune.cpp:152
-#: src/lincity/modules/track.cpp:45
-#: src/lincity/modules/pottery.cpp:130
-#: src/lincity/modules/blacksmith.cpp:105
-#: src/lincity-ng/MpsInterface.cpp:444
+#: src/lincity/modules/heavy_industry.cpp:274
+#: src/lincity/modules/heavy_industry.cpp:287
+#: src/lincity/modules/market.cpp:985
+#: src/lincity/modules/port.cpp:290
+#: src/lincity/modules/road.cpp:48
+#: src/lincity/modules/rail.cpp:52
+#: src/lincity/modules/coal_power.cpp:82
+#: src/lincity/modules/coal_power.cpp:96
+#: src/lincity/modules/mill.cpp:95
+#: src/lincity/modules/commune.cpp:178
+#: src/lincity/modules/track.cpp:39
+#: src/lincity/modules/pottery.cpp:112
+#: src/lincity/modules/blacksmith.cpp:97
+#: src/lincity-ng/MpsInterface.cpp:447
 msgid "Coal"
 msgstr "Charbon"
 
-#: src/lincity/modules/heavy_industry.cpp:331
+#: src/lincity/modules/heavy_industry.cpp:276
 msgid "Grid"
 msgstr "R??seau ??lectrique"
 
-#: src/lincity/modules/heavy_industry.cpp:339
-#: src/lincity/modules/light_industry.cpp:362
+#: src/lincity/modules/heavy_industry.cpp:284
+#: src/lincity/modules/light_industry.cpp:284
 msgid "Output"
 msgstr "Production"
 
-#: src/lincity/modules/heavy_industry.cpp:340
-#: src/lincity/modules/light_industry.cpp:364
+#: src/lincity/modules/heavy_industry.cpp:285
+#: src/lincity/modules/light_industry.cpp:286
 msgid "Store"
 msgstr "R??serve"
 
-#: src/lincity/modules/market.cpp:1147
-#: src/lincity/modules/port.cpp:178
-#: src/lincity/modules/road.cpp:50
-#: src/lincity/modules/rail.cpp:53
-#: src/lincity/modules/mill.cpp:110
-#: src/lincity/modules/track.cpp:41
+#: src/lincity/modules/market.cpp:983
+#: src/lincity/modules/port.cpp:286
+#: src/lincity/modules/road.cpp:46
+#: src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/mill.cpp:94
+#: src/lincity/modules/track.cpp:37
 msgid "Food"
 msgstr "Nourriture"
 
-#: src/lincity/modules/port.cpp:198
-#: src/lincity-ng/MpsInterface.cpp:532
+#: src/lincity/modules/port.cpp:306
+#: src/lincity-ng/MpsInterface.cpp:535
 msgid "Total"
 msgstr "Total"
 
-#: src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/rail.cpp:47
 msgid "Rail"
 msgstr "Rail"
 
-#: src/lincity/modules/coal_power.cpp:90
-#: src/lincity/modules/solar_power.cpp:45
+#: src/lincity/modules/coal_power.cpp:83
+#: src/lincity/modules/solar_power.cpp:47
 msgid "Power Station"
 msgstr "Centrale ??lectrique"
 
-#: src/lincity/modules/coal_power.cpp:94
-#: src/lincity/modules/solar_power.cpp:49
+#: src/lincity/modules/coal_power.cpp:87
+#: src/lincity/modules/solar_power.cpp:51
 msgid "Max Output"
 msgstr "Production Max"
 
-#: src/lincity/modules/coal_power.cpp:99
-#: src/lincity/modules/solar_power.cpp:54
+#: src/lincity/modules/coal_power.cpp:92
+#: src/lincity/modules/solar_power.cpp:56
 msgid "Current Output"
 msgstr "Production actuelle"
 
-#: src/lincity/modules/substation.cpp:95
+#: src/lincity/modules/substation.cpp:97
 msgid "Local Demand"
 msgstr "Demande locale"
 
-#: src/lincity/modules/mill.cpp:103
+#: src/lincity/modules/mill.cpp:88
 msgid "Textile Mill"
 msgstr "Usine Textile"
 
-#: src/lincity/modules/oremine.cpp:184
+#: src/lincity/modules/oremine.cpp:141
 msgid "Ore Mine"
 msgstr "Mine de Minerai"
 
-#: src/lincity/modules/power_line.cpp:50
+#: src/lincity/modules/power_line.cpp:46
 msgid "Power Line"
 msgstr "Ligne ??lectrique"
 
-#: src/lincity/modules/light_industry.cpp:354
+#: src/lincity/modules/light_industry.cpp:276
 msgid "Light"
 msgstr "L??g??re"
 
-#: src/lincity/modules/university.cpp:69
+#: src/lincity/modules/university.cpp:61
 msgid "Tech Produced"
 msgstr "Tech Produite"
 
-#: src/lincity/modules/tip.cpp:109
+#: src/lincity/modules/tip.cpp:100
 msgid "Landfill"
 msgstr "Remblai"
 
-#: src/lincity/modules/tip.cpp:112
+#: src/lincity/modules/tip.cpp:103
 msgid "Last Month"
 msgstr "le Mois Dernier"
 
-#: src/lincity/modules/tip.cpp:113
+#: src/lincity/modules/tip.cpp:104
 msgid "Tons"
 msgstr "Tonnes"
 
-#: src/lincity/modules/tip.cpp:114
+#: src/lincity/modules/tip.cpp:105
 msgid "Percent"
 msgstr "Pourcent"
 
-#: src/lincity/modules/tip.cpp:117
+#: src/lincity/modules/tip.cpp:107
 #, c-format
 msgid "% Filled"
 msgstr "% Rempli"
 
-#: src/lincity/modules/commune.cpp:149
+#: src/lincity/modules/commune.cpp:175
 msgid "Activity"
 msgstr "Activit??"
 
-#: src/lincity/modules/school.cpp:51
+#: src/lincity/modules/school.cpp:45
 msgid "Lessons Learned"
 msgstr "Le??ons apprises"
 
-#: src/lincity/modules/firestation.cpp:119
+#: src/lincity/modules/firestation.cpp:108
 msgid "Fire Station"
 msgstr "Caserne de Pompiers"
 
-#: src/lincity/modules/organic_farm.cpp:183
+#: src/lincity/modules/organic_farm.cpp:219
 msgid "Organic Farm"
 msgstr "Ferme Organique"
 
-#: src/lincity/modules/organic_farm.cpp:190
+#: src/lincity/modules/organic_farm.cpp:225
 msgid "NO "
 msgstr "NON"
 
-#: src/lincity/modules/organic_farm.cpp:200
+#: src/lincity/modules/organic_farm.cpp:233
 msgid "Prod"
 msgstr "Prod"
 
-#: src/lincity/modules/organic_farm.cpp:238
+#: src/lincity/modules/organic_farm.cpp:239
 msgid "Debug info"
 msgstr "Info"
 
-#: src/lincity/modules/organic_farm.cpp:239
-msgid " max with power & water"
+#: src/lincity/modules/organic_farm.cpp:240
+msgid "max with power&water"
 msgstr "max avec ??lec et eau"
 
-#: src/lincity/modules/organic_farm.cpp:240
-msgid " number of tile with water"
-msgstr "nombre de case avec de l'eau"
-
 #: src/lincity/modules/organic_farm.cpp:241
-msgid " current production"
-msgstr "production actuelle"
+msgid "N tiles with water"
+msgstr "N cases avec eau"
 
-#: src/lincity/modules/solar_power.cpp:44
+#: src/lincity/modules/organic_farm.cpp:242
+msgid "Current production"
+msgstr "Production actuelle"
+
+#: src/lincity/modules/solar_power.cpp:46
 msgid "Solar"
 msgstr "Solaire"
 
-#: src/lincity/modules/waterwell.cpp:44
-msgid "Water_well"
-msgstr "Puit"
-
-#: src/lincity/modules/waterwell.cpp:51
-msgid "Drinkable"
-msgstr "Potable"
-
 #: src/lincity-ng/Dialog.cpp:173
 msgid "Launchsite"
 msgstr "Site de lancement"
 
-#: src/lincity-ng/Dialog.cpp:341
-#: src/lincity-ng/Dialog.cpp:342
+#: src/lincity-ng/Dialog.cpp:352
+#: src/lincity-ng/Dialog.cpp:353
 msgid "----- IN TEST MODE -------"
 msgstr "----- EN MODE TEST -------"
 
-#: src/lincity-ng/Dialog.cpp:344
+#: src/lincity-ng/Dialog.cpp:355
 #, c-format
 msgid "Game statistics from LinCity-NG Version %s"
 msgstr "Statistiques de jeu de LinCity-NG Version %s"
 
-#: src/lincity-ng/Dialog.cpp:348
+#: src/lincity-ng/Dialog.cpp:359
 #, c-format
 msgid "Initial loaded scene - %s"
 msgstr "Sc??ne charg??e initialement - %s"
 
-#: src/lincity-ng/Dialog.cpp:353
+#: src/lincity-ng/Dialog.cpp:364
 #, c-format
 msgid "Economy is sustainable"
 msgstr "L'??conomie est durable"
 
-#: src/lincity-ng/Dialog.cpp:357
+#: src/lincity-ng/Dialog.cpp:368
 #, c-format
 msgid "Population  %d  of which  %d  are not housed."
 msgstr "Population  %d  dont  %d  sont sans domicile."
 
-#: src/lincity-ng/Dialog.cpp:362
+#: src/lincity-ng/Dialog.cpp:373
 #, c-format
 msgid "Max population %d  Number evacuated %d Total births %d"
 msgstr "Population Max %d Nombre d'??vacuation %d Naissances totales %d"
 
-#: src/lincity-ng/Dialog.cpp:367
+#: src/lincity-ng/Dialog.cpp:378
 #, c-format
 msgid "Date %s %04d  Money %8d   Tech-level %5.1f (%5.1f)"
 msgstr "Date %s %04d  Argent %8d   Niveau tech %5.1f (%5.1f)"
 
-#: src/lincity-ng/Dialog.cpp:374
+#: src/lincity-ng/Dialog.cpp:385
 #, c-format
 msgid ".Deaths by starvation %7d   History %8.3f"
 msgstr "Morts de la famine    %7d  Histoire %8.1f"
 
-#: src/lincity-ng/Dialog.cpp:379
+#: src/lincity-ng/Dialog.cpp:390
 #, c-format
 msgid "Deaths from pollution %7d   History %8.3f"
 msgstr "Morts de la pollution %7d  Histoire %8.1f"
 
-#: src/lincity-ng/Dialog.cpp:383
+#: src/lincity-ng/Dialog.cpp:394
 #, c-format
 msgid "Years of unemployment %7d   History %8.3f"
 msgstr "Ann??es de ch??mage     %7d  Histoire %8.1f"
 
-#: src/lincity-ng/Dialog.cpp:387
+#: src/lincity-ng/Dialog.cpp:398
 #, c-format
 msgid "Rockets launched %2d  Successful launches %2d"
 msgstr "Lancements de Fus??es %2d  Lancements r??ussis %2d"
 
-#: src/lincity-ng/Dialog.cpp:397
+#: src/lincity-ng/Dialog.cpp:409
 #, c-format
 msgid ".   Residences %4d         Markets %4d            Farms %4d"
-msgstr ""
-".      R??sidences %4d              March??s %4d                Fermes %4d"
+msgstr ".      R??sidences %4d              March??s %4d                Fermes %4d"
 
-#: src/lincity-ng/Dialog.cpp:418
+#: src/lincity-ng/Dialog.cpp:420
 #, c-format
 msgid ".    Monuments %4d         Schools %4d     Universities %4d"
-msgstr ""
-".       Monuments %4d               Ecoles %4d           Universit??s %4d"
+msgstr ".       Monuments %4d               Ecoles %4d           Universit??s %4d"
 
-#: src/lincity-ng/Dialog.cpp:423
+#: src/lincity-ng/Dialog.cpp:425
 #, c-format
 msgid ".Fire stations %4d           Parks %4d    Sports fields %4d"
-msgstr ""
-".        Pompiers %4d                Parcs %4d                Stades %4d"
+msgstr ".        Pompiers %4d                Parcs %4d                Stades %4d"
 
-#: src/lincity-ng/Dialog.cpp:449
+#: src/lincity-ng/Dialog.cpp:430
 #, c-format
 msgid "Health centres %4d            Tips %4d         Shanties %4d"
-msgstr ""
-". Centre de soins %4d            D??charges %4d           Bidonvilles %4d"
+msgstr ". Centre de soins %4d            D??charges %4d           Bidonvilles %4d"
 
-#: src/lincity-ng/Dialog.cpp:433
+#: src/lincity-ng/Dialog.cpp:438
 #, c-format
 msgid ".    Windmills %4d     Coal powers %4d     Solar powers %4d"
-msgstr ""
-".  Moulins ?? vent %4d  Centrales ?? charbon %4d     Centrales solaire %4d"
+msgstr ".  Moulins ?? vent %4d  Centrales ?? charbon %4d     Centrales solaire %4d"
 
-#: src/lincity-ng/Dialog.cpp:439
+#: src/lincity-ng/Dialog.cpp:444
 #, c-format
 msgid ".  Substations %4d     Power lines %4d            Ports %4d"
-msgstr ""
-". Transformateurs %4d   Lignes ??lectriques %4d                 Ports %4d"
+msgstr ". Transformateurs %4d   Lignes ??lectriques %4d                 Ports %4d"
 
-#: src/lincity-ng/Dialog.cpp:408
+#: src/lincity-ng/Dialog.cpp:449
 #, c-format
 msgid ".       Tracks %4d           Roads %4d             Rail %4d"
-msgstr ""
-".          Pistes %4d               Routes %4d                 Rails %4d"
+msgstr ".          Pistes %4d               Routes %4d                 Rails %4d"
 
-#: src/lincity-ng/Dialog.cpp:413
+#: src/lincity-ng/Dialog.cpp:457
 #, c-format
 msgid ".    Potteries %4d     Blacksmiths %4d            Mills %4d"
-msgstr ""
-".        Poteries %4d               Forges %4d             Fabriques %4d"
+msgstr ".        Poteries %4d               Forges %4d             Fabriques %4d"
 
-#: src/lincity-ng/Dialog.cpp:444
+#: src/lincity-ng/Dialog.cpp:462
 #, c-format
 msgid ".   Light inds %4d      Heavy inds %4d        Recyclers %4d"
-msgstr ""
-".   Inds. l??g??res %4d        Inds. lourdes %4d  Centres de recyclage %4d"
+msgstr ".   Inds. l??g??res %4d        Inds. lourdes %4d  Centres de recyclage %4d"
 
-#: src/lincity-ng/Dialog.cpp:428
+#: src/lincity-ng/Dialog.cpp:467
 #, c-format
 msgid ".   Coal mines %4d       Ore mines %4d         Communes %4d"
-msgstr ""
-".Mines de charbon %4d  Carri??re de minerai %4d              Communes %4d"
+msgstr ".Mines de charbon %4d  Carri??re de minerai %4d              Communes %4d"
 
-#: src/lincity-ng/ScreenInterface.cpp:258
+#: src/lincity-ng/ScreenInterface.cpp:264
 msgid "MM"
 msgstr "M."
 
-#: src/lincity-ng/GameView.cpp:1520
-#: src/lincity-ng/GameView.cpp:1551
-#: src/lincity-ng/ScreenInterface.cpp:269
+#: src/lincity-ng/ScreenInterface.cpp:275
+#: src/lincity-ng/GameView.cpp:1609
+#: src/lincity-ng/GameView.cpp:1640
 msgid "$"
 msgstr "???"
 
-#: src/lincity-ng/GameView.cpp:236
+#: src/lincity-ng/GameView.cpp:237
 msgid "Minimap: outline map"
 msgstr "Minicarte : vue d'ensemble"
 
-#: src/lincity-ng/GameView.cpp:239
+#: src/lincity-ng/GameView.cpp:240
 msgid "Minimap: unemployment"
 msgstr "Minicarte : ch??mage"
 
-#: src/lincity-ng/GameView.cpp:242
+#: src/lincity-ng/GameView.cpp:243
 msgid "Minimap: pollution"
 msgstr "Minicarte : pollution"
 
-#: src/lincity-ng/GameView.cpp:245
+#: src/lincity-ng/GameView.cpp:246
 msgid "Minimap: nourishments"
 msgstr "Minicarte : alimentations"
 
-#: src/lincity-ng/GameView.cpp:248
+#: src/lincity-ng/GameView.cpp:249
 msgid "Minimap: power supply"
 msgstr "Minicarte : alimentation d'??nergie"
 
-#: src/lincity-ng/GameView.cpp:251
+#: src/lincity-ng/GameView.cpp:252
 msgid "Minimap: firedepartment cover"
 msgstr "Minicarte : couverture incendie"
 
-#: src/lincity-ng/GameView.cpp:254
+#: src/lincity-ng/GameView.cpp:255
 msgid "Minimap: sport cover"
 msgstr "Minicarte: couverture sportive"
 
-#: src/lincity-ng/GameView.cpp:257
+#: src/lincity-ng/GameView.cpp:258
 msgid "Minimap: medical care"
 msgstr "Minicarte : soin m??dical"
 
-#: src/lincity-ng/GameView.cpp:260
+#: src/lincity-ng/GameView.cpp:261
 msgid "Minimap: coal depots"
 msgstr "Minicarte : d??pots de charbon"
 
-#: src/lincity-ng/GameView.cpp:263
+#: src/lincity-ng/GameView.cpp:264
 msgid "Minimap: traffic density"
 msgstr "Minicarte : densit?? du trafic"
 
-#: src/lincity-ng/GameView.cpp:1515
+#: src/lincity-ng/GameView.cpp:1604
 msgid "Estimated Bulldoze Cost: "
 msgstr "Co??t de d??molition estim?? : "
 
-#: src/lincity-ng/GameView.cpp:1517
+#: src/lincity-ng/GameView.cpp:1606
 msgid "Bulldoze Cost: "
 msgstr "Co??t de d??molition : "
 
-#: src/lincity-ng/GameView.cpp:1522
+#: src/lincity-ng/GameView.cpp:1611
 msgid "n/a"
 msgstr "n/d"
 
-#: src/lincity-ng/GameView.cpp:1540
+#: src/lincity-ng/GameView.cpp:1629
 msgid "Query Tool: Show information about selected building."
-msgstr ""
-"Outil de Requ??te : voir les informations sur le b??timent s??lectionn??."
+msgstr "Outil de Requ??te : voir les informations sur le b??timent s??lectionn??."
 
-#: src/lincity-ng/GameView.cpp:1544
+#: src/lincity-ng/GameView.cpp:1633
 msgid "Bulldozer: remove building -price varies-"
 msgstr "D??molition : supprime les constructions - prix variables -"
 
-#: src/lincity-ng/GameView.cpp:1551
+#: src/lincity-ng/GameView.cpp:1640
 msgid ": Cost to build "
 msgstr ": Co??t de construction "
 
-#: src/lincity-ng/GameView.cpp:1552
+#: src/lincity-ng/GameView.cpp:1641
 msgid ", to bulldoze "
 msgstr ", pour d??truire "
 
-#: src/lincity-ng/GameView.cpp:1552
-#: src/lincity-ng/GameView.cpp:1555
+#: src/lincity-ng/GameView.cpp:1641
+#: src/lincity-ng/GameView.cpp:1644
 msgid "$."
 msgstr "???."
 
-#: src/lincity-ng/GameView.cpp:1554
+#: src/lincity-ng/GameView.cpp:1643
 msgid " To build "
 msgstr " Pour en construire "
 
-#: src/lincity-ng/GameView.cpp:1554
+#: src/lincity-ng/GameView.cpp:1643
 msgid " of them "
 msgstr " cela "
 
-#: src/lincity-ng/GameView.cpp:1555
+#: src/lincity-ng/GameView.cpp:1644
 msgid "will cost about "
 msgstr "co??tera environ "
 
-#: src/lincity-ng/MainMenu.cpp:175
+#: src/lincity-ng/MainMenu.cpp:199
 msgid "empty"
 msgstr "vide"
 
-#: src/lincity-ng/MpsInterface.cpp:224
+#: src/lincity-ng/MpsInterface.cpp:227
 msgid "build something here"
 msgstr "construire quelque chose ici"
 
-#: src/lincity-ng/MpsInterface.cpp:226
+#: src/lincity-ng/MpsInterface.cpp:229
 msgid "no further information available"
 msgstr "aucune autre information disponible"
 
-#: src/lincity-ng/MpsInterface.cpp:378
+#: src/lincity-ng/MpsInterface.cpp:381
 msgid "Coverage"
 msgstr "Couverture"
 
-#: src/lincity-ng/MpsInterface.cpp:383
+#: src/lincity-ng/MpsInterface.cpp:386
 msgid "Health"
 msgstr "Sant??"
 
-#: src/lincity-ng/MpsInterface.cpp:391
+#: src/lincity-ng/MpsInterface.cpp:394
 msgid "clear"
 msgstr "propre"
 
-#: src/lincity-ng/MpsInterface.cpp:395
+#: src/lincity-ng/MpsInterface.cpp:398
 msgid "fair"
 msgstr "juste"
 
-#: src/lincity-ng/MpsInterface.cpp:397
+#: src/lincity-ng/MpsInterface.cpp:400
 msgid "smelly"
 msgstr "odeur"
 
-#: src/lincity-ng/MpsInterface.cpp:399
+#: src/lincity-ng/MpsInterface.cpp:402
 msgid "smokey"
 msgstr "fum??e"
 
-#: src/lincity-ng/MpsInterface.cpp:401
+#: src/lincity-ng/MpsInterface.cpp:404
 msgid "smoggy"
 msgstr "brouillard"
 
-#: src/lincity-ng/MpsInterface.cpp:403
+#: src/lincity-ng/MpsInterface.cpp:406
 msgid "bad"
 msgstr "mauvais"
 
-#: src/lincity-ng/MpsInterface.cpp:405
+#: src/lincity-ng/MpsInterface.cpp:408
 msgid "very bad"
 msgstr "tr??s mauvais"
 
-#: src/lincity-ng/MpsInterface.cpp:407
+#: src/lincity-ng/MpsInterface.cpp:410
 msgid "death!"
 msgstr "mortelle !"
 
-#: src/lincity-ng/MpsInterface.cpp:412
+#: src/lincity-ng/MpsInterface.cpp:415
 msgid "Bulldoze Cost"
 msgstr "Co??t de Destruction"
 
-#: src/lincity-ng/MpsInterface.cpp:418
+#: src/lincity-ng/MpsInterface.cpp:421
 msgid "N/A"
 msgstr "N/D"
 
-#: src/lincity-ng/MpsInterface.cpp:436
+#: src/lincity-ng/MpsInterface.cpp:439
 msgid "Tax Income"
 msgstr "Revenus des Taxes"
 
-#: src/lincity-ng/MpsInterface.cpp:440
+#: src/lincity-ng/MpsInterface.cpp:443
 msgid "Income"
 msgstr "Revenus"
 
-#: src/lincity-ng/MpsInterface.cpp:452
+#: src/lincity-ng/MpsInterface.cpp:455
 msgid "Export"
 msgstr "Export"
 
-#: src/lincity-ng/MpsInterface.cpp:456
+#: src/lincity-ng/MpsInterface.cpp:459
 msgid "Expenses"
 msgstr "D??penses"
 
-#: src/lincity-ng/MpsInterface.cpp:460
+#: src/lincity-ng/MpsInterface.cpp:463
 msgid "Unemp."
 msgstr "Ch??mage"
 
-#: src/lincity-ng/MpsInterface.cpp:464
+#: src/lincity-ng/MpsInterface.cpp:467
 msgid "Transport"
 msgstr "Transport"
 
-#: src/lincity-ng/MpsInterface.cpp:468
+#: src/lincity-ng/MpsInterface.cpp:471
 msgid "Imports"
 msgstr "Imports"
 
-#: src/lincity-ng/MpsInterface.cpp:472
+#: src/lincity-ng/MpsInterface.cpp:475
 msgid "Others"
 msgstr "Autres"
 
-#: src/lincity-ng/MpsInterface.cpp:477
+#: src/lincity-ng/MpsInterface.cpp:480
 msgid "Net"
 msgstr "Net"
 
-#: src/lincity-ng/MpsInterface.cpp:489
+#: src/lincity-ng/MpsInterface.cpp:492
 msgid "Other Costs"
 msgstr "Autres Co??ts"
 
-#: src/lincity-ng/MpsInterface.cpp:494
+#: src/lincity-ng/MpsInterface.cpp:497
 msgid "For year"
 msgstr "Pour l'ann??e"
 
-#: src/lincity-ng/MpsInterface.cpp:498
+#: src/lincity-ng/MpsInterface.cpp:501
 msgid "Interest"
 msgstr "Int??r??ts"
 
-#: src/lincity-ng/MpsInterface.cpp:500
+#: src/lincity-ng/MpsInterface.cpp:503
 msgid "Schools"
 msgstr "Ecoles"
 
-#: src/lincity-ng/MpsInterface.cpp:502
+#: src/lincity-ng/MpsInterface.cpp:505
 msgid "Univers."
 msgstr "Universit??s"
 
-#: src/lincity-ng/MpsInterface.cpp:504
+#: src/lincity-ng/MpsInterface.cpp:507
 msgid "Deaths"
 msgstr "Morts"
 
-#: src/lincity-ng/MpsInterface.cpp:508
+#: src/lincity-ng/MpsInterface.cpp:511
 msgid "Hospital"
 msgstr "H??pital"
 
-#: src/lincity-ng/MpsInterface.cpp:510
+#: src/lincity-ng/MpsInterface.cpp:513
 msgid "Rockets"
 msgstr "Fus??es"
 
-#: src/lincity-ng/MpsInterface.cpp:512
+#: src/lincity-ng/MpsInterface.cpp:515
 msgid "Fire Stn"
 msgstr "Caserne de Pompiers"
 
-#: src/lincity-ng/MpsInterface.cpp:530
+#: src/lincity-ng/MpsInterface.cpp:533
 msgid "Population"
 msgstr "Population"
 
-#: src/lincity-ng/MpsInterface.cpp:533
+#: src/lincity-ng/MpsInterface.cpp:536
 msgid "Housed"
 msgstr "Log??s"
 
-#: src/lincity-ng/MpsInterface.cpp:534
+#: src/lincity-ng/MpsInterface.cpp:537
 msgid "Homeless"
 msgstr "Sans Abri"
 
-#: src/lincity-ng/MpsInterface.cpp:535
+#: src/lincity-ng/MpsInterface.cpp:538
 msgid "Shanties"
 msgstr "Bidonvilles"
 
-#: src/lincity-ng/MpsInterface.cpp:536
+#: src/lincity-ng/MpsInterface.cpp:539
 msgid "Unn Dths"
 msgstr "Morts non naturelles"
 
-#: src/lincity-ng/MpsInterface.cpp:537
+#: src/lincity-ng/MpsInterface.cpp:540
 msgid "Unemployment"
 msgstr "Ch??mage"
 
-#: src/lincity-ng/MpsInterface.cpp:538
+#: src/lincity-ng/MpsInterface.cpp:541
 msgid "Claims"
 msgstr "R??clamations"
 
-#: src/lincity-ng/MpsInterface.cpp:539
-#: src/lincity-ng/MpsInterface.cpp:544
+#: src/lincity-ng/MpsInterface.cpp:542
+#: src/lincity-ng/MpsInterface.cpp:547
 msgid "Rate"
 msgstr "Taux"
 
-#: src/lincity-ng/MpsInterface.cpp:541
+#: src/lincity-ng/MpsInterface.cpp:544
 msgid "Starvation"
 msgstr "Famine"
 
-#: src/lincity-ng/MpsInterface.cpp:542
+#: src/lincity-ng/MpsInterface.cpp:545
 msgid "Cases"
 msgstr "Cas"
 
-#: src/lincity-ng/ButtonPanel.cpp:198
+#: src/lincity-ng/ButtonPanel.cpp:200
 msgid "Query Tool"
 msgstr "Outil de Requ??te"
 
-#: src/lincity-ng/ButtonPanel.cpp:199
+#: src/lincity-ng/ButtonPanel.cpp:201
 msgid "Bulldozer"
 msgstr "D??molition"
 
-#: src/lincity-ng/ButtonPanel.cpp:201
+#: src/lincity-ng/ButtonPanel.cpp:203
 msgid "Residential: 50 denizens, low birthrate, high deathrate"
 msgstr "R??sidences : 50 habitants, faible natalit??, importante mortalit??"
 
-#: src/lincity-ng/ButtonPanel.cpp:202
+#: src/lincity-ng/ButtonPanel.cpp:204
 msgid "Residential: 100 denizens, high birthrate, low deathrate"
 msgstr "R??sidences : 100 habitants, importante natalit??, faible mortalit??"
 
-#: src/lincity-ng/ButtonPanel.cpp:203
+#: src/lincity-ng/ButtonPanel.cpp:205
 msgid "Residential: 200 denizens, high birthrate, high deathrate"
-msgstr ""
-"R??sidences : 200 habitants, importante natalit??, importante mortalit??"
+msgstr "R??sidences : 200 habitants, importante natalit??, importante mortalit??"
 
-#: src/lincity-ng/ButtonPanel.cpp:204
+#: src/lincity-ng/ButtonPanel.cpp:206
 msgid "Residential: 100 denizens, low birthrate, high deathrate"
 msgstr "R??sidences : 100 habitants, faible natalit??, importante mortalit??"
 
-#: src/lincity-ng/ButtonPanel.cpp:205
+#: src/lincity-ng/ButtonPanel.cpp:207
 msgid "Residential: 200 denizens, high birthrate, low deathrate"
 msgstr "R??sidences : 200 habitants, importante natalit??, faible mortalit??"
 
-#: src/lincity-ng/ButtonPanel.cpp:206
+#: src/lincity-ng/ButtonPanel.cpp:208
 msgid "Residential: 400 denizens, high birthrate, high deathrate"
-msgstr ""
-"R??sidences : 400 habitants, importante natalit??, importante mortalit??"
+msgstr "R??sidences : 400 habitants, importante natalit??, importante mortalit??"
 
-#: src/lincity-ng/ButtonPanel.cpp:215
+#: src/lincity-ng/ButtonPanel.cpp:217
 msgid " [Click right for help.]"
 msgstr "[Clic droit pour l'aide.]"
 
-#: src/lincity-ng/ButtonPanel.cpp:243
-#: src/lincity-ng/ButtonPanel.cpp:277
+#: src/lincity-ng/ButtonPanel.cpp:245
+#: src/lincity-ng/ButtonPanel.cpp:288
 #, c-format
 msgid "%s (Techlevel %.1f required.)"
 msgstr "%s (Niveau Tech %.1f n??cessaire)"
 
-#: src/lincity-ng/ButtonPanel.cpp:252
+#: src/lincity-ng/ButtonPanel.cpp:254
 #, c-format
 msgid "%s is disabled (loaded old game)."
 msgstr "%s est d??sactiv?? (chargement d'un ancien jeu)"
 
-#: src/lincity-ng/EconomyGraph.cpp:121
+#: src/lincity-ng/EconomyGraph.cpp:124
 msgid "Mining"
 msgstr "Mines"
 
-#: src/lincity-ng/EconomyGraph.cpp:123
+#: src/lincity-ng/EconomyGraph.cpp:126
 msgid "Trade"
 msgstr "Port"
 
-#: src/lincity-ng/EconomyGraph.cpp:125
+#: src/lincity-ng/EconomyGraph.cpp:128
 msgid "Money"
 msgstr "Argent"
 
-#: src/lincity-ng/EconomyGraph.cpp:127
+#: src/lincity-ng/EconomyGraph.cpp:130
 msgid "Popul."
 msgstr "Popul."
 
-#: src/lincity-ng/EconomyGraph.cpp:129
+#: src/lincity-ng/EconomyGraph.cpp:132
 msgid "Techn."
 msgstr "Techn."
 
-#: src/lincity-ng/EconomyGraph.cpp:134
+#: src/lincity-ng/EconomyGraph.cpp:137
 msgid "Economy Overview:"
 msgstr "Vue d'Ensemble de l'Economie :"
 
-#: src/lincity-ng/EconomyGraph.cpp:137
+#: src/lincity-ng/EconomyGraph.cpp:140
 msgid "Sustainability:"
 msgstr "D??veloppement durable :"
 
-#: src/lincity-ng/EconomyGraph.cpp:140
+#: src/lincity-ng/EconomyGraph.cpp:143
 msgid "Frames per Second:"
 msgstr "Trames par Seconde :"
 
-#: src/lincity-ng/EconomyGraph.cpp:216
+#: src/lincity-ng/EconomyGraph.cpp:219
 msgid "You lose."
 msgstr "Vous avez perdu."
+

Modified: trunk/data/locale/gui/ca.po
===================================================================
--- trunk/data/locale/gui/ca.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/gui/ca.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -5,7 +5,7 @@
 msgstr ""
 "Project-Id-Version: ca\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: Sun Aug  7 13:44:51 2005\n"
+"POT-Creation-Date: Tue Dec  4 01:12:57 2007\n"
 "PO-Revision-Date: 2006-04-10 15:25+0100\n"
 "Last-Translator: Wolfgang Becker <uafr at gmx.de>\n"
 "Language-Team: Catal?? <ca at li.org>\n"
@@ -33,11 +33,11 @@
 "A fire has broken out at a shanty town. The fire is OUT OF CONTROL and may "
 "spread to other areas. "
 msgstr ""
-"Incendi a la gossera shanty town. El foc est??  fore de control i perilla "
-"que s'escampi."
+"Incendi a la gossera shanty town. El foc est??  fore de control i perilla que "
+"s'escampi."
 
-#: data/gui/newgame.xml data/gui/loadgame.xml data/gui/credits.xml
-#: data/gui/savegame.xml
+#: data/gui/credits.xml data/gui/savegame.xml data/gui/newgame.xml
+#: data/gui/loadgame.xml
 msgid "Back"
 msgstr "Enrrera"
 
@@ -65,7 +65,7 @@
 msgid "Bulldozing a shanty town costs a lot of money and may cause a fire."
 msgstr "Enderrocar un shanty town coste molts diners i provoca incendis"
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Buy"
 msgstr "Factura"
 
@@ -73,7 +73,7 @@
 msgid "Choose Scenario"
 msgstr "Tria escenari"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Coal"
 msgstr "Carb??"
 
@@ -133,7 +133,7 @@
 msgid "Fire!"
 msgstr "Foc"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Food"
 msgstr "Aliment"
 
@@ -149,7 +149,7 @@
 msgid "Go back to Main Menu"
 msgstr "Enrrera al men?? principal"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Goods"
 msgstr "Bens"
 
@@ -173,7 +173,7 @@
 msgid "Import/Export available"
 msgstr "Importar/Exportar disponible"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml
+#: data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Jobs"
 msgstr "Treball"
 
@@ -221,30 +221,30 @@
 msgid "Money"
 msgstr "Diners"
 
-#: data/gui/newgame.xml data/gui/mainmenu.xml
+#: data/gui/mainmenu.xml data/gui/newgame.xml
 msgid "New Game"
 msgstr "Nou Joc"
 
-#: data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/ltindustryup.xml data/gui/universityup.xml
-#: data/gui/cricketup.xml data/gui/recycleup.xml data/gui/coalmineup.xml
-#: data/gui/riverup.xml data/gui/parkup.xml data/gui/coalpowerup.xml
-#: data/gui/solarpowerup.xml data/gui/roadup.xml data/gui/potteryup.xml
-#: data/gui/railwayup.xml data/gui/blacksmithup.xml data/gui/mod_wind_up.xml
-#: data/gui/rocketup.xml data/gui/schoolup.xml data/gui/millup.xml
-#: data/gui/import-exportup.xml data/gui/healthup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalmineup.xml
+#: data/gui/coalpowerup.xml data/gui/solarpowerup.xml data/gui/parkup.xml
+#: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/roadup.xml
+#: data/gui/rocketup.xml data/gui/millup.xml data/gui/healthup.xml
+#: data/gui/universityup.xml data/gui/recycleup.xml data/gui/blacksmithup.xml
+#: data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/import-exportup.xml data/gui/mod_wind_up.xml
 msgid "New Invention"
 msgstr "Nova Versi??"
 
-#: data/gui/coal_survey_yn.xml data/gui/bulldoze_monument_yn.xml
-#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_shanty_yn.xml
-#: data/gui/launch_rocket_yn.xml
+#: data/gui/launch_rocket_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_monument_yn.xml data/gui/coal_survey_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml
 msgid "No"
 msgstr "No"
 
+#: data/gui/no-credit-rocket.xml data/gui/no-credit-parkland.xml
 #: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
-#: data/gui/no-credit-recycle.xml data/gui/no-credit-parkland.xml
-#: data/gui/no-credit-rocket.xml
+#: data/gui/no-credit-recycle.xml
 msgid "No Credit Available"
 msgstr "Credits no diponibles"
 
@@ -256,21 +256,20 @@
 msgid "Not Allowed"
 msgstr "No perm??s"
 
-#: data/gui/options.xml data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/fire.xml data/gui/shfire-uc.xml
-#: data/gui/ltindustryup.xml data/gui/launch-evac.xml
-#: data/gui/universityup.xml data/gui/cricketup.xml data/gui/recycleup.xml
-#: data/gui/coalmineup.xml data/gui/riverup.xml data/gui/parkup.xml
-#: data/gui/no-credit-solar-power.xml data/gui/launch-good.xml
-#: data/gui/coalpowerup.xml data/gui/solarpowerup.xml data/gui/roadup.xml
-#: data/gui/no-credit-university.xml data/gui/potteryup.xml
-#: data/gui/no-credit-recycle.xml data/gui/railwayup.xml
-#: data/gui/launch-fail.xml data/gui/nobull-tip.xml data/gui/blacksmithup.xml
-#: data/gui/mod_wind_up.xml data/gui/rocketup.xml data/gui/schoolup.xml
-#: data/gui/millup.xml data/gui/import-exportup.xml
-#: data/gui/no-credit-parkland.xml data/gui/no-credit-rocket.xml
-#: data/gui/healthup.xml data/gui/launch-gone.xml data/gui/shfire-oc.xml
-#: data/gui/sustain.xml data/gui/allgone.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/options.xml data/gui/riverup.xml
+#: data/gui/coalmineup.xml data/gui/coalpowerup.xml data/gui/launch-good.xml
+#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
+#: data/gui/railwayup.xml data/gui/nobull-tip.xml data/gui/sustain.xml
+#: data/gui/roadup.xml data/gui/rocketup.xml data/gui/millup.xml
+#: data/gui/no-credit-rocket.xml data/gui/healthup.xml
+#: data/gui/no-credit-parkland.xml data/gui/shfire-uc.xml data/gui/fire.xml
+#: data/gui/universityup.xml data/gui/launch-evac.xml data/gui/recycleup.xml
+#: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
+#: data/gui/no-credit-recycle.xml data/gui/launch-fail.xml
+#: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/import-exportup.xml data/gui/launch-gone.xml
+#: data/gui/mod_wind_up.xml data/gui/shfire-oc.xml data/gui/warning.xml
 msgid "Ok"
 msgstr "OK"
 
@@ -278,11 +277,11 @@
 msgid "Okay"
 msgstr "D'acord"
 
-#: data/gui/mainmenu.xml data/gui/options.xml
+#: data/gui/options.xml data/gui/mainmenu.xml
 msgid "Options"
 msgstr "Opcions"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Ore"
 msgstr "Coure"
 
@@ -310,7 +309,7 @@
 msgid "Press this button to show statistics"
 msgstr "Prema aquet but?? per veure les estad??stiques"
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Product"
 msgstr "Producte"
 
@@ -375,17 +374,17 @@
 "See the help screen for more information on coal mines and coal surveys."
 msgstr "Per mes informaci?? veure pantalla de ayude mines de Carb?? i Coure"
 
-#: data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/ltindustryup.xml data/gui/universityup.xml
-#: data/gui/cricketup.xml data/gui/recycleup.xml data/gui/riverup.xml
-#: data/gui/parkup.xml data/gui/coalpowerup.xml data/gui/solarpowerup.xml
-#: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/blacksmithup.xml
-#: data/gui/mod_wind_up.xml data/gui/rocketup.xml data/gui/schoolup.xml
-#: data/gui/millup.xml data/gui/healthup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalpowerup.xml
+#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
+#: data/gui/railwayup.xml data/gui/rocketup.xml data/gui/millup.xml
+#: data/gui/healthup.xml data/gui/universityup.xml data/gui/recycleup.xml
+#: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/mod_wind_up.xml
 msgid "See the help screen for more information."
 msgstr "Per mes informaci?? veure pantalla de ayuda"
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Sell"
 msgstr "Ven"
 
@@ -429,7 +428,7 @@
 msgid "Show power supply"
 msgstr "Mostre Suministre d'energia"
 
-#: data/gui/minimap.xml 
+#: data/gui/minimap.xml
 msgid "Show resources."
 msgstr ""
 
@@ -481,7 +480,7 @@
 msgid "Stats"
 msgstr "Estats"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Steel"
 msgstr "Acer"
 
@@ -505,7 +504,7 @@
 msgid "Trade Settings"
 msgstr "Par??metres de comer??"
 
-#: data/gui/creditslist.xml 
+#: data/gui/creditslist.xml
 msgid "Translation"
 msgstr ""
 
@@ -513,13 +512,13 @@
 msgid "University available"
 msgstr "Universitat disponible"
 
-#: data/gui/bulldoze_monument_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_monument_yn.xml
 #: data/gui/bulldoze_shanty_yn.xml
 msgid "Want to bulldoze?"
 msgstr ""
 
-#: data/gui/bulldoze_monument_yn.xml data/gui/bulldoze_river_yn.xml
-#: data/gui/bulldoze_shanty_yn.xml
+#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_monument_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml data/gui/warning.xml
 msgid "Warning"
 msgstr "Perill"
 
@@ -543,9 +542,9 @@
 msgid "Windmills available"
 msgstr "Molins disponibles"
 
-#: data/gui/coal_survey_yn.xml data/gui/bulldoze_monument_yn.xml
-#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_shanty_yn.xml
-#: data/gui/launch_rocket_yn.xml
+#: data/gui/launch_rocket_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_monument_yn.xml data/gui/coal_survey_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml
 msgid "Yes"
 msgstr "Si"
 
@@ -559,8 +558,7 @@
 "continue costing you money to keep the rocket ready. Launch it later by "
 "clicking on the rocket area."
 msgstr ""
-"Pots llansar el cohet ara o mes tard. Si vols continuar costar?? molts "
-"diners."
+"Pots llansar el cohet ara o mes tard. Si vols continuar costar?? molts diners."
 
 #: data/gui/import-exportup.xml
 msgid ""
@@ -614,24 +612,22 @@
 "You have evacuated 1000 people. You might want to reduce the size of your "
 "economy to reflect the reduced population. "
 msgstr ""
-"Has evacuat a 1000 persones. Aquesta reducci?? es reflectar?? en la "
-"econom??a. "
+"Has evacuat a 1000 persones. Aquesta reducci?? es reflectar?? en la econom??a. "
 
 #: data/gui/blacksmithup.xml
 msgid ""
 "You have reached the tech level which enables you to build blacksmiths. "
 "Blacksmiths use jobs and steel to make goods."
 msgstr ""
-"Has arrivat al nivell t??cnic de les fargues. Les fargues necessiten llocs "
-"de treball i acer."
+"Has arrivat al nivell t??cnic de les fargues. Les fargues necessiten llocs de "
+"treball i acer."
 
 #: data/gui/coalpowerup.xml
 msgid ""
 "You have reached the tech level which enables you to build coal fired power "
 "stations."
 msgstr ""
-"Has arrivat al nivell t??cnic  amb edificis crema carb?? a la central "
-"T??rmica."
+"Has arrivat al nivell t??cnic  amb edificis crema carb?? a la central T??rmica."
 
 #: data/gui/firestationup.xml
 msgid ""
@@ -639,9 +635,8 @@
 "Fire stations prevent most fires from starting. If you haven't had any fires "
 "yet, you might not think you need them."
 msgstr ""
-"Has arrivat al nivell t??cnic. Habilita una Estaci?? de Bombers. La Estaci?? "
-"de Bombers  preveu els incendis avans que es produexin i no necesiten "
-"apagarlos."
+"Has arrivat al nivell t??cnic. Habilita una Estaci?? de Bombers. La Estaci?? de "
+"Bombers  preveu els incendis avans que es produexin i no necesiten apagarlos."
 
 #: data/gui/healthup.xml
 msgid ""
@@ -682,8 +677,7 @@
 "You have reached the tech level which enables you to build modern, more "
 "efficient, windmills. "
 msgstr ""
-"Has arrivat a un nou nivell t??nic que et permet construir Molins mes "
-"moderns."
+"Has arrivat a un nou nivell t??nic que et permet construir Molins mes moderns."
 
 #: data/gui/parkup.xml
 msgid ""
@@ -703,8 +697,7 @@
 
 #: data/gui/railwayup.xml
 msgid "You have reached the tech level which enables you to build railways. "
-msgstr ""
-"Has arrivat a un nivell t??cnic que et permet construir v??as f??rreas."
+msgstr "Has arrivat a un nivell t??cnic que et permet construir v??as f??rreas."
 
 #: data/gui/riverup.xml
 msgid "You have reached the tech level which enables you to build rivers. "
@@ -724,9 +717,8 @@
 "pads. Rockets enable you to evacuate your population and is a way to 'win' "
 "the game."
 msgstr ""
-"Has arrivat a un nivell t??cnic que et permet construir Plataformes de "
-"cohets.Els cohets et permeten evacuar la poblaci?? i es un cam?? per guanyar "
-"el joc."
+"Has arrivat a un nivell t??cnic que et permet construir Plataformes de cohets."
+"Els cohets et permeten evacuar la poblaci?? i es un cam?? per guanyar el joc."
 
 #: data/gui/schoolup.xml
 msgid ""
@@ -740,8 +732,7 @@
 msgid ""
 "You have reached the tech level which enables you to build solar power "
 "stations. "
-msgstr ""
-"Has arrivat a un nivell t??nic que et permet construir Centarls Solars."
+msgstr "Has arrivat a un nivell t??nic que et permet construir Centarls Solars."
 
 #: data/gui/universityup.xml
 msgid ""
@@ -758,8 +749,7 @@
 #: data/gui/coalmineup.xml
 msgid ""
 "You have reached the tech level which enables you to dig deep coal mines."
-msgstr ""
-"Has arrivat a un nivell t??nic que et permet construir mines de carb??."
+msgstr "Has arrivat a un nivell t??nic que et permet construir mines de carb??."
 
 #: data/gui/recycleup.xml
 msgid ""
@@ -769,7 +759,7 @@
 "Has arrivat a un nivell t??nic que et permet construir Centres de Reciclat. "
 "Els centres de reciclat reutilitzen els articles bells."
 
-#: data/gui/launch-gone.xml data/gui/sustain.xml
+#: data/gui/sustain.xml data/gui/launch-gone.xml
 msgid "You have won the game."
 msgstr "Has guanyat el Joc."
 

Modified: trunk/data/locale/gui/cs.po
===================================================================
--- trunk/data/locale/gui/cs.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/gui/cs.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -7,7 +7,7 @@
 msgstr ""
 "Project-Id-Version: Lincity-ng\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: Sat Jan 27 22:03:14 2007\n"
+"POT-Creation-Date: Tue Dec  4 01:12:57 2007\n"
 "PO-Revision-Date: 2006-09-04 07:22+0200\n"
 "Last-Translator: Ondrej Novy <onovy at nomi.cz>\n"
 "Language-Team: Czech <cs at li.org>\n"
@@ -35,8 +35,8 @@
 "spread to other areas. "
 msgstr ""
 
-#: data/gui/newgame.xml data/gui/loadgame.xml data/gui/credits.xml
-#: data/gui/savegame.xml
+#: data/gui/credits.xml data/gui/savegame.xml data/gui/newgame.xml
+#: data/gui/loadgame.xml
 msgid "Back"
 msgstr "Zp??t"
 
@@ -64,7 +64,7 @@
 msgid "Bulldozing a shanty town costs a lot of money and may cause a fire."
 msgstr ""
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Buy"
 msgstr "N??kup"
 
@@ -72,7 +72,7 @@
 msgid "Choose Scenario"
 msgstr "Vybrat sc??n????"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Coal"
 msgstr "Uhl??"
 
@@ -132,7 +132,7 @@
 msgid "Fire!"
 msgstr "Po????r!"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Food"
 msgstr "J??dlo"
 
@@ -148,7 +148,7 @@
 msgid "Go back to Main Menu"
 msgstr "N??vrat do hlavn??ho menu"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Goods"
 msgstr "Zbo????"
 
@@ -172,7 +172,7 @@
 msgid "Import/Export available"
 msgstr "Dovoz/v??voz je nyn?? dostupn??"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml
+#: data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Jobs"
 msgstr "Pr??ce"
 
@@ -220,30 +220,30 @@
 msgid "Money"
 msgstr "Pen??ze"
 
-#: data/gui/newgame.xml data/gui/mainmenu.xml
+#: data/gui/mainmenu.xml data/gui/newgame.xml
 msgid "New Game"
 msgstr "Nov?? hra"
 
-#: data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/ltindustryup.xml data/gui/universityup.xml
-#: data/gui/cricketup.xml data/gui/recycleup.xml data/gui/coalmineup.xml
-#: data/gui/riverup.xml data/gui/parkup.xml data/gui/coalpowerup.xml
-#: data/gui/solarpowerup.xml data/gui/roadup.xml data/gui/potteryup.xml
-#: data/gui/railwayup.xml data/gui/blacksmithup.xml data/gui/mod_wind_up.xml
-#: data/gui/rocketup.xml data/gui/schoolup.xml data/gui/millup.xml
-#: data/gui/import-exportup.xml data/gui/healthup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalmineup.xml
+#: data/gui/coalpowerup.xml data/gui/solarpowerup.xml data/gui/parkup.xml
+#: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/roadup.xml
+#: data/gui/rocketup.xml data/gui/millup.xml data/gui/healthup.xml
+#: data/gui/universityup.xml data/gui/recycleup.xml data/gui/blacksmithup.xml
+#: data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/import-exportup.xml data/gui/mod_wind_up.xml
 msgid "New Invention"
 msgstr "Nov?? vyn??lez"
 
-#: data/gui/coal_survey_yn.xml data/gui/bulldoze_monument_yn.xml
-#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_shanty_yn.xml
-#: data/gui/launch_rocket_yn.xml
+#: data/gui/launch_rocket_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_monument_yn.xml data/gui/coal_survey_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml
 msgid "No"
 msgstr "Ne"
 
+#: data/gui/no-credit-rocket.xml data/gui/no-credit-parkland.xml
 #: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
-#: data/gui/no-credit-recycle.xml data/gui/no-credit-parkland.xml
-#: data/gui/no-credit-rocket.xml
+#: data/gui/no-credit-recycle.xml
 msgid "No Credit Available"
 msgstr ""
 
@@ -255,21 +255,20 @@
 msgid "Not Allowed"
 msgstr "Nepovoleno"
 
-#: data/gui/options.xml data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/fire.xml data/gui/shfire-uc.xml
-#: data/gui/ltindustryup.xml data/gui/launch-evac.xml
-#: data/gui/universityup.xml data/gui/cricketup.xml data/gui/recycleup.xml
-#: data/gui/coalmineup.xml data/gui/riverup.xml data/gui/parkup.xml
-#: data/gui/no-credit-solar-power.xml data/gui/launch-good.xml
-#: data/gui/coalpowerup.xml data/gui/solarpowerup.xml data/gui/roadup.xml
-#: data/gui/no-credit-university.xml data/gui/potteryup.xml
-#: data/gui/no-credit-recycle.xml data/gui/railwayup.xml
-#: data/gui/launch-fail.xml data/gui/nobull-tip.xml data/gui/blacksmithup.xml
-#: data/gui/mod_wind_up.xml data/gui/rocketup.xml data/gui/schoolup.xml
-#: data/gui/millup.xml data/gui/import-exportup.xml
-#: data/gui/no-credit-parkland.xml data/gui/no-credit-rocket.xml
-#: data/gui/healthup.xml data/gui/launch-gone.xml data/gui/shfire-oc.xml
-#: data/gui/sustain.xml data/gui/allgone.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/options.xml data/gui/riverup.xml
+#: data/gui/coalmineup.xml data/gui/coalpowerup.xml data/gui/launch-good.xml
+#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
+#: data/gui/railwayup.xml data/gui/nobull-tip.xml data/gui/sustain.xml
+#: data/gui/roadup.xml data/gui/rocketup.xml data/gui/millup.xml
+#: data/gui/no-credit-rocket.xml data/gui/healthup.xml
+#: data/gui/no-credit-parkland.xml data/gui/shfire-uc.xml data/gui/fire.xml
+#: data/gui/universityup.xml data/gui/launch-evac.xml data/gui/recycleup.xml
+#: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
+#: data/gui/no-credit-recycle.xml data/gui/launch-fail.xml
+#: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/import-exportup.xml data/gui/launch-gone.xml
+#: data/gui/mod_wind_up.xml data/gui/shfire-oc.xml data/gui/warning.xml
 msgid "Ok"
 msgstr "Budi??"
 
@@ -277,11 +276,11 @@
 msgid "Okay"
 msgstr "Budi??"
 
-#: data/gui/mainmenu.xml data/gui/options.xml
+#: data/gui/options.xml data/gui/mainmenu.xml
 msgid "Options"
 msgstr "Mo??nosti"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Ore"
 msgstr "Ruda"
 
@@ -309,7 +308,7 @@
 msgid "Press this button to show statistics"
 msgstr "Stiskn??te toto tla????tko pro zobrazen?? statistik"
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Product"
 msgstr "Produkt"
 
@@ -372,20 +371,19 @@
 #: data/gui/coalmineup.xml
 msgid ""
 "See the help screen for more information on coal mines and coal surveys."
-msgstr ""
-"Vizte n??pov??du pro v??ce informac?? o uheln??ch dolech a pr??zkumech."
+msgstr "Vizte n??pov??du pro v??ce informac?? o uheln??ch dolech a pr??zkumech."
 
-#: data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/ltindustryup.xml data/gui/universityup.xml
-#: data/gui/cricketup.xml data/gui/recycleup.xml data/gui/riverup.xml
-#: data/gui/parkup.xml data/gui/coalpowerup.xml data/gui/solarpowerup.xml
-#: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/blacksmithup.xml
-#: data/gui/mod_wind_up.xml data/gui/rocketup.xml data/gui/schoolup.xml
-#: data/gui/millup.xml data/gui/healthup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalpowerup.xml
+#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
+#: data/gui/railwayup.xml data/gui/rocketup.xml data/gui/millup.xml
+#: data/gui/healthup.xml data/gui/universityup.xml data/gui/recycleup.xml
+#: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/mod_wind_up.xml
 msgid "See the help screen for more information."
 msgstr "Pro z??sk??n?? v??ce informac?? se pod??vejte do n??pov??dy."
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Sell"
 msgstr "Prodej"
 
@@ -482,7 +480,7 @@
 msgid "Stats"
 msgstr "Stat."
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Steel"
 msgstr "Ocel"
 
@@ -514,13 +512,13 @@
 msgid "University available"
 msgstr "Universita je nyn?? dostupn??"
 
-#: data/gui/bulldoze_monument_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_monument_yn.xml
 #: data/gui/bulldoze_shanty_yn.xml
 msgid "Want to bulldoze?"
 msgstr "Opravdu zbourat?"
 
-#: data/gui/bulldoze_monument_yn.xml data/gui/bulldoze_river_yn.xml
-#: data/gui/bulldoze_shanty_yn.xml
+#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_monument_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml data/gui/warning.xml
 msgid "Warning"
 msgstr "Varov??n??"
 
@@ -544,9 +542,9 @@
 msgid "Windmills available"
 msgstr "V??trn?? ml??ny jsou nyn?? dostupn??"
 
-#: data/gui/coal_survey_yn.xml data/gui/bulldoze_monument_yn.xml
-#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_shanty_yn.xml
-#: data/gui/launch_rocket_yn.xml
+#: data/gui/launch_rocket_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_monument_yn.xml data/gui/coal_survey_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml
 msgid "Yes"
 msgstr "Ano"
 
@@ -560,9 +558,8 @@
 "continue costing you money to keep the rocket ready. Launch it later by "
 "clicking on the rocket area."
 msgstr ""
-"Raketu m????ete odp??lit ihned, nebo chv??li po??kat. ??ek??n?? ale bude "
-"st??t pen??za za ??dr??bu rakety. Pro pozd??j???? odpal klikn??te na pole "
-"rakety."
+"Raketu m????ete odp??lit ihned, nebo chv??li po??kat. ??ek??n?? ale bude st??t pen??za "
+"za ??dr??bu rakety. Pro pozd??j???? odpal klikn??te na pole rakety."
 
 #: data/gui/import-exportup.xml
 msgid ""
@@ -722,7 +719,7 @@
 "Recycling centres recycle used goods back into ore. "
 msgstr ""
 
-#: data/gui/launch-gone.xml data/gui/sustain.xml
+#: data/gui/sustain.xml data/gui/launch-gone.xml
 msgid "You have won the game."
 msgstr ""
 

Modified: trunk/data/locale/gui/de.po
===================================================================
--- trunk/data/locale/gui/de.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/gui/de.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -7,7 +7,8 @@
 msgid ""
 msgstr ""
 "Project-Id-Version: LinCity NG\n"
-"POT-Creation-Date: Sat Jan 27 22:03:14 2007\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: Tue Dec  4 01:12:57 2007\n"
 "PO-Revision-Date: 2007-08-13 19:49+0100\n"
 "Last-Translator: Wolfgang Becker <uafr at gmx.de>\n"
 "Language-Team: German\n"
@@ -40,8 +41,8 @@
 "In einer Barackensiedlung ist ein Feuer ausgebrochen. Das Feuer ist AUSSER "
 "KONTROLLE und k??nnte sich in weitere Gebiete ausbreiten."
 
-#: data/gui/newgame.xml data/gui/loadgame.xml data/gui/credits.xml
-#: data/gui/savegame.xml
+#: data/gui/credits.xml data/gui/savegame.xml data/gui/newgame.xml
+#: data/gui/loadgame.xml
 msgid "Back"
 msgstr "Zur??ck"
 
@@ -70,7 +71,7 @@
 msgstr ""
 "Barackensiedlungen abreisen ist sehr teuer und kann Br??nde verursachen."
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Buy"
 msgstr "Kaufen"
 
@@ -78,7 +79,7 @@
 msgid "Choose Scenario"
 msgstr "Szenario Ausw??hlen"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Coal"
 msgstr "Kohle"
 
@@ -138,7 +139,7 @@
 msgid "Fire!"
 msgstr "Feuer!"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Food"
 msgstr "Nahrung"
 
@@ -154,7 +155,7 @@
 msgid "Go back to Main Menu"
 msgstr "zur??ck zum Hauptmen??"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Goods"
 msgstr "Waren"
 
@@ -178,7 +179,7 @@
 msgid "Import/Export available"
 msgstr "Handelsh??fen verf??gbar"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml
+#: data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Jobs"
 msgstr "Arbeitspl??tze"
 
@@ -226,11 +227,11 @@
 msgid "Money"
 msgstr "Verm??gen"
 
-#: data/gui/newgame.xml data/gui/mainmenu.xml
+#: data/gui/mainmenu.xml data/gui/newgame.xml
 msgid "New Game"
 msgstr "Neues Spiel"
 
-#: data/gui/hvindustryup.xml data/gui/windmillup.xml data/gui/ltindustryup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
 #: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalmineup.xml
 #: data/gui/coalpowerup.xml data/gui/solarpowerup.xml data/gui/parkup.xml
 #: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/roadup.xml
@@ -257,24 +258,24 @@
 msgid "Nobody Home"
 msgstr "Niemand zu Hause"
 
-#: data/gui/nobull-tip.xml data/gui/warning.xml
+#: data/gui/nobull-tip.xml
 msgid "Not Allowed"
 msgstr "Nicht zul??ssig"
 
-#: data/gui/hvindustryup.xml data/gui/windmillup.xml data/gui/ltindustryup.xml
-#: data/gui/cricketup.xml data/gui/fire.xml data/gui/options.xml
-#: data/gui/riverup.xml data/gui/coalmineup.xml data/gui/coalpowerup.xml
-#: data/gui/launch-good.xml data/gui/solarpowerup.xml data/gui/parkup.xml
-#: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/nobull-tip.xml
-#: data/gui/sustain.xml data/gui/roadup.xml data/gui/rocketup.xml
-#: data/gui/millup.xml data/gui/no-credit-rocket.xml data/gui/healthup.xml
-#: data/gui/no-credit-parkland.xml data/gui/shfire-uc.xml
-#: data/gui/launch-evac.xml data/gui/universityup.xml data/gui/recycleup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/options.xml data/gui/riverup.xml
+#: data/gui/coalmineup.xml data/gui/coalpowerup.xml data/gui/launch-good.xml
+#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
+#: data/gui/railwayup.xml data/gui/nobull-tip.xml data/gui/sustain.xml
+#: data/gui/roadup.xml data/gui/rocketup.xml data/gui/millup.xml
+#: data/gui/no-credit-rocket.xml data/gui/healthup.xml
+#: data/gui/no-credit-parkland.xml data/gui/shfire-uc.xml data/gui/fire.xml
+#: data/gui/universityup.xml data/gui/launch-evac.xml data/gui/recycleup.xml
 #: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
 #: data/gui/no-credit-recycle.xml data/gui/launch-fail.xml
 #: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
 #: data/gui/import-exportup.xml data/gui/launch-gone.xml
-#: data/gui/mod_wind_up.xml data/gui/warning.xml data/gui/shfire-oc.xml
+#: data/gui/mod_wind_up.xml data/gui/shfire-oc.xml data/gui/warning.xml
 msgid "Ok"
 msgstr "OK"
 
@@ -282,11 +283,11 @@
 msgid "Okay"
 msgstr "Okay"
 
-#: data/gui/mainmenu.xml data/gui/options.xml
+#: data/gui/options.xml data/gui/mainmenu.xml
 msgid "Options"
 msgstr "Einstellungen"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Ore"
 msgstr "Erz"
 
@@ -314,7 +315,7 @@
 msgid "Press this button to show statistics"
 msgstr "Dr??cken sie diesen Knopf um Statistiken anzuzeigen"
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Product"
 msgstr "Produkt"
 
@@ -381,7 +382,7 @@
 "Sehen Sie in der Hilfe nach, um mehr Informationen ??ber Kohlebergwerke und "
 "Prospektoren zu erhalten."
 
-#: data/gui/hvindustryup.xml data/gui/windmillup.xml data/gui/ltindustryup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
 #: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalpowerup.xml
 #: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
 #: data/gui/railwayup.xml data/gui/rocketup.xml data/gui/millup.xml
@@ -391,7 +392,7 @@
 msgid "See the help screen for more information."
 msgstr "Siehe Hilfe f??r mehr Informationen."
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Sell"
 msgstr "Verkaufen"
 
@@ -489,7 +490,7 @@
 msgid "Stats"
 msgstr "Stat."
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Steel"
 msgstr "Stahl"
 
@@ -504,8 +505,8 @@
 #: data/gui/coal_survey_yn.xml
 msgid "This will cost you 1 million once. After that it is free to call again."
 msgstr ""
-"Hierf??r fallen einmalige Kosten von einer Millionen an. Weitere Aufrufe "
-"sind kostenlos."
+"Hierf??r fallen einmalige Kosten von einer Millionen an. Weitere Aufrufe sind "
+"kostenlos."
 
 #: data/gui/launch-gone.xml
 msgid "Total Evacuation Complete."
@@ -635,8 +636,8 @@
 "Blacksmiths use jobs and steel to make goods."
 msgstr ""
 "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Schmieden zu errichten. Schmieden ben??tigen Arbeitskr??fte und Stahl um "
-"G??ter herzustellen."
+"Schmieden zu errichten. Schmieden ben??tigen Arbeitskr??fte und Stahl um G??ter "
+"herzustellen."
 
 #: data/gui/coalpowerup.xml
 msgid ""
@@ -654,8 +655,8 @@
 msgstr ""
 "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
 "Feuerwachen zu errichten. Feuerwachen verhindern den Ausbruch der meisten "
-"Br??nde. Sollten sie bisher keine Br??nde gehabt haben k??nnten sie denken, "
-"sie brauchen keine Feuerwachen."
+"Br??nde. Sollten sie bisher keine Br??nde gehabt haben k??nnten sie denken, sie "
+"brauchen keine Feuerwachen."
 
 #: data/gui/healthup.xml
 msgid ""
@@ -664,8 +665,8 @@
 "overall productivity."
 msgstr ""
 "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Krakenh??user zu errichten. Krankenh??user reduzieren die Zahl der Toten "
-"durch Umweltverschmutzung und erh??hen die allgemeine Produktivit??t."
+"Krakenh??user zu errichten. Krankenh??user reduzieren die Zahl der Toten durch "
+"Umweltverschmutzung und erh??hen die allgemeine Produktivit??t."
 
 #: data/gui/hvindustryup.xml
 msgid ""
@@ -689,8 +690,8 @@
 "jobs and food to make goods. Watch out, they can use a lot of food! "
 msgstr ""
 "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Spinnereien zu errichten. Spinnereien ben??tigen Arbeitskr??fte und Nahrung "
-"um G??ter herzustellen. Vorsicht, sie k??nnen sehr viel Nahrung verbrauchen."
+"Spinnereien zu errichten. Spinnereien ben??tigen Arbeitskr??fte und Nahrung um "
+"G??ter herzustellen. Vorsicht, sie k??nnen sehr viel Nahrung verbrauchen."
 
 #: data/gui/mod_wind_up.xml
 msgid ""
@@ -715,8 +716,8 @@
 "Potteries use jobs and ore to make goods. (You need ore mines to get ore) "
 msgstr ""
 "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"T??pfereien zu errichten. T??pfereien ben??tigen Arbeitskr??fte und Erz um "
-"G??ter herzustellen. (Sie ben??tigen Erzgruben um zu Erz zu geleangen.)"
+"T??pfereien zu errichten. T??pfereien ben??tigen Arbeitskr??fte und Erz um G??ter "
+"herzustellen. (Sie ben??tigen Erzgruben um zu Erz zu geleangen.)"
 
 #: data/gui/railwayup.xml
 msgid "You have reached the tech level which enables you to build railways. "
@@ -754,8 +755,8 @@
 "use jobs and goods to increase tech level. "
 msgstr ""
 "Sie haben ein Technologieniveau erreicht, auf dem sie in der Lage sind, "
-"Schulen zu errichten. Schulen ben??tigen Arbeitskr??fte und G??ter um G??ter "
-"das Technologieniveau zu erh??hen."
+"Schulen zu errichten. Schulen ben??tigen Arbeitskr??fte und G??ter um G??ter das "
+"Technologieniveau zu erh??hen."
 
 #: data/gui/solarpowerup.xml
 msgid ""
@@ -820,15 +821,15 @@
 "technology for evacuation. You must launch five more unmanned rockets to "
 "restore confidence."
 msgstr ""
-"Iher Rakete ist kurz nach dem Start abgest??rzt. Die Leute trauen der "
-"Technik die Evakuierung nicht mehr zu. Sie m??ssen f??nf weitere unbemannte "
-"Raketen starten um ihr Vertrauen zur??ckzugewinnen."
+"Iher Rakete ist kurz nach dem Start abgest??rzt. Die Leute trauen der Technik "
+"die Evakuierung nicht mehr zu. Sie m??ssen f??nf weitere unbemannte Raketen "
+"starten um ihr Vertrauen zur??ckzugewinnen."
 
 #: data/gui/minimap.xml
 msgid "[+] Zoom in view so that less buildings but more details are visible"
 msgstr ""
-"[+] Ansicht vergr????ern, so da?? weniger Geb??ude aber mehr Details "
-"sichtbar sind."
+"[+] Ansicht vergr????ern, so da?? weniger Geb??ude aber mehr Details sichtbar "
+"sind."
 
 #: data/gui/minimap.xml
 msgid "[-] Zoom out"

Modified: trunk/data/locale/gui/es.po
===================================================================
--- trunk/data/locale/gui/es.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/gui/es.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -8,7 +8,7 @@
 msgstr ""
 "Project-Id-Version: gui.es\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: Sat Jan 27 22:03:14 2007\n"
+"POT-Creation-Date: Tue Dec  4 01:12:57 2007\n"
 "PO-Revision-Date: 2006-04-10 15:29+0100\n"
 "Last-Translator: Wolfgang Becker <uafr at gmx.de>\n"
 "Language-Team: Espa??ol <traductores at es.gnome.org>\n"
@@ -42,8 +42,8 @@
 "Se ha iniciado un fuego en un barrio de chabolas. El fuego est?? fuera de "
 "control y podr??a extenderse a otros ??reas."
 
-#: data/gui/newgame.xml data/gui/loadgame.xml data/gui/credits.xml
-#: data/gui/savegame.xml
+#: data/gui/credits.xml data/gui/savegame.xml data/gui/newgame.xml
+#: data/gui/loadgame.xml
 msgid "Back"
 msgstr "Atr??s"
 
@@ -72,7 +72,7 @@
 msgstr ""
 "Derribar un barrio de chabolas cuesta mucho dinero y puede iniciar un fuego."
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Buy"
 msgstr "Comprar"
 
@@ -80,7 +80,7 @@
 msgid "Choose Scenario"
 msgstr "Escoge un escenario"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Coal"
 msgstr "Carb??n"
 
@@ -140,7 +140,7 @@
 msgid "Fire!"
 msgstr "??Fuego!"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Food"
 msgstr "Alimentos"
 
@@ -156,7 +156,7 @@
 msgid "Go back to Main Menu"
 msgstr ""
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Goods"
 msgstr "Mercanc??as"
 
@@ -180,7 +180,7 @@
 msgid "Import/Export available"
 msgstr "Importaci??n/exportaci??n disponible"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml
+#: data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Jobs"
 msgstr "Empleos"
 
@@ -228,30 +228,30 @@
 msgid "Money"
 msgstr "Dinero"
 
-#: data/gui/newgame.xml data/gui/mainmenu.xml
+#: data/gui/mainmenu.xml data/gui/newgame.xml
 msgid "New Game"
 msgstr "Juego nuevo"
 
-#: data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/ltindustryup.xml data/gui/universityup.xml
-#: data/gui/cricketup.xml data/gui/recycleup.xml data/gui/coalmineup.xml
-#: data/gui/riverup.xml data/gui/parkup.xml data/gui/coalpowerup.xml
-#: data/gui/solarpowerup.xml data/gui/roadup.xml data/gui/potteryup.xml
-#: data/gui/railwayup.xml data/gui/blacksmithup.xml data/gui/mod_wind_up.xml
-#: data/gui/rocketup.xml data/gui/schoolup.xml data/gui/millup.xml
-#: data/gui/import-exportup.xml data/gui/healthup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalmineup.xml
+#: data/gui/coalpowerup.xml data/gui/solarpowerup.xml data/gui/parkup.xml
+#: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/roadup.xml
+#: data/gui/rocketup.xml data/gui/millup.xml data/gui/healthup.xml
+#: data/gui/universityup.xml data/gui/recycleup.xml data/gui/blacksmithup.xml
+#: data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/import-exportup.xml data/gui/mod_wind_up.xml
 msgid "New Invention"
 msgstr "Nuevo invento"
 
-#: data/gui/coal_survey_yn.xml data/gui/bulldoze_monument_yn.xml
-#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_shanty_yn.xml
-#: data/gui/launch_rocket_yn.xml
+#: data/gui/launch_rocket_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_monument_yn.xml data/gui/coal_survey_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml
 msgid "No"
 msgstr "No"
 
+#: data/gui/no-credit-rocket.xml data/gui/no-credit-parkland.xml
 #: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
-#: data/gui/no-credit-recycle.xml data/gui/no-credit-parkland.xml
-#: data/gui/no-credit-rocket.xml
+#: data/gui/no-credit-recycle.xml
 msgid "No Credit Available"
 msgstr "No dispones de cr??dito suficiente"
 
@@ -263,21 +263,20 @@
 msgid "Not Allowed"
 msgstr "No est?? permitido"
 
-#: data/gui/options.xml data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/fire.xml data/gui/shfire-uc.xml
-#: data/gui/ltindustryup.xml data/gui/launch-evac.xml
-#: data/gui/universityup.xml data/gui/cricketup.xml data/gui/recycleup.xml
-#: data/gui/coalmineup.xml data/gui/riverup.xml data/gui/parkup.xml
-#: data/gui/no-credit-solar-power.xml data/gui/launch-good.xml
-#: data/gui/coalpowerup.xml data/gui/solarpowerup.xml data/gui/roadup.xml
-#: data/gui/no-credit-university.xml data/gui/potteryup.xml
-#: data/gui/no-credit-recycle.xml data/gui/railwayup.xml
-#: data/gui/launch-fail.xml data/gui/nobull-tip.xml data/gui/blacksmithup.xml
-#: data/gui/mod_wind_up.xml data/gui/rocketup.xml data/gui/schoolup.xml
-#: data/gui/millup.xml data/gui/import-exportup.xml
-#: data/gui/no-credit-parkland.xml data/gui/no-credit-rocket.xml
-#: data/gui/healthup.xml data/gui/launch-gone.xml data/gui/shfire-oc.xml
-#: data/gui/sustain.xml data/gui/allgone.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/options.xml data/gui/riverup.xml
+#: data/gui/coalmineup.xml data/gui/coalpowerup.xml data/gui/launch-good.xml
+#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
+#: data/gui/railwayup.xml data/gui/nobull-tip.xml data/gui/sustain.xml
+#: data/gui/roadup.xml data/gui/rocketup.xml data/gui/millup.xml
+#: data/gui/no-credit-rocket.xml data/gui/healthup.xml
+#: data/gui/no-credit-parkland.xml data/gui/shfire-uc.xml data/gui/fire.xml
+#: data/gui/universityup.xml data/gui/launch-evac.xml data/gui/recycleup.xml
+#: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
+#: data/gui/no-credit-recycle.xml data/gui/launch-fail.xml
+#: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/import-exportup.xml data/gui/launch-gone.xml
+#: data/gui/mod_wind_up.xml data/gui/shfire-oc.xml data/gui/warning.xml
 msgid "Ok"
 msgstr "Hecho"
 
@@ -285,11 +284,11 @@
 msgid "Okay"
 msgstr "Hecho"
 
-#: data/gui/mainmenu.xml data/gui/options.xml
+#: data/gui/options.xml data/gui/mainmenu.xml
 msgid "Options"
 msgstr "Opciones"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Ore"
 msgstr "Mineral"
 
@@ -317,7 +316,7 @@
 msgid "Press this button to show statistics"
 msgstr "Presiona este bot??n para mostrar las estad??sticas"
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Product"
 msgstr "Producto"
 
@@ -381,20 +380,20 @@
 msgid ""
 "See the help screen for more information on coal mines and coal surveys."
 msgstr ""
-"Para obtener m??s informaci??n sobre minas de carb??n y prospecciones mira "
-"la pantalla de ayuda."
+"Para obtener m??s informaci??n sobre minas de carb??n y prospecciones mira la "
+"pantalla de ayuda."
 
-#: data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/ltindustryup.xml data/gui/universityup.xml
-#: data/gui/cricketup.xml data/gui/recycleup.xml data/gui/riverup.xml
-#: data/gui/parkup.xml data/gui/coalpowerup.xml data/gui/solarpowerup.xml
-#: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/blacksmithup.xml
-#: data/gui/mod_wind_up.xml data/gui/rocketup.xml data/gui/schoolup.xml
-#: data/gui/millup.xml data/gui/healthup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalpowerup.xml
+#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
+#: data/gui/railwayup.xml data/gui/rocketup.xml data/gui/millup.xml
+#: data/gui/healthup.xml data/gui/universityup.xml data/gui/recycleup.xml
+#: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/mod_wind_up.xml
 msgid "See the help screen for more information."
 msgstr "Para obtener m??s informaci??n mira la pantalla de ayuda."
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Sell"
 msgstr "Vender"
 
@@ -492,7 +491,7 @@
 msgid "Stats"
 msgstr ""
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Steel"
 msgstr "Acero"
 
@@ -526,13 +525,13 @@
 msgid "University available"
 msgstr "Universidades disponibles"
 
-#: data/gui/bulldoze_monument_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_monument_yn.xml
 #: data/gui/bulldoze_shanty_yn.xml
 msgid "Want to bulldoze?"
 msgstr "??Deseas derribarlo?"
 
-#: data/gui/bulldoze_monument_yn.xml data/gui/bulldoze_river_yn.xml
-#: data/gui/bulldoze_shanty_yn.xml
+#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_monument_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml data/gui/warning.xml
 msgid "Warning"
 msgstr "Advertencia"
 
@@ -556,9 +555,9 @@
 msgid "Windmills available"
 msgstr "Molinos de viento disponibles"
 
-#: data/gui/coal_survey_yn.xml data/gui/bulldoze_monument_yn.xml
-#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_shanty_yn.xml
-#: data/gui/launch_rocket_yn.xml
+#: data/gui/launch_rocket_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_monument_yn.xml data/gui/coal_survey_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml
 msgid "Yes"
 msgstr "S??"
 
@@ -629,8 +628,8 @@
 "You have evacuated 1000 people. You might want to reduce the size of your "
 "economy to reflect the reduced population. "
 msgstr ""
-"Has evacuado a 1000 personas. Quiz?? quieras reducir el tama??o de tu "
-"econom??a para adecuarla a la nueva poblaci??n."
+"Has evacuado a 1000 personas. Quiz?? quieras reducir el tama??o de tu econom??a "
+"para adecuarla a la nueva poblaci??n."
 
 #: data/gui/blacksmithup.xml
 msgid ""
@@ -666,8 +665,8 @@
 "overall productivity."
 msgstr ""
 "Has alcanzado un nivel tecnol??gico que te permite construir hospitales. Los "
-"hospitales reducen el n??mero de muertos por poluci??n y tambi??n "
-"incrementan la productividad general."
+"hospitales reducen el n??mero de muertos por poluci??n y tambi??n incrementan "
+"la productividad general."
 
 #: data/gui/hvindustryup.xml
 msgid ""
@@ -715,9 +714,9 @@
 "You have reached the tech level which enables you to build potteries. "
 "Potteries use jobs and ore to make goods. (You need ore mines to get ore) "
 msgstr ""
-"Has alcanzado un nivel tecnol??gico que te permite construir alfarer??as. "
-"Las alfarer??as usan empleos y hierro para fabricar mercanc??as. (Necesitas "
-"minas de mineral para obtener mineral)."
+"Has alcanzado un nivel tecnol??gico que te permite construir alfarer??as. Las "
+"alfarer??as usan empleos y hierro para fabricar mercanc??as. (Necesitas minas "
+"de mineral para obtener mineral)."
 
 #: data/gui/railwayup.xml
 msgid "You have reached the tech level which enables you to build railways. "
@@ -733,8 +732,8 @@
 "You have reached the tech level which enables you to build roads. See the "
 "help screen for more information."
 msgstr ""
-"Has alcanzado un nivel tecnol??gico que te permite construir carreteras. "
-"Para obtener m??s informaci??n mira la pantalla de ayuda."
+"Has alcanzado un nivel tecnol??gico que te permite construir carreteras. Para "
+"obtener m??s informaci??n mira la pantalla de ayuda."
 
 #: data/gui/rocketup.xml
 msgid ""
@@ -781,8 +780,8 @@
 msgid ""
 "You have reached the tech level which enables you to dig deep coal mines."
 msgstr ""
-"Has alcanzado un nivel tecnol??gico que te permite construir minas de "
-"carb??n profundas."
+"Has alcanzado un nivel tecnol??gico que te permite construir minas de carb??n "
+"profundas."
 
 #: data/gui/recycleup.xml
 msgid ""
@@ -793,7 +792,7 @@
 "reciclaje. Los centros de reciclaje usan mercanc??as para reconvertirlas en "
 "mineral."
 
-#: data/gui/launch-gone.xml data/gui/sustain.xml
+#: data/gui/sustain.xml data/gui/launch-gone.xml
 msgid "You have won the game."
 msgstr "Has ganado el juego."
 
@@ -817,8 +816,8 @@
 "technology for evacuation. You must launch five more unmanned rockets to "
 "restore confidence."
 msgstr ""
-"Tu cohete se estrell?? al poco tiempo de despegar. La poblaci??n no volver?? "
-"a confiar en la tecnolog??a para realizar evacuaciones. Debes lanzar cinco o "
+"Tu cohete se estrell?? al poco tiempo de despegar. La poblaci??n no volver?? a "
+"confiar en la tecnolog??a para realizar evacuaciones. Debes lanzar cinco o "
 "m??s cohetes vac??os para devolver la confianza al pueblo."
 
 #: data/gui/minimap.xml

Modified: trunk/data/locale/gui/fr.po
===================================================================
--- trunk/data/locale/gui/fr.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/gui/fr.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -9,7 +9,7 @@
 msgstr ""
 "Project-Id-Version: fr\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: Sat Jan 27 22:03:14 2007\n"
+"POT-Creation-Date: Tue Dec  4 01:12:57 2007\n"
 "PO-Revision-Date: 2007-11-28 01:43+0100\n"
 "Last-Translator: alain <alain.baeckeroot at laposte.net>\n"
 "Language-Team: fran??ais <fr at li.org>\n"
@@ -38,11 +38,11 @@
 "A fire has broken out at a shanty town. The fire is OUT OF CONTROL and may "
 "spread to other areas. "
 msgstr ""
-"Un incendie a ??clat?? dans un bidonville. Le feu est HORS DE CONTROLE et "
-"peut se r??pendre ?? d'autres secteurs."
+"Un incendie a ??clat?? dans un bidonville. Le feu est HORS DE CONTROLE et peut "
+"se r??pendre ?? d'autres secteurs."
 
-#: data/gui/newgame.xml data/gui/loadgame.xml data/gui/credits.xml
-#: data/gui/savegame.xml
+#: data/gui/credits.xml data/gui/savegame.xml data/gui/newgame.xml
+#: data/gui/loadgame.xml
 msgid "Back"
 msgstr "Retour"
 
@@ -69,10 +69,9 @@
 #: data/gui/bulldoze_shanty_yn.xml
 msgid "Bulldozing a shanty town costs a lot of money and may cause a fire."
 msgstr ""
-"D??truire un bidonville co??te beaucoup d'argent et peu provoquer un "
-"incendie."
+"D??truire un bidonville co??te beaucoup d'argent et peu provoquer un incendie."
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Buy"
 msgstr "Ach."
 
@@ -80,7 +79,7 @@
 msgid "Choose Scenario"
 msgstr "Choisir un Scenario"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Coal"
 msgstr "Charbon"
 
@@ -142,7 +141,7 @@
 msgid "Fire!"
 msgstr "Feu !"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Food"
 msgstr "Nourriture"
 
@@ -158,7 +157,7 @@
 msgid "Go back to Main Menu"
 msgstr "Retour au menu principal"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Goods"
 msgstr "Biens"
 
@@ -182,7 +181,7 @@
 msgid "Import/Export available"
 msgstr "Import / Export disponible"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml
+#: data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Jobs"
 msgstr "Emplois"
 
@@ -230,30 +229,30 @@
 msgid "Money"
 msgstr "Argent"
 
-#: data/gui/newgame.xml data/gui/mainmenu.xml
+#: data/gui/mainmenu.xml data/gui/newgame.xml
 msgid "New Game"
 msgstr "Nouveau Jeu"
 
-#: data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/ltindustryup.xml data/gui/universityup.xml
-#: data/gui/cricketup.xml data/gui/recycleup.xml data/gui/coalmineup.xml
-#: data/gui/riverup.xml data/gui/parkup.xml data/gui/coalpowerup.xml
-#: data/gui/solarpowerup.xml data/gui/roadup.xml data/gui/potteryup.xml
-#: data/gui/railwayup.xml data/gui/blacksmithup.xml data/gui/mod_wind_up.xml
-#: data/gui/rocketup.xml data/gui/schoolup.xml data/gui/millup.xml
-#: data/gui/import-exportup.xml data/gui/healthup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalmineup.xml
+#: data/gui/coalpowerup.xml data/gui/solarpowerup.xml data/gui/parkup.xml
+#: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/roadup.xml
+#: data/gui/rocketup.xml data/gui/millup.xml data/gui/healthup.xml
+#: data/gui/universityup.xml data/gui/recycleup.xml data/gui/blacksmithup.xml
+#: data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/import-exportup.xml data/gui/mod_wind_up.xml
 msgid "New Invention"
 msgstr "Nouvelle Invention"
 
-#: data/gui/coal_survey_yn.xml data/gui/bulldoze_monument_yn.xml
-#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_shanty_yn.xml
-#: data/gui/launch_rocket_yn.xml
+#: data/gui/launch_rocket_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_monument_yn.xml data/gui/coal_survey_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml
 msgid "No"
 msgstr "Non"
 
+#: data/gui/no-credit-rocket.xml data/gui/no-credit-parkland.xml
 #: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
-#: data/gui/no-credit-recycle.xml data/gui/no-credit-parkland.xml
-#: data/gui/no-credit-rocket.xml
+#: data/gui/no-credit-recycle.xml
 msgid "No Credit Available"
 msgstr "Pas d'Argent Disponible"
 
@@ -266,21 +265,20 @@
 msgid "Not Allowed"
 msgstr "Non Autoris??"
 
-#: data/gui/options.xml data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/fire.xml data/gui/shfire-uc.xml
-#: data/gui/ltindustryup.xml data/gui/launch-evac.xml
-#: data/gui/universityup.xml data/gui/cricketup.xml data/gui/recycleup.xml
-#: data/gui/coalmineup.xml data/gui/riverup.xml data/gui/parkup.xml
-#: data/gui/no-credit-solar-power.xml data/gui/launch-good.xml
-#: data/gui/coalpowerup.xml data/gui/solarpowerup.xml data/gui/roadup.xml
-#: data/gui/no-credit-university.xml data/gui/potteryup.xml
-#: data/gui/no-credit-recycle.xml data/gui/railwayup.xml
-#: data/gui/launch-fail.xml data/gui/nobull-tip.xml data/gui/blacksmithup.xml
-#: data/gui/mod_wind_up.xml data/gui/rocketup.xml data/gui/schoolup.xml
-#: data/gui/millup.xml data/gui/import-exportup.xml
-#: data/gui/no-credit-parkland.xml data/gui/no-credit-rocket.xml
-#: data/gui/healthup.xml data/gui/launch-gone.xml data/gui/shfire-oc.xml
-#: data/gui/sustain.xml data/gui/allgone.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/options.xml data/gui/riverup.xml
+#: data/gui/coalmineup.xml data/gui/coalpowerup.xml data/gui/launch-good.xml
+#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
+#: data/gui/railwayup.xml data/gui/nobull-tip.xml data/gui/sustain.xml
+#: data/gui/roadup.xml data/gui/rocketup.xml data/gui/millup.xml
+#: data/gui/no-credit-rocket.xml data/gui/healthup.xml
+#: data/gui/no-credit-parkland.xml data/gui/shfire-uc.xml data/gui/fire.xml
+#: data/gui/universityup.xml data/gui/launch-evac.xml data/gui/recycleup.xml
+#: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
+#: data/gui/no-credit-recycle.xml data/gui/launch-fail.xml
+#: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/import-exportup.xml data/gui/launch-gone.xml
+#: data/gui/mod_wind_up.xml data/gui/shfire-oc.xml data/gui/warning.xml
 msgid "Ok"
 msgstr "Ok"
 
@@ -288,11 +286,11 @@
 msgid "Okay"
 msgstr "D'accord"
 
-#: data/gui/mainmenu.xml data/gui/options.xml
+#: data/gui/options.xml data/gui/mainmenu.xml
 msgid "Options"
 msgstr "Options"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Ore"
 msgstr "Minerai"
 
@@ -320,7 +318,7 @@
 msgid "Press this button to show statistics"
 msgstr "Pressez ce bouton pour voir les statistiques"
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Product"
 msgstr "Produit"
 
@@ -387,17 +385,17 @@
 "Voir l'??cran d'aide pour plus d'informations sur les aper??us du charbon et "
 "des mines de charbon ."
 
-#: data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/ltindustryup.xml data/gui/universityup.xml
-#: data/gui/cricketup.xml data/gui/recycleup.xml data/gui/riverup.xml
-#: data/gui/parkup.xml data/gui/coalpowerup.xml data/gui/solarpowerup.xml
-#: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/blacksmithup.xml
-#: data/gui/mod_wind_up.xml data/gui/rocketup.xml data/gui/schoolup.xml
-#: data/gui/millup.xml data/gui/healthup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalpowerup.xml
+#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
+#: data/gui/railwayup.xml data/gui/rocketup.xml data/gui/millup.xml
+#: data/gui/healthup.xml data/gui/universityup.xml data/gui/recycleup.xml
+#: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/mod_wind_up.xml
 msgid "See the help screen for more information."
 msgstr "Voir l'??cran d'aide pour plus d'informations."
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Sell"
 msgstr "Ven."
 
@@ -408,8 +406,8 @@
 #: data/gui/minimap.xml
 msgid "Show Income and Expenses. Click this tab again to cycle through views."
 msgstr ""
-"Voir les Revenus et D??penses.Cliquez sur cet onglet ?? nouveau pour "
-"traverser les vues."
+"Voir les Revenus et D??penses.Cliquez sur cet onglet ?? nouveau pour traverser "
+"les vues."
 
 #: data/gui/minimapswitchbuttons.xml
 msgid "Show coal depots"
@@ -495,7 +493,7 @@
 msgid "Stats"
 msgstr "Stats"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Steel"
 msgstr "Acier"
 
@@ -529,13 +527,13 @@
 msgid "University available"
 msgstr "Universit?? disponible"
 
-#: data/gui/bulldoze_monument_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_monument_yn.xml
 #: data/gui/bulldoze_shanty_yn.xml
 msgid "Want to bulldoze?"
 msgstr "Voulez-vous d??molir ?"
 
-#: data/gui/bulldoze_monument_yn.xml data/gui/bulldoze_river_yn.xml
-#: data/gui/bulldoze_shanty_yn.xml
+#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_monument_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml data/gui/warning.xml
 msgid "Warning"
 msgstr "Attention"
 
@@ -559,9 +557,9 @@
 msgid "Windmills available"
 msgstr "Moulins ?? vent disponibles"
 
-#: data/gui/coal_survey_yn.xml data/gui/bulldoze_monument_yn.xml
-#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_shanty_yn.xml
-#: data/gui/launch_rocket_yn.xml
+#: data/gui/launch_rocket_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_monument_yn.xml data/gui/coal_survey_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml
 msgid "Yes"
 msgstr "Oui"
 
@@ -576,8 +574,8 @@
 "clicking on the rocket area."
 msgstr ""
 "Vous pouvez lancer la fus??e maintenant ou attendre plus tard. Si vous "
-"attendez cela continuera de vous co??ter de l'argent pour maintenir la "
-"fus??e pr??te. Lancez-la en cliquant sur le site de lancement."
+"attendez cela continuera de vous co??ter de l'argent pour maintenir la fus??e "
+"pr??te. Lancez-la en cliquant sur le site de lancement."
 
 #: data/gui/import-exportup.xml
 msgid ""
@@ -609,16 +607,16 @@
 "You have a budget deficit. The legislative council will not allow you to "
 "build rocket launch pads on credit."
 msgstr ""
-"Vous avez un d??ficit budg??taire. Le conseil l??gislatif ne vous permettra "
-"pas d'emprunter pour construire un site de lancement de fus??e."
+"Vous avez un d??ficit budg??taire. Le conseil l??gislatif ne vous permettra pas "
+"d'emprunter pour construire un site de lancement de fus??e."
 
 #: data/gui/no-credit-solar-power.xml
 msgid ""
 "You have a budget deficit. The legislative council will not allow you to "
 "build solar power stations on credit."
 msgstr ""
-"Vous avez un d??ficit budg??taire. Le conseil l??gislatif ne vous permettra "
-"pas d'emprunter pour construire une centrale ??lectique solaire."
+"Vous avez un d??ficit budg??taire. Le conseil l??gislatif ne vous permettra pas "
+"d'emprunter pour construire une centrale ??lectique solaire."
 
 #: data/gui/no-credit-university.xml
 msgid ""
@@ -633,8 +631,8 @@
 "You have evacuated 1000 people. You might want to reduce the size of your "
 "economy to reflect the reduced population. "
 msgstr ""
-"Vous avez ??vacu?? 1000 personnes. Vous pourriez vouloir r??duire la taille "
-"de votre ??conomie pour refl??ter la population r??duite. "
+"Vous avez ??vacu?? 1000 personnes. Vous pourriez vouloir r??duire la taille de "
+"votre ??conomie pour refl??ter la population r??duite. "
 
 #: data/gui/blacksmithup.xml
 msgid ""
@@ -776,8 +774,8 @@
 "Universities produces PhDs, which produce more technology. "
 msgstr ""
 "Vous avez atteint le niveau technologique qui vous permet de construire des "
-"universit??s. Les universit??s forment des chercheurs, qui produisent plus "
-"de technologie."
+"universit??s. Les universit??s forment des chercheurs, qui produisent plus de "
+"technologie."
 
 #: data/gui/windmillup.xml
 msgid "You have reached the tech level which enables you to build windmills. "
@@ -801,7 +799,7 @@
 "centres de recyclage. Le recyclage permet de r??cuperer le minerai des "
 "dechets. "
 
-#: data/gui/launch-gone.xml data/gui/sustain.xml
+#: data/gui/sustain.xml data/gui/launch-gone.xml
 msgid "You have won the game."
 msgstr "Vous avez gagn?? la partie."
 
@@ -815,9 +813,9 @@
 "goods and make people in the surrounding areas (about 10 units in each "
 "direction) happier."
 msgstr ""
-"Les gens ont invent?? le basketball. Les gymnases utilisent un peu "
-"d'emplois, des biens et rends les personnes dans les environs (environ 10 "
-"unit??s dans chaque direction) plus heureux."
+"Les gens ont invent?? le basketball. Les gymnases utilisent un peu d'emplois, "
+"des biens et rends les personnes dans les environs (environ 10 unit??s dans "
+"chaque direction) plus heureux."
 
 #: data/gui/launch-fail.xml
 msgid ""

Modified: trunk/data/locale/gui/nl.po
===================================================================
--- trunk/data/locale/gui/nl.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/gui/nl.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -5,7 +5,7 @@
 msgstr ""
 "Project-Id-Version: nl\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: Sat Jan 27 22:03:14 2007\n"
+"POT-Creation-Date: Tue Dec  4 01:12:57 2007\n"
 "PO-Revision-Date: 2007-04-17 21:51+0200\n"
 "Last-Translator: Ronald Stroethoff <stroet43 at zonnet.nl>\n"
 "Language-Team: Nederlands\n"
@@ -40,8 +40,8 @@
 "Er is brand uitgebroken in een krottenwijk.De brand is niet onder controle "
 "en kan zich verspreiden naar andere gebieden."
 
-#: data/gui/newgame.xml data/gui/loadgame.xml data/gui/credits.xml
-#: data/gui/savegame.xml
+#: data/gui/credits.xml data/gui/savegame.xml data/gui/newgame.xml
+#: data/gui/loadgame.xml
 msgid "Back"
 msgstr "Terug"
 
@@ -70,7 +70,7 @@
 msgstr ""
 "Een krottenwijk afbreken kost heel veel geld en dit kan brand veroorzaken."
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Buy"
 msgstr "Kopen"
 
@@ -78,7 +78,7 @@
 msgid "Choose Scenario"
 msgstr "Kies een scenario"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Coal"
 msgstr "Steenkool"
 
@@ -138,7 +138,7 @@
 msgid "Fire!"
 msgstr "Brand!"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Food"
 msgstr "Voedsel"
 
@@ -154,7 +154,7 @@
 msgid "Go back to Main Menu"
 msgstr "Terug naar het hoofdmenu"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Goods"
 msgstr "Goederen"
 
@@ -178,7 +178,7 @@
 msgid "Import/Export available"
 msgstr "Import/Export is beschikbaar"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml
+#: data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Jobs"
 msgstr "Werk"
 
@@ -226,30 +226,30 @@
 msgid "Money"
 msgstr "Geld"
 
-#: data/gui/newgame.xml data/gui/mainmenu.xml
+#: data/gui/mainmenu.xml data/gui/newgame.xml
 msgid "New Game"
 msgstr "Nieuw spel"
 
-#: data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/ltindustryup.xml data/gui/universityup.xml
-#: data/gui/cricketup.xml data/gui/recycleup.xml data/gui/coalmineup.xml
-#: data/gui/riverup.xml data/gui/parkup.xml data/gui/coalpowerup.xml
-#: data/gui/solarpowerup.xml data/gui/roadup.xml data/gui/potteryup.xml
-#: data/gui/railwayup.xml data/gui/blacksmithup.xml data/gui/mod_wind_up.xml
-#: data/gui/rocketup.xml data/gui/schoolup.xml data/gui/millup.xml
-#: data/gui/import-exportup.xml data/gui/healthup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalmineup.xml
+#: data/gui/coalpowerup.xml data/gui/solarpowerup.xml data/gui/parkup.xml
+#: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/roadup.xml
+#: data/gui/rocketup.xml data/gui/millup.xml data/gui/healthup.xml
+#: data/gui/universityup.xml data/gui/recycleup.xml data/gui/blacksmithup.xml
+#: data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/import-exportup.xml data/gui/mod_wind_up.xml
 msgid "New Invention"
 msgstr "Nieuwe uitvinding"
 
-#: data/gui/coal_survey_yn.xml data/gui/bulldoze_monument_yn.xml
-#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_shanty_yn.xml
-#: data/gui/launch_rocket_yn.xml
+#: data/gui/launch_rocket_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_monument_yn.xml data/gui/coal_survey_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml
 msgid "No"
 msgstr "Nee"
 
+#: data/gui/no-credit-rocket.xml data/gui/no-credit-parkland.xml
 #: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
-#: data/gui/no-credit-recycle.xml data/gui/no-credit-parkland.xml
-#: data/gui/no-credit-rocket.xml
+#: data/gui/no-credit-recycle.xml
 msgid "No Credit Available"
 msgstr "Geen geld beschikbaar"
 
@@ -261,21 +261,20 @@
 msgid "Not Allowed"
 msgstr "Is niet toegestaan"
 
-#: data/gui/options.xml data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/fire.xml data/gui/shfire-uc.xml
-#: data/gui/ltindustryup.xml data/gui/launch-evac.xml
-#: data/gui/universityup.xml data/gui/cricketup.xml data/gui/recycleup.xml
-#: data/gui/coalmineup.xml data/gui/riverup.xml data/gui/parkup.xml
-#: data/gui/no-credit-solar-power.xml data/gui/launch-good.xml
-#: data/gui/coalpowerup.xml data/gui/solarpowerup.xml data/gui/roadup.xml
-#: data/gui/no-credit-university.xml data/gui/potteryup.xml
-#: data/gui/no-credit-recycle.xml data/gui/railwayup.xml
-#: data/gui/launch-fail.xml data/gui/nobull-tip.xml data/gui/blacksmithup.xml
-#: data/gui/mod_wind_up.xml data/gui/rocketup.xml data/gui/schoolup.xml
-#: data/gui/millup.xml data/gui/import-exportup.xml
-#: data/gui/no-credit-parkland.xml data/gui/no-credit-rocket.xml
-#: data/gui/healthup.xml data/gui/launch-gone.xml data/gui/shfire-oc.xml
-#: data/gui/sustain.xml data/gui/allgone.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/options.xml data/gui/riverup.xml
+#: data/gui/coalmineup.xml data/gui/coalpowerup.xml data/gui/launch-good.xml
+#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
+#: data/gui/railwayup.xml data/gui/nobull-tip.xml data/gui/sustain.xml
+#: data/gui/roadup.xml data/gui/rocketup.xml data/gui/millup.xml
+#: data/gui/no-credit-rocket.xml data/gui/healthup.xml
+#: data/gui/no-credit-parkland.xml data/gui/shfire-uc.xml data/gui/fire.xml
+#: data/gui/universityup.xml data/gui/launch-evac.xml data/gui/recycleup.xml
+#: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
+#: data/gui/no-credit-recycle.xml data/gui/launch-fail.xml
+#: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/import-exportup.xml data/gui/launch-gone.xml
+#: data/gui/mod_wind_up.xml data/gui/shfire-oc.xml data/gui/warning.xml
 msgid "Ok"
 msgstr "Ok"
 
@@ -283,11 +282,11 @@
 msgid "Okay"
 msgstr "Okay"
 
-#: data/gui/mainmenu.xml data/gui/options.xml
+#: data/gui/options.xml data/gui/mainmenu.xml
 msgid "Options"
 msgstr "Opties"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Ore"
 msgstr "IJzererts"
 
@@ -315,7 +314,7 @@
 msgid "Press this button to show statistics"
 msgstr "Druk op deze knop om de statistieken te zien"
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Product"
 msgstr "Produkt"
 
@@ -382,17 +381,17 @@
 "Lees de help-pagina's voor meer informatie over kolenmijnen en surveys naar "
 "kolen."
 
-#: data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/ltindustryup.xml data/gui/universityup.xml
-#: data/gui/cricketup.xml data/gui/recycleup.xml data/gui/riverup.xml
-#: data/gui/parkup.xml data/gui/coalpowerup.xml data/gui/solarpowerup.xml
-#: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/blacksmithup.xml
-#: data/gui/mod_wind_up.xml data/gui/rocketup.xml data/gui/schoolup.xml
-#: data/gui/millup.xml data/gui/healthup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalpowerup.xml
+#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
+#: data/gui/railwayup.xml data/gui/rocketup.xml data/gui/millup.xml
+#: data/gui/healthup.xml data/gui/universityup.xml data/gui/recycleup.xml
+#: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/mod_wind_up.xml
 msgid "See the help screen for more information."
 msgstr "Lees de help-pagina's voor meer informatie."
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Sell"
 msgstr "Verkopen"
 
@@ -490,7 +489,7 @@
 msgid "Stats"
 msgstr "Statistieken"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Steel"
 msgstr "Staal"
 
@@ -524,13 +523,13 @@
 msgid "University available"
 msgstr "Universiteit is beschikbaar"
 
-#: data/gui/bulldoze_monument_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_monument_yn.xml
 #: data/gui/bulldoze_shanty_yn.xml
 msgid "Want to bulldoze?"
 msgstr "Wilt u het afbreken?"
 
-#: data/gui/bulldoze_monument_yn.xml data/gui/bulldoze_river_yn.xml
-#: data/gui/bulldoze_shanty_yn.xml
+#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_monument_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml data/gui/warning.xml
 msgid "Warning"
 msgstr "Waarschuwing"
 
@@ -554,9 +553,9 @@
 msgid "Windmills available"
 msgstr "Windmolens zijn beschikbaar"
 
-#: data/gui/coal_survey_yn.xml data/gui/bulldoze_monument_yn.xml
-#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_shanty_yn.xml
-#: data/gui/launch_rocket_yn.xml
+#: data/gui/launch_rocket_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_monument_yn.xml data/gui/coal_survey_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml
 msgid "Yes"
 msgstr "Ja"
 
@@ -789,7 +788,7 @@
 "Het technische nivo is bereikt waarmee een recycleercentrum kan worden "
 "gebouwd. Een recycleercentrum recycled gebruikte goederen naar ijzererts."
 
-#: data/gui/launch-gone.xml data/gui/sustain.xml
+#: data/gui/sustain.xml data/gui/launch-gone.xml
 msgid "You have won the game."
 msgstr "U heeft het spel gewonnen."
 

Modified: trunk/data/locale/gui/pl.po
===================================================================
--- trunk/data/locale/gui/pl.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/gui/pl.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -10,7 +10,7 @@
 msgstr ""
 "Project-Id-Version: pl\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: Sat Jan 27 22:03:14 2007\n"
+"POT-Creation-Date: Tue Dec  4 01:12:57 2007\n"
 "PO-Revision-Date: 2006-12-17 17:16+0100\n"
 "Last-Translator: Micha?? Drza?? <neurotoxic at wp.pl>\n"
 "Language-Team:  <pl at li.org>\n"
@@ -40,11 +40,11 @@
 "A fire has broken out at a shanty town. The fire is OUT OF CONTROL and may "
 "spread to other areas. "
 msgstr ""
-"Po??ar ogarn???? slumsy. Ogie?? wymkn???? si?? spod kontroli i istnieje "
-"szansa jego rozprzestrzenienia si??."
+"Po??ar ogarn???? slumsy. Ogie?? wymkn???? si?? spod kontroli i istnieje szansa jego "
+"rozprzestrzenienia si??."
 
-#: data/gui/newgame.xml data/gui/loadgame.xml data/gui/credits.xml
-#: data/gui/savegame.xml
+#: data/gui/credits.xml data/gui/savegame.xml data/gui/newgame.xml
+#: data/gui/loadgame.xml
 msgid "Back"
 msgstr "Wr????"
 
@@ -72,7 +72,7 @@
 msgid "Bulldozing a shanty town costs a lot of money and may cause a fire."
 msgstr "Wyburzenie slums??w du??o kosztuje i mo??e wywo??ac po??ar."
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Buy"
 msgstr "Kup"
 
@@ -80,7 +80,7 @@
 msgid "Choose Scenario"
 msgstr "Wybierz scenariusz"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Coal"
 msgstr "W??giel"
 
@@ -140,7 +140,7 @@
 msgid "Fire!"
 msgstr "Po??ar!"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Food"
 msgstr "??ywno????"
 
@@ -156,7 +156,7 @@
 msgid "Go back to Main Menu"
 msgstr "Wr???? do g????wnego menu"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Goods"
 msgstr "Towary"
 
@@ -180,7 +180,7 @@
 msgid "Import/Export available"
 msgstr "Import/Export dost??pny"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml
+#: data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Jobs"
 msgstr "Si??a robocza."
 
@@ -228,30 +228,30 @@
 msgid "Money"
 msgstr "Kapita??"
 
-#: data/gui/newgame.xml data/gui/mainmenu.xml
+#: data/gui/mainmenu.xml data/gui/newgame.xml
 msgid "New Game"
 msgstr "Nowa gra"
 
-#: data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/ltindustryup.xml data/gui/universityup.xml
-#: data/gui/cricketup.xml data/gui/recycleup.xml data/gui/coalmineup.xml
-#: data/gui/riverup.xml data/gui/parkup.xml data/gui/coalpowerup.xml
-#: data/gui/solarpowerup.xml data/gui/roadup.xml data/gui/potteryup.xml
-#: data/gui/railwayup.xml data/gui/blacksmithup.xml data/gui/mod_wind_up.xml
-#: data/gui/rocketup.xml data/gui/schoolup.xml data/gui/millup.xml
-#: data/gui/import-exportup.xml data/gui/healthup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalmineup.xml
+#: data/gui/coalpowerup.xml data/gui/solarpowerup.xml data/gui/parkup.xml
+#: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/roadup.xml
+#: data/gui/rocketup.xml data/gui/millup.xml data/gui/healthup.xml
+#: data/gui/universityup.xml data/gui/recycleup.xml data/gui/blacksmithup.xml
+#: data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/import-exportup.xml data/gui/mod_wind_up.xml
 msgid "New Invention"
 msgstr "Nowy wynalazek"
 
-#: data/gui/coal_survey_yn.xml data/gui/bulldoze_monument_yn.xml
-#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_shanty_yn.xml
-#: data/gui/launch_rocket_yn.xml
+#: data/gui/launch_rocket_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_monument_yn.xml data/gui/coal_survey_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml
 msgid "No"
 msgstr "Nie"
 
+#: data/gui/no-credit-rocket.xml data/gui/no-credit-parkland.xml
 #: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
-#: data/gui/no-credit-recycle.xml data/gui/no-credit-parkland.xml
-#: data/gui/no-credit-rocket.xml
+#: data/gui/no-credit-recycle.xml
 msgid "No Credit Available"
 msgstr "Brak dost??pnego kredytu"
 
@@ -263,21 +263,20 @@
 msgid "Not Allowed"
 msgstr "Nie dozwolone."
 
-#: data/gui/options.xml data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/fire.xml data/gui/shfire-uc.xml
-#: data/gui/ltindustryup.xml data/gui/launch-evac.xml
-#: data/gui/universityup.xml data/gui/cricketup.xml data/gui/recycleup.xml
-#: data/gui/coalmineup.xml data/gui/riverup.xml data/gui/parkup.xml
-#: data/gui/no-credit-solar-power.xml data/gui/launch-good.xml
-#: data/gui/coalpowerup.xml data/gui/solarpowerup.xml data/gui/roadup.xml
-#: data/gui/no-credit-university.xml data/gui/potteryup.xml
-#: data/gui/no-credit-recycle.xml data/gui/railwayup.xml
-#: data/gui/launch-fail.xml data/gui/nobull-tip.xml data/gui/blacksmithup.xml
-#: data/gui/mod_wind_up.xml data/gui/rocketup.xml data/gui/schoolup.xml
-#: data/gui/millup.xml data/gui/import-exportup.xml
-#: data/gui/no-credit-parkland.xml data/gui/no-credit-rocket.xml
-#: data/gui/healthup.xml data/gui/launch-gone.xml data/gui/shfire-oc.xml
-#: data/gui/sustain.xml data/gui/allgone.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/options.xml data/gui/riverup.xml
+#: data/gui/coalmineup.xml data/gui/coalpowerup.xml data/gui/launch-good.xml
+#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
+#: data/gui/railwayup.xml data/gui/nobull-tip.xml data/gui/sustain.xml
+#: data/gui/roadup.xml data/gui/rocketup.xml data/gui/millup.xml
+#: data/gui/no-credit-rocket.xml data/gui/healthup.xml
+#: data/gui/no-credit-parkland.xml data/gui/shfire-uc.xml data/gui/fire.xml
+#: data/gui/universityup.xml data/gui/launch-evac.xml data/gui/recycleup.xml
+#: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
+#: data/gui/no-credit-recycle.xml data/gui/launch-fail.xml
+#: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/import-exportup.xml data/gui/launch-gone.xml
+#: data/gui/mod_wind_up.xml data/gui/shfire-oc.xml data/gui/warning.xml
 msgid "Ok"
 msgstr "Ok"
 
@@ -285,11 +284,11 @@
 msgid "Okay"
 msgstr "Dobrze."
 
-#: data/gui/mainmenu.xml data/gui/options.xml
+#: data/gui/options.xml data/gui/mainmenu.xml
 msgid "Options"
 msgstr "Opcje"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Ore"
 msgstr "Ruda"
 
@@ -317,7 +316,7 @@
 msgid "Press this button to show statistics"
 msgstr "Naci??nij ten przycisk, ??eby zobaczy?? statystyki"
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Product"
 msgstr "Produkt"
 
@@ -384,17 +383,17 @@
 "Zobacz ekran pomoy w celu uzyskania wi??kszej ilo??ci informacji na temat "
 "kopalni oraz zasob??w w??gla"
 
-#: data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/ltindustryup.xml data/gui/universityup.xml
-#: data/gui/cricketup.xml data/gui/recycleup.xml data/gui/riverup.xml
-#: data/gui/parkup.xml data/gui/coalpowerup.xml data/gui/solarpowerup.xml
-#: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/blacksmithup.xml
-#: data/gui/mod_wind_up.xml data/gui/rocketup.xml data/gui/schoolup.xml
-#: data/gui/millup.xml data/gui/healthup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalpowerup.xml
+#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
+#: data/gui/railwayup.xml data/gui/rocketup.xml data/gui/millup.xml
+#: data/gui/healthup.xml data/gui/universityup.xml data/gui/recycleup.xml
+#: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/mod_wind_up.xml
 msgid "See the help screen for more information."
 msgstr "Zobacz ekran pomocy w celu uzyskania wi??kszej ilo??ci informacji. "
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Sell"
 msgstr "Sprzedaj"
 
@@ -493,7 +492,7 @@
 msgid "Stats"
 msgstr "Statystyki"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Steel"
 msgstr "Stal"
 
@@ -508,8 +507,8 @@
 #: data/gui/coal_survey_yn.xml
 msgid "This will cost you 1 million once. After that it is free to call again."
 msgstr ""
-"To b??dzie Ci?? kosztowa?? jednorazowo 1 milion. P????niej jest ju?? "
-"dost??pne za darmo."
+"To b??dzie Ci?? kosztowa?? jednorazowo 1 milion. P????niej jest ju?? dost??pne za "
+"darmo."
 
 #: data/gui/launch-gone.xml
 msgid "Total Evacuation Complete."
@@ -527,13 +526,13 @@
 msgid "University available"
 msgstr "Uniwersytety dost??pne"
 
-#: data/gui/bulldoze_monument_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_monument_yn.xml
 #: data/gui/bulldoze_shanty_yn.xml
 msgid "Want to bulldoze?"
 msgstr "Wyburzy???"
 
-#: data/gui/bulldoze_monument_yn.xml data/gui/bulldoze_river_yn.xml
-#: data/gui/bulldoze_shanty_yn.xml
+#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_monument_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml data/gui/warning.xml
 msgid "Warning"
 msgstr "Uwaga"
 
@@ -557,9 +556,9 @@
 msgid "Windmills available"
 msgstr "Wiatraki dost??pne"
 
-#: data/gui/coal_survey_yn.xml data/gui/bulldoze_monument_yn.xml
-#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_shanty_yn.xml
-#: data/gui/launch_rocket_yn.xml
+#: data/gui/launch_rocket_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_monument_yn.xml data/gui/coal_survey_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml
 msgid "Yes"
 msgstr "Tak"
 
@@ -574,8 +573,8 @@
 "clicking on the rocket area."
 msgstr ""
 "Mo??esz wystrzeli?? rakiet?? teraz lub p????niej. Je??li b??dziesz czeka??, "
-"utrzymywanie rakiety w stanie gotowo??ci b??dzie Ci?? kosztowa??. Mo??esz "
-"j?? potem wystrzeli?? klikaj??c na kosmodrom."
+"utrzymywanie rakiety w stanie gotowo??ci b??dzie Ci?? kosztowa??. Mo??esz j?? "
+"potem wystrzeli?? klikaj??c na kosmodrom."
 
 #: data/gui/import-exportup.xml
 msgid ""
@@ -583,8 +582,7 @@
 "pages on these subjects to find out how to use them. "
 msgstr ""
 "Teraz mo??esz importowa?? i eksportowa?? w??giel, towary, rude i stal. "
-"Przeczytaj strony pomocy tych temat??w, ??eby dowiedzie?? si?? jak to "
-"zrobi??."
+"Przeczytaj strony pomocy tych temat??w, ??eby dowiedzie?? si?? jak to zrobi??."
 
 #: data/gui/no-credit-parkland.xml
 msgid ""
@@ -598,8 +596,8 @@
 "You have a budget deficit. The legislative council will not allow you to "
 "build recycling centres on credit."
 msgstr ""
-"Masz deficyt bud??etu. Rada miejska zabroni??a Ci budowy zak??ad??w "
-"recyklingu na kredyt."
+"Masz deficyt bud??etu. Rada miejska zabroni??a Ci budowy zak??ad??w recyklingu "
+"na kredyt."
 
 #: data/gui/no-credit-rocket.xml
 msgid ""
@@ -646,8 +644,7 @@
 "You have reached the tech level which enables you to build coal fired power "
 "stations."
 msgstr ""
-"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe elektrowni "
-"w??glowych."
+"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe elektrowni w??glowych."
 
 #: data/gui/firestationup.xml
 msgid ""
@@ -655,10 +652,9 @@
 "Fire stations prevent most fires from starting. If you haven't had any fires "
 "yet, you might not think you need them."
 msgstr ""
-"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe remiz "
-"stra??ackich. Remizy stra??ackie zapobiegaj?? wi??kszo??ci po??ar??w. Je??li "
-"nie mia??e?? jeszcze ??adnych po??ar??w, mo??e Ci si?? wydawa??, ??e ich nie "
-"potrzebujesz."
+"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe remiz stra??ackich. "
+"Remizy stra??ackie zapobiegaj?? wi??kszo??ci po??ar??w. Je??li nie mia??e?? jeszcze "
+"??adnych po??ar??w, mo??e Ci si?? wydawa??, ??e ich nie potrzebujesz."
 
 #: data/gui/healthup.xml
 msgid ""
@@ -666,25 +662,25 @@
 "Heath centres reduce the number of people killed by pollution and increase "
 "overall productivity."
 msgstr ""
-"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe szpitali. "
-"Szpitale zmniejszaj?? ilo???? ludzi zabitych przez zanieczyszczenia oraz "
-"zwi??kszaj?? ca??kowit?? wydajno????."
+"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe szpitali. Szpitale "
+"zmniejszaj?? ilo???? ludzi zabitych przez zanieczyszczenia oraz zwi??kszaj?? "
+"ca??kowit?? wydajno????."
 
 #: data/gui/hvindustryup.xml
 msgid ""
 "You have reached the tech level which enables you to build heavy industry "
 "(steel works). Heavy industry produces steel. "
 msgstr ""
-"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe zak??ad??w "
-"ci????kiego przemys??u. Zak??ady ci????kiego przemys??u produkuj?? stal. "
+"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe zak??ad??w ci????kiego "
+"przemys??u. Zak??ady ci????kiego przemys??u produkuj?? stal. "
 
 #: data/gui/ltindustryup.xml
 msgid ""
 "You have reached the tech level which enables you to build light industry. "
 "Light industry produces goods. "
 msgstr ""
-"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe zak??ad??w "
-"lekkiego przemys??u. Zak??ady lekkiego przemys??u produkuj?? towary. "
+"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe zak??ad??w lekkiego "
+"przemys??u. Zak??ady lekkiego przemys??u produkuj?? towary. "
 
 #: data/gui/millup.xml
 msgid ""
@@ -716,15 +712,14 @@
 "You have reached the tech level which enables you to build potteries. "
 "Potteries use jobs and ore to make goods. (You need ore mines to get ore) "
 msgstr ""
-"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe garncarni. "
-"Garncarnie wykorzystuj?? si???? robocz?? oraz rud?? do wytwarzania towar??w. "
-"(Musisz mie?? kopalnie rudy, ??eby uzyska?? rud??) "
+"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe garncarni. Garncarnie "
+"wykorzystuj?? si???? robocz?? oraz rud?? do wytwarzania towar??w. (Musisz mie?? "
+"kopalnie rudy, ??eby uzyska?? rud??) "
 
 #: data/gui/railwayup.xml
 msgid "You have reached the tech level which enables you to build railways. "
 msgstr ""
-"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe tor??w "
-"kolejowych. "
+"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe tor??w kolejowych. "
 
 #: data/gui/riverup.xml
 msgid "You have reached the tech level which enables you to build rivers. "
@@ -735,8 +730,8 @@
 "You have reached the tech level which enables you to build roads. See the "
 "help screen for more information."
 msgstr ""
-"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe ulic. Zobacz "
-"ekran pomocy w celu uzyskania wi??kszej ilo??ci informacji."
+"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe ulic. Zobacz ekran "
+"pomocy w celu uzyskania wi??kszej ilo??ci informacji."
 
 #: data/gui/rocketup.xml
 msgid ""
@@ -744,9 +739,9 @@
 "pads. Rockets enable you to evacuate your population and is a way to 'win' "
 "the game."
 msgstr ""
-"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe kosmodrom??w. "
-"Rakiety pozwalaj?? ewakuowa?? mieszka??c??w miasta, co jest sposobem na "
-"'przej??cie' tej gry."
+"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe kosmodrom??w. Rakiety "
+"pozwalaj?? ewakuowa?? mieszka??c??w miasta, co jest sposobem na 'przej??cie' tej "
+"gry."
 
 #: data/gui/schoolup.xml
 msgid ""
@@ -771,13 +766,11 @@
 "Universities produces PhDs, which produce more technology. "
 msgstr ""
 "Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe uniwersytet??w. "
-"Uniwersytety produkuj?? jajog??owych, kt??rzy opracowywuj?? nowe "
-"technologi??."
+"Uniwersytety produkuj?? jajog??owych, kt??rzy opracowywuj?? nowe technologi??."
 
 #: data/gui/windmillup.xml
 msgid "You have reached the tech level which enables you to build windmills. "
-msgstr ""
-"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe wiatrak??w. "
+msgstr "Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe wiatrak??w. "
 
 #: data/gui/coalmineup.xml
 msgid ""
@@ -791,10 +784,10 @@
 "You have reached the tech level which enables you to recycling centres. "
 "Recycling centres recycle used goods back into ore. "
 msgstr ""
-"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe zak??ad??w "
-"recyklingu. Zak??ady recyklingu przerabiaj?? towary na rud??. "
+"Osi??gn????e?? poziom technologiczny pozwalaj??cy na budowe zak??ad??w recyklingu. "
+"Zak??ady recyklingu przerabiaj?? towary na rud??. "
 
-#: data/gui/launch-gone.xml data/gui/sustain.xml
+#: data/gui/sustain.xml data/gui/launch-gone.xml
 msgid "You have won the game."
 msgstr "Wygra??e??."
 
@@ -808,9 +801,9 @@
 "goods and make people in the surrounding areas (about 10 units in each "
 "direction) happier."
 msgstr ""
-"Twoi ludzie wynale??li koszyk??wk??. Boiska do koszyk??wki wykorzystuj?? "
-"niewiele si??y roboczej oraz towar??w, a ludzie w okolicy (oko??o 10 p??l w "
-"ka??dym kierunku) s?? szcz????liwsi."
+"Twoi ludzie wynale??li koszyk??wk??. Boiska do koszyk??wki wykorzystuj?? niewiele "
+"si??y roboczej oraz towar??w, a ludzie w okolicy (oko??o 10 p??l w ka??dym "
+"kierunku) s?? szcz????liwsi."
 
 #: data/gui/launch-fail.xml
 msgid ""
@@ -825,8 +818,7 @@
 #: data/gui/minimap.xml
 msgid "[+] Zoom in view so that less buildings but more details are visible"
 msgstr ""
-"[+] Przybli??enie widoku - wida?? mniej budynk??w, ale s?? bardziej "
-"szczeg????owe."
+"[+] Przybli??enie widoku - wida?? mniej budynk??w, ale s?? bardziej szczeg????owe."
 
 #: data/gui/minimap.xml
 msgid "[-] Zoom out"

Modified: trunk/data/locale/gui/pt_BR.po
===================================================================
--- trunk/data/locale/gui/pt_BR.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/gui/pt_BR.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -7,7 +7,7 @@
 msgstr ""
 "Project-Id-Version: lincity-ng 1.1.0rc2\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: Fri Aug 10 22:07:01 2007\n"
+"POT-Creation-Date: Tue Dec  4 01:12:57 2007\n"
 "PO-Revision-Date: 2007-05-10 19:53-0300\n"
 "Last-Translator: Nilo Menezes <nilo.menezes at gmail.com>\n"
 "Language-Team: Portuguese/Brazil <gnome-l10n-br at listas.cipsga.org.br>\n"
@@ -30,8 +30,8 @@
 "A fire has broken out at a shanty town. It is in a fire cover area and "
 "APPEARS to be under control. "
 msgstr ""
-"Um inc??ndio iniciou na favela, que esta numa ??rea coberta pelos bombeiros "
-"e APARENTA estar sob controle."
+"Um inc??ndio iniciou na favela, que esta numa ??rea coberta pelos bombeiros e "
+"APARENTA estar sob controle."
 
 #: data/gui/shfire-oc.xml
 msgid ""
@@ -230,13 +230,13 @@
 msgid "New Game"
 msgstr "Novo Jogo"
 
-#: data/gui/hvindustryup.xml data/gui/windmillup.xml data/gui/ltindustryup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
 #: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalmineup.xml
 #: data/gui/coalpowerup.xml data/gui/solarpowerup.xml data/gui/parkup.xml
 #: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/roadup.xml
 #: data/gui/rocketup.xml data/gui/millup.xml data/gui/healthup.xml
-#: data/gui/universityup.xml data/gui/recycleup.xml data/gui/firestationup.xml
-#: data/gui/blacksmithup.xml data/gui/schoolup.xml
+#: data/gui/universityup.xml data/gui/recycleup.xml data/gui/blacksmithup.xml
+#: data/gui/schoolup.xml data/gui/firestationup.xml
 #: data/gui/import-exportup.xml data/gui/mod_wind_up.xml
 msgid "New Invention"
 msgstr "Nova Inven????o"
@@ -257,24 +257,24 @@
 msgid "Nobody Home"
 msgstr "Casa Desabitada"
 
-#: data/gui/nobull-tip.xml data/gui/warning.xml
+#: data/gui/nobull-tip.xml
 msgid "Not Allowed"
 msgstr "N??o Permitido"
 
-#: data/gui/hvindustryup.xml data/gui/windmillup.xml data/gui/ltindustryup.xml
-#: data/gui/no-credit-rocket.xml data/gui/cricketup.xml data/gui/options.xml
-#: data/gui/riverup.xml data/gui/coalmineup.xml data/gui/coalpowerup.xml
-#: data/gui/launch-good.xml data/gui/solarpowerup.xml data/gui/parkup.xml
-#: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/nobull-tip.xml
-#: data/gui/sustain.xml data/gui/roadup.xml data/gui/rocketup.xml
-#: data/gui/millup.xml data/gui/fire.xml data/gui/healthup.xml
-#: data/gui/no-credit-parkland.xml data/gui/shfire-uc.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/options.xml data/gui/riverup.xml
+#: data/gui/coalmineup.xml data/gui/coalpowerup.xml data/gui/launch-good.xml
+#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
+#: data/gui/railwayup.xml data/gui/nobull-tip.xml data/gui/sustain.xml
+#: data/gui/roadup.xml data/gui/rocketup.xml data/gui/millup.xml
+#: data/gui/no-credit-rocket.xml data/gui/healthup.xml
+#: data/gui/no-credit-parkland.xml data/gui/shfire-uc.xml data/gui/fire.xml
 #: data/gui/universityup.xml data/gui/launch-evac.xml data/gui/recycleup.xml
 #: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
-#: data/gui/no-credit-recycle.xml data/gui/firestationup.xml
-#: data/gui/launch-fail.xml data/gui/blacksmithup.xml data/gui/schoolup.xml
+#: data/gui/no-credit-recycle.xml data/gui/launch-fail.xml
+#: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
 #: data/gui/import-exportup.xml data/gui/launch-gone.xml
-#: data/gui/mod_wind_up.xml data/gui/warning.xml data/gui/shfire-oc.xml
+#: data/gui/mod_wind_up.xml data/gui/shfire-oc.xml data/gui/warning.xml
 msgid "Ok"
 msgstr "Ok"
 
@@ -381,12 +381,12 @@
 "Veja a tela de ajuda para maiores informa????es sobre minas de carv??o e "
 "an??lise do carv??o."
 
-#: data/gui/hvindustryup.xml data/gui/windmillup.xml data/gui/ltindustryup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
 #: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalpowerup.xml
 #: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
 #: data/gui/railwayup.xml data/gui/rocketup.xml data/gui/millup.xml
 #: data/gui/healthup.xml data/gui/universityup.xml data/gui/recycleup.xml
-#: data/gui/firestationup.xml data/gui/blacksmithup.xml data/gui/schoolup.xml
+#: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
 #: data/gui/mod_wind_up.xml
 msgid "See the help screen for more information."
 msgstr "Veja a tela de ajuda para maiores informa????es."
@@ -567,57 +567,57 @@
 "continue costing you money to keep the rocket ready. Launch it later by "
 "clicking on the rocket area."
 msgstr ""
-"Voc?? pode lan??ar o foguete agora ou mais tarde. Lan??ar mais tarde "
-"continuar?? custando para manter o foguete pronto para o lan??amento. "
-"Lance-o clicando na ??rea do foguete."
+"Voc?? pode lan??ar o foguete agora ou mais tarde. Lan??ar mais tarde continuar?? "
+"custando para manter o foguete pronto para o lan??amento. Lance-o clicando na "
+"??rea do foguete."
 
 #: data/gui/import-exportup.xml
 msgid ""
 "You can now import and export coal, goods, ore and steel. Read the help "
 "pages on these subjects to find out how to use them. "
 msgstr ""
-"Voc?? pode agora importar e exportar carv??o, bens, min??rios e a??o. Leia "
-"as p??ginas de ajuda destes itens para saber como utiliz??-los."
+"Voc?? pode agora importar e exportar carv??o, bens, min??rios e a??o. Leia as "
+"p??ginas de ajuda destes itens para saber como utiliz??-los."
 
 #: data/gui/no-credit-parkland.xml
 msgid ""
 "You have a budget deficit. The legislative council will not allow you to "
 "build parks on credit."
 msgstr ""
-"Voc?? tem um d??ficit no or??amento. O conselho legislativo n??o deixar?? "
-"que voc?? construa parques ?? cr??dito."
+"Voc?? tem um d??ficit no or??amento. O conselho legislativo n??o deixar?? que "
+"voc?? construa parques ?? cr??dito."
 
 #: data/gui/no-credit-recycle.xml
 msgid ""
 "You have a budget deficit. The legislative council will not allow you to "
 "build recycling centres on credit."
 msgstr ""
-"Voc?? tem um d??ficit no or??amento. O conselho legislativo n??o deixar?? "
-"que voc?? construa centros de reciclagem ?? cr??dito."
+"Voc?? tem um d??ficit no or??amento. O conselho legislativo n??o deixar?? que "
+"voc?? construa centros de reciclagem ?? cr??dito."
 
 #: data/gui/no-credit-rocket.xml
 msgid ""
 "You have a budget deficit. The legislative council will not allow you to "
 "build rocket launch pads on credit."
 msgstr ""
-"Voc?? tem um d??ficit no or??amento. O conselho legislativo n??o deixar?? "
-"que voc?? construa ??reas de lan??amento ?? cr??dito."
+"Voc?? tem um d??ficit no or??amento. O conselho legislativo n??o deixar?? que "
+"voc?? construa ??reas de lan??amento ?? cr??dito."
 
 #: data/gui/no-credit-solar-power.xml
 msgid ""
 "You have a budget deficit. The legislative council will not allow you to "
 "build solar power stations on credit."
 msgstr ""
-"Voc?? tem um d??ficit no or??amento. O conselho legislativo n??o deixar?? "
-"que voc?? construa usinas el??tricas solares ?? cr??dito."
+"Voc?? tem um d??ficit no or??amento. O conselho legislativo n??o deixar?? que "
+"voc?? construa usinas el??tricas solares ?? cr??dito."
 
 #: data/gui/no-credit-university.xml
 msgid ""
 "You have a budget deficit. The legislative council will not allow you to "
 "build universities on credit."
 msgstr ""
-"Voc?? tem um d??ficit no or??amento. O conselho legislativo n??o deixar?? "
-"que voc?? construa universidades ?? cr??dito."
+"Voc?? tem um d??ficit no or??amento. O conselho legislativo n??o deixar?? que "
+"voc?? construa universidades ?? cr??dito."
 
 #: data/gui/launch-evac.xml
 msgid ""
@@ -640,8 +640,8 @@
 "You have reached the tech level which enables you to build coal fired power "
 "stations."
 msgstr ""
-"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir usinas "
-"el??tricas carvoeiras."
+"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir usinas el??tricas "
+"carvoeiras."
 
 #: data/gui/firestationup.xml
 msgid ""
@@ -650,8 +650,8 @@
 "yet, you might not think you need them."
 msgstr ""
 "Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir Bombeiros. "
-"Bombeiro previne a maioria dos inc??ndios antes de come??ar. Se voc?? n??o "
-"teve um inc??ndio ainda, n??o deve pensar que n??o precisa deles."
+"Bombeiro previne a maioria dos inc??ndios antes de come??ar. Se voc?? n??o teve "
+"um inc??ndio ainda, n??o deve pensar que n??o precisa deles."
 
 #: data/gui/healthup.xml
 msgid ""
@@ -676,48 +676,47 @@
 "You have reached the tech level which enables you to build light industry. "
 "Light industry produces goods. "
 msgstr ""
-"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir ind??strias "
-"leves. Ind??strias leves produzem bens."
+"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir ind??strias leves. "
+"Ind??strias leves produzem bens."
 
 #: data/gui/millup.xml
 msgid ""
 "You have reached the tech level which enables you to build mills. Mills use "
 "jobs and food to make goods. Watch out, they can use a lot of food! "
 msgstr ""
-"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir moinhos. "
-"Moinhos utilizam produ????o e alimento para produzir bens. Aten??ao, eles "
-"podem utilizar bastante alimentos!"
+"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir moinhos. Moinhos "
+"utilizam produ????o e alimento para produzir bens. Aten??ao, eles podem "
+"utilizar bastante alimentos!"
 
 #: data/gui/mod_wind_up.xml
 msgid ""
 "You have reached the tech level which enables you to build modern, more "
 "efficient, windmills. "
 msgstr ""
-"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir modernos, e "
-"mais eficientes, moinhos de vento."
+"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir modernos, e mais "
+"eficientes, moinhos de vento."
 
 #: data/gui/parkup.xml
 msgid ""
 "You have reached the tech level which enables you to build parks. Parks are "
 "used to absorb pollution. "
 msgstr ""
-"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir parques. "
-"Parques s??o utilizados para absorver a polui????o."
+"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir parques. Parques "
+"s??o utilizados para absorver a polui????o."
 
 #: data/gui/potteryup.xml
 msgid ""
 "You have reached the tech level which enables you to build potteries. "
 "Potteries use jobs and ore to make goods. (You need ore mines to get ore) "
 msgstr ""
-"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir olarias. "
-"Olarias utilizam produ????o e min??rio para produzir bens. (Voc?? necessita "
-"de minas para conseguir os min??rios)"
+"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir olarias. Olarias "
+"utilizam produ????o e min??rio para produzir bens. (Voc?? necessita de minas "
+"para conseguir os min??rios)"
 
 #: data/gui/railwayup.xml
 msgid "You have reached the tech level which enables you to build railways. "
 msgstr ""
-"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir estradas de "
-"ferro."
+"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir estradas de ferro."
 
 #: data/gui/riverup.xml
 msgid "You have reached the tech level which enables you to build rivers. "
@@ -728,8 +727,8 @@
 "You have reached the tech level which enables you to build roads. See the "
 "help screen for more information."
 msgstr ""
-"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir estradas. "
-"Veja a tela de ajuda para maiores informa????es."
+"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir estradas. Veja a "
+"tela de ajuda para maiores informa????es."
 
 #: data/gui/rocketup.xml
 msgid ""
@@ -738,38 +737,37 @@
 "the game."
 msgstr ""
 "Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir bases de "
-"lan??amentos. Foguetes habilitam voc?? a evacuar sua popula????o e ?? um "
-"meio de 'ganhar' o jogo."
+"lan??amentos. Foguetes habilitam voc?? a evacuar sua popula????o e ?? um meio de "
+"'ganhar' o jogo."
 
 #: data/gui/schoolup.xml
 msgid ""
 "You have reached the tech level which enables you to build schools. Schools "
 "use jobs and goods to increase tech level. "
 msgstr ""
-"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir escolas. "
-"Escolas utilizam produ????o e bens para aumentar o n??vel tecnol??gico."
+"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir escolas. Escolas "
+"utilizam produ????o e bens para aumentar o n??vel tecnol??gico."
 
 #: data/gui/solarpowerup.xml
 msgid ""
 "You have reached the tech level which enables you to build solar power "
 "stations. "
 msgstr ""
-"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir usinas "
-"el??tricas solares."
+"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir usinas el??tricas "
+"solares."
 
 #: data/gui/universityup.xml
 msgid ""
 "You have reached the tech level which enables you to build universities. "
 "Universities produces PhDs, which produce more technology. "
 msgstr ""
-"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir "
-"universidades. Universidades produzem PhDs, que produzem mais tecnologia."
+"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir universidades. "
+"Universidades produzem PhDs, que produzem mais tecnologia."
 
 #: data/gui/windmillup.xml
 msgid "You have reached the tech level which enables you to build windmills. "
 msgstr ""
-"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir moinhos de "
-"vento."
+"Voc?? alcan??ou o n??vel tecnol??gico que habilita a construir moinhos de vento."
 
 #: data/gui/coalmineup.xml
 msgid ""
@@ -801,8 +799,8 @@
 "direction) happier."
 msgstr ""
 "Seus habitantes inventaram o basquete. As quadras de basquete utilizam um "
-"pouca produ????o e bens e fazem as pessoas ao redor (mais ou menos 10 "
-"pessoas em cada dire????o) mais felizes."
+"pouca produ????o e bens e fazem as pessoas ao redor (mais ou menos 10 pessoas "
+"em cada dire????o) mais felizes."
 
 #: data/gui/launch-fail.xml
 msgid ""
@@ -811,8 +809,8 @@
 "restore confidence."
 msgstr ""
 "Seu foguete explodiu logo ap??s o lan??amento. As pessoas n??o confiam mais "
-"nesta tecnologia para evacua????o. Voc?? dever?? lan??ar mais 5 foguetes "
-"n??o tripulados para que eles recuperem a confian??a."
+"nesta tecnologia para evacua????o. Voc?? dever?? lan??ar mais 5 foguetes n??o "
+"tripulados para que eles recuperem a confian??a."
 
 #: data/gui/minimap.xml
 msgid "[+] Zoom in view so that less buildings but more details are visible"

Modified: trunk/data/locale/gui/ru.po
===================================================================
--- trunk/data/locale/gui/ru.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/gui/ru.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -6,7 +6,7 @@
 msgstr ""
 "Project-Id-Version: ru\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: Fri Jul 29 23:27:48 2007\n"
+"POT-Creation-Date: Tue Dec  4 01:12:57 2007\n"
 "PO-Revision-Date: 2007-03-11 02:39-0000\n"
 "Last-Translator: ASM <asm at asm.pp.ru>\n"
 "Language-Team: ASM <asm at asm.pp.ru>\n"
@@ -27,20 +27,19 @@
 "A fire has broken out at a shanty town. It is in a fire cover area and "
 "APPEARS to be under control. "
 msgstr ""
-"?????????? ?????????????????? ????????????. ???????? ?????? ???????????? "
-"????????????, ???? ?????????? ?????????? ???? ?????? ????????????????."
+"?????????? ?????????????????? ????????????. ???????? ?????? ???????????? ????????????, ???? ?????????? ?????????? ???? ?????? "
+"????????????????."
 
 #: data/gui/shfire-oc.xml
 msgid ""
 "A fire has broken out at a shanty town. The fire is OUT OF CONTROL and may "
 "spread to other areas. "
 msgstr ""
-"?????????? ?????????????????? ????????????. ?????????? ?????????? ???? "
-"?????? ????????????????! ?? ?????????? ???????????????????? ???????????? "
-"??????????????????!!!"
+"?????????? ?????????????????? ????????????. ?????????? ?????????? ???? ?????? ????????????????! ?? ?????????? ???????????????????? "
+"???????????? ??????????????????!!!"
 
-#: data/gui/newgame.xml data/gui/loadgame.xml data/gui/credits.xml
-#: data/gui/savegame.xml
+#: data/gui/credits.xml data/gui/savegame.xml data/gui/newgame.xml
+#: data/gui/loadgame.xml
 msgid "Back"
 msgstr "??????????"
 
@@ -58,9 +57,7 @@
 
 #: data/gui/bulldoze_monument_yn.xml
 msgid "Bulldozing a monument costs a lot of money."
-msgstr ""
-"?????????????????????? ?????????????????? ?????????? ?????????????? "
-"??????????."
+msgstr "?????????????????????? ?????????????????? ?????????? ?????????????? ??????????."
 
 #: data/gui/bulldoze_river_yn.xml
 msgid "Bulldozing a section of river costs a lot of money."
@@ -68,11 +65,9 @@
 
 #: data/gui/bulldoze_shanty_yn.xml
 msgid "Bulldozing a shanty town costs a lot of money and may cause a fire."
-msgstr ""
-"?????????????????????? ???????????? ?????????? ?????????????? ?????????? ?? "
-"?????????????? ??????????."
+msgstr "?????????????????????? ???????????? ?????????? ?????????????? ?????????? ?? ?????????????? ??????????."
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Buy"
 msgstr "????????????"
 
@@ -80,7 +75,7 @@
 msgid "Choose Scenario"
 msgstr "?????????????? ????????????????"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Coal"
 msgstr "??????????"
 
@@ -110,8 +105,7 @@
 
 #: data/gui/coal_survey_yn.xml
 msgid "Do coal survey?"
-msgstr ""
-"?????????????? ???????????? ???????????????? ???????????????????????????"
+msgstr "?????????????? ???????????? ???????????????? ???????????????????????????"
 
 #: data/gui/launch-good.xml
 msgid "Doing well."
@@ -141,7 +135,7 @@
 msgid "Fire!"
 msgstr "??????????!"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Food"
 msgstr "??????"
 
@@ -157,7 +151,7 @@
 msgid "Go back to Main Menu"
 msgstr "?????????????????? ?? ?????????????? ????????"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Goods"
 msgstr "????????????"
 
@@ -181,7 +175,7 @@
 msgid "Import/Export available"
 msgstr "??????????????/???????????? ????????????????"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml
+#: data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Jobs"
 msgstr "????????????"
 
@@ -203,9 +197,7 @@
 
 #: data/gui/sustain.xml
 msgid "LinCity has determined that you have a sustainable economy."
-msgstr ""
-"LinCity ?????????????? ?????????????? ?? ??????, ?????? ?? ?????? "
-"?????????????????????????????????? ??????????????????."
+msgstr "LinCity ?????????????? ?????????????? ?? ??????, ?????? ?? ?????? ?????????????????????????????????? ??????????????????."
 
 #: data/gui/mainmenu.xml data/gui/loadgame.xml
 msgid "Load"
@@ -225,37 +217,36 @@
 
 #: data/gui/mod_wind_up.xml
 msgid "Modern Windmills available"
-msgstr ""
-"?????????????????????? ???????????????? ???????????????? ????????????????"
+msgstr "?????????????????????? ???????????????? ???????????????? ????????????????"
 
 #: data/gui/pbar.xml
 msgid "Money"
 msgstr "????????????"
 
-#: data/gui/newgame.xml data/gui/mainmenu.xml
+#: data/gui/mainmenu.xml data/gui/newgame.xml
 msgid "New Game"
 msgstr "?????????? ????????"
 
-#: data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/ltindustryup.xml data/gui/universityup.xml
-#: data/gui/cricketup.xml data/gui/recycleup.xml data/gui/coalmineup.xml
-#: data/gui/riverup.xml data/gui/parkup.xml data/gui/coalpowerup.xml
-#: data/gui/solarpowerup.xml data/gui/roadup.xml data/gui/potteryup.xml
-#: data/gui/railwayup.xml data/gui/blacksmithup.xml data/gui/mod_wind_up.xml
-#: data/gui/rocketup.xml data/gui/schoolup.xml data/gui/millup.xml
-#: data/gui/import-exportup.xml data/gui/healthup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalmineup.xml
+#: data/gui/coalpowerup.xml data/gui/solarpowerup.xml data/gui/parkup.xml
+#: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/roadup.xml
+#: data/gui/rocketup.xml data/gui/millup.xml data/gui/healthup.xml
+#: data/gui/universityup.xml data/gui/recycleup.xml data/gui/blacksmithup.xml
+#: data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/import-exportup.xml data/gui/mod_wind_up.xml
 msgid "New Invention"
 msgstr "?????????? ??????????????????????"
 
-#: data/gui/coal_survey_yn.xml data/gui/bulldoze_monument_yn.xml
-#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_shanty_yn.xml
-#: data/gui/launch_rocket_yn.xml
+#: data/gui/launch_rocket_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_monument_yn.xml data/gui/coal_survey_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml
 msgid "No"
 msgstr "??????"
 
+#: data/gui/no-credit-rocket.xml data/gui/no-credit-parkland.xml
 #: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
-#: data/gui/no-credit-recycle.xml data/gui/no-credit-parkland.xml
-#: data/gui/no-credit-rocket.xml
+#: data/gui/no-credit-recycle.xml
 msgid "No Credit Available"
 msgstr "?????? ????????????????"
 
@@ -267,21 +258,20 @@
 msgid "Not Allowed"
 msgstr "??????????????????"
 
-#: data/gui/options.xml data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/fire.xml data/gui/shfire-uc.xml
-#: data/gui/ltindustryup.xml data/gui/launch-evac.xml
-#: data/gui/universityup.xml data/gui/cricketup.xml data/gui/recycleup.xml
-#: data/gui/coalmineup.xml data/gui/riverup.xml data/gui/parkup.xml
-#: data/gui/no-credit-solar-power.xml data/gui/launch-good.xml
-#: data/gui/coalpowerup.xml data/gui/solarpowerup.xml data/gui/roadup.xml
-#: data/gui/no-credit-university.xml data/gui/potteryup.xml
-#: data/gui/no-credit-recycle.xml data/gui/railwayup.xml
-#: data/gui/launch-fail.xml data/gui/nobull-tip.xml data/gui/blacksmithup.xml
-#: data/gui/mod_wind_up.xml data/gui/rocketup.xml data/gui/schoolup.xml
-#: data/gui/millup.xml data/gui/import-exportup.xml
-#: data/gui/no-credit-parkland.xml data/gui/no-credit-rocket.xml
-#: data/gui/healthup.xml data/gui/launch-gone.xml data/gui/shfire-oc.xml
-#: data/gui/sustain.xml data/gui/allgone.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/options.xml data/gui/riverup.xml
+#: data/gui/coalmineup.xml data/gui/coalpowerup.xml data/gui/launch-good.xml
+#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
+#: data/gui/railwayup.xml data/gui/nobull-tip.xml data/gui/sustain.xml
+#: data/gui/roadup.xml data/gui/rocketup.xml data/gui/millup.xml
+#: data/gui/no-credit-rocket.xml data/gui/healthup.xml
+#: data/gui/no-credit-parkland.xml data/gui/shfire-uc.xml data/gui/fire.xml
+#: data/gui/universityup.xml data/gui/launch-evac.xml data/gui/recycleup.xml
+#: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
+#: data/gui/no-credit-recycle.xml data/gui/launch-fail.xml
+#: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/import-exportup.xml data/gui/launch-gone.xml
+#: data/gui/mod_wind_up.xml data/gui/shfire-oc.xml data/gui/warning.xml
 msgid "Ok"
 msgstr "??????"
 
@@ -289,11 +279,11 @@
 msgid "Okay"
 msgstr "??????"
 
-#: data/gui/mainmenu.xml data/gui/options.xml
+#: data/gui/options.xml data/gui/mainmenu.xml
 msgid "Options"
 msgstr "??????????"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Ore"
 msgstr "????????"
 
@@ -321,7 +311,7 @@
 msgid "Press this button to show statistics"
 msgstr "??????????????, ?????? ???? ?????????????? ????????????????????"
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Product"
 msgstr "??????????????"
 
@@ -367,8 +357,7 @@
 
 #: data/gui/speedpanel.xml
 msgid "Run the simulation with very fast speed"
-msgstr ""
-"?????????????????? ???????? ?? ?????????? ?????????????? ??????????????????"
+msgstr "?????????????????? ???????? ?? ?????????? ?????????????? ??????????????????"
 
 #: data/gui/mainmenu.xml
 msgid "Save"
@@ -386,23 +375,20 @@
 msgid ""
 "See the help screen for more information on coal mines and coal surveys."
 msgstr ""
-"???????????????? ???????? ???????????? ?????? ?????????????? "
-"???????????????????? ???? ?????????? ?????????? ?? ???????????????? "
+"???????????????? ???????? ???????????? ?????? ?????????????? ???????????????????? ???? ?????????? ?????????? ?? ???????????????? "
 "??????????????."
 
-#: data/gui/firestationup.xml data/gui/hvindustryup.xml
-#: data/gui/windmillup.xml data/gui/ltindustryup.xml data/gui/universityup.xml
-#: data/gui/cricketup.xml data/gui/recycleup.xml data/gui/riverup.xml
-#: data/gui/parkup.xml data/gui/coalpowerup.xml data/gui/solarpowerup.xml
-#: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/blacksmithup.xml
-#: data/gui/mod_wind_up.xml data/gui/rocketup.xml data/gui/schoolup.xml
-#: data/gui/millup.xml data/gui/healthup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalpowerup.xml
+#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
+#: data/gui/railwayup.xml data/gui/rocketup.xml data/gui/millup.xml
+#: data/gui/healthup.xml data/gui/universityup.xml data/gui/recycleup.xml
+#: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
+#: data/gui/mod_wind_up.xml
 msgid "See the help screen for more information."
-msgstr ""
-"???????????????? ???????? ???????????? ?????? ?????????????? "
-"????????????????????."
+msgstr "???????????????? ???????? ???????????? ?????? ?????????????? ????????????????????."
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Sell"
 msgstr "??????????????"
 
@@ -413,8 +399,7 @@
 #: data/gui/minimap.xml
 msgid "Show Income and Expenses. Click this tab again to cycle through views."
 msgstr ""
-"???????????????? ?????????????? ?? ??????????????. ?????????????????? "
-"??????????, ?????? ???? ?????????????? ???????????? ????????????."
+"???????????????? ?????????????? ?? ??????????????. ?????????????????? ??????????, ?????? ???? ?????????????? ???????????? ????????????."
 
 #: data/gui/minimapswitchbuttons.xml
 msgid "Show coal depots"
@@ -448,7 +433,7 @@
 msgid "Show power supply"
 msgstr "???????????????? ?????????????? ????????"
 
-#: data/gui/minimap.xml 
+#: data/gui/minimap.xml
 msgid "Show resources."
 msgstr ""
 
@@ -500,7 +485,7 @@
 msgid "Stats"
 msgstr "????-????"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Steel"
 msgstr "??????????"
 
@@ -515,8 +500,7 @@
 #: data/gui/coal_survey_yn.xml
 msgid "This will cost you 1 million once. After that it is free to call again."
 msgstr ""
-"?????? ???????????????? ?????????????? 1 ?????????????? ????????????, ?? "
-"???????????????????? ?????????????? ???? ????????????????. "
+"?????? ???????????????? ?????????????? 1 ?????????????? ????????????, ?? ???????????????????? ?????????????? ???? ????????????????. "
 
 #: data/gui/launch-gone.xml
 msgid "Total Evacuation Complete."
@@ -526,7 +510,7 @@
 msgid "Trade Settings"
 msgstr ""
 
-#: data/gui/creditslist.xml 
+#: data/gui/creditslist.xml
 msgid "Translation"
 msgstr ""
 
@@ -534,20 +518,19 @@
 msgid "University available"
 msgstr "???????????????????????? ????????????????. "
 
-#: data/gui/bulldoze_monument_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_monument_yn.xml
 #: data/gui/bulldoze_shanty_yn.xml
 msgid "Want to bulldoze?"
 msgstr "???????????? ?????????????"
 
-#: data/gui/bulldoze_monument_yn.xml data/gui/bulldoze_river_yn.xml
-#: data/gui/bulldoze_shanty_yn.xml
+#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_monument_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml data/gui/warning.xml
 msgid "Warning"
 msgstr "????????????????"
 
 #: data/gui/bulldoze_monument_yn.xml
 msgid "Warning: Bulldozing monuments is expensive"
-msgstr ""
-"????????????????: ?????????????? ?????????????????????? ??????????????????. "
+msgstr "????????????????: ?????????????? ?????????????????????? ??????????????????. "
 
 #: data/gui/bulldoze_shanty_yn.xml
 msgid "Warning: Bulldozing shanties is dangerous."
@@ -559,16 +542,15 @@
 
 #: data/gui/launch-gone.xml
 msgid "Well done you have evacuated all your people."
-msgstr ""
-"??????????????????????, ???? ???????????????????????? ???????? ??????????."
+msgstr "??????????????????????, ???? ???????????????????????? ???????? ??????????."
 
 #: data/gui/windmillup.xml
 msgid "Windmills available"
 msgstr "???????????????? ???????????????? ????????????????"
 
-#: data/gui/coal_survey_yn.xml data/gui/bulldoze_monument_yn.xml
-#: data/gui/bulldoze_river_yn.xml data/gui/bulldoze_shanty_yn.xml
-#: data/gui/launch_rocket_yn.xml
+#: data/gui/launch_rocket_yn.xml data/gui/bulldoze_river_yn.xml
+#: data/gui/bulldoze_monument_yn.xml data/gui/coal_survey_yn.xml
+#: data/gui/bulldoze_shanty_yn.xml
 msgid "Yes"
 msgstr "????"
 
@@ -588,10 +570,8 @@
 "You can now import and export coal, goods, ore and steel. Read the help "
 "pages on these subjects to find out how to use them. "
 msgstr ""
-"???????????? ???? ?????????????? ???????????????? ?? ?????????????????? "
-"??????????????. ?????? ??????????, ?????????? ?? ????????????. "
-"???????????????????? ????????????, ?????? ???? ?????????? ??????????, ?????? "
-"???????? ????????????????????????."
+"???????????? ???? ?????????????? ???????????????? ?? ?????????????????? ??????????????. ?????? ??????????, ?????????? ?? ????????????. "
+"???????????????????? ????????????, ?????? ???? ?????????? ??????????, ?????? ???????? ????????????????????????."
 
 #: data/gui/no-credit-parkland.xml
 msgid ""
@@ -628,25 +608,22 @@
 "You have evacuated 1000 people. You might want to reduce the size of your "
 "economy to reflect the reduced population. "
 msgstr ""
-"???? ???????????? 1000 ??????????????. ???????????? ?????????? "
-"?????????????? ???? ???????????????????? ?? ???????????? ??????????????????."
+"???? ???????????? 1000 ??????????????. ???????????? ?????????? ?????????????? ???? ???????????????????? ?? ???????????? "
+"??????????????????."
 
 #: data/gui/blacksmithup.xml
 msgid ""
 "You have reached the tech level which enables you to build blacksmiths. "
 "Blacksmiths use jobs and steel to make goods."
 msgstr ""
-"?????????????? ???????????????? ???????????????? ?????????????????? "
-"?????????????? ??????????????. ?????????????? ???????? ???????????? ?? "
+"?????????????? ???????????????? ???????????????? ?????????????????? ?????????????? ??????????????. ?????????????? ???????? ???????????? ?? "
 "?????????????????? ?????????????????????? ????????????."
 
 #: data/gui/coalpowerup.xml
 msgid ""
 "You have reached the tech level which enables you to build coal fired power "
 "stations."
-msgstr ""
-"?????????????? ???????????????? ???????????????? ?????????????????? "
-"?????????????? ???????????????? ????????????????????????????."
+msgstr "?????????????? ???????????????? ???????????????? ?????????????????? ?????????????? ???????????????? ????????????????????????????."
 
 #: data/gui/firestationup.xml
 msgid ""
@@ -654,8 +631,7 @@
 "Fire stations prevent most fires from starting. If you haven't had any fires "
 "yet, you might not think you need them."
 msgstr ""
-"?????????????? ???????????????? ???????????????? ?????????????????? "
-"?????????????? ???????????????? ??????????????. ?????????????? ???????????? "
+"?????????????? ???????????????? ???????????????? ?????????????????? ?????????????? ???????????????? ??????????????. ?????????????? ???????????? "
 "???? ??????, ?????? ???? ???? ???????????????????? ????????????. "
 
 #: data/gui/healthup.xml
@@ -663,17 +639,14 @@
 "You have reached the tech level which enables you to build health centres. "
 "Heath centres reduce the number of people killed by pollution and increase "
 "overall productivity."
-msgstr ""
-"?????????????? ???????????????? ???????????????? ?????????????????? "
-"?????????????? ????????????????."
+msgstr "?????????????? ???????????????? ???????????????? ?????????????????? ?????????????? ????????????????."
 
 #: data/gui/hvindustryup.xml
 msgid ""
 "You have reached the tech level which enables you to build heavy industry "
 "(steel works). Heavy industry produces steel. "
 msgstr ""
-"?????????????? ???????????????? ???????????????? ?????????????????? "
-"?????????????? ?????????????? ??????????????????(?????????????????????? "
+"?????????????? ???????????????? ???????????????? ?????????????????? ?????????????? ?????????????? ??????????????????(?????????????????????? "
 "??????????)."
 
 #: data/gui/ltindustryup.xml
@@ -681,8 +654,7 @@
 "You have reached the tech level which enables you to build light industry. "
 "Light industry produces goods. "
 msgstr ""
-"?????????????? ???????????????? ???????????????? ?????????????????? "
-"?????????????? ???????????? ??????????????????. ?????? ?????????????? "
+"?????????????? ???????????????? ???????????????? ?????????????????? ?????????????? ???????????? ??????????????????. ?????? ?????????????? "
 "????????????."
 
 #: data/gui/millup.xml
@@ -690,18 +662,15 @@
 "You have reached the tech level which enables you to build mills. Mills use "
 "jobs and food to make goods. Watch out, they can use a lot of food! "
 msgstr ""
-"?????????????? ???????????????? ???????????????? ?????????????????? "
-"?????????????? ????????????????. ?????? ???????? ???????????? ?? "
-"?????????????????? ?????????????????????? ???????????? ???? ??????. ?????? "
-"?????????? ?????????????????? ?????????????? ?????????? ??????!"
+"?????????????? ???????????????? ???????????????? ?????????????????? ?????????????? ????????????????. ?????? ???????? ???????????? ?? "
+"?????????????????? ?????????????????????? ???????????? ???? ??????. ?????? ?????????? ?????????????????? ?????????????? ?????????? ??????!"
 
 #: data/gui/mod_wind_up.xml
 msgid ""
 "You have reached the tech level which enables you to build modern, more "
 "efficient, windmills. "
 msgstr ""
-"?????????????? ???????????????? ???????????????? ?????????????????? "
-"?????????????? ??????????????????????, ?????????????????????? "
+"?????????????? ???????????????? ???????????????? ?????????????????? ?????????????? ??????????????????????, ?????????????????????? "
 "???????????????? ????????????????. "
 
 #: data/gui/parkup.xml
@@ -709,8 +678,8 @@
 "You have reached the tech level which enables you to build parks. Parks are "
 "used to absorb pollution. "
 msgstr ""
-"?????????????? ???????????????? ???????????????? ?????????????????? "
-"?????????????? ??????????. ?????? ?????????????????? ???? ??????????????????."
+"?????????????? ???????????????? ???????????????? ?????????????????? ?????????????? ??????????. ?????? ?????????????????? ???? "
+"??????????????????."
 
 #: data/gui/potteryup.xml
 msgid ""
@@ -720,23 +689,17 @@
 
 #: data/gui/railwayup.xml
 msgid "You have reached the tech level which enables you to build railways. "
-msgstr ""
-"?????????????? ???????????????? ???????????????? ?????????????????? "
-"?????????????? ???????????????? ????????????."
+msgstr "?????????????? ???????????????? ???????????????? ?????????????????? ?????????????? ???????????????? ????????????."
 
 #: data/gui/riverup.xml
 msgid "You have reached the tech level which enables you to build rivers. "
-msgstr ""
-"?????????????? ???????????????? ???????????????? ?????????????????? "
-"?????????????????? ????????."
+msgstr "?????????????? ???????????????? ???????????????? ?????????????????? ?????????????????? ????????."
 
 #: data/gui/roadup.xml
 msgid ""
 "You have reached the tech level which enables you to build roads. See the "
 "help screen for more information."
-msgstr ""
-"?????????????? ???????????????? ???????????????? ?????????????????? "
-"?????????????? ????????????."
+msgstr "?????????????? ???????????????? ???????????????? ?????????????????? ?????????????? ????????????."
 
 #: data/gui/rocketup.xml
 msgid ""
@@ -744,41 +707,32 @@
 "pads. Rockets enable you to evacuate your population and is a way to 'win' "
 "the game."
 msgstr ""
-"?????????????? ???????????????? ???????????????? ?????????????????? "
-"?????????????? ???????????????? ????????????????. ???? ?????????????? "
-"?????????? ???????????? ???????? ?????????? ?? ???????????? ??????, ?????? "
-"?????????? ???????????????? ????????."
+"?????????????? ???????????????? ???????????????? ?????????????????? ?????????????? ???????????????? ????????????????. ???? ?????????????? "
+"?????????? ???????????? ???????? ?????????? ?? ???????????? ??????, ?????? ?????????? ???????????????? ????????."
 
 #: data/gui/schoolup.xml
 msgid ""
 "You have reached the tech level which enables you to build schools. Schools "
 "use jobs and goods to increase tech level. "
 msgstr ""
-"?????????????? ???????????????? ???????????????? ?????????????????? "
-"?????????????? ??????????. ?????????? ???????? ???????????? ?? ?????????? "
+"?????????????? ???????????????? ???????????????? ?????????????????? ?????????????? ??????????. ?????????? ???????? ???????????? ?? ?????????? "
 "???????????????????????? ?? ?????????????? ??????????????."
 
 #: data/gui/solarpowerup.xml
 msgid ""
 "You have reached the tech level which enables you to build solar power "
 "stations. "
-msgstr ""
-"?????????????? ???????????????? ???????????????? ?????????????????? "
-"?????????????? ?????????????????? ????????????????????????????."
+msgstr "?????????????? ???????????????? ???????????????? ?????????????????? ?????????????? ?????????????????? ????????????????????????????."
 
 #: data/gui/universityup.xml
 msgid ""
 "You have reached the tech level which enables you to build universities. "
 "Universities produces PhDs, which produce more technology. "
-msgstr ""
-"?????????????? ???????????????? ???????????????? ?????????????????? "
-"?????????????? ????????????????????????. "
+msgstr "?????????????? ???????????????? ???????????????? ?????????????????? ?????????????? ????????????????????????. "
 
 #: data/gui/windmillup.xml
 msgid "You have reached the tech level which enables you to build windmills. "
-msgstr ""
-"?????????????? ???????????????? ???????????????? ?????????????????? "
-"?????????????? ???????????????? ????????????????. "
+msgstr "?????????????? ???????????????? ???????????????? ?????????????????? ?????????????? ???????????????? ????????????????. "
 
 #: data/gui/coalmineup.xml
 msgid ""
@@ -791,15 +745,13 @@
 "Recycling centres recycle used goods back into ore. "
 msgstr ""
 
-#: data/gui/launch-gone.xml data/gui/sustain.xml
+#: data/gui/sustain.xml data/gui/launch-gone.xml
 msgid "You have won the game."
 msgstr "???? ????????????????!"
 
 #: data/gui/allgone.xml
 msgid "You should start a new career elsewhere."
-msgstr ""
-"???? ???????????? ?????????????????????? ?????????????????????????? "
-"??????-???????????? ??????."
+msgstr "???? ???????????? ?????????????????????? ?????????????????????????? ??????-???????????? ??????."
 
 #: data/gui/cricketup.xml
 msgid ""
@@ -814,10 +766,8 @@
 "technology for evacuation. You must launch five more unmanned rockets to "
 "restore confidence."
 msgstr ""
-"???????? ???????????? ???????????????????? ?????????? ????????????. ???????? "
-"?????????????????? ???????????? ?? ??????. ???? ???????????? "
-"?????????????????? ?????? 5 ??????????, ?????? ???? ????????????????, ?????? "
-"?????? ??????????????????."
+"???????? ???????????? ???????????????????? ?????????? ????????????. ???????? ?????????????????? ???????????? ?? ??????. ???? ???????????? "
+"?????????????????? ?????? 5 ??????????, ?????? ???? ????????????????, ?????? ?????? ??????????????????."
 
 #: data/gui/minimap.xml
 msgid "[+] Zoom in view so that less buildings but more details are visible"
@@ -837,9 +787,7 @@
 
 #: data/gui/minimap.xml
 msgid "[v] Cycle through MiniMap overlay modes. "
-msgstr ""
-"[v] ???????????????? ???? ???????????????? ?????????? ????, ?????? "
-"???????????????????? ???? ????????-??????????."
+msgstr "[v] ???????????????? ???? ???????????????? ?????????? ????, ?????? ???????????????????? ???? ????????-??????????."
 
 #: data/gui/savegame.xml
 msgid "save to selected slot"

Modified: trunk/data/locale/gui/sv.po
===================================================================
--- trunk/data/locale/gui/sv.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/gui/sv.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -8,7 +8,7 @@
 msgstr ""
 "Project-Id-Version: lincity-ng 1.1.0\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: %1\n"
+"POT-Creation-Date: Tue Dec  4 01:12:57 2007\n"
 "PO-Revision-Date: 2007-08-09 23:44+0100\n"
 "Last-Translator: Daniel Nylander <po at danielnylander.se>\n"
 "Language-Team: Swedish <tp-sv at listor.tp-sv.se>\n"
@@ -38,11 +38,11 @@
 "A fire has broken out at a shanty town. The fire is OUT OF CONTROL and may "
 "spread to other areas. "
 msgstr ""
-"En brand har brutit ut i en k??kstad. Branden ??r INTE UNDER KONTROLL och "
-"kan sprida sig till andra omr??den."
+"En brand har brutit ut i en k??kstad. Branden ??r INTE UNDER KONTROLL och kan "
+"sprida sig till andra omr??den."
 
-#: data/gui/newgame.xml data/gui/loadgame.xml data/gui/credits.xml
-#: data/gui/savegame.xml
+#: data/gui/credits.xml data/gui/savegame.xml data/gui/newgame.xml
+#: data/gui/loadgame.xml
 msgid "Back"
 msgstr "Tillbaka"
 
@@ -70,7 +70,7 @@
 msgid "Bulldozing a shanty town costs a lot of money and may cause a fire."
 msgstr "Riva en k??kstad kostar mycket pengar och kan orsaka en brand."
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Buy"
 msgstr "K??p"
 
@@ -78,7 +78,7 @@
 msgid "Choose Scenario"
 msgstr "V??lj scenario"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Coal"
 msgstr "Kol"
 
@@ -138,7 +138,7 @@
 msgid "Fire!"
 msgstr "Brand!"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Food"
 msgstr "Mat"
 
@@ -154,7 +154,7 @@
 msgid "Go back to Main Menu"
 msgstr "G?? tillbaka till huvudmenyn"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Goods"
 msgstr "Varor"
 
@@ -178,7 +178,7 @@
 msgid "Import/Export available"
 msgstr "Import/Export tillg??nglig"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml
+#: data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Jobs"
 msgstr "Jobb"
 
@@ -226,11 +226,11 @@
 msgid "Money"
 msgstr "Pengar"
 
-#: data/gui/newgame.xml data/gui/mainmenu.xml
+#: data/gui/mainmenu.xml data/gui/newgame.xml
 msgid "New Game"
 msgstr "Nytt spel"
 
-#: data/gui/hvindustryup.xml data/gui/windmillup.xml data/gui/ltindustryup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
 #: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalmineup.xml
 #: data/gui/coalpowerup.xml data/gui/solarpowerup.xml data/gui/parkup.xml
 #: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/roadup.xml
@@ -257,24 +257,24 @@
 msgid "Nobody Home"
 msgstr "Ingen hemma"
 
-#: data/gui/nobull-tip.xml data/gui/warning.xml
+#: data/gui/nobull-tip.xml
 msgid "Not Allowed"
 msgstr "Inte till??tet"
 
-#: data/gui/hvindustryup.xml data/gui/windmillup.xml data/gui/ltindustryup.xml
-#: data/gui/cricketup.xml data/gui/fire.xml data/gui/options.xml
-#: data/gui/riverup.xml data/gui/coalmineup.xml data/gui/coalpowerup.xml
-#: data/gui/launch-good.xml data/gui/solarpowerup.xml data/gui/parkup.xml
-#: data/gui/potteryup.xml data/gui/railwayup.xml data/gui/nobull-tip.xml
-#: data/gui/sustain.xml data/gui/roadup.xml data/gui/rocketup.xml
-#: data/gui/millup.xml data/gui/no-credit-rocket.xml data/gui/healthup.xml
-#: data/gui/no-credit-parkland.xml data/gui/shfire-uc.xml
-#: data/gui/launch-evac.xml data/gui/universityup.xml data/gui/recycleup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
+#: data/gui/cricketup.xml data/gui/options.xml data/gui/riverup.xml
+#: data/gui/coalmineup.xml data/gui/coalpowerup.xml data/gui/launch-good.xml
+#: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
+#: data/gui/railwayup.xml data/gui/nobull-tip.xml data/gui/sustain.xml
+#: data/gui/roadup.xml data/gui/rocketup.xml data/gui/millup.xml
+#: data/gui/no-credit-rocket.xml data/gui/healthup.xml
+#: data/gui/no-credit-parkland.xml data/gui/shfire-uc.xml data/gui/fire.xml
+#: data/gui/universityup.xml data/gui/launch-evac.xml data/gui/recycleup.xml
 #: data/gui/no-credit-solar-power.xml data/gui/no-credit-university.xml
 #: data/gui/no-credit-recycle.xml data/gui/launch-fail.xml
 #: data/gui/blacksmithup.xml data/gui/schoolup.xml data/gui/firestationup.xml
 #: data/gui/import-exportup.xml data/gui/launch-gone.xml
-#: data/gui/mod_wind_up.xml data/gui/warning.xml data/gui/shfire-oc.xml
+#: data/gui/mod_wind_up.xml data/gui/shfire-oc.xml data/gui/warning.xml
 msgid "Ok"
 msgstr "Ok"
 
@@ -282,11 +282,11 @@
 msgid "Okay"
 msgstr "Okej"
 
-#: data/gui/mainmenu.xml data/gui/options.xml
+#: data/gui/options.xml data/gui/mainmenu.xml
 msgid "Options"
 msgstr "Inst??llningar"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Ore"
 msgstr "Malm"
 
@@ -314,7 +314,7 @@
 msgid "Press this button to show statistics"
 msgstr "Tryck denna knapp f??r att visa statistik"
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Product"
 msgstr "Produkt"
 
@@ -380,7 +380,7 @@
 msgstr ""
 "Se hj??lpsk??rmen f??r mer information om kolgruvor och s??kning efter kol."
 
-#: data/gui/hvindustryup.xml data/gui/windmillup.xml data/gui/ltindustryup.xml
+#: data/gui/windmillup.xml data/gui/hvindustryup.xml data/gui/ltindustryup.xml
 #: data/gui/cricketup.xml data/gui/riverup.xml data/gui/coalpowerup.xml
 #: data/gui/solarpowerup.xml data/gui/parkup.xml data/gui/potteryup.xml
 #: data/gui/railwayup.xml data/gui/rocketup.xml data/gui/millup.xml
@@ -390,7 +390,7 @@
 msgid "See the help screen for more information."
 msgstr "Se hj??lpsk??rmen f??r mer information."
 
-#: data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml
 msgid "Sell"
 msgstr "S??lj"
 
@@ -400,8 +400,7 @@
 
 #: data/gui/minimap.xml
 msgid "Show Income and Expenses. Click this tab again to cycle through views."
-msgstr ""
-"Visa inkomst och utgifter. Klicka h??r igen f??r att v??xla mellan vyer."
+msgstr "Visa inkomst och utgifter. Klicka h??r igen f??r att v??xla mellan vyer."
 
 #: data/gui/minimapswitchbuttons.xml
 msgid "Show coal depots"
@@ -487,7 +486,7 @@
 msgid "Stats"
 msgstr "Statistik"
 
-#: data/gui/pbar.xml data/gui/tradedialog.xml data/gui/portdialog.xml
+#: data/gui/portdialog.xml data/gui/tradedialog.xml data/gui/pbar.xml
 msgid "Steel"
 msgstr "St??l"
 
@@ -567,8 +566,8 @@
 "clicking on the rocket area."
 msgstr ""
 "Du kan avfyra raketen nu eller v??nta tills senare. Om du v??ntar kommer den "
-"forts??tta att kosta dig pengar f??r att h??lla raketen klar. Avfyra den "
-"senare genom att klicka p?? raketomr??det."
+"forts??tta att kosta dig pengar f??r att h??lla raketen klar. Avfyra den senare "
+"genom att klicka p?? raketomr??det."
 
 #: data/gui/import-exportup.xml
 msgid ""
@@ -638,8 +637,7 @@
 msgid ""
 "You have reached the tech level which enables you to build coal fired power "
 "stations."
-msgstr ""
-"Du har n??tt fram till teknologiniv??n som l??ter dig bygga kolkraftverk."
+msgstr "Du har n??tt fram till teknologiniv??n som l??ter dig bygga kolkraftverk."
 
 #: data/gui/firestationup.xml
 msgid ""
@@ -674,8 +672,8 @@
 "You have reached the tech level which enables you to build light industry. "
 "Light industry produces goods. "
 msgstr ""
-"Du har n??tt fram till teknologiniv??n som l??ter dig bygga industri. "
-"Industri producerar varor. "
+"Du har n??tt fram till teknologiniv??n som l??ter dig bygga industri. Industri "
+"producerar varor. "
 
 #: data/gui/millup.xml
 msgid ""
@@ -683,8 +681,8 @@
 "jobs and food to make goods. Watch out, they can use a lot of food! "
 msgstr ""
 "Du har n??tt fram till teknologiniv??n som l??ter dig bygga verkst??der. "
-"Verkst??der anv??nder jobb och mat f??r att producera varor. T??nk p?? att "
-"de kan anv??nda mycket mat! "
+"Verkst??der anv??nder jobb och mat f??r att producera varor. T??nk p?? att de kan "
+"anv??nda mycket mat! "
 
 #: data/gui/mod_wind_up.xml
 msgid ""
@@ -708,13 +706,12 @@
 "Potteries use jobs and ore to make goods. (You need ore mines to get ore) "
 msgstr ""
 "Du har n??tt fram till teknologiniv??n som l??ter dig bygga keramikfabriker. "
-"Keramikfabriker anv??nder jobb och malm f??r att producera varor. (Du "
-"beh??ver malmgruvor f??r att f?? fram malm) "
+"Keramikfabriker anv??nder jobb och malm f??r att producera varor. (Du beh??ver "
+"malmgruvor f??r att f?? fram malm) "
 
 #: data/gui/railwayup.xml
 msgid "You have reached the tech level which enables you to build railways. "
-msgstr ""
-"Du har n??tt fram till teknologiniv??n som l??ter dig bygga j??rnv??g. "
+msgstr "Du har n??tt fram till teknologiniv??n som l??ter dig bygga j??rnv??g. "
 
 #: data/gui/riverup.xml
 msgid "You have reached the tech level which enables you to build rivers. "
@@ -770,8 +767,7 @@
 msgid ""
 "You have reached the tech level which enables you to dig deep coal mines."
 msgstr ""
-"Du har n??tt fram till teknologiniv??n som l??ter dig gr??va djupare "
-"kolgruvor."
+"Du har n??tt fram till teknologiniv??n som l??ter dig gr??va djupare kolgruvor."
 
 #: data/gui/recycleup.xml
 msgid ""
@@ -779,8 +775,8 @@
 "Recycling centres recycle used goods back into ore. "
 msgstr ""
 "Du har n??tt fram till teknologiniv??n som l??ter dig att ta fram "
-"??tervinningsstationer. ??tervinningsstationer ??tervinner anv??nda varor "
-"och ger dig malm. "
+"??tervinningsstationer. ??tervinningsstationer ??tervinner anv??nda varor och "
+"ger dig malm. "
 
 #: data/gui/sustain.xml data/gui/launch-gone.xml
 msgid "You have won the game."
@@ -806,9 +802,9 @@
 "technology for evacuation. You must launch five more unmanned rockets to "
 "restore confidence."
 msgstr ""
-"Din raket kraschade kort efter avfyrning. Folk har inte l??ngre n??gon "
-"tilltro f??r teknologin f??r evakuering. Du m??ste avfyra fem obemannade "
-"raketer till f??r att ??terst??lla f??rtroendet."
+"Din raket kraschade kort efter avfyrning. Folk har inte l??ngre n??gon tilltro "
+"f??r teknologin f??r evakuering. Du m??ste avfyra fem obemannade raketer till "
+"f??r att ??terst??lla f??rtroendet."
 
 #: data/gui/minimap.xml
 msgid "[+] Zoom in view so that less buildings but more details are visible"

Modified: trunk/data/locale/nl.po
===================================================================
--- trunk/data/locale/nl.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/nl.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -11,7 +11,7 @@
 msgstr ""
 "Project-Id-Version: nl\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-01-27 22:03+0100\n"
+"POT-Creation-Date: 2007-12-04 00:29+0100\n"
 "PO-Revision-Date: 2007-04-12 23:58+0200\n"
 "Last-Translator: Ronald Stroethoff <stroet43 at zonnet.nl>\n"
 "Language-Team: Nederlands\n"
@@ -20,495 +20,502 @@
 "Content-Transfer-Encoding: 8bit\n"
 "X-Generator: KBabel 1.11.4\n"
 
-#: src/lincity/fileutil.cpp:292 src/lincity/fileutil.cpp:341
-msgid "Error. Can't find LINCITY_HOME"
-msgstr "Fout: Kan LINCITY_HOME niet vinden"
-
-#: src/lincity/fileutil.cpp:561
-msgid "Error verifying package. Can't find colour.pal."
-msgstr ""
-"Fout bij het controleren van het pakket. Kan het kleurenpallet niet vinden"
-
-#: src/lincity/fileutil.cpp:580 src/lincity/fileutil.cpp:589
-#, c-format
-msgid "Couldn't create the save directory '%s'\n"
-msgstr "Kan de bewaar map '%s' niet aanmaken\n"
-
-#: src/lincity/fileutil.cpp:635
-#, c-format
-msgid "Out of memory: malloc failure\n"
-msgstr "Te weinig geheugen: malloc faalt\n"
-
-#: src/lincity/power.cpp:93
-msgid "You have too many power grids. Join some of them"
-msgstr ""
-
-#: src/lincity/engine.cpp:121
+#: src/lincity/engine.cpp:120
 msgid ""
 "ERROR: group does not exist. This should not happen! Please consider filling "
 "a bug report to lincity-ng team, with the saved game and what you did :-) "
 msgstr ""
 
-#: src/lincity/engine.cpp:147
+#: src/lincity/engine.cpp:152
 msgid "Port must be connected to river all along right side."
 msgstr ""
 
-#: src/lincity/engine.cpp:156 src/lincity/engine.cpp:165
+#: src/lincity/engine.cpp:161 src/lincity/engine.cpp:170
 msgid "Too many substations + windmills. You cannot build one more"
 msgstr ""
 
-#: src/lincity/engine.cpp:195
+#: src/lincity/engine.cpp:200
 msgid "Too many markets. You cannot build one more"
 msgstr ""
 
-#: src/lincity/engine.cpp:218
+#: src/lincity/engine.cpp:223
 msgid "You can't build a tip here: this area was once a landfill"
 msgstr ""
 
-#: src/lincity/engine.cpp:243
+#: src/lincity/engine.cpp:248
 msgid "You can't build a mine here: This area was once a landfill"
 msgstr ""
 
-#: src/lincity/engine.cpp:247
+#: src/lincity/engine.cpp:252
 msgid "You can't build a mine here: there is no ore left at this site"
 msgstr ""
 
-#: src/lincity/engine.cpp:259
+#: src/lincity/engine.cpp:264
 msgid "You can't build a water well here: it is all desert."
 msgstr ""
 
-#: src/lincity/engine.cpp:269
+#: src/lincity/engine.cpp:274
 msgid "You can't build a park here: it is a desert, parks need water"
 msgstr ""
 
-#: src/lincity/engine.cpp:691
+#: src/lincity/engine.cpp:485
 msgid "It's at a power line."
 msgstr "Het is bij een electriciteitskabel"
 
-#: src/lincity/engine.cpp:693
+#: src/lincity/engine.cpp:487
 msgid "It's at a solar power station."
 msgstr "Het is bij een zonne-energiecentrale"
 
-#: src/lincity/engine.cpp:695
+#: src/lincity/engine.cpp:489
 msgid "It's at a substation."
 msgstr "Het is bij een transformatorhuisje"
 
-#: src/lincity/engine.cpp:697
+#: src/lincity/engine.cpp:491
 msgid "It's at a residential area."
 msgstr "Het is bij een woonwijk."
 
-#: src/lincity/engine.cpp:699
+#: src/lincity/engine.cpp:493
 msgid "It's at a farm."
 msgstr "Het is bij een boerderij."
 
-#: src/lincity/engine.cpp:701
+#: src/lincity/engine.cpp:495
 msgid "It's at a market."
 msgstr "Het is bij een markt."
 
-#: src/lincity/engine.cpp:703
+#: src/lincity/engine.cpp:497
 msgid "It's at a track."
 msgstr "Het is bij een landweg."
 
-#: src/lincity/engine.cpp:705
+#: src/lincity/engine.cpp:499
 msgid "It's at a coal mine."
 msgstr "Het is bij een steenkoolmijn."
 
-#: src/lincity/engine.cpp:707
+#: src/lincity/engine.cpp:501
 msgid "It's at a railway."
 msgstr "Het is bij een spoorweg."
 
-#: src/lincity/engine.cpp:709
+#: src/lincity/engine.cpp:503
 msgid "It's at a coal power station."
 msgstr "Het is bij een kolencentrale."
 
-#: src/lincity/engine.cpp:711
+#: src/lincity/engine.cpp:505
 msgid "It's at a road."
 msgstr "Het is bij een straat."
 
-#: src/lincity/engine.cpp:713
+#: src/lincity/engine.cpp:507
 msgid "It's at light industry."
 msgstr "Het is bij lichte industrie."
 
-#: src/lincity/engine.cpp:715
+#: src/lincity/engine.cpp:509
 msgid "It's at a university."
 msgstr "Het is bij een universiteit."
 
-#: src/lincity/engine.cpp:717
+#: src/lincity/engine.cpp:511
 msgid "It's at a commune."
 msgstr "Het is bij een houtskool-branderij."
 
-#: src/lincity/engine.cpp:719
+#: src/lincity/engine.cpp:513
 msgid "It's at a tip."
 msgstr "Het is bij een vuilstort."
 
-#: src/lincity/engine.cpp:721
+#: src/lincity/engine.cpp:515
 msgid "It's at a port."
 msgstr "Het is bij een haven."
 
-#: src/lincity/engine.cpp:723
+#: src/lincity/engine.cpp:517
 msgid "It's at a steel works."
 msgstr "Het is bij een staalfabriek."
 
-#: src/lincity/engine.cpp:725
+#: src/lincity/engine.cpp:519
 msgid "It's at a recycle centre."
 msgstr "Het is bij een recycleercentrum."
 
-#: src/lincity/engine.cpp:727
+#: src/lincity/engine.cpp:521
 msgid "It's at a health centre."
 msgstr "Het is bij een ziekenhuis."
 
-#: src/lincity/engine.cpp:729
+#: src/lincity/engine.cpp:523
 msgid "It's at a rocket site."
 msgstr "Het is bij een lanceerbasis."
 
-#: src/lincity/engine.cpp:731
+#: src/lincity/engine.cpp:525
 msgid "It's at a windmill."
 msgstr "Het is bij een windmolen."
 
-#: src/lincity/engine.cpp:733
+#: src/lincity/engine.cpp:527
 msgid "It's at a school."
 msgstr "Het is bij een school."
 
-#: src/lincity/engine.cpp:735
+#: src/lincity/engine.cpp:529
 msgid "It's at a blacksmith."
 msgstr "Het is bij een smidse."
 
-#: src/lincity/engine.cpp:737
+#: src/lincity/engine.cpp:531
 msgid "It's at a mill."
 msgstr "Het is bij een textielfabriek."
 
-#: src/lincity/engine.cpp:739
+#: src/lincity/engine.cpp:533
 msgid "It's at a pottery."
 msgstr "Het is bij een pottenbakkerij."
 
-#: src/lincity/engine.cpp:741
+#: src/lincity/engine.cpp:535
 msgid "It's at a fire station!!!."
 msgstr "Het is bij een brandweerkazerne!!!"
 
-#: src/lincity/engine.cpp:743
+#: src/lincity/engine.cpp:537
 msgid "It's at a sports field!!!."
 msgstr "Het is bij een sportveld!!!"
 
-#: src/lincity/engine.cpp:745
+#: src/lincity/engine.cpp:539
 msgid "It's at a shanty town."
 msgstr "Het is bij een krottenwijk"
 
-#: src/lincity/engine.cpp:747
+#: src/lincity/engine.cpp:541
 msgid "UNKNOWN!"
 msgstr "ONBEKEND!"
 
-#: src/lincity/lintypes.cpp:22
+#: src/lincity/lintypes.cpp:20
 msgid "Empty"
 msgstr "Leeg"
 
-#: src/lincity/lintypes.cpp:34
+#: src/lincity/lintypes.cpp:32
 msgid "Power line"
 msgstr "Electriciteitsdraad"
 
-#: src/lincity/lintypes.cpp:46
+#: src/lincity/lintypes.cpp:43
 msgid "Solar PS"
 msgstr "Zonne-energie centrale"
 
-#: src/lincity/lintypes.cpp:58 src/lincity/modules/substation.cpp:91
+#: src/lincity/lintypes.cpp:54 src/lincity/modules/substation.cpp:93
 msgid "Substation"
 msgstr "Transformatorhuisje"
 
-#: src/lincity/lintypes.cpp:70
+#: src/lincity/lintypes.cpp:65
 msgid "Residential LL"
 msgstr "Woonwijk LL"
 
-#: src/lincity/lintypes.cpp:82
+#: src/lincity/lintypes.cpp:76
 msgid "Farm"
 msgstr "Boerderij"
 
-#: src/lincity/lintypes.cpp:94 src/lincity/modules/market.cpp:1143
-#: src/lincity-ng/Dialog.cpp:486
+#: src/lincity/lintypes.cpp:87 src/lincity/modules/market.cpp:979
+#: src/lincity-ng/Dialog.cpp:507
 msgid "Market"
 msgstr "Markt"
 
-#: src/lincity/lintypes.cpp:106 src/lincity/modules/track.cpp:38
+#: src/lincity/lintypes.cpp:98 src/lincity/modules/track.cpp:34
 msgid "Track"
 msgstr "Landweg"
 
-#: src/lincity/lintypes.cpp:118
+#: src/lincity/lintypes.cpp:109
 msgid "Coalmine"
 msgstr "Steenkoolmijn"
 
-#: src/lincity/lintypes.cpp:130
+#: src/lincity/lintypes.cpp:120
 msgid "Railway"
 msgstr "Spoorweg"
 
-#: src/lincity/lintypes.cpp:142
+#: src/lincity/lintypes.cpp:131
 msgid "Coal PS"
 msgstr "Kolencentrale"
 
-#: src/lincity/lintypes.cpp:154 src/lincity/modules/road.cpp:47
+#: src/lincity/lintypes.cpp:142 src/lincity/modules/road.cpp:43
 msgid "Road"
 msgstr "Straat"
 
-#: src/lincity/lintypes.cpp:166
+#: src/lincity/lintypes.cpp:153
 msgid "Lt. Industry"
 msgstr "Laag technologische Industrie"
 
-#: src/lincity/lintypes.cpp:178 src/lincity/modules/university.cpp:67
+#: src/lincity/lintypes.cpp:164 src/lincity/modules/university.cpp:59
 msgid "University"
 msgstr "Universiteit"
 
-#: src/lincity/lintypes.cpp:190 src/lincity/modules/commune.cpp:146
+#: src/lincity/lintypes.cpp:175 src/lincity/modules/commune.cpp:172
 msgid "Commune"
 msgstr "Houtskool-branderij"
 
-#: src/lincity/lintypes.cpp:202
+#: src/lincity/lintypes.cpp:186
 msgid "Ore mine"
 msgstr "IJzerertsmijn"
 
-#: src/lincity/lintypes.cpp:214
+#: src/lincity/lintypes.cpp:197
 msgid "Rubbish tip"
 msgstr "Vuilstort"
 
-#: src/lincity/lintypes.cpp:226 src/lincity/modules/port.cpp:173
-#: src/lincity-ng/Dialog.cpp:540
+#: src/lincity/lintypes.cpp:208 src/lincity/modules/port.cpp:281
+#: src/lincity-ng/Dialog.cpp:561
 msgid "Port"
 msgstr "Haven"
 
-#: src/lincity/lintypes.cpp:238
+#: src/lincity/lintypes.cpp:219
 msgid "Hv. Industry"
 msgstr "Hoog technologishe industrie"
 
-#: src/lincity/lintypes.cpp:250
+#: src/lincity/lintypes.cpp:230
 msgid "Park"
 msgstr "Park"
 
-#: src/lincity/lintypes.cpp:262 src/lincity-ng/MpsInterface.cpp:516
+#: src/lincity/lintypes.cpp:241 src/lincity-ng/MpsInterface.cpp:519
 msgid "Recycle"
 msgstr "Recyclage"
 
-#: src/lincity/lintypes.cpp:274 src/lincity/modules/water.cpp:19
+#: src/lincity/lintypes.cpp:252 src/lincity/modules/water.cpp:17
+#: src/lincity/modules/residence.cpp:264
 msgid "Water"
 msgstr "Water"
 
-#: src/lincity/lintypes.cpp:286
+#: src/lincity/lintypes.cpp:263
 msgid "Health centre"
 msgstr "Ziekenhuis"
 
-#: src/lincity/lintypes.cpp:298
+#: src/lincity/lintypes.cpp:274
 msgid "Rocket pad"
 msgstr "Raketbasis"
 
-#: src/lincity/lintypes.cpp:310 src/lincity/modules/windmill.cpp:73
-#: src/lincity-ng/MpsInterface.cpp:506
+#: src/lincity/lintypes.cpp:285 src/lincity/modules/windmill.cpp:75
+#: src/lincity-ng/MpsInterface.cpp:509
 msgid "Windmill"
 msgstr "Windmolen"
 
-#: src/lincity/lintypes.cpp:322 src/lincity/modules/monument.cpp:57
+#: src/lincity/lintypes.cpp:296 src/lincity/modules/monument.cpp:51
 msgid "Monument"
 msgstr "Monument"
 
-#: src/lincity/lintypes.cpp:334 src/lincity/modules/school.cpp:49
+#: src/lincity/lintypes.cpp:307 src/lincity/modules/school.cpp:43
 msgid "School"
 msgstr "School"
 
-#: src/lincity/lintypes.cpp:346 src/lincity/modules/blacksmith.cpp:97
+#: src/lincity/lintypes.cpp:318 src/lincity/modules/blacksmith.cpp:90
 msgid "Blacksmith"
 msgstr "Smidse"
 
-#: src/lincity/lintypes.cpp:358
+#: src/lincity/lintypes.cpp:329
 msgid "Mill"
 msgstr "Textielfabriek"
 
-#: src/lincity/lintypes.cpp:370 src/lincity/modules/pottery.cpp:119
+#: src/lincity/lintypes.cpp:340 src/lincity/modules/pottery.cpp:104
 msgid "Pottery"
 msgstr "Pottenbakkerij"
 
-#: src/lincity/lintypes.cpp:382
+#: src/lincity/lintypes.cpp:351
 msgid "Fire sta'n"
 msgstr "Brandweerkazerne"
 
-#: src/lincity/lintypes.cpp:394 src/lincity/modules/cricket.cpp:99
+#: src/lincity/lintypes.cpp:362 src/lincity/modules/cricket.cpp:91
 msgid "Sports field"
 msgstr "Sportveld"
 
-#: src/lincity/lintypes.cpp:407
+#: src/lincity/lintypes.cpp:374
 msgid "Burnt"
 msgstr "Verbrand"
 
-#: src/lincity/lintypes.cpp:420
+#: src/lincity/lintypes.cpp:386
 msgid "Shanty town"
 msgstr "Krottenwijk"
 
-#: src/lincity/lintypes.cpp:433 src/lincity/modules/residence.cpp:292
-#: src/lincity-ng/MpsInterface.cpp:380 src/lincity-ng/EconomyGraph.cpp:131
+#: src/lincity/lintypes.cpp:398 src/lincity/modules/residence.cpp:283
+#: src/lincity-ng/MpsInterface.cpp:383 src/lincity-ng/EconomyGraph.cpp:134
 msgid "Fire"
 msgstr "Brand"
 
-#: src/lincity/lintypes.cpp:446
+#: src/lincity/lintypes.cpp:410
 msgid "Used"
 msgstr "Bebouwd"
 
-#: src/lincity/lintypes.cpp:458
+#: src/lincity/lintypes.cpp:421
 msgid "Residential ML"
 msgstr "Woonwijk ML"
 
-#: src/lincity/lintypes.cpp:470
+#: src/lincity/lintypes.cpp:432
 msgid "Residential HL"
 msgstr "Woonwijk HL"
 
-#: src/lincity/lintypes.cpp:482
+#: src/lincity/lintypes.cpp:443
 msgid "Residential LH"
 msgstr "Woonwijk LH"
 
-#: src/lincity/lintypes.cpp:494
+#: src/lincity/lintypes.cpp:454
 msgid "Residential MH"
 msgstr "Woonwijk MH"
 
-#: src/lincity/lintypes.cpp:506
+#: src/lincity/lintypes.cpp:465
 msgid "Residential HH"
 msgstr "Woonwijk HH"
 
-#: src/lincity/lintypes.cpp:477
+#: src/lincity/lintypes.cpp:476
 msgid "Water well"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:489
+#: src/lincity/lintypes.cpp:488
 msgid "Desert"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:501
+#: src/lincity/lintypes.cpp:500
 msgid "Tree"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:514
+#: src/lincity/lintypes.cpp:513
 msgid "Trees"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:527
+#: src/lincity/lintypes.cpp:526
 msgid "Forest"
 msgstr ""
 
-#: src/lincity/ldsvguts.cpp:128
+#: src/lincity/ldsvguts.cpp:137
 #, c-format
 msgid "Save file <%s> - "
 msgstr "Sla bestand <%s> op"
 
-#: src/lincity/ldsvguts.cpp:129
+#: src/lincity/ldsvguts.cpp:138
 msgid "Can't open save file!"
 msgstr "Kan het bestand niet openen"
 
-#: src/lincity/ldsvguts.cpp:134
+#: src/lincity/ldsvguts.cpp:148
 msgid "Saving scene"
 msgstr "Scene opslaan"
 
-#: src/lincity/ldsvguts.cpp:334
+#: src/lincity/ldsvguts.cpp:362
 #, c-format
 msgid "Can't open <%s> (gzipped)"
 msgstr "Kan <%s> niet openen (gzipped)"
 
-#: src/lincity/ldsvguts.cpp:352
+#: src/lincity/ldsvguts.cpp:395
 msgid "Loading scene"
 msgstr "Bezig scene laden"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/fileutil.cpp:266 src/lincity/fileutil.cpp:310
+msgid "Error. Can't find LINCITY_HOME"
+msgstr "Fout: Kan LINCITY_HOME niet vinden"
+
+#: src/lincity/fileutil.cpp:512
+msgid "Error verifying package. Can't find colour.pal."
+msgstr ""
+"Fout bij het controleren van het pakket. Kan het kleurenpallet niet vinden"
+
+#: src/lincity/fileutil.cpp:525 src/lincity/fileutil.cpp:533
+#, c-format
+msgid "Couldn't create the save directory '%s'\n"
+msgstr "Kan de bewaar map '%s' niet aanmaken\n"
+
+#: src/lincity/fileutil.cpp:550
+#, c-format
+msgid "Out of memory: malloc failure\n"
+msgstr "Te weinig geheugen: malloc faalt\n"
+
+#: src/lincity/simulate.cpp:97
+msgid ""
+"Upgrading from old game. You have 10 years to build water wells where "
+"needed. After, starvation will occur!  You should check starvation minimap, "
+"and read waterwell help page :-)"
+msgstr ""
+
+#: src/lincity/lclib.cpp:15
 msgid "Jan"
 msgstr "Jan"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Feb"
 msgstr "Feb"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Mar"
 msgstr "Maart"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Apr"
 msgstr "Apr"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "May"
 msgstr "Mei"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jun"
 msgstr "Jun"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jul"
 msgstr "Jul"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Aug"
 msgstr "Aug"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Sep"
 msgstr "Sep"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Oct"
 msgstr "Okt"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Nov"
 msgstr "Nov"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Dec"
 msgstr "Dec"
 
-#: src/lincity/modules/health_centre.cpp:66
+#: src/lincity/power.cpp:102
+msgid "You have too many power grids. Join some of them"
+msgstr ""
+
+#: src/lincity/modules/health_centre.cpp:58
 msgid "Health Centre"
 msgstr "Ziekenhuis"
 
-#: src/lincity/modules/health_centre.cpp:68
-#: src/lincity/modules/rocket_pad.cpp:169 src/lincity/modules/recycle.cpp:181
-#: src/lincity/modules/mill.cpp:107 src/lincity/modules/university.cpp:74
-#: src/lincity/modules/cricket.cpp:101 src/lincity/modules/pottery.cpp:123
-#: src/lincity/modules/blacksmith.cpp:102
-#: src/lincity/modules/firestation.cpp:121 src/lincity/modules/school.cpp:54
+#: src/lincity/modules/health_centre.cpp:60
+#: src/lincity/modules/rocket_pad.cpp:198 src/lincity/modules/recycle.cpp:148
+#: src/lincity/modules/mill.cpp:92 src/lincity/modules/university.cpp:65
+#: src/lincity/modules/cricket.cpp:93 src/lincity/modules/pottery.cpp:108
+#: src/lincity/modules/blacksmith.cpp:95 src/lincity/modules/school.cpp:48
+#: src/lincity/modules/firestation.cpp:110
 msgid "Inventory"
 msgstr "Inventaris"
 
-#: src/lincity/modules/health_centre.cpp:69
-#: src/lincity/modules/rocket_pad.cpp:170 src/lincity/modules/market.cpp:1149
-#: src/lincity/modules/road.cpp:52 src/lincity/modules/rail.cpp:55
-#: src/lincity/modules/coal_power.cpp:105
-#: src/lincity/modules/university.cpp:75 src/lincity/modules/cricket.cpp:102
-#: src/lincity/modules/track.cpp:43 src/lincity/modules/pottery.cpp:124
-#: src/lincity/modules/firestation.cpp:122 src/lincity/modules/school.cpp:55
+#: src/lincity/modules/health_centre.cpp:61
+#: src/lincity/modules/rocket_pad.cpp:199 src/lincity/modules/market.cpp:984
+#: src/lincity/modules/road.cpp:47 src/lincity/modules/rail.cpp:51
+#: src/lincity/modules/coal_power.cpp:97 src/lincity/modules/university.cpp:66
+#: src/lincity/modules/cricket.cpp:94 src/lincity/modules/track.cpp:38
+#: src/lincity/modules/pottery.cpp:109 src/lincity/modules/school.cpp:49
+#: src/lincity/modules/firestation.cpp:111
 msgid "Jobs"
 msgstr "Werkers"
 
-#: src/lincity/modules/health_centre.cpp:71
-#: src/lincity/modules/rocket_pad.cpp:172 src/lincity/modules/market.cpp:1153
-#: src/lincity/modules/port.cpp:190 src/lincity/modules/road.cpp:56
-#: src/lincity/modules/rail.cpp:59 src/lincity/modules/mill.cpp:108
-#: src/lincity/modules/university.cpp:77 src/lincity/modules/cricket.cpp:104
-#: src/lincity/modules/track.cpp:47 src/lincity/modules/pottery.cpp:126
-#: src/lincity/modules/blacksmith.cpp:103
-#: src/lincity/modules/firestation.cpp:124 src/lincity/modules/school.cpp:57
-#: src/lincity-ng/MpsInterface.cpp:448
+#: src/lincity/modules/health_centre.cpp:62
+#: src/lincity/modules/rocket_pad.cpp:200 src/lincity/modules/market.cpp:986
+#: src/lincity/modules/port.cpp:298 src/lincity/modules/road.cpp:49
+#: src/lincity/modules/rail.cpp:53 src/lincity/modules/mill.cpp:93
+#: src/lincity/modules/university.cpp:67 src/lincity/modules/cricket.cpp:95
+#: src/lincity/modules/track.cpp:40 src/lincity/modules/pottery.cpp:110
+#: src/lincity/modules/blacksmith.cpp:96 src/lincity/modules/school.cpp:50
+#: src/lincity/modules/firestation.cpp:112 src/lincity-ng/MpsInterface.cpp:451
 msgid "Goods"
 msgstr "Goederen"
 
-#: src/lincity/modules/rocket_pad.cpp:163
+#: src/lincity/modules/rocket_pad.cpp:192
 msgid "Rocket Pad"
 msgstr "Raketbasis"
 
-#: src/lincity/modules/rocket_pad.cpp:166
+#: src/lincity/modules/rocket_pad.cpp:195
 msgid "Completion"
 msgstr "Compleet"
 
-#: src/lincity/modules/rocket_pad.cpp:174 src/lincity/modules/market.cpp:1157
-#: src/lincity/modules/port.cpp:194 src/lincity/modules/road.cpp:60
-#: src/lincity/modules/rail.cpp:63 src/lincity/modules/light_industry.cpp:368
-#: src/lincity/modules/commune.cpp:156 src/lincity/modules/track.cpp:51
+#: src/lincity/modules/rocket_pad.cpp:201 src/lincity/modules/market.cpp:988
+#: src/lincity/modules/port.cpp:302 src/lincity/modules/road.cpp:51
+#: src/lincity/modules/rail.cpp:55 src/lincity/modules/light_industry.cpp:288
+#: src/lincity/modules/commune.cpp:182 src/lincity/modules/track.cpp:42
 msgid "Steel"
 msgstr "Staal"
 
-#: src/lincity/modules/windmill.cpp:77 src/lincity/modules/windmill.cpp:88
-#: src/lincity/modules/recycle.cpp:178 src/lincity/modules/coal_power.cpp:107
-#: src/lincity/modules/organic_farm.cpp:196
-#: src/lincity/modules/solar_power.cpp:58
+#: src/lincity/modules/windmill.cpp:76 src/lincity/modules/recycle.cpp:146
+#: src/lincity/modules/coal_power.cpp:98
+#: src/lincity/modules/organic_farm.cpp:230
+#: src/lincity/modules/solar_power.cpp:60
 msgid "Tech"
 msgstr "Tech. niveau"
 
@@ -520,790 +527,792 @@
 msgid "Prod."
 msgstr "Prod."
 
-#: src/lincity/modules/windmill.cpp:86 src/lincity/modules/windmill.cpp:101
-#: src/lincity/modules/substation.cpp:108
+#: src/lincity/modules/windmill.cpp:86 src/lincity/modules/windmill.cpp:99
+#: src/lincity/modules/substation.cpp:110
 msgid "Demand"
 msgstr "Vraag"
 
-#: src/lincity/modules/windmill.cpp:92 src/lincity/modules/substation.cpp:99
+#: src/lincity/modules/windmill.cpp:90 src/lincity/modules/substation.cpp:101
 msgid "Grid Status"
 msgstr "Net status"
 
-#: src/lincity/modules/windmill.cpp:95 src/lincity/modules/substation.cpp:102
+#: src/lincity/modules/windmill.cpp:93 src/lincity/modules/substation.cpp:104
 msgid "T. Cap."
 msgstr "Totale capaciteit."
 
-#: src/lincity/modules/windmill.cpp:98 src/lincity/modules/substation.cpp:105
+#: src/lincity/modules/windmill.cpp:96 src/lincity/modules/substation.cpp:107
 msgid "A. Cap."
 msgstr "Nog beschikbare capaciteit"
 
-#: src/lincity/modules/windmill.cpp:104 src/lincity/modules/coal_power.cpp:109
-#: src/lincity/modules/substation.cpp:111
-#: src/lincity/modules/power_line.cpp:53
-#: src/lincity/modules/solar_power.cpp:60
+#: src/lincity/modules/windmill.cpp:102 src/lincity/modules/coal_power.cpp:99
+#: src/lincity/modules/substation.cpp:113
+#: src/lincity/modules/power_line.cpp:49
+#: src/lincity/modules/solar_power.cpp:61
 msgid "Grid ID"
 msgstr "Net ID"
 
-#: src/lincity/modules/water.cpp:22 src/lincity/modules/commune.cpp:151
-#: src/lincity/modules/commune.cpp:153 src/lincity/modules/commune.cpp:155
-#: src/lincity/modules/commune.cpp:157 src/lincity-ng/MpsInterface.cpp:379
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/waterwell.cpp:50
+#: src/lincity/modules/commune.cpp:177 src/lincity/modules/commune.cpp:179
+#: src/lincity/modules/commune.cpp:181 src/lincity/modules/commune.cpp:183
 #: src/lincity-ng/MpsInterface.cpp:382 src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity-ng/MpsInterface.cpp:388
 msgid "Yes"
 msgstr "Ja"
 
-#: src/lincity/modules/water.cpp:22 src/lincity/modules/commune.cpp:151
-#: src/lincity/modules/commune.cpp:153 src/lincity/modules/commune.cpp:155
-#: src/lincity/modules/commune.cpp:157 src/lincity-ng/MpsInterface.cpp:379
-#: src/lincity-ng/MpsInterface.cpp:382 src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/commune.cpp:177
+#: src/lincity/modules/commune.cpp:179 src/lincity/modules/commune.cpp:181
+#: src/lincity/modules/commune.cpp:183 src/lincity-ng/MpsInterface.cpp:382
+#: src/lincity-ng/MpsInterface.cpp:385 src/lincity-ng/MpsInterface.cpp:388
 msgid "No"
 msgstr "Nee"
 
-#: src/lincity/modules/water.cpp:23
+#: src/lincity/modules/water.cpp:21
 msgid "Navigable"
 msgstr "Navigeerbaar"
 
-#: src/lincity/modules/recycle.cpp:169
+#: src/lincity/modules/recycle.cpp:137
 msgid "Recycling"
 msgstr "Recycleren"
 
-#: src/lincity/modules/recycle.cpp:170
+#: src/lincity/modules/recycle.cpp:138
 msgid "Center"
 msgstr "Centrum"
 
-#: src/lincity/modules/recycle.cpp:173
-#: src/lincity/modules/heavy_industry.cpp:346 src/lincity/modules/mill.cpp:105
-#: src/lincity/modules/light_industry.cpp:370
-#: src/lincity/modules/university.cpp:79 src/lincity/modules/pottery.cpp:121
-#: src/lincity/modules/blacksmith.cpp:100 src/lincity/modules/school.cpp:60
+#: src/lincity/modules/recycle.cpp:141
+#: src/lincity/modules/heavy_industry.cpp:288 src/lincity/modules/mill.cpp:90
+#: src/lincity/modules/light_industry.cpp:289
+#: src/lincity/modules/university.cpp:68 src/lincity/modules/pottery.cpp:106
+#: src/lincity/modules/blacksmith.cpp:93 src/lincity/modules/school.cpp:52
 msgid "Capacity"
 msgstr "Capaciteit"
 
-#: src/lincity/modules/recycle.cpp:175 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
 #: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/residence.cpp:288 src/lincity/modules/residence.cpp:291
-#: src/lincity/modules/residence.cpp:294
-#: src/lincity/modules/light_industry.cpp:359
-#: src/lincity/modules/organic_farm.cpp:188
+#: src/lincity/modules/light_industry.cpp:281
+#: src/lincity/modules/organic_farm.cpp:223
 msgid "YES"
 msgstr "JA"
 
-#: src/lincity/modules/recycle.cpp:175 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
 #: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/residence.cpp:288 src/lincity/modules/residence.cpp:291
-#: src/lincity/modules/residence.cpp:294
-#: src/lincity/modules/heavy_industry.cpp:334
-#: src/lincity/modules/light_industry.cpp:359
+#: src/lincity/modules/heavy_industry.cpp:279
+#: src/lincity/modules/light_industry.cpp:281
 msgid "NO"
 msgstr "NEE"
 
-#: src/lincity/modules/recycle.cpp:176 src/lincity/modules/residence.cpp:280
-#: src/lincity/modules/heavy_industry.cpp:337
-#: src/lincity/modules/light_industry.cpp:360
-#: src/lincity/modules/organic_farm.cpp:193
+#: src/lincity/modules/recycle.cpp:144 src/lincity/modules/residence.cpp:271
+#: src/lincity/modules/heavy_industry.cpp:282
+#: src/lincity/modules/light_industry.cpp:282
+#: src/lincity/modules/organic_farm.cpp:227
 msgid "Power"
 msgstr "Stroom"
 
-#: src/lincity/modules/recycle.cpp:182
-#: src/lincity/modules/heavy_industry.cpp:342
-#: src/lincity/modules/market.cpp:1155 src/lincity/modules/port.cpp:186
-#: src/lincity/modules/road.cpp:58 src/lincity/modules/rail.cpp:61
-#: src/lincity/modules/light_industry.cpp:366
-#: src/lincity/modules/commune.cpp:154 src/lincity/modules/track.cpp:49
-#: src/lincity/modules/pottery.cpp:128
+#: src/lincity/modules/recycle.cpp:149
+#: src/lincity/modules/heavy_industry.cpp:286
+#: src/lincity/modules/market.cpp:987 src/lincity/modules/port.cpp:294
+#: src/lincity/modules/road.cpp:50 src/lincity/modules/rail.cpp:54
+#: src/lincity/modules/light_industry.cpp:287
+#: src/lincity/modules/commune.cpp:180 src/lincity/modules/track.cpp:41
+#: src/lincity/modules/pottery.cpp:111
 msgid "Ore"
 msgstr "IJzererts"
 
-#: src/lincity/modules/recycle.cpp:184 src/lincity/modules/market.cpp:1159
-#: src/lincity/modules/road.cpp:62 src/lincity/modules/rail.cpp:65
-#: src/lincity/modules/commune.cpp:158 src/lincity/modules/track.cpp:53
+#: src/lincity/modules/recycle.cpp:150 src/lincity/modules/market.cpp:989
+#: src/lincity/modules/road.cpp:52 src/lincity/modules/rail.cpp:56
+#: src/lincity/modules/commune.cpp:184 src/lincity/modules/track.cpp:43
 msgid "Waste"
 msgstr "Afval"
 
-#: src/lincity/modules/coalmine.cpp:168
+#: src/lincity/modules/coalmine.cpp:132
 msgid "Coal Mine"
 msgstr "Kolenmijn"
 
-#: src/lincity/modules/coalmine.cpp:171 src/lincity/modules/oremine.cpp:187
+#: src/lincity/modules/coalmine.cpp:135 src/lincity/modules/oremine.cpp:144
 msgid "Stock"
 msgstr "Voorraad"
 
-#: src/lincity/modules/coalmine.cpp:175 src/lincity/modules/coalmine.cpp:177
-#: src/lincity/modules/oremine.cpp:191
+#: src/lincity/modules/coalmine.cpp:138 src/lincity/modules/coalmine.cpp:140
+#: src/lincity/modules/oremine.cpp:147
 msgid "Reserve"
 msgstr "Reserve"
 
-#: src/lincity/modules/coalmine.cpp:177
+#: src/lincity/modules/coalmine.cpp:140
 msgid "EMPTY"
 msgstr "LEEG"
 
-#: src/lincity/modules/residence.cpp:273
+#: src/lincity/modules/residence.cpp:255
 msgid "Residence"
 msgstr "Woonwijk"
 
-#: src/lincity/modules/residence.cpp:277
+#: src/lincity/modules/residence.cpp:259
 msgid "People"
 msgstr "Inwoners"
 
-#: src/lincity/modules/residence.cpp:283
+#: src/lincity/modules/residence.cpp:268
 msgid "Fed"
 msgstr "Gevoed"
 
-#: src/lincity/modules/residence.cpp:286
+#: src/lincity/modules/residence.cpp:274
 msgid "Employed"
 msgstr "Met werk"
 
-#: src/lincity/modules/residence.cpp:299 src/lincity-ng/MpsInterface.cpp:393
+#: src/lincity/modules/residence.cpp:276 src/lincity-ng/MpsInterface.cpp:396
 msgid "good"
 msgstr "goed"
 
-#: src/lincity/modules/residence.cpp:299
+#: src/lincity/modules/residence.cpp:276
 msgid "poor"
 msgstr "slecht"
 
-#: src/lincity/modules/residence.cpp:300
+#: src/lincity/modules/residence.cpp:277
 msgid "Job"
 msgstr "Werk"
 
-#: src/lincity/modules/residence.cpp:289
+#: src/lincity/modules/residence.cpp:280
 msgid "Health Cvr"
 msgstr "Welzijn."
 
-#: src/lincity/modules/residence.cpp:295 src/lincity-ng/MpsInterface.cpp:386
-#: src/lincity-ng/MpsInterface.cpp:514
+#: src/lincity/modules/residence.cpp:286 src/lincity-ng/MpsInterface.cpp:389
+#: src/lincity-ng/MpsInterface.cpp:517
 msgid "Sport"
 msgstr "Sport"
 
-#: src/lincity/modules/residence.cpp:297 src/lincity-ng/MpsInterface.cpp:388
+#: src/lincity/modules/residence.cpp:288 src/lincity/modules/waterwell.cpp:47
+#: src/lincity-ng/MpsInterface.cpp:391
 msgid "Pollution"
 msgstr "Vervuiling"
 
-#: src/lincity/modules/monument.cpp:63
+#: src/lincity/modules/monument.cpp:57
 msgid "Wisdom Bestowed"
 msgstr "Wijsheid vergaard"
 
-#: src/lincity/modules/monument.cpp:67
+#: src/lincity/modules/monument.cpp:61
 #, c-format
 msgid "% Complete"
 msgstr "% Compleet"
 
-#: src/lincity/modules/heavy_industry.cpp:323
+#: src/lincity/modules/waterwell.cpp:44
+msgid "Water_well"
+msgstr ""
+
+#: src/lincity/modules/waterwell.cpp:51
+msgid "Drinkable"
+msgstr ""
+
+#: src/lincity/modules/heavy_industry.cpp:268
 msgid "Heavy"
 msgstr "Zware"
 
-#: src/lincity/modules/heavy_industry.cpp:324
-#: src/lincity/modules/light_industry.cpp:355
+#: src/lincity/modules/heavy_industry.cpp:269
+#: src/lincity/modules/light_industry.cpp:277
 msgid "Industry"
 msgstr "Industrie"
 
-#: src/lincity/modules/heavy_industry.cpp:329
-#: src/lincity/modules/heavy_industry.cpp:344
-#: src/lincity/modules/market.cpp:1151 src/lincity/modules/port.cpp:182
-#: src/lincity/modules/road.cpp:54 src/lincity/modules/rail.cpp:57
-#: src/lincity/modules/coal_power.cpp:89
-#: src/lincity/modules/coal_power.cpp:103 src/lincity/modules/mill.cpp:112
-#: src/lincity/modules/commune.cpp:152 src/lincity/modules/track.cpp:45
-#: src/lincity/modules/pottery.cpp:130 src/lincity/modules/blacksmith.cpp:105
-#: src/lincity-ng/MpsInterface.cpp:444
+#: src/lincity/modules/heavy_industry.cpp:274
+#: src/lincity/modules/heavy_industry.cpp:287
+#: src/lincity/modules/market.cpp:985 src/lincity/modules/port.cpp:290
+#: src/lincity/modules/road.cpp:48 src/lincity/modules/rail.cpp:52
+#: src/lincity/modules/coal_power.cpp:82 src/lincity/modules/coal_power.cpp:96
+#: src/lincity/modules/mill.cpp:95 src/lincity/modules/commune.cpp:178
+#: src/lincity/modules/track.cpp:39 src/lincity/modules/pottery.cpp:112
+#: src/lincity/modules/blacksmith.cpp:97 src/lincity-ng/MpsInterface.cpp:447
 msgid "Coal"
 msgstr "Steenkool"
 
-#: src/lincity/modules/heavy_industry.cpp:331
+#: src/lincity/modules/heavy_industry.cpp:276
 msgid "Grid"
 msgstr "Net"
 
-#: src/lincity/modules/heavy_industry.cpp:339
-#: src/lincity/modules/light_industry.cpp:362
+#: src/lincity/modules/heavy_industry.cpp:284
+#: src/lincity/modules/light_industry.cpp:284
 msgid "Output"
 msgstr "Output"
 
-#: src/lincity/modules/heavy_industry.cpp:340
-#: src/lincity/modules/light_industry.cpp:364
+#: src/lincity/modules/heavy_industry.cpp:285
+#: src/lincity/modules/light_industry.cpp:286
 msgid "Store"
 msgstr "Winkel"
 
-#: src/lincity/modules/market.cpp:1147 src/lincity/modules/port.cpp:178
-#: src/lincity/modules/road.cpp:50 src/lincity/modules/rail.cpp:53
-#: src/lincity/modules/mill.cpp:110 src/lincity/modules/track.cpp:41
+#: src/lincity/modules/market.cpp:983 src/lincity/modules/port.cpp:286
+#: src/lincity/modules/road.cpp:46 src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/mill.cpp:94 src/lincity/modules/track.cpp:37
 msgid "Food"
 msgstr "Voedsel"
 
-#: src/lincity/modules/port.cpp:198 src/lincity-ng/MpsInterface.cpp:532
+#: src/lincity/modules/port.cpp:306 src/lincity-ng/MpsInterface.cpp:535
 msgid "Total"
 msgstr "Totaal"
 
-#: src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/rail.cpp:47
 msgid "Rail"
 msgstr "Spoorweg"
 
-#: src/lincity/modules/coal_power.cpp:90
-#: src/lincity/modules/solar_power.cpp:45
+#: src/lincity/modules/coal_power.cpp:83
+#: src/lincity/modules/solar_power.cpp:47
 msgid "Power Station"
 msgstr "Energiecentrale"
 
-#: src/lincity/modules/coal_power.cpp:94
-#: src/lincity/modules/solar_power.cpp:49
+#: src/lincity/modules/coal_power.cpp:87
+#: src/lincity/modules/solar_power.cpp:51
 msgid "Max Output"
 msgstr "Maximale opbrengst"
 
-#: src/lincity/modules/coal_power.cpp:99
-#: src/lincity/modules/solar_power.cpp:54
+#: src/lincity/modules/coal_power.cpp:92
+#: src/lincity/modules/solar_power.cpp:56
 msgid "Current Output"
 msgstr "Huidige opbrengst"
 
-#: src/lincity/modules/substation.cpp:95
+#: src/lincity/modules/substation.cpp:97
 msgid "Local Demand"
 msgstr "Lokaal verbruik"
 
-#: src/lincity/modules/mill.cpp:103
+#: src/lincity/modules/mill.cpp:88
 msgid "Textile Mill"
 msgstr "Textielfabriek"
 
-#: src/lincity/modules/oremine.cpp:184
+#: src/lincity/modules/oremine.cpp:141
 msgid "Ore Mine"
 msgstr "IJzerertsmijn"
 
-#: src/lincity/modules/power_line.cpp:50
+#: src/lincity/modules/power_line.cpp:46
 msgid "Power Line"
 msgstr "Electriciteitsdraad"
 
-#: src/lincity/modules/light_industry.cpp:354
+#: src/lincity/modules/light_industry.cpp:276
 msgid "Light"
 msgstr "Lichte"
 
-#: src/lincity/modules/university.cpp:69
+#: src/lincity/modules/university.cpp:61
 msgid "Tech Produced"
 msgstr "Technologie geproduceerd"
 
-#: src/lincity/modules/tip.cpp:109
+#: src/lincity/modules/tip.cpp:100
 msgid "Landfill"
 msgstr "Vuilstort"
 
-#: src/lincity/modules/tip.cpp:112
+#: src/lincity/modules/tip.cpp:103
 msgid "Last Month"
 msgstr "Laatste maand"
 
-#: src/lincity/modules/tip.cpp:113
+#: src/lincity/modules/tip.cpp:104
 msgid "Tons"
 msgstr "Ton"
 
-#: src/lincity/modules/tip.cpp:114
+#: src/lincity/modules/tip.cpp:105
 msgid "Percent"
 msgstr "Percent"
 
-#: src/lincity/modules/tip.cpp:117
+#: src/lincity/modules/tip.cpp:107
 #, c-format
 msgid "% Filled"
 msgstr "% Gevuld"
 
-#: src/lincity/modules/commune.cpp:149
+#: src/lincity/modules/commune.cpp:175
 msgid "Activity"
 msgstr "Activiteit"
 
-#: src/lincity/modules/school.cpp:51
+#: src/lincity/modules/school.cpp:45
 msgid "Lessons Learned"
 msgstr "Lessen geleerd"
 
-#: src/lincity/modules/firestation.cpp:119
+#: src/lincity/modules/firestation.cpp:108
 msgid "Fire Station"
 msgstr "Brandweerkazerne"
 
-#: src/lincity/modules/organic_farm.cpp:183
+#: src/lincity/modules/organic_farm.cpp:219
 msgid "Organic Farm"
 msgstr "Biologische boerderij"
 
-#: src/lincity/modules/organic_farm.cpp:190
+#: src/lincity/modules/organic_farm.cpp:225
 msgid "NO "
 msgstr "NEE"
 
-#: src/lincity/modules/organic_farm.cpp:200
+#: src/lincity/modules/organic_farm.cpp:233
 msgid "Prod"
 msgstr "Productie"
 
-#: src/lincity/modules/organic_farm.cpp:238
+#: src/lincity/modules/organic_farm.cpp:239
 msgid "Debug info"
 msgstr ""
 
-#: src/lincity/modules/organic_farm.cpp:239
-msgid " max with power & water"
-msgstr ""
-
 #: src/lincity/modules/organic_farm.cpp:240
-msgid " number of tile with water"
+msgid "max with power&water"
 msgstr ""
 
 #: src/lincity/modules/organic_farm.cpp:241
-msgid " current production"
+msgid "N tiles with water"
 msgstr ""
 
-#: src/lincity/modules/solar_power.cpp:44
+#: src/lincity/modules/organic_farm.cpp:242
+#, fuzzy
+msgid "Current production"
+msgstr "Huidige opbrengst"
+
+#: src/lincity/modules/solar_power.cpp:46
 msgid "Solar"
 msgstr "Zon"
 
-#: src/lincity/modules/waterwell.cpp:44
-msgid "Water_well"
-msgstr ""
-
-#: src/lincity/modules/waterwell.cpp:51
-msgid "Drinkable"
-msgstr ""
-
 #: src/lincity-ng/Dialog.cpp:173
 msgid "Launchsite"
 msgstr "Lanceerbasis"
 
-#: src/lincity-ng/Dialog.cpp:341 src/lincity-ng/Dialog.cpp:342
+#: src/lincity-ng/Dialog.cpp:352 src/lincity-ng/Dialog.cpp:353
 msgid "----- IN TEST MODE -------"
 msgstr "----- IN TEST MODUS -------"
 
-#: src/lincity-ng/Dialog.cpp:344
+#: src/lincity-ng/Dialog.cpp:355
 #, c-format
 msgid "Game statistics from LinCity-NG Version %s"
 msgstr "Spel statistieken van LinCity-NG Versie %s"
 
-#: src/lincity-ng/Dialog.cpp:348
+#: src/lincity-ng/Dialog.cpp:359
 #, c-format
 msgid "Initial loaded scene - %s"
 msgstr "Bij start geladen scene - %s"
 
-#: src/lincity-ng/Dialog.cpp:353
+#: src/lincity-ng/Dialog.cpp:364
 #, c-format
 msgid "Economy is sustainable"
 msgstr "Economie is duurzaam"
 
-#: src/lincity-ng/Dialog.cpp:357
+#: src/lincity-ng/Dialog.cpp:368
 #, c-format
 msgid "Population  %d  of which  %d  are not housed."
 msgstr "Populatie %d van dewelke er %d zonder woning zijn."
 
-#: src/lincity-ng/Dialog.cpp:362
+#: src/lincity-ng/Dialog.cpp:373
 #, c-format
 msgid "Max population %d  Number evacuated %d Total births %d"
 msgstr "Maximum bevolking %d  Ge?vacueerd %d Aantal geboortes %d"
 
-#: src/lincity-ng/Dialog.cpp:367
+#: src/lincity-ng/Dialog.cpp:378
 #, c-format
 msgid "Date %s %04d  Money %8d   Tech-level %5.1f (%5.1f)"
 msgstr "Datum %s %04d  Geld %8d   Technologisch niveau %5.1f (%5.1f)"
 
-#: src/lincity-ng/Dialog.cpp:374
+#: src/lincity-ng/Dialog.cpp:385
 #, c-format
 msgid ".Deaths by starvation %7d   History %8.3f"
 msgstr "Dodenaantal door uithongering %7d   Geschiedenis %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:379
+#: src/lincity-ng/Dialog.cpp:390
 #, c-format
 msgid "Deaths from pollution %7d   History %8.3f"
 msgstr "Dodenaantal door vervuiling %7d   Geschiedenis %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:383
+#: src/lincity-ng/Dialog.cpp:394
 #, c-format
 msgid "Years of unemployment %7d   History %8.3f"
 msgstr "Jaren werkeloos %7d   Geschiedenins %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:387
+#: src/lincity-ng/Dialog.cpp:398
 #, c-format
 msgid "Rockets launched %2d  Successful launches %2d"
 msgstr "Rakketten gelanceerd %2d  Gelukte lanceringen %2d"
 
-#: src/lincity-ng/Dialog.cpp:397
+#: src/lincity-ng/Dialog.cpp:409
 #, c-format
 msgid ".   Residences %4d         Markets %4d            Farms %4d"
 msgstr "    Woonwijken?%4d?????????Markten?%4d????????????Boerderijen?%4d"
 
-#: src/lincity-ng/Dialog.cpp:418
+#: src/lincity-ng/Dialog.cpp:420
 #, c-format
 msgid ".    Monuments %4d         Schools %4d     Universities %4d"
 msgstr ".????Monumenten?%4d?????????Scholen?%4d?????Universiteiten?%4d"
 
-#: src/lincity-ng/Dialog.cpp:423
+#: src/lincity-ng/Dialog.cpp:425
 #, c-format
 msgid ".Fire stations %4d           Parks %4d    Sports fields %4d"
 msgstr ".Brandweerkazernes?%4d???????????Parken?%4d????Sportsvelden?%4d"
 
-#: src/lincity-ng/Dialog.cpp:449
+#: src/lincity-ng/Dialog.cpp:430
 #, c-format
 msgid "Health centres %4d            Tips %4d         Shanties %4d"
 msgstr "Ziekenhuizen?%4d????????????Vuilstorten?%4d?????????Sloppenwijken?%4d"
 
-#: src/lincity-ng/Dialog.cpp:433
+#: src/lincity-ng/Dialog.cpp:438
 #, c-format
 msgid ".    Windmills %4d     Coal powers %4d     Solar powers %4d"
 msgstr ".????Windmolens?%4d?????Steenkoolenergie?%4d?????Zonne?nergie?%4d"
 
-#: src/lincity-ng/Dialog.cpp:439
+#: src/lincity-ng/Dialog.cpp:444
 #, c-format
 msgid ".  Substations %4d     Power lines %4d            Ports %4d"
 msgstr ""
 ".??Transformatorhuisje?%4d?????Electriciteitsdraden?%4d????????????Havens?%4d"
 
-#: src/lincity-ng/Dialog.cpp:408
+#: src/lincity-ng/Dialog.cpp:449
 #, c-format
 msgid ".       Tracks %4d           Roads %4d             Rail %4d"
 msgstr ".       Landwegen %4d           Wegen %4d             Treinsporen %4d"
 
-#: src/lincity-ng/Dialog.cpp:413
+#: src/lincity-ng/Dialog.cpp:457
 #, c-format
 msgid ".    Potteries %4d     Blacksmiths %4d            Mills %4d"
 msgstr ""
 ".????Pottenbakkerijen?%4d?????Smidsen?%4d????????????Textielfabrieken?%4d"
 
-#: src/lincity-ng/Dialog.cpp:444
+#: src/lincity-ng/Dialog.cpp:462
 #, c-format
 msgid ".   Light inds %4d      Heavy inds %4d        Recyclers %4d"
 msgstr ""
-".???Lichte industri?n?%4d??????Zware "
-"Industri?n?%4d????????Recycleercentra?%4d"
+".???Lichte industri?n?%4d??????Zware Industri?n?%4d????????Recycleercentra?%"
+"4d"
 
-#: src/lincity-ng/Dialog.cpp:428
+#: src/lincity-ng/Dialog.cpp:467
 #, c-format
 msgid ".   Coal mines %4d       Ore mines %4d         Communes %4d"
 msgstr ""
-""
-".???Steenkoolmijnen?%4d???????Ijzerertsmijnen?%4d?????????houtskool-branderijen?%4d"
+".???Steenkoolmijnen?%4d???????Ijzerertsmijnen?%4d?????????houtskool-"
+"branderijen?%4d"
 
-#: src/lincity-ng/ScreenInterface.cpp:258
+#: src/lincity-ng/ScreenInterface.cpp:264
 msgid "MM"
 msgstr "MM"
 
-#: src/lincity-ng/GameView.cpp:1520 src/lincity-ng/GameView.cpp:1551
-#: src/lincity-ng/ScreenInterface.cpp:269
+#: src/lincity-ng/ScreenInterface.cpp:275 src/lincity-ng/GameView.cpp:1609
+#: src/lincity-ng/GameView.cpp:1640
 msgid "$"
 msgstr "?"
 
-#: src/lincity-ng/GameView.cpp:236
+#: src/lincity-ng/GameView.cpp:237
 msgid "Minimap: outline map"
 msgstr "Kaart: overzichtskaart"
 
-#: src/lincity-ng/GameView.cpp:239
+#: src/lincity-ng/GameView.cpp:240
 msgid "Minimap: unemployment"
 msgstr "Kaart: werkeloosheid"
 
-#: src/lincity-ng/GameView.cpp:242
+#: src/lincity-ng/GameView.cpp:243
 msgid "Minimap: pollution"
 msgstr "Kaart: vervuiling"
 
-#: src/lincity-ng/GameView.cpp:245
+#: src/lincity-ng/GameView.cpp:246
 msgid "Minimap: nourishments"
 msgstr "Kaart: voeding"
 
-#: src/lincity-ng/GameView.cpp:248
+#: src/lincity-ng/GameView.cpp:249
 msgid "Minimap: power supply"
 msgstr "Kaart: electriciteitsvoorziening"
 
-#: src/lincity-ng/GameView.cpp:251
+#: src/lincity-ng/GameView.cpp:252
 msgid "Minimap: firedepartment cover"
 msgstr "Kaart: Bereik brandbestrijding"
 
-#: src/lincity-ng/GameView.cpp:254
+#: src/lincity-ng/GameView.cpp:255
 msgid "Minimap: sport cover"
 msgstr "Kaart: overzicht sport"
 
-#: src/lincity-ng/GameView.cpp:257
+#: src/lincity-ng/GameView.cpp:258
 msgid "Minimap: medical care"
 msgstr "Kaart: Bereik medische verzorging"
 
-#: src/lincity-ng/GameView.cpp:260
+#: src/lincity-ng/GameView.cpp:261
 msgid "Minimap: coal depots"
 msgstr "Kaart:?Depots voor steenkool"
 
-#: src/lincity-ng/GameView.cpp:263
+#: src/lincity-ng/GameView.cpp:264
 msgid "Minimap: traffic density"
 msgstr "Kaart: verkeersdichtheid"
 
-#: src/lincity-ng/GameView.cpp:1515
+#: src/lincity-ng/GameView.cpp:1604
 msgid "Estimated Bulldoze Cost: "
 msgstr "Geschatte afbraakkosten: "
 
-#: src/lincity-ng/GameView.cpp:1517
+#: src/lincity-ng/GameView.cpp:1606
 msgid "Bulldoze Cost: "
 msgstr "Afbraakkosten: "
 
-#: src/lincity-ng/GameView.cpp:1522
+#: src/lincity-ng/GameView.cpp:1611
 msgid "n/a"
 msgstr "n/b"
 
-#: src/lincity-ng/GameView.cpp:1540
+#: src/lincity-ng/GameView.cpp:1629
 msgid "Query Tool: Show information about selected building."
 msgstr "Informatie Tool: laat informatie zien over het geselecteerde gebouw."
 
-#: src/lincity-ng/GameView.cpp:1544
+#: src/lincity-ng/GameView.cpp:1633
 msgid "Bulldozer: remove building -price varies-"
 msgstr "Bulldozer: verwijder gebouwen -de prijs varieert-"
 
-#: src/lincity-ng/GameView.cpp:1551
+#: src/lincity-ng/GameView.cpp:1640
 msgid ": Cost to build "
 msgstr ": Bouwkosten "
 
-#: src/lincity-ng/GameView.cpp:1552
+#: src/lincity-ng/GameView.cpp:1641
 msgid ", to bulldoze "
 msgstr ", afbraakkosten "
 
-#: src/lincity-ng/GameView.cpp:1552 src/lincity-ng/GameView.cpp:1555
+#: src/lincity-ng/GameView.cpp:1641 src/lincity-ng/GameView.cpp:1644
 msgid "$."
 msgstr "?"
 
-#: src/lincity-ng/GameView.cpp:1554
+#: src/lincity-ng/GameView.cpp:1643
 msgid " To build "
 msgstr " Om te bouwen"
 
-#: src/lincity-ng/GameView.cpp:1554
+#: src/lincity-ng/GameView.cpp:1643
 msgid " of them "
 msgstr " van hun"
 
-#: src/lincity-ng/GameView.cpp:1555
+#: src/lincity-ng/GameView.cpp:1644
 msgid "will cost about "
 msgstr "zal meer kosten dan "
 
-#: src/lincity-ng/MainMenu.cpp:175
+#: src/lincity-ng/MainMenu.cpp:199
 msgid "empty"
 msgstr "leeg"
 
-#: src/lincity-ng/MpsInterface.cpp:224
+#: src/lincity-ng/MpsInterface.cpp:227
 msgid "build something here"
 msgstr "Bouw hier iets."
 
-#: src/lincity-ng/MpsInterface.cpp:226
+#: src/lincity-ng/MpsInterface.cpp:229
 msgid "no further information available"
 msgstr "Geen verdere informatie beschikbaar"
 
-#: src/lincity-ng/MpsInterface.cpp:378
+#: src/lincity-ng/MpsInterface.cpp:381
 msgid "Coverage"
 msgstr "Bedekking"
 
-#: src/lincity-ng/MpsInterface.cpp:383
+#: src/lincity-ng/MpsInterface.cpp:386
 msgid "Health"
 msgstr "Welzijn"
 
-#: src/lincity-ng/MpsInterface.cpp:391
+#: src/lincity-ng/MpsInterface.cpp:394
 msgid "clear"
 msgstr "klaar"
 
-#: src/lincity-ng/MpsInterface.cpp:395
+#: src/lincity-ng/MpsInterface.cpp:398
 msgid "fair"
 msgstr "behoorlijk"
 
-#: src/lincity-ng/MpsInterface.cpp:397
+#: src/lincity-ng/MpsInterface.cpp:400
 msgid "smelly"
 msgstr "stinkend"
 
-#: src/lincity-ng/MpsInterface.cpp:399
+#: src/lincity-ng/MpsInterface.cpp:402
 msgid "smokey"
 msgstr "rokerig"
 
-#: src/lincity-ng/MpsInterface.cpp:401
+#: src/lincity-ng/MpsInterface.cpp:404
 msgid "smoggy"
 msgstr "vervuild"
 
-#: src/lincity-ng/MpsInterface.cpp:403
+#: src/lincity-ng/MpsInterface.cpp:406
 msgid "bad"
 msgstr "slecht"
 
-#: src/lincity-ng/MpsInterface.cpp:405
+#: src/lincity-ng/MpsInterface.cpp:408
 msgid "very bad"
 msgstr "zeer slecht"
 
-#: src/lincity-ng/MpsInterface.cpp:407
+#: src/lincity-ng/MpsInterface.cpp:410
 msgid "death!"
 msgstr "dood!"
 
-#: src/lincity-ng/MpsInterface.cpp:412
+#: src/lincity-ng/MpsInterface.cpp:415
 msgid "Bulldoze Cost"
 msgstr "Afbraakkosten"
 
-#: src/lincity-ng/MpsInterface.cpp:418
+#: src/lincity-ng/MpsInterface.cpp:421
 msgid "N/A"
 msgstr "N/B"
 
-#: src/lincity-ng/MpsInterface.cpp:436
+#: src/lincity-ng/MpsInterface.cpp:439
 msgid "Tax Income"
 msgstr "Belastingsinkomsten"
 
-#: src/lincity-ng/MpsInterface.cpp:440
+#: src/lincity-ng/MpsInterface.cpp:443
 msgid "Income"
 msgstr "Inkomsten"
 
-#: src/lincity-ng/MpsInterface.cpp:452
+#: src/lincity-ng/MpsInterface.cpp:455
 msgid "Export"
 msgstr "Export"
 
-#: src/lincity-ng/MpsInterface.cpp:456
+#: src/lincity-ng/MpsInterface.cpp:459
 msgid "Expenses"
 msgstr "Uitgaven"
 
-#: src/lincity-ng/MpsInterface.cpp:460
+#: src/lincity-ng/MpsInterface.cpp:463
 msgid "Unemp."
 msgstr "Werkloosheid"
 
-#: src/lincity-ng/MpsInterface.cpp:464
+#: src/lincity-ng/MpsInterface.cpp:467
 msgid "Transport"
 msgstr "Verkeer"
 
-#: src/lincity-ng/MpsInterface.cpp:468
+#: src/lincity-ng/MpsInterface.cpp:471
 msgid "Imports"
 msgstr "Import"
 
-#: src/lincity-ng/MpsInterface.cpp:472
+#: src/lincity-ng/MpsInterface.cpp:475
 msgid "Others"
 msgstr "Diversen"
 
-#: src/lincity-ng/MpsInterface.cpp:477
+#: src/lincity-ng/MpsInterface.cpp:480
 msgid "Net"
 msgstr "Netto"
 
-#: src/lincity-ng/MpsInterface.cpp:489
+#: src/lincity-ng/MpsInterface.cpp:492
 msgid "Other Costs"
 msgstr "Diverse kosten"
 
-#: src/lincity-ng/MpsInterface.cpp:494
+#: src/lincity-ng/MpsInterface.cpp:497
 msgid "For year"
 msgstr "Voor het jaar"
 
-#: src/lincity-ng/MpsInterface.cpp:498
+#: src/lincity-ng/MpsInterface.cpp:501
 msgid "Interest"
 msgstr "Rente"
 
-#: src/lincity-ng/MpsInterface.cpp:500
+#: src/lincity-ng/MpsInterface.cpp:503
 msgid "Schools"
 msgstr "Scholen"
 
-#: src/lincity-ng/MpsInterface.cpp:502
+#: src/lincity-ng/MpsInterface.cpp:505
 msgid "Univers."
 msgstr "Universiteiten"
 
-#: src/lincity-ng/MpsInterface.cpp:504
+#: src/lincity-ng/MpsInterface.cpp:507
 msgid "Deaths"
 msgstr "Doden"
 
-#: src/lincity-ng/MpsInterface.cpp:508
+#: src/lincity-ng/MpsInterface.cpp:511
 msgid "Hospital"
 msgstr "Ziekenhuizen"
 
-#: src/lincity-ng/MpsInterface.cpp:510
+#: src/lincity-ng/MpsInterface.cpp:513
 msgid "Rockets"
 msgstr "Raketten"
 
-#: src/lincity-ng/MpsInterface.cpp:512
+#: src/lincity-ng/MpsInterface.cpp:515
 msgid "Fire Stn"
 msgstr "Brandweerkazerne"
 
-#: src/lincity-ng/MpsInterface.cpp:530
+#: src/lincity-ng/MpsInterface.cpp:533
 msgid "Population"
 msgstr "Bevolking"
 
-#: src/lincity-ng/MpsInterface.cpp:533
+#: src/lincity-ng/MpsInterface.cpp:536
 msgid "Housed"
 msgstr "Gehuisd"
 
-#: src/lincity-ng/MpsInterface.cpp:534
+#: src/lincity-ng/MpsInterface.cpp:537
 msgid "Homeless"
 msgstr "Daklozen"
 
-#: src/lincity-ng/MpsInterface.cpp:535
+#: src/lincity-ng/MpsInterface.cpp:538
 msgid "Shanties"
 msgstr "Krottenwijken"
 
-#: src/lincity-ng/MpsInterface.cpp:536
+#: src/lincity-ng/MpsInterface.cpp:539
 msgid "Unn Dths"
 msgstr "Onnatuurlijke doden"
 
-#: src/lincity-ng/MpsInterface.cpp:537
+#: src/lincity-ng/MpsInterface.cpp:540
 msgid "Unemployment"
 msgstr "Werkloosheid"
 
-#: src/lincity-ng/MpsInterface.cpp:538
+#: src/lincity-ng/MpsInterface.cpp:541
 msgid "Claims"
 msgstr "Werkzoekenden"
 
-#: src/lincity-ng/MpsInterface.cpp:539 src/lincity-ng/MpsInterface.cpp:544
+#: src/lincity-ng/MpsInterface.cpp:542 src/lincity-ng/MpsInterface.cpp:547
 msgid "Rate"
 msgstr "% vd bevolking"
 
-#: src/lincity-ng/MpsInterface.cpp:541
+#: src/lincity-ng/MpsInterface.cpp:544
 msgid "Starvation"
 msgstr "Sterfte"
 
-#: src/lincity-ng/MpsInterface.cpp:542
+#: src/lincity-ng/MpsInterface.cpp:545
 msgid "Cases"
 msgstr "Gevallen"
 
-#: src/lincity-ng/ButtonPanel.cpp:198
+#: src/lincity-ng/ButtonPanel.cpp:200
 msgid "Query Tool"
 msgstr "Informatie Tool"
 
-#: src/lincity-ng/ButtonPanel.cpp:199
+#: src/lincity-ng/ButtonPanel.cpp:201
 msgid "Bulldozer"
 msgstr "Bulldozer"
 
-#: src/lincity-ng/ButtonPanel.cpp:201
+#: src/lincity-ng/ButtonPanel.cpp:203
 msgid "Residential: 50 denizens, low birthrate, high deathrate"
 msgstr "Woonwijk: 50 bewoners, lage geboortecijfers, hoge sterftecijfers"
 
-#: src/lincity-ng/ButtonPanel.cpp:202
+#: src/lincity-ng/ButtonPanel.cpp:204
 msgid "Residential: 100 denizens, high birthrate, low deathrate"
 msgstr "Woonwijk: 100 bewoners, hoge geboortecijfers, lage sterftecijfers"
 
-#: src/lincity-ng/ButtonPanel.cpp:203
+#: src/lincity-ng/ButtonPanel.cpp:205
 msgid "Residential: 200 denizens, high birthrate, high deathrate"
 msgstr "Woonwijk: 200 bewoners, hoge geboortecijfers, hoge sterftecijfers"
 
-#: src/lincity-ng/ButtonPanel.cpp:204
+#: src/lincity-ng/ButtonPanel.cpp:206
 msgid "Residential: 100 denizens, low birthrate, high deathrate"
 msgstr "Woonwijk: 100 bewoners, lage geboortecijfers, hoge sterftecijfers"
 
-#: src/lincity-ng/ButtonPanel.cpp:205
+#: src/lincity-ng/ButtonPanel.cpp:207
 msgid "Residential: 200 denizens, high birthrate, low deathrate"
 msgstr "Woonwijk: 200 bewoners, hoge geboortecijfers, lage sterftecijfers"
 
-#: src/lincity-ng/ButtonPanel.cpp:206
+#: src/lincity-ng/ButtonPanel.cpp:208
 msgid "Residential: 400 denizens, high birthrate, high deathrate"
 msgstr "Woonwijk: 400 bewoners, hoge geboortecijfers, hoge sterftecijfers"
 
-#: src/lincity-ng/ButtonPanel.cpp:215
+#: src/lincity-ng/ButtonPanel.cpp:217
 msgid " [Click right for help.]"
 msgstr " [Klik op de rechtermuisknop voor help]"
 
-#: src/lincity-ng/ButtonPanel.cpp:243 src/lincity-ng/ButtonPanel.cpp:277
+#: src/lincity-ng/ButtonPanel.cpp:245 src/lincity-ng/ButtonPanel.cpp:288
 #, c-format
 msgid "%s (Techlevel %.1f required.)"
 msgstr "%s?(Technisch niveau?%.1f?nodig.)"
 
-#: src/lincity-ng/ButtonPanel.cpp:252
+#: src/lincity-ng/ButtonPanel.cpp:254
 #, c-format
 msgid "%s is disabled (loaded old game)."
 msgstr ""
 
-#: src/lincity-ng/EconomyGraph.cpp:121
+#: src/lincity-ng/EconomyGraph.cpp:124
 msgid "Mining"
 msgstr "Mijnbouw"
 
-#: src/lincity-ng/EconomyGraph.cpp:123
+#: src/lincity-ng/EconomyGraph.cpp:126
 msgid "Trade"
 msgstr "Handel"
 
-#: src/lincity-ng/EconomyGraph.cpp:125
+#: src/lincity-ng/EconomyGraph.cpp:128
 msgid "Money"
 msgstr "Geld"
 
-#: src/lincity-ng/EconomyGraph.cpp:127
+#: src/lincity-ng/EconomyGraph.cpp:130
 msgid "Popul."
 msgstr "Bevolking"
 
-#: src/lincity-ng/EconomyGraph.cpp:129
+#: src/lincity-ng/EconomyGraph.cpp:132
 msgid "Techn."
 msgstr "Technisch"
 
-#: src/lincity-ng/EconomyGraph.cpp:134
+#: src/lincity-ng/EconomyGraph.cpp:137
 msgid "Economy Overview:"
 msgstr "Economisch overzicht:"
 
-#: src/lincity-ng/EconomyGraph.cpp:137
+#: src/lincity-ng/EconomyGraph.cpp:140
 msgid "Sustainability:"
 msgstr "Duurzaamheid:"
 
-#: src/lincity-ng/EconomyGraph.cpp:140
+#: src/lincity-ng/EconomyGraph.cpp:143
 msgid "Frames per Second:"
 msgstr "Frames per seconde:"
 
-#: src/lincity-ng/EconomyGraph.cpp:216
+#: src/lincity-ng/EconomyGraph.cpp:219
 msgid "You lose."
 msgstr "U heeft verloren."

Modified: trunk/data/locale/pl.po
===================================================================
--- trunk/data/locale/pl.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/pl.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -8,7 +8,7 @@
 msgstr ""
 "Project-Id-Version: pl\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-01-27 22:03+0100\n"
+"POT-Creation-Date: 2007-12-04 00:29+0100\n"
 "PO-Revision-Date: 2006-12-17 18:35+0100\n"
 "Last-Translator: \n"
 "Language-Team:  <pl at li.org>\n"
@@ -17,494 +17,501 @@
 "Content-Transfer-Encoding: 8bit\n"
 "X-Generator: KBabel 1.11.2\n"
 
-#: src/lincity/fileutil.cpp:292 src/lincity/fileutil.cpp:341
-msgid "Error. Can't find LINCITY_HOME"
-msgstr "B????d: Nie znaleziono LINCITY_HOME"
-
-#: src/lincity/fileutil.cpp:561
-msgid "Error verifying package. Can't find colour.pal."
-msgstr "B????d weryfikacji pakiet??w. Nie znaleziono color.pal."
-
-#: src/lincity/fileutil.cpp:580 src/lincity/fileutil.cpp:589
-#, c-format
-msgid "Couldn't create the save directory '%s'\n"
-msgstr "Nie mo??na stworzy?? katalogu z zapisami gry '%s'\n"
-
-#: src/lincity/fileutil.cpp:635
-#, c-format
-msgid "Out of memory: malloc failure\n"
-msgstr "Brak wolnej pami??ci: b????d malloc\n"
-
-#: src/lincity/power.cpp:93
-msgid "You have too many power grids. Join some of them"
-msgstr ""
-
-#: src/lincity/engine.cpp:121
+#: src/lincity/engine.cpp:120
 msgid ""
 "ERROR: group does not exist. This should not happen! Please consider filling "
 "a bug report to lincity-ng team, with the saved game and what you did :-) "
 msgstr ""
 
-#: src/lincity/engine.cpp:147
+#: src/lincity/engine.cpp:152
 msgid "Port must be connected to river all along right side."
 msgstr ""
 
-#: src/lincity/engine.cpp:156 src/lincity/engine.cpp:165
+#: src/lincity/engine.cpp:161 src/lincity/engine.cpp:170
 msgid "Too many substations + windmills. You cannot build one more"
 msgstr ""
 
-#: src/lincity/engine.cpp:195
+#: src/lincity/engine.cpp:200
 msgid "Too many markets. You cannot build one more"
 msgstr ""
 
-#: src/lincity/engine.cpp:218
+#: src/lincity/engine.cpp:223
 msgid "You can't build a tip here: this area was once a landfill"
 msgstr ""
 
-#: src/lincity/engine.cpp:243
+#: src/lincity/engine.cpp:248
 msgid "You can't build a mine here: This area was once a landfill"
 msgstr ""
 
-#: src/lincity/engine.cpp:247
+#: src/lincity/engine.cpp:252
 msgid "You can't build a mine here: there is no ore left at this site"
 msgstr ""
 
-#: src/lincity/engine.cpp:259
+#: src/lincity/engine.cpp:264
 msgid "You can't build a water well here: it is all desert."
 msgstr ""
 
-#: src/lincity/engine.cpp:269
+#: src/lincity/engine.cpp:274
 msgid "You can't build a park here: it is a desert, parks need water"
 msgstr ""
 
-#: src/lincity/engine.cpp:691
+#: src/lincity/engine.cpp:485
 msgid "It's at a power line."
 msgstr "To jest linia wysokiego napi??cia."
 
-#: src/lincity/engine.cpp:693
+#: src/lincity/engine.cpp:487
 msgid "It's at a solar power station."
 msgstr "To jest elektrownia s??oneczna."
 
-#: src/lincity/engine.cpp:695
+#: src/lincity/engine.cpp:489
 msgid "It's at a substation."
 msgstr "To jest podstacja elektryczna."
 
-#: src/lincity/engine.cpp:697
+#: src/lincity/engine.cpp:491
 msgid "It's at a residential area."
 msgstr "To jest strefa mieszkalna."
 
-#: src/lincity/engine.cpp:699
+#: src/lincity/engine.cpp:493
 msgid "It's at a farm."
 msgstr "To jest farma."
 
-#: src/lincity/engine.cpp:701
+#: src/lincity/engine.cpp:495
 msgid "It's at a market."
 msgstr "To jest sklep."
 
-#: src/lincity/engine.cpp:703
+#: src/lincity/engine.cpp:497
 msgid "It's at a track."
 msgstr "To jest droga."
 
-#: src/lincity/engine.cpp:705
+#: src/lincity/engine.cpp:499
 msgid "It's at a coal mine."
 msgstr "To jest kopalnia w??gla."
 
-#: src/lincity/engine.cpp:707
+#: src/lincity/engine.cpp:501
 msgid "It's at a railway."
 msgstr "To s?? tory kolejowe."
 
-#: src/lincity/engine.cpp:709
+#: src/lincity/engine.cpp:503
 msgid "It's at a coal power station."
 msgstr "To jest elektrownia w??glowa."
 
-#: src/lincity/engine.cpp:711
+#: src/lincity/engine.cpp:505
 msgid "It's at a road."
 msgstr "To jest ulica."
 
-#: src/lincity/engine.cpp:713
+#: src/lincity/engine.cpp:507
 msgid "It's at light industry."
 msgstr "To jest lekki przemys??."
 
-#: src/lincity/engine.cpp:715
+#: src/lincity/engine.cpp:509
 msgid "It's at a university."
 msgstr "To jest uniwersytet."
 
-#: src/lincity/engine.cpp:717
+#: src/lincity/engine.cpp:511
 msgid "It's at a commune."
 msgstr "To jest retorta."
 
-#: src/lincity/engine.cpp:719
+#: src/lincity/engine.cpp:513
 msgid "It's at a tip."
 msgstr "To jest wysypisko ??mieci."
 
-#: src/lincity/engine.cpp:721
+#: src/lincity/engine.cpp:515
 msgid "It's at a port."
 msgstr "To jest port."
 
-#: src/lincity/engine.cpp:723
+#: src/lincity/engine.cpp:517
 msgid "It's at a steel works."
 msgstr "To jest huta."
 
-#: src/lincity/engine.cpp:725
+#: src/lincity/engine.cpp:519
 msgid "It's at a recycle centre."
 msgstr "To jest zak??ad recyklingu"
 
-#: src/lincity/engine.cpp:727
+#: src/lincity/engine.cpp:521
 msgid "It's at a health centre."
 msgstr "To jest szpital."
 
-#: src/lincity/engine.cpp:729
+#: src/lincity/engine.cpp:523
 msgid "It's at a rocket site."
 msgstr "To jest kosmodrom."
 
-#: src/lincity/engine.cpp:731
+#: src/lincity/engine.cpp:525
 msgid "It's at a windmill."
 msgstr "To jest wiatrak."
 
-#: src/lincity/engine.cpp:733
+#: src/lincity/engine.cpp:527
 msgid "It's at a school."
 msgstr "To jest szko??a."
 
-#: src/lincity/engine.cpp:735
+#: src/lincity/engine.cpp:529
 msgid "It's at a blacksmith."
 msgstr "To jest ku??nia."
 
-#: src/lincity/engine.cpp:737
+#: src/lincity/engine.cpp:531
 msgid "It's at a mill."
 msgstr "To jest fabryka."
 
-#: src/lincity/engine.cpp:739
+#: src/lincity/engine.cpp:533
 msgid "It's at a pottery."
 msgstr "To jest garncarnia."
 
-#: src/lincity/engine.cpp:741
+#: src/lincity/engine.cpp:535
 msgid "It's at a fire station!!!."
 msgstr "To jest remiza stra??acka!!!"
 
-#: src/lincity/engine.cpp:743
+#: src/lincity/engine.cpp:537
 msgid "It's at a sports field!!!."
 msgstr "To jest boisko!!!"
 
-#: src/lincity/engine.cpp:745
+#: src/lincity/engine.cpp:539
 msgid "It's at a shanty town."
 msgstr "To jest dzielnica slums??w."
 
-#: src/lincity/engine.cpp:747
+#: src/lincity/engine.cpp:541
 msgid "UNKNOWN!"
 msgstr "NIEZNANY!"
 
-#: src/lincity/lintypes.cpp:22
+#: src/lincity/lintypes.cpp:20
 msgid "Empty"
 msgstr "Pusty"
 
-#: src/lincity/lintypes.cpp:34
+#: src/lincity/lintypes.cpp:32
 msgid "Power line"
 msgstr "Linia wysokiego napi??cia"
 
-#: src/lincity/lintypes.cpp:46
+#: src/lincity/lintypes.cpp:43
 msgid "Solar PS"
 msgstr "Elektr. S??oneczna"
 
-#: src/lincity/lintypes.cpp:58 src/lincity/modules/substation.cpp:91
+#: src/lincity/lintypes.cpp:54 src/lincity/modules/substation.cpp:93
 msgid "Substation"
 msgstr "Podstacja elekrtyczna"
 
-#: src/lincity/lintypes.cpp:70
+#: src/lincity/lintypes.cpp:65
 msgid "Residential LL"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:82
+#: src/lincity/lintypes.cpp:76
 msgid "Farm"
 msgstr "Farma"
 
-#: src/lincity/lintypes.cpp:94 src/lincity/modules/market.cpp:1143
-#: src/lincity-ng/Dialog.cpp:486
+#: src/lincity/lintypes.cpp:87 src/lincity/modules/market.cpp:979
+#: src/lincity-ng/Dialog.cpp:507
 msgid "Market"
 msgstr "Sklep"
 
-#: src/lincity/lintypes.cpp:106 src/lincity/modules/track.cpp:38
+#: src/lincity/lintypes.cpp:98 src/lincity/modules/track.cpp:34
 msgid "Track"
 msgstr "Droga"
 
-#: src/lincity/lintypes.cpp:118
+#: src/lincity/lintypes.cpp:109
 msgid "Coalmine"
 msgstr "Kopalnia w??gla"
 
-#: src/lincity/lintypes.cpp:130
+#: src/lincity/lintypes.cpp:120
 msgid "Railway"
 msgstr "Tory kolejowe"
 
-#: src/lincity/lintypes.cpp:142
+#: src/lincity/lintypes.cpp:131
 msgid "Coal PS"
 msgstr "Elektr. w??glowa"
 
-#: src/lincity/lintypes.cpp:154 src/lincity/modules/road.cpp:47
+#: src/lincity/lintypes.cpp:142 src/lincity/modules/road.cpp:43
 msgid "Road"
 msgstr "Ulica"
 
-#: src/lincity/lintypes.cpp:166
+#: src/lincity/lintypes.cpp:153
 msgid "Lt. Industry"
 msgstr "Lekki Przemys??"
 
-#: src/lincity/lintypes.cpp:178 src/lincity/modules/university.cpp:67
+#: src/lincity/lintypes.cpp:164 src/lincity/modules/university.cpp:59
 msgid "University"
 msgstr "Uniwersytet"
 
-#: src/lincity/lintypes.cpp:190 src/lincity/modules/commune.cpp:146
+#: src/lincity/lintypes.cpp:175 src/lincity/modules/commune.cpp:172
 msgid "Commune"
 msgstr "Retorta"
 
-#: src/lincity/lintypes.cpp:202
+#: src/lincity/lintypes.cpp:186
 msgid "Ore mine"
 msgstr "Kopalnia rudy"
 
-#: src/lincity/lintypes.cpp:214
+#: src/lincity/lintypes.cpp:197
 msgid "Rubbish tip"
 msgstr "Wysypisko ??mieci"
 
-#: src/lincity/lintypes.cpp:226 src/lincity/modules/port.cpp:173
-#: src/lincity-ng/Dialog.cpp:540
+#: src/lincity/lintypes.cpp:208 src/lincity/modules/port.cpp:281
+#: src/lincity-ng/Dialog.cpp:561
 msgid "Port"
 msgstr "Port"
 
-#: src/lincity/lintypes.cpp:238
+#: src/lincity/lintypes.cpp:219
 msgid "Hv. Industry"
 msgstr "Ci????ki przemys??"
 
-#: src/lincity/lintypes.cpp:250
+#: src/lincity/lintypes.cpp:230
 msgid "Park"
 msgstr "Park"
 
-#: src/lincity/lintypes.cpp:262 src/lincity-ng/MpsInterface.cpp:516
+#: src/lincity/lintypes.cpp:241 src/lincity-ng/MpsInterface.cpp:519
 msgid "Recycle"
 msgstr "Zak??ad recyklingu"
 
-#: src/lincity/lintypes.cpp:274 src/lincity/modules/water.cpp:19
+#: src/lincity/lintypes.cpp:252 src/lincity/modules/water.cpp:17
+#: src/lincity/modules/residence.cpp:264
 msgid "Water"
 msgstr "Woda"
 
-#: src/lincity/lintypes.cpp:286
+#: src/lincity/lintypes.cpp:263
 msgid "Health centre"
 msgstr "Szpital"
 
-#: src/lincity/lintypes.cpp:298
+#: src/lincity/lintypes.cpp:274
 msgid "Rocket pad"
 msgstr "Kosmodrom"
 
-#: src/lincity/lintypes.cpp:310 src/lincity/modules/windmill.cpp:73
-#: src/lincity-ng/MpsInterface.cpp:506
+#: src/lincity/lintypes.cpp:285 src/lincity/modules/windmill.cpp:75
+#: src/lincity-ng/MpsInterface.cpp:509
 msgid "Windmill"
 msgstr "Wiatrak"
 
-#: src/lincity/lintypes.cpp:322 src/lincity/modules/monument.cpp:57
+#: src/lincity/lintypes.cpp:296 src/lincity/modules/monument.cpp:51
 msgid "Monument"
 msgstr "Pomnik"
 
-#: src/lincity/lintypes.cpp:334 src/lincity/modules/school.cpp:49
+#: src/lincity/lintypes.cpp:307 src/lincity/modules/school.cpp:43
 msgid "School"
 msgstr "Szko??a"
 
-#: src/lincity/lintypes.cpp:346 src/lincity/modules/blacksmith.cpp:97
+#: src/lincity/lintypes.cpp:318 src/lincity/modules/blacksmith.cpp:90
 msgid "Blacksmith"
 msgstr "Ku??nia"
 
-#: src/lincity/lintypes.cpp:358
+#: src/lincity/lintypes.cpp:329
 msgid "Mill"
 msgstr "Fabryka"
 
-#: src/lincity/lintypes.cpp:370 src/lincity/modules/pottery.cpp:119
+#: src/lincity/lintypes.cpp:340 src/lincity/modules/pottery.cpp:104
 msgid "Pottery"
 msgstr "Garncarnia"
 
-#: src/lincity/lintypes.cpp:382
+#: src/lincity/lintypes.cpp:351
 msgid "Fire sta'n"
 msgstr "Remiza stra??acka"
 
-#: src/lincity/lintypes.cpp:394 src/lincity/modules/cricket.cpp:99
+#: src/lincity/lintypes.cpp:362 src/lincity/modules/cricket.cpp:91
 msgid "Sports field"
 msgstr "Centrum sportowe"
 
-#: src/lincity/lintypes.cpp:407
+#: src/lincity/lintypes.cpp:374
 msgid "Burnt"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:420
+#: src/lincity/lintypes.cpp:386
 msgid "Shanty town"
 msgstr "Dzielnica slums??w"
 
-#: src/lincity/lintypes.cpp:433 src/lincity/modules/residence.cpp:292
-#: src/lincity-ng/MpsInterface.cpp:380 src/lincity-ng/EconomyGraph.cpp:131
+#: src/lincity/lintypes.cpp:398 src/lincity/modules/residence.cpp:283
+#: src/lincity-ng/MpsInterface.cpp:383 src/lincity-ng/EconomyGraph.cpp:134
 msgid "Fire"
 msgstr "Ogie??"
 
-#: src/lincity/lintypes.cpp:446
+#: src/lincity/lintypes.cpp:410
 msgid "Used"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:458
+#: src/lincity/lintypes.cpp:421
 msgid "Residential ML"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:470
+#: src/lincity/lintypes.cpp:432
 msgid "Residential HL"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:482
+#: src/lincity/lintypes.cpp:443
 msgid "Residential LH"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:494
+#: src/lincity/lintypes.cpp:454
 msgid "Residential MH"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:506
+#: src/lincity/lintypes.cpp:465
 msgid "Residential HH"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:477
+#: src/lincity/lintypes.cpp:476
 msgid "Water well"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:489
+#: src/lincity/lintypes.cpp:488
 msgid "Desert"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:501
+#: src/lincity/lintypes.cpp:500
 msgid "Tree"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:514
+#: src/lincity/lintypes.cpp:513
 msgid "Trees"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:527
+#: src/lincity/lintypes.cpp:526
 msgid "Forest"
 msgstr ""
 
-#: src/lincity/ldsvguts.cpp:128
+#: src/lincity/ldsvguts.cpp:137
 #, c-format
 msgid "Save file <%s> - "
 msgstr "Zapisano plik <%s> - "
 
-#: src/lincity/ldsvguts.cpp:129
+#: src/lincity/ldsvguts.cpp:138
 msgid "Can't open save file!"
 msgstr "Nie mo??na otworzy?? zapisanego pliku!"
 
-#: src/lincity/ldsvguts.cpp:134
+#: src/lincity/ldsvguts.cpp:148
 msgid "Saving scene"
 msgstr "Zapisywanie sceny"
 
-#: src/lincity/ldsvguts.cpp:334
+#: src/lincity/ldsvguts.cpp:362
 #, c-format
 msgid "Can't open <%s> (gzipped)"
 msgstr "Nie mo??na otworzy?? <%s> (gzipowany)"
 
-#: src/lincity/ldsvguts.cpp:352
+#: src/lincity/ldsvguts.cpp:395
 msgid "Loading scene"
 msgstr "Wczytywanie sceny"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/fileutil.cpp:266 src/lincity/fileutil.cpp:310
+msgid "Error. Can't find LINCITY_HOME"
+msgstr "B????d: Nie znaleziono LINCITY_HOME"
+
+#: src/lincity/fileutil.cpp:512
+msgid "Error verifying package. Can't find colour.pal."
+msgstr "B????d weryfikacji pakiet??w. Nie znaleziono color.pal."
+
+#: src/lincity/fileutil.cpp:525 src/lincity/fileutil.cpp:533
+#, c-format
+msgid "Couldn't create the save directory '%s'\n"
+msgstr "Nie mo??na stworzy?? katalogu z zapisami gry '%s'\n"
+
+#: src/lincity/fileutil.cpp:550
+#, c-format
+msgid "Out of memory: malloc failure\n"
+msgstr "Brak wolnej pami??ci: b????d malloc\n"
+
+#: src/lincity/simulate.cpp:97
+msgid ""
+"Upgrading from old game. You have 10 years to build water wells where "
+"needed. After, starvation will occur!  You should check starvation minimap, "
+"and read waterwell help page :-)"
+msgstr ""
+
+#: src/lincity/lclib.cpp:15
 msgid "Jan"
 msgstr "Sty "
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Feb"
 msgstr "Lut"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Mar"
 msgstr "Mar"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Apr"
 msgstr "Kwi"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "May"
 msgstr "Maj"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jun"
 msgstr "Cze"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jul"
 msgstr "Lip"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Aug"
 msgstr "Sie"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Sep"
 msgstr "Wrz"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Oct"
 msgstr "Pa??"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Nov"
 msgstr "Lis"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Dec"
 msgstr "Gru"
 
-#: src/lincity/modules/health_centre.cpp:66
+#: src/lincity/power.cpp:102
+msgid "You have too many power grids. Join some of them"
+msgstr ""
+
+#: src/lincity/modules/health_centre.cpp:58
 msgid "Health Centre"
 msgstr "Szpital"
 
-#: src/lincity/modules/health_centre.cpp:68
-#: src/lincity/modules/rocket_pad.cpp:169 src/lincity/modules/recycle.cpp:181
-#: src/lincity/modules/mill.cpp:107 src/lincity/modules/university.cpp:74
-#: src/lincity/modules/cricket.cpp:101 src/lincity/modules/pottery.cpp:123
-#: src/lincity/modules/blacksmith.cpp:102
-#: src/lincity/modules/firestation.cpp:121 src/lincity/modules/school.cpp:54
+#: src/lincity/modules/health_centre.cpp:60
+#: src/lincity/modules/rocket_pad.cpp:198 src/lincity/modules/recycle.cpp:148
+#: src/lincity/modules/mill.cpp:92 src/lincity/modules/university.cpp:65
+#: src/lincity/modules/cricket.cpp:93 src/lincity/modules/pottery.cpp:108
+#: src/lincity/modules/blacksmith.cpp:95 src/lincity/modules/school.cpp:48
+#: src/lincity/modules/firestation.cpp:110
 msgid "Inventory"
 msgstr "Sk??ad"
 
-#: src/lincity/modules/health_centre.cpp:69
-#: src/lincity/modules/rocket_pad.cpp:170 src/lincity/modules/market.cpp:1149
-#: src/lincity/modules/road.cpp:52 src/lincity/modules/rail.cpp:55
-#: src/lincity/modules/coal_power.cpp:105
-#: src/lincity/modules/university.cpp:75 src/lincity/modules/cricket.cpp:102
-#: src/lincity/modules/track.cpp:43 src/lincity/modules/pottery.cpp:124
-#: src/lincity/modules/firestation.cpp:122 src/lincity/modules/school.cpp:55
+#: src/lincity/modules/health_centre.cpp:61
+#: src/lincity/modules/rocket_pad.cpp:199 src/lincity/modules/market.cpp:984
+#: src/lincity/modules/road.cpp:47 src/lincity/modules/rail.cpp:51
+#: src/lincity/modules/coal_power.cpp:97 src/lincity/modules/university.cpp:66
+#: src/lincity/modules/cricket.cpp:94 src/lincity/modules/track.cpp:38
+#: src/lincity/modules/pottery.cpp:109 src/lincity/modules/school.cpp:49
+#: src/lincity/modules/firestation.cpp:111
 msgid "Jobs"
 msgstr "Si??a robocza"
 
-#: src/lincity/modules/health_centre.cpp:71
-#: src/lincity/modules/rocket_pad.cpp:172 src/lincity/modules/market.cpp:1153
-#: src/lincity/modules/port.cpp:190 src/lincity/modules/road.cpp:56
-#: src/lincity/modules/rail.cpp:59 src/lincity/modules/mill.cpp:108
-#: src/lincity/modules/university.cpp:77 src/lincity/modules/cricket.cpp:104
-#: src/lincity/modules/track.cpp:47 src/lincity/modules/pottery.cpp:126
-#: src/lincity/modules/blacksmith.cpp:103
-#: src/lincity/modules/firestation.cpp:124 src/lincity/modules/school.cpp:57
-#: src/lincity-ng/MpsInterface.cpp:448
+#: src/lincity/modules/health_centre.cpp:62
+#: src/lincity/modules/rocket_pad.cpp:200 src/lincity/modules/market.cpp:986
+#: src/lincity/modules/port.cpp:298 src/lincity/modules/road.cpp:49
+#: src/lincity/modules/rail.cpp:53 src/lincity/modules/mill.cpp:93
+#: src/lincity/modules/university.cpp:67 src/lincity/modules/cricket.cpp:95
+#: src/lincity/modules/track.cpp:40 src/lincity/modules/pottery.cpp:110
+#: src/lincity/modules/blacksmith.cpp:96 src/lincity/modules/school.cpp:50
+#: src/lincity/modules/firestation.cpp:112 src/lincity-ng/MpsInterface.cpp:451
 msgid "Goods"
 msgstr "Towary"
 
-#: src/lincity/modules/rocket_pad.cpp:163
+#: src/lincity/modules/rocket_pad.cpp:192
 msgid "Rocket Pad"
 msgstr "Kosmodrom"
 
-#: src/lincity/modules/rocket_pad.cpp:166
+#: src/lincity/modules/rocket_pad.cpp:195
 msgid "Completion"
 msgstr ""
 
-#: src/lincity/modules/rocket_pad.cpp:174 src/lincity/modules/market.cpp:1157
-#: src/lincity/modules/port.cpp:194 src/lincity/modules/road.cpp:60
-#: src/lincity/modules/rail.cpp:63 src/lincity/modules/light_industry.cpp:368
-#: src/lincity/modules/commune.cpp:156 src/lincity/modules/track.cpp:51
+#: src/lincity/modules/rocket_pad.cpp:201 src/lincity/modules/market.cpp:988
+#: src/lincity/modules/port.cpp:302 src/lincity/modules/road.cpp:51
+#: src/lincity/modules/rail.cpp:55 src/lincity/modules/light_industry.cpp:288
+#: src/lincity/modules/commune.cpp:182 src/lincity/modules/track.cpp:42
 msgid "Steel"
 msgstr "Stal"
 
-#: src/lincity/modules/windmill.cpp:77 src/lincity/modules/windmill.cpp:88
-#: src/lincity/modules/recycle.cpp:178 src/lincity/modules/coal_power.cpp:107
-#: src/lincity/modules/organic_farm.cpp:196
-#: src/lincity/modules/solar_power.cpp:58
+#: src/lincity/modules/windmill.cpp:76 src/lincity/modules/recycle.cpp:146
+#: src/lincity/modules/coal_power.cpp:98
+#: src/lincity/modules/organic_farm.cpp:230
+#: src/lincity/modules/solar_power.cpp:60
 msgid "Tech"
 msgstr "Tech"
 
@@ -516,787 +523,786 @@
 msgid "Prod."
 msgstr "Prod."
 
-#: src/lincity/modules/windmill.cpp:86 src/lincity/modules/windmill.cpp:101
-#: src/lincity/modules/substation.cpp:108
+#: src/lincity/modules/windmill.cpp:86 src/lincity/modules/windmill.cpp:99
+#: src/lincity/modules/substation.cpp:110
 msgid "Demand"
 msgstr "Zapotrzebowanie"
 
-#: src/lincity/modules/windmill.cpp:92 src/lincity/modules/substation.cpp:99
+#: src/lincity/modules/windmill.cpp:90 src/lincity/modules/substation.cpp:101
 msgid "Grid Status"
 msgstr ""
 
-#: src/lincity/modules/windmill.cpp:95 src/lincity/modules/substation.cpp:102
+#: src/lincity/modules/windmill.cpp:93 src/lincity/modules/substation.cpp:104
 msgid "T. Cap."
 msgstr "Ca??kowita Pojemno????"
 
-#: src/lincity/modules/windmill.cpp:98 src/lincity/modules/substation.cpp:105
+#: src/lincity/modules/windmill.cpp:96 src/lincity/modules/substation.cpp:107
 msgid "A. Cap."
 msgstr "Dost??pna Pojemno????"
 
-#: src/lincity/modules/windmill.cpp:104 src/lincity/modules/coal_power.cpp:109
-#: src/lincity/modules/substation.cpp:111
-#: src/lincity/modules/power_line.cpp:53
-#: src/lincity/modules/solar_power.cpp:60
+#: src/lincity/modules/windmill.cpp:102 src/lincity/modules/coal_power.cpp:99
+#: src/lincity/modules/substation.cpp:113
+#: src/lincity/modules/power_line.cpp:49
+#: src/lincity/modules/solar_power.cpp:61
 msgid "Grid ID"
 msgstr ""
 
-#: src/lincity/modules/water.cpp:22 src/lincity/modules/commune.cpp:151
-#: src/lincity/modules/commune.cpp:153 src/lincity/modules/commune.cpp:155
-#: src/lincity/modules/commune.cpp:157 src/lincity-ng/MpsInterface.cpp:379
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/waterwell.cpp:50
+#: src/lincity/modules/commune.cpp:177 src/lincity/modules/commune.cpp:179
+#: src/lincity/modules/commune.cpp:181 src/lincity/modules/commune.cpp:183
 #: src/lincity-ng/MpsInterface.cpp:382 src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity-ng/MpsInterface.cpp:388
 msgid "Yes"
 msgstr "Tak"
 
-#: src/lincity/modules/water.cpp:22 src/lincity/modules/commune.cpp:151
-#: src/lincity/modules/commune.cpp:153 src/lincity/modules/commune.cpp:155
-#: src/lincity/modules/commune.cpp:157 src/lincity-ng/MpsInterface.cpp:379
-#: src/lincity-ng/MpsInterface.cpp:382 src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/commune.cpp:177
+#: src/lincity/modules/commune.cpp:179 src/lincity/modules/commune.cpp:181
+#: src/lincity/modules/commune.cpp:183 src/lincity-ng/MpsInterface.cpp:382
+#: src/lincity-ng/MpsInterface.cpp:385 src/lincity-ng/MpsInterface.cpp:388
 msgid "No"
 msgstr "Nie"
 
-#: src/lincity/modules/water.cpp:23
+#: src/lincity/modules/water.cpp:21
 msgid "Navigable"
 msgstr ""
 
-#: src/lincity/modules/recycle.cpp:169
+#: src/lincity/modules/recycle.cpp:137
 msgid "Recycling"
 msgstr "Recycling"
 
-#: src/lincity/modules/recycle.cpp:170
+#: src/lincity/modules/recycle.cpp:138
 msgid "Center"
 msgstr "Centrum"
 
-#: src/lincity/modules/recycle.cpp:173
-#: src/lincity/modules/heavy_industry.cpp:346 src/lincity/modules/mill.cpp:105
-#: src/lincity/modules/light_industry.cpp:370
-#: src/lincity/modules/university.cpp:79 src/lincity/modules/pottery.cpp:121
-#: src/lincity/modules/blacksmith.cpp:100 src/lincity/modules/school.cpp:60
+#: src/lincity/modules/recycle.cpp:141
+#: src/lincity/modules/heavy_industry.cpp:288 src/lincity/modules/mill.cpp:90
+#: src/lincity/modules/light_industry.cpp:289
+#: src/lincity/modules/university.cpp:68 src/lincity/modules/pottery.cpp:106
+#: src/lincity/modules/blacksmith.cpp:93 src/lincity/modules/school.cpp:52
 msgid "Capacity"
 msgstr "Pojemno????"
 
-#: src/lincity/modules/recycle.cpp:175 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
 #: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/residence.cpp:288 src/lincity/modules/residence.cpp:291
-#: src/lincity/modules/residence.cpp:294
-#: src/lincity/modules/light_industry.cpp:359
-#: src/lincity/modules/organic_farm.cpp:188
+#: src/lincity/modules/light_industry.cpp:281
+#: src/lincity/modules/organic_farm.cpp:223
 msgid "YES"
 msgstr "TAK"
 
-#: src/lincity/modules/recycle.cpp:175 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
 #: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/residence.cpp:288 src/lincity/modules/residence.cpp:291
-#: src/lincity/modules/residence.cpp:294
-#: src/lincity/modules/heavy_industry.cpp:334
-#: src/lincity/modules/light_industry.cpp:359
+#: src/lincity/modules/heavy_industry.cpp:279
+#: src/lincity/modules/light_industry.cpp:281
 msgid "NO"
 msgstr "NIE"
 
-#: src/lincity/modules/recycle.cpp:176 src/lincity/modules/residence.cpp:280
-#: src/lincity/modules/heavy_industry.cpp:337
-#: src/lincity/modules/light_industry.cpp:360
-#: src/lincity/modules/organic_farm.cpp:193
+#: src/lincity/modules/recycle.cpp:144 src/lincity/modules/residence.cpp:271
+#: src/lincity/modules/heavy_industry.cpp:282
+#: src/lincity/modules/light_industry.cpp:282
+#: src/lincity/modules/organic_farm.cpp:227
 msgid "Power"
 msgstr "Energia"
 
-#: src/lincity/modules/recycle.cpp:182
-#: src/lincity/modules/heavy_industry.cpp:342
-#: src/lincity/modules/market.cpp:1155 src/lincity/modules/port.cpp:186
-#: src/lincity/modules/road.cpp:58 src/lincity/modules/rail.cpp:61
-#: src/lincity/modules/light_industry.cpp:366
-#: src/lincity/modules/commune.cpp:154 src/lincity/modules/track.cpp:49
-#: src/lincity/modules/pottery.cpp:128
+#: src/lincity/modules/recycle.cpp:149
+#: src/lincity/modules/heavy_industry.cpp:286
+#: src/lincity/modules/market.cpp:987 src/lincity/modules/port.cpp:294
+#: src/lincity/modules/road.cpp:50 src/lincity/modules/rail.cpp:54
+#: src/lincity/modules/light_industry.cpp:287
+#: src/lincity/modules/commune.cpp:180 src/lincity/modules/track.cpp:41
+#: src/lincity/modules/pottery.cpp:111
 msgid "Ore"
 msgstr "Ruda"
 
-#: src/lincity/modules/recycle.cpp:184 src/lincity/modules/market.cpp:1159
-#: src/lincity/modules/road.cpp:62 src/lincity/modules/rail.cpp:65
-#: src/lincity/modules/commune.cpp:158 src/lincity/modules/track.cpp:53
+#: src/lincity/modules/recycle.cpp:150 src/lincity/modules/market.cpp:989
+#: src/lincity/modules/road.cpp:52 src/lincity/modules/rail.cpp:56
+#: src/lincity/modules/commune.cpp:184 src/lincity/modules/track.cpp:43
 msgid "Waste"
 msgstr "Zniszczone"
 
-#: src/lincity/modules/coalmine.cpp:168
+#: src/lincity/modules/coalmine.cpp:132
 msgid "Coal Mine"
 msgstr "Kopalnia w??gla"
 
-#: src/lincity/modules/coalmine.cpp:171 src/lincity/modules/oremine.cpp:187
+#: src/lincity/modules/coalmine.cpp:135 src/lincity/modules/oremine.cpp:144
 msgid "Stock"
 msgstr ""
 
-#: src/lincity/modules/coalmine.cpp:175 src/lincity/modules/coalmine.cpp:177
-#: src/lincity/modules/oremine.cpp:191
+#: src/lincity/modules/coalmine.cpp:138 src/lincity/modules/coalmine.cpp:140
+#: src/lincity/modules/oremine.cpp:147
 msgid "Reserve"
 msgstr "Zapas"
 
-#: src/lincity/modules/coalmine.cpp:177
+#: src/lincity/modules/coalmine.cpp:140
 msgid "EMPTY"
 msgstr "PUSTY"
 
-#: src/lincity/modules/residence.cpp:273
+#: src/lincity/modules/residence.cpp:255
 msgid "Residence"
 msgstr ""
 
-#: src/lincity/modules/residence.cpp:277
+#: src/lincity/modules/residence.cpp:259
 msgid "People"
 msgstr "Ludzie"
 
-#: src/lincity/modules/residence.cpp:283
+#: src/lincity/modules/residence.cpp:268
 msgid "Fed"
 msgstr "Wy??ywienie"
 
-#: src/lincity/modules/residence.cpp:286
+#: src/lincity/modules/residence.cpp:274
 msgid "Employed"
 msgstr "Zatrudnienie"
 
-#: src/lincity/modules/residence.cpp:299 src/lincity-ng/MpsInterface.cpp:393
+#: src/lincity/modules/residence.cpp:276 src/lincity-ng/MpsInterface.cpp:396
 msgid "good"
 msgstr "dobry"
 
-#: src/lincity/modules/residence.cpp:299
+#: src/lincity/modules/residence.cpp:276
 msgid "poor"
 msgstr "biedny"
 
-#: src/lincity/modules/residence.cpp:300
+#: src/lincity/modules/residence.cpp:277
 msgid "Job"
 msgstr ""
 
-#: src/lincity/modules/residence.cpp:289
+#: src/lincity/modules/residence.cpp:280
 msgid "Health Cvr"
 msgstr "Zasi??g szpitali"
 
-#: src/lincity/modules/residence.cpp:295 src/lincity-ng/MpsInterface.cpp:386
-#: src/lincity-ng/MpsInterface.cpp:514
+#: src/lincity/modules/residence.cpp:286 src/lincity-ng/MpsInterface.cpp:389
+#: src/lincity-ng/MpsInterface.cpp:517
 msgid "Sport"
 msgstr "Sport"
 
-#: src/lincity/modules/residence.cpp:297 src/lincity-ng/MpsInterface.cpp:388
+#: src/lincity/modules/residence.cpp:288 src/lincity/modules/waterwell.cpp:47
+#: src/lincity-ng/MpsInterface.cpp:391
 msgid "Pollution"
 msgstr "Zanieczyszczenie"
 
-#: src/lincity/modules/monument.cpp:63
+#: src/lincity/modules/monument.cpp:57
 msgid "Wisdom Bestowed"
 msgstr ""
 
-#: src/lincity/modules/monument.cpp:67
+#: src/lincity/modules/monument.cpp:61
 #, c-format
 msgid "% Complete"
 msgstr "% Gotowy"
 
-#: src/lincity/modules/heavy_industry.cpp:323
+#: src/lincity/modules/waterwell.cpp:44
+msgid "Water_well"
+msgstr ""
+
+#: src/lincity/modules/waterwell.cpp:51
+msgid "Drinkable"
+msgstr ""
+
+#: src/lincity/modules/heavy_industry.cpp:268
 msgid "Heavy"
 msgstr "Ci????ki"
 
-#: src/lincity/modules/heavy_industry.cpp:324
-#: src/lincity/modules/light_industry.cpp:355
+#: src/lincity/modules/heavy_industry.cpp:269
+#: src/lincity/modules/light_industry.cpp:277
 msgid "Industry"
 msgstr "Przemys??"
 
-#: src/lincity/modules/heavy_industry.cpp:329
-#: src/lincity/modules/heavy_industry.cpp:344
-#: src/lincity/modules/market.cpp:1151 src/lincity/modules/port.cpp:182
-#: src/lincity/modules/road.cpp:54 src/lincity/modules/rail.cpp:57
-#: src/lincity/modules/coal_power.cpp:89
-#: src/lincity/modules/coal_power.cpp:103 src/lincity/modules/mill.cpp:112
-#: src/lincity/modules/commune.cpp:152 src/lincity/modules/track.cpp:45
-#: src/lincity/modules/pottery.cpp:130 src/lincity/modules/blacksmith.cpp:105
-#: src/lincity-ng/MpsInterface.cpp:444
+#: src/lincity/modules/heavy_industry.cpp:274
+#: src/lincity/modules/heavy_industry.cpp:287
+#: src/lincity/modules/market.cpp:985 src/lincity/modules/port.cpp:290
+#: src/lincity/modules/road.cpp:48 src/lincity/modules/rail.cpp:52
+#: src/lincity/modules/coal_power.cpp:82 src/lincity/modules/coal_power.cpp:96
+#: src/lincity/modules/mill.cpp:95 src/lincity/modules/commune.cpp:178
+#: src/lincity/modules/track.cpp:39 src/lincity/modules/pottery.cpp:112
+#: src/lincity/modules/blacksmith.cpp:97 src/lincity-ng/MpsInterface.cpp:447
 msgid "Coal"
 msgstr "W??giel"
 
-#: src/lincity/modules/heavy_industry.cpp:331
+#: src/lincity/modules/heavy_industry.cpp:276
 msgid "Grid"
 msgstr "Siatka"
 
-#: src/lincity/modules/heavy_industry.cpp:339
-#: src/lincity/modules/light_industry.cpp:362
+#: src/lincity/modules/heavy_industry.cpp:284
+#: src/lincity/modules/light_industry.cpp:284
 msgid "Output"
 msgstr ""
 
-#: src/lincity/modules/heavy_industry.cpp:340
-#: src/lincity/modules/light_industry.cpp:364
+#: src/lincity/modules/heavy_industry.cpp:285
+#: src/lincity/modules/light_industry.cpp:286
 msgid "Store"
 msgstr "Magazyn"
 
-#: src/lincity/modules/market.cpp:1147 src/lincity/modules/port.cpp:178
-#: src/lincity/modules/road.cpp:50 src/lincity/modules/rail.cpp:53
-#: src/lincity/modules/mill.cpp:110 src/lincity/modules/track.cpp:41
+#: src/lincity/modules/market.cpp:983 src/lincity/modules/port.cpp:286
+#: src/lincity/modules/road.cpp:46 src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/mill.cpp:94 src/lincity/modules/track.cpp:37
 msgid "Food"
 msgstr "??ywno????"
 
-#: src/lincity/modules/port.cpp:198 src/lincity-ng/MpsInterface.cpp:532
+#: src/lincity/modules/port.cpp:306 src/lincity-ng/MpsInterface.cpp:535
 msgid "Total"
 msgstr "Ca??kowity"
 
-#: src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/rail.cpp:47
 msgid "Rail"
 msgstr "Tory kolejowe"
 
-#: src/lincity/modules/coal_power.cpp:90
-#: src/lincity/modules/solar_power.cpp:45
+#: src/lincity/modules/coal_power.cpp:83
+#: src/lincity/modules/solar_power.cpp:47
 msgid "Power Station"
 msgstr "Elektrownia"
 
-#: src/lincity/modules/coal_power.cpp:94
-#: src/lincity/modules/solar_power.cpp:49
+#: src/lincity/modules/coal_power.cpp:87
+#: src/lincity/modules/solar_power.cpp:51
 msgid "Max Output"
 msgstr "Maksymalna moc"
 
-#: src/lincity/modules/coal_power.cpp:99
-#: src/lincity/modules/solar_power.cpp:54
+#: src/lincity/modules/coal_power.cpp:92
+#: src/lincity/modules/solar_power.cpp:56
 msgid "Current Output"
 msgstr "Bie????ca moc"
 
-#: src/lincity/modules/substation.cpp:95
+#: src/lincity/modules/substation.cpp:97
 msgid "Local Demand"
 msgstr "Lokalne Zapotrzebowanie"
 
-#: src/lincity/modules/mill.cpp:103
+#: src/lincity/modules/mill.cpp:88
 msgid "Textile Mill"
 msgstr "Fabryka odzie??y"
 
-#: src/lincity/modules/oremine.cpp:184
+#: src/lincity/modules/oremine.cpp:141
 msgid "Ore Mine"
 msgstr "Kopalnia rudy"
 
-#: src/lincity/modules/power_line.cpp:50
+#: src/lincity/modules/power_line.cpp:46
 msgid "Power Line"
 msgstr "Linia wysokiego napi??cia"
 
-#: src/lincity/modules/light_industry.cpp:354
+#: src/lincity/modules/light_industry.cpp:276
 msgid "Light"
 msgstr ""
 
-#: src/lincity/modules/university.cpp:69
+#: src/lincity/modules/university.cpp:61
 msgid "Tech Produced"
 msgstr "Technologie wynalezione"
 
-#: src/lincity/modules/tip.cpp:109
+#: src/lincity/modules/tip.cpp:100
 msgid "Landfill"
 msgstr "Wysypisko ??mieci"
 
-#: src/lincity/modules/tip.cpp:112
+#: src/lincity/modules/tip.cpp:103
 msgid "Last Month"
 msgstr "Ostatni miesi??c"
 
-#: src/lincity/modules/tip.cpp:113
+#: src/lincity/modules/tip.cpp:104
 msgid "Tons"
 msgstr "Ton"
 
-#: src/lincity/modules/tip.cpp:114
+#: src/lincity/modules/tip.cpp:105
 msgid "Percent"
 msgstr "Procent"
 
-#: src/lincity/modules/tip.cpp:117
+#: src/lincity/modules/tip.cpp:107
 #, c-format
 msgid "% Filled"
 msgstr "% Wype??nione"
 
-#: src/lincity/modules/commune.cpp:149
+#: src/lincity/modules/commune.cpp:175
 msgid "Activity"
 msgstr "Aktywno????"
 
-#: src/lincity/modules/school.cpp:51
+#: src/lincity/modules/school.cpp:45
 msgid "Lessons Learned"
 msgstr "Lekcji nauczonych"
 
-#: src/lincity/modules/firestation.cpp:119
+#: src/lincity/modules/firestation.cpp:108
 msgid "Fire Station"
 msgstr "Remiza stra??acka"
 
-#: src/lincity/modules/organic_farm.cpp:183
+#: src/lincity/modules/organic_farm.cpp:219
 msgid "Organic Farm"
 msgstr "Farma ekologiczna"
 
-#: src/lincity/modules/organic_farm.cpp:190
+#: src/lincity/modules/organic_farm.cpp:225
 msgid "NO "
 msgstr "NIE"
 
-#: src/lincity/modules/organic_farm.cpp:200
+#: src/lincity/modules/organic_farm.cpp:233
 msgid "Prod"
 msgstr "Prod"
 
-#: src/lincity/modules/organic_farm.cpp:238
+#: src/lincity/modules/organic_farm.cpp:239
 msgid "Debug info"
 msgstr ""
 
-#: src/lincity/modules/organic_farm.cpp:239
-msgid " max with power & water"
-msgstr ""
-
 #: src/lincity/modules/organic_farm.cpp:240
-msgid " number of tile with water"
+msgid "max with power&water"
 msgstr ""
 
 #: src/lincity/modules/organic_farm.cpp:241
-msgid " current production"
+msgid "N tiles with water"
 msgstr ""
 
-#: src/lincity/modules/solar_power.cpp:44
+#: src/lincity/modules/organic_farm.cpp:242
+#, fuzzy
+msgid "Current production"
+msgstr "Bie????ca moc"
+
+#: src/lincity/modules/solar_power.cpp:46
 msgid "Solar"
 msgstr "S??oneczny"
 
-#: src/lincity/modules/waterwell.cpp:44
-msgid "Water_well"
-msgstr ""
-
-#: src/lincity/modules/waterwell.cpp:51
-msgid "Drinkable"
-msgstr ""
-
 #: src/lincity-ng/Dialog.cpp:173
 msgid "Launchsite"
 msgstr "Strefa wystrza??u"
 
-#: src/lincity-ng/Dialog.cpp:341 src/lincity-ng/Dialog.cpp:342
+#: src/lincity-ng/Dialog.cpp:352 src/lincity-ng/Dialog.cpp:353
 msgid "----- IN TEST MODE -------"
 msgstr "----- W TRYBIE TESTOWYM -------"
 
-#: src/lincity-ng/Dialog.cpp:344
+#: src/lincity-ng/Dialog.cpp:355
 #, c-format
 msgid "Game statistics from LinCity-NG Version %s"
 msgstr "Statystyki LinCity-NG wersji %s"
 
-#: src/lincity-ng/Dialog.cpp:348
+#: src/lincity-ng/Dialog.cpp:359
 #, c-format
 msgid "Initial loaded scene - %s"
 msgstr "Wczytana pocz??tkowo scena - %s"
 
-#: src/lincity-ng/Dialog.cpp:353
+#: src/lincity-ng/Dialog.cpp:364
 #, c-format
 msgid "Economy is sustainable"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:357
+#: src/lincity-ng/Dialog.cpp:368
 #, c-format
 msgid "Population  %d  of which  %d  are not housed."
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:362
+#: src/lincity-ng/Dialog.cpp:373
 #, c-format
 msgid "Max population %d  Number evacuated %d Total births %d"
 msgstr "Maksymalna populacja %d Ilo???? ewakuowanych %d Suma narodzin %d"
 
-#: src/lincity-ng/Dialog.cpp:367
+#: src/lincity-ng/Dialog.cpp:378
 #, c-format
 msgid "Date %s %04d  Money %8d   Tech-level %5.1f (%5.1f)"
 msgstr "Data %s %04d  Pieni??dze %8d   Poziom tech. %5.1f (%5.1f)"
 
-#: src/lincity-ng/Dialog.cpp:374
+#: src/lincity-ng/Dialog.cpp:385
 #, c-format
 msgid ".Deaths by starvation %7d   History %8.3f"
 msgstr ".   Zgon??w z        g??odu %7d  Historia %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:379
+#: src/lincity-ng/Dialog.cpp:390
 #, c-format
 msgid "Deaths from pollution %7d   History %8.3f"
 msgstr "Zgon??w z zanieczyszczenia %7d  Historia %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:383
+#: src/lincity-ng/Dialog.cpp:394
 #, c-format
 msgid "Years of unemployment %7d   History %8.3f"
 msgstr ""
 
-#: src/lincity-ng/Dialog.cpp:387
+#: src/lincity-ng/Dialog.cpp:398
 #, c-format
 msgid "Rockets launched %2d  Successful launches %2d"
 msgstr "Rakiety wystrzelone %2d Udane wystrzelenia % 2d"
 
-#: src/lincity-ng/Dialog.cpp:397
+#: src/lincity-ng/Dialog.cpp:409
 #, c-format
 msgid ".   Residences %4d         Markets %4d            Farms %4d"
 msgstr ". Strefy mieszkalne %4d                 Sklepy %4d          Farmy %4d"
 
-#: src/lincity-ng/Dialog.cpp:418
+#: src/lincity-ng/Dialog.cpp:420
 #, c-format
 msgid ".    Monuments %4d         Schools %4d     Universities %4d"
 msgstr ".           Pomniki %4d                 Szko??y %4d   Uniwersytety %4d"
 
-#: src/lincity-ng/Dialog.cpp:423
+#: src/lincity-ng/Dialog.cpp:425
 #, c-format
 msgid ".Fire stations %4d           Parks %4d    Sports fields %4d"
-msgstr ""
-". Remizy stra??ackie %4d              Parki %4d     O??rodki sport. %4d"
+msgstr ". Remizy stra??ackie %4d              Parki %4d     O??rodki sport. %4d"
 
-#: src/lincity-ng/Dialog.cpp:449
+#: src/lincity-ng/Dialog.cpp:430
 #, c-format
 msgid "Health centres %4d            Tips %4d         Shanties %4d"
 msgstr "           Szpitale %4d  Wysypiska ??mieci  %4d             Slumsy %4d"
 
-#: src/lincity-ng/Dialog.cpp:433
+#: src/lincity-ng/Dialog.cpp:438
 #, c-format
 msgid ".    Windmills %4d     Coal powers %4d     Solar powers %4d"
-msgstr ""
-".          Wiatraki %4d    Elektr. w??glowe %4d  Elektr. s??oneczne %4d"
+msgstr ".          Wiatraki %4d    Elektr. w??glowe %4d  Elektr. s??oneczne %4d"
 
-#: src/lincity-ng/Dialog.cpp:439
+#: src/lincity-ng/Dialog.cpp:444
 #, c-format
 msgid ".  Substations %4d     Power lines %4d            Ports %4d"
 msgstr ". Podstacji elektr. %4d      Linie elektr. %4d              Porty %4d"
 
-#: src/lincity-ng/Dialog.cpp:408
+#: src/lincity-ng/Dialog.cpp:449
 #, c-format
 msgid ".       Tracks %4d           Roads %4d             Rail %4d"
 msgstr ".             Drogi %4d                    Ulice %4d    Tory Kol. %4d"
 
-#: src/lincity-ng/Dialog.cpp:413
+#: src/lincity-ng/Dialog.cpp:457
 #, c-format
 msgid ".    Potteries %4d     Blacksmiths %4d            Mills %4d"
 msgstr ".        Garncarnie %4d                  Ku??nie %4d       Fabryki %4d"
 
-#: src/lincity-ng/Dialog.cpp:444
+#: src/lincity-ng/Dialog.cpp:462
 #, c-format
 msgid ".   Light inds %4d      Heavy inds %4d        Recyclers %4d"
-msgstr ""
-".      Lekki przem. %4d      Ci??zki przem. %4d   Zak??. Recyklingu %4d"
+msgstr ".      Lekki przem. %4d      Ci??zki przem. %4d   Zak??. Recyklingu %4d"
 
-#: src/lincity-ng/Dialog.cpp:428
+#: src/lincity-ng/Dialog.cpp:467
 #, c-format
 msgid ".   Coal mines %4d       Ore mines %4d         Communes %4d"
 msgstr ".    Kopalnie w??gla %4d      Kopalnie rudy %4d            Retorty %4d"
 
-#: src/lincity-ng/ScreenInterface.cpp:258
+#: src/lincity-ng/ScreenInterface.cpp:264
 msgid "MM"
 msgstr ""
 
-#: src/lincity-ng/GameView.cpp:1520 src/lincity-ng/GameView.cpp:1551
-#: src/lincity-ng/ScreenInterface.cpp:269
+#: src/lincity-ng/ScreenInterface.cpp:275 src/lincity-ng/GameView.cpp:1609
+#: src/lincity-ng/GameView.cpp:1640
 msgid "$"
 msgstr "PLN"
 
-#: src/lincity-ng/GameView.cpp:236
+#: src/lincity-ng/GameView.cpp:237
 msgid "Minimap: outline map"
 msgstr "Minimapa: mapa konturowa"
 
-#: src/lincity-ng/GameView.cpp:239
+#: src/lincity-ng/GameView.cpp:240
 msgid "Minimap: unemployment"
 msgstr "Minimapa: bezrobocie"
 
-#: src/lincity-ng/GameView.cpp:242
+#: src/lincity-ng/GameView.cpp:243
 msgid "Minimap: pollution"
 msgstr "Minimapa: zanieczyszczenie"
 
-#: src/lincity-ng/GameView.cpp:245
+#: src/lincity-ng/GameView.cpp:246
 msgid "Minimap: nourishments"
 msgstr "Minimapa: zaopatrzenie w ??ywno????"
 
-#: src/lincity-ng/GameView.cpp:248
+#: src/lincity-ng/GameView.cpp:249
 msgid "Minimap: power supply"
 msgstr "Minimapa: zaopatrzenie w energi??"
 
-#: src/lincity-ng/GameView.cpp:251
+#: src/lincity-ng/GameView.cpp:252
 msgid "Minimap: firedepartment cover"
 msgstr "Minimapa: zasi??g remiz stra??ackich"
 
-#: src/lincity-ng/GameView.cpp:254
+#: src/lincity-ng/GameView.cpp:255
 msgid "Minimap: sport cover"
 msgstr "Minimapa: zasi??g obiekt??w sportowych"
 
-#: src/lincity-ng/GameView.cpp:257
+#: src/lincity-ng/GameView.cpp:258
 msgid "Minimap: medical care"
 msgstr "Minimapa: opieka zdrowotna"
 
-#: src/lincity-ng/GameView.cpp:260
+#: src/lincity-ng/GameView.cpp:261
 msgid "Minimap: coal depots"
 msgstr "Minimapa: z??o??a w??gla"
 
-#: src/lincity-ng/GameView.cpp:263
+#: src/lincity-ng/GameView.cpp:264
 msgid "Minimap: traffic density"
 msgstr "Minimapa: nat????enie ruchu"
 
-#: src/lincity-ng/GameView.cpp:1515
+#: src/lincity-ng/GameView.cpp:1604
 msgid "Estimated Bulldoze Cost: "
 msgstr "Szacowany kosze wyburzenia:"
 
-#: src/lincity-ng/GameView.cpp:1517
+#: src/lincity-ng/GameView.cpp:1606
 msgid "Bulldoze Cost: "
 msgstr "Koszt wyburzenia:"
 
-#: src/lincity-ng/GameView.cpp:1522
+#: src/lincity-ng/GameView.cpp:1611
 msgid "n/a"
 msgstr "n/d"
 
-#: src/lincity-ng/GameView.cpp:1540
+#: src/lincity-ng/GameView.cpp:1629
 msgid "Query Tool: Show information about selected building."
 msgstr "Tryb Szczeg??????w: Pokazuje informacje o wybranej budowli"
 
-#: src/lincity-ng/GameView.cpp:1544
+#: src/lincity-ng/GameView.cpp:1633
 msgid "Bulldozer: remove building -price varies-"
 msgstr "Buldo??er"
 
-#: src/lincity-ng/GameView.cpp:1551
+#: src/lincity-ng/GameView.cpp:1640
 msgid ": Cost to build "
 msgstr ": Koszt budowy"
 
-#: src/lincity-ng/GameView.cpp:1552
+#: src/lincity-ng/GameView.cpp:1641
 msgid ", to bulldoze "
 msgstr ", do wyburzenia "
 
-#: src/lincity-ng/GameView.cpp:1552 src/lincity-ng/GameView.cpp:1555
+#: src/lincity-ng/GameView.cpp:1641 src/lincity-ng/GameView.cpp:1644
 msgid "$."
 msgstr "PLN."
 
-#: src/lincity-ng/GameView.cpp:1554
+#: src/lincity-ng/GameView.cpp:1643
 msgid " To build "
 msgstr " Do wybudowania "
 
-#: src/lincity-ng/GameView.cpp:1554
+#: src/lincity-ng/GameView.cpp:1643
 msgid " of them "
 msgstr " z "
 
-#: src/lincity-ng/GameView.cpp:1555
+#: src/lincity-ng/GameView.cpp:1644
 msgid "will cost about "
 msgstr "b??dzie kosztowa?? oko??o "
 
-#: src/lincity-ng/MainMenu.cpp:175
+#: src/lincity-ng/MainMenu.cpp:199
 msgid "empty"
 msgstr "pusty"
 
-#: src/lincity-ng/MpsInterface.cpp:224
+#: src/lincity-ng/MpsInterface.cpp:227
 msgid "build something here"
 msgstr "wybuduj co?? tutaj"
 
-#: src/lincity-ng/MpsInterface.cpp:226
+#: src/lincity-ng/MpsInterface.cpp:229
 msgid "no further information available"
 msgstr "brak dalszych informacji"
 
-#: src/lincity-ng/MpsInterface.cpp:378
+#: src/lincity-ng/MpsInterface.cpp:381
 msgid "Coverage"
 msgstr "Relacja"
 
-#: src/lincity-ng/MpsInterface.cpp:383
+#: src/lincity-ng/MpsInterface.cpp:386
 msgid "Health"
 msgstr "Zdrowie"
 
-#: src/lincity-ng/MpsInterface.cpp:391
+#: src/lincity-ng/MpsInterface.cpp:394
 msgid "clear"
 msgstr "przejrzy??cie"
 
-#: src/lincity-ng/MpsInterface.cpp:395
+#: src/lincity-ng/MpsInterface.cpp:398
 msgid "fair"
 msgstr "umiarkowanie"
 
-#: src/lincity-ng/MpsInterface.cpp:397
+#: src/lincity-ng/MpsInterface.cpp:400
 msgid "smelly"
 msgstr ""
 
-#: src/lincity-ng/MpsInterface.cpp:399
+#: src/lincity-ng/MpsInterface.cpp:402
 msgid "smokey"
 msgstr ""
 
-#: src/lincity-ng/MpsInterface.cpp:401
+#: src/lincity-ng/MpsInterface.cpp:404
 msgid "smoggy"
 msgstr "mgli??cie"
 
-#: src/lincity-ng/MpsInterface.cpp:403
+#: src/lincity-ng/MpsInterface.cpp:406
 msgid "bad"
 msgstr "??le"
 
-#: src/lincity-ng/MpsInterface.cpp:405
+#: src/lincity-ng/MpsInterface.cpp:408
 msgid "very bad"
 msgstr "bardzo ??le"
 
-#: src/lincity-ng/MpsInterface.cpp:407
+#: src/lincity-ng/MpsInterface.cpp:410
 msgid "death!"
 msgstr "zgon!"
 
-#: src/lincity-ng/MpsInterface.cpp:412
+#: src/lincity-ng/MpsInterface.cpp:415
 msgid "Bulldoze Cost"
 msgstr "Koszt wyburzenia"
 
-#: src/lincity-ng/MpsInterface.cpp:418
+#: src/lincity-ng/MpsInterface.cpp:421
 msgid "N/A"
 msgstr "N/D"
 
-#: src/lincity-ng/MpsInterface.cpp:436
+#: src/lincity-ng/MpsInterface.cpp:439
 msgid "Tax Income"
 msgstr "Podatek dochodowy"
 
-#: src/lincity-ng/MpsInterface.cpp:440
+#: src/lincity-ng/MpsInterface.cpp:443
 msgid "Income"
 msgstr "Przych??d"
 
-#: src/lincity-ng/MpsInterface.cpp:452
+#: src/lincity-ng/MpsInterface.cpp:455
 msgid "Export"
 msgstr "Export"
 
-#: src/lincity-ng/MpsInterface.cpp:456
+#: src/lincity-ng/MpsInterface.cpp:459
 msgid "Expenses"
 msgstr "Wydatki"
 
-#: src/lincity-ng/MpsInterface.cpp:460
+#: src/lincity-ng/MpsInterface.cpp:463
 msgid "Unemp."
 msgstr "Bezrobocie"
 
-#: src/lincity-ng/MpsInterface.cpp:464
+#: src/lincity-ng/MpsInterface.cpp:467
 msgid "Transport"
 msgstr "Transport"
 
-#: src/lincity-ng/MpsInterface.cpp:468
+#: src/lincity-ng/MpsInterface.cpp:471
 msgid "Imports"
 msgstr "Import"
 
-#: src/lincity-ng/MpsInterface.cpp:472
+#: src/lincity-ng/MpsInterface.cpp:475
 msgid "Others"
 msgstr "Inne"
 
-#: src/lincity-ng/MpsInterface.cpp:477
+#: src/lincity-ng/MpsInterface.cpp:480
 msgid "Net"
 msgstr ""
 
-#: src/lincity-ng/MpsInterface.cpp:489
+#: src/lincity-ng/MpsInterface.cpp:492
 msgid "Other Costs"
 msgstr "Inne koszty"
 
-#: src/lincity-ng/MpsInterface.cpp:494
+#: src/lincity-ng/MpsInterface.cpp:497
 msgid "For year"
 msgstr "Przez rok"
 
-#: src/lincity-ng/MpsInterface.cpp:498
+#: src/lincity-ng/MpsInterface.cpp:501
 msgid "Interest"
 msgstr "Oprocentowanie"
 
-#: src/lincity-ng/MpsInterface.cpp:500
+#: src/lincity-ng/MpsInterface.cpp:503
 msgid "Schools"
 msgstr "Szko??y"
 
-#: src/lincity-ng/MpsInterface.cpp:502
+#: src/lincity-ng/MpsInterface.cpp:505
 msgid "Univers."
 msgstr "Uniwersytety"
 
-#: src/lincity-ng/MpsInterface.cpp:504
+#: src/lincity-ng/MpsInterface.cpp:507
 msgid "Deaths"
 msgstr "Zgony"
 
-#: src/lincity-ng/MpsInterface.cpp:508
+#: src/lincity-ng/MpsInterface.cpp:511
 msgid "Hospital"
 msgstr "Szpital"
 
-#: src/lincity-ng/MpsInterface.cpp:510
+#: src/lincity-ng/MpsInterface.cpp:513
 msgid "Rockets"
 msgstr "Rakiety"
 
-#: src/lincity-ng/MpsInterface.cpp:512
+#: src/lincity-ng/MpsInterface.cpp:515
 msgid "Fire Stn"
 msgstr "Remizy stra??ackie"
 
-#: src/lincity-ng/MpsInterface.cpp:530
+#: src/lincity-ng/MpsInterface.cpp:533
 msgid "Population"
 msgstr "Populacja"
 
-#: src/lincity-ng/MpsInterface.cpp:533
+#: src/lincity-ng/MpsInterface.cpp:536
 msgid "Housed"
 msgstr "Zamieszka??ych"
 
-#: src/lincity-ng/MpsInterface.cpp:534
+#: src/lincity-ng/MpsInterface.cpp:537
 msgid "Homeless"
 msgstr "Bezdomnych"
 
-#: src/lincity-ng/MpsInterface.cpp:535
+#: src/lincity-ng/MpsInterface.cpp:538
 msgid "Shanties"
 msgstr "Slumsy"
 
-#: src/lincity-ng/MpsInterface.cpp:536
+#: src/lincity-ng/MpsInterface.cpp:539
 msgid "Unn Dths"
 msgstr ""
 
-#: src/lincity-ng/MpsInterface.cpp:537
+#: src/lincity-ng/MpsInterface.cpp:540
 msgid "Unemployment"
 msgstr "Bezrobotnych"
 
-#: src/lincity-ng/MpsInterface.cpp:538
+#: src/lincity-ng/MpsInterface.cpp:541
 msgid "Claims"
 msgstr "Roszczenia"
 
-#: src/lincity-ng/MpsInterface.cpp:539 src/lincity-ng/MpsInterface.cpp:544
+#: src/lincity-ng/MpsInterface.cpp:542 src/lincity-ng/MpsInterface.cpp:547
 msgid "Rate"
 msgstr "Ocena"
 
-#: src/lincity-ng/MpsInterface.cpp:541
+#: src/lincity-ng/MpsInterface.cpp:544
 msgid "Starvation"
 msgstr "G????d"
 
-#: src/lincity-ng/MpsInterface.cpp:542
+#: src/lincity-ng/MpsInterface.cpp:545
 msgid "Cases"
 msgstr "Przypadki"
 
-#: src/lincity-ng/ButtonPanel.cpp:198
+#: src/lincity-ng/ButtonPanel.cpp:200
 msgid "Query Tool"
 msgstr "Tryb Szczeg??????w"
 
-#: src/lincity-ng/ButtonPanel.cpp:199
+#: src/lincity-ng/ButtonPanel.cpp:201
 msgid "Bulldozer"
 msgstr "Buldo??er"
 
-#: src/lincity-ng/ButtonPanel.cpp:201
+#: src/lincity-ng/ButtonPanel.cpp:203
 msgid "Residential: 50 denizens, low birthrate, high deathrate"
 msgstr ""
 
-#: src/lincity-ng/ButtonPanel.cpp:202
+#: src/lincity-ng/ButtonPanel.cpp:204
 msgid "Residential: 100 denizens, high birthrate, low deathrate"
 msgstr ""
 
-#: src/lincity-ng/ButtonPanel.cpp:203
+#: src/lincity-ng/ButtonPanel.cpp:205
 msgid "Residential: 200 denizens, high birthrate, high deathrate"
 msgstr ""
 
-#: src/lincity-ng/ButtonPanel.cpp:204
+#: src/lincity-ng/ButtonPanel.cpp:206
 msgid "Residential: 100 denizens, low birthrate, high deathrate"
 msgstr ""
 
-#: src/lincity-ng/ButtonPanel.cpp:205
+#: src/lincity-ng/ButtonPanel.cpp:207
 msgid "Residential: 200 denizens, high birthrate, low deathrate"
 msgstr ""
 
-#: src/lincity-ng/ButtonPanel.cpp:206
+#: src/lincity-ng/ButtonPanel.cpp:208
 msgid "Residential: 400 denizens, high birthrate, high deathrate"
 msgstr ""
 
-#: src/lincity-ng/ButtonPanel.cpp:215
+#: src/lincity-ng/ButtonPanel.cpp:217
 msgid " [Click right for help.]"
 msgstr " [Kliknij prawym aby uzyska?? pomoc.]"
 
-#: src/lincity-ng/ButtonPanel.cpp:243 src/lincity-ng/ButtonPanel.cpp:277
+#: src/lincity-ng/ButtonPanel.cpp:245 src/lincity-ng/ButtonPanel.cpp:288
 #, c-format
 msgid "%s (Techlevel %.1f required.)"
 msgstr "%s (Wymagany poziom technologi: %.1f)"
 
-#: src/lincity-ng/ButtonPanel.cpp:252
+#: src/lincity-ng/ButtonPanel.cpp:254
 #, c-format
 msgid "%s is disabled (loaded old game)."
 msgstr ""
 
-#: src/lincity-ng/EconomyGraph.cpp:121
+#: src/lincity-ng/EconomyGraph.cpp:124
 msgid "Mining"
 msgstr "Wydobycie"
 
-#: src/lincity-ng/EconomyGraph.cpp:123
+#: src/lincity-ng/EconomyGraph.cpp:126
 msgid "Trade"
 msgstr "Handel"
 
-#: src/lincity-ng/EconomyGraph.cpp:125
+#: src/lincity-ng/EconomyGraph.cpp:128
 msgid "Money"
 msgstr "Zarobki"
 
-#: src/lincity-ng/EconomyGraph.cpp:127
+#: src/lincity-ng/EconomyGraph.cpp:130
 msgid "Popul."
 msgstr "Populacja"
 
-#: src/lincity-ng/EconomyGraph.cpp:129
+#: src/lincity-ng/EconomyGraph.cpp:132
 msgid "Techn."
 msgstr "Tech."
 
-#: src/lincity-ng/EconomyGraph.cpp:134
+#: src/lincity-ng/EconomyGraph.cpp:137
 msgid "Economy Overview:"
 msgstr "Przegl??d ekonomii:"
 
-#: src/lincity-ng/EconomyGraph.cpp:137
+#: src/lincity-ng/EconomyGraph.cpp:140
 msgid "Sustainability:"
 msgstr ""
 
-#: src/lincity-ng/EconomyGraph.cpp:140
+#: src/lincity-ng/EconomyGraph.cpp:143
 msgid "Frames per Second:"
 msgstr "Liczba klatek na sekund??:"
 
-#: src/lincity-ng/EconomyGraph.cpp:216
+#: src/lincity-ng/EconomyGraph.cpp:219
 msgid "You lose."
 msgstr "Przegra??e??."

Modified: trunk/data/locale/pt_BR.po
===================================================================
--- trunk/data/locale/pt_BR.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/pt_BR.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -7,8 +7,8 @@
 msgid ""
 msgstr ""
 "Project-Id-Version: lincity-ng 1.1.0rc2\n"
-"Report-Msgid-Bugs-To: Nilo Menezes <nilo.menezes at gmail.com>\n"
-"POT-Creation-Date: 2007-08-10 22:07+0200\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2007-12-04 00:29+0100\n"
 "PO-Revision-Date: 2007-01-29 14:56-0300\n"
 "Last-Translator: Nilo Menezes <nilo.menezes at gmail.com>\n"
 "Language-Team: Portuguese/Brazil <gnome-l10n-br at listas.cipsga.org.br>\n"
@@ -18,30 +18,7 @@
 "X-Poedit-Language: Portuguese\n"
 "X-Poedit-Country: BRAZIL\n"
 
-#: src/lincity/fileutil.cpp:292 src/lincity/fileutil.cpp:341
-msgid "Error. Can't find LINCITY_HOME"
-msgstr "Erro. LINCITY_HOME n??o encontrado"
-
-#: src/lincity/fileutil.cpp:561
-msgid "Error verifying package. Can't find colour.pal."
-msgstr "Erro verificando o pacote. N??o encontro a paleta de cores."
-
-#: src/lincity/fileutil.cpp:580 src/lincity/fileutil.cpp:589
-#, c-format
-msgid "Couldn't create the save directory '%s'\n"
-msgstr "N??o pude criar a pasta '%s'\n"
-
-#: src/lincity/fileutil.cpp:635
-#, c-format
-msgid "Out of memory: malloc failure\n"
-msgstr "Sem mem??ria. malloc falhou\n"
-
-#: src/lincity/power.cpp:97
-msgid "You have too many power grids. Join some of them"
-msgstr ""
-"Voc?? possui muitas malhas de transmiss??o de energia. Junte algumas delas"
-
-#: src/lincity/engine.cpp:198
+#: src/lincity/engine.cpp:120
 msgid ""
 "ERROR: group does not exist. This should not happen! Please consider filling "
 "a bug report to lincity-ng team, with the saved game and what you did :-) "
@@ -50,1267 +27,1298 @@
 "preencher um reporte de bug para o time do lincity-ng, com o arquivo do jogo "
 "salvo e uma descri????o do que voc?? fez :-)"
 
-#: src/lincity/engine.cpp:226
+#: src/lincity/engine.cpp:152
 msgid "Port must be connected to river all along right side."
 msgstr "Porto deve estar conectado ao rio pelo lado direito."
 
-#: src/lincity/engine.cpp:236 src/lincity/engine.cpp:246
+#: src/lincity/engine.cpp:161 src/lincity/engine.cpp:170
 msgid "Too many substations + windmills. You cannot build one more"
 msgstr ""
 "Muitas esta????es e moinhos de vento. Voc?? n??o pode construir mais um(a)."
 
-#: src/lincity/engine.cpp:280
+#: src/lincity/engine.cpp:200
 msgid "Too many markets. You cannot build one more"
 msgstr "Muitos mercados. Voc?? n??o pode construir mais um."
 
-#: src/lincity/engine.cpp:305
+#: src/lincity/engine.cpp:223
 #, fuzzy
 msgid "You can't build a tip here: this area was once a landfill"
 msgstr "Este lugar foi antes um aterro"
 
-#: src/lincity/engine.cpp:330
+#: src/lincity/engine.cpp:248
 #, fuzzy
 msgid "You can't build a mine here: This area was once a landfill"
 msgstr "Este lugar foi antes um aterro"
 
-#: src/lincity/engine.cpp:335
+#: src/lincity/engine.cpp:252
 #, fuzzy
 msgid "You can't build a mine here: there is no ore left at this site"
 msgstr "N??o existe mais min??rio neste terreno"
 
-#: src/lincity/engine.cpp:259
+#: src/lincity/engine.cpp:264
 msgid "You can't build a water well here: it is all desert."
 msgstr ""
 
-#: src/lincity/engine.cpp:269
+#: src/lincity/engine.cpp:274
 msgid "You can't build a park here: it is a desert, parks need water"
 msgstr ""
 
-#: src/lincity/engine.cpp:609
+#: src/lincity/engine.cpp:485
 msgid "It's at a power line."
 msgstr "Isto ?? uma linha de transmiss??o de energia."
 
-#: src/lincity/engine.cpp:611
+#: src/lincity/engine.cpp:487
 msgid "It's at a solar power station."
 msgstr "Esta ?? uma usina de energia solar."
 
-#: src/lincity/engine.cpp:613
+#: src/lincity/engine.cpp:489
 msgid "It's at a substation."
 msgstr "Isto ?? uma sub-esta????o."
 
-#: src/lincity/engine.cpp:615
+#: src/lincity/engine.cpp:491
 msgid "It's at a residential area."
 msgstr "Isto ?? uma ??rea residencial."
 
-#: src/lincity/engine.cpp:617
+#: src/lincity/engine.cpp:493
 msgid "It's at a farm."
 msgstr "Isto ?? uma fazenda."
 
-#: src/lincity/engine.cpp:619
+#: src/lincity/engine.cpp:495
 msgid "It's at a market."
 msgstr "Isto ?? um mercado."
 
-#: src/lincity/engine.cpp:621
+#: src/lincity/engine.cpp:497
 msgid "It's at a track."
 msgstr "Isto ?? uma pista."
 
-#: src/lincity/engine.cpp:623
+#: src/lincity/engine.cpp:499
 msgid "It's at a coal mine."
 msgstr "Isto ?? uma mina de carv??o."
 
-#: src/lincity/engine.cpp:625
+#: src/lincity/engine.cpp:501
 msgid "It's at a railway."
 msgstr "Isto ?? uma via f??rrea."
 
-#: src/lincity/engine.cpp:627
+#: src/lincity/engine.cpp:503
 msgid "It's at a coal power station."
 msgstr "Isto ?? uma usina de for??a a carv??o."
 
-#: src/lincity/engine.cpp:629
+#: src/lincity/engine.cpp:505
 msgid "It's at a road."
 msgstr "Isto ?? uma estrada."
 
-#: src/lincity/engine.cpp:631
+#: src/lincity/engine.cpp:507
 msgid "It's at light industry."
 msgstr "Isto ?? uma ind??stria leve."
 
-#: src/lincity/engine.cpp:633
+#: src/lincity/engine.cpp:509
 msgid "It's at a university."
 msgstr "Isto ?? uma universidade."
 
-#: src/lincity/engine.cpp:635
+#: src/lincity/engine.cpp:511
 msgid "It's at a commune."
 msgstr "Isto ?? uma comuna."
 
-#: src/lincity/engine.cpp:637
+#: src/lincity/engine.cpp:513
 msgid "It's at a tip."
 msgstr "Isto ?? um aterro."
 
-#: src/lincity/engine.cpp:639
+#: src/lincity/engine.cpp:515
 msgid "It's at a port."
 msgstr "Isto ?? um porto."
 
-#: src/lincity/engine.cpp:641
+#: src/lincity/engine.cpp:517
 msgid "It's at a steel works."
 msgstr "Isto ?? uma oficina de a??o."
 
-#: src/lincity/engine.cpp:643
+#: src/lincity/engine.cpp:519
 msgid "It's at a recycle centre."
 msgstr "Isto ?? um centro de reciclagem."
 
-#: src/lincity/engine.cpp:645
+#: src/lincity/engine.cpp:521
 msgid "It's at a health centre."
 msgstr "Isto ?? um centro de sa??de."
 
-#: src/lincity/engine.cpp:647
+#: src/lincity/engine.cpp:523
 msgid "It's at a rocket site."
 msgstr "Isto ?? uma ??rea de lan??amento de foguetes."
 
-#: src/lincity/engine.cpp:649
+#: src/lincity/engine.cpp:525
 msgid "It's at a windmill."
 msgstr "Isto ?? um moinho de vento."
 
-#: src/lincity/engine.cpp:651
+#: src/lincity/engine.cpp:527
 msgid "It's at a school."
 msgstr "Isto ?? uma escola."
 
-#: src/lincity/engine.cpp:653
+#: src/lincity/engine.cpp:529
 msgid "It's at a blacksmith."
 msgstr "Isto ?? um ferreiro."
 
-#: src/lincity/engine.cpp:655
+#: src/lincity/engine.cpp:531
 msgid "It's at a mill."
 msgstr "Isto ?? um moinho."
 
-#: src/lincity/engine.cpp:657
+#: src/lincity/engine.cpp:533
 msgid "It's at a pottery."
 msgstr "Isto ?? uma olaria."
 
-#: src/lincity/engine.cpp:659
+#: src/lincity/engine.cpp:535
 msgid "It's at a fire station!!!."
 msgstr "Isto ?? um corpo de bombeiros!!!"
 
-#: src/lincity/engine.cpp:661
+#: src/lincity/engine.cpp:537
 msgid "It's at a sports field!!!."
 msgstr "Isto ?? uma quadra de esportes!!!"
 
-#: src/lincity/engine.cpp:663
+#: src/lincity/engine.cpp:539
 msgid "It's at a shanty town."
 msgstr "Isto ?? uma favela."
 
-#: src/lincity/engine.cpp:665
+#: src/lincity/engine.cpp:541
 msgid "UNKNOWN!"
 msgstr "DESCONHECIDO!"
 
-#: src/lincity/lintypes.cpp:22
+#: src/lincity/lintypes.cpp:20
 msgid "Empty"
 msgstr "Vazio"
 
-#: src/lincity/lintypes.cpp:34
+#: src/lincity/lintypes.cpp:32
 msgid "Power line"
 msgstr "Linha de transmiss??o de energia"
 
-#: src/lincity/lintypes.cpp:46
+#: src/lincity/lintypes.cpp:43
 msgid "Solar PS"
 msgstr "EE Solar"
 
-#: src/lincity/lintypes.cpp:58 src/lincity/modules/substation.cpp:96
+#: src/lincity/lintypes.cpp:54 src/lincity/modules/substation.cpp:93
 msgid "Substation"
 msgstr "Sub-esta????o"
 
-#: src/lincity/lintypes.cpp:70
+#: src/lincity/lintypes.cpp:65
 msgid "Residential LL"
 msgstr "Residencial LL"
 
-#: src/lincity/lintypes.cpp:82
+#: src/lincity/lintypes.cpp:76
 msgid "Farm"
 msgstr "Fazenda"
 
-#: src/lincity/lintypes.cpp:94 src/lincity/modules/market.cpp:1152
-#: src/lincity-ng/Dialog.cpp:506
+#: src/lincity/lintypes.cpp:87 src/lincity/modules/market.cpp:979
+#: src/lincity-ng/Dialog.cpp:507
 msgid "Market"
 msgstr "Mercado"
 
-#: src/lincity/lintypes.cpp:106 src/lincity/modules/track.cpp:38
+#: src/lincity/lintypes.cpp:98 src/lincity/modules/track.cpp:34
 msgid "Track"
 msgstr "Pista"
 
-#: src/lincity/lintypes.cpp:118
+#: src/lincity/lintypes.cpp:109
 msgid "Coalmine"
 msgstr "Mina de carv??o"
 
-#: src/lincity/lintypes.cpp:130
+#: src/lincity/lintypes.cpp:120
 msgid "Railway"
 msgstr "Via F??rrea"
 
-#: src/lincity/lintypes.cpp:142
+#: src/lincity/lintypes.cpp:131
 msgid "Coal PS"
 msgstr "EE a Carv??o"
 
-#: src/lincity/lintypes.cpp:154 src/lincity/modules/road.cpp:47
+#: src/lincity/lintypes.cpp:142 src/lincity/modules/road.cpp:43
 msgid "Road"
 msgstr "Estrada"
 
-#: src/lincity/lintypes.cpp:166
+#: src/lincity/lintypes.cpp:153
 msgid "Lt. Industry"
 msgstr "Ind??stria leve"
 
-#: src/lincity/lintypes.cpp:178 src/lincity/modules/university.cpp:67
+#: src/lincity/lintypes.cpp:164 src/lincity/modules/university.cpp:59
 msgid "University"
 msgstr "Universidade"
 
-#: src/lincity/lintypes.cpp:190 src/lincity/modules/commune.cpp:146
+#: src/lincity/lintypes.cpp:175 src/lincity/modules/commune.cpp:172
 msgid "Commune"
 msgstr "Comuna"
 
-#: src/lincity/lintypes.cpp:202
+#: src/lincity/lintypes.cpp:186
 msgid "Ore mine"
 msgstr "Mina de min??rio"
 
-#: src/lincity/lintypes.cpp:214
+#: src/lincity/lintypes.cpp:197
 msgid "Rubbish tip"
 msgstr "Aterro"
 
-#: src/lincity/lintypes.cpp:226 src/lincity/modules/port.cpp:340
-#: src/lincity-ng/Dialog.cpp:560
+#: src/lincity/lintypes.cpp:208 src/lincity/modules/port.cpp:281
+#: src/lincity-ng/Dialog.cpp:561
 msgid "Port"
 msgstr "Porto"
 
-#: src/lincity/lintypes.cpp:238
+#: src/lincity/lintypes.cpp:219
 msgid "Hv. Industry"
 msgstr "Ind??stria pesada"
 
-#: src/lincity/lintypes.cpp:250
+#: src/lincity/lintypes.cpp:230
 msgid "Park"
 msgstr "Parque"
 
-#: src/lincity/lintypes.cpp:262 src/lincity-ng/MpsInterface.cpp:516
+#: src/lincity/lintypes.cpp:241 src/lincity-ng/MpsInterface.cpp:519
 msgid "Recycle"
 msgstr "Reciclagem"
 
-#: src/lincity/lintypes.cpp:274 src/lincity/modules/water.cpp:19
+#: src/lincity/lintypes.cpp:252 src/lincity/modules/water.cpp:17
+#: src/lincity/modules/residence.cpp:264
 msgid "Water"
 msgstr "??gua"
 
-#: src/lincity/lintypes.cpp:286
+#: src/lincity/lintypes.cpp:263
 msgid "Health centre"
 msgstr "Centro de sa??de"
 
-#: src/lincity/lintypes.cpp:298
+#: src/lincity/lintypes.cpp:274
 msgid "Rocket pad"
 msgstr "??rea de lan??amento"
 
-#: src/lincity/lintypes.cpp:310 src/lincity/modules/windmill.cpp:78
-#: src/lincity-ng/MpsInterface.cpp:506
+#: src/lincity/lintypes.cpp:285 src/lincity/modules/windmill.cpp:75
+#: src/lincity-ng/MpsInterface.cpp:509
 msgid "Windmill"
 msgstr "Moinho de vento"
 
-#: src/lincity/lintypes.cpp:322 src/lincity/modules/monument.cpp:57
+#: src/lincity/lintypes.cpp:296 src/lincity/modules/monument.cpp:51
 msgid "Monument"
 msgstr "Monumento"
 
-#: src/lincity/lintypes.cpp:334 src/lincity/modules/school.cpp:49
+#: src/lincity/lintypes.cpp:307 src/lincity/modules/school.cpp:43
 msgid "School"
 msgstr "Escola"
 
-#: src/lincity/lintypes.cpp:346 src/lincity/modules/blacksmith.cpp:100
+#: src/lincity/lintypes.cpp:318 src/lincity/modules/blacksmith.cpp:90
 msgid "Blacksmith"
 msgstr "Ferreiro"
 
-#: src/lincity/lintypes.cpp:358
+#: src/lincity/lintypes.cpp:329
 msgid "Mill"
 msgstr "Moinho"
 
-#: src/lincity/lintypes.cpp:370 src/lincity/modules/pottery.cpp:119
+#: src/lincity/lintypes.cpp:340 src/lincity/modules/pottery.cpp:104
 msgid "Pottery"
 msgstr "Cer??mica"
 
-#: src/lincity/lintypes.cpp:382
+#: src/lincity/lintypes.cpp:351
 msgid "Fire sta'n"
 msgstr "Bombeiro"
 
-#: src/lincity/lintypes.cpp:394 src/lincity/modules/cricket.cpp:99
+#: src/lincity/lintypes.cpp:362 src/lincity/modules/cricket.cpp:91
 msgid "Sports field"
 msgstr "Quadra de esportes"
 
-#: src/lincity/lintypes.cpp:407
+#: src/lincity/lintypes.cpp:374
 msgid "Burnt"
 msgstr "Escombros"
 
-#: src/lincity/lintypes.cpp:420
+#: src/lincity/lintypes.cpp:386
 msgid "Shanty town"
 msgstr "Favela"
 
-#: src/lincity/lintypes.cpp:433 src/lincity/modules/residence.cpp:292
-#: src/lincity-ng/MpsInterface.cpp:380 src/lincity-ng/EconomyGraph.cpp:133
+#: src/lincity/lintypes.cpp:398 src/lincity/modules/residence.cpp:283
+#: src/lincity-ng/MpsInterface.cpp:383 src/lincity-ng/EconomyGraph.cpp:134
 msgid "Fire"
 msgstr "Fogo"
 
-#: src/lincity/lintypes.cpp:446
+#: src/lincity/lintypes.cpp:410
 msgid "Used"
 msgstr "Usado"
 
-#: src/lincity/lintypes.cpp:458
+#: src/lincity/lintypes.cpp:421
 msgid "Residential ML"
 msgstr "Residencial ML"
 
-#: src/lincity/lintypes.cpp:470
+#: src/lincity/lintypes.cpp:432
 msgid "Residential HL"
 msgstr "Residencial HL"
 
-#: src/lincity/lintypes.cpp:482
+#: src/lincity/lintypes.cpp:443
 msgid "Residential LH"
 msgstr "Residencial LH"
 
-#: src/lincity/lintypes.cpp:494
+#: src/lincity/lintypes.cpp:454
 msgid "Residential MH"
 msgstr "Residencial MH"
 
-#: src/lincity/lintypes.cpp:506
+#: src/lincity/lintypes.cpp:465
 msgid "Residential HH"
 msgstr "Residencial HH"
 
-#: src/lincity/lintypes.cpp:477
+#: src/lincity/lintypes.cpp:476
 msgid "Water well"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:489
+#: src/lincity/lintypes.cpp:488
 msgid "Desert"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:501
+#: src/lincity/lintypes.cpp:500
 msgid "Tree"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:514
+#: src/lincity/lintypes.cpp:513
 msgid "Trees"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:527
+#: src/lincity/lintypes.cpp:526
 msgid "Forest"
 msgstr ""
 
-#: src/lincity/ldsvguts.cpp:128
+#: src/lincity/ldsvguts.cpp:137
 #, c-format
 msgid "Save file <%s> - "
 msgstr "Salvar arquivo <%s> - "
 
-#: src/lincity/ldsvguts.cpp:129
+#: src/lincity/ldsvguts.cpp:138
 msgid "Can't open save file!"
 msgstr "N??o posso abrir o arquivo!"
 
-#: src/lincity/ldsvguts.cpp:134
+#: src/lincity/ldsvguts.cpp:148
 msgid "Saving scene"
 msgstr "Salvando cena"
 
-#: src/lincity/ldsvguts.cpp:334
+#: src/lincity/ldsvguts.cpp:362
 #, c-format
 msgid "Can't open <%s> (gzipped)"
 msgstr "N??o posso abrir <%s> (compactado)"
 
-#: src/lincity/ldsvguts.cpp:352
+#: src/lincity/ldsvguts.cpp:395
 msgid "Loading scene"
 msgstr "Abrindo a cena"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/fileutil.cpp:266 src/lincity/fileutil.cpp:310
+msgid "Error. Can't find LINCITY_HOME"
+msgstr "Erro. LINCITY_HOME n??o encontrado"
+
+#: src/lincity/fileutil.cpp:512
+msgid "Error verifying package. Can't find colour.pal."
+msgstr "Erro verificando o pacote. N??o encontro a paleta de cores."
+
+#: src/lincity/fileutil.cpp:525 src/lincity/fileutil.cpp:533
+#, c-format
+msgid "Couldn't create the save directory '%s'\n"
+msgstr "N??o pude criar a pasta '%s'\n"
+
+#: src/lincity/fileutil.cpp:550
+#, c-format
+msgid "Out of memory: malloc failure\n"
+msgstr "Sem mem??ria. malloc falhou\n"
+
+#: src/lincity/simulate.cpp:97
+msgid ""
+"Upgrading from old game. You have 10 years to build water wells where "
+"needed. After, starvation will occur!  You should check starvation minimap, "
+"and read waterwell help page :-)"
+msgstr ""
+
+#: src/lincity/lclib.cpp:15
 msgid "Jan"
 msgstr "Jan"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Feb"
 msgstr "Fev"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Mar"
 msgstr "Mar"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Apr"
 msgstr "Abr"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "May"
 msgstr "Mai"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jun"
 msgstr "Jun"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jul"
 msgstr "Jul"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Aug"
 msgstr "Ago"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Sep"
 msgstr "Set"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Oct"
 msgstr "Out"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Nov"
 msgstr "Nov"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Dec"
 msgstr "Dez"
 
-#: src/lincity/modules/health_centre.cpp:66
+#: src/lincity/power.cpp:102
+msgid "You have too many power grids. Join some of them"
+msgstr ""
+"Voc?? possui muitas malhas de transmiss??o de energia. Junte algumas delas"
+
+#: src/lincity/modules/health_centre.cpp:58
 msgid "Health Centre"
 msgstr "Centro de Sa??de"
 
-#: src/lincity/modules/health_centre.cpp:68
-#: src/lincity/modules/rocket_pad.cpp:245 src/lincity/modules/recycle.cpp:181
-#: src/lincity/modules/mill.cpp:107 src/lincity/modules/university.cpp:74
-#: src/lincity/modules/cricket.cpp:101 src/lincity/modules/pottery.cpp:123
-#: src/lincity/modules/blacksmith.cpp:105 src/lincity/modules/school.cpp:54
-#: src/lincity/modules/firestation.cpp:121
+#: src/lincity/modules/health_centre.cpp:60
+#: src/lincity/modules/rocket_pad.cpp:198 src/lincity/modules/recycle.cpp:148
+#: src/lincity/modules/mill.cpp:92 src/lincity/modules/university.cpp:65
+#: src/lincity/modules/cricket.cpp:93 src/lincity/modules/pottery.cpp:108
+#: src/lincity/modules/blacksmith.cpp:95 src/lincity/modules/school.cpp:48
+#: src/lincity/modules/firestation.cpp:110
 msgid "Inventory"
 msgstr "Invent??rio"
 
-#: src/lincity/modules/health_centre.cpp:69
-#: src/lincity/modules/rocket_pad.cpp:246 src/lincity/modules/market.cpp:1158
-#: src/lincity/modules/road.cpp:52 src/lincity/modules/rail.cpp:55
-#: src/lincity/modules/coal_power.cpp:107
-#: src/lincity/modules/university.cpp:75 src/lincity/modules/cricket.cpp:102
-#: src/lincity/modules/track.cpp:43 src/lincity/modules/pottery.cpp:124
-#: src/lincity/modules/school.cpp:55 src/lincity/modules/firestation.cpp:122
+#: src/lincity/modules/health_centre.cpp:61
+#: src/lincity/modules/rocket_pad.cpp:199 src/lincity/modules/market.cpp:984
+#: src/lincity/modules/road.cpp:47 src/lincity/modules/rail.cpp:51
+#: src/lincity/modules/coal_power.cpp:97 src/lincity/modules/university.cpp:66
+#: src/lincity/modules/cricket.cpp:94 src/lincity/modules/track.cpp:38
+#: src/lincity/modules/pottery.cpp:109 src/lincity/modules/school.cpp:49
+#: src/lincity/modules/firestation.cpp:111
 msgid "Jobs"
 msgstr "Empregos"
 
-#: src/lincity/modules/health_centre.cpp:71
-#: src/lincity/modules/rocket_pad.cpp:248 src/lincity/modules/market.cpp:1162
-#: src/lincity/modules/port.cpp:357 src/lincity/modules/road.cpp:56
-#: src/lincity/modules/rail.cpp:59 src/lincity/modules/mill.cpp:108
-#: src/lincity/modules/university.cpp:77 src/lincity/modules/cricket.cpp:104
-#: src/lincity/modules/track.cpp:47 src/lincity/modules/pottery.cpp:126
-#: src/lincity/modules/blacksmith.cpp:106 src/lincity/modules/school.cpp:57
-#: src/lincity/modules/firestation.cpp:124 src/lincity-ng/MpsInterface.cpp:448
+#: src/lincity/modules/health_centre.cpp:62
+#: src/lincity/modules/rocket_pad.cpp:200 src/lincity/modules/market.cpp:986
+#: src/lincity/modules/port.cpp:298 src/lincity/modules/road.cpp:49
+#: src/lincity/modules/rail.cpp:53 src/lincity/modules/mill.cpp:93
+#: src/lincity/modules/university.cpp:67 src/lincity/modules/cricket.cpp:95
+#: src/lincity/modules/track.cpp:40 src/lincity/modules/pottery.cpp:110
+#: src/lincity/modules/blacksmith.cpp:96 src/lincity/modules/school.cpp:50
+#: src/lincity/modules/firestation.cpp:112 src/lincity-ng/MpsInterface.cpp:451
 msgid "Goods"
 msgstr "Bens"
 
-#: src/lincity/modules/rocket_pad.cpp:239
+#: src/lincity/modules/rocket_pad.cpp:192
 msgid "Rocket Pad"
 msgstr "??rea do lan??amento"
 
-#: src/lincity/modules/rocket_pad.cpp:242
+#: src/lincity/modules/rocket_pad.cpp:195
 msgid "Completion"
 msgstr "Completo"
 
-#: src/lincity/modules/rocket_pad.cpp:250 src/lincity/modules/market.cpp:1166
-#: src/lincity/modules/port.cpp:361 src/lincity/modules/road.cpp:60
-#: src/lincity/modules/rail.cpp:63 src/lincity/modules/light_industry.cpp:368
-#: src/lincity/modules/commune.cpp:156 src/lincity/modules/track.cpp:51
+#: src/lincity/modules/rocket_pad.cpp:201 src/lincity/modules/market.cpp:988
+#: src/lincity/modules/port.cpp:302 src/lincity/modules/road.cpp:51
+#: src/lincity/modules/rail.cpp:55 src/lincity/modules/light_industry.cpp:288
+#: src/lincity/modules/commune.cpp:182 src/lincity/modules/track.cpp:42
 msgid "Steel"
 msgstr "A??o"
 
-#: src/lincity/modules/windmill.cpp:79 src/lincity/modules/recycle.cpp:178
-#: src/lincity/modules/coal_power.cpp:109
-#: src/lincity/modules/organic_farm.cpp:224
-#: src/lincity/modules/solar_power.cpp:57
+#: src/lincity/modules/windmill.cpp:76 src/lincity/modules/recycle.cpp:146
+#: src/lincity/modules/coal_power.cpp:98
+#: src/lincity/modules/organic_farm.cpp:230
+#: src/lincity/modules/solar_power.cpp:60
 msgid "Tech"
 msgstr "Tecn"
 
-#: src/lincity/modules/windmill.cpp:84
+#: src/lincity/modules/windmill.cpp:80
 msgid "Local Status"
 msgstr "Status Local"
 
-#: src/lincity/modules/windmill.cpp:87
+#: src/lincity/modules/windmill.cpp:83
 msgid "Prod."
 msgstr "Prod."
 
-#: src/lincity/modules/windmill.cpp:90 src/lincity/modules/windmill.cpp:103
-#: src/lincity/modules/substation.cpp:113
+#: src/lincity/modules/windmill.cpp:86 src/lincity/modules/windmill.cpp:99
+#: src/lincity/modules/substation.cpp:110
 msgid "Demand"
 msgstr "Demanda"
 
-#: src/lincity/modules/windmill.cpp:94 src/lincity/modules/substation.cpp:104
+#: src/lincity/modules/windmill.cpp:90 src/lincity/modules/substation.cpp:101
 msgid "Grid Status"
 msgstr "Status da Rede"
 
-#: src/lincity/modules/windmill.cpp:97 src/lincity/modules/substation.cpp:107
+#: src/lincity/modules/windmill.cpp:93 src/lincity/modules/substation.cpp:104
 msgid "T. Cap."
 msgstr "T. Cap."
 
-#: src/lincity/modules/windmill.cpp:100 src/lincity/modules/substation.cpp:110
+#: src/lincity/modules/windmill.cpp:96 src/lincity/modules/substation.cpp:107
 msgid "A. Cap."
 msgstr "A. Cap."
 
-#: src/lincity/modules/windmill.cpp:106 src/lincity/modules/coal_power.cpp:111
-#: src/lincity/modules/substation.cpp:116
-#: src/lincity/modules/power_line.cpp:53
-#: src/lincity/modules/solar_power.cpp:59
+#: src/lincity/modules/windmill.cpp:102 src/lincity/modules/coal_power.cpp:99
+#: src/lincity/modules/substation.cpp:113
+#: src/lincity/modules/power_line.cpp:49
+#: src/lincity/modules/solar_power.cpp:61
 msgid "Grid ID"
 msgstr "ID de Rede"
 
-#: src/lincity/modules/water.cpp:22 src/lincity/modules/commune.cpp:151
-#: src/lincity/modules/commune.cpp:153 src/lincity/modules/commune.cpp:155
-#: src/lincity/modules/commune.cpp:157 src/lincity-ng/MpsInterface.cpp:379
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/waterwell.cpp:50
+#: src/lincity/modules/commune.cpp:177 src/lincity/modules/commune.cpp:179
+#: src/lincity/modules/commune.cpp:181 src/lincity/modules/commune.cpp:183
 #: src/lincity-ng/MpsInterface.cpp:382 src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity-ng/MpsInterface.cpp:388
 msgid "Yes"
 msgstr "Sim"
 
-#: src/lincity/modules/water.cpp:22 src/lincity/modules/commune.cpp:151
-#: src/lincity/modules/commune.cpp:153 src/lincity/modules/commune.cpp:155
-#: src/lincity/modules/commune.cpp:157 src/lincity-ng/MpsInterface.cpp:379
-#: src/lincity-ng/MpsInterface.cpp:382 src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/commune.cpp:177
+#: src/lincity/modules/commune.cpp:179 src/lincity/modules/commune.cpp:181
+#: src/lincity/modules/commune.cpp:183 src/lincity-ng/MpsInterface.cpp:382
+#: src/lincity-ng/MpsInterface.cpp:385 src/lincity-ng/MpsInterface.cpp:388
 msgid "No"
 msgstr "N??o"
 
-#: src/lincity/modules/water.cpp:23
+#: src/lincity/modules/water.cpp:21
 msgid "Navigable"
 msgstr "Naveg??vel"
 
-#: src/lincity/modules/recycle.cpp:169
+#: src/lincity/modules/recycle.cpp:137
 msgid "Recycling"
 msgstr "Reciclagem"
 
-#: src/lincity/modules/recycle.cpp:170
+#: src/lincity/modules/recycle.cpp:138
 msgid "Center"
 msgstr "Centralizar"
 
-#: src/lincity/modules/recycle.cpp:173
-#: src/lincity/modules/heavy_industry.cpp:351 src/lincity/modules/mill.cpp:105
-#: src/lincity/modules/light_industry.cpp:370
-#: src/lincity/modules/university.cpp:79 src/lincity/modules/pottery.cpp:121
-#: src/lincity/modules/blacksmith.cpp:103 src/lincity/modules/school.cpp:60
+#: src/lincity/modules/recycle.cpp:141
+#: src/lincity/modules/heavy_industry.cpp:288 src/lincity/modules/mill.cpp:90
+#: src/lincity/modules/light_industry.cpp:289
+#: src/lincity/modules/university.cpp:68 src/lincity/modules/pottery.cpp:106
+#: src/lincity/modules/blacksmith.cpp:93 src/lincity/modules/school.cpp:52
 msgid "Capacity"
 msgstr "Capacidade"
 
-#: src/lincity/modules/recycle.cpp:175 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
 #: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/residence.cpp:288 src/lincity/modules/residence.cpp:291
-#: src/lincity/modules/residence.cpp:294
-#: src/lincity/modules/light_industry.cpp:359
-#: src/lincity/modules/organic_farm.cpp:217
+#: src/lincity/modules/light_industry.cpp:281
+#: src/lincity/modules/organic_farm.cpp:223
 msgid "YES"
 msgstr "SIM"
 
-#: src/lincity/modules/recycle.cpp:175 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
 #: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/residence.cpp:288 src/lincity/modules/residence.cpp:291
-#: src/lincity/modules/residence.cpp:294
-#: src/lincity/modules/heavy_industry.cpp:339
-#: src/lincity/modules/light_industry.cpp:359
+#: src/lincity/modules/heavy_industry.cpp:279
+#: src/lincity/modules/light_industry.cpp:281
 msgid "NO"
 msgstr "N??O"
 
-#: src/lincity/modules/recycle.cpp:176 src/lincity/modules/residence.cpp:280
-#: src/lincity/modules/heavy_industry.cpp:342
-#: src/lincity/modules/light_industry.cpp:360
-#: src/lincity/modules/organic_farm.cpp:221
+#: src/lincity/modules/recycle.cpp:144 src/lincity/modules/residence.cpp:271
+#: src/lincity/modules/heavy_industry.cpp:282
+#: src/lincity/modules/light_industry.cpp:282
+#: src/lincity/modules/organic_farm.cpp:227
 msgid "Power"
 msgstr "Energia"
 
-#: src/lincity/modules/recycle.cpp:182
-#: src/lincity/modules/heavy_industry.cpp:347
-#: src/lincity/modules/market.cpp:1164 src/lincity/modules/port.cpp:353
-#: src/lincity/modules/road.cpp:58 src/lincity/modules/rail.cpp:61
-#: src/lincity/modules/light_industry.cpp:366
-#: src/lincity/modules/commune.cpp:154 src/lincity/modules/track.cpp:49
-#: src/lincity/modules/pottery.cpp:128
+#: src/lincity/modules/recycle.cpp:149
+#: src/lincity/modules/heavy_industry.cpp:286
+#: src/lincity/modules/market.cpp:987 src/lincity/modules/port.cpp:294
+#: src/lincity/modules/road.cpp:50 src/lincity/modules/rail.cpp:54
+#: src/lincity/modules/light_industry.cpp:287
+#: src/lincity/modules/commune.cpp:180 src/lincity/modules/track.cpp:41
+#: src/lincity/modules/pottery.cpp:111
 msgid "Ore"
 msgstr "Min??rio"
 
-#: src/lincity/modules/recycle.cpp:184 src/lincity/modules/market.cpp:1168
-#: src/lincity/modules/road.cpp:62 src/lincity/modules/rail.cpp:65
-#: src/lincity/modules/commune.cpp:158 src/lincity/modules/track.cpp:53
+#: src/lincity/modules/recycle.cpp:150 src/lincity/modules/market.cpp:989
+#: src/lincity/modules/road.cpp:52 src/lincity/modules/rail.cpp:56
+#: src/lincity/modules/commune.cpp:184 src/lincity/modules/track.cpp:43
 msgid "Waste"
 msgstr "Desperd??cio"
 
-#: src/lincity/modules/coalmine.cpp:168
+#: src/lincity/modules/coalmine.cpp:132
 msgid "Coal Mine"
 msgstr "Mina de Carv??o"
 
-#: src/lincity/modules/coalmine.cpp:171 src/lincity/modules/oremine.cpp:186
+#: src/lincity/modules/coalmine.cpp:135 src/lincity/modules/oremine.cpp:144
 msgid "Stock"
 msgstr "Estoque"
 
-#: src/lincity/modules/coalmine.cpp:175 src/lincity/modules/coalmine.cpp:177
-#: src/lincity/modules/oremine.cpp:190
+#: src/lincity/modules/coalmine.cpp:138 src/lincity/modules/coalmine.cpp:140
+#: src/lincity/modules/oremine.cpp:147
 msgid "Reserve"
 msgstr "Reserva"
 
-#: src/lincity/modules/coalmine.cpp:177
+#: src/lincity/modules/coalmine.cpp:140
 msgid "EMPTY"
 msgstr "VAZIO"
 
-#: src/lincity/modules/residence.cpp:273
+#: src/lincity/modules/residence.cpp:255
 msgid "Residence"
 msgstr "Resid??ncia"
 
-#: src/lincity/modules/residence.cpp:277
+#: src/lincity/modules/residence.cpp:259
 msgid "People"
 msgstr "Pessoas"
 
-#: src/lincity/modules/residence.cpp:283
+#: src/lincity/modules/residence.cpp:268
 msgid "Fed"
 msgstr "Abastecer"
 
-#: src/lincity/modules/residence.cpp:286
+#: src/lincity/modules/residence.cpp:274
 msgid "Employed"
 msgstr "Empregados"
 
-#: src/lincity/modules/residence.cpp:299 src/lincity-ng/MpsInterface.cpp:393
+#: src/lincity/modules/residence.cpp:276 src/lincity-ng/MpsInterface.cpp:396
 msgid "good"
 msgstr "bom"
 
-#: src/lincity/modules/residence.cpp:299
+#: src/lincity/modules/residence.cpp:276
 msgid "poor"
 msgstr "pobres"
 
-#: src/lincity/modules/residence.cpp:300
+#: src/lincity/modules/residence.cpp:277
 msgid "Job"
 msgstr "Trabalho"
 
-#: src/lincity/modules/residence.cpp:289
+#: src/lincity/modules/residence.cpp:280
 msgid "Health Cvr"
 msgstr "Sa??de Cvr"
 
-#: src/lincity/modules/residence.cpp:295 src/lincity-ng/MpsInterface.cpp:386
-#: src/lincity-ng/MpsInterface.cpp:514
+#: src/lincity/modules/residence.cpp:286 src/lincity-ng/MpsInterface.cpp:389
+#: src/lincity-ng/MpsInterface.cpp:517
 msgid "Sport"
 msgstr "Esporte"
 
-#: src/lincity/modules/residence.cpp:297 src/lincity-ng/MpsInterface.cpp:388
+#: src/lincity/modules/residence.cpp:288 src/lincity/modules/waterwell.cpp:47
+#: src/lincity-ng/MpsInterface.cpp:391
 msgid "Pollution"
 msgstr "Polui????o"
 
-#: src/lincity/modules/monument.cpp:63
+#: src/lincity/modules/monument.cpp:57
 msgid "Wisdom Bestowed"
 msgstr "Reconhecimento adquirido"
 
-#: src/lincity/modules/monument.cpp:67
+#: src/lincity/modules/monument.cpp:61
 #, c-format
 msgid "% Complete"
 msgstr "% Completo"
 
-#: src/lincity/modules/heavy_industry.cpp:328
+#: src/lincity/modules/waterwell.cpp:44
+msgid "Water_well"
+msgstr ""
+
+#: src/lincity/modules/waterwell.cpp:51
+msgid "Drinkable"
+msgstr ""
+
+#: src/lincity/modules/heavy_industry.cpp:268
 msgid "Heavy"
 msgstr "Pesada"
 
-#: src/lincity/modules/heavy_industry.cpp:329
-#: src/lincity/modules/light_industry.cpp:355
+#: src/lincity/modules/heavy_industry.cpp:269
+#: src/lincity/modules/light_industry.cpp:277
 msgid "Industry"
 msgstr "Ind??stria"
 
-#: src/lincity/modules/heavy_industry.cpp:334
-#: src/lincity/modules/heavy_industry.cpp:349
-#: src/lincity/modules/market.cpp:1160 src/lincity/modules/port.cpp:349
-#: src/lincity/modules/road.cpp:54 src/lincity/modules/rail.cpp:57
-#: src/lincity/modules/coal_power.cpp:91
-#: src/lincity/modules/coal_power.cpp:105 src/lincity/modules/mill.cpp:112
-#: src/lincity/modules/commune.cpp:152 src/lincity/modules/track.cpp:45
-#: src/lincity/modules/pottery.cpp:130 src/lincity/modules/blacksmith.cpp:108
-#: src/lincity-ng/MpsInterface.cpp:444
+#: src/lincity/modules/heavy_industry.cpp:274
+#: src/lincity/modules/heavy_industry.cpp:287
+#: src/lincity/modules/market.cpp:985 src/lincity/modules/port.cpp:290
+#: src/lincity/modules/road.cpp:48 src/lincity/modules/rail.cpp:52
+#: src/lincity/modules/coal_power.cpp:82 src/lincity/modules/coal_power.cpp:96
+#: src/lincity/modules/mill.cpp:95 src/lincity/modules/commune.cpp:178
+#: src/lincity/modules/track.cpp:39 src/lincity/modules/pottery.cpp:112
+#: src/lincity/modules/blacksmith.cpp:97 src/lincity-ng/MpsInterface.cpp:447
 msgid "Coal"
 msgstr "Carv??o"
 
-#: src/lincity/modules/heavy_industry.cpp:336
+#: src/lincity/modules/heavy_industry.cpp:276
 msgid "Grid"
 msgstr "Rede"
 
-#: src/lincity/modules/heavy_industry.cpp:344
-#: src/lincity/modules/light_industry.cpp:362
+#: src/lincity/modules/heavy_industry.cpp:284
+#: src/lincity/modules/light_industry.cpp:284
 msgid "Output"
 msgstr "Sa??da"
 
-#: src/lincity/modules/heavy_industry.cpp:345
-#: src/lincity/modules/light_industry.cpp:364
+#: src/lincity/modules/heavy_industry.cpp:285
+#: src/lincity/modules/light_industry.cpp:286
 msgid "Store"
 msgstr "Dep??sito"
 
-#: src/lincity/modules/market.cpp:1156 src/lincity/modules/port.cpp:345
-#: src/lincity/modules/road.cpp:50 src/lincity/modules/rail.cpp:53
-#: src/lincity/modules/mill.cpp:110 src/lincity/modules/track.cpp:41
+#: src/lincity/modules/market.cpp:983 src/lincity/modules/port.cpp:286
+#: src/lincity/modules/road.cpp:46 src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/mill.cpp:94 src/lincity/modules/track.cpp:37
 msgid "Food"
 msgstr "Comida"
 
-#: src/lincity/modules/port.cpp:365 src/lincity-ng/MpsInterface.cpp:532
+#: src/lincity/modules/port.cpp:306 src/lincity-ng/MpsInterface.cpp:535
 msgid "Total"
 msgstr "Total"
 
-#: src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/rail.cpp:47
 msgid "Rail"
 msgstr "Trilho"
 
-#: src/lincity/modules/coal_power.cpp:92
-#: src/lincity/modules/solar_power.cpp:44
+#: src/lincity/modules/coal_power.cpp:83
+#: src/lincity/modules/solar_power.cpp:47
 msgid "Power Station"
 msgstr "Esta????o de Energia"
 
-#: src/lincity/modules/coal_power.cpp:96
-#: src/lincity/modules/solar_power.cpp:48
+#: src/lincity/modules/coal_power.cpp:87
+#: src/lincity/modules/solar_power.cpp:51
 msgid "Max Output"
 msgstr "Capacidade M??xima"
 
-#: src/lincity/modules/coal_power.cpp:101
-#: src/lincity/modules/solar_power.cpp:53
+#: src/lincity/modules/coal_power.cpp:92
+#: src/lincity/modules/solar_power.cpp:56
 msgid "Current Output"
 msgstr "Capacidade Atual"
 
-#: src/lincity/modules/substation.cpp:100
+#: src/lincity/modules/substation.cpp:97
 msgid "Local Demand"
 msgstr "Demanda Local"
 
-#: src/lincity/modules/mill.cpp:103
+#: src/lincity/modules/mill.cpp:88
 msgid "Textile Mill"
 msgstr "F??brica de Tecido"
 
-#: src/lincity/modules/oremine.cpp:183
+#: src/lincity/modules/oremine.cpp:141
 msgid "Ore Mine"
 msgstr "Mina de Min??rio"
 
-#: src/lincity/modules/power_line.cpp:50
+#: src/lincity/modules/power_line.cpp:46
 msgid "Power Line"
 msgstr "Linha de Transmiss??o"
 
-#: src/lincity/modules/light_industry.cpp:354
+#: src/lincity/modules/light_industry.cpp:276
 msgid "Light"
 msgstr "Leve"
 
-#: src/lincity/modules/university.cpp:69
+#: src/lincity/modules/university.cpp:61
 msgid "Tech Produced"
 msgstr "Tecnologia Produzida"
 
-#: src/lincity/modules/tip.cpp:109
+#: src/lincity/modules/tip.cpp:100
 msgid "Landfill"
 msgstr "Dep??sito de Lixo"
 
-#: src/lincity/modules/tip.cpp:112
+#: src/lincity/modules/tip.cpp:103
 msgid "Last Month"
 msgstr "??ltimo M??s"
 
-#: src/lincity/modules/tip.cpp:113
+#: src/lincity/modules/tip.cpp:104
 msgid "Tons"
 msgstr "Toneladas"
 
-#: src/lincity/modules/tip.cpp:114
+#: src/lincity/modules/tip.cpp:105
 msgid "Percent"
 msgstr "Porcento"
 
-#: src/lincity/modules/tip.cpp:117
+#: src/lincity/modules/tip.cpp:107
 #, c-format
 msgid "% Filled"
 msgstr "% Completo"
 
-#: src/lincity/modules/commune.cpp:149
+#: src/lincity/modules/commune.cpp:175
 msgid "Activity"
 msgstr "Atividade"
 
-#: src/lincity/modules/school.cpp:51
+#: src/lincity/modules/school.cpp:45
 msgid "Lessons Learned"
 msgstr "Li????es Aprendidas"
 
-#: src/lincity/modules/firestation.cpp:119
+#: src/lincity/modules/firestation.cpp:108
 msgid "Fire Station"
 msgstr "Corpo de Bombeiros"
 
-#: src/lincity/modules/organic_farm.cpp:213
+#: src/lincity/modules/organic_farm.cpp:219
 msgid "Organic Farm"
 msgstr "Fazenda Org??nica"
 
-#: src/lincity/modules/organic_farm.cpp:219
+#: src/lincity/modules/organic_farm.cpp:225
 msgid "NO "
 msgstr "N??O "
 
-#: src/lincity/modules/organic_farm.cpp:228
+#: src/lincity/modules/organic_farm.cpp:233
 msgid "Prod"
 msgstr "Prod"
 
-#: src/lincity/modules/organic_farm.cpp:238
+#: src/lincity/modules/organic_farm.cpp:239
 msgid "Debug info"
 msgstr ""
 
-#: src/lincity/modules/organic_farm.cpp:239
-msgid " max with power & water"
-msgstr ""
-
 #: src/lincity/modules/organic_farm.cpp:240
-msgid " number of tile with water"
+msgid "max with power&water"
 msgstr ""
 
 #: src/lincity/modules/organic_farm.cpp:241
-msgid " current production"
+msgid "N tiles with water"
 msgstr ""
 
-#: src/lincity/modules/solar_power.cpp:43
+#: src/lincity/modules/organic_farm.cpp:242
+#, fuzzy
+msgid "Current production"
+msgstr "Capacidade Atual"
+
+#: src/lincity/modules/solar_power.cpp:46
 msgid "Solar"
 msgstr "Solar"
 
-#: src/lincity/modules/waterwell.cpp:44
-msgid "Water_well"
-msgstr ""
-
-#: src/lincity/modules/waterwell.cpp:51
-msgid "Drinkable"
-msgstr ""
-
 #: src/lincity-ng/Dialog.cpp:173
 msgid "Launchsite"
 msgstr "Terreno Inicial"
 
-#: src/lincity-ng/Dialog.cpp:351 src/lincity-ng/Dialog.cpp:352
+#: src/lincity-ng/Dialog.cpp:352 src/lincity-ng/Dialog.cpp:353
 msgid "----- IN TEST MODE -------"
 msgstr "----- EM MODO TESTE -------"
 
-#: src/lincity-ng/Dialog.cpp:354
+#: src/lincity-ng/Dialog.cpp:355
 #, c-format
 msgid "Game statistics from LinCity-NG Version %s"
 msgstr "Estat??sticas de jogo do LinCity-NG Vers??o %s"
 
-#: src/lincity-ng/Dialog.cpp:358
+#: src/lincity-ng/Dialog.cpp:359
 #, c-format
 msgid "Initial loaded scene - %s"
 msgstr "Cena inicial aberta - %s"
 
-#: src/lincity-ng/Dialog.cpp:363
+#: src/lincity-ng/Dialog.cpp:364
 #, c-format
 msgid "Economy is sustainable"
 msgstr "A economia ?? sustent??vel"
 
-#: src/lincity-ng/Dialog.cpp:367
+#: src/lincity-ng/Dialog.cpp:368
 #, c-format
 msgid "Population  %d  of which  %d  are not housed."
 msgstr "A popula????o ?? de  %d  dos quais  %d  s??o sem teto."
 
-#: src/lincity-ng/Dialog.cpp:372
+#: src/lincity-ng/Dialog.cpp:373
 #, c-format
 msgid "Max population %d  Number evacuated %d Total births %d"
-msgstr ""
-"Popula????o m??xima %d  N??mero de evacuados %d Total de nascimentos %d"
+msgstr "Popula????o m??xima %d  N??mero de evacuados %d Total de nascimentos %d"
 
-#: src/lincity-ng/Dialog.cpp:377
+#: src/lincity-ng/Dialog.cpp:378
 #, c-format
 msgid "Date %s %04d  Money %8d   Tech-level %5.1f (%5.1f)"
 msgstr "Data %s %04d  Dinheiro %8d  N??vel Tecnologico %5.1f (%5.1f)"
 
-#: src/lincity-ng/Dialog.cpp:384
+#: src/lincity-ng/Dialog.cpp:385
 #, c-format
 msgid ".Deaths by starvation %7d   History %8.3f"
 msgstr ".Mortos pela fome %7d   Hist??rico %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:389
+#: src/lincity-ng/Dialog.cpp:390
 #, c-format
 msgid "Deaths from pollution %7d   History %8.3f"
 msgstr "Mortos pela polui????o %7d   Hist??rico %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:393
+#: src/lincity-ng/Dialog.cpp:394
 #, c-format
 msgid "Years of unemployment %7d   History %8.3f"
 msgstr "Anos de desemprego %7d   Hist??rico %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:397
+#: src/lincity-ng/Dialog.cpp:398
 #, c-format
 msgid "Rockets launched %2d  Successful launches %2d"
 msgstr "Foguetes lan??ados %2d  Lan??amentos bem sucedidos %2d"
 
-#: src/lincity-ng/Dialog.cpp:408
+#: src/lincity-ng/Dialog.cpp:409
 #, c-format
 msgid ".   Residences %4d         Markets %4d            Farms %4d"
 msgstr ".   Resid??ncias %4d         Mercados %4d          Fazendas %4d"
 
-#: src/lincity-ng/Dialog.cpp:419
+#: src/lincity-ng/Dialog.cpp:420
 #, c-format
 msgid ".    Monuments %4d         Schools %4d     Universities %4d"
 msgstr ".    Monumentos %4d       Escolas %4d     Universidades %4d"
 
-#: src/lincity-ng/Dialog.cpp:424
+#: src/lincity-ng/Dialog.cpp:425
 #, c-format
 msgid ".Fire stations %4d           Parks %4d    Sports fields %4d"
 msgstr ".Bombeiros %4d            Parques %4d  Quadras de Esporte %4d"
 
-#: src/lincity-ng/Dialog.cpp:429
+#: src/lincity-ng/Dialog.cpp:430
 #, c-format
 msgid "Health centres %4d            Tips %4d         Shanties %4d"
 msgstr "Centros de sa??de %4d         Aterros %4d         Favelas %4d"
 
-#: src/lincity-ng/Dialog.cpp:437
+#: src/lincity-ng/Dialog.cpp:438
 #, c-format
 msgid ".    Windmills %4d     Coal powers %4d     Solar powers %4d"
 msgstr ".   Moinhos de vento %4d   Usinas de carv??o %4d   Usinas solares %4d"
 
-#: src/lincity-ng/Dialog.cpp:443
+#: src/lincity-ng/Dialog.cpp:444
 #, c-format
 msgid ".  Substations %4d     Power lines %4d            Ports %4d"
 msgstr ".  Sub-esta????es %4d   Linhas de transmiss??o %4d   Portos %4d"
 
-#: src/lincity-ng/Dialog.cpp:448
+#: src/lincity-ng/Dialog.cpp:449
 #, c-format
 msgid ".       Tracks %4d           Roads %4d             Rail %4d"
 msgstr ".        Pistas %4d           Estradas %4d         Trilhos %4d"
 
-#: src/lincity-ng/Dialog.cpp:456
+#: src/lincity-ng/Dialog.cpp:457
 #, c-format
 msgid ".    Potteries %4d     Blacksmiths %4d            Mills %4d"
 msgstr ".     Olarias %4d     Ferreiros %4d            Moinhos %4d"
 
-#: src/lincity-ng/Dialog.cpp:461
+#: src/lincity-ng/Dialog.cpp:462
 #, c-format
 msgid ".   Light inds %4d      Heavy inds %4d        Recyclers %4d"
 msgstr ""
 ".    Ind??stias peq %4d      Ind??strias grd %4d  Centros de reciclagem %4d"
 
-#: src/lincity-ng/Dialog.cpp:466
+#: src/lincity-ng/Dialog.cpp:467
 #, c-format
 msgid ".   Coal mines %4d       Ore mines %4d         Communes %4d"
 msgstr ".   Minas de carv??o %4d   Minas de min??rio %4d    Comunas %4d"
 
-#: src/lincity-ng/ScreenInterface.cpp:261
+#: src/lincity-ng/ScreenInterface.cpp:264
 msgid "MM"
 msgstr "MM"
 
-#: src/lincity-ng/ScreenInterface.cpp:272 src/lincity-ng/GameView.cpp:1574
-#: src/lincity-ng/GameView.cpp:1605
+#: src/lincity-ng/ScreenInterface.cpp:275 src/lincity-ng/GameView.cpp:1609
+#: src/lincity-ng/GameView.cpp:1640
 msgid "$"
 msgstr "$"
 
-#: src/lincity-ng/GameView.cpp:236
+#: src/lincity-ng/GameView.cpp:237
 msgid "Minimap: outline map"
 msgstr "Minimapa: mapa do esbo??o"
 
-#: src/lincity-ng/GameView.cpp:239
+#: src/lincity-ng/GameView.cpp:240
 msgid "Minimap: unemployment"
 msgstr "Minimapa: desemprego"
 
-#: src/lincity-ng/GameView.cpp:242
+#: src/lincity-ng/GameView.cpp:243
 msgid "Minimap: pollution"
 msgstr "Minimapa: polui????o"
 
-#: src/lincity-ng/GameView.cpp:245
+#: src/lincity-ng/GameView.cpp:246
 msgid "Minimap: nourishments"
 msgstr "Minimapa: alimenta????o"
 
-#: src/lincity-ng/GameView.cpp:248
+#: src/lincity-ng/GameView.cpp:249
 msgid "Minimap: power supply"
 msgstr "Minimapa: fornecimento de energia"
 
-#: src/lincity-ng/GameView.cpp:251
+#: src/lincity-ng/GameView.cpp:252
 msgid "Minimap: firedepartment cover"
 msgstr "Minimapa: cobertura contra fogo"
 
-#: src/lincity-ng/GameView.cpp:254
+#: src/lincity-ng/GameView.cpp:255
 msgid "Minimap: sport cover"
 msgstr "Minimapa: cobertura de esportes"
 
-#: src/lincity-ng/GameView.cpp:257
+#: src/lincity-ng/GameView.cpp:258
 msgid "Minimap: medical care"
 msgstr "Minimapa: cuidados m??dicos"
 
-#: src/lincity-ng/GameView.cpp:260
+#: src/lincity-ng/GameView.cpp:261
 msgid "Minimap: coal depots"
 msgstr "Minimapa: Dep??sitos de carv??o"
 
-#: src/lincity-ng/GameView.cpp:263
+#: src/lincity-ng/GameView.cpp:264
 msgid "Minimap: traffic density"
 msgstr "Minimapa: densidade do tr??fego"
 
-#: src/lincity-ng/GameView.cpp:1569
+#: src/lincity-ng/GameView.cpp:1604
 msgid "Estimated Bulldoze Cost: "
 msgstr "Custo Estimado de Destrui????o:"
 
-#: src/lincity-ng/GameView.cpp:1571
+#: src/lincity-ng/GameView.cpp:1606
 msgid "Bulldoze Cost: "
 msgstr "Custo de Destrui????o:"
 
-#: src/lincity-ng/GameView.cpp:1576
+#: src/lincity-ng/GameView.cpp:1611
 msgid "n/a"
 msgstr "n/d"
 
-#: src/lincity-ng/GameView.cpp:1594
+#: src/lincity-ng/GameView.cpp:1629
 msgid "Query Tool: Show information about selected building."
-msgstr ""
-"Ferr. de Pesquisa: Exibe informa????es sobre a constru????o selecionada."
+msgstr "Ferr. de Pesquisa: Exibe informa????es sobre a constru????o selecionada."
 
-#: src/lincity-ng/GameView.cpp:1598
+#: src/lincity-ng/GameView.cpp:1633
 msgid "Bulldozer: remove building -price varies-"
 msgstr "Niveladora: remover contru????o -valor vari??vel-"
 
-#: src/lincity-ng/GameView.cpp:1605
+#: src/lincity-ng/GameView.cpp:1640
 msgid ": Cost to build "
 msgstr ": Custo de contru????o "
 
-#: src/lincity-ng/GameView.cpp:1606
+#: src/lincity-ng/GameView.cpp:1641
 msgid ", to bulldoze "
 msgstr ", para destruir "
 
-#: src/lincity-ng/GameView.cpp:1606 src/lincity-ng/GameView.cpp:1609
+#: src/lincity-ng/GameView.cpp:1641 src/lincity-ng/GameView.cpp:1644
 msgid "$."
 msgstr "$."
 
-#: src/lincity-ng/GameView.cpp:1608
+#: src/lincity-ng/GameView.cpp:1643
 msgid " To build "
 msgstr " Para construir "
 
-#: src/lincity-ng/GameView.cpp:1608
+#: src/lincity-ng/GameView.cpp:1643
 msgid " of them "
 msgstr " deles "
 
-#: src/lincity-ng/GameView.cpp:1609
+#: src/lincity-ng/GameView.cpp:1644
 msgid "will cost about "
 msgstr "custar?? em torno de "
 
-#: src/lincity-ng/MainMenu.cpp:193
+#: src/lincity-ng/MainMenu.cpp:199
 msgid "empty"
 msgstr "vazio"
 
-#: src/lincity-ng/MpsInterface.cpp:224
+#: src/lincity-ng/MpsInterface.cpp:227
 msgid "build something here"
 msgstr "contruir algo aqui"
 
-#: src/lincity-ng/MpsInterface.cpp:226
+#: src/lincity-ng/MpsInterface.cpp:229
 msgid "no further information available"
 msgstr "sem mais informa????es dispon??veis"
 
-#: src/lincity-ng/MpsInterface.cpp:378
+#: src/lincity-ng/MpsInterface.cpp:381
 msgid "Coverage"
 msgstr "Cobertura"
 
-#: src/lincity-ng/MpsInterface.cpp:383
+#: src/lincity-ng/MpsInterface.cpp:386
 msgid "Health"
 msgstr "Sa??de"
 
-#: src/lincity-ng/MpsInterface.cpp:391
+#: src/lincity-ng/MpsInterface.cpp:394
 msgid "clear"
 msgstr "limpar"
 
-#: src/lincity-ng/MpsInterface.cpp:395
+#: src/lincity-ng/MpsInterface.cpp:398
 msgid "fair"
 msgstr "feira"
 
-#: src/lincity-ng/MpsInterface.cpp:397
+#: src/lincity-ng/MpsInterface.cpp:400
 msgid "smelly"
 msgstr "fedorento"
 
-#: src/lincity-ng/MpsInterface.cpp:399
+#: src/lincity-ng/MpsInterface.cpp:402
 msgid "smokey"
 msgstr "fuma??a"
 
-#: src/lincity-ng/MpsInterface.cpp:401
+#: src/lincity-ng/MpsInterface.cpp:404
 msgid "smoggy"
 msgstr "neblina"
 
-#: src/lincity-ng/MpsInterface.cpp:403
+#: src/lincity-ng/MpsInterface.cpp:406
 msgid "bad"
 msgstr "mau"
 
-#: src/lincity-ng/MpsInterface.cpp:405
+#: src/lincity-ng/MpsInterface.cpp:408
 msgid "very bad"
 msgstr "muito mau"
 
-#: src/lincity-ng/MpsInterface.cpp:407
+#: src/lincity-ng/MpsInterface.cpp:410
 msgid "death!"
 msgstr "morte!"
 
-#: src/lincity-ng/MpsInterface.cpp:412
+#: src/lincity-ng/MpsInterface.cpp:415
 msgid "Bulldoze Cost"
 msgstr "Destruir Custa"
 
-#: src/lincity-ng/MpsInterface.cpp:418
+#: src/lincity-ng/MpsInterface.cpp:421
 msgid "N/A"
 msgstr "N/D"
 
-#: src/lincity-ng/MpsInterface.cpp:436
+#: src/lincity-ng/MpsInterface.cpp:439
 msgid "Tax Income"
 msgstr "Taxa de Entrada"
 
-#: src/lincity-ng/MpsInterface.cpp:440
+#: src/lincity-ng/MpsInterface.cpp:443
 msgid "Income"
 msgstr "Rendimento"
 
-#: src/lincity-ng/MpsInterface.cpp:452
+#: src/lincity-ng/MpsInterface.cpp:455
 msgid "Export"
 msgstr "Exportar"
 
-#: src/lincity-ng/MpsInterface.cpp:456
+#: src/lincity-ng/MpsInterface.cpp:459
 msgid "Expenses"
 msgstr "Gastos"
 
-#: src/lincity-ng/MpsInterface.cpp:460
+#: src/lincity-ng/MpsInterface.cpp:463
 msgid "Unemp."
 msgstr "Desemp."
 
-#: src/lincity-ng/MpsInterface.cpp:464
+#: src/lincity-ng/MpsInterface.cpp:467
 msgid "Transport"
 msgstr "Transportador"
 
-#: src/lincity-ng/MpsInterface.cpp:468
+#: src/lincity-ng/MpsInterface.cpp:471
 msgid "Imports"
 msgstr "Importa????es"
 
-#: src/lincity-ng/MpsInterface.cpp:472
+#: src/lincity-ng/MpsInterface.cpp:475
 msgid "Others"
 msgstr "Outros"
 
-#: src/lincity-ng/MpsInterface.cpp:477
+#: src/lincity-ng/MpsInterface.cpp:480
 msgid "Net"
 msgstr "L??quido"
 
-#: src/lincity-ng/MpsInterface.cpp:489
+#: src/lincity-ng/MpsInterface.cpp:492
 msgid "Other Costs"
 msgstr "Outos Custos"
 
-#: src/lincity-ng/MpsInterface.cpp:494
+#: src/lincity-ng/MpsInterface.cpp:497
 msgid "For year"
 msgstr "Por ano"
 
-#: src/lincity-ng/MpsInterface.cpp:498
+#: src/lincity-ng/MpsInterface.cpp:501
 msgid "Interest"
 msgstr "J??ros"
 
-#: src/lincity-ng/MpsInterface.cpp:500
+#: src/lincity-ng/MpsInterface.cpp:503
 msgid "Schools"
 msgstr "Escolas"
 
-#: src/lincity-ng/MpsInterface.cpp:502
+#: src/lincity-ng/MpsInterface.cpp:505
 msgid "Univers."
 msgstr "Universidades"
 
-#: src/lincity-ng/MpsInterface.cpp:504
+#: src/lincity-ng/MpsInterface.cpp:507
 msgid "Deaths"
 msgstr "Mortes"
 
-#: src/lincity-ng/MpsInterface.cpp:508
+#: src/lincity-ng/MpsInterface.cpp:511
 msgid "Hospital"
 msgstr "Hospital"
 
-#: src/lincity-ng/MpsInterface.cpp:510
+#: src/lincity-ng/MpsInterface.cpp:513
 msgid "Rockets"
 msgstr "Foguetes"
 
-#: src/lincity-ng/MpsInterface.cpp:512
+#: src/lincity-ng/MpsInterface.cpp:515
 msgid "Fire Stn"
 msgstr "Bombeiro"
 
-#: src/lincity-ng/MpsInterface.cpp:530
+#: src/lincity-ng/MpsInterface.cpp:533
 msgid "Population"
 msgstr "Popula????o"
 
-#: src/lincity-ng/MpsInterface.cpp:533
+#: src/lincity-ng/MpsInterface.cpp:536
 msgid "Housed"
 msgstr "Com casa"
 
-#: src/lincity-ng/MpsInterface.cpp:534
+#: src/lincity-ng/MpsInterface.cpp:537
 msgid "Homeless"
 msgstr "Sem casa"
 
-#: src/lincity-ng/MpsInterface.cpp:535
+#: src/lincity-ng/MpsInterface.cpp:538
 msgid "Shanties"
 msgstr "Favelados"
 
-#: src/lincity-ng/MpsInterface.cpp:536
+#: src/lincity-ng/MpsInterface.cpp:539
 msgid "Unn Dths"
 msgstr "Unn Dths"
 
-#: src/lincity-ng/MpsInterface.cpp:537
+#: src/lincity-ng/MpsInterface.cpp:540
 msgid "Unemployment"
 msgstr "Desempregados"
 
-#: src/lincity-ng/MpsInterface.cpp:538
+#: src/lincity-ng/MpsInterface.cpp:541
 msgid "Claims"
 msgstr "Reclama????es"
 
-#: src/lincity-ng/MpsInterface.cpp:539 src/lincity-ng/MpsInterface.cpp:544
+#: src/lincity-ng/MpsInterface.cpp:542 src/lincity-ng/MpsInterface.cpp:547
 msgid "Rate"
 msgstr "Taxa"
 
-#: src/lincity-ng/MpsInterface.cpp:541
+#: src/lincity-ng/MpsInterface.cpp:544
 msgid "Starvation"
 msgstr "Fome"
 
-#: src/lincity-ng/MpsInterface.cpp:542
+#: src/lincity-ng/MpsInterface.cpp:545
 msgid "Cases"
 msgstr "Acontecimentos"
 
-#: src/lincity-ng/ButtonPanel.cpp:198
+#: src/lincity-ng/ButtonPanel.cpp:200
 msgid "Query Tool"
 msgstr "Ferr. de Pesquisa"
 
-#: src/lincity-ng/ButtonPanel.cpp:199
+#: src/lincity-ng/ButtonPanel.cpp:201
 msgid "Bulldozer"
 msgstr "Niveladora"
 
-#: src/lincity-ng/ButtonPanel.cpp:201
+#: src/lincity-ng/ButtonPanel.cpp:203
 msgid "Residential: 50 denizens, low birthrate, high deathrate"
 msgstr ""
 "Residencial: 50 habitantes, baixo ??ndice de natalidade, alta mortalidade"
 
-#: src/lincity-ng/ButtonPanel.cpp:202
+#: src/lincity-ng/ButtonPanel.cpp:204
 msgid "Residential: 100 denizens, high birthrate, low deathrate"
 msgstr ""
 "Residencial: 100 habitantes, alto ??ndice de natalidade, baixa mortalidade"
 
-#: src/lincity-ng/ButtonPanel.cpp:203
+#: src/lincity-ng/ButtonPanel.cpp:205
 msgid "Residential: 200 denizens, high birthrate, high deathrate"
 msgstr ""
 "Residencial: 200 habitantes, alto ??ndice de natalidade, alta mortalidade"
 
-#: src/lincity-ng/ButtonPanel.cpp:204
+#: src/lincity-ng/ButtonPanel.cpp:206
 msgid "Residential: 100 denizens, low birthrate, high deathrate"
 msgstr ""
 "Residencial: 100 habitantes, baixo ??ndice de natalidade, alta mortalidade"
 
-#: src/lincity-ng/ButtonPanel.cpp:205
+#: src/lincity-ng/ButtonPanel.cpp:207
 msgid "Residential: 200 denizens, high birthrate, low deathrate"
 msgstr ""
 "Residencial: 200 habitantes, alto ??ndice de natalidade, baixa mortalidade"
 
-#: src/lincity-ng/ButtonPanel.cpp:206
+#: src/lincity-ng/ButtonPanel.cpp:208
 msgid "Residential: 400 denizens, high birthrate, high deathrate"
 msgstr ""
 "Residencial: 400 habitantes, alto ??ndice de natalidade, alta mortalidade"
 
-#: src/lincity-ng/ButtonPanel.cpp:215
+#: src/lincity-ng/ButtonPanel.cpp:217
 msgid " [Click right for help.]"
 msgstr " [Clique com o bot??o direito para ajuda]"
 
-#: src/lincity-ng/ButtonPanel.cpp:243 src/lincity-ng/ButtonPanel.cpp:277
+#: src/lincity-ng/ButtonPanel.cpp:245 src/lincity-ng/ButtonPanel.cpp:288
 #, c-format
 msgid "%s (Techlevel %.1f required.)"
 msgstr "%s (N??vel Tecno. %.1f requerido.)"
 
-#: src/lincity-ng/ButtonPanel.cpp:252
+#: src/lincity-ng/ButtonPanel.cpp:254
 #, c-format
 msgid "%s is disabled (loaded old game)."
 msgstr ""
 
-#: src/lincity-ng/EconomyGraph.cpp:123
+#: src/lincity-ng/EconomyGraph.cpp:124
 msgid "Mining"
 msgstr "Minera????o"
 
-#: src/lincity-ng/EconomyGraph.cpp:125
+#: src/lincity-ng/EconomyGraph.cpp:126
 msgid "Trade"
 msgstr "Com??rcio"
 
-#: src/lincity-ng/EconomyGraph.cpp:127
+#: src/lincity-ng/EconomyGraph.cpp:128
 msgid "Money"
 msgstr "Dinheiro"
 
-#: src/lincity-ng/EconomyGraph.cpp:129
+#: src/lincity-ng/EconomyGraph.cpp:130
 msgid "Popul."
 msgstr "Popul."
 
-#: src/lincity-ng/EconomyGraph.cpp:131
+#: src/lincity-ng/EconomyGraph.cpp:132
 msgid "Techn."
 msgstr "Tecn."
 
-#: src/lincity-ng/EconomyGraph.cpp:136
+#: src/lincity-ng/EconomyGraph.cpp:137
 msgid "Economy Overview:"
 msgstr "Vis??o Econ??mica:"
 
-#: src/lincity-ng/EconomyGraph.cpp:139
+#: src/lincity-ng/EconomyGraph.cpp:140
 msgid "Sustainability:"
 msgstr "Sustentabilidade:"
 
-#: src/lincity-ng/EconomyGraph.cpp:142
+#: src/lincity-ng/EconomyGraph.cpp:143
 msgid "Frames per Second:"
 msgstr "Quadros por Segundo:"
 
-#: src/lincity-ng/EconomyGraph.cpp:218
+#: src/lincity-ng/EconomyGraph.cpp:219
 msgid "You lose."
 msgstr "Voc?? perdeu."

Modified: trunk/data/locale/ru.po
===================================================================
--- trunk/data/locale/ru.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/ru.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -6,7 +6,7 @@
 msgstr ""
 "Project-Id-Version: ru\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-07-30 01:55+0400\n"
+"POT-Creation-Date: 2007-12-04 00:29+0100\n"
 "PO-Revision-Date: 2007-08-01 05:30-0000\n"
 "Last-Translator: ASM <asm at asm.pp.ru>\n"
 "Language-Team: ASM <asm at asm.pp.ru>\n"
@@ -14,515 +14,504 @@
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
 
-#: src/lincity/fileutil.cpp:292 src/lincity/fileutil.cpp:341
-msgid "Error. Can't find LINCITY_HOME"
-msgstr "????????????, ???? ???????? ?????????? LINCITY_HOME"
-
-#: src/lincity/fileutil.cpp:561
-msgid "Error verifying package. Can't find colour.pal."
-msgstr ""
-"???????????????? ???????????? ???? ????????????. ???? ???????? ?????????? "
-"colour.pal"
-
-#: src/lincity/fileutil.cpp:580
-#, c-format
-msgid "Couldn't create the save directory '%s'\n"
-msgstr ""
-"???? ???????? ?????????????? ???????????????????? ?????? "
-"???????????????????? '%s'\n"
-
-#: src/lincity/fileutil.cpp:635
-#, c-format
-msgid "Out of memory: malloc failure\n"
-msgstr "?????????????????????? ???????????? ???? ??????????????!!!\n"
-
-#: src/lincity/power.cpp:97
-msgid "You have too many power grids. Join some of them"
-msgstr ""
-"?????????????? ?????????? ????????????????. ???????????????????????? ?? "
-"??????????????????????????"
-
-#: src/lincity/engine.cpp:198
+#: src/lincity/engine.cpp:120
 msgid ""
 "ERROR: group does not exist. This should not happen! Please consider filling "
 "a bug report to lincity-ng team, with the saved game and what you did :-) "
 msgstr ""
-"????????????: ???????????? ???? ????????????????????. ?????? ???? "
-"??????????????! ???????????????????? ???????????????? ?????????? ???? "
-"????????????, ?? ?????????????????????? ?????????? ?? ????????????????, "
-"?????? ???? ?????????????? :-D "
+"????????????: ???????????? ???? ????????????????????. ?????? ???? ??????????????! ???????????????????? ???????????????? ?????????? ???? "
+"????????????, ?? ?????????????????????? ?????????? ?? ????????????????, ?????? ???? ?????????????? :-D "
 
-#: src/lincity/engine.cpp:226
+#: src/lincity/engine.cpp:152
 msgid "Port must be connected to river all along right side."
-msgstr ""
-"?????????? ???????????? ?????????????????????? ?? ??????????, ?????????????? "
-"?????????????????? ????????????"
+msgstr "?????????? ???????????? ?????????????????????? ?? ??????????, ?????????????? ?????????????????? ????????????"
 
-#: src/lincity/engine.cpp:236 src/lincity/engine.cpp:246
+#: src/lincity/engine.cpp:161 src/lincity/engine.cpp:170
 msgid "Too many substations + windmills. You cannot build one more"
 msgstr ""
-"?????????????? ?????????? ???????????????????? ?? ???????????????? "
-"??????????????. ???? ???? ???????????? ???? ???????????? ??????????????"
+"?????????????? ?????????? ???????????????????? ?? ???????????????? ??????????????. ???? ???? ???????????? ???? ???????????? ??????????????"
 
-#: src/lincity/engine.cpp:280
+#: src/lincity/engine.cpp:200
 msgid "Too many markets. You cannot build one more"
-msgstr ""
-"?????????????? ?????????? ??????????????????. ???????????? ?????????????? "
-"????????????"
+msgstr "?????????????? ?????????? ??????????????????. ???????????? ?????????????? ????????????"
 
-#: src/lincity/engine.cpp:305
+#: src/lincity/engine.cpp:223
 msgid "You can't build a tip here: this area was once a landfill"
-msgstr ""
-"???? ???? ???????????? ?????????????? ????????????: ?????????? ???????????? "
-"??????????????"
+msgstr "???? ???? ???????????? ?????????????? ????????????: ?????????? ???????????? ??????????????"
 
-#: src/lincity/engine.cpp:330
+#: src/lincity/engine.cpp:248
 msgid "You can't build a mine here: This area was once a landfill"
-msgstr ""
-"???? ???? ???????????? ?????????????????? ?????????? ??????????: ?????????? "
-"???????????? ????????????"
+msgstr "???? ???? ???????????? ?????????????????? ?????????? ??????????: ?????????? ???????????? ????????????"
 
-#: src/lincity/engine.cpp:335
+#: src/lincity/engine.cpp:252
 msgid "You can't build a mine here: there is no ore left at this site"
-msgstr ""
-"???????????? ?????????????????? ?????????? ??????????: ???????? ?????? "
-"??????????????????????"
+msgstr "???????????? ?????????????????? ?????????? ??????????: ???????? ?????? ??????????????????????"
 
-#: src/lincity/engine.cpp:259
+#: src/lincity/engine.cpp:264
 msgid "You can't build a water well here: it is all desert."
 msgstr ""
 
-#: src/lincity/engine.cpp:269
+#: src/lincity/engine.cpp:274
 msgid "You can't build a park here: it is a desert, parks need water"
 msgstr ""
 
-#: src/lincity/engine.cpp:691
+#: src/lincity/engine.cpp:485
 msgid "It's at a power line."
 msgstr "?????? ????????????????????????."
 
-#: src/lincity/engine.cpp:693
+#: src/lincity/engine.cpp:487
 msgid "It's at a solar power station."
 msgstr "?????? ?????????????????? ????????????????????????????."
 
-#: src/lincity/engine.cpp:695
+#: src/lincity/engine.cpp:489
 msgid "It's at a substation."
 msgstr "?????? ????????????????????."
 
-#: src/lincity/engine.cpp:697
+#: src/lincity/engine.cpp:491
 msgid "It's at a residential area."
 msgstr "?????? ????????????????????."
 
-#: src/lincity/engine.cpp:699
+#: src/lincity/engine.cpp:493
 msgid "It's at a farm."
 msgstr "?????? ??????????."
 
-#: src/lincity/engine.cpp:701
+#: src/lincity/engine.cpp:495
 msgid "It's at a market."
 msgstr "?????? ??????????????."
 
-#: src/lincity/engine.cpp:703
+#: src/lincity/engine.cpp:497
 msgid "It's at a track."
 msgstr "?????? ??????????????????."
 
-#: src/lincity/engine.cpp:705
+#: src/lincity/engine.cpp:499
 msgid "It's at a coal mine."
 msgstr "?????? ???????????????? ????????????."
 
-#: src/lincity/engine.cpp:707
+#: src/lincity/engine.cpp:501
 msgid "It's at a railway."
 msgstr "?????? ???????????????? ????????????."
 
-#: src/lincity/engine.cpp:709
+#: src/lincity/engine.cpp:503
 msgid "It's at a coal power station."
 msgstr "?????? ???????????????? ????????????????????????????."
 
-#: src/lincity/engine.cpp:711
+#: src/lincity/engine.cpp:505
 msgid "It's at a road."
 msgstr "?????? ????????????."
 
-#: src/lincity/engine.cpp:713
+#: src/lincity/engine.cpp:507
 msgid "It's at light industry."
 msgstr "?????? ???????????? ??????????????????."
 
-#: src/lincity/engine.cpp:715
+#: src/lincity/engine.cpp:509
 msgid "It's at a university."
 msgstr "?????? ??????????????????????."
 
-#: src/lincity/engine.cpp:717
+#: src/lincity/engine.cpp:511
 msgid "It's at a commune."
 msgstr "?????? ??????????????."
 
-#: src/lincity/engine.cpp:719
+#: src/lincity/engine.cpp:513
 msgid "It's at a tip."
 msgstr "?????? ??????????????."
 
-#: src/lincity/engine.cpp:721
+#: src/lincity/engine.cpp:515
 msgid "It's at a port."
 msgstr "?????? ????????."
 
-#: src/lincity/engine.cpp:723
+#: src/lincity/engine.cpp:517
 msgid "It's at a steel works."
 msgstr "?????? ?????????????? ??????????????????."
 
-#: src/lincity/engine.cpp:725
+#: src/lincity/engine.cpp:519
 msgid "It's at a recycle centre."
 msgstr "?????? ?????????? ??????????????????????."
 
-#: src/lincity/engine.cpp:727
+#: src/lincity/engine.cpp:521
 msgid "It's at a health centre."
 msgstr "?????? ????????????????."
 
-#: src/lincity/engine.cpp:729
+#: src/lincity/engine.cpp:523
 msgid "It's at a rocket site."
 msgstr "?????? ???????????????? ????????????????."
 
-#: src/lincity/engine.cpp:731
+#: src/lincity/engine.cpp:525
 msgid "It's at a windmill."
 msgstr "?????? ???????????????? ????????????????."
 
-#: src/lincity/engine.cpp:733
+#: src/lincity/engine.cpp:527
 msgid "It's at a school."
 msgstr "?????? ??????????."
 
-#: src/lincity/engine.cpp:735
+#: src/lincity/engine.cpp:529
 msgid "It's at a blacksmith."
 msgstr "?????? ??????????????. "
 
-#: src/lincity/engine.cpp:737
+#: src/lincity/engine.cpp:531
 msgid "It's at a mill."
 msgstr "?????? ????????????????."
 
-#: src/lincity/engine.cpp:739
+#: src/lincity/engine.cpp:533
 msgid "It's at a pottery."
 msgstr "?????? ??????????????????."
 
-#: src/lincity/engine.cpp:741
+#: src/lincity/engine.cpp:535
 msgid "It's at a fire station!!!."
 msgstr "?????? ???????????????? ??????????????."
 
-#: src/lincity/engine.cpp:743
+#: src/lincity/engine.cpp:537
 msgid "It's at a sports field!!!."
 msgstr "?????? ???????????????????? ????????."
 
-#: src/lincity/engine.cpp:745
+#: src/lincity/engine.cpp:539
 msgid "It's at a shanty town."
 msgstr "?????? ???????????????? ??????????????????."
 
-#: src/lincity/engine.cpp:747
+#: src/lincity/engine.cpp:541
 msgid "UNKNOWN!"
 msgstr "???? ????????????????!! "
 
-#: src/lincity/lintypes.cpp:22
+#: src/lincity/lintypes.cpp:20
 msgid "Empty"
 msgstr "??????????"
 
-#: src/lincity/lintypes.cpp:34
+#: src/lincity/lintypes.cpp:32
 msgid "Power line"
 msgstr "????????????????????????"
 
-#: src/lincity/lintypes.cpp:46
+#: src/lincity/lintypes.cpp:43
 msgid "Solar PS"
 msgstr "?????????????????? ????"
 
-#: src/lincity/lintypes.cpp:58 src/lincity/modules/substation.cpp:91
+#: src/lincity/lintypes.cpp:54 src/lincity/modules/substation.cpp:93
 msgid "Substation"
 msgstr "????????????????????"
 
-#: src/lincity/lintypes.cpp:70
+#: src/lincity/lintypes.cpp:65
 msgid "Residential LL"
 msgstr "???????????????????? ????"
 
-#: src/lincity/lintypes.cpp:82
+#: src/lincity/lintypes.cpp:76
 msgid "Farm"
 msgstr "??????????"
 
-#: src/lincity/lintypes.cpp:94 src/lincity/modules/market.cpp:1143
-#: src/lincity-ng/Dialog.cpp:486
+#: src/lincity/lintypes.cpp:87 src/lincity/modules/market.cpp:979
+#: src/lincity-ng/Dialog.cpp:507
 msgid "Market"
 msgstr "??????????????"
 
-#: src/lincity/lintypes.cpp:106 src/lincity/modules/track.cpp:38
+#: src/lincity/lintypes.cpp:98 src/lincity/modules/track.cpp:34
 msgid "Track"
 msgstr "??????????????????"
 
-#: src/lincity/lintypes.cpp:118
+#: src/lincity/lintypes.cpp:109
 msgid "Coalmine"
 msgstr "???????????????? ??????????"
 
-#: src/lincity/lintypes.cpp:130
+#: src/lincity/lintypes.cpp:120
 msgid "Railway"
 msgstr "????????????"
 
-#: src/lincity/lintypes.cpp:142
+#: src/lincity/lintypes.cpp:131
 msgid "Coal PS"
 msgstr "???????????????? ????"
 
-#: src/lincity/lintypes.cpp:154 src/lincity/modules/road.cpp:47
+#: src/lincity/lintypes.cpp:142 src/lincity/modules/road.cpp:43
 msgid "Road"
 msgstr "????????????"
 
-#: src/lincity/lintypes.cpp:166
+#: src/lincity/lintypes.cpp:153
 msgid "Lt. Industry"
 msgstr "??????. ??????????????????"
 
-#: src/lincity/lintypes.cpp:178 src/lincity/modules/university.cpp:67
+#: src/lincity/lintypes.cpp:164 src/lincity/modules/university.cpp:59
 msgid "University"
 msgstr "??????????????????????"
 
-#: src/lincity/lintypes.cpp:190 src/lincity/modules/commune.cpp:142
+#: src/lincity/lintypes.cpp:175 src/lincity/modules/commune.cpp:172
 msgid "Commune"
 msgstr "??????????????"
 
-#: src/lincity/lintypes.cpp:202
+#: src/lincity/lintypes.cpp:186
 msgid "Ore mine"
 msgstr "?????????? ????????"
 
-#: src/lincity/lintypes.cpp:214
+#: src/lincity/lintypes.cpp:197
 msgid "Rubbish tip"
 msgstr "??????????????"
 
-#: src/lincity/lintypes.cpp:226 src/lincity/modules/port.cpp:202
-#: src/lincity-ng/Dialog.cpp:540
+#: src/lincity/lintypes.cpp:208 src/lincity/modules/port.cpp:281
+#: src/lincity-ng/Dialog.cpp:561
 msgid "Port"
 msgstr "????????"
 
-#: src/lincity/lintypes.cpp:238
+#: src/lincity/lintypes.cpp:219
 msgid "Hv. Industry"
 msgstr "??????. ??????????????????"
 
-#: src/lincity/lintypes.cpp:250
+#: src/lincity/lintypes.cpp:230
 msgid "Park"
 msgstr "????????"
 
-#: src/lincity/lintypes.cpp:262 src/lincity-ng/MpsInterface.cpp:516
+#: src/lincity/lintypes.cpp:241 src/lincity-ng/MpsInterface.cpp:519
 msgid "Recycle"
 msgstr "??????????????"
 
-#: src/lincity/lintypes.cpp:274 src/lincity/modules/water.cpp:19
+#: src/lincity/lintypes.cpp:252 src/lincity/modules/water.cpp:17
+#: src/lincity/modules/residence.cpp:264
 msgid "Water"
 msgstr "????????"
 
-#: src/lincity/lintypes.cpp:286
+#: src/lincity/lintypes.cpp:263
 msgid "Health centre"
 msgstr "?????? ??????????"
 
-#: src/lincity/lintypes.cpp:298
+#: src/lincity/lintypes.cpp:274
 msgid "Rocket pad"
 msgstr "???????????????? ??????????????????"
 
-#: src/lincity/lintypes.cpp:310 src/lincity/modules/windmill.cpp:73
-#: src/lincity-ng/MpsInterface.cpp:506
+#: src/lincity/lintypes.cpp:285 src/lincity/modules/windmill.cpp:75
+#: src/lincity-ng/MpsInterface.cpp:509
 msgid "Windmill"
 msgstr "???????????????? ????????????????"
 
-#: src/lincity/lintypes.cpp:322 src/lincity/modules/monument.cpp:57
+#: src/lincity/lintypes.cpp:296 src/lincity/modules/monument.cpp:51
 msgid "Monument"
 msgstr "????????????????"
 
-#: src/lincity/lintypes.cpp:334 src/lincity/modules/school.cpp:49
+#: src/lincity/lintypes.cpp:307 src/lincity/modules/school.cpp:43
 msgid "School"
 msgstr "??????????"
 
-#: src/lincity/lintypes.cpp:346 src/lincity/modules/blacksmith.cpp:97
+#: src/lincity/lintypes.cpp:318 src/lincity/modules/blacksmith.cpp:90
 msgid "Blacksmith"
 msgstr "?????????????? "
 
-#: src/lincity/lintypes.cpp:358
+#: src/lincity/lintypes.cpp:329
 msgid "Mill"
 msgstr "????????????????"
 
-#: src/lincity/lintypes.cpp:370 src/lincity/modules/pottery.cpp:119
+#: src/lincity/lintypes.cpp:340 src/lincity/modules/pottery.cpp:104
 msgid "Pottery"
 msgstr "?????????????????? ??????????????"
 
-#: src/lincity/lintypes.cpp:382
+#: src/lincity/lintypes.cpp:351
 msgid "Fire sta'n"
 msgstr "???????????????? ??????????????"
 
-#: src/lincity/lintypes.cpp:394 src/lincity/modules/cricket.cpp:99
+#: src/lincity/lintypes.cpp:362 src/lincity/modules/cricket.cpp:91
 msgid "Sports field"
 msgstr "?????????? ????????????????"
 
-#: src/lincity/lintypes.cpp:407
+#: src/lincity/lintypes.cpp:374
 msgid "Burnt"
 msgstr "??????????"
 
-#: src/lincity/lintypes.cpp:420
+#: src/lincity/lintypes.cpp:386
 msgid "Shanty town"
 msgstr "?????????????? "
 
-#: src/lincity/lintypes.cpp:433 src/lincity/modules/residence.cpp:292
-#: src/lincity-ng/MpsInterface.cpp:380 src/lincity-ng/EconomyGraph.cpp:131
+#: src/lincity/lintypes.cpp:398 src/lincity/modules/residence.cpp:283
+#: src/lincity-ng/MpsInterface.cpp:383 src/lincity-ng/EconomyGraph.cpp:134
 msgid "Fire"
 msgstr "??????????"
 
-#: src/lincity/lintypes.cpp:446
+#: src/lincity/lintypes.cpp:410
 msgid "Used"
 msgstr "????????????????????????"
 
-#: src/lincity/lintypes.cpp:458
+#: src/lincity/lintypes.cpp:421
 msgid "Residential ML"
 msgstr "???????????????????? ????"
 
-#: src/lincity/lintypes.cpp:470
+#: src/lincity/lintypes.cpp:432
 msgid "Residential HL"
 msgstr "???????????????????? ????"
 
-#: src/lincity/lintypes.cpp:482
+#: src/lincity/lintypes.cpp:443
 msgid "Residential LH"
 msgstr "???????????????????? ????"
 
-#: src/lincity/lintypes.cpp:494
+#: src/lincity/lintypes.cpp:454
 msgid "Residential MH"
 msgstr "???????????????????? ????"
 
-#: src/lincity/lintypes.cpp:506
+#: src/lincity/lintypes.cpp:465
 msgid "Residential HH"
 msgstr "???????????????????? ????"
 
-#: src/lincity/lintypes.cpp:477
+#: src/lincity/lintypes.cpp:476
 msgid "Water well"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:489
+#: src/lincity/lintypes.cpp:488
 msgid "Desert"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:501
+#: src/lincity/lintypes.cpp:500
 msgid "Tree"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:514
+#: src/lincity/lintypes.cpp:513
 msgid "Trees"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:527
+#: src/lincity/lintypes.cpp:526
 msgid "Forest"
 msgstr ""
 
-#: src/lincity/ldsvguts.cpp:128
+#: src/lincity/ldsvguts.cpp:137
 #, c-format
 msgid "Save file <%s> - "
 msgstr "?????????????????? ?? <%s> - "
 
-#: src/lincity/ldsvguts.cpp:129
+#: src/lincity/ldsvguts.cpp:138
 msgid "Can't open save file!"
 msgstr "???? ???????? ?????????????? ????????"
 
-#: src/lincity/ldsvguts.cpp:134
+#: src/lincity/ldsvguts.cpp:148
 msgid "Saving scene"
 msgstr "???????????????????? ??????????????????"
 
-#: src/lincity/ldsvguts.cpp:334
+#: src/lincity/ldsvguts.cpp:362
 #, c-format
 msgid "Can't open <%s> (gzipped)"
 msgstr "???? ???????? ?????????????? <%s> (???????? gzip)"
 
-#: src/lincity/ldsvguts.cpp:352
+#: src/lincity/ldsvguts.cpp:395
 msgid "Loading scene"
 msgstr "???????????????? ?????????????????? "
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/fileutil.cpp:266 src/lincity/fileutil.cpp:310
+msgid "Error. Can't find LINCITY_HOME"
+msgstr "????????????, ???? ???????? ?????????? LINCITY_HOME"
+
+#: src/lincity/fileutil.cpp:512
+msgid "Error verifying package. Can't find colour.pal."
+msgstr "???????????????? ???????????? ???? ????????????. ???? ???????? ?????????? colour.pal"
+
+#: src/lincity/fileutil.cpp:525 src/lincity/fileutil.cpp:533
+#, c-format
+msgid "Couldn't create the save directory '%s'\n"
+msgstr "???? ???????? ?????????????? ???????????????????? ?????? ???????????????????? '%s'\n"
+
+#: src/lincity/fileutil.cpp:550
+#, c-format
+msgid "Out of memory: malloc failure\n"
+msgstr "?????????????????????? ???????????? ???? ??????????????!!!\n"
+
+#: src/lincity/simulate.cpp:97
+msgid ""
+"Upgrading from old game. You have 10 years to build water wells where "
+"needed. After, starvation will occur!  You should check starvation minimap, "
+"and read waterwell help page :-)"
+msgstr ""
+
+#: src/lincity/lclib.cpp:15
 msgid "Jan"
 msgstr "??????"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Feb"
 msgstr "??????"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Mar"
 msgstr "??????"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Apr"
 msgstr "??????"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "May"
 msgstr "??????"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jun"
 msgstr "????????"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jul"
 msgstr "????????"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Aug"
 msgstr "??????"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Sep"
 msgstr "??????"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Oct"
 msgstr "??????"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Nov"
 msgstr "??????"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Dec"
 msgstr "??????"
 
-#: src/lincity/modules/health_centre.cpp:66
+#: src/lincity/power.cpp:102
+msgid "You have too many power grids. Join some of them"
+msgstr "?????????????? ?????????? ????????????????. ???????????????????????? ?? ??????????????????????????"
+
+#: src/lincity/modules/health_centre.cpp:58
 msgid "Health Centre"
 msgstr "???????????????? "
 
-#: src/lincity/modules/health_centre.cpp:68
-#: src/lincity/modules/rocket_pad.cpp:169 src/lincity/modules/recycle.cpp:181
-#: src/lincity/modules/mill.cpp:107 src/lincity/modules/university.cpp:74
-#: src/lincity/modules/cricket.cpp:101 src/lincity/modules/pottery.cpp:123
-#: src/lincity/modules/blacksmith.cpp:102 src/lincity/modules/school.cpp:54
-#: src/lincity/modules/firestation.cpp:121
+#: src/lincity/modules/health_centre.cpp:60
+#: src/lincity/modules/rocket_pad.cpp:198 src/lincity/modules/recycle.cpp:148
+#: src/lincity/modules/mill.cpp:92 src/lincity/modules/university.cpp:65
+#: src/lincity/modules/cricket.cpp:93 src/lincity/modules/pottery.cpp:108
+#: src/lincity/modules/blacksmith.cpp:95 src/lincity/modules/school.cpp:48
+#: src/lincity/modules/firestation.cpp:110
 msgid "Inventory"
 msgstr "??????????????????"
 
-#: src/lincity/modules/health_centre.cpp:69
-#: src/lincity/modules/rocket_pad.cpp:170 src/lincity/modules/market.cpp:1149
-#: src/lincity/modules/road.cpp:52 src/lincity/modules/rail.cpp:55
-#: src/lincity/modules/coal_power.cpp:105
-#: src/lincity/modules/university.cpp:75 src/lincity/modules/cricket.cpp:102
-#: src/lincity/modules/track.cpp:43 src/lincity/modules/pottery.cpp:124
-#: src/lincity/modules/school.cpp:55 src/lincity/modules/firestation.cpp:122
+#: src/lincity/modules/health_centre.cpp:61
+#: src/lincity/modules/rocket_pad.cpp:199 src/lincity/modules/market.cpp:984
+#: src/lincity/modules/road.cpp:47 src/lincity/modules/rail.cpp:51
+#: src/lincity/modules/coal_power.cpp:97 src/lincity/modules/university.cpp:66
+#: src/lincity/modules/cricket.cpp:94 src/lincity/modules/track.cpp:38
+#: src/lincity/modules/pottery.cpp:109 src/lincity/modules/school.cpp:49
+#: src/lincity/modules/firestation.cpp:111
 msgid "Jobs"
 msgstr "????????????"
 
-#: src/lincity/modules/health_centre.cpp:71
-#: src/lincity/modules/rocket_pad.cpp:172 src/lincity/modules/market.cpp:1153
-#: src/lincity/modules/port.cpp:219 src/lincity/modules/road.cpp:56
-#: src/lincity/modules/rail.cpp:59 src/lincity/modules/mill.cpp:108
-#: src/lincity/modules/university.cpp:77 src/lincity/modules/cricket.cpp:104
-#: src/lincity/modules/track.cpp:47 src/lincity/modules/pottery.cpp:126
-#: src/lincity/modules/blacksmith.cpp:103 src/lincity/modules/school.cpp:57
-#: src/lincity/modules/firestation.cpp:124 src/lincity-ng/MpsInterface.cpp:448
+#: src/lincity/modules/health_centre.cpp:62
+#: src/lincity/modules/rocket_pad.cpp:200 src/lincity/modules/market.cpp:986
+#: src/lincity/modules/port.cpp:298 src/lincity/modules/road.cpp:49
+#: src/lincity/modules/rail.cpp:53 src/lincity/modules/mill.cpp:93
+#: src/lincity/modules/university.cpp:67 src/lincity/modules/cricket.cpp:95
+#: src/lincity/modules/track.cpp:40 src/lincity/modules/pottery.cpp:110
+#: src/lincity/modules/blacksmith.cpp:96 src/lincity/modules/school.cpp:50
+#: src/lincity/modules/firestation.cpp:112 src/lincity-ng/MpsInterface.cpp:451
 msgid "Goods"
 msgstr "????????????"
 
-#: src/lincity/modules/rocket_pad.cpp:163
+#: src/lincity/modules/rocket_pad.cpp:192
 msgid "Rocket Pad"
 msgstr "???????????????? ???????????????? "
 
-#: src/lincity/modules/rocket_pad.cpp:166
+#: src/lincity/modules/rocket_pad.cpp:195
 msgid "Completion"
 msgstr "??????????????????"
 
-#: src/lincity/modules/rocket_pad.cpp:174 src/lincity/modules/market.cpp:1157
-#: src/lincity/modules/port.cpp:223 src/lincity/modules/road.cpp:60
-#: src/lincity/modules/rail.cpp:63 src/lincity/modules/light_industry.cpp:368
-#: src/lincity/modules/commune.cpp:152 src/lincity/modules/track.cpp:51
+#: src/lincity/modules/rocket_pad.cpp:201 src/lincity/modules/market.cpp:988
+#: src/lincity/modules/port.cpp:302 src/lincity/modules/road.cpp:51
+#: src/lincity/modules/rail.cpp:55 src/lincity/modules/light_industry.cpp:288
+#: src/lincity/modules/commune.cpp:182 src/lincity/modules/track.cpp:42
 msgid "Steel"
 msgstr "??????????"
 
-#: src/lincity/modules/windmill.cpp:77 src/lincity/modules/windmill.cpp:88
-#: src/lincity/modules/recycle.cpp:178 src/lincity/modules/coal_power.cpp:107
-#: src/lincity/modules/organic_farm.cpp:196
-#: src/lincity/modules/solar_power.cpp:58
+#: src/lincity/modules/windmill.cpp:76 src/lincity/modules/recycle.cpp:146
+#: src/lincity/modules/coal_power.cpp:98
+#: src/lincity/modules/organic_farm.cpp:230
+#: src/lincity/modules/solar_power.cpp:60
 msgid "Tech"
 msgstr "??????????"
 
@@ -534,825 +523,787 @@
 msgid "Prod."
 msgstr "????????."
 
-#: src/lincity/modules/windmill.cpp:86 src/lincity/modules/windmill.cpp:101
-#: src/lincity/modules/substation.cpp:108
+#: src/lincity/modules/windmill.cpp:86 src/lincity/modules/windmill.cpp:99
+#: src/lincity/modules/substation.cpp:110
 msgid "Demand"
 msgstr "??????????????????????"
 
-#: src/lincity/modules/windmill.cpp:92 src/lincity/modules/substation.cpp:99
+#: src/lincity/modules/windmill.cpp:90 src/lincity/modules/substation.cpp:101
 msgid "Grid Status"
 msgstr "????????????????????????"
 
-#: src/lincity/modules/windmill.cpp:97 src/lincity/modules/substation.cpp:107
-#: src/lincity/modules/windmill.cpp:95 src/lincity/modules/substation.cpp:102
+#: src/lincity/modules/windmill.cpp:93 src/lincity/modules/substation.cpp:104
 msgid "T. Cap."
 msgstr ""
 
-#: src/lincity/modules/windmill.cpp:100 src/lincity/modules/substation.cpp:110
-#: src/lincity/modules/windmill.cpp:98 src/lincity/modules/substation.cpp:105
+#: src/lincity/modules/windmill.cpp:96 src/lincity/modules/substation.cpp:107
 msgid "A. Cap."
 msgstr ""
 
-#: src/lincity/modules/windmill.cpp:104 src/lincity/modules/coal_power.cpp:109
-#: src/lincity/modules/substation.cpp:111
-#: src/lincity/modules/power_line.cpp:53
-#: src/lincity/modules/solar_power.cpp:60
+#: src/lincity/modules/windmill.cpp:102 src/lincity/modules/coal_power.cpp:99
+#: src/lincity/modules/substation.cpp:113
+#: src/lincity/modules/power_line.cpp:49
+#: src/lincity/modules/solar_power.cpp:61
 msgid "Grid ID"
 msgstr "???????????? ID"
 
-#: src/lincity/modules/water.cpp:22 src/lincity/modules/commune.cpp:147
-#: src/lincity/modules/commune.cpp:149 src/lincity/modules/commune.cpp:151
-#: src/lincity/modules/commune.cpp:153 src/lincity-ng/MpsInterface.cpp:379
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/waterwell.cpp:50
+#: src/lincity/modules/commune.cpp:177 src/lincity/modules/commune.cpp:179
+#: src/lincity/modules/commune.cpp:181 src/lincity/modules/commune.cpp:183
 #: src/lincity-ng/MpsInterface.cpp:382 src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity-ng/MpsInterface.cpp:388
 msgid "Yes"
 msgstr "????"
 
-#: src/lincity/modules/water.cpp:22 src/lincity/modules/commune.cpp:147
-#: src/lincity/modules/commune.cpp:149 src/lincity/modules/commune.cpp:151
-#: src/lincity/modules/commune.cpp:153 src/lincity-ng/MpsInterface.cpp:379
-#: src/lincity-ng/MpsInterface.cpp:382 src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/commune.cpp:177
+#: src/lincity/modules/commune.cpp:179 src/lincity/modules/commune.cpp:181
+#: src/lincity/modules/commune.cpp:183 src/lincity-ng/MpsInterface.cpp:382
+#: src/lincity-ng/MpsInterface.cpp:385 src/lincity-ng/MpsInterface.cpp:388
 msgid "No"
 msgstr "??????"
 
-#: src/lincity/modules/water.cpp:23
+#: src/lincity/modules/water.cpp:21
 msgid "Navigable"
 msgstr "??????????????????"
 
-#: src/lincity/modules/recycle.cpp:169
+#: src/lincity/modules/recycle.cpp:137
 msgid "Recycling"
 msgstr "??????????????????????"
 
-#: src/lincity/modules/recycle.cpp:170
+#: src/lincity/modules/recycle.cpp:138
 msgid "Center"
 msgstr "??????????"
 
-#: src/lincity/modules/recycle.cpp:173
-#: src/lincity/modules/heavy_industry.cpp:346 src/lincity/modules/mill.cpp:105
-#: src/lincity/modules/light_industry.cpp:370
-#: src/lincity/modules/university.cpp:79 src/lincity/modules/pottery.cpp:121
-#: src/lincity/modules/blacksmith.cpp:100 src/lincity/modules/school.cpp:60
+#: src/lincity/modules/recycle.cpp:141
+#: src/lincity/modules/heavy_industry.cpp:288 src/lincity/modules/mill.cpp:90
+#: src/lincity/modules/light_industry.cpp:289
+#: src/lincity/modules/university.cpp:68 src/lincity/modules/pottery.cpp:106
+#: src/lincity/modules/blacksmith.cpp:93 src/lincity/modules/school.cpp:52
 msgid "Capacity"
 msgstr "???????????? "
 
-#: src/lincity/modules/recycle.cpp:175 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
 #: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/residence.cpp:288 src/lincity/modules/residence.cpp:291
-#: src/lincity/modules/residence.cpp:294
-#: src/lincity/modules/light_industry.cpp:359
-#: src/lincity/modules/organic_farm.cpp:188
+#: src/lincity/modules/light_industry.cpp:281
+#: src/lincity/modules/organic_farm.cpp:223
 msgid "YES"
 msgstr "????"
 
-#: src/lincity/modules/recycle.cpp:175 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
 #: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/residence.cpp:288 src/lincity/modules/residence.cpp:291
-#: src/lincity/modules/residence.cpp:294
-#: src/lincity/modules/heavy_industry.cpp:334
-#: src/lincity/modules/light_industry.cpp:359
+#: src/lincity/modules/heavy_industry.cpp:279
+#: src/lincity/modules/light_industry.cpp:281
 msgid "NO"
 msgstr "??????"
 
-#: src/lincity/modules/recycle.cpp:176 src/lincity/modules/residence.cpp:280
-#: src/lincity/modules/heavy_industry.cpp:337
-#: src/lincity/modules/light_industry.cpp:360
-#: src/lincity/modules/organic_farm.cpp:193
+#: src/lincity/modules/recycle.cpp:144 src/lincity/modules/residence.cpp:271
+#: src/lincity/modules/heavy_industry.cpp:282
+#: src/lincity/modules/light_industry.cpp:282
+#: src/lincity/modules/organic_farm.cpp:227
 msgid "Power"
 msgstr "??????????????"
 
-#: src/lincity/modules/recycle.cpp:182
-#: src/lincity/modules/heavy_industry.cpp:342
-#: src/lincity/modules/market.cpp:1155 src/lincity/modules/port.cpp:215
-#: src/lincity/modules/road.cpp:58 src/lincity/modules/rail.cpp:61
-#: src/lincity/modules/light_industry.cpp:366
-#: src/lincity/modules/commune.cpp:150 src/lincity/modules/track.cpp:49
-#: src/lincity/modules/pottery.cpp:128
+#: src/lincity/modules/recycle.cpp:149
+#: src/lincity/modules/heavy_industry.cpp:286
+#: src/lincity/modules/market.cpp:987 src/lincity/modules/port.cpp:294
+#: src/lincity/modules/road.cpp:50 src/lincity/modules/rail.cpp:54
+#: src/lincity/modules/light_industry.cpp:287
+#: src/lincity/modules/commune.cpp:180 src/lincity/modules/track.cpp:41
+#: src/lincity/modules/pottery.cpp:111
 msgid "Ore"
 msgstr "????????"
 
-#: src/lincity/modules/recycle.cpp:184 src/lincity/modules/market.cpp:1159
-#: src/lincity/modules/road.cpp:62 src/lincity/modules/rail.cpp:65
-#: src/lincity/modules/commune.cpp:154 src/lincity/modules/track.cpp:53
+#: src/lincity/modules/recycle.cpp:150 src/lincity/modules/market.cpp:989
+#: src/lincity/modules/road.cpp:52 src/lincity/modules/rail.cpp:56
+#: src/lincity/modules/commune.cpp:184 src/lincity/modules/track.cpp:43
 msgid "Waste"
 msgstr "??????????"
 
-#: src/lincity/modules/coalmine.cpp:168
+#: src/lincity/modules/coalmine.cpp:132
 msgid "Coal Mine"
 msgstr "???????????????? ??????????"
 
-#: src/lincity/modules/coalmine.cpp:171 src/lincity/modules/oremine.cpp:187
+#: src/lincity/modules/coalmine.cpp:135 src/lincity/modules/oremine.cpp:144
 msgid "Stock"
 msgstr "???? ???????????? "
 
-#: src/lincity/modules/coalmine.cpp:175 src/lincity/modules/coalmine.cpp:177
-#: src/lincity/modules/oremine.cpp:191
+#: src/lincity/modules/coalmine.cpp:138 src/lincity/modules/coalmine.cpp:140
+#: src/lincity/modules/oremine.cpp:147
 msgid "Reserve"
 msgstr "??????????????"
 
-#: src/lincity/modules/coalmine.cpp:177
+#: src/lincity/modules/coalmine.cpp:140
 msgid "EMPTY"
 msgstr "??????????"
 
-#: src/lincity/modules/residence.cpp:273
+#: src/lincity/modules/residence.cpp:255
 msgid "Residence"
 msgstr "????????????????????"
 
-#: src/lincity/modules/residence.cpp:277
+#: src/lincity/modules/residence.cpp:259
 msgid "People"
 msgstr "??????????????"
 
-#: src/lincity/modules/residence.cpp:283
+#: src/lincity/modules/residence.cpp:268
 msgid "Fed"
 msgstr "??????????????"
 
-#: src/lincity/modules/residence.cpp:286
+#: src/lincity/modules/residence.cpp:274
 msgid "Employed"
 msgstr "?????????????????"
 
-#: src/lincity/modules/residence.cpp:299 src/lincity-ng/MpsInterface.cpp:393
+#: src/lincity/modules/residence.cpp:276 src/lincity-ng/MpsInterface.cpp:396
 msgid "good"
 msgstr "????????????"
 
-#: src/lincity/modules/residence.cpp:299
+#: src/lincity/modules/residence.cpp:276
 msgid "poor"
 msgstr "??????????"
 
-#: src/lincity/modules/residence.cpp:300
+#: src/lincity/modules/residence.cpp:277
 msgid "Job"
 msgstr "????????????"
 
-#: src/lincity/modules/residence.cpp:289
+#: src/lincity/modules/residence.cpp:280
 msgid "Health Cvr"
 msgstr "????????????????"
 
-#: src/lincity/modules/residence.cpp:295 src/lincity-ng/MpsInterface.cpp:386
-#: src/lincity-ng/MpsInterface.cpp:514
+#: src/lincity/modules/residence.cpp:286 src/lincity-ng/MpsInterface.cpp:389
+#: src/lincity-ng/MpsInterface.cpp:517
 msgid "Sport"
 msgstr "??????????"
 
-#: src/lincity/modules/residence.cpp:297 src/lincity-ng/MpsInterface.cpp:388
+#: src/lincity/modules/residence.cpp:288 src/lincity/modules/waterwell.cpp:47
+#: src/lincity-ng/MpsInterface.cpp:391
 msgid "Pollution"
 msgstr "??????????????????"
 
-#: src/lincity/modules/monument.cpp:63
+#: src/lincity/modules/monument.cpp:57
 msgid "Wisdom Bestowed"
 msgstr "???????????? ????????????????????????????"
 
-#: src/lincity/modules/monument.cpp:67
+#: src/lincity/modules/monument.cpp:61
 #, c-format
 msgid "% Complete"
 msgstr "% ??????????????????"
 
-#: src/lincity/modules/heavy_industry.cpp:323
+#: src/lincity/modules/waterwell.cpp:44
+msgid "Water_well"
+msgstr ""
+
+#: src/lincity/modules/waterwell.cpp:51
+msgid "Drinkable"
+msgstr ""
+
+#: src/lincity/modules/heavy_industry.cpp:268
 msgid "Heavy"
 msgstr "?????????????? "
 
-#: src/lincity/modules/heavy_industry.cpp:324
-#: src/lincity/modules/light_industry.cpp:355
+#: src/lincity/modules/heavy_industry.cpp:269
+#: src/lincity/modules/light_industry.cpp:277
 msgid "Industry"
 msgstr "??????????????????"
 
-#: src/lincity/modules/heavy_industry.cpp:329
-#: src/lincity/modules/heavy_industry.cpp:344
-#: src/lincity/modules/market.cpp:1151 src/lincity/modules/port.cpp:211
-#: src/lincity/modules/road.cpp:54 src/lincity/modules/rail.cpp:57
-#: src/lincity/modules/coal_power.cpp:89
-#: src/lincity/modules/coal_power.cpp:103 src/lincity/modules/mill.cpp:112
-#: src/lincity/modules/commune.cpp:148 src/lincity/modules/track.cpp:45
-#: src/lincity/modules/pottery.cpp:130 src/lincity/modules/blacksmith.cpp:105
-#: src/lincity-ng/MpsInterface.cpp:444
+#: src/lincity/modules/heavy_industry.cpp:274
+#: src/lincity/modules/heavy_industry.cpp:287
+#: src/lincity/modules/market.cpp:985 src/lincity/modules/port.cpp:290
+#: src/lincity/modules/road.cpp:48 src/lincity/modules/rail.cpp:52
+#: src/lincity/modules/coal_power.cpp:82 src/lincity/modules/coal_power.cpp:96
+#: src/lincity/modules/mill.cpp:95 src/lincity/modules/commune.cpp:178
+#: src/lincity/modules/track.cpp:39 src/lincity/modules/pottery.cpp:112
+#: src/lincity/modules/blacksmith.cpp:97 src/lincity-ng/MpsInterface.cpp:447
 msgid "Coal"
 msgstr "??????????"
 
-#: src/lincity/modules/heavy_industry.cpp:331
+#: src/lincity/modules/heavy_industry.cpp:276
 msgid "Grid"
 msgstr "??????????????????????????"
 
-#: src/lincity/modules/heavy_industry.cpp:339
-#: src/lincity/modules/light_industry.cpp:362
+#: src/lincity/modules/heavy_industry.cpp:284
+#: src/lincity/modules/light_industry.cpp:284
 msgid "Output"
 msgstr "??????????????"
 
-#: src/lincity/modules/heavy_industry.cpp:340
-#: src/lincity/modules/light_industry.cpp:364
+#: src/lincity/modules/heavy_industry.cpp:285
+#: src/lincity/modules/light_industry.cpp:286
 msgid "Store"
 msgstr "??????????"
 
-#: src/lincity/modules/market.cpp:1147 src/lincity/modules/port.cpp:207
-#: src/lincity/modules/road.cpp:50 src/lincity/modules/rail.cpp:53
-#: src/lincity/modules/mill.cpp:110 src/lincity/modules/track.cpp:41
+#: src/lincity/modules/market.cpp:983 src/lincity/modules/port.cpp:286
+#: src/lincity/modules/road.cpp:46 src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/mill.cpp:94 src/lincity/modules/track.cpp:37
 msgid "Food"
 msgstr "??????"
 
-#: src/lincity/modules/port.cpp:227 src/lincity-ng/MpsInterface.cpp:530
+#: src/lincity/modules/port.cpp:306 src/lincity-ng/MpsInterface.cpp:535
 msgid "Total"
 msgstr "?????????? "
 
-#: src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/rail.cpp:47
 msgid "Rail"
 msgstr "????????????"
 
-#: src/lincity/modules/coal_power.cpp:90
-#: src/lincity/modules/solar_power.cpp:45
+#: src/lincity/modules/coal_power.cpp:83
+#: src/lincity/modules/solar_power.cpp:47
 msgid "Power Station"
 msgstr "?????????????????????????? ??????????????"
 
-#: src/lincity/modules/coal_power.cpp:94
-#: src/lincity/modules/solar_power.cpp:49
+#: src/lincity/modules/coal_power.cpp:87
+#: src/lincity/modules/solar_power.cpp:51
 msgid "Max Output"
 msgstr "???????? ??????????????"
 
-#: src/lincity/modules/coal_power.cpp:99
-#: src/lincity/modules/solar_power.cpp:54
+#: src/lincity/modules/coal_power.cpp:92
+#: src/lincity/modules/solar_power.cpp:56
 msgid "Current Output"
 msgstr "???????????????????? ??????????????"
 
-#: src/lincity/modules/substation.cpp:95
+#: src/lincity/modules/substation.cpp:97
 msgid "Local Demand"
 msgstr "?????????????????? ????????????????????"
 
-#: src/lincity/modules/mill.cpp:103
+#: src/lincity/modules/mill.cpp:88
 msgid "Textile Mill"
 msgstr "?????????????????????? ??????????????"
 
-#: src/lincity/modules/oremine.cpp:184
+#: src/lincity/modules/oremine.cpp:141
 msgid "Ore Mine"
 msgstr "?????????? ????????"
 
-#: src/lincity/modules/power_line.cpp:50
+#: src/lincity/modules/power_line.cpp:46
 msgid "Power Line"
 msgstr "????????????????????????"
 
-#: src/lincity/modules/light_industry.cpp:354
+#: src/lincity/modules/light_industry.cpp:276
 msgid "Light"
 msgstr "????????"
 
-#: src/lincity/modules/university.cpp:69
+#: src/lincity/modules/university.cpp:61
 msgid "Tech Produced"
 msgstr "?????????????????????? ??????????????"
 
-#: src/lincity/modules/tip.cpp:109
+#: src/lincity/modules/tip.cpp:100
 msgid "Landfill"
 msgstr "????????"
 
-#: src/lincity/modules/tip.cpp:112
+#: src/lincity/modules/tip.cpp:103
 msgid "Last Month"
 msgstr "?????????????????? ??????????"
 
-#: src/lincity/modules/tip.cpp:113
+#: src/lincity/modules/tip.cpp:104
 msgid "Tons"
 msgstr "????????"
 
-#: src/lincity/modules/tip.cpp:114
+#: src/lincity/modules/tip.cpp:105
 msgid "Percent"
 msgstr "??????????????"
 
-#: src/lincity/modules/tip.cpp:117
+#: src/lincity/modules/tip.cpp:107
 #, c-format
 msgid "% Filled"
 msgstr "% ????????????????????"
 
-#: src/lincity/modules/commune.cpp:145
+#: src/lincity/modules/commune.cpp:175
 msgid "Activity"
 msgstr "????????????????????"
 
-#: src/lincity/modules/school.cpp:51
+#: src/lincity/modules/school.cpp:45
 msgid "Lessons Learned"
 msgstr "???????????? ??????????????????"
 
-#: src/lincity/modules/firestation.cpp:119
+#: src/lincity/modules/firestation.cpp:108
 msgid "Fire Station"
 msgstr "???????????????? ??????????????"
 
-#: src/lincity/modules/organic_farm.cpp:183
+#: src/lincity/modules/organic_farm.cpp:219
 msgid "Organic Farm"
 msgstr "???????????????????????? ??????????"
 
-#: src/lincity/modules/organic_farm.cpp:190
+#: src/lincity/modules/organic_farm.cpp:225
 msgid "NO "
 msgstr "??????"
 
-#: src/lincity/modules/organic_farm.cpp:200
+#: src/lincity/modules/organic_farm.cpp:233
 msgid "Prod"
 msgstr "??????????????"
 
-#: src/lincity/modules/organic_farm.cpp:238
+#: src/lincity/modules/organic_farm.cpp:239
 msgid "Debug info"
 msgstr ""
 
-#: src/lincity/modules/organic_farm.cpp:239
-msgid " max with power & water"
-msgstr ""
-
 #: src/lincity/modules/organic_farm.cpp:240
-msgid " number of tile with water"
+msgid "max with power&water"
 msgstr ""
 
 #: src/lincity/modules/organic_farm.cpp:241
-msgid " current production"
+msgid "N tiles with water"
 msgstr ""
 
-#: src/lincity/modules/solar_power.cpp:44
+#: src/lincity/modules/organic_farm.cpp:242
+#, fuzzy
+msgid "Current production"
+msgstr "???????????????????? ??????????????"
+
+#: src/lincity/modules/solar_power.cpp:46
 msgid "Solar"
 msgstr "????????????"
 
-#: src/lincity/modules/waterwell.cpp:44
-msgid "Water_well"
-msgstr ""
-
-#: src/lincity/modules/waterwell.cpp:51
-msgid "Drinkable"
-msgstr ""
-
 #: src/lincity-ng/Dialog.cpp:173
 msgid "Launchsite"
 msgstr "??????????????????"
 
-#: src/lincity-ng/Dialog.cpp:341 src/lincity-ng/Dialog.cpp:342
+#: src/lincity-ng/Dialog.cpp:352 src/lincity-ng/Dialog.cpp:353
 msgid "----- IN TEST MODE -------"
 msgstr "----- ?? ???????????????? ???????????? -------"
 
-#: src/lincity-ng/Dialog.cpp:344
+#: src/lincity-ng/Dialog.cpp:355
 #, c-format
 msgid "Game statistics from LinCity-NG Version %s"
 msgstr "???????????????????? ???????? LinCity-NG ???????????? %s"
 
-#: src/lincity-ng/Dialog.cpp:348
+#: src/lincity-ng/Dialog.cpp:359
 #, c-format
 msgid "Initial loaded scene - %s"
 msgstr "?????????????????? ?????????? - %s"
 
-#: src/lincity-ng/Dialog.cpp:353
+#: src/lincity-ng/Dialog.cpp:364
 #, c-format
 msgid "Economy is sustainable"
 msgstr "?????????????????? ???????????????????? "
 
-#: src/lincity-ng/Dialog.cpp:357
+#: src/lincity-ng/Dialog.cpp:368
 #, c-format
 msgid "Population  %d  of which  %d  are not housed."
 msgstr "?????????????????? %d ???? ?????? %d ??????????????????."
 
-#: src/lincity-ng/Dialog.cpp:362
+#: src/lincity-ng/Dialog.cpp:373
 #, c-format
 msgid "Max population %d  Number evacuated %d Total births %d"
 msgstr ""
-"???????????????????????? ?????????????????? %d , ??????-???? "
-"???????????????????????????? %d , ??????-???? ???????????????? %d"
+"???????????????????????? ?????????????????? %d , ??????-???? ???????????????????????????? %d , ??????-???? ???????????????? %d"
 
-#: src/lincity-ng/Dialog.cpp:367
+#: src/lincity-ng/Dialog.cpp:378
 #, c-format
 msgid "Date %s %04d  Money %8d   Tech-level %5.1f (%5.1f)"
-msgstr ""
-"???????? %s %04d  ???????????? %8d ?????????????? ???????????????? %5.1f "
-"(%5.1f)"
+msgstr "???????? %s %04d  ???????????? %8d ?????????????? ???????????????? %5.1f (%5.1f)"
 
-#: src/lincity-ng/Dialog.cpp:374
+#: src/lincity-ng/Dialog.cpp:385
 #, c-format
 msgid ".Deaths by starvation %7d   History %8.3f"
 msgstr "?????????????? ???? ????????????        %7d ?????????????? %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:379
+#: src/lincity-ng/Dialog.cpp:390
 #, c-format
 msgid "Deaths from pollution %7d   History %8.3f"
 msgstr "?????????????? ???? ?????????????????????? %7d ?????????????? %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:383
+#: src/lincity-ng/Dialog.cpp:394
 #, c-format
 msgid "Years of unemployment %7d   History %8.3f"
 msgstr "?????? ?????? ???????????? %7d  ?????????????? %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:387
+#: src/lincity-ng/Dialog.cpp:398
 #, c-format
 msgid "Rockets launched %2d  Successful launches %2d"
 msgstr "?????????????????? ?????????? %2d ???? ?????? ???????????? %2d"
 
-#: src/lincity-ng/Dialog.cpp:397
+#: src/lincity-ng/Dialog.cpp:409
 #, c-format
 msgid ".   Residences %4d         Markets %4d            Farms %4d"
-msgstr ""
-".   ???????????????????? %4d         ???????????????? %4d           "
-"?????????? %4d"
+msgstr ".   ???????????????????? %4d         ???????????????? %4d           ?????????? %4d"
 
-#: src/lincity-ng/Dialog.cpp:418
+#: src/lincity-ng/Dialog.cpp:420
 #, c-format
 msgid ".    Monuments %4d         Schools %4d     Universities %4d"
-msgstr ""
-".    ?????????????????? %4d         ?????????? %4d       "
-"???????????????????????? %4d"
+msgstr ".    ?????????????????? %4d         ?????????? %4d       ???????????????????????? %4d"
 
-#: src/lincity-ng/Dialog.cpp:423
+#: src/lincity-ng/Dialog.cpp:425
 #, c-format
 msgid ".Fire stations %4d           Parks %4d    Sports fields %4d"
-msgstr ""
-".???????????????? ?????????????? %4d        ?????????? %4d    "
-"?????????????????????????? %4d"
+msgstr ".???????????????? ?????????????? %4d        ?????????? %4d    ?????????????????????????? %4d"
 
-#: src/lincity-ng/Dialog.cpp:449
+#: src/lincity-ng/Dialog.cpp:430
 #, c-format
 msgid "Health centres %4d            Tips %4d         Shanties %4d"
-msgstr ""
-"???????????????? %4d                  ?????????????? %4d      ???????????? "
-"%4d"
+msgstr "???????????????? %4d                  ?????????????? %4d      ???????????? %4d"
 
-#: src/lincity-ng/Dialog.cpp:433
+#: src/lincity-ng/Dialog.cpp:438
 #, c-format
 msgid ".    Windmills %4d     Coal powers %4d     Solar powers %4d"
-msgstr ""
-".    ???????????????? %4d      ???????????????? ???? %4d     "
-"?????????????????? ???? %4d"
+msgstr ".    ???????????????? %4d      ???????????????? ???? %4d     ?????????????????? ???? %4d"
 
-#: src/lincity-ng/Dialog.cpp:439
+#: src/lincity-ng/Dialog.cpp:444
 #, c-format
 msgid ".  Substations %4d     Power lines %4d            Ports %4d"
-msgstr ""
-".  ???????????????????? %4d      ???????????????????????? %4d           "
-"?????????? %4d"
+msgstr ".  ???????????????????? %4d      ???????????????????????? %4d           ?????????? %4d"
 
-#: src/lincity-ng/Dialog.cpp:408
+#: src/lincity-ng/Dialog.cpp:449
 #, c-format
 msgid ".       Tracks %4d           Roads %4d             Rail %4d"
-msgstr ""
-".       ?????????????????? %4d        ????????????    %4d         ?????????? "
-"%4d"
+msgstr ".       ?????????????????? %4d        ????????????    %4d         ?????????? %4d"
 
-#: src/lincity-ng/Dialog.cpp:413
+#: src/lincity-ng/Dialog.cpp:457
 #, c-format
 msgid ".    Potteries %4d     Blacksmiths %4d            Mills %4d"
-msgstr ""
-".    ?????????????????? %4d     ??????????????????   %4d            "
-"???????????????? %4d"
+msgstr ".    ?????????????????? %4d     ??????????????????   %4d            ???????????????? %4d"
 
-#: src/lincity-ng/Dialog.cpp:444
+#: src/lincity-ng/Dialog.cpp:462
 #, c-format
 msgid ".   Light inds %4d      Heavy inds %4d        Recyclers %4d"
-msgstr ""
-".   ???????????? ??????-???? %4d   ?????????????? ??????-???? %4d    "
-"?????????????????????? %4d"
+msgstr ".   ???????????? ??????-???? %4d   ?????????????? ??????-???? %4d    ?????????????????????? %4d"
 
-#: src/lincity-ng/Dialog.cpp:428
+#: src/lincity-ng/Dialog.cpp:467
 #, c-format
 msgid ".   Coal mines %4d       Ore mines %4d         Communes %4d"
-msgstr ""
-".   ???????????????? ?????????? %4d   ?????????? ???????? %4d        "
-"???????????? %4d"
+msgstr ".   ???????????????? ?????????? %4d   ?????????? ???????? %4d        ???????????? %4d"
 
-#: src/lincity-ng/ScreenInterface.cpp:252
+#: src/lincity-ng/ScreenInterface.cpp:264
 msgid "MM"
 msgstr "????"
 
-#: src/lincity-ng/ScreenInterface.cpp:263 src/lincity-ng/GameView.cpp:1518
-#: src/lincity-ng/GameView.cpp:1549
+#: src/lincity-ng/ScreenInterface.cpp:275 src/lincity-ng/GameView.cpp:1609
+#: src/lincity-ng/GameView.cpp:1640
 msgid "$"
 msgstr "??????"
 
-#: src/lincity-ng/GameView.cpp:236
+#: src/lincity-ng/GameView.cpp:237
 msgid "Minimap: outline map"
 msgstr "????????-??????????: ??????????????????"
 
-#: src/lincity-ng/GameView.cpp:239
+#: src/lincity-ng/GameView.cpp:240
 msgid "Minimap: unemployment"
 msgstr "????????-??????????: ????????????"
 
-#: src/lincity-ng/GameView.cpp:242
+#: src/lincity-ng/GameView.cpp:243
 msgid "Minimap: pollution"
 msgstr "????????-??????????: ??????????????????????"
 
-#: src/lincity-ng/GameView.cpp:245
+#: src/lincity-ng/GameView.cpp:246
 msgid "Minimap: nourishments"
 msgstr "????????-??????????: ??????????????"
 
-#: src/lincity-ng/GameView.cpp:248
+#: src/lincity-ng/GameView.cpp:249
 msgid "Minimap: power supply"
 msgstr "????????-??????????: ????????????????????????????"
 
-#: src/lincity-ng/GameView.cpp:251
+#: src/lincity-ng/GameView.cpp:252
 msgid "Minimap: firedepartment cover"
 msgstr "????????-??????????: ???????????????? ????????????"
 
-#: src/lincity-ng/GameView.cpp:254
+#: src/lincity-ng/GameView.cpp:255
 msgid "Minimap: sport cover"
 msgstr "????????-??????????: ??????????"
 
-#: src/lincity-ng/GameView.cpp:257
+#: src/lincity-ng/GameView.cpp:258
 msgid "Minimap: medical care"
 msgstr "????????-??????????: ????????????????"
 
-#: src/lincity-ng/GameView.cpp:260
+#: src/lincity-ng/GameView.cpp:261
 msgid "Minimap: coal depots"
 msgstr "????????-??????????: ???????????????? ??????????"
 
-#: src/lincity-ng/GameView.cpp:263
+#: src/lincity-ng/GameView.cpp:264
 msgid "Minimap: traffic density"
 msgstr "????????-??????????: ????????????"
 
-#: src/lincity-ng/GameView.cpp:1513
+#: src/lincity-ng/GameView.cpp:1604
 msgid "Estimated Bulldoze Cost: "
 msgstr "???????? ??????????: "
 
-#: src/lincity-ng/GameView.cpp:1515
+#: src/lincity-ng/GameView.cpp:1606
 msgid "Bulldoze Cost: "
 msgstr "???????? ??????????: "
 
-#: src/lincity-ng/GameView.cpp:1520
+#: src/lincity-ng/GameView.cpp:1611
 msgid "n/a"
 msgstr "??/??"
 
-#: src/lincity-ng/GameView.cpp:1538
+#: src/lincity-ng/GameView.cpp:1629
 msgid "Query Tool: Show information about selected building."
-msgstr ""
-"????????????: ???????????????? ???????????????????? ?? ?????????????????? "
-"????????????????????. "
+msgstr "????????????: ???????????????? ???????????????????? ?? ?????????????????? ????????????????????. "
 
-#: src/lincity-ng/GameView.cpp:1542
+#: src/lincity-ng/GameView.cpp:1633
 msgid "Bulldozer: remove building -price varies-"
-msgstr ""
-"??????????????????: ?????????????? ???????????? -???????? ??????????????????-"
+msgstr "??????????????????: ?????????????? ???????????? -???????? ??????????????????-"
 
-#: src/lincity-ng/GameView.cpp:1549
+#: src/lincity-ng/GameView.cpp:1640
 msgid ": Cost to build "
 msgstr ": ?????????????????? ?????????????????? "
 
-#: src/lincity-ng/GameView.cpp:1550
+#: src/lincity-ng/GameView.cpp:1641
 msgid ", to bulldoze "
 msgstr ", ???????????????????? "
 
-#: src/lincity-ng/GameView.cpp:1550 src/lincity-ng/GameView.cpp:1553
+#: src/lincity-ng/GameView.cpp:1641 src/lincity-ng/GameView.cpp:1644
 msgid "$."
 msgstr "??????."
 
-#: src/lincity-ng/GameView.cpp:1552
+#: src/lincity-ng/GameView.cpp:1643
 msgid " To build "
 msgstr " ?????????????? "
 
-#: src/lincity-ng/GameView.cpp:1552
+#: src/lincity-ng/GameView.cpp:1643
 msgid " of them "
 msgstr " ???? "
 
-#: src/lincity-ng/GameView.cpp:1553
+#: src/lincity-ng/GameView.cpp:1644
 msgid "will cost about "
 msgstr "???????????? ???? "
 
-#: src/lincity-ng/MainMenu.cpp:163
+#: src/lincity-ng/MainMenu.cpp:199
 msgid "empty"
 msgstr "??????????"
 
-#: src/lincity-ng/MpsInterface.cpp:224
+#: src/lincity-ng/MpsInterface.cpp:227
 msgid "build something here"
 msgstr "?????? ?????????? ??????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:226
+#: src/lincity-ng/MpsInterface.cpp:229
 msgid "no further information available"
 msgstr "?????? ????????????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:378
+#: src/lincity-ng/MpsInterface.cpp:381
 msgid "Coverage"
 msgstr "???????? ????????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:383
+#: src/lincity-ng/MpsInterface.cpp:386
 msgid "Health"
 msgstr "???????????????? "
 
-#: src/lincity-ng/MpsInterface.cpp:391
+#: src/lincity-ng/MpsInterface.cpp:394
 msgid "clear"
 msgstr "??????????"
 
-#: src/lincity-ng/MpsInterface.cpp:395
+#: src/lincity-ng/MpsInterface.cpp:398
 msgid "fair"
 msgstr "??????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:397
+#: src/lincity-ng/MpsInterface.cpp:400
 msgid "smelly"
 msgstr "????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:399
+#: src/lincity-ng/MpsInterface.cpp:402
 msgid "smokey"
 msgstr "??????"
 
-#: src/lincity-ng/MpsInterface.cpp:401
+#: src/lincity-ng/MpsInterface.cpp:404
 msgid "smoggy"
 msgstr "????????"
 
-#: src/lincity-ng/MpsInterface.cpp:403
+#: src/lincity-ng/MpsInterface.cpp:406
 msgid "bad"
 msgstr "??????????"
 
-#: src/lincity-ng/MpsInterface.cpp:405
+#: src/lincity-ng/MpsInterface.cpp:408
 msgid "very bad"
 msgstr "?????????? ??????????"
 
-#: src/lincity-ng/MpsInterface.cpp:407
+#: src/lincity-ng/MpsInterface.cpp:410
 msgid "death!"
 msgstr "????????????!"
 
-#: src/lincity-ng/MpsInterface.cpp:412
+#: src/lincity-ng/MpsInterface.cpp:415
 msgid "Bulldoze Cost"
 msgstr "?????????????????? ??????????????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:418
+#: src/lincity-ng/MpsInterface.cpp:421
 msgid "N/A"
 msgstr "??/??"
 
-#: src/lincity-ng/MpsInterface.cpp:436
+#: src/lincity-ng/MpsInterface.cpp:439
 msgid "Tax Income"
 msgstr "??????????"
 
-#: src/lincity-ng/MpsInterface.cpp:440
+#: src/lincity-ng/MpsInterface.cpp:443
 msgid "Income"
 msgstr "??????????"
 
-#: src/lincity-ng/MpsInterface.cpp:452
+#: src/lincity-ng/MpsInterface.cpp:455
 msgid "Export"
 msgstr "?????????????? "
 
-#: src/lincity-ng/MpsInterface.cpp:456
+#: src/lincity-ng/MpsInterface.cpp:459
 msgid "Expenses"
 msgstr "??????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:460
+#: src/lincity-ng/MpsInterface.cpp:463
 msgid "Unemp."
 msgstr "??????????????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:464
+#: src/lincity-ng/MpsInterface.cpp:467
 msgid "Transport"
 msgstr "??????????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:468
+#: src/lincity-ng/MpsInterface.cpp:471
 msgid "Imports"
 msgstr "????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:472
+#: src/lincity-ng/MpsInterface.cpp:475
 msgid "Others"
 msgstr "????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:477
+#: src/lincity-ng/MpsInterface.cpp:480
 msgid "Net"
 msgstr "????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:489
+#: src/lincity-ng/MpsInterface.cpp:492
 msgid "Other Costs"
 msgstr "???????????? ??????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:494
+#: src/lincity-ng/MpsInterface.cpp:497
 msgid "For year"
 msgstr "???? ??????"
 
-#: src/lincity-ng/MpsInterface.cpp:498
+#: src/lincity-ng/MpsInterface.cpp:501
 msgid "Interest"
 msgstr "????????"
 
-#: src/lincity-ng/MpsInterface.cpp:500
+#: src/lincity-ng/MpsInterface.cpp:503
 msgid "Schools"
 msgstr "??????????"
 
-#: src/lincity-ng/MpsInterface.cpp:502
+#: src/lincity-ng/MpsInterface.cpp:505
 msgid "Univers."
 msgstr "????????????????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:504
+#: src/lincity-ng/MpsInterface.cpp:507
 msgid "Deaths"
 msgstr "????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:508
+#: src/lincity-ng/MpsInterface.cpp:511
 msgid "Hospital"
 msgstr "??????????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:510
+#: src/lincity-ng/MpsInterface.cpp:513
 msgid "Rockets"
 msgstr "????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:512
+#: src/lincity-ng/MpsInterface.cpp:515
 msgid "Fire Stn"
 msgstr "???????????????? ????"
 
-#: src/lincity-ng/MpsInterface.cpp:528
+#: src/lincity-ng/MpsInterface.cpp:533
 msgid "Population"
 msgstr "??????????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:531
+#: src/lincity-ng/MpsInterface.cpp:536
 msgid "Housed"
 msgstr "????????"
 
-#: src/lincity-ng/MpsInterface.cpp:532
+#: src/lincity-ng/MpsInterface.cpp:537
 msgid "Homeless"
 msgstr "??????????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:533
+#: src/lincity-ng/MpsInterface.cpp:538
 msgid "Shanties"
 msgstr "???????????? "
 
-#: src/lincity-ng/MpsInterface.cpp:534
+#: src/lincity-ng/MpsInterface.cpp:539
 msgid "Unn Dths"
 msgstr "????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:535
+#: src/lincity-ng/MpsInterface.cpp:540
 msgid "Unemployment"
 msgstr "??????????????????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:536
+#: src/lincity-ng/MpsInterface.cpp:541
 msgid "Claims"
 msgstr "??????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:537 src/lincity-ng/MpsInterface.cpp:542
+#: src/lincity-ng/MpsInterface.cpp:542 src/lincity-ng/MpsInterface.cpp:547
 msgid "Rate"
 msgstr "??????????"
 
-#: src/lincity-ng/MpsInterface.cpp:539
+#: src/lincity-ng/MpsInterface.cpp:544
 msgid "Starvation"
 msgstr "??????????????????"
 
-#: src/lincity-ng/MpsInterface.cpp:540
+#: src/lincity-ng/MpsInterface.cpp:545
 msgid "Cases"
 msgstr "??????????"
 
-#: src/lincity-ng/ButtonPanel.cpp:198
+#: src/lincity-ng/ButtonPanel.cpp:200
 msgid "Query Tool"
 msgstr "????????????"
 
-#: src/lincity-ng/ButtonPanel.cpp:199
+#: src/lincity-ng/ButtonPanel.cpp:201
 msgid "Bulldozer"
 msgstr "??????????????????"
 
-#: src/lincity-ng/ButtonPanel.cpp:201
+#: src/lincity-ng/ButtonPanel.cpp:203
 msgid "Residential: 50 denizens, low birthrate, high deathrate"
-msgstr ""
-"????????????????????: 50 ??????????????, ???????????? "
-"??????????????????????, ?????????????? ????????????????????."
+msgstr "????????????????????: 50 ??????????????, ???????????? ??????????????????????, ?????????????? ????????????????????."
 
-#: src/lincity-ng/ButtonPanel.cpp:202
+#: src/lincity-ng/ButtonPanel.cpp:204
 msgid "Residential: 100 denizens, high birthrate, low deathrate"
-msgstr ""
-"????????????????????: 100 ??????????????, ?????????????? "
-"??????????????????????, ???????????? ????????????????????."
+msgstr "????????????????????: 100 ??????????????, ?????????????? ??????????????????????, ???????????? ????????????????????."
 
-#: src/lincity-ng/ButtonPanel.cpp:203
+#: src/lincity-ng/ButtonPanel.cpp:205
 msgid "Residential: 200 denizens, high birthrate, high deathrate"
-msgstr ""
-"????????????????????: 200 ??????????????, ?????????????? "
-"??????????????????????, ?????????????? ????????????????????."
+msgstr "????????????????????: 200 ??????????????, ?????????????? ??????????????????????, ?????????????? ????????????????????."
 
-#: src/lincity-ng/ButtonPanel.cpp:204
+#: src/lincity-ng/ButtonPanel.cpp:206
 msgid "Residential: 100 denizens, low birthrate, high deathrate"
-msgstr ""
-"????????????????????: 100 ??????????????, ???????????? "
-"??????????????????????, ?????????????? ????????????????????."
+msgstr "????????????????????: 100 ??????????????, ???????????? ??????????????????????, ?????????????? ????????????????????."
 
-#: src/lincity-ng/ButtonPanel.cpp:205
+#: src/lincity-ng/ButtonPanel.cpp:207
 msgid "Residential: 200 denizens, high birthrate, low deathrate"
-msgstr ""
-"????????????????????: 200 ??????????????, ?????????????? "
-"??????????????????????, ???????????? ????????????????????."
+msgstr "????????????????????: 200 ??????????????, ?????????????? ??????????????????????, ???????????? ????????????????????."
 
-#: src/lincity-ng/ButtonPanel.cpp:206
+#: src/lincity-ng/ButtonPanel.cpp:208
 msgid "Residential: 400 denizens, high birthrate, high deathrate"
-msgstr ""
-"????????????????????: 400 ??????????????, ?????????????? "
-"??????????????????????, ?????????????? ????????????????????."
+msgstr "????????????????????: 400 ??????????????, ?????????????? ??????????????????????, ?????????????? ????????????????????."
 
-#: src/lincity-ng/ButtonPanel.cpp:215
+#: src/lincity-ng/ButtonPanel.cpp:217
 msgid " [Click right for help.]"
 msgstr " [?????????? ???????????? ?????? ????????????.]"
 
-#: src/lincity-ng/ButtonPanel.cpp:243 src/lincity-ng/ButtonPanel.cpp:277
+#: src/lincity-ng/ButtonPanel.cpp:245 src/lincity-ng/ButtonPanel.cpp:288
 #, c-format
 msgid "%s (Techlevel %.1f required.)"
 msgstr "%s (?????????? %.1f ?????????????? ??????????????.)"
 
-#: src/lincity-ng/ButtonPanel.cpp:252
+#: src/lincity-ng/ButtonPanel.cpp:254
 #, c-format
 msgid "%s is disabled (loaded old game)."
 msgstr ""
 
-#: src/lincity-ng/EconomyGraph.cpp:121
+#: src/lincity-ng/EconomyGraph.cpp:124
 msgid "Mining"
 msgstr "????????????"
 
-#: src/lincity-ng/EconomyGraph.cpp:123
+#: src/lincity-ng/EconomyGraph.cpp:126
 msgid "Trade"
 msgstr "??????????????"
 
-#: src/lincity-ng/EconomyGraph.cpp:125
+#: src/lincity-ng/EconomyGraph.cpp:128
 msgid "Money"
 msgstr "????????????"
 
-#: src/lincity-ng/EconomyGraph.cpp:127
+#: src/lincity-ng/EconomyGraph.cpp:130
 msgid "Popul."
 msgstr "??????????."
 
-#: src/lincity-ng/EconomyGraph.cpp:129
+#: src/lincity-ng/EconomyGraph.cpp:132
 msgid "Techn."
 msgstr "??????????"
 
-#: src/lincity-ng/EconomyGraph.cpp:134
+#: src/lincity-ng/EconomyGraph.cpp:137
 msgid "Economy Overview:"
 msgstr "???????????? ????????????????: "
 
-#: src/lincity-ng/EconomyGraph.cpp:137
+#: src/lincity-ng/EconomyGraph.cpp:140
 msgid "Sustainability:"
 msgstr "??????????????????: "
 
-#: src/lincity-ng/EconomyGraph.cpp:140
+#: src/lincity-ng/EconomyGraph.cpp:143
 msgid "Frames per Second:"
 msgstr "???????????? ?? ??????????????"
 
-#: src/lincity-ng/EconomyGraph.cpp:216
+#: src/lincity-ng/EconomyGraph.cpp:219
 msgid "You lose."
 msgstr "???? ??????????????????."

Modified: trunk/data/locale/sv.po
===================================================================
--- trunk/data/locale/sv.po	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/data/locale/sv.po	2007-12-04 00:32:10 UTC (rev 1309)
@@ -8,7 +8,7 @@
 msgstr ""
 "Project-Id-Version: lincity-ng 1.1.0\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2005-05-12 13:28+0200\n"
+"POT-Creation-Date: 2007-12-04 00:29+0100\n"
 "PO-Revision-Date: 2007-08-09 23:43+0100\n"
 "Last-Translator: Daniel Nylander <po at danielnylander.se>\n"
 "Language-Team: Swedish <tp-sv at listor.tp-sv.se>\n"
@@ -17,31 +17,7 @@
 "Content-Transfer-Encoding: 8bit\n"
 "Plural-Forms: nplurals=2; plural=(n != 1);\n"
 
-#: src/lincity/fileutil.cpp:292
-#: src/lincity/fileutil.cpp:341
-msgid "Error. Can't find LINCITY_HOME"
-msgstr "Fel. Kan inte hitta LINCITY_HOME"
-
-#: src/lincity/fileutil.cpp:561
-msgid "Error verifying package. Can't find colour.pal."
-msgstr "Fel vid verifiering av paket. Kan inte hitta filen colour.pal."
-
-#: src/lincity/fileutil.cpp:580
-#: src/lincity/fileutil.cpp:589
-#, c-format
-msgid "Couldn't create the save directory '%s'\n"
-msgstr "Kunde inte skapa mapp f??r sparade spel \"%s\"\n"
-
-#: src/lincity/fileutil.cpp:635
-#, c-format
-msgid "Out of memory: malloc failure\n"
-msgstr "Slut p?? minne: malloc misslyckades\n"
-
-#: src/lincity/power.cpp:97
-msgid "You have too many power grids. Join some of them"
-msgstr "Du har f??r m??nga kraftledningar. Anslut n??gra av dem till varandra"
-
-#: src/lincity/engine.cpp:198
+#: src/lincity/engine.cpp:120
 msgid ""
 "ERROR: group does not exist. This should not happen! Please consider filling "
 "a bug report to lincity-ng team, with the saved game and what you did :-) "
@@ -50,1344 +26,1288 @@
 "felrapport till lincity-ng-teamet med det sparade spelet och information om "
 "vad du gjorde :-) "
 
-#: src/lincity/engine.cpp:226
+#: src/lincity/engine.cpp:152
 msgid "Port must be connected to river all along right side."
 msgstr "Hamnar m??ste vara anslutna till floden l??ngs hela sidan."
 
-#: src/lincity/engine.cpp:236
-#: src/lincity/engine.cpp:246
+#: src/lincity/engine.cpp:161 src/lincity/engine.cpp:170
 msgid "Too many substations + windmills. You cannot build one more"
 msgstr "F??r m??nga rel??stationer + vindkraftverk. Du kan inte bygga en till"
 
-#: src/lincity/engine.cpp:280
+#: src/lincity/engine.cpp:200
 msgid "Too many markets. You cannot build one more"
 msgstr "F??r m??nga marknader. Du kan inte bygga en till"
 
-#: src/lincity/engine.cpp:305
+#: src/lincity/engine.cpp:223
 msgid "You can't build a tip here: this area was once a landfill"
 msgstr ""
-"Du kan inte bygga en soptipp h??r: den h??r platsen var tidigare en "
-"landfyllnad"
+"Du kan inte bygga en soptipp h??r: den h??r platsen var tidigare en landfyllnad"
 
-#: src/lincity/engine.cpp:330
+#: src/lincity/engine.cpp:248
 msgid "You can't build a mine here: This area was once a landfill"
 msgstr ""
 "Du kan inte bygga en gruva h??r: den h??r platsen var tidigare en landfyllnad"
 
-#: src/lincity/engine.cpp:335
+#: src/lincity/engine.cpp:252
 msgid "You can't build a mine here: there is no ore left at this site"
 msgstr "Du kan inte bygga en gruva h??r: det finns ingen malm kvar h??r"
 
-#: src/lincity/engine.cpp:259
+#: src/lincity/engine.cpp:264
 msgid "You can't build a water well here: it is all desert."
 msgstr ""
 
-#: src/lincity/engine.cpp:269
+#: src/lincity/engine.cpp:274
 msgid "You can't build a park here: it is a desert, parks need water"
 msgstr ""
 
-#: src/lincity/engine.cpp:609
+#: src/lincity/engine.cpp:485
 msgid "It's at a power line."
 msgstr "Den ??r vid en kraftledning."
 
-#: src/lincity/engine.cpp:611
+#: src/lincity/engine.cpp:487
 msgid "It's at a solar power station."
 msgstr "Den ??r vid ett solkraftverk."
 
-#: src/lincity/engine.cpp:613
+#: src/lincity/engine.cpp:489
 msgid "It's at a substation."
 msgstr "Den ??r vid en rel??station."
 
-#: src/lincity/engine.cpp:615
+#: src/lincity/engine.cpp:491
 msgid "It's at a residential area."
 msgstr "Den ??r vid ett bostadsomr??de."
 
-#: src/lincity/engine.cpp:617
+#: src/lincity/engine.cpp:493
 msgid "It's at a farm."
 msgstr "Den ??r vid en bondg??rd."
 
-#: src/lincity/engine.cpp:619
+#: src/lincity/engine.cpp:495
 msgid "It's at a market."
 msgstr "Den ??r vid en marknad."
 
-#: src/lincity/engine.cpp:621
+#: src/lincity/engine.cpp:497
 msgid "It's at a track."
 msgstr "Den ??r vid ett sp??r."
 
-#: src/lincity/engine.cpp:623
+#: src/lincity/engine.cpp:499
 msgid "It's at a coal mine."
 msgstr "Den ??r vid en kolgruva."
 
-#: src/lincity/engine.cpp:625
+#: src/lincity/engine.cpp:501
 msgid "It's at a railway."
 msgstr "Den ??r vid en j??rnv??g."
 
-#: src/lincity/engine.cpp:627
+#: src/lincity/engine.cpp:503
 msgid "It's at a coal power station."
 msgstr "Den ??r vid ett kolkraftverk."
 
-#: src/lincity/engine.cpp:629
+#: src/lincity/engine.cpp:505
 msgid "It's at a road."
 msgstr "Den ??r vid en v??g."
 
-#: src/lincity/engine.cpp:631
+#: src/lincity/engine.cpp:507
 msgid "It's at light industry."
 msgstr "Den ??r vid en industri."
 
-#: src/lincity/engine.cpp:633
+#: src/lincity/engine.cpp:509
 msgid "It's at a university."
 msgstr "Den ??r vid ett universitet."
 
-#: src/lincity/engine.cpp:635
+#: src/lincity/engine.cpp:511
 msgid "It's at a commune."
 msgstr "Den ??r vid en kolmila."
 
-#: src/lincity/engine.cpp:637
+#: src/lincity/engine.cpp:513
 msgid "It's at a tip."
 msgstr "Den ??r vid en soptipp."
 
-#: src/lincity/engine.cpp:639
+#: src/lincity/engine.cpp:515
 msgid "It's at a port."
 msgstr "Den ??r vid en hamn."
 
-#: src/lincity/engine.cpp:641
+#: src/lincity/engine.cpp:517
 msgid "It's at a steel works."
 msgstr "Den ??r vid ett st??lverk."
 
-#: src/lincity/engine.cpp:643
+#: src/lincity/engine.cpp:519
 msgid "It's at a recycle centre."
 msgstr "Den ??r vid en ??tervinningsstation."
 
-#: src/lincity/engine.cpp:645
+#: src/lincity/engine.cpp:521
 msgid "It's at a health centre."
 msgstr "Den ??r vid ett sjukhus."
 
-#: src/lincity/engine.cpp:647
+#: src/lincity/engine.cpp:523
 msgid "It's at a rocket site."
 msgstr "Den ??r vid en raketavfyrningsramp."
 
-#: src/lincity/engine.cpp:649
+#: src/lincity/engine.cpp:525
 msgid "It's at a windmill."
 msgstr "Den ??r vid en v??derkvarn."
 
-#: src/lincity/engine.cpp:651
+#: src/lincity/engine.cpp:527
 msgid "It's at a school."
 msgstr "Den ??r vid en skola."
 
-#: src/lincity/engine.cpp:653
+#: src/lincity/engine.cpp:529
 msgid "It's at a blacksmith."
 msgstr "Den ??r vid en smedja."
 
-#: src/lincity/engine.cpp:655
+#: src/lincity/engine.cpp:531
 msgid "It's at a mill."
 msgstr "Den ??r vid en verkstad."
 
-#: src/lincity/engine.cpp:657
+#: src/lincity/engine.cpp:533
 msgid "It's at a pottery."
 msgstr "Den ??r vid en keramikfabrik."
 
-#: src/lincity/engine.cpp:659
+#: src/lincity/engine.cpp:535
 msgid "It's at a fire station!!!."
 msgstr "Den ??r vid en brandstation!!!."
 
-#: src/lincity/engine.cpp:661
+#: src/lincity/engine.cpp:537
 msgid "It's at a sports field!!!."
 msgstr "Den ??r vid en sportarena!!!."
 
-#: src/lincity/engine.cpp:663
+#: src/lincity/engine.cpp:539
 msgid "It's at a shanty town."
 msgstr "Den ??r vid en k??kstad."
 
-#: src/lincity/engine.cpp:665
+#: src/lincity/engine.cpp:541
 msgid "UNKNOWN!"
 msgstr "OK??ND!"
 
-#: src/lincity/lintypes.cpp:22
+#: src/lincity/lintypes.cpp:20
 msgid "Empty"
 msgstr "Tom"
 
-#: src/lincity/lintypes.cpp:34
+#: src/lincity/lintypes.cpp:32
 msgid "Power line"
 msgstr "Kraftledning"
 
-#: src/lincity/lintypes.cpp:46
+#: src/lincity/lintypes.cpp:43
 msgid "Solar PS"
 msgstr "Solkraftverk"
 
-#: src/lincity/lintypes.cpp:58
-#: src/lincity/modules/substation.cpp:96
+#: src/lincity/lintypes.cpp:54 src/lincity/modules/substation.cpp:93
 msgid "Substation"
 msgstr "Rel??station"
 
-#: src/lincity/lintypes.cpp:70
+#: src/lincity/lintypes.cpp:65
 msgid "Residential LL"
 msgstr "Bostadsomr??de NN"
 
-#: src/lincity/lintypes.cpp:82
+#: src/lincity/lintypes.cpp:76
 msgid "Farm"
 msgstr "Bondg??rd"
 
-#: src/lincity/lintypes.cpp:94
-#: src/lincity/modules/market.cpp:1152
-#: src/lincity-ng/Dialog.cpp:506
+#: src/lincity/lintypes.cpp:87 src/lincity/modules/market.cpp:979
+#: src/lincity-ng/Dialog.cpp:507
 msgid "Market"
 msgstr "Marknad"
 
-#: src/lincity/lintypes.cpp:106
-#: src/lincity/modules/track.cpp:38
+#: src/lincity/lintypes.cpp:98 src/lincity/modules/track.cpp:34
 msgid "Track"
 msgstr "Sp??r"
 
-#: src/lincity/lintypes.cpp:118
+#: src/lincity/lintypes.cpp:109
 msgid "Coalmine"
 msgstr "Kolgruva"
 
-#: src/lincity/lintypes.cpp:130
+#: src/lincity/lintypes.cpp:120
 msgid "Railway"
 msgstr "J??rnv??g"
 
-#: src/lincity/lintypes.cpp:142
+#: src/lincity/lintypes.cpp:131
 msgid "Coal PS"
 msgstr "Kolkraftverk"
 
-#: src/lincity/lintypes.cpp:154
-#: src/lincity/modules/road.cpp:47
+#: src/lincity/lintypes.cpp:142 src/lincity/modules/road.cpp:43
 msgid "Road"
 msgstr "V??g"
 
-#: src/lincity/lintypes.cpp:166
+#: src/lincity/lintypes.cpp:153
 msgid "Lt. Industry"
 msgstr "Industri"
 
-#: src/lincity/lintypes.cpp:178
-#: src/lincity/modules/university.cpp:67
+#: src/lincity/lintypes.cpp:164 src/lincity/modules/university.cpp:59
 msgid "University"
 msgstr "Universitet"
 
-#: src/lincity/lintypes.cpp:190
-#: src/lincity/modules/commune.cpp:146
+#: src/lincity/lintypes.cpp:175 src/lincity/modules/commune.cpp:172
 msgid "Commune"
 msgstr "Kolmila"
 
-#: src/lincity/lintypes.cpp:202
+#: src/lincity/lintypes.cpp:186
 msgid "Ore mine"
 msgstr "Malmgruva"
 
-#: src/lincity/lintypes.cpp:214
+#: src/lincity/lintypes.cpp:197
 msgid "Rubbish tip"
 msgstr "Soptipp"
 
-#: src/lincity/lintypes.cpp:226
-#: src/lincity/modules/port.cpp:340
-#: src/lincity-ng/Dialog.cpp:560
+#: src/lincity/lintypes.cpp:208 src/lincity/modules/port.cpp:281
+#: src/lincity-ng/Dialog.cpp:561
 msgid "Port"
 msgstr "Hamn"
 
-#: src/lincity/lintypes.cpp:238
+#: src/lincity/lintypes.cpp:219
 msgid "Hv. Industry"
 msgstr "Tung industri"
 
-#: src/lincity/lintypes.cpp:250
+#: src/lincity/lintypes.cpp:230
 msgid "Park"
 msgstr "Park"
 
-#: src/lincity/lintypes.cpp:262
-#: src/lincity-ng/MpsInterface.cpp:516
+#: src/lincity/lintypes.cpp:241 src/lincity-ng/MpsInterface.cpp:519
 msgid "Recycle"
 msgstr "??tervinning"
 
-#: src/lincity/lintypes.cpp:274
-#: src/lincity/modules/water.cpp:19
+#: src/lincity/lintypes.cpp:252 src/lincity/modules/water.cpp:17
+#: src/lincity/modules/residence.cpp:264
 msgid "Water"
 msgstr "Vatten"
 
-#: src/lincity/lintypes.cpp:286
+#: src/lincity/lintypes.cpp:263
 msgid "Health centre"
 msgstr "Sjukhus"
 
-#: src/lincity/lintypes.cpp:298
+#: src/lincity/lintypes.cpp:274
 msgid "Rocket pad"
 msgstr "Raketavfyrningsramp"
 
-#: src/lincity/lintypes.cpp:310
-#: src/lincity/modules/windmill.cpp:78
-#: src/lincity-ng/MpsInterface.cpp:506
+#: src/lincity/lintypes.cpp:285 src/lincity/modules/windmill.cpp:75
+#: src/lincity-ng/MpsInterface.cpp:509
 msgid "Windmill"
 msgstr "V??derkvarn"
 
-#: src/lincity/lintypes.cpp:322
-#: src/lincity/modules/monument.cpp:57
+#: src/lincity/lintypes.cpp:296 src/lincity/modules/monument.cpp:51
 msgid "Monument"
 msgstr "Monument"
 
-#: src/lincity/lintypes.cpp:334
-#: src/lincity/modules/school.cpp:49
+#: src/lincity/lintypes.cpp:307 src/lincity/modules/school.cpp:43
 msgid "School"
 msgstr "Skola"
 
-#: src/lincity/lintypes.cpp:346
-#: src/lincity/modules/blacksmith.cpp:100
+#: src/lincity/lintypes.cpp:318 src/lincity/modules/blacksmith.cpp:90
 msgid "Blacksmith"
 msgstr "Smedja"
 
-#: src/lincity/lintypes.cpp:358
+#: src/lincity/lintypes.cpp:329
 msgid "Mill"
 msgstr "Verkstad"
 
-#: src/lincity/lintypes.cpp:370
-#: src/lincity/modules/pottery.cpp:119
+#: src/lincity/lintypes.cpp:340 src/lincity/modules/pottery.cpp:104
 msgid "Pottery"
 msgstr "Keramikfabrik"
 
-#: src/lincity/lintypes.cpp:382
+#: src/lincity/lintypes.cpp:351
 msgid "Fire sta'n"
 msgstr "Brandstation"
 
-#: src/lincity/lintypes.cpp:394
-#: src/lincity/modules/cricket.cpp:99
+#: src/lincity/lintypes.cpp:362 src/lincity/modules/cricket.cpp:91
 msgid "Sports field"
 msgstr "Sportarena"
 
-#: src/lincity/lintypes.cpp:407
+#: src/lincity/lintypes.cpp:374
 msgid "Burnt"
 msgstr "Br??nd"
 
-#: src/lincity/lintypes.cpp:420
+#: src/lincity/lintypes.cpp:386
 msgid "Shanty town"
 msgstr "K??kstad"
 
-#: src/lincity/lintypes.cpp:433
-#: src/lincity/modules/residence.cpp:292
-#: src/lincity-ng/MpsInterface.cpp:380
-#: src/lincity-ng/EconomyGraph.cpp:133
+#: src/lincity/lintypes.cpp:398 src/lincity/modules/residence.cpp:283
+#: src/lincity-ng/MpsInterface.cpp:383 src/lincity-ng/EconomyGraph.cpp:134
 msgid "Fire"
 msgstr "Brand"
 
-#: src/lincity/lintypes.cpp:446
+#: src/lincity/lintypes.cpp:410
 msgid "Used"
 msgstr "Bebyggd"
 
-#: src/lincity/lintypes.cpp:458
+#: src/lincity/lintypes.cpp:421
 msgid "Residential ML"
 msgstr "Bostadsomr??de MN"
 
-#: src/lincity/lintypes.cpp:470
+#: src/lincity/lintypes.cpp:432
 msgid "Residential HL"
 msgstr "Bostadsomr??de HN"
 
-#: src/lincity/lintypes.cpp:482
+#: src/lincity/lintypes.cpp:443
 msgid "Residential LH"
 msgstr "Bostadsomr??de"
 
-#: src/lincity/lintypes.cpp:494
+#: src/lincity/lintypes.cpp:454
 msgid "Residential MH"
 msgstr "Bostadsomr??de"
 
-#: src/lincity/lintypes.cpp:506
+#: src/lincity/lintypes.cpp:465
 msgid "Residential HH"
 msgstr "Bostadsomr??de"
 
-#: src/lincity/lintypes.cpp:477
+#: src/lincity/lintypes.cpp:476
 msgid "Water well"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:489
+#: src/lincity/lintypes.cpp:488
 msgid "Desert"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:501
+#: src/lincity/lintypes.cpp:500
 msgid "Tree"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:514
+#: src/lincity/lintypes.cpp:513
 msgid "Trees"
 msgstr ""
 
-#: src/lincity/lintypes.cpp:527
+#: src/lincity/lintypes.cpp:526
 msgid "Forest"
 msgstr ""
 
-#: src/lincity/ldsvguts.cpp:128
+#: src/lincity/ldsvguts.cpp:137
 #, c-format
 msgid "Save file <%s> - "
 msgstr "Spara filen <%s> - "
 
-#: src/lincity/ldsvguts.cpp:129
+#: src/lincity/ldsvguts.cpp:138
 msgid "Can't open save file!"
 msgstr "Kan inte ??ppna sparad fil!"
 
-#: src/lincity/ldsvguts.cpp:134
+#: src/lincity/ldsvguts.cpp:148
 msgid "Saving scene"
 msgstr "Sparar scenario"
 
-#: src/lincity/ldsvguts.cpp:334
+#: src/lincity/ldsvguts.cpp:362
 #, c-format
 msgid "Can't open <%s> (gzipped)"
 msgstr "Kan inte ??ppna <%s> (gzippad)"
 
-#: src/lincity/ldsvguts.cpp:352
+#: src/lincity/ldsvguts.cpp:395
 msgid "Loading scene"
 msgstr "Laddar scenario"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/fileutil.cpp:266 src/lincity/fileutil.cpp:310
+msgid "Error. Can't find LINCITY_HOME"
+msgstr "Fel. Kan inte hitta LINCITY_HOME"
+
+#: src/lincity/fileutil.cpp:512
+msgid "Error verifying package. Can't find colour.pal."
+msgstr "Fel vid verifiering av paket. Kan inte hitta filen colour.pal."
+
+#: src/lincity/fileutil.cpp:525 src/lincity/fileutil.cpp:533
+#, c-format
+msgid "Couldn't create the save directory '%s'\n"
+msgstr "Kunde inte skapa mapp f??r sparade spel \"%s\"\n"
+
+#: src/lincity/fileutil.cpp:550
+#, c-format
+msgid "Out of memory: malloc failure\n"
+msgstr "Slut p?? minne: malloc misslyckades\n"
+
+#: src/lincity/simulate.cpp:97
+msgid ""
+"Upgrading from old game. You have 10 years to build water wells where "
+"needed. After, starvation will occur!  You should check starvation minimap, "
+"and read waterwell help page :-)"
+msgstr ""
+
+#: src/lincity/lclib.cpp:15
 msgid "Jan"
 msgstr "Jan"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Feb"
 msgstr "Feb"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Mar"
 msgstr "Mar"
 
-#: src/lincity/lclib.cpp:17
+#: src/lincity/lclib.cpp:15
 msgid "Apr"
 msgstr "Apr"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "May"
 msgstr "Maj"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jun"
 msgstr "Jun"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Jul"
 msgstr "Jul"
 
-#: src/lincity/lclib.cpp:18
+#: src/lincity/lclib.cpp:16
 msgid "Aug"
 msgstr "Aug"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Sep"
 msgstr "Sep"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Oct"
 msgstr "Okt"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Nov"
 msgstr "Nov"
 
-#: src/lincity/lclib.cpp:19
+#: src/lincity/lclib.cpp:17
 msgid "Dec"
 msgstr "Dec"
 
-#: src/lincity/modules/health_centre.cpp:66
+#: src/lincity/power.cpp:102
+msgid "You have too many power grids. Join some of them"
+msgstr "Du har f??r m??nga kraftledningar. Anslut n??gra av dem till varandra"
+
+#: src/lincity/modules/health_centre.cpp:58
 msgid "Health Centre"
 msgstr "Sjukhus"
 
-#: src/lincity/modules/health_centre.cpp:68
-#: src/lincity/modules/rocket_pad.cpp:245
-#: src/lincity/modules/recycle.cpp:181
-#: src/lincity/modules/mill.cpp:107
-#: src/lincity/modules/university.cpp:74
-#: src/lincity/modules/cricket.cpp:101
-#: src/lincity/modules/pottery.cpp:123
-#: src/lincity/modules/blacksmith.cpp:105
-#: src/lincity/modules/firestation.cpp:121
-#: src/lincity/modules/school.cpp:54
+#: src/lincity/modules/health_centre.cpp:60
+#: src/lincity/modules/rocket_pad.cpp:198 src/lincity/modules/recycle.cpp:148
+#: src/lincity/modules/mill.cpp:92 src/lincity/modules/university.cpp:65
+#: src/lincity/modules/cricket.cpp:93 src/lincity/modules/pottery.cpp:108
+#: src/lincity/modules/blacksmith.cpp:95 src/lincity/modules/school.cpp:48
+#: src/lincity/modules/firestation.cpp:110
 msgid "Inventory"
 msgstr "Lager"
 
-#: src/lincity/modules/health_centre.cpp:69
-#: src/lincity/modules/rocket_pad.cpp:246
-#: src/lincity/modules/market.cpp:1158
-#: src/lincity/modules/road.cpp:52
-#: src/lincity/modules/rail.cpp:55
-#: src/lincity/modules/coal_power.cpp:107
-#: src/lincity/modules/university.cpp:75
-#: src/lincity/modules/cricket.cpp:102
-#: src/lincity/modules/track.cpp:43
-#: src/lincity/modules/pottery.cpp:124
-#: src/lincity/modules/firestation.cpp:122
-#: src/lincity/modules/school.cpp:55
+#: src/lincity/modules/health_centre.cpp:61
+#: src/lincity/modules/rocket_pad.cpp:199 src/lincity/modules/market.cpp:984
+#: src/lincity/modules/road.cpp:47 src/lincity/modules/rail.cpp:51
+#: src/lincity/modules/coal_power.cpp:97 src/lincity/modules/university.cpp:66
+#: src/lincity/modules/cricket.cpp:94 src/lincity/modules/track.cpp:38
+#: src/lincity/modules/pottery.cpp:109 src/lincity/modules/school.cpp:49
+#: src/lincity/modules/firestation.cpp:111
 msgid "Jobs"
 msgstr "Jobb"
 
-#: src/lincity/modules/health_centre.cpp:71
-#: src/lincity/modules/rocket_pad.cpp:248
-#: src/lincity/modules/market.cpp:1162
-#: src/lincity/modules/port.cpp:357
-#: src/lincity/modules/road.cpp:56
-#: src/lincity/modules/rail.cpp:59
-#: src/lincity/modules/mill.cpp:108
-#: src/lincity/modules/university.cpp:77
-#: src/lincity/modules/cricket.cpp:104
-#: src/lincity/modules/track.cpp:47
-#: src/lincity/modules/pottery.cpp:126
-#: src/lincity/modules/blacksmith.cpp:106
-#: src/lincity/modules/firestation.cpp:124
-#: src/lincity/modules/school.cpp:57
-#: src/lincity-ng/MpsInterface.cpp:448
+#: src/lincity/modules/health_centre.cpp:62
+#: src/lincity/modules/rocket_pad.cpp:200 src/lincity/modules/market.cpp:986
+#: src/lincity/modules/port.cpp:298 src/lincity/modules/road.cpp:49
+#: src/lincity/modules/rail.cpp:53 src/lincity/modules/mill.cpp:93
+#: src/lincity/modules/university.cpp:67 src/lincity/modules/cricket.cpp:95
+#: src/lincity/modules/track.cpp:40 src/lincity/modules/pottery.cpp:110
+#: src/lincity/modules/blacksmith.cpp:96 src/lincity/modules/school.cpp:50
+#: src/lincity/modules/firestation.cpp:112 src/lincity-ng/MpsInterface.cpp:451
 msgid "Goods"
 msgstr "Varor"
 
-#: src/lincity/modules/rocket_pad.cpp:239
+#: src/lincity/modules/rocket_pad.cpp:192
 msgid "Rocket Pad"
 msgstr "Raketavfyrningsramp"
 
-#: src/lincity/modules/rocket_pad.cpp:242
+#: src/lincity/modules/rocket_pad.cpp:195
 msgid "Completion"
 msgstr "F??rdigst??lld"
 
-#: src/lincity/modules/rocket_pad.cpp:250
-#: src/lincity/modules/market.cpp:1166
-#: src/lincity/modules/port.cpp:361
-#: src/lincity/modules/road.cpp:60
-#: src/lincity/modules/rail.cpp:63
-#: src/lincity/modules/light_industry.cpp:368
-#: src/lincity/modules/commune.cpp:156
-#: src/lincity/modules/track.cpp:51
+#: src/lincity/modules/rocket_pad.cpp:201 src/lincity/modules/market.cpp:988
+#: src/lincity/modules/port.cpp:302 src/lincity/modules/road.cpp:51
+#: src/lincity/modules/rail.cpp:55 src/lincity/modules/light_industry.cpp:288
+#: src/lincity/modules/commune.cpp:182 src/lincity/modules/track.cpp:42
 msgid "Steel"
 msgstr "St??l"
 
-#: src/lincity/modules/windmill.cpp:79
-#: src/lincity/modules/recycle.cpp:178
-#: src/lincity/modules/coal_power.cpp:109
-#: src/lincity/modules/organic_farm.cpp:224
-#: src/lincity/modules/solar_power.cpp:57
+#: src/lincity/modules/windmill.cpp:76 src/lincity/modules/recycle.cpp:146
+#: src/lincity/modules/coal_power.cpp:98
+#: src/lincity/modules/organic_farm.cpp:230
+#: src/lincity/modules/solar_power.cpp:60
 msgid "Tech"
 msgstr "Teknologi"
 
-#: src/lincity/modules/windmill.cpp:84
+#: src/lincity/modules/windmill.cpp:80
 msgid "Local Status"
 msgstr "Lokal status"
 
-#: src/lincity/modules/windmill.cpp:87
+#: src/lincity/modules/windmill.cpp:83
 msgid "Prod."
 msgstr "Produktion"
 
-#: src/lincity/modules/windmill.cpp:90
-#: src/lincity/modules/windmill.cpp:103
-#: src/lincity/modules/substation.cpp:113
+#: src/lincity/modules/windmill.cpp:86 src/lincity/modules/windmill.cpp:99
+#: src/lincity/modules/substation.cpp:110
 msgid "Demand"
 msgstr "Krav"
 
-#: src/lincity/modules/windmill.cpp:94
-#: src/lincity/modules/substation.cpp:104
+#: src/lincity/modules/windmill.cpp:90 src/lincity/modules/substation.cpp:101
 msgid "Grid Status"
 msgstr "N??t status"
 
-#: src/lincity/modules/windmill.cpp:97
-#: src/lincity/modules/substation.cpp:107
+#: src/lincity/modules/windmill.cpp:93 src/lincity/modules/substation.cpp:104
 msgid "T. Cap."
 msgstr "T. Cap."
 
-#: src/lincity/modules/windmill.cpp:100
-#: src/lincity/modules/substation.cpp:110
+#: src/lincity/modules/windmill.cpp:96 src/lincity/modules/substation.cpp:107
 msgid "A. Cap."
 msgstr "A. Cap."
 
-#: src/lincity/modules/windmill.cpp:106
-#: src/lincity/modules/coal_power.cpp:111
-#: src/lincity/modules/substation.cpp:116
-#: src/lincity/modules/power_line.cpp:53
-#: src/lincity/modules/solar_power.cpp:59
+#: src/lincity/modules/windmill.cpp:102 src/lincity/modules/coal_power.cpp:99
+#: src/lincity/modules/substation.cpp:113
+#: src/lincity/modules/power_line.cpp:49
+#: src/lincity/modules/solar_power.cpp:61
 msgid "Grid ID"
 msgstr "N??t ID"
 
-#: src/lincity/modules/water.cpp:22
-#: src/lincity/modules/commune.cpp:151
-#: src/lincity/modules/commune.cpp:153
-#: src/lincity/modules/commune.cpp:155
-#: src/lincity/modules/commune.cpp:157
-#: src/lincity-ng/MpsInterface.cpp:379
-#: src/lincity-ng/MpsInterface.cpp:382
-#: src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/waterwell.cpp:50
+#: src/lincity/modules/commune.cpp:177 src/lincity/modules/commune.cpp:179
+#: src/lincity/modules/commune.cpp:181 src/lincity/modules/commune.cpp:183
+#: src/lincity-ng/MpsInterface.cpp:382 src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity-ng/MpsInterface.cpp:388
 msgid "Yes"
 msgstr "Ja"
 
-#: src/lincity/modules/water.cpp:22
-#: src/lincity/modules/commune.cpp:151
-#: src/lincity/modules/commune.cpp:153
-#: src/lincity/modules/commune.cpp:155
-#: src/lincity/modules/commune.cpp:157
-#: src/lincity-ng/MpsInterface.cpp:379
-#: src/lincity-ng/MpsInterface.cpp:382
-#: src/lincity-ng/MpsInterface.cpp:385
+#: src/lincity/modules/water.cpp:20 src/lincity/modules/commune.cpp:177
+#: src/lincity/modules/commune.cpp:179 src/lincity/modules/commune.cpp:181
+#: src/lincity/modules/commune.cpp:183 src/lincity-ng/MpsInterface.cpp:382
+#: src/lincity-ng/MpsInterface.cpp:385 src/lincity-ng/MpsInterface.cpp:388
 msgid "No"
 msgstr "Nej"
 
-#: src/lincity/modules/water.cpp:23
+#: src/lincity/modules/water.cpp:21
 msgid "Navigable"
 msgstr "Navigeringsbar"
 
-#: src/lincity/modules/recycle.cpp:169
+#: src/lincity/modules/recycle.cpp:137
 msgid "Recycling"
 msgstr "??tervinning"
 
-#: src/lincity/modules/recycle.cpp:170
+#: src/lincity/modules/recycle.cpp:138
 msgid "Center"
 msgstr "Centrum"
 
-#: src/lincity/modules/recycle.cpp:173
-#: src/lincity/modules/heavy_industry.cpp:351
-#: src/lincity/modules/mill.cpp:105
-#: src/lincity/modules/light_industry.cpp:370
-#: src/lincity/modules/university.cpp:79
-#: src/lincity/modules/pottery.cpp:121
-#: src/lincity/modules/blacksmith.cpp:103
-#: src/lincity/modules/school.cpp:60
+#: src/lincity/modules/recycle.cpp:141
+#: src/lincity/modules/heavy_industry.cpp:288 src/lincity/modules/mill.cpp:90
+#: src/lincity/modules/light_industry.cpp:289
+#: src/lincity/modules/university.cpp:68 src/lincity/modules/pottery.cpp:106
+#: src/lincity/modules/blacksmith.cpp:93 src/lincity/modules/school.cpp:52
 msgid "Capacity"
 msgstr "Kapacitet"
 
-#: src/lincity/modules/recycle.cpp:175
-#: src/lincity/modules/residence.cpp:279
-#: src/lincity/modules/residence.cpp:282
-#: src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/residence.cpp:288
-#: src/lincity/modules/residence.cpp:291
-#: src/lincity/modules/residence.cpp:294
-#: src/lincity/modules/light_industry.cpp:359
-#: src/lincity/modules/organic_farm.cpp:217
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
+#: src/lincity/modules/light_industry.cpp:281
+#: src/lincity/modules/organic_farm.cpp:223
 msgid "YES"
 msgstr "JA"
 
-#: src/lincity/modules/recycle.cpp:175
-#: src/lincity/modules/residence.cpp:279
-#: src/lincity/modules/residence.cpp:282
-#: src/lincity/modules/residence.cpp:285
-#: src/lincity/modules/residence.cpp:288
-#: src/lincity/modules/residence.cpp:291
-#: src/lincity/modules/residence.cpp:294
-#: src/lincity/modules/heavy_industry.cpp:339
-#: src/lincity/modules/light_industry.cpp:359
+#: src/lincity/modules/recycle.cpp:143 src/lincity/modules/residence.cpp:263
+#: src/lincity/modules/residence.cpp:267 src/lincity/modules/residence.cpp:270
+#: src/lincity/modules/residence.cpp:273 src/lincity/modules/residence.cpp:279
+#: src/lincity/modules/residence.cpp:282 src/lincity/modules/residence.cpp:285
+#: src/lincity/modules/heavy_industry.cpp:279
+#: src/lincity/modules/light_industry.cpp:281
 msgid "NO"
 msgstr "NEJ"
 
-#: src/lincity/modules/recycle.cpp:176
-#: src/lincity/modules/residence.cpp:280
-#: src/lincity/modules/heavy_industry.cpp:342
-#: src/lincity/modules/light_industry.cpp:360
-#: src/lincity/modules/organic_farm.cpp:221
+#: src/lincity/modules/recycle.cpp:144 src/lincity/modules/residence.cpp:271
+#: src/lincity/modules/heavy_industry.cpp:282
+#: src/lincity/modules/light_industry.cpp:282
+#: src/lincity/modules/organic_farm.cpp:227
 msgid "Power"
 msgstr "Str??m"
 
-#: src/lincity/modules/recycle.cpp:182
-#: src/lincity/modules/heavy_industry.cpp:347
-#: src/lincity/modules/market.cpp:1164
-#: src/lincity/modules/port.cpp:353
-#: src/lincity/modules/road.cpp:58
-#: src/lincity/modules/rail.cpp:61
-#: src/lincity/modules/light_industry.cpp:366
-#: src/lincity/modules/commune.cpp:154
-#: src/lincity/modules/track.cpp:49
-#: src/lincity/modules/pottery.cpp:128
+#: src/lincity/modules/recycle.cpp:149
+#: src/lincity/modules/heavy_industry.cpp:286
+#: src/lincity/modules/market.cpp:987 src/lincity/modules/port.cpp:294
+#: src/lincity/modules/road.cpp:50 src/lincity/modules/rail.cpp:54
+#: src/lincity/modules/light_industry.cpp:287
+#: src/lincity/modules/commune.cpp:180 src/lincity/modules/track.cpp:41
+#: src/lincity/modules/pottery.cpp:111
 msgid "Ore"
 msgstr "Malm"
 
-#: src/lincity/modules/recycle.cpp:184
-#: src/lincity/modules/market.cpp:1168
-#: src/lincity/modules/road.cpp:62
-#: src/lincity/modules/rail.cpp:65
-#: src/lincity/modules/commune.cpp:158
-#: src/lincity/modules/track.cpp:53
+#: src/lincity/modules/recycle.cpp:150 src/lincity/modules/market.cpp:989
+#: src/lincity/modules/road.cpp:52 src/lincity/modules/rail.cpp:56
+#: src/lincity/modules/commune.cpp:184 src/lincity/modules/track.cpp:43
 msgid "Waste"
 msgstr "Skr??p"
 
-#: src/lincity/modules/coalmine.cpp:168
+#: src/lincity/modules/coalmine.cpp:132
 msgid "Coal Mine"
 msgstr "Kolgruva"
 
-#: src/lincity/modules/coalmine.cpp:171
-#: src/lincity/modules/oremine.cpp:186
+#: src/lincity/modules/coalmine.cpp:135 src/lincity/modules/oremine.cpp:144
 msgid "Stock"
 msgstr "Lager"
 
-#: src/lincity/modules/coalmine.cpp:175
-#: src/lincity/modules/coalmine.cpp:177
-#: src/lincity/modules/oremine.cpp:190
+#: src/lincity/modules/coalmine.cpp:138 src/lincity/modules/coalmine.cpp:140
+#: src/lincity/modules/oremine.cpp:147
 msgid "Reserve"
 msgstr "Reserv"
 
-#: src/lincity/modules/coalmine.cpp:177
+#: src/lincity/modules/coalmine.cpp:140
 msgid "EMPTY"
 msgstr "TOM"
 
-#: src/lincity/modules/residence.cpp:273
+#: src/lincity/modules/residence.cpp:255
 msgid "Residence"
 msgstr "Bostad"
 
-#: src/lincity/modules/residence.cpp:277
+#: src/lincity/modules/residence.cpp:259
 msgid "People"
 msgstr "Folk"
 
-#: src/lincity/modules/residence.cpp:283
+#: src/lincity/modules/residence.cpp:268
 msgid "Fed"
 msgstr "Matade"
 
-#: src/lincity/modules/residence.cpp:286
+#: src/lincity/modules/residence.cpp:274
 msgid "Employed"
 msgstr "Anst??llda"
 
-#: src/lincity/modules/residence.cpp:299
-#: src/lincity-ng/MpsInterface.cpp:393
+#: src/lincity/modules/residence.cpp:276 src/lincity-ng/MpsInterface.cpp:396
 msgid "good"
 msgstr "bra"
 
-#: src/lincity/modules/residence.cpp:299
+#: src/lincity/modules/residence.cpp:276
 msgid "poor"
 msgstr "d??lig"
 
-#: src/lincity/modules/residence.cpp:300
+#: src/lincity/modules/residence.cpp:277
 msgid "Job"
 msgstr "Jobb"
 
-#: src/lincity/modules/residence.cpp:289
+#: src/lincity/modules/residence.cpp:280
 msgid "Health Cvr"
 msgstr "Sjukhust??."
 
-#: src/lincity/modules/residence.cpp:295
-#: src/lincity-ng/MpsInterface.cpp:386
-#: src/lincity-ng/MpsInterface.cpp:514
+#: src/lincity/modules/residence.cpp:286 src/lincity-ng/MpsInterface.cpp:389
+#: src/lincity-ng/MpsInterface.cpp:517
 msgid "Sport"
 msgstr "Sport"
 
-#: src/lincity/modules/residence.cpp:297
-#: src/lincity-ng/MpsInterface.cpp:388
+#: src/lincity/modules/residence.cpp:288 src/lincity/modules/waterwell.cpp:47
+#: src/lincity-ng/MpsInterface.cpp:391
 msgid "Pollution"
 msgstr "Milj??f??rst??ring"
 
-#: src/lincity/modules/monument.cpp:63
+#: src/lincity/modules/monument.cpp:57
 msgid "Wisdom Bestowed"
 msgstr "Visdom sk??nker"
 
-#: src/lincity/modules/monument.cpp:67
+#: src/lincity/modules/monument.cpp:61
 #, c-format
 msgid "% Complete"
 msgstr "% f??rdig"
 
-#: src/lincity/modules/heavy_industry.cpp:328
+#: src/lincity/modules/waterwell.cpp:44
+msgid "Water_well"
+msgstr ""
+
+#: src/lincity/modules/waterwell.cpp:51
+msgid "Drinkable"
+msgstr ""
+
+#: src/lincity/modules/heavy_industry.cpp:268
 msgid "Heavy"
 msgstr "Tung"
 
-#: src/lincity/modules/heavy_industry.cpp:329
-#: src/lincity/modules/light_industry.cpp:355
+#: src/lincity/modules/heavy_industry.cpp:269
+#: src/lincity/modules/light_industry.cpp:277
 msgid "Industry"
 msgstr "Industri"
 
-#: src/lincity/modules/heavy_industry.cpp:334
-#: src/lincity/modules/heavy_industry.cpp:349
-#: src/lincity/modules/market.cpp:1160
-#: src/lincity/modules/port.cpp:349
-#: src/lincity/modules/road.cpp:54
-#: src/lincity/modules/rail.cpp:57
-#: src/lincity/modules/coal_power.cpp:91
-#: src/lincity/modules/coal_power.cpp:105
-#: src/lincity/modules/mill.cpp:112
-#: src/lincity/modules/commune.cpp:152
-#: src/lincity/modules/track.cpp:45
-#: src/lincity/modules/pottery.cpp:130
-#: src/lincity/modules/blacksmith.cpp:108
-#: src/lincity-ng/MpsInterface.cpp:444
+#: src/lincity/modules/heavy_industry.cpp:274
+#: src/lincity/modules/heavy_industry.cpp:287
+#: src/lincity/modules/market.cpp:985 src/lincity/modules/port.cpp:290
+#: src/lincity/modules/road.cpp:48 src/lincity/modules/rail.cpp:52
+#: src/lincity/modules/coal_power.cpp:82 src/lincity/modules/coal_power.cpp:96
+#: src/lincity/modules/mill.cpp:95 src/lincity/modules/commune.cpp:178
+#: src/lincity/modules/track.cpp:39 src/lincity/modules/pottery.cpp:112
+#: src/lincity/modules/blacksmith.cpp:97 src/lincity-ng/MpsInterface.cpp:447
 msgid "Coal"
 msgstr "Kol"
 
-#: src/lincity/modules/heavy_industry.cpp:336
+#: src/lincity/modules/heavy_industry.cpp:276
 msgid "Grid"
 msgstr "N??t"
 
-#: src/lincity/modules/heavy_industry.cpp:344
-#: src/lincity/modules/light_industry.cpp:362
+#: src/lincity/modules/heavy_industry.cpp:284
+#: src/lincity/modules/light_industry.cpp:284
 msgid "Output"
 msgstr "Produktion"
 
-#: src/lincity/modules/heavy_industry.cpp:345
-#: src/lincity/modules/light_industry.cpp:364
+#: src/lincity/modules/heavy_industry.cpp:285
+#: src/lincity/modules/light_industry.cpp:286
 msgid "Store"
 msgstr "Lager"
 
-#: src/lincity/modules/market.cpp:1156
-#: src/lincity/modules/port.cpp:345
-#: src/lincity/modules/road.cpp:50
-#: src/lincity/modules/rail.cpp:53
-#: src/lincity/modules/mill.cpp:110
-#: src/lincity/modules/track.cpp:41
+#: src/lincity/modules/market.cpp:983 src/lincity/modules/port.cpp:286
+#: src/lincity/modules/road.cpp:46 src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/mill.cpp:94 src/lincity/modules/track.cpp:37
 msgid "Food"
 msgstr "Mat"
 
-#: src/lincity/modules/port.cpp:365
-#: src/lincity-ng/MpsInterface.cpp:532
+#: src/lincity/modules/port.cpp:306 src/lincity-ng/MpsInterface.cpp:535
 msgid "Total"
 msgstr "Totalt"
 
-#: src/lincity/modules/rail.cpp:50
+#: src/lincity/modules/rail.cpp:47
 msgid "Rail"
 msgstr "J??rnv??g"
 
-#: src/lincity/modules/coal_power.cpp:92
-#: src/lincity/modules/solar_power.cpp:44
+#: src/lincity/modules/coal_power.cpp:83
+#: src/lincity/modules/solar_power.cpp:47
 msgid "Power Station"
 msgstr "Kraftverk"
 
-#: src/lincity/modules/coal_power.cpp:96
-#: src/lincity/modules/solar_power.cpp:48
+#: src/lincity/modules/coal_power.cpp:87
+#: src/lincity/modules/solar_power.cpp:51
 msgid "Max Output"
 msgstr "Max produktion"
 
-#: src/lincity/modules/coal_power.cpp:101
-#: src/lincity/modules/solar_power.cpp:53
+#: src/lincity/modules/coal_power.cpp:92
+#: src/lincity/modules/solar_power.cpp:56
 msgid "Current Output"
 msgstr "Nuvarande produktion"
 
-#: src/lincity/modules/substation.cpp:100
+#: src/lincity/modules/substation.cpp:97
 msgid "Local Demand"
 msgstr "Lokala krav"
 
-#: src/lincity/modules/mill.cpp:103
+#: src/lincity/modules/mill.cpp:88
 msgid "Textile Mill"
 msgstr "Textilfabrik"
 
-#: src/lincity/modules/oremine.cpp:183
+#: src/lincity/modules/oremine.cpp:141
 msgid "Ore Mine"
 msgstr "Malmgruva"
 
-#: src/lincity/modules/power_line.cpp:50
+#: src/lincity/modules/power_line.cpp:46
 msgid "Power Line"
 msgstr "Kraftledning"
 
-#: src/lincity/modules/light_industry.cpp:354
+#: src/lincity/modules/light_industry.cpp:276
 msgid "Light"
 msgstr "L??tt"
 
-#: src/lincity/modules/university.cpp:69
+#: src/lincity/modules/university.cpp:61
 msgid "Tech Produced"
 msgstr "Teknologi producerad"
 
-#: src/lincity/modules/tip.cpp:109
+#: src/lincity/modules/tip.cpp:100
 msgid "Landfill"
 msgstr "Landfyllning"
 
-#: src/lincity/modules/tip.cpp:112
+#: src/lincity/modules/tip.cpp:103
 msgid "Last Month"
 msgstr "F??reg??ende m??nad"
 
-#: src/lincity/modules/tip.cpp:113
+#: src/lincity/modules/tip.cpp:104
 msgid "Tons"
 msgstr "Ton"
 
-#: src/lincity/modules/tip.cpp:114
+#: src/lincity/modules/tip.cpp:105
 msgid "Percent"
 msgstr "Procent"
 
-#: src/lincity/modules/tip.cpp:117
+#: src/lincity/modules/tip.cpp:107
 #, c-format
 msgid "% Filled"
 msgstr "% fylld"
 
-#: src/lincity/modules/commune.cpp:149
+#: src/lincity/modules/commune.cpp:175
 msgid "Activity"
 msgstr "Aktivitet"
 
-#: src/lincity/modules/school.cpp:51
+#: src/lincity/modules/school.cpp:45
 msgid "Lessons Learned"
 msgstr "Lexor l??rda"
 
-#: src/lincity/modules/firestation.cpp:119
+#: src/lincity/modules/firestation.cpp:108
 msgid "Fire Station"
 msgstr "Brandstation"
 
-#: src/lincity/modules/organic_farm.cpp:213
+#: src/lincity/modules/organic_farm.cpp:219
 msgid "Organic Farm"
 msgstr "Organisk bondg??rd"
 
-#: src/lincity/modules/organic_farm.cpp:219
+#: src/lincity/modules/organic_farm.cpp:225
 msgid "NO "
 msgstr "NEJ"
 
-#: src/lincity/modules/organic_farm.cpp:228
+#: src/lincity/modules/organic_farm.cpp:233
 msgid "Prod"
 msgstr "Produktion"
 
-#: src/lincity/modules/organic_farm.cpp:238
+#: src/lincity/modules/organic_farm.cpp:239
 msgid "Debug info"
 msgstr ""
 
-#: src/lincity/modules/organic_farm.cpp:239
-msgid " max with power & water"
-msgstr ""
-
 #: src/lincity/modules/organic_farm.cpp:240
-msgid " number of tile with water"
+msgid "max with power&water"
 msgstr ""
 
 #: src/lincity/modules/organic_farm.cpp:241
-msgid " current production"
+msgid "N tiles with water"
 msgstr ""
 
-#: src/lincity/modules/solar_power.cpp:43
+#: src/lincity/modules/organic_farm.cpp:242
+#, fuzzy
+msgid "Current production"
+msgstr "Nuvarande produktion"
+
+#: src/lincity/modules/solar_power.cpp:46
 msgid "Solar"
 msgstr "Solkraft"
 
-#: src/lincity/modules/waterwell.cpp:44
-msgid "Water_well"
-msgstr ""
-
-#: src/lincity/modules/waterwell.cpp:51
-msgid "Drinkable"
-msgstr ""
-
 #: src/lincity-ng/Dialog.cpp:173
 msgid "Launchsite"
 msgstr "Avfyrningsramp"
 
-#: src/lincity-ng/Dialog.cpp:351
-#: src/lincity-ng/Dialog.cpp:352
+#: src/lincity-ng/Dialog.cpp:352 src/lincity-ng/Dialog.cpp:353
 msgid "----- IN TEST MODE -------"
 msgstr "----- I TESTL??GE -------"
 
-#: src/lincity-ng/Dialog.cpp:354
+#: src/lincity-ng/Dialog.cpp:355
 #, c-format
 msgid "Game statistics from LinCity-NG Version %s"
 msgstr "Spelstatistik fr??n LinCity-NG version %s"
 
-#: src/lincity-ng/Dialog.cpp:358
+#: src/lincity-ng/Dialog.cpp:359
 #, c-format
 msgid "Initial loaded scene - %s"
 msgstr "Initialt laddat scenario - %s"
 
-#: src/lincity-ng/Dialog.cpp:363
+#: src/lincity-ng/Dialog.cpp:364
 #, c-format
 msgid "Economy is sustainable"
 msgstr "Ekonomin ??r h??llbar"
 
-#: src/lincity-ng/Dialog.cpp:367
+#: src/lincity-ng/Dialog.cpp:368
 #, c-format
 msgid "Population  %d  of which  %d  are not housed."
 msgstr "Befolkning  %d av vilka  %d ??r bostadsl??sa."
 
-#: src/lincity-ng/Dialog.cpp:372
+#: src/lincity-ng/Dialog.cpp:373
 #, c-format
 msgid "Max population %d  Number evacuated %d Total births %d"
 msgstr "Max befolkning %d  Antal evakuerade %d  Antal nyf??dda %d"
 
-#: src/lincity-ng/Dialog.cpp:377
+#: src/lincity-ng/Dialog.cpp:378
 #, c-format
 msgid "Date %s %04d  Money %8d   Tech-level %5.1f (%5.1f)"
 msgstr "Datum %s %04d  Pengar %8d  Teknologiniv?? %5.1f (%5.1f)"
 
-#: src/lincity-ng/Dialog.cpp:384
+#: src/lincity-ng/Dialog.cpp:385
 #, c-format
 msgid ".Deaths by starvation %7d   History %8.3f"
 msgstr ".D??da av sv??lt          %7d   Historik %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:389
+#: src/lincity-ng/Dialog.cpp:390
 #, c-format
 msgid "Deaths from pollution %7d   History %8.3f"
 msgstr "D??da av milj??f??rst??ring %7d   Historik %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:393
+#: src/lincity-ng/Dialog.cpp:394
 #, c-format
 msgid "Years of unemployment %7d   History %8.3f"
 msgstr "??r av arbetsl??shet      %7d   Historik %8.3f"
 
-#: src/lincity-ng/Dialog.cpp:397
+#: src/lincity-ng/Dialog.cpp:398
 #, c-format
 msgid "Rockets launched %2d  Successful launches %2d"
 msgstr "Raketer avfyrade %2d  Lyckade avfyrningar %2d"
 
-#: src/lincity-ng/Dialog.cpp:408
+#: src/lincity-ng/Dialog.cpp:409
 #, c-format
 msgid ".   Residences %4d         Markets %4d            Farms %4d"
 msgstr ".     Bost??der %4d       Marknader %4d       Bondg??rdar %4d"
 
-#: src/lincity-ng/Dialog.cpp:419
+#: src/lincity-ng/Dialog.cpp:420
 #, c-format
 msgid ".    Monuments %4d         Schools %4d     Universities %4d"
 msgstr ".     Monument %4d          Skolor %4d      Universitet %4d"
 
-#: src/lincity-ng/Dialog.cpp:424
+#: src/lincity-ng/Dialog.cpp:425
 #, c-format
 msgid ".Fire stations %4d           Parks %4d    Sports fields %4d"
 msgstr ". Brandstation %4d          Parker %4d      Sportarenor %4d"
 
-#: src/lincity-ng/Dialog.cpp:429
+#: src/lincity-ng/Dialog.cpp:430
 #, c-format
 msgid "Health centres %4d            Tips %4d         Shanties %4d"
 msgstr "       Sjukhus %4d       Soptippar %4d        K??kst??der %4d"
 
-#: src/lincity-ng/Dialog.cpp:437
+#: src/lincity-ng/Dialog.cpp:438
 #, c-format
 msgid ".    Windmills %4d     Coal powers %4d     Solar powers %4d"
 msgstr ". V??derkvarnar %4d        Kolkraft %4d         Solkraft %4d"
 
-#: src/lincity-ng/Dialog.cpp:443
+#: src/lincity-ng/Dialog.cpp:444
 #, c-format
 msgid ".  Substations %4d     Power lines %4d            Ports %4d"
 msgstr ".Rel??stationer %4d    Kraftledning %4d           Hamnar %4d"
 
-#: src/lincity-ng/Dialog.cpp:448
+#: src/lincity-ng/Dialog.cpp:449
 #, c-format
 msgid ".       Tracks %4d           Roads %4d             Rail %4d"
 msgstr ".         Sp??r %4d           V??gar %4d          J??rnv??g %4d"
 
-#: src/lincity-ng/Dialog.cpp:456
+#: src/lincity-ng/Dialog.cpp:457
 #, c-format
 msgid ".    Potteries %4d     Blacksmiths %4d            Mills %4d"
 msgstr ".Keramikfabrik %4d         Smedjor %4d       Verkst??der %4d"
 
-#: src/lincity-ng/Dialog.cpp:461
+#: src/lincity-ng/Dialog.cpp:462
 #, c-format
 msgid ".   Light inds %4d      Heavy inds %4d        Recyclers %4d"
 msgstr ".   Industrier %4d   Tung industri %4d      ??tervinning %4d"
 
-#: src/lincity-ng/Dialog.cpp:466
+#: src/lincity-ng/Dialog.cpp:467
 #, c-format
 msgid ".   Coal mines %4d       Ore mines %4d         Communes %4d"
 msgstr ".    Kolgruvor %4d      Malmgruvor %4d         Kolmilor %4d"
 
-#: src/lincity-ng/ScreenInterface.cpp:261
+#: src/lincity-ng/ScreenInterface.cpp:264
 msgid "MM"
 msgstr "M"
 
-#: src/lincity-ng/GameView.cpp:1574
-#: src/lincity-ng/GameView.cpp:1605
-#: src/lincity-ng/ScreenInterface.cpp:272
+#: src/lincity-ng/ScreenInterface.cpp:275 src/lincity-ng/GameView.cpp:1609
+#: src/lincity-ng/GameView.cpp:1640
 msgid "$"
 msgstr "???"
 
-#: src/lincity-ng/GameView.cpp:236
+#: src/lincity-ng/GameView.cpp:237
 msgid "Minimap: outline map"
 msgstr "Minikarta: ??versiktskarta"
 
-#: src/lincity-ng/GameView.cpp:239
+#: src/lincity-ng/GameView.cpp:240
 msgid "Minimap: unemployment"
 msgstr "Minikarta: Arbetsl??shet"
 
-#: src/lincity-ng/GameView.cpp:242
+#: src/lincity-ng/GameView.cpp:243
 msgid "Minimap: pollution"
 msgstr "Minikarta: Milj??f??rst??ring"
 
-#: src/lincity-ng/GameView.cpp:245
+#: src/lincity-ng/GameView.cpp:246
 msgid "Minimap: nourishments"
 msgstr "Minikarta: matt??ckning"
 
-#: src/lincity-ng/GameView.cpp:248
+#: src/lincity-ng/GameView.cpp:249
 msgid "Minimap: power supply"
 msgstr "Minikarta: Str??mf??rs??rjning"
 
-#: src/lincity-ng/GameView.cpp:251
+#: src/lincity-ng/GameView.cpp:252
 msgid "Minimap: firedepartment cover"
 msgstr "Minikarta: Brandf??rsvarst??ckning"
 
-#: src/lincity-ng/GameView.cpp:254
+#: src/lincity-ng/GameView.cpp:255
 msgid "Minimap: sport cover"
 msgstr "Minikarta: sportt??ckning"
 
-#: src/lincity-ng/GameView.cpp:257
+#: src/lincity-ng/GameView.cpp:258
 msgid "Minimap: medical care"
 msgstr "Minikarta: sjukhust??ckning"
 
-#: src/lincity-ng/GameView.cpp:260
+#: src/lincity-ng/GameView.cpp:261
 msgid "Minimap: coal depots"
 msgstr "Minikarta: koldep??er"
 
-#: src/lincity-ng/GameView.cpp:263
+#: src/lincity-ng/GameView.cpp:264
 msgid "Minimap: traffic density"
 msgstr "Minikarta: trafikdensitet"
 
-#: src/lincity-ng/GameView.cpp:1569
+#: src/lincity-ng/GameView.cpp:1604
 msgid "Estimated Bulldoze Cost: "
 msgstr "Uppskattad rivningskostnad: "
 
-#: src/lincity-ng/GameView.cpp:1571
+#: src/lincity-ng/GameView.cpp:1606
 msgid "Bulldoze Cost: "
 msgstr "Rivningskostnad: "
 
-#: src/lincity-ng/GameView.cpp:1576
+#: src/lincity-ng/GameView.cpp:1611
 msgid "n/a"
 msgstr "ingen"
 
-#: src/lincity-ng/GameView.cpp:1594
+#: src/lincity-ng/GameView.cpp:1629
 msgid "Query Tool: Show information about selected building."
 msgstr "Fr??geverktyg: Visa information om vald byggnad."
 
-#: src/lincity-ng/GameView.cpp:1598
+#: src/lincity-ng/GameView.cpp:1633
 msgid "Bulldozer: remove building -price varies-"
 msgstr "Rivning: ta bort byggnad -kostnad varierar-"
 
-#: src/lincity-ng/GameView.cpp:1605
+#: src/lincity-ng/GameView.cpp:1640
 msgid ": Cost to build "
 msgstr ": Kostar att bygga "
 
-#: src/lincity-ng/GameView.cpp:1606
+#: src/lincity-ng/GameView.cpp:1641
 msgid ", to bulldoze "
 msgstr ", att riva "
 
-#: src/lincity-ng/GameView.cpp:1606
-#: src/lincity-ng/GameView.cpp:1609
+#: src/lincity-ng/GameView.cpp:1641 src/lincity-ng/GameView.cpp:1644
 msgid "$."
 msgstr "???."
 
-#: src/lincity-ng/GameView.cpp:1608
+#: src/lincity-ng/GameView.cpp:1643
 msgid " To build "
 msgstr " Att bygga "
 
-#: src/lincity-ng/GameView.cpp:1608
+#: src/lincity-ng/GameView.cpp:1643
 msgid " of them "
 msgstr " av dem "
 
-#: src/lincity-ng/GameView.cpp:1609
+#: src/lincity-ng/GameView.cpp:1644
 msgid "will cost about "
 msgstr "kommer att kosta ungef??r "
 
-#: src/lincity-ng/MainMenu.cpp:193
+#: src/lincity-ng/MainMenu.cpp:199
 msgid "empty"
 msgstr "tom"
 
-#: src/lincity-ng/MpsInterface.cpp:224
+#: src/lincity-ng/MpsInterface.cpp:227
 msgid "build something here"
 msgstr "bygg n??got h??r"
 
-#: src/lincity-ng/MpsInterface.cpp:226
+#: src/lincity-ng/MpsInterface.cpp:229
 msgid "no further information available"
 msgstr "ingen mer information tillg??nglig"
 
-#: src/lincity-ng/MpsInterface.cpp:378
+#: src/lincity-ng/MpsInterface.cpp:381
 msgid "Coverage"
 msgstr "T??ckning"
 
-#: src/lincity-ng/MpsInterface.cpp:383
+#: src/lincity-ng/MpsInterface.cpp:386
 msgid "Health"
 msgstr "H??lsa"
 
-#: src/lincity-ng/MpsInterface.cpp:391
+#: src/lincity-ng/MpsInterface.cpp:394
 msgid "clear"
 msgstr "rent"
 
-#: src/lincity-ng/MpsInterface.cpp:395
+#: src/lincity-ng/MpsInterface.cpp:398
 msgid "fair"
 msgstr "ok"
 
-#: src/lincity-ng/MpsInterface.cpp:397
+#: src/lincity-ng/MpsInterface.cpp:400
 msgid "smelly"
 msgstr "stinkigt"
 
-#: src/lincity-ng/MpsInterface.cpp:399
+#: src/lincity-ng/MpsInterface.cpp:402
 msgid "smokey"
 msgstr "r??kigt"
 
-#: src/lincity-ng/MpsInterface.cpp:401
+#: src/lincity-ng/MpsInterface.cpp:404
 msgid "smoggy"
 msgstr "smoggigt"
 
-#: src/lincity-ng/MpsInterface.cpp:403
+#: src/lincity-ng/MpsInterface.cpp:406
 msgid "bad"
 msgstr "d??lig"
 
-#: src/lincity-ng/MpsInterface.cpp:405
+#: src/lincity-ng/MpsInterface.cpp:408
 msgid "very bad"
 msgstr "mycket d??lig"
 
-#: src/lincity-ng/MpsInterface.cpp:407
+#: src/lincity-ng/MpsInterface.cpp:410
 msgid "death!"
 msgstr "d??d!"
 
-#: src/lincity-ng/MpsInterface.cpp:412
+#: src/lincity-ng/MpsInterface.cpp:415
 msgid "Bulldoze Cost"
 msgstr "Rivningskostnad"
 
-#: src/lincity-ng/MpsInterface.cpp:418
+#: src/lincity-ng/MpsInterface.cpp:421
 msgid "N/A"
 msgstr "ingen"
 
-#: src/lincity-ng/MpsInterface.cpp:436
+#: src/lincity-ng/MpsInterface.cpp:439
 msgid "Tax Income"
 msgstr "Skattad inkomst"
 
-#: src/lincity-ng/MpsInterface.cpp:440
+#: src/lincity-ng/MpsInterface.cpp:443
 msgid "Income"
 msgstr "Inkomst"
 
-#: src/lincity-ng/MpsInterface.cpp:452
+#: src/lincity-ng/MpsInterface.cpp:455
 msgid "Export"
 msgstr "Export"
 
-#: src/lincity-ng/MpsInterface.cpp:456
+#: src/lincity-ng/MpsInterface.cpp:459
 msgid "Expenses"
 msgstr "Utgifter"
 
-#: src/lincity-ng/MpsInterface.cpp:460
+#: src/lincity-ng/MpsInterface.cpp:463
 msgid "Unemp."
 msgstr "Arbetsl??s"
 
-#: src/lincity-ng/MpsInterface.cpp:464
+#: src/lincity-ng/MpsInterface.cpp:467
 msgid "Transport"
 msgstr "Transport"
 
-#: src/lincity-ng/MpsInterface.cpp:468
+#: src/lincity-ng/MpsInterface.cpp:471
 msgid "Imports"
 msgstr "Import"
 
-#: src/lincity-ng/MpsInterface.cpp:472
+#: src/lincity-ng/MpsInterface.cpp:475
 msgid "Others"
 msgstr "??vrigt"
 
-#: src/lincity-ng/MpsInterface.cpp:477
+#: src/lincity-ng/MpsInterface.cpp:480
 msgid "Net"
 msgstr "Netto"
 
-#: src/lincity-ng/MpsInterface.cpp:489
+#: src/lincity-ng/MpsInterface.cpp:492
 msgid "Other Costs"
 msgstr "Andra kostnader"
 
-#: src/lincity-ng/MpsInterface.cpp:494
+#: src/lincity-ng/MpsInterface.cpp:497
 msgid "For year"
 msgstr "F??r ??r"
 
-#: src/lincity-ng/MpsInterface.cpp:498
+#: src/lincity-ng/MpsInterface.cpp:501
 msgid "Interest"
 msgstr "R??nta"
 
-#: src/lincity-ng/MpsInterface.cpp:500
+#: src/lincity-ng/MpsInterface.cpp:503
 msgid "Schools"
 msgstr "Skolor"
 
-#: src/lincity-ng/MpsInterface.cpp:502
+#: src/lincity-ng/MpsInterface.cpp:505
 msgid "Univers."
 msgstr "Univers."
 
-#: src/lincity-ng/MpsInterface.cpp:504
+#: src/lincity-ng/MpsInterface.cpp:507
 msgid "Deaths"
 msgstr "D??dsfall"
 
-#: src/lincity-ng/MpsInterface.cpp:508
+#: src/lincity-ng/MpsInterface.cpp:511
 msgid "Hospital"
 msgstr "Sjukhus"
 
-#: src/lincity-ng/MpsInterface.cpp:510
+#: src/lincity-ng/MpsInterface.cpp:513
 msgid "Rockets"
 msgstr "Raketer"
 
-#: src/lincity-ng/MpsInterface.cpp:512
+#: src/lincity-ng/MpsInterface.cpp:515
 msgid "Fire Stn"
 msgstr "Brandstat"
 
-#: src/lincity-ng/MpsInterface.cpp:530
+#: src/lincity-ng/MpsInterface.cpp:533
 msgid "Population"
 msgstr "Befolkning"
 
-#: src/lincity-ng/MpsInterface.cpp:533
+#: src/lincity-ng/MpsInterface.cpp:536
 msgid "Housed"
 msgstr "Bebodda"
 
-#: src/lincity-ng/MpsInterface.cpp:534
+#: src/lincity-ng/MpsInterface.cpp:537
 msgid "Homeless"
 msgstr "Heml??sa"
 
-#: src/lincity-ng/MpsInterface.cpp:535
+#: src/lincity-ng/MpsInterface.cpp:538
 msgid "Shanties"
 msgstr "K??kst??der"
 
-#: src/lincity-ng/MpsInterface.cpp:536
+#: src/lincity-ng/MpsInterface.cpp:539
 msgid "Unn Dths"
 msgstr "Onorm d??d"
 
-#: src/lincity-ng/MpsInterface.cpp:537
+#: src/lincity-ng/MpsInterface.cpp:540
 msgid "Unemployment"
 msgstr "Arbetsl??shet"
 
-#: src/lincity-ng/MpsInterface.cpp:538
+#: src/lincity-ng/MpsInterface.cpp:541
 msgid "Claims"
 msgstr "Kr??ver"
 
-#: src/lincity-ng/MpsInterface.cpp:539
-#: src/lincity-ng/MpsInterface.cpp:544
+#: src/lincity-ng/MpsInterface.cpp:542 src/lincity-ng/MpsInterface.cpp:547
 msgid "Rate"
 msgstr "Grad"
 
-#: src/lincity-ng/MpsInterface.cpp:541
+#: src/lincity-ng/MpsInterface.cpp:544
 msgid "Starvation"
 msgstr "Sv??lt"
 
-#: src/lincity-ng/MpsInterface.cpp:542
+#: src/lincity-ng/MpsInterface.cpp:545
 msgid "Cases"
 msgstr "Fall"
 
-#: src/lincity-ng/ButtonPanel.cpp:198
+#: src/lincity-ng/ButtonPanel.cpp:200
 msgid "Query Tool"
 msgstr "Fr??geverktyg"
 
-#: src/lincity-ng/ButtonPanel.cpp:199
+#: src/lincity-ng/ButtonPanel.cpp:201
 msgid "Bulldozer"
 msgstr "Rivning"
 
-#: src/lincity-ng/ButtonPanel.cpp:201
+#: src/lincity-ng/ButtonPanel.cpp:203
 msgid "Residential: 50 denizens, low birthrate, high deathrate"
 msgstr "Bostadsomr??de: 50 inv??nare, l??g f??delsegrad, h??gt d??dstal"
 
-#: src/lincity-ng/ButtonPanel.cpp:202
+#: src/lincity-ng/ButtonPanel.cpp:204
 msgid "Residential: 100 denizens, high birthrate, low deathrate"
 msgstr "Bostadsomr??de: 100 inv??nare, h??g f??delsegrad, l??gt d??dstal"
 
-#: src/lincity-ng/ButtonPanel.cpp:203
+#: src/lincity-ng/ButtonPanel.cpp:205
 msgid "Residential: 200 denizens, high birthrate, high deathrate"
 msgstr "Bostadsomr??de: 200 inv??nare, h??g f??delsegrad, h??gt d??dstal"
 
-#: src/lincity-ng/ButtonPanel.cpp:204
+#: src/lincity-ng/ButtonPanel.cpp:206
 msgid "Residential: 100 denizens, low birthrate, high deathrate"
 msgstr "Bostadsomr??de: 100 inv??nare, l??g f??delsegrad, h??gt d??dstal"
 
-#: src/lincity-ng/ButtonPanel.cpp:205
+#: src/lincity-ng/ButtonPanel.cpp:207
 msgid "Residential: 200 denizens, high birthrate, low deathrate"
 msgstr "Bostadsomr??de: 200 inv??nare, h??g f??delsegrad, l??gt d??dstal"
 
-#: src/lincity-ng/ButtonPanel.cpp:206
+#: src/lincity-ng/ButtonPanel.cpp:208
 msgid "Residential: 400 denizens, high birthrate, high deathrate"
 msgstr "Bostadsomr??de: 400 inv??nare, h??g f??delsegrad, h??gt d??dstal"
 
-#: src/lincity-ng/ButtonPanel.cpp:215
+#: src/lincity-ng/ButtonPanel.cpp:217
 msgid " [Click right for help.]"
 msgstr " [H??gerklicka f??r hj??lp]"
 
-#: src/lincity-ng/ButtonPanel.cpp:243
-#: src/lincity-ng/ButtonPanel.cpp:277
+#: src/lincity-ng/ButtonPanel.cpp:245 src/lincity-ng/ButtonPanel.cpp:288
 #, c-format
 msgid "%s (Techlevel %.1f required.)"
 msgstr "%s (Teknologiniv?? %.1f kr??vs.)"
 
-#: src/lincity-ng/ButtonPanel.cpp:252
+#: src/lincity-ng/ButtonPanel.cpp:254
 #, c-format
 msgid "%s is disabled (loaded old game)."
 msgstr ""
 
-#: src/lincity-ng/EconomyGraph.cpp:123
+#: src/lincity-ng/EconomyGraph.cpp:124
 msgid "Mining"
 msgstr "Gruvdrift"
 
-#: src/lincity-ng/EconomyGraph.cpp:125
+#: src/lincity-ng/EconomyGraph.cpp:126
 msgid "Trade"
 msgstr "Handel"
 
-#: src/lincity-ng/EconomyGraph.cpp:127
+#: src/lincity-ng/EconomyGraph.cpp:128
 msgid "Money"
 msgstr "Pengar"
 
-#: src/lincity-ng/EconomyGraph.cpp:129
+#: src/lincity-ng/EconomyGraph.cpp:130
 msgid "Popul."
 msgstr "Befolk."
 
-#: src/lincity-ng/EconomyGraph.cpp:131
+#: src/lincity-ng/EconomyGraph.cpp:132
 msgid "Techn."
 msgstr "Teknologi"
 
-#: src/lincity-ng/EconomyGraph.cpp:136
+#: src/lincity-ng/EconomyGraph.cpp:137
 msgid "Economy Overview:"
 msgstr "Ekonomi??versikt:"
 
-#: src/lincity-ng/EconomyGraph.cpp:139
+#: src/lincity-ng/EconomyGraph.cpp:140
 msgid "Sustainability:"
 msgstr "H??llbarhet:"
 
-#: src/lincity-ng/EconomyGraph.cpp:142
+#: src/lincity-ng/EconomyGraph.cpp:143
 msgid "Frames per Second:"
 msgstr "Bilder per sekund:"
 
-#: src/lincity-ng/EconomyGraph.cpp:218
+#: src/lincity-ng/EconomyGraph.cpp:219
 msgid "You lose."
 msgstr "Du har f??rlorat."

Modified: trunk/src/lincity/modules/organic_farm.cpp
===================================================================
--- trunk/src/lincity/modules/organic_farm.cpp	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/src/lincity/modules/organic_farm.cpp	2007-12-04 00:32:10 UTC (rev 1309)
@@ -233,13 +233,15 @@
     snprintf(text, MPS_INFO_CHARS, "%s  %5.1f%%", _("Prod"), MP_INFO(x, y).int_4 * 100.0 / 1200.0);
     mps_store_title(i++, text);
 
+#ifdef DEBUG
     if (use_waterwell) {
         i++;
         mps_store_title(i++, _("Debug info"));
-        mps_store_sd(i++, _(" max with power & water"), MP_INFO(x + 1, y).int_3);
-        mps_store_sd(i++, _(" number of tile with water"), MP_INFO(x + 1, y).int_4);
-        mps_store_sd(i++, _(" current production"), MP_INFO(x + 1, y).int_5);
+        mps_store_sd(i++, _("max with power&water"), MP_INFO(x + 1, y).int_3);
+        mps_store_sd(i++, _("N tiles with water"), MP_INFO(x + 1, y).int_4);
+        mps_store_sd(i++, _("Current production"), MP_INFO(x + 1, y).int_5);
     }
+#endif
 
     /*
        char * p;

Added: trunk/src/tools/update_po.sh
===================================================================
--- trunk/src/tools/update_po.sh	2007-12-03 21:32:04 UTC (rev 1308)
+++ trunk/src/tools/update_po.sh	2007-12-04 00:32:10 UTC (rev 1309)
@@ -0,0 +1,7 @@
+#!/bin/bash
+mkdir -p orig
+cp -af *.po *.pot orig
+for f in `/bin/ls *.po`
+do
+    msgmerge orig/$f messages.pot>$f
+done


Property changes on: trunk/src/tools/update_po.sh
___________________________________________________________________
Name: svn:executable
   + *



