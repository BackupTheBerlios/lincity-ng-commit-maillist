From alainb at mail.berlios.de  Mon Jul  5 13:52:37 2010
From: alainb at mail.berlios.de (alainb at mail.berlios.de)
Date: Mon,  5 Jul 2010 13:52:37 +0200
Subject: [Lincity-ng-commit] r1587 - trunk
Message-ID: <20100705115237.3D4E2480E0D@sheep.berlios.de>

Author: alainb
Date: 2010-07-05 13:52:37 +0200 (Mon, 05 Jul 2010)
New Revision: 1587

Removed:
   trunk/runoldgui
Log:
delete obsole runoldgui

Deleted: trunk/runoldgui
===================================================================
--- trunk/runoldgui	2010-07-05 11:52:34 UTC (rev 1586)
+++ trunk/runoldgui	2010-07-05 11:52:37 UTC (rev 1587)
@@ -1,5 +0,0 @@
-#!/bin/bash
-export LINCITY_HOME=./data
-#set dummy default language, and let oldgui manage it correctly
-LANG=zz ./lincity_oldgui
-



From alainb at mail.berlios.de  Mon Jul  5 13:52:34 2010
From: alainb at mail.berlios.de (alainb at mail.berlios.de)
Date: Mon,  5 Jul 2010 13:52:34 +0200
Subject: [Lincity-ng-commit] r1586 - in trunk/src: gui_interface lincity
	lincity/modules lincity-ng
Message-ID: <20100705115235.043EF480E0A@sheep.berlios.de>

Author: alainb
Date: 2010-07-05 13:52:34 +0200 (Mon, 05 Jul 2010)
New Revision: 1586

Added:
   trunk/src/lincity/all_buildings.h
   trunk/src/lincity/groups.h
   trunk/src/lincity/range.h
   trunk/src/lincity/sustainable.h
Modified:
   trunk/src/gui_interface/screen_interface.h
   trunk/src/lincity-ng/ButtonPanel.cpp
   trunk/src/lincity-ng/EconomyGraph.cpp
   trunk/src/lincity-ng/GameView.cpp
   trunk/src/lincity-ng/MiniMap.cpp
   trunk/src/lincity-ng/Mps.cpp
   trunk/src/lincity-ng/MpsInterface.cpp
   trunk/src/lincity-ng/ScreenInterface.cpp
   trunk/src/lincity/engglobs.h
   trunk/src/lincity/engine.cpp
   trunk/src/lincity/init_game.cpp
   trunk/src/lincity/lin-city.h
   trunk/src/lincity/lintypes.cpp
   trunk/src/lincity/loadsave.cpp
   trunk/src/lincity/modules/coalmine.cpp
   trunk/src/lincity/modules/cricket.cpp
   trunk/src/lincity/modules/fire.cpp
   trunk/src/lincity/modules/firestation.cpp
   trunk/src/lincity/modules/health_centre.cpp
   trunk/src/lincity/modules/market.cpp
   trunk/src/lincity/modules/modules.h
   trunk/src/lincity/modules/monument.cpp
   trunk/src/lincity/modules/rocket_pad.cpp
   trunk/src/lincity/modules/substation.cpp
   trunk/src/lincity/modules/waterwell.cpp
   trunk/src/lincity/modules/windmill.cpp
   trunk/src/lincity/old_ldsvguts.cpp
   trunk/src/lincity/power.cpp
   trunk/src/lincity/simulate.cpp
   trunk/src/lincity/transport.cpp
Log:
headers cleanup and tiny dead code removal.
  attempt to better separate engine from interface

Modified: trunk/src/gui_interface/screen_interface.h
===================================================================
--- trunk/src/gui_interface/screen_interface.h	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/gui_interface/screen_interface.h	2010-07-05 11:52:34 UTC (rev 1586)
@@ -52,7 +52,6 @@
 void draw_small_yellow_bezel (int x, int y, int h, int w);
 void init_pbars (void);
 void mini_screen_help (void);
-void status_message(const char *m1, const char* m2);
 void print_time_for_year (void);
 void rotate_main_screen (void);
 void screen_setup (void);
@@ -63,9 +62,8 @@
 void mini_aux_handler(int x, int y, int button);
 /* Message area */
 void display_info_message (int colour, const char* ss, const char* xs);
-void reset_status_message (void);
 
-#define CB_SPACE 20 // space between checkbuttons for market/port
+#define CB_SPACE 20 // space between checkbuttons for market/port  // AL1 : unused in 2.x
 
 #endif	/* __screen_h__ */
 

Copied: trunk/src/lincity/all_buildings.h (from rev 1585, trunk/src/lincity/lin-city.h)
===================================================================
--- trunk/src/lincity/all_buildings.h	                        (rev 0)
+++ trunk/src/lincity/all_buildings.h	2010-07-05 11:52:34 UTC (rev 1586)
@@ -0,0 +1,749 @@
+/* ---------------------------------------------------------------------- *
+ * groups.h
+ * This file is part of lincity-ng
+ * Lincity is copyright (c) see CREDITS for more informations
+ *
+ * See COPYING COPYING-data.txt and COPYING-fonts.txt for licenses informations
+ * ---------------------------------------------------------------------- */
+
+#ifndef __all_buildings_h__
+#define __all_buildings_h__
+
+/************* Buildings stuff *********************/
+
+#define WINDMILL_POWER      450
+#define WINDMILL_JOBS       10
+/* WINDMILL_RCOST is days per quid */
+#define WINDMILL_RCOST      3
+#define ANTIQUE_WINDMILL_ANIM_SPEED 160
+#define MODERN_WINDMILL_ANIM_SPEED 120
+
+#define POWER_USE_PER_PERSON 3
+#define POWER_RES_OVERHEAD 30
+#define POWERS_COAL_OUTPUT 22000
+#define MAX_COAL_AT_POWER_STATION 100000
+
+#define MAX_ORE_AT_INDUSTRY_L 20000
+#define MAX_JOBS_AT_INDUSTRY_L 500
+#define MAX_GOODS_AT_INDUSTRY_L 65000
+#define INDUSTRY_L_GET_JOBS    120
+#define INDUSTRY_L_GET_ORE     600
+#define INDUSTRY_L_GET_STEEL   60
+#define INDUSTRY_L_JOBS_LOAD_ORE 1
+#define INDUSTRY_L_JOBS_LOAD_STEEL 4
+#define INDUSTRY_L_ORE_USED  125
+#define INDUSTRY_L_STEEL_USED  12
+#define INDUSTRY_L_JOBS_USED       30
+#define INDUSTRY_L_MAKE_GOODS 225
+#define MAX_STEEL_AT_INDUSTRY_L 2000
+#define MIN_JOBS_AT_INDUSTRY_L (INDUSTRY_L_JOBS_LOAD_ORE\
++INDUSTRY_L_JOBS_LOAD_STEEL+INDUSTRY_L_JOBS_USED)
+#define INDUSTRY_L_ANIM_SPEED 290
+#define INDUSTRY_L_POL_PER_GOOD 0.05
+#define INDUSTRY_L_POLLUTION    10
+
+#define MAX_ORE_AT_INDUSTRY_H 10000
+#define MAX_COAL_AT_INDUSTRY_H 1000
+#define MAX_MADE_AT_INDUSTRY_H MAX_ORE_AT_INDUSTRY_H/16
+#define POWER_MAKE_STEEL 200
+#define INDUSTRY_H_ANIM_SPEED  290
+
+#define DAYS_PER_POLLUTION      14
+#define POWERS_COAL_POLLUTION   20
+#define INDUSTRY_H_POLLUTION    10
+#define COALMINE_POLLUTION      3
+#define PORT_POLLUTION          1
+#define RAIL_POLLUTION          1
+#define DAYS_PER_RAIL_POLLUTION 30
+#define ROAD_POLLUTION          1
+#define DAYS_PER_ROAD_POLLUTION 20
+#define UNNAT_DEATHS_COST       500
+#define POL_DIV                 64      /* GCS -- from engine.c */
+
+
+#define INCOME_TAX_RATE 8
+#define COAL_TAX_RATE 20
+#define GOODS_TAX_RATE 1
+#define DOLE_RATE 15
+#define TRANSPORT_COST_RATE 14
+#define IM_PORT_COST_RATE 1
+#define PORT_FOOD_RATE    1
+#define PORT_JOBS_RATE    5
+#define PORT_COAL_RATE    50
+#define PORT_ORE_RATE     1
+#define PORT_GOODS_RATE   3
+#define PORT_STEEL_RATE   100
+/*
+  These next two control the stuff bought or sold as a % of what's on the
+  transport.  1000=100%  500=50% etc.
+*/
+#define PORT_EXPORT_RATE  500
+#define PORT_IMPORT_RATE  500
+#define MODERN_WINDMILL_TECH 450000
+
+#define BUILD_MONUMENT_JOBS     350000
+#define MONUMENT_GET_JOBS       100
+#define MONUMENT_DAYS_PER_TECH  3
+#define MONUMENT_TECH_EXPIRE    400
+#define MONUMENT_ANIM_SPEED     300
+
+#define BLACKSMITH_JOBS    35
+#define BLACKSMITH_GET_COAL 6
+#define MAX_GOODS_AT_BLACKSMITH 200
+#define MAX_COAL_AT_BLACKSMITH  100
+#define BLACKSMITH_STEEL_USED 1
+#define BLACKSMITH_COAL_USED  1
+#define GOODS_MADE_BY_BLACKSMITH 50
+#define BLACKSMITH_BATCH (GOODS_MADE_BY_BLACKSMITH*100)
+#define BLACKSMITH_ANIM_THRESHOLD 10
+#define BLACKSMITH_ANIM_SPEED    200
+
+#define MILL_JOBS          35
+#define MAX_GOODS_AT_MILL  200
+#define MAX_FOOD_AT_MILL   500
+#define MAX_COAL_AT_MILL   50
+#define GOODS_MADE_BY_MILL 75
+#define MILL_GET_FOOD      51
+#define MILL_GET_COAL      4
+#define MILL_POWER_PER_COAL 60
+#define FOOD_USED_BY_MILL  (GOODS_MADE_BY_MILL/2)
+#define COAL_USED_BY_MILL  1
+#define MILL_ANIM_THRESHOLD 10
+#define MILL_ANIM_SPEED    300
+
+#define SCHOOL_JOBS        50
+#define SCHOOL_GOODS	   75
+#define JOBS_MAKE_TECH_SCHOOL  200
+#define GOODS_MAKE_TECH_SCHOOL  75
+#define TECH_MADE_BY_SCHOOL    2
+#define MAX_JOBS_AT_SCHOOL     400
+#define MAX_GOODS_AT_SCHOOL    200
+#define SCHOOL_RUNNING_COST    2
+
+#define DAYS_BETWEEN_COVER (NUMOF_DAYS_IN_MONTH*3)
+#define DAYS_BETWEEN_FIRES (NUMOF_DAYS_IN_YEAR*2)
+#define FIRESTATION_JOBS   6
+#define FIRESTATION_GET_JOBS 7
+#define MAX_JOBS_AT_FIRESTATION (FIRESTATION_JOBS*NUMOF_DAYS_IN_YEAR)
+#define FIRESTATION_GOODS  2
+#define FIRESTATION_GET_GOODS 3
+#define MAX_GOODS_AT_FIRESTATION (FIRESTATION_GOODS*NUMOF_DAYS_IN_YEAR)
+#define FIRESTATION_RUNNING_COST 1
+#define FIRESTATION_RUNNING_COST_MUL 6
+#define FIRESTATION_ANIMATION_SPEED 250
+#define FIRE_ANIMATION_SPEED 350
+#define FIRE_DAYS_PER_SPREAD (NUMOF_DAYS_IN_YEAR/8)
+#define FIRE_LENGTH (NUMOF_DAYS_IN_YEAR*5)
+#define AFTER_FIRE_LENGTH (NUMOF_DAYS_IN_YEAR*10)
+
+#define CRICKET_JOBS   8
+#define CRICKET_GET_JOBS 9
+#define MAX_JOBS_AT_CRICKET (CRICKET_JOBS*NUMOF_DAYS_IN_YEAR)
+#define CRICKET_GOODS  2
+#define CRICKET_GET_GOODS 3
+#define MAX_GOODS_AT_CRICKET (CRICKET_GOODS*NUMOF_DAYS_IN_YEAR)
+#define CRICKET_RUNNING_COST 1
+#define CRICKET_ANIMATION_SPEED 750
+
+#define MAX_GOODS_AT_POTTERY     200
+#define POTTERY_ORE_MAKE_GOODS    11
+#define POTTERY_COAL_MAKE_GOODS    2
+#define POTTERY_JOBS              35
+#define MAX_ORE_AT_POTTERY        (POTTERY_ORE_MAKE_GOODS*60)
+#define POTTERY_GET_ORE           (POTTERY_ORE_MAKE_GOODS*20)
+#define MAX_COAL_AT_POTTERY       (POTTERY_COAL_MAKE_GOODS*60)
+#define POTTERY_GET_COAL          (POTTERY_COAL_MAKE_GOODS*21)
+#define MAX_JOBS_AT_POTTERY       (POTTERY_JOBS*20)
+#define POTTERY_GET_JOBS          (POTTERY_JOBS*2)
+#define POTTERY_MADE_GOODS        35
+#define POTTERY_ANIM_SPEED        280
+#define POTTERY_CLOSE_TIME        20
+
+#define UNIVERSITY_JOBS   250
+#define UNIVERSITY_JOBS_STORE 5000
+#define UNIVERSITY_GOODS  750
+#define UNIVERSITY_GOODS_STORE 7000
+#define UNIVERSITY_RUNNING_COST 23
+#define UNIVERSITY_TECH_MADE    4
+
+#define ROCKET_PAD_JOBS         1000
+#define ROCKET_PAD_JOBS_STORE   10000
+#define ROCKET_PAD_GOODS        10000
+#define ROCKET_PAD_GOODS_STORE  500000
+#define ROCKET_PAD_STEEL	500
+#define ROCKET_PAD_STEEL_STORE  12000
+#define ROCKET_PAD_RUNNING_COST 200
+#define ROCKET_PAD_LAUNCH       100
+#define ROCKET_ANIMATION_SPEED  450
+#define ROCKET_LAUNCH_BAD       1
+#define ROCKET_LAUNCH_GOOD      2
+#define ROCKET_LAUNCH_EVAC      3
+
+#define TIP_DEGRADE_TIME 200 * NUMOF_DAYS_IN_YEAR
+
+#define MAX_WASTE_AT_RECYCLE 20000
+#define BURN_WASTE_AT_RECYCLE (MAX_WASTE_AT_RECYCLE/200)
+#define MAX_ORE_AT_RECYCLE   (MAX_ORE_ON_RAIL*2)
+#define GOODS_RECYCLED       500
+#define RECYCLE_GOODS_JOBS   (GOODS_RECYCLED/50)
+#define RECYCLE_RUNNING_COST 3
+
+#define HEALTH_CENTRE_JOBS   6
+#define HEALTH_CENTRE_GET_JOBS 7
+#define MAX_JOBS_AT_HEALTH_CENTRE (HEALTH_CENTRE_JOBS*NUMOF_DAYS_IN_YEAR)
+#define HEALTH_CENTRE_GOODS  40
+#define HEALTH_CENTRE_GET_GOODS 41
+#define MAX_GOODS_AT_HEALTH_CENTRE (HEALTH_CENTRE_GOODS*NUMOF_DAYS_IN_YEAR)
+#define HEALTH_RUNNING_COST  2
+#define HEALTH_RUNNING_COST_MUL 9
+
+#define OREMINE_ANIMATION_SPEED 200
+
+#define MAX_FOOD_ON_TRACK 2048
+#define MAX_FOOD_ON_ROAD (MAX_FOOD_ON_TRACK*4)
+#define MAX_FOOD_ON_RAIL (MAX_FOOD_ON_TRACK*16)
+#define MAX_FOOD_IN_MARKET (MAX_FOOD_ON_RAIL*8)
+#define MARKET_FOOD_SEARCH_TRIGGER (MAX_FOOD_IN_MARKET/5)
+#define MAX_JOBS_ON_TRACK 1024
+#define MAX_JOBS_ON_ROAD (MAX_JOBS_ON_TRACK*5)
+#define MAX_JOBS_ON_RAIL (MAX_JOBS_ON_TRACK*25)
+#define MAX_JOBS_IN_MARKET (MAX_JOBS_ON_RAIL*3)
+#define MARKET_JOBS_SEARCH_TRIGGER (MAX_JOBS_IN_MARKET/5)
+#define MARKET_ANIM_SPEED 750
+#define WORKING_POP_PERCENT 45
+#define JOB_SWING 15
+#define HC_JOB_SWING 10
+#define CRICKET_JOB_SWING 4
+
+#define ORGANIC_FARM_FOOD_OUTPUT 550
+#define ORGANIC_FARM_ANIM_SPEED 3000
+#define FARM_JOBS_USED 13
+#define ORG_FARM_POWER_REC 50
+/* gets waste only when powered */
+#define ORG_FARM_WASTE_GET 6
+#define MIN_FOOD_SOLD_FOR_ANIM 200
+#define DAYS_PER_STARVE 20
+
+#define COAL_RESERVE_SIZE 10000
+#define ORE_RESERVE       1000
+#define MIN_ORE_RESERVE_FOR_MINE (ORE_RESERVE)
+#define MAX_COAL_AT_MINE 100000
+#define MAX_ORE_AT_MINE 100000
+#define JOBS_DIG_COAL 900
+#define JOBS_DIG_ORE  200
+#define JOBS_COALPS_GENERATE 100
+#define MAX_JOBS_AT_COALPS 2000
+#define JOBS_LOAD_COAL 18
+#define JOBS_LOAD_ORE  9
+#define JOBS_LOAD_STEEL 15
+#define JOBS_AT_COMMUNE_GATE 4
+#define COMMUNE_ANIM_SPEED 750
+#define COMMUNE_POP  5
+
+#define MAX_COAL_ON_TRACK 64
+#define MAX_COAL_ON_ROAD (MAX_COAL_ON_TRACK*8)
+#define MAX_COAL_ON_RAIL (MAX_COAL_ON_TRACK*64)
+#define MAX_COAL_IN_MARKET (MAX_COAL_ON_RAIL*2)
+#define MARKET_COAL_SEARCH_TRIGGER (MAX_COAL_IN_MARKET/5)
+
+#define MAX_GOODS_ON_TRACK 2048
+#define MAX_GOODS_ON_ROAD (MAX_GOODS_ON_TRACK*5)
+#define ROAD_GOODS_USED_MASK 0x1f
+#define MAX_GOODS_ON_RAIL (MAX_GOODS_ON_TRACK*25)
+#define RAIL_GOODS_USED_MASK 0xf
+#define MAX_GOODS_IN_MARKET (MAX_GOODS_ON_RAIL*4)
+#define MARKET_GOODS_SEARCH_TRIGGER (MAX_GOODS_IN_MARKET/5)
+#define MAX_ORE_ON_TRACK 4096
+#define MAX_ORE_ON_ROAD (MAX_ORE_ON_TRACK*4)
+#define MAX_ORE_ON_RAIL (MAX_ORE_ON_TRACK*16)
+#define MAX_ORE_IN_MARKET (MAX_ORE_ON_RAIL*2)
+#define MARKET_ORE_SEARCH_TRIGGER (MAX_ORE_IN_MARKET/5)
+
+#define MAX_STEEL_ON_TRACK 128
+#define MAX_STEEL_ON_ROAD (MAX_STEEL_ON_TRACK*4)
+#define MAX_STEEL_ON_RAIL (MAX_STEEL_ON_TRACK*16)
+#define RAIL_STEEL_USED_MASK 0x7f
+#define MAX_STEEL_AT_INDUSTRY_H (MAX_STEEL_ON_RAIL*10)
+
+#define MAX_WASTE_ON_TRACK 1024
+#define MAX_WASTE_ON_ROAD (MAX_WASTE_ON_TRACK*5)
+#define MAX_WASTE_ON_RAIL (MAX_WASTE_ON_TRACK*25)
+#define MAX_WASTE_IN_MARKET (MAX_WASTE_ON_RAIL*3)
+#define MARKET_WASTE_SEARCH_TRIGGER (MAX_WASTE_IN_MARKET/5)
+#define MAX_WASTE_AT_TIP  10000000
+#define WASTE_BURN_ON_TRANSPORT 20
+#define TRANSPORT_BURN_WASTE_COUNT 75000
+
+
+/*
+  JOBS_MAKE_STEEL is the steel made per job at the steel works
+  what's it doing here?
+ */
+#define JOBS_MAKE_STEEL 70
+/*
+  ORE_MAKE_STEEL is the ore used per unit of STEEL at a steel works
+  what's it doing here?
+ */
+#define ORE_MAKE_STEEL 17
+#define MAX_STEEL_IN_MARKET (MAX_STEEL_ON_RAIL*2)
+#define MARKET_STEEL_SEARCH_TRIGGER (MAX_STEEL_IN_MARKET/5)
+
+/* interest rate *10  ie 10 is 1% */
+#define INTEREST_RATE 15
+
+
+/******* Buildings // GROUPS ************/
+#define red(x) (32 + x)
+#define green(x) (64 + x)
+#define yellow(x) (96 + x)
+#define blue(x) (128 + x)
+#define magenta(x) (160 + x)
+#define cyan(x) (192 + x)
+#define white(x) (224 + x)
+
+#define GROUP_NAME_LEN   20
+
+#define GROUP_BARE 	   0
+#define GROUP_BARE_COLOUR  (green(12))
+#define GROUP_BARE_COST    0
+#define GROUP_BARE_COST_MUL 1
+#define GROUP_BARE_BUL_COST 1
+#define GROUP_BARE_TECH    0
+#define GROUP_BARE_FIREC   0
+
+#define GROUP_POWER_LINE   1
+#define GROUP_POWER_LINE_COLOUR (yellow(26))
+#define GROUP_POWER_LINE_COST 100
+#define GROUP_POWER_LINE_COST_MUL 2
+#define GROUP_POWER_LINE_BUL_COST 100
+#define GROUP_POWER_LINE_TECH 200
+#define GROUP_POWER_LINE_FIREC 0
+
+#define GROUP_SOLAR_POWER 2
+#define GROUP_SOLAR_POWER_COLOUR (yellow(22))
+#define GROUP_SOLAR_POWER_COST 500000
+#define GROUP_SOLAR_POWER_COST_MUL 5
+#define GROUP_SOLAR_POWER_BUL_COST 100000
+#define GROUP_SOLAR_POWER_TECH 500
+#define GROUP_SOLAR_POWER_FIREC 33
+#define SOLAR_POWER_JOBS 50
+#define POWERS_SOLAR_OUTPUT 1800
+
+#define GROUP_SUBSTATION   3
+#define GROUP_SUBSTATION_COLOUR (yellow(18))
+#define GROUP_SUBSTATION_COST 500
+#define GROUP_SUBSTATION_COST_MUL 2
+#define GROUP_SUBSTATION_BUL_COST 100
+#define GROUP_SUBSTATION_TECH 200
+#define GROUP_SUBSTATION_FIREC 50
+
+#define GROUP_RESIDENCE_LL 4
+#define GROUP_RESIDENCE_LL_COLOUR (cyan(24))
+#define GROUP_RESIDENCE_LL_COST 1000
+#define GROUP_RESIDENCE_LL_COST_MUL 25
+#define GROUP_RESIDENCE_LL_BUL_COST 1000
+#define GROUP_RESIDENCE_LL_TECH 0
+#define GROUP_RESIDENCE_LL_FIREC 75
+
+/* RESIDENCE?_BRM is the birth rate modifier */
+/* RESIDENCE?_DRM is the death rate modifier */
+#define RESIDENCE_BASE_BR     100
+#define RESIDENCE_BASE_DR     (68*12)
+#define RESIDENCE_BRM_HEALTH  5
+#define RESIDENCE1_BRM (RESIDENCE_BASE_BR*12)
+#define RESIDENCE1_DRM ((RESIDENCE_BASE_DR*3)/4)
+#define RESIDENCE2_BRM 0
+#define RESIDENCE2_DRM 0
+#define RESIDENCE3_BRM (RESIDENCE_BASE_BR+RESIDENCE_BASE_BR/4)
+#define RESIDENCE3_DRM ((RESIDENCE_BASE_DR)/2)
+#define RESIDENCE4_BRM (RESIDENCE_BASE_BR*18)
+#define RESIDENCE4_DRM ((RESIDENCE_BASE_DR*3)/4)
+#define RESIDENCE5_BRM (RESIDENCE_BASE_BR/2)
+#define RESIDENCE5_DRM ((RESIDENCE_BASE_DR)/4)
+#define RESIDENCE6_BRM 0
+#define RESIDENCE6_DRM ((RESIDENCE_BASE_DR)/4)
+/* RESIDENCE_PPM is the people_pool mobitily. Higher number=less mobile. */
+#define RESIDENCE_PPM   20
+
+#define GROUP_ORGANIC_FARM 5
+#define GROUP_ORGANIC_FARM_COLOUR (green(30))
+#define GROUP_ORGANIC_FARM_COST 1000
+#define GROUP_ORGANIC_FARM_COST_MUL 20
+#define GROUP_ORGANIC_FARM_BUL_COST 100
+#define GROUP_ORGANIC_FARM_TECH 0
+#define GROUP_ORGANIC_FARM_FIREC 20
+
+#define GROUP_MARKET       6
+#define GROUP_MARKET_COLOUR (blue(28))
+#define GROUP_MARKET_COST 100
+#define GROUP_MARKET_COST_MUL 25
+#define GROUP_MARKET_BUL_COST 100
+#define GROUP_MARKET_TECH 0
+#define GROUP_MARKET_FIREC 80
+
+#define GROUP_TRACK	   7
+#define GROUP_TRACK_COLOUR 32   /* 32 is a brown */
+#define GROUP_TRACK_COST   1
+#define GROUP_TRACK_COST_MUL 25
+#define GROUP_TRACK_BUL_COST   10
+#define GROUP_TRACK_TECH   0
+#define GROUP_TRACK_FIREC  4
+
+#define GROUP_COALMINE     8
+#define GROUP_COALMINE_COLOUR 0
+#define GROUP_COALMINE_COST   10000
+#define GROUP_COALMINE_COST_MUL 25
+#define GROUP_COALMINE_BUL_COST   10000
+#define GROUP_COALMINE_TECH   85
+#define GROUP_COALMINE_FIREC  85
+
+#define GROUP_RAIL         9
+#define GROUP_RAIL_COLOUR  (magenta(18))
+#define GROUP_RAIL_COST    500
+#define GROUP_RAIL_COST_MUL 10
+#define GROUP_RAIL_BUL_COST    1000
+#define GROUP_RAIL_TECH    180
+#define GROUP_RAIL_FIREC   6
+
+#define GROUP_COAL_POWER 10
+#define GROUP_COAL_POWER_COLOUR 0
+#define GROUP_COAL_POWER_COST   100000
+#define GROUP_COAL_POWER_COST_MUL 5
+#define GROUP_COAL_POWER_BUL_COST   200000
+#define GROUP_COAL_POWER_TECH   200
+#define GROUP_COAL_POWER_FIREC  80
+
+#define GROUP_ROAD         11
+#define GROUP_ROAD_COLOUR  (white(18))
+#define GROUP_ROAD_COST    100
+#define GROUP_ROAD_COST_MUL 25
+#define GROUP_ROAD_BUL_COST    50
+#define GROUP_ROAD_TECH    50
+#define GROUP_ROAD_FIREC   4
+
+#define GROUP_INDUSTRY_L   12
+#define GROUP_INDUSTRY_L_COLOUR (cyan(18))
+#define GROUP_INDUSTRY_L_COST 20000
+#define GROUP_INDUSTRY_L_COST_MUL 25
+#define GROUP_INDUSTRY_L_BUL_COST 20000
+#define GROUP_INDUSTRY_L_TECH 160
+#define GROUP_INDUSTRY_L_FIREC 70
+
+#define GROUP_UNIVERSITY   13
+#define GROUP_UNIVERSITY_COLOUR (blue(22))
+#define GROUP_UNIVERSITY_COST 20000
+#define GROUP_UNIVERSITY_COST_MUL 25
+#define GROUP_UNIVERSITY_BUL_COST 20000
+#define GROUP_UNIVERSITY_TECH 150
+#define GROUP_UNIVERSITY_FIREC 40
+
+#define GROUP_COMMUNE      14
+#define GROUP_COMMUNE_COLOUR (green(30))
+#define GROUP_COMMUNE_COST  1
+#define GROUP_COMMUNE_COST_MUL 2
+#define GROUP_COMMUNE_BUL_COST  1000
+#define GROUP_COMMUNE_TECH  0
+#define GROUP_COMMUNE_FIREC 30
+
+#define GROUP_OREMINE      15
+#define GROUP_OREMINE_COLOUR (red(18))
+#define GROUP_OREMINE_COST 500
+#define GROUP_OREMINE_COST_MUL 10
+#define GROUP_OREMINE_BUL_COST 500000
+#define GROUP_OREMINE_TECH 0
+#define GROUP_OREMINE_FIREC 0
+
+#define GROUP_TIP      16
+#define GROUP_TIP_COLOUR (white(16))
+#define GROUP_TIP_COST 10000
+#define GROUP_TIP_COST_MUL 25
+#define GROUP_TIP_BUL_COST 1000000
+#define GROUP_TIP_TECH 0
+#define GROUP_TIP_FIREC 50
+
+#define GROUP_PORT      17
+#define GROUP_PORT_COLOUR (blue(28))
+#define GROUP_PORT_COST 100000
+#define GROUP_PORT_COST_MUL 2
+#define GROUP_PORT_BUL_COST 1000
+#define GROUP_PORT_TECH 35
+#define GROUP_PORT_FIREC 50
+
+#define GROUP_INDUSTRY_H   18
+#define GROUP_INDUSTRY_H_COLOUR (7)     /* colour 7 is an orange, sort of */
+#define GROUP_INDUSTRY_H_COST 50000
+#define GROUP_INDUSTRY_H_COST_MUL 20
+#define GROUP_INDUSTRY_H_BUL_COST 70000
+#define GROUP_INDUSTRY_H_TECH 170
+#define GROUP_INDUSTRY_H_FIREC 80
+
+#define GROUP_PARKLAND     19
+#define GROUP_PARKLAND_COLOUR (green(31))
+#define GROUP_PARKLAND_COST   1000
+#define GROUP_PARKLAND_COST_MUL 25
+#define GROUP_PARKLAND_BUL_COST   1000
+#define GROUP_PARKLAND_TECH   2
+#define GROUP_PARKLAND_FIREC 1
+
+#define GROUP_RECYCLE      20
+#define GROUP_RECYCLE_COLOUR   (green(28))
+#define GROUP_RECYCLE_COST    100000
+#define GROUP_RECYCLE_COST_MUL 5
+#define GROUP_RECYCLE_BUL_COST    1000
+#define GROUP_RECYCLE_TECH    232
+#define GROUP_RECYCLE_FIREC 10
+
+#define GROUP_WATER	   21
+#define GROUP_WATER_COLOUR    (blue(31))
+#define GROUP_WATER_COST      1000000
+#define GROUP_WATER_COST_MUL 2
+#define GROUP_WATER_BUL_COST      1000000
+#define GROUP_WATER_TECH      0
+#define GROUP_WATER_FIREC 0
+
+#define GROUP_HEALTH       22
+#define GROUP_HEALTH_COLOUR   (green(24))
+#define GROUP_HEALTH_COST     100000
+#define GROUP_HEALTH_COST_MUL 2
+#define GROUP_HEALTH_BUL_COST     1000
+#define GROUP_HEALTH_TECH     110
+#define GROUP_HEALTH_FIREC 2
+
+#define GROUP_ROCKET	   23
+#define GROUP_ROCKET_COLOUR   (magenta(20))
+#define GROUP_ROCKET_COST     700000
+#define GROUP_ROCKET_COST_MUL 2
+#define GROUP_ROCKET_BUL_COST     1
+#define GROUP_ROCKET_TECH     750
+#define GROUP_ROCKET_FIREC 0
+
+#define GROUP_WINDMILL     24
+#define GROUP_WINDMILL_COLOUR (green(25))
+#define GROUP_WINDMILL_COST   20000
+#define GROUP_WINDMILL_COST_MUL 25
+#define GROUP_WINDMILL_BUL_COST   1000
+#define GROUP_WINDMILL_TECH   30
+#define GROUP_WINDMILL_FIREC  10
+
+#define GROUP_MONUMENT     25
+#define GROUP_MONUMENT_COLOUR (white(15))
+#define GROUP_MONUMENT_COST   10000
+#define GROUP_MONUMENT_COST_MUL 25
+#define GROUP_MONUMENT_BUL_COST   1000000
+#define GROUP_MONUMENT_TECH   0
+#define GROUP_MONUMENT_FIREC  0
+
+#define GROUP_SCHOOL     26
+#define GROUP_SCHOOL_COLOUR (white(15))
+#define GROUP_SCHOOL_COST   10000
+#define GROUP_SCHOOL_COST_MUL 25
+#define GROUP_SCHOOL_BUL_COST   10000
+#define GROUP_SCHOOL_TECH   1
+#define GROUP_SCHOOL_FIREC 40
+
+#define GROUP_BLACKSMITH     27
+#define GROUP_BLACKSMITH_COLOUR (white(15))
+#define GROUP_BLACKSMITH_COST   5000
+#define GROUP_BLACKSMITH_COST_MUL 25
+#define GROUP_BLACKSMITH_BUL_COST   1000
+#define GROUP_BLACKSMITH_TECH   3
+#define GROUP_BLACKSMITH_FIREC 60
+
+#define GROUP_MILL     28
+#define GROUP_MILL_COLOUR (white(15))
+#define GROUP_MILL_COST   10000
+#define GROUP_MILL_COST_MUL 25
+#define GROUP_MILL_BUL_COST   1000
+#define GROUP_MILL_TECH   25
+#define GROUP_MILL_FIREC  60
+
+#define GROUP_POTTERY  29
+#define GROUP_POTTERY_COLOUR (red(12))
+#define GROUP_POTTERY_COST   1000
+#define GROUP_POTTERY_COST_MUL 25
+#define GROUP_POTTERY_BUL_COST 1000
+#define GROUP_POTTERY_TECH  0
+#define GROUP_POTTERY_FIREC 50
+
+#define GROUP_FIRESTATION 30
+#define GROUP_FIRESTATION_COLOUR (red(20))
+#define GROUP_FIRESTATION_COST   20000
+#define GROUP_FIRESTATION_COST_MUL 10
+#define GROUP_FIRESTATION_BUL_COST 1000
+#define GROUP_FIRESTATION_TECH     22
+#define GROUP_FIRESTATION_FIREC 0
+
+#define GROUP_CRICKET 31
+#define GROUP_CRICKET_COLOUR (white(20))
+#define GROUP_CRICKET_COST   2000
+#define GROUP_CRICKET_COST_MUL 3
+#define GROUP_CRICKET_BUL_COST 1000
+#define GROUP_CRICKET_TECH     12
+#define GROUP_CRICKET_FIREC 20
+
+#define GROUP_BURNT        32
+#define GROUP_BURNT_COLOUR    (red(30))
+#define GROUP_BURNT_COST   0    /* Unused */
+#define GROUP_BURNT_COST_MUL   1        /* Unused */
+#define GROUP_BURNT_BUL_COST  1000
+#define GROUP_BURNT_TECH   0    /* Unused */
+#define GROUP_BURNT_FIREC  0
+
+#define GROUP_SHANTY        33
+#define GROUP_SHANTY_COLOUR    (red(22))
+#define GROUP_SHANTY_COST   0   /* Unused */
+#define GROUP_SHANTY_COST_MUL   1       /* Unused */
+#define GROUP_SHANTY_BUL_COST  100000
+#define GROUP_SHANTY_TECH   0   /* Unused */
+#define GROUP_SHANTY_FIREC     25
+
+#define SHANTY_MIN_PP     150
+#define SHANTY_POP        50
+#define DAYS_BETWEEN_SHANTY (NUMOF_DAYS_IN_MONTH*5)
+#define SHANTY_GET_FOOD   50
+#define SHANTY_GET_JOBS   5
+#define SHANTY_GET_GOODS  50
+#define SHANTY_GET_COAL   1
+#define SHANTY_GET_ORE    10
+#define SHANTY_GET_STEEL  1
+
+#define GROUP_FIRE        34
+#define GROUP_FIRE_COLOUR    (red(30))
+#define GROUP_FIRE_COST   0     /* Unused */
+#define GROUP_FIRE_COST_MUL   1 /* Unused */
+#define GROUP_FIRE_BUL_COST  1000
+#define GROUP_FIRE_TECH   0     /* Unused */
+#define GROUP_FIRE_FIREC  0
+
+#define GROUP_USED        35
+#define GROUP_USED_COLOUR (green(12))   /* Unused */
+#define GROUP_USED_COST   0     /* Unused */
+#define GROUP_USED_COST_MUL  1  /* Unused */
+#define GROUP_USED_BUL_COST  0  /* Unused */
+#define GROUP_USED_TECH   0     /* Unused */
+#define GROUP_USED_FIREC  0     /* Unused */
+
+#define GROUP_RESIDENCE_ML 36
+#define GROUP_RESIDENCE_ML_COLOUR (cyan(24))
+#define GROUP_RESIDENCE_ML_COST 2000
+#define GROUP_RESIDENCE_ML_COST_MUL 25
+#define GROUP_RESIDENCE_ML_BUL_COST 1000
+#define GROUP_RESIDENCE_ML_TECH 0
+#define GROUP_RESIDENCE_ML_FIREC 75
+
+#define GROUP_RESIDENCE_HL 37
+#define GROUP_RESIDENCE_HL_COLOUR (cyan(24))
+#define GROUP_RESIDENCE_HL_COST 4000
+#define GROUP_RESIDENCE_HL_COST_MUL 25
+#define GROUP_RESIDENCE_HL_BUL_COST 1000
+#define GROUP_RESIDENCE_HL_TECH 0
+#define GROUP_RESIDENCE_HL_FIREC 75
+
+#define GROUP_RESIDENCE_LH 38
+#define GROUP_RESIDENCE_LH_COLOUR (cyan(24))
+#define GROUP_RESIDENCE_LH_COST 800
+#define GROUP_RESIDENCE_LH_COST_MUL 25
+#define GROUP_RESIDENCE_LH_BUL_COST 1000
+#define GROUP_RESIDENCE_LH_TECH 0       /* ?? */
+#define GROUP_RESIDENCE_LH_FIREC 75
+
+#define GROUP_RESIDENCE_MH 39
+#define GROUP_RESIDENCE_MH_COLOUR (cyan(24))
+#define GROUP_RESIDENCE_MH_COST 1600
+#define GROUP_RESIDENCE_MH_COST_MUL 25
+#define GROUP_RESIDENCE_MH_BUL_COST 1000
+#define GROUP_RESIDENCE_MH_TECH 0
+#define GROUP_RESIDENCE_MH_FIREC 75
+
+#define GROUP_RESIDENCE_HH 40
+#define GROUP_RESIDENCE_HH_COLOUR (cyan(24))
+#define GROUP_RESIDENCE_HH_COST 3200
+#define GROUP_RESIDENCE_HH_COST_MUL 25
+#define GROUP_RESIDENCE_HH_BUL_COST 1000
+#define GROUP_RESIDENCE_HH_TECH 0
+#define GROUP_RESIDENCE_HH_FIREC 75
+
+#define GROUP_WATERWELL	   41
+#define GROUP_WATERWELL_COLOUR    (blue(31))
+#define GROUP_WATERWELL_COST      1
+#define GROUP_WATERWELL_COST_MUL 2
+#define GROUP_WATERWELL_BUL_COST      1
+#define GROUP_WATERWELL_TECH      0
+#define GROUP_WATERWELL_FIREC 0
+
+#define GROUP_DESERT 	  42
+#define GROUP_DESERT_COLOUR  (yellow(18))
+#define GROUP_DESERT_COST    0
+#define GROUP_DESERT_COST_MUL 1
+#define GROUP_DESERT_BUL_COST 1
+#define GROUP_DESERT_TECH    0
+#define GROUP_DESERT_FIREC   0
+
+#define GROUP_TREE 	   43
+#define GROUP_TREE_COLOUR  (green(12))
+#define GROUP_TREE_COST    0
+#define GROUP_TREE_COST_MUL 1
+#define GROUP_TREE_BUL_COST 1
+#define GROUP_TREE_TECH    0
+#define GROUP_TREE_FIREC   0
+
+#define GROUP_TREE2 	   44
+#define GROUP_TREE2_COLOUR  (green(12))
+#define GROUP_TREE2_COST    0
+#define GROUP_TREE2_COST_MUL 1
+#define GROUP_TREE2_BUL_COST 1
+#define GROUP_TREE2_TECH    0
+#define GROUP_TREE2_FIREC   0
+
+#define GROUP_TREE3 	   45
+#define GROUP_TREE3_COLOUR  (green(12))
+#define GROUP_TREE3_COST    0
+#define GROUP_TREE3_COST_MUL 1
+#define GROUP_TREE3_BUL_COST 1
+#define GROUP_TREE3_TECH    0
+#define GROUP_TREE3_FIREC   0
+
+#define BRIDGE_FACTOR 500 /* a bridge is that much more expensive than the land transport */
+
+#define GROUP_TRACK_BRIDGE        46
+#define GROUP_TRACK_BRIDGE_COLOUR 32   /* 32 is a brown */
+#define GROUP_TRACK_BRIDGE_COST   GROUP_TRACK_COST * BRIDGE_FACTOR
+#define GROUP_TRACK_BRIDGE_COST_MUL 2
+#define GROUP_TRACK_BRIDGE_BUL_COST GROUP_TRACK_BUL_COST * BRIDGE_FACTOR
+#define GROUP_TRACK_BRIDGE_TECH   GROUP_TRACK_TECH
+#define GROUP_TRACK_BRIDGE_FIREC  0    /* unused */
+
+#define GROUP_ROAD_BRIDGE         47
+#define GROUP_ROAD_BRIDGE_COLOUR  (white(18))
+#define GROUP_ROAD_BRIDGE_COST    GROUP_ROAD_COST * BRIDGE_FACTOR
+#define GROUP_ROAD_BRIDGE_COST_MUL 2
+#define GROUP_ROAD_BRIDGE_BUL_COST GROUP_ROAD_BUL_COST * BRIDGE_FACTOR
+#define GROUP_ROAD_BRIDGE_TECH    GROUP_ROAD_TECH
+#define GROUP_ROAD_BRIDGE_FIREC   0
+
+#define GROUP_RAIL_BRIDGE         48
+#define GROUP_RAIL_BRIDGE_COLOUR  (magenta(18))
+#define GROUP_RAIL_BRIDGE_COST    GROUP_RAIL_COST * BRIDGE_FACTOR
+#define GROUP_RAIL_BRIDGE_COST_MUL 2
+#define GROUP_RAIL_BRIDGE_BUL_COST GROUP_RAIL_BUL_COST * BRIDGE_FACTOR
+#define GROUP_RAIL_BRIDGE_TECH    GROUP_RAIL_TECH
+#define GROUP_RAIL_BRIDGE_FIREC   0
+
+#define GROUP_IS_RESIDENCE(group) \
+            ((group == GROUP_RESIDENCE_LL) || \
+             (group == GROUP_RESIDENCE_ML) || \
+             (group == GROUP_RESIDENCE_HL) || \
+             (group == GROUP_RESIDENCE_LH) || \
+             (group == GROUP_RESIDENCE_MH) || \
+             (group == GROUP_RESIDENCE_HH))
+
+#define GROUP_IS_BARE(group) \
+	    ((group == GROUP_BARE) || \
+	     (group == GROUP_DESERT) || \
+	     (group == GROUP_TREE) || \
+	     (group == GROUP_TREE2) || \
+	     (group == GROUP_TREE3))
+
+/********   end of buildings // groups   ************/
+
+#endif // __groups_h__

Modified: trunk/src/lincity/engglobs.h
===================================================================
--- trunk/src/lincity/engglobs.h	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/engglobs.h	2010-07-05 11:52:34 UTC (rev 1586)
@@ -7,6 +7,7 @@
 #define __engglobs_h__
 
 #include "lin-city.h"
+#include "groups.h"
 
 /* was shrglobs.h */
 

Modified: trunk/src/lincity/engine.cpp
===================================================================
--- trunk/src/lincity/engine.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/engine.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -21,6 +21,7 @@
 #include "gui_interface/shared_globals.h"
 #include "modules/all_modules.h"
 #include "transport.h"
+#include "all_buildings.h"
 
 extern void ok_dial_box(const char *, int, const char *);
 extern void print_total_money(void);
@@ -328,10 +329,13 @@
         add_a_substation (x, y);
         MP_INFO(x, y).int_1 = (int)(WINDMILL_POWER + (((double)MP_TECH(x, y) * WINDMILL_POWER) / MAX_TECH_LEVEL));
         /* Make sure that the correct windmill graphic shows up */
-        if (tech_level > MODERN_WINDMILL_TECH)
+        if (tech_level > MODERN_WINDMILL_TECH) {
             type = CST_WINDMILL_1_R;
-        else
+            MP_INFO(x, y).int_2 = true;
+        } else {
             type = CST_WINDMILL_1_W;
+            MP_INFO(x, y).int_2 = false;
+        }
         break;
 
     case (GROUP_COAL_POWER):

Added: trunk/src/lincity/groups.h
===================================================================
--- trunk/src/lincity/groups.h	                        (rev 0)
+++ trunk/src/lincity/groups.h	2010-07-05 11:52:34 UTC (rev 1586)
@@ -0,0 +1,81 @@
+/* ---------------------------------------------------------------------- *
+ * groups.h
+ * This file is part of lincity-ng
+ * Lincity is copyright (c) see CREDITS for more informations
+ *
+ * See COPYING COPYING-data.txt and COPYING-fonts.txt for licenses informations
+ * ---------------------------------------------------------------------- */
+
+#ifndef __groups_h__
+#define __groups_h__
+
+/******* Buildings // GROUPS ************/
+
+#define GROUP_BARE 	        0
+#define GROUP_POWER_LINE    1
+#define GROUP_SOLAR_POWER   2
+#define GROUP_SUBSTATION    3
+#define GROUP_RESIDENCE_LL  4
+#define GROUP_ORGANIC_FARM  5
+#define GROUP_MARKET        6
+#define GROUP_TRACK	        7
+#define GROUP_COALMINE      8
+#define GROUP_RAIL          9
+#define GROUP_COAL_POWER    10
+#define GROUP_ROAD          11
+#define GROUP_INDUSTRY_L    12
+#define GROUP_UNIVERSITY    13
+#define GROUP_COMMUNE       14
+#define GROUP_OREMINE       15
+#define GROUP_TIP           16
+#define GROUP_PORT          17
+#define GROUP_INDUSTRY_H    18
+#define GROUP_PARKLAND      19
+#define GROUP_RECYCLE       20
+#define GROUP_WATER	        21
+#define GROUP_HEALTH        22
+#define GROUP_ROCKET	    23
+#define GROUP_WINDMILL      24
+#define GROUP_MONUMENT      25
+#define GROUP_SCHOOL        26
+#define GROUP_BLACKSMITH    27
+#define GROUP_MILL          28
+#define GROUP_POTTERY       29
+#define GROUP_FIRESTATION   30
+#define GROUP_CRICKET       31
+#define GROUP_BURNT         32
+#define GROUP_SHANTY        33
+#define GROUP_FIRE          34
+#define GROUP_USED          35
+#define GROUP_RESIDENCE_ML  36
+#define GROUP_RESIDENCE_HL  37
+#define GROUP_RESIDENCE_LH  38
+#define GROUP_RESIDENCE_MH  39
+#define GROUP_RESIDENCE_HH  40
+#define GROUP_WATERWELL	    41
+#define GROUP_DESERT 	    42
+#define GROUP_TREE 	        43
+#define GROUP_TREE2 	    44
+#define GROUP_TREE3 	    45
+#define GROUP_TRACK_BRIDGE  46
+#define GROUP_ROAD_BRIDGE   47
+#define GROUP_RAIL_BRIDGE   48
+
+#define GROUP_RIVER (GROUP_WATER)
+
+#define GROUP_IS_RESIDENCE(group) \
+            ((group == GROUP_RESIDENCE_LL) || \
+             (group == GROUP_RESIDENCE_ML) || \
+             (group == GROUP_RESIDENCE_HL) || \
+             (group == GROUP_RESIDENCE_LH) || \
+             (group == GROUP_RESIDENCE_MH) || \
+             (group == GROUP_RESIDENCE_HH))
+
+#define GROUP_IS_BARE(group) \
+	    ((group == GROUP_BARE) || \
+	     (group == GROUP_DESERT) || \
+	     (group == GROUP_TREE) || \
+	     (group == GROUP_TREE2) || \
+	     (group == GROUP_TREE3))
+
+#endif // __groups_h__

Modified: trunk/src/lincity/init_game.cpp
===================================================================
--- trunk/src/lincity/init_game.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/init_game.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -30,6 +30,7 @@
 #include "gui_interface/pbar_interface.h"
 #include "modules/all_modules.h"
 #include "transport.h"
+#include "all_buildings.h"
 
 #define IS_RIVER(x,y) (MP_INFO(x,y).flags & FLAG_IS_RIVER)
 

Modified: trunk/src/lincity/lin-city.h
===================================================================
--- trunk/src/lincity/lin-city.h	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/lin-city.h	2010-07-05 11:52:34 UTC (rev 1586)
@@ -49,18 +49,6 @@
 #   define ALLOW_PIX_DOUBLING
 #endif
 
-#if defined (LC_X11) || defined (WIN32)
-#    define BORDERX 30
-#    define BORDERY 30
-#endif
-
-#define TEXT_FG_COLOUR  (white(24))
-#define TEXT_BG_COLOUR  105
-#define YN_DIALBOX_BG_COLOUR (red(10))
-#define LOAD_BG_COLOUR       (cyan(10))
-#define SAVE_BG_COLOUR       (magenta(10))
-#define NW_BG_COLOUR         (green(10))
-
 #define FLAG_LEFT               (1)             // Used for transports, power lines, rivers, and desert borders.
 #define FLAG_UP                 (2)             // Algorithm relies on the numerical values of
 #define FLAG_RIGHT              (4)             // the flags. (a check is done at compile time)
@@ -96,836 +84,52 @@
 
 
 #define WORLD_SIDE_LEN 100      /* Minimap size is hardcoded 200 pixel => some job to do ... */
-#define NUMOF_DAYS_IN_MONTH 100
-#define NUMOF_DAYS_IN_YEAR (NUMOF_DAYS_IN_MONTH*12)
-#define FAST_TIME_FOR_YEAR 9
-#define MED_TIME_FOR_YEAR  20
-#define SLOW_TIME_FOR_YEAR 60
 
-/* interest rate *10  ie 10 is 1% */
-#define INTEREST_RATE 15
-
-/* AL1 unused in 2.x
-#define HELPERRORPAGE "error.hlp"
-#define HELPBACKGROUNDCOLOUR (white(8))
-#define HELPBUTTON_COLOUR (white(25))
-#define MAX_NUMOF_HELP_BUTTONS 40
-#define MAX_LENOF_HELP_FILENAME 40
-#define MAX_HELP_HISTORY 20
-#define CS_MOUSE_BUTTON_DELAY 5
-#define RIGHT_MOUSE_MOVE_VAL 5
-*/
-
 #define GOOD 1
 #define BAD (-1)
 #define RESULTS 0
 
-/************* Buildings stuff *********************/
+#define SHUFFLE_MAPPOINT_COUNT 4
 
-#define WINDMILL_POWER      450
-#define WINDMILL_JOBS       10
-/* WINDMILL_RCOST is days per quid */
-#define WINDMILL_RCOST      3
-#define ANTIQUE_WINDMILL_ANIM_SPEED 160
-#define MODERN_WINDMILL_ANIM_SPEED 120
-
 #define OLD_MAX_NUMOF_SUBSTATIONS 100
 #define MAX_NUMOF_SUBSTATIONS 512
-#define SUBSTATION_RANGE 10
-#define POWER_USE_PER_PERSON 3
-#define POWER_RES_OVERHEAD 30
-#define POWERS_COAL_OUTPUT 22000
-#define MAX_COAL_AT_POWER_STATION 100000
 
-#define MAX_ORE_AT_INDUSTRY_L 20000
-#define MAX_JOBS_AT_INDUSTRY_L 500
-#define MAX_GOODS_AT_INDUSTRY_L 65000
-#define INDUSTRY_L_GET_JOBS    120
-#define INDUSTRY_L_GET_ORE     600
-#define INDUSTRY_L_GET_STEEL   60
-#define INDUSTRY_L_JOBS_LOAD_ORE 1
-#define INDUSTRY_L_JOBS_LOAD_STEEL 4
-#define INDUSTRY_L_ORE_USED  125
-#define INDUSTRY_L_STEEL_USED  12
-#define INDUSTRY_L_JOBS_USED       30
-#define INDUSTRY_L_MAKE_GOODS 225
-#define MAX_STEEL_AT_INDUSTRY_L 2000
-#define MIN_JOBS_AT_INDUSTRY_L (INDUSTRY_L_JOBS_LOAD_ORE\
-+INDUSTRY_L_JOBS_LOAD_STEEL+INDUSTRY_L_JOBS_USED)
-#define INDUSTRY_L_ANIM_SPEED 290
-#define INDUSTRY_L_POL_PER_GOOD 0.05
-#define INDUSTRY_L_POLLUTION    10
+#define NUMOF_COAL_RESERVES 100
+#define NUM_OF_TYPES    404
+#define NUM_OF_GROUPS    50
 
-#define MAX_ORE_AT_INDUSTRY_H 10000
-#define MAX_COAL_AT_INDUSTRY_H 1000
-#define MAX_MADE_AT_INDUSTRY_H MAX_ORE_AT_INDUSTRY_H/16
-#define POWER_MAKE_STEEL 200
-#define INDUSTRY_H_ANIM_SPEED  290
+#define OLD_MAX_NUMOF_MARKETS 100
+#define MAX_NUMOF_MARKETS 512
 
-#define DAYS_PER_POLLUTION      14
-#define POWERS_COAL_POLLUTION   20
-#define INDUSTRY_H_POLLUTION    10
-#define COALMINE_POLLUTION      3
-#define PORT_POLLUTION          1
-#define RAIL_POLLUTION          1
-#define DAYS_PER_RAIL_POLLUTION 30
-#define ROAD_POLLUTION          1
-#define DAYS_PER_ROAD_POLLUTION 20
-#define UNNAT_DEATHS_COST       500
-#define POL_DIV                 64      /* GCS -- from engine.c */
 
-/* #define FINANCE_X 91
-#define FINANCE_W 120
-#define FINANCE_Y 200
-#define FINANCE_H 56
- * AL1 unused in 2.x
- */
+#define NUMOF_DAYS_IN_MONTH 100
+#define NUMOF_DAYS_IN_YEAR (NUMOF_DAYS_IN_MONTH*12)
 
-#define INCOME_TAX_RATE 8
-#define COAL_TAX_RATE 20
-#define GOODS_TAX_RATE 1
-#define DOLE_RATE 15
-#define TRANSPORT_COST_RATE 14
-#define IM_PORT_COST_RATE 1
-#define PORT_FOOD_RATE    1
-#define PORT_JOBS_RATE    5
-#define PORT_COAL_RATE    50
-#define PORT_ORE_RATE     1
-#define PORT_GOODS_RATE   3
-#define PORT_STEEL_RATE   100
-/*
-  These next two control the stuff bought or sold as a % of what's on the
-  transport.  1000=100%  500=50% etc.
-*/
-#define PORT_EXPORT_RATE  500
-#define PORT_IMPORT_RATE  500
+#define FAST_TIME_FOR_YEAR 9
+#define MED_TIME_FOR_YEAR  20
+#define SLOW_TIME_FOR_YEAR 60
 
-#define NUMOF_DISCOUNT_TRIGGERS 6
-#define EX_DISCOUNT_TRIGGER_1   25000
-#define EX_DISCOUNT_TRIGGER_2   50000
-#define EX_DISCOUNT_TRIGGER_3  100000
-#define EX_DISCOUNT_TRIGGER_4  200000
-#define EX_DISCOUNT_TRIGGER_5  400000
-#define EX_DISCOUNT_TRIGGER_6  800000
-
 #define MIN_RES_POPULATION 10
-#define MAX_TECH_LEVEL	   1000000
-#define TECH_LEVEL_LOSS_START 11000
+
 /*
    tech-level/TECH_LEVEL_LOSS is lost every month when
    above TECH_LEVEL_LOSS_START
  */
+#define MAX_TECH_LEVEL	   1000000
+#define TECH_LEVEL_LOSS_START 11000
 #define TECH_LEVEL_LOSS    500
 #define TECH_LEVEL_UNAIDED 2
-#define MODERN_WINDMILL_TECH 450000
 
-#define BUILD_MONUMENT_JOBS     350000
-#define MONUMENT_GET_JOBS       100
-#define MONUMENT_DAYS_PER_TECH  3
-#define MONUMENT_TECH_EXPIRE    400
-#define MONUMENT_ANIM_SPEED     300
 
-#define BLACKSMITH_JOBS    35
-#define BLACKSMITH_GET_COAL 6
-#define MAX_GOODS_AT_BLACKSMITH 200
-#define MAX_COAL_AT_BLACKSMITH  100
-#define BLACKSMITH_STEEL_USED 1
-#define BLACKSMITH_COAL_USED  1
-#define GOODS_MADE_BY_BLACKSMITH 50
-#define BLACKSMITH_BATCH (GOODS_MADE_BY_BLACKSMITH*100)
-#define BLACKSMITH_ANIM_THRESHOLD 10
-#define BLACKSMITH_ANIM_SPEED    200
+#define NUMOF_DISCOUNT_TRIGGERS 6
+#define EX_DISCOUNT_TRIGGER_1   25000
+#define EX_DISCOUNT_TRIGGER_2   50000
+#define EX_DISCOUNT_TRIGGER_3  100000
+#define EX_DISCOUNT_TRIGGER_4  200000
+#define EX_DISCOUNT_TRIGGER_5  400000
+#define EX_DISCOUNT_TRIGGER_6  800000
 
-#define MILL_JOBS          35
-#define MAX_GOODS_AT_MILL  200
-#define MAX_FOOD_AT_MILL   500
-#define MAX_COAL_AT_MILL   50
-#define GOODS_MADE_BY_MILL 75
-#define MILL_GET_FOOD      51
-#define MILL_GET_COAL      4
-#define MILL_POWER_PER_COAL 60
-#define FOOD_USED_BY_MILL  (GOODS_MADE_BY_MILL/2)
-#define COAL_USED_BY_MILL  1
-#define MILL_ANIM_THRESHOLD 10
-#define MILL_ANIM_SPEED    300
 
-#define SCHOOL_JOBS        50
-#define SCHOOL_GOODS	   75
-#define JOBS_MAKE_TECH_SCHOOL  200
-#define GOODS_MAKE_TECH_SCHOOL  75
-#define TECH_MADE_BY_SCHOOL    2
-#define MAX_JOBS_AT_SCHOOL     400
-#define MAX_GOODS_AT_SCHOOL    200
-#define SCHOOL_RUNNING_COST    2
-
-#define DAYS_BETWEEN_COVER (NUMOF_DAYS_IN_MONTH*3)
-#define DAYS_BETWEEN_FIRES (NUMOF_DAYS_IN_YEAR*2)
-#define FIRESTATION_JOBS   6
-#define FIRESTATION_GET_JOBS 7
-#define MAX_JOBS_AT_FIRESTATION (FIRESTATION_JOBS*NUMOF_DAYS_IN_YEAR)
-#define FIRESTATION_GOODS  2
-#define FIRESTATION_GET_GOODS 3
-#define MAX_GOODS_AT_FIRESTATION (FIRESTATION_GOODS*NUMOF_DAYS_IN_YEAR)
-#define FIRESTATION_RANGE  18
-#define FIRESTATION_RUNNING_COST 1
-#define FIRESTATION_RUNNING_COST_MUL 6
-#define FIRESTATION_ANIMATION_SPEED 250
-#define FIRE_ANIMATION_SPEED 350
-#define FIRE_DAYS_PER_SPREAD (NUMOF_DAYS_IN_YEAR/8)
-#define FIRE_LENGTH (NUMOF_DAYS_IN_YEAR*5)
-#define AFTER_FIRE_LENGTH (NUMOF_DAYS_IN_YEAR*10)
-
-#define CRICKET_JOBS   8
-#define CRICKET_GET_JOBS 9
-#define MAX_JOBS_AT_CRICKET (CRICKET_JOBS*NUMOF_DAYS_IN_YEAR)
-#define CRICKET_GOODS  2
-#define CRICKET_GET_GOODS 3
-#define MAX_GOODS_AT_CRICKET (CRICKET_GOODS*NUMOF_DAYS_IN_YEAR)
-#define CRICKET_RANGE  10
-#define CRICKET_RUNNING_COST 1
-#define CRICKET_ANIMATION_SPEED 750
-
-#define MAX_GOODS_AT_POTTERY     200
-#define POTTERY_ORE_MAKE_GOODS    11
-#define POTTERY_COAL_MAKE_GOODS    2
-#define POTTERY_JOBS              35
-#define MAX_ORE_AT_POTTERY        (POTTERY_ORE_MAKE_GOODS*60)
-#define POTTERY_GET_ORE           (POTTERY_ORE_MAKE_GOODS*20)
-#define MAX_COAL_AT_POTTERY       (POTTERY_COAL_MAKE_GOODS*60)
-#define POTTERY_GET_COAL          (POTTERY_COAL_MAKE_GOODS*21)
-#define MAX_JOBS_AT_POTTERY       (POTTERY_JOBS*20)
-#define POTTERY_GET_JOBS          (POTTERY_JOBS*2)
-#define POTTERY_MADE_GOODS        35
-#define POTTERY_ANIM_SPEED        280
-#define POTTERY_CLOSE_TIME        20
-
-#define UNIVERSITY_JOBS   250
-#define UNIVERSITY_JOBS_STORE 5000
-#define UNIVERSITY_GOODS  750
-#define UNIVERSITY_GOODS_STORE 7000
-#define UNIVERSITY_RUNNING_COST 23
-#define UNIVERSITY_TECH_MADE    4
-
-#define ROCKET_PAD_JOBS         1000
-#define ROCKET_PAD_JOBS_STORE   10000
-#define ROCKET_PAD_GOODS        10000
-#define ROCKET_PAD_GOODS_STORE  500000
-#define ROCKET_PAD_STEEL	500
-#define ROCKET_PAD_STEEL_STORE  12000
-#define ROCKET_PAD_RUNNING_COST 200
-#define ROCKET_PAD_LAUNCH       100
-#define ROCKET_ANIMATION_SPEED  450
-#define ROCKET_LAUNCH_BAD       1
-#define ROCKET_LAUNCH_GOOD      2
-#define ROCKET_LAUNCH_EVAC      3
-
-#define TIP_DEGRADE_TIME 200 * NUMOF_DAYS_IN_YEAR
-
-#define MAX_WASTE_AT_RECYCLE 20000
-#define BURN_WASTE_AT_RECYCLE (MAX_WASTE_AT_RECYCLE/200)
-#define MAX_ORE_AT_RECYCLE   (MAX_ORE_ON_RAIL*2)
-#define GOODS_RECYCLED       500
-#define RECYCLE_GOODS_JOBS   (GOODS_RECYCLED/50)
-#define RECYCLE_RUNNING_COST 3
-
-#define HEALTH_CENTRE_JOBS   6
-#define HEALTH_CENTRE_GET_JOBS 7
-#define MAX_JOBS_AT_HEALTH_CENTRE (HEALTH_CENTRE_JOBS*NUMOF_DAYS_IN_YEAR)
-#define HEALTH_CENTRE_GOODS  40
-#define HEALTH_CENTRE_GET_GOODS 41
-#define MAX_GOODS_AT_HEALTH_CENTRE (HEALTH_CENTRE_GOODS*NUMOF_DAYS_IN_YEAR)
-#define HEALTH_RUNNING_COST  2
-#define HEALTH_RUNNING_COST_MUL 9
-#define HEALTH_CENTRE_RANGE  15
-
-#define OREMINE_ANIMATION_SPEED 200
-
-#define OLD_MAX_NUMOF_MARKETS 100
-#define MAX_NUMOF_MARKETS 512
-#define MARKET_RANGE      10
-#define MAX_FOOD_ON_TRACK 2048
-#define MAX_FOOD_ON_ROAD (MAX_FOOD_ON_TRACK*4)
-#define MAX_FOOD_ON_RAIL (MAX_FOOD_ON_TRACK*16)
-#define MAX_FOOD_IN_MARKET (MAX_FOOD_ON_RAIL*8)
-#define MARKET_FOOD_SEARCH_TRIGGER (MAX_FOOD_IN_MARKET/5)
-#define MAX_JOBS_ON_TRACK 1024
-#define MAX_JOBS_ON_ROAD (MAX_JOBS_ON_TRACK*5)
-#define MAX_JOBS_ON_RAIL (MAX_JOBS_ON_TRACK*25)
-#define MAX_JOBS_IN_MARKET (MAX_JOBS_ON_RAIL*3)
-#define MARKET_JOBS_SEARCH_TRIGGER (MAX_JOBS_IN_MARKET/5)
-#define MARKET_ANIM_SPEED 750
-#define EMPLOYER_RANGE 10
-#define WORKING_POP_PERCENT 45
-#define JOB_SWING 15
-#define HC_JOB_SWING 10
-#define CRICKET_JOB_SWING 4
-
-#define ORGANIC_FARM_FOOD_OUTPUT 550
-#define ORGANIC_FARM_ANIM_SPEED 3000
-#define FARM_JOBS_USED 13
-#define ORG_FARM_RANGE 10
-#define ORG_FARM_POWER_REC 50
-/* gets waste only when powered */
-#define ORG_FARM_WASTE_GET 6
-#define MIN_FOOD_SOLD_FOR_ANIM 200
-#define DAYS_PER_STARVE 20
-
-#define NUMOF_COAL_RESERVES 100
-#define COAL_RESERVE_SIZE 10000
-#define ORE_RESERVE       1000
-#define MIN_ORE_RESERVE_FOR_MINE (ORE_RESERVE)
-#define MAX_COAL_AT_MINE 100000
-#define MAX_ORE_AT_MINE 100000
-/* COAL_RESERVE_SEARCH_LEN acts in both directions, so 5 is 10*10 */
-#define COAL_RESERVE_SEARCH_LEN 8
-#define JOBS_DIG_COAL 900
-#define JOBS_DIG_ORE  200
-#define JOBS_COALPS_GENERATE 100
-#define MAX_JOBS_AT_COALPS 2000
-#define JOBS_LOAD_COAL 18
-#define JOBS_LOAD_ORE  9
-#define JOBS_LOAD_STEEL 15
-#define JOBS_AT_COMMUNE_GATE 4
-#define COMMUNE_ANIM_SPEED 750
-#define COMMUNE_POP  5
-
-#define MAX_COAL_ON_TRACK 64
-#define MAX_COAL_ON_ROAD (MAX_COAL_ON_TRACK*8)
-#define MAX_COAL_ON_RAIL (MAX_COAL_ON_TRACK*64)
-#define MAX_COAL_IN_MARKET (MAX_COAL_ON_RAIL*2)
-#define MARKET_COAL_SEARCH_TRIGGER (MAX_COAL_IN_MARKET/5)
-
-#define MAX_GOODS_ON_TRACK 2048
-#define MAX_GOODS_ON_ROAD (MAX_GOODS_ON_TRACK*5)
-#define ROAD_GOODS_USED_MASK 0x1f
-#define MAX_GOODS_ON_RAIL (MAX_GOODS_ON_TRACK*25)
-#define RAIL_GOODS_USED_MASK 0xf
-#define MAX_GOODS_IN_MARKET (MAX_GOODS_ON_RAIL*4)
-#define MARKET_GOODS_SEARCH_TRIGGER (MAX_GOODS_IN_MARKET/5)
-#define MAX_ORE_ON_TRACK 4096
-#define MAX_ORE_ON_ROAD (MAX_ORE_ON_TRACK*4)
-#define MAX_ORE_ON_RAIL (MAX_ORE_ON_TRACK*16)
-#define MAX_ORE_IN_MARKET (MAX_ORE_ON_RAIL*2)
-#define MARKET_ORE_SEARCH_TRIGGER (MAX_ORE_IN_MARKET/5)
-
-#define MAX_STEEL_ON_TRACK 128
-#define MAX_STEEL_ON_ROAD (MAX_STEEL_ON_TRACK*4)
-#define MAX_STEEL_ON_RAIL (MAX_STEEL_ON_TRACK*16)
-#define RAIL_STEEL_USED_MASK 0x7f
-#define MAX_STEEL_AT_INDUSTRY_H (MAX_STEEL_ON_RAIL*10)
-
-#define MAX_WASTE_ON_TRACK 1024
-#define MAX_WASTE_ON_ROAD (MAX_WASTE_ON_TRACK*5)
-#define MAX_WASTE_ON_RAIL (MAX_WASTE_ON_TRACK*25)
-#define MAX_WASTE_IN_MARKET (MAX_WASTE_ON_RAIL*3)
-#define MARKET_WASTE_SEARCH_TRIGGER (MAX_WASTE_IN_MARKET/5)
-#define MAX_WASTE_AT_TIP  10000000
-#define WASTE_BURN_ON_TRANSPORT 20
-#define TRANSPORT_BURN_WASTE_COUNT 75000
-
-#define WATERWELL_RANGE 20
-
-/*
-  JOBS_MAKE_STEEL is the steel made per job at the steel works
-  what's it doing here?
- */
-#define JOBS_MAKE_STEEL 70
-/*
-  ORE_MAKE_STEEL is the ore used per unit of STEEL at a steel works
-  what's it doing here?
- */
-#define ORE_MAKE_STEEL 17
-#define MAX_STEEL_IN_MARKET (MAX_STEEL_ON_RAIL*2)
-#define MARKET_STEEL_SEARCH_TRIGGER (MAX_STEEL_IN_MARKET/5)
-
-#define SUST_ORE_COAL_COL 34
-#define SUST_PORT_COL     white(24)
-#define SUST_MONEY_COL    green(26)
-#define SUST_POP_COL      cyan(24)
-#define SUST_TECH_COL     yellow(26)
-#define SUST_FIRE_COL     red(26)
-#define SUST_ORE_COAL_YEARS_NEEDED 180
-#define SUST_PORT_YEARS_NEEDED     180
-#define SUST_MONEY_YEARS_NEEDED    60
-#define SUST_POP_YEARS_NEEDED      60
-#define SUST_TECH_YEARS_NEEDED     120
-#define SUST_FIRE_YEARS_NEEDED     60
-
-#define SUST_MIN_POPULATION 5000
-#define SUST_MIN_TECH_LEVEL (MAX_TECH_LEVEL/2)
-
-/* AL1 unused in 2.x
-#define STATS_X 232
-#define STATS_Y 428
-#define STATS_W 304
-#define STATS_H 32
-
-#define GRAPHS_B_COLOUR (white(6))
-
-//#define MARKET_CB_W (18*8)
-#define MARKET_CB_W (17*8 - 2)
-#define MARKET_CB_H (23*8)
-
-*/
-#define SHUFFLE_MAPPOINT_COUNT 4
-
-/******* Buildings // GROUPS ************/
-#define red(x) (32 + x)
-#define green(x) (64 + x)
-#define yellow(x) (96 + x)
-#define blue(x) (128 + x)
-#define magenta(x) (160 + x)
-#define cyan(x) (192 + x)
-#define white(x) (224 + x)
-
-#define NUM_OF_TYPES    404
-#define NUM_OF_GROUPS    50
-#define GROUP_NAME_LEN   20
-
-#define GROUP_BARE 	   0
-#define GROUP_BARE_COLOUR  (green(12))
-#define GROUP_BARE_COST    0
-#define GROUP_BARE_COST_MUL 1
-#define GROUP_BARE_BUL_COST 1
-#define GROUP_BARE_TECH    0
-#define GROUP_BARE_FIREC   0
-
-#define GROUP_POWER_LINE   1
-#define GROUP_POWER_LINE_COLOUR (yellow(26))
-#define GROUP_POWER_LINE_COST 100
-#define GROUP_POWER_LINE_COST_MUL 2
-#define GROUP_POWER_LINE_BUL_COST 100
-#define GROUP_POWER_LINE_TECH 200
-#define GROUP_POWER_LINE_FIREC 0
-
-#define GROUP_SOLAR_POWER 2
-#define GROUP_SOLAR_POWER_COLOUR (yellow(22))
-#define GROUP_SOLAR_POWER_COST 500000
-#define GROUP_SOLAR_POWER_COST_MUL 5
-#define GROUP_SOLAR_POWER_BUL_COST 100000
-#define GROUP_SOLAR_POWER_TECH 500
-#define GROUP_SOLAR_POWER_FIREC 33
-#define SOLAR_POWER_JOBS 50
-#define POWERS_SOLAR_OUTPUT 1800
-
-#define GROUP_SUBSTATION   3
-#define GROUP_SUBSTATION_COLOUR (yellow(18))
-#define GROUP_SUBSTATION_COST 500
-#define GROUP_SUBSTATION_COST_MUL 2
-#define GROUP_SUBSTATION_BUL_COST 100
-#define GROUP_SUBSTATION_TECH 200
-#define GROUP_SUBSTATION_FIREC 50
-
-#define GROUP_RESIDENCE_LL 4
-#define GROUP_RESIDENCE_LL_COLOUR (cyan(24))
-#define GROUP_RESIDENCE_LL_COST 1000
-#define GROUP_RESIDENCE_LL_COST_MUL 25
-#define GROUP_RESIDENCE_LL_BUL_COST 1000
-#define GROUP_RESIDENCE_LL_TECH 0
-#define GROUP_RESIDENCE_LL_FIREC 75
-
-/* RESIDENCE?_BRM is the birth rate modifier */
-/* RESIDENCE?_DRM is the death rate modifier */
-#define RESIDENCE_BASE_BR     100
-#define RESIDENCE_BASE_DR     (68*12)
-#define RESIDENCE_BRM_HEALTH  5
-#define RESIDENCE1_BRM (RESIDENCE_BASE_BR*12)
-#define RESIDENCE1_DRM ((RESIDENCE_BASE_DR*3)/4)
-#define RESIDENCE2_BRM 0
-#define RESIDENCE2_DRM 0
-#define RESIDENCE3_BRM (RESIDENCE_BASE_BR+RESIDENCE_BASE_BR/4)
-#define RESIDENCE3_DRM ((RESIDENCE_BASE_DR)/2)
-#define RESIDENCE4_BRM (RESIDENCE_BASE_BR*18)
-#define RESIDENCE4_DRM ((RESIDENCE_BASE_DR*3)/4)
-#define RESIDENCE5_BRM (RESIDENCE_BASE_BR/2)
-#define RESIDENCE5_DRM ((RESIDENCE_BASE_DR)/4)
-#define RESIDENCE6_BRM 0
-#define RESIDENCE6_DRM ((RESIDENCE_BASE_DR)/4)
-/* RESIDENCE_PPM is the people_pool mobitily. Higher number=less mobile. */
-#define RESIDENCE_PPM   20
-
-#define GROUP_ORGANIC_FARM 5
-#define GROUP_ORGANIC_FARM_COLOUR (green(30))
-#define GROUP_ORGANIC_FARM_COST 1000
-#define GROUP_ORGANIC_FARM_COST_MUL 20
-#define GROUP_ORGANIC_FARM_BUL_COST 100
-#define GROUP_ORGANIC_FARM_TECH 0
-#define GROUP_ORGANIC_FARM_FIREC 20
-
-#define GROUP_MARKET       6
-#define GROUP_MARKET_COLOUR (blue(28))
-#define GROUP_MARKET_COST 100
-#define GROUP_MARKET_COST_MUL 25
-#define GROUP_MARKET_BUL_COST 100
-#define GROUP_MARKET_TECH 0
-#define GROUP_MARKET_FIREC 80
-
-#define GROUP_TRACK	   7
-#define GROUP_TRACK_COLOUR 32   /* 32 is a brown */
-#define GROUP_TRACK_COST   1
-#define GROUP_TRACK_COST_MUL 25
-#define GROUP_TRACK_BUL_COST   10
-#define GROUP_TRACK_TECH   0
-#define GROUP_TRACK_FIREC  4
-
-#define GROUP_COALMINE     8
-#define GROUP_COALMINE_COLOUR 0
-#define GROUP_COALMINE_COST   10000
-#define GROUP_COALMINE_COST_MUL 25
-#define GROUP_COALMINE_BUL_COST   10000
-#define GROUP_COALMINE_TECH   85
-#define GROUP_COALMINE_FIREC  85
-
-#define GROUP_RAIL         9
-#define GROUP_RAIL_COLOUR  (magenta(18))
-#define GROUP_RAIL_COST    500
-#define GROUP_RAIL_COST_MUL 10
-#define GROUP_RAIL_BUL_COST    1000
-#define GROUP_RAIL_TECH    180
-#define GROUP_RAIL_FIREC   6
-
-#define GROUP_COAL_POWER 10
-#define GROUP_COAL_POWER_COLOUR 0
-#define GROUP_COAL_POWER_COST   100000
-#define GROUP_COAL_POWER_COST_MUL 5
-#define GROUP_COAL_POWER_BUL_COST   200000
-#define GROUP_COAL_POWER_TECH   200
-#define GROUP_COAL_POWER_FIREC  80
-
-#define GROUP_ROAD         11
-#define GROUP_ROAD_COLOUR  (white(18))
-#define GROUP_ROAD_COST    100
-#define GROUP_ROAD_COST_MUL 25
-#define GROUP_ROAD_BUL_COST    50
-#define GROUP_ROAD_TECH    50
-#define GROUP_ROAD_FIREC   4
-
-#define GROUP_INDUSTRY_L   12
-#define GROUP_INDUSTRY_L_COLOUR (cyan(18))
-#define GROUP_INDUSTRY_L_COST 20000
-#define GROUP_INDUSTRY_L_COST_MUL 25
-#define GROUP_INDUSTRY_L_BUL_COST 20000
-#define GROUP_INDUSTRY_L_TECH 160
-#define GROUP_INDUSTRY_L_FIREC 70
-
-#define GROUP_UNIVERSITY   13
-#define GROUP_UNIVERSITY_COLOUR (blue(22))
-#define GROUP_UNIVERSITY_COST 20000
-#define GROUP_UNIVERSITY_COST_MUL 25
-#define GROUP_UNIVERSITY_BUL_COST 20000
-#define GROUP_UNIVERSITY_TECH 150
-#define GROUP_UNIVERSITY_FIREC 40
-
-#define GROUP_COMMUNE      14
-#define GROUP_COMMUNE_COLOUR (green(30))
-#define GROUP_COMMUNE_COST  1
-#define GROUP_COMMUNE_COST_MUL 2
-#define GROUP_COMMUNE_BUL_COST  1000
-#define GROUP_COMMUNE_TECH  0
-#define GROUP_COMMUNE_FIREC 30
-
-#define GROUP_OREMINE      15
-#define GROUP_OREMINE_COLOUR (red(18))
-#define GROUP_OREMINE_COST 500
-#define GROUP_OREMINE_COST_MUL 10
-#define GROUP_OREMINE_BUL_COST 500000
-#define GROUP_OREMINE_TECH 0
-#define GROUP_OREMINE_FIREC 0
-
-#define GROUP_TIP      16
-#define GROUP_TIP_COLOUR (white(16))
-#define GROUP_TIP_COST 10000
-#define GROUP_TIP_COST_MUL 25
-#define GROUP_TIP_BUL_COST 1000000
-#define GROUP_TIP_TECH 0
-#define GROUP_TIP_FIREC 50
-
-#define GROUP_PORT      17
-#define GROUP_PORT_COLOUR (blue(28))
-#define GROUP_PORT_COST 100000
-#define GROUP_PORT_COST_MUL 2
-#define GROUP_PORT_BUL_COST 1000
-#define GROUP_PORT_TECH 35
-#define GROUP_PORT_FIREC 50
-
-#define GROUP_INDUSTRY_H   18
-#define GROUP_INDUSTRY_H_COLOUR (7)     /* colour 7 is an orange, sort of */
-#define GROUP_INDUSTRY_H_COST 50000
-#define GROUP_INDUSTRY_H_COST_MUL 20
-#define GROUP_INDUSTRY_H_BUL_COST 70000
-#define GROUP_INDUSTRY_H_TECH 170
-#define GROUP_INDUSTRY_H_FIREC 80
-
-#define GROUP_PARKLAND     19
-#define GROUP_PARKLAND_COLOUR (green(31))
-#define GROUP_PARKLAND_COST   1000
-#define GROUP_PARKLAND_COST_MUL 25
-#define GROUP_PARKLAND_BUL_COST   1000
-#define GROUP_PARKLAND_TECH   2
-#define GROUP_PARKLAND_FIREC 1
-
-#define GROUP_RECYCLE      20
-#define GROUP_RECYCLE_COLOUR   (green(28))
-#define GROUP_RECYCLE_COST    100000
-#define GROUP_RECYCLE_COST_MUL 5
-#define GROUP_RECYCLE_BUL_COST    1000
-#define GROUP_RECYCLE_TECH    232
-#define GROUP_RECYCLE_FIREC 10
-
-#define GROUP_WATER	   21
-#define GROUP_WATER_COLOUR    (blue(31))
-#define GROUP_WATER_COST      1000000
-#define GROUP_WATER_COST_MUL 2
-#define GROUP_WATER_BUL_COST      1000000
-#define GROUP_WATER_TECH      0
-#define GROUP_RIVER (GROUP_WATER)       /* oops -- GCS: Why oops? */
-#define GROUP_WATER_FIREC 0
-
-#define GROUP_HEALTH       22
-#define GROUP_HEALTH_COLOUR   (green(24))
-#define GROUP_HEALTH_COST     100000
-#define GROUP_HEALTH_COST_MUL 2
-#define GROUP_HEALTH_BUL_COST     1000
-#define GROUP_HEALTH_TECH     110
-#define GROUP_HEALTH_FIREC 2
-
-#define GROUP_ROCKET	   23
-#define GROUP_ROCKET_COLOUR   (magenta(20))
-#define GROUP_ROCKET_COST     700000
-#define GROUP_ROCKET_COST_MUL 2
-#define GROUP_ROCKET_BUL_COST     1
-#define GROUP_ROCKET_TECH     750
-#define GROUP_ROCKET_FIREC 0
-
-#define GROUP_WINDMILL     24
-#define GROUP_WINDMILL_COLOUR (green(25))
-#define GROUP_WINDMILL_COST   20000
-#define GROUP_WINDMILL_COST_MUL 25
-#define GROUP_WINDMILL_BUL_COST   1000
-#define GROUP_WINDMILL_TECH   30
-#define GROUP_WINDMILL_FIREC  10
-
-#define GROUP_MONUMENT     25
-#define GROUP_MONUMENT_COLOUR (white(15))
-#define GROUP_MONUMENT_COST   10000
-#define GROUP_MONUMENT_COST_MUL 25
-#define GROUP_MONUMENT_BUL_COST   1000000
-#define GROUP_MONUMENT_TECH   0
-#define GROUP_MONUMENT_FIREC  0
-
-#define GROUP_SCHOOL     26
-#define GROUP_SCHOOL_COLOUR (white(15))
-#define GROUP_SCHOOL_COST   10000
-#define GROUP_SCHOOL_COST_MUL 25
-#define GROUP_SCHOOL_BUL_COST   10000
-#define GROUP_SCHOOL_TECH   1
-#define GROUP_SCHOOL_FIREC 40
-
-#define GROUP_BLACKSMITH     27
-#define GROUP_BLACKSMITH_COLOUR (white(15))
-#define GROUP_BLACKSMITH_COST   5000
-#define GROUP_BLACKSMITH_COST_MUL 25
-#define GROUP_BLACKSMITH_BUL_COST   1000
-#define GROUP_BLACKSMITH_TECH   3
-#define GROUP_BLACKSMITH_FIREC 60
-
-#define GROUP_MILL     28
-#define GROUP_MILL_COLOUR (white(15))
-#define GROUP_MILL_COST   10000
-#define GROUP_MILL_COST_MUL 25
-#define GROUP_MILL_BUL_COST   1000
-#define GROUP_MILL_TECH   25
-#define GROUP_MILL_FIREC  60
-
-#define GROUP_POTTERY  29
-#define GROUP_POTTERY_COLOUR (red(12))
-#define GROUP_POTTERY_COST   1000
-#define GROUP_POTTERY_COST_MUL 25
-#define GROUP_POTTERY_BUL_COST 1000
-#define GROUP_POTTERY_TECH  0
-#define GROUP_POTTERY_FIREC 50
-
-#define GROUP_FIRESTATION 30
-#define GROUP_FIRESTATION_COLOUR (red(20))
-#define GROUP_FIRESTATION_COST   20000
-#define GROUP_FIRESTATION_COST_MUL 10
-#define GROUP_FIRESTATION_BUL_COST 1000
-#define GROUP_FIRESTATION_TECH     22
-#define GROUP_FIRESTATION_FIREC 0
-
-#define GROUP_CRICKET 31
-#define GROUP_CRICKET_COLOUR (white(20))
-#define GROUP_CRICKET_COST   2000
-#define GROUP_CRICKET_COST_MUL 3
-#define GROUP_CRICKET_BUL_COST 1000
-#define GROUP_CRICKET_TECH     12
-#define GROUP_CRICKET_FIREC 20
-
-#define GROUP_BURNT        32
-#define GROUP_BURNT_COLOUR    (red(30))
-#define GROUP_BURNT_COST   0    /* Unused */
-#define GROUP_BURNT_COST_MUL   1        /* Unused */
-#define GROUP_BURNT_BUL_COST  1000
-#define GROUP_BURNT_TECH   0    /* Unused */
-#define GROUP_BURNT_FIREC  0
-
-#define GROUP_SHANTY        33
-#define GROUP_SHANTY_COLOUR    (red(22))
-#define GROUP_SHANTY_COST   0   /* Unused */
-#define GROUP_SHANTY_COST_MUL   1       /* Unused */
-#define GROUP_SHANTY_BUL_COST  100000
-#define GROUP_SHANTY_TECH   0   /* Unused */
-#define GROUP_SHANTY_FIREC     25
-
-#define SHANTY_MIN_PP     150
-#define SHANTY_POP        50
-#define DAYS_BETWEEN_SHANTY (NUMOF_DAYS_IN_MONTH*5)
-#define SHANTY_GET_FOOD   50
-#define SHANTY_GET_JOBS   5
-#define SHANTY_GET_GOODS  50
-#define SHANTY_GET_COAL   1
-#define SHANTY_GET_ORE    10
-#define SHANTY_GET_STEEL  1
-
-#define GROUP_FIRE        34
-#define GROUP_FIRE_COLOUR    (red(30))
-#define GROUP_FIRE_COST   0     /* Unused */
-#define GROUP_FIRE_COST_MUL   1 /* Unused */
-#define GROUP_FIRE_BUL_COST  1000
-#define GROUP_FIRE_TECH   0     /* Unused */
-#define GROUP_FIRE_FIREC  0
-
-#define GROUP_USED        35
-#define GROUP_USED_COLOUR (green(12))   /* Unused */
-#define GROUP_USED_COST   0     /* Unused */
-#define GROUP_USED_COST_MUL  1  /* Unused */
-#define GROUP_USED_BUL_COST  0  /* Unused */
-#define GROUP_USED_TECH   0     /* Unused */
-#define GROUP_USED_FIREC  0     /* Unused */
-
-#define GROUP_RESIDENCE_ML 36
-#define GROUP_RESIDENCE_ML_COLOUR (cyan(24))
-#define GROUP_RESIDENCE_ML_COST 2000
-#define GROUP_RESIDENCE_ML_COST_MUL 25
-#define GROUP_RESIDENCE_ML_BUL_COST 1000
-#define GROUP_RESIDENCE_ML_TECH 0
-#define GROUP_RESIDENCE_ML_FIREC 75
-
-#define GROUP_RESIDENCE_HL 37
-#define GROUP_RESIDENCE_HL_COLOUR (cyan(24))
-#define GROUP_RESIDENCE_HL_COST 4000
-#define GROUP_RESIDENCE_HL_COST_MUL 25
-#define GROUP_RESIDENCE_HL_BUL_COST 1000
-#define GROUP_RESIDENCE_HL_TECH 0
-#define GROUP_RESIDENCE_HL_FIREC 75
-
-#define GROUP_RESIDENCE_LH 38
-#define GROUP_RESIDENCE_LH_COLOUR (cyan(24))
-#define GROUP_RESIDENCE_LH_COST 800
-#define GROUP_RESIDENCE_LH_COST_MUL 25
-#define GROUP_RESIDENCE_LH_BUL_COST 1000
-#define GROUP_RESIDENCE_LH_TECH 0       /* ?? */
-#define GROUP_RESIDENCE_LH_FIREC 75
-
-#define GROUP_RESIDENCE_MH 39
-#define GROUP_RESIDENCE_MH_COLOUR (cyan(24))
-#define GROUP_RESIDENCE_MH_COST 1600
-#define GROUP_RESIDENCE_MH_COST_MUL 25
-#define GROUP_RESIDENCE_MH_BUL_COST 1000
-#define GROUP_RESIDENCE_MH_TECH 0
-#define GROUP_RESIDENCE_MH_FIREC 75
-
-#define GROUP_RESIDENCE_HH 40
-#define GROUP_RESIDENCE_HH_COLOUR (cyan(24))
-#define GROUP_RESIDENCE_HH_COST 3200
-#define GROUP_RESIDENCE_HH_COST_MUL 25
-#define GROUP_RESIDENCE_HH_BUL_COST 1000
-#define GROUP_RESIDENCE_HH_TECH 0
-#define GROUP_RESIDENCE_HH_FIREC 75
-
-#define GROUP_WATERWELL	   41
-#define GROUP_WATERWELL_COLOUR    (blue(31))
-#define GROUP_WATERWELL_COST      1
-#define GROUP_WATERWELL_COST_MUL 2
-#define GROUP_WATERWELL_BUL_COST      1
-#define GROUP_WATERWELL_TECH      0
-#define GROUP_WATERWELL_FIREC 0
-
-#define GROUP_DESERT 	  42
-#define GROUP_DESERT_COLOUR  (yellow(18))
-#define GROUP_DESERT_COST    0
-#define GROUP_DESERT_COST_MUL 1
-#define GROUP_DESERT_BUL_COST 1
-#define GROUP_DESERT_TECH    0
-#define GROUP_DESERT_FIREC   0
-
-#define GROUP_TREE 	   43
-#define GROUP_TREE_COLOUR  (green(12))
-#define GROUP_TREE_COST    0
-#define GROUP_TREE_COST_MUL 1
-#define GROUP_TREE_BUL_COST 1
-#define GROUP_TREE_TECH    0
-#define GROUP_TREE_FIREC   0
-
-#define GROUP_TREE2 	   44
-#define GROUP_TREE2_COLOUR  (green(12))
-#define GROUP_TREE2_COST    0
-#define GROUP_TREE2_COST_MUL 1
-#define GROUP_TREE2_BUL_COST 1
-#define GROUP_TREE2_TECH    0
-#define GROUP_TREE2_FIREC   0
-
-#define GROUP_TREE3 	   45
-#define GROUP_TREE3_COLOUR  (green(12))
-#define GROUP_TREE3_COST    0
-#define GROUP_TREE3_COST_MUL 1
-#define GROUP_TREE3_BUL_COST 1
-#define GROUP_TREE3_TECH    0
-#define GROUP_TREE3_FIREC   0
-
-#define BRIDGE_FACTOR 500 /* a bridge is that much more expensive than the land transport */
-
-#define GROUP_TRACK_BRIDGE        46
-#define GROUP_TRACK_BRIDGE_COLOUR 32   /* 32 is a brown */
-#define GROUP_TRACK_BRIDGE_COST   GROUP_TRACK_COST * BRIDGE_FACTOR
-#define GROUP_TRACK_BRIDGE_COST_MUL 2
-#define GROUP_TRACK_BRIDGE_BUL_COST GROUP_TRACK_BUL_COST * BRIDGE_FACTOR
-#define GROUP_TRACK_BRIDGE_TECH   GROUP_TRACK_TECH
-#define GROUP_TRACK_BRIDGE_FIREC  0    /* unused */
-
-#define GROUP_ROAD_BRIDGE         47
-#define GROUP_ROAD_BRIDGE_COLOUR  (white(18))
-#define GROUP_ROAD_BRIDGE_COST    GROUP_ROAD_COST * BRIDGE_FACTOR
-#define GROUP_ROAD_BRIDGE_COST_MUL 2
-#define GROUP_ROAD_BRIDGE_BUL_COST GROUP_ROAD_BUL_COST * BRIDGE_FACTOR
-#define GROUP_ROAD_BRIDGE_TECH    GROUP_ROAD_TECH
-#define GROUP_ROAD_BRIDGE_FIREC   0
-
-#define GROUP_RAIL_BRIDGE         48
-#define GROUP_RAIL_BRIDGE_COLOUR  (magenta(18))
-#define GROUP_RAIL_BRIDGE_COST    GROUP_RAIL_COST * BRIDGE_FACTOR
-#define GROUP_RAIL_BRIDGE_COST_MUL 2
-#define GROUP_RAIL_BRIDGE_BUL_COST GROUP_RAIL_BUL_COST * BRIDGE_FACTOR
-#define GROUP_RAIL_BRIDGE_TECH    GROUP_RAIL_TECH
-#define GROUP_RAIL_BRIDGE_FIREC   0
-
-#define GROUP_IS_RESIDENCE(group) \
-            ((group == GROUP_RESIDENCE_LL) || \
-             (group == GROUP_RESIDENCE_ML) || \
-             (group == GROUP_RESIDENCE_HL) || \
-             (group == GROUP_RESIDENCE_LH) || \
-             (group == GROUP_RESIDENCE_MH) || \
-             (group == GROUP_RESIDENCE_HH))
-
-#define GROUP_IS_BARE(group) \
-	    ((group == GROUP_BARE) || \
-	     (group == GROUP_DESERT) || \
-	     (group == GROUP_TREE) || \
-	     (group == GROUP_TREE2) || \
-	     (group == GROUP_TREE3))
-
-/********   end of buildings // groups   ************/
-
 #include "lintypes.h"
 
 #endif /* __lin_city_h__ */

Modified: trunk/src/lincity/lintypes.cpp
===================================================================
--- trunk/src/lincity/lintypes.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/lintypes.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -13,9 +13,19 @@
 #include "fileutil.h"
 #include "gui_interface/readpng.h"
 #include "loadsave.h"
+#include "all_buildings.h"
 
 struct TYPE main_types[NUM_OF_TYPES];
 
+/* AL1 : 2.x : RANGE of buildings is not included in this struct GROUP
+ *
+ * 		this is a bit annoying => would need to be fixed when(if?)
+ * 		all the struct and associated macros are cleaned (map, MP_INFO etc.)
+ *
+ * 		for now (2.1 svn rev 1585) just put it in range.h 
+ *
+ */
+
 struct GROUP main_groups[NUM_OF_GROUPS] = {
     /* 0 */
     {N_("Empty"),               /* name */
@@ -29,6 +39,7 @@
      0,                         /* cost */
      0                          /* tech */
      },
+
     /* 1 */
     {N_("Power line"),
      FALSE,                     /* need credit? */
@@ -40,6 +51,7 @@
      GROUP_POWER_LINE_FIREC,
      GROUP_POWER_LINE_COST,
      GROUP_POWER_LINE_TECH},
+
     /* 2 */
     {N_("Solar PS"),
      TRUE,                      /* need credit? */

Modified: trunk/src/lincity/loadsave.cpp
===================================================================
--- trunk/src/lincity/loadsave.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/loadsave.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -16,6 +16,7 @@
 #include "stats.h"
 #include "init_game.h"
 #include "transport.h"
+#include "all_buildings.h"  // temporary workaround. needed only to get MODERN_WINDMILL_TECH for init, which should be elsewhere
 
 #include <fcntl.h>
 #include <sys/types.h>

Modified: trunk/src/lincity/modules/coalmine.cpp
===================================================================
--- trunk/src/lincity/modules/coalmine.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/modules/coalmine.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -7,6 +7,7 @@
 
 #include "modules.h"
 #include "coalmine.h"
+#include "../range.h"
 
 void do_coalmine(int x, int y)
 {
@@ -24,16 +25,16 @@
         if (MP_INFO(x, y).int_2 < 0)
             return;             /* run out of reserves */
 
-        xs = x - COAL_RESERVE_SEARCH_LEN;
+        xs = x - COAL_RESERVE_SEARCH_RANGE;
         if (xs < 0)
             xs = 0;
-        ys = y - COAL_RESERVE_SEARCH_LEN;
+        ys = y - COAL_RESERVE_SEARCH_RANGE;
         if (ys < 0)
             ys = 0;
-        xe = x + COAL_RESERVE_SEARCH_LEN;
+        xe = x + COAL_RESERVE_SEARCH_RANGE;
         if (xe > WORLD_SIDE_LEN)
             xe = WORLD_SIDE_LEN;
-        ye = y + COAL_RESERVE_SEARCH_LEN;
+        ye = y + COAL_RESERVE_SEARCH_RANGE;
         if (ye > WORLD_SIDE_LEN)
             ye = WORLD_SIDE_LEN;
         cr = 0;

Modified: trunk/src/lincity/modules/cricket.cpp
===================================================================
--- trunk/src/lincity/modules/cricket.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/modules/cricket.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -7,6 +7,7 @@
 
 #include "modules.h"
 #include "cricket.h"
+#include "../range.h"
 
 void do_cricket(int x, int y)
 {

Modified: trunk/src/lincity/modules/fire.cpp
===================================================================
--- trunk/src/lincity/modules/fire.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/modules/fire.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -16,14 +16,16 @@
        // int_2 is the fire length
        // int_3 is the real_time before the fire can spread or -1 if triggered 
        // int_4 is the idle land length
+       // int_5 is a boolean : is this fire still burning (true if younger than FIRE_LENGTH)
        // MP_ANIM is the next animation frame time, since 1.91
      */
     int i;
     /* this so we don't get whole blocks changing in one go. */
     if (MP_INFO(x, y).int_2 == 0)
+        MP_INFO(x, y).int_2 = rand() % (FIRE_LENGTH / 5);
 
-        MP_INFO(x, y).int_2 = rand() % (FIRE_LENGTH / 5);
     if (MP_INFO(x, y).int_2 > FIRE_LENGTH) {
+        MP_INFO(x,y).int_5 = false;
         if (MP_INFO(x, y).int_4 == 0)   /* rand length here also */
             MP_INFO(x, y).int_4 = rand() % (AFTER_FIRE_LENGTH / 6);
         MP_INFO(x, y).int_4++;
@@ -41,7 +43,10 @@
         else
             MP_TYPE(x, y) = CST_FIRE_DONE1;
         return;
+    } else {
+        MP_INFO(x,y).int_5 = true;
     }
+
     MP_INFO(x, y).int_2++;
     if (real_time > MP_ANIM(x, y)) {
         MP_ANIM(x, y) = real_time + FIRE_ANIMATION_SPEED;

Modified: trunk/src/lincity/modules/firestation.cpp
===================================================================
--- trunk/src/lincity/modules/firestation.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/modules/firestation.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -7,6 +7,7 @@
 
 #include "modules.h"
 #include "firestation.h"
+#include "../range.h"
 
 void do_firestation(int x, int y)
 {

Modified: trunk/src/lincity/modules/health_centre.cpp
===================================================================
--- trunk/src/lincity/modules/health_centre.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/modules/health_centre.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -7,6 +7,7 @@
 
 #include "modules.h"
 #include "health_centre.h"
+#include "../range.h"
 
 void do_health_centre(int x, int y)
 {

Modified: trunk/src/lincity/modules/market.cpp
===================================================================
--- trunk/src/lincity/modules/market.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/modules/market.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -7,6 +7,7 @@
 #include "modules.h"
 #include "market.h"
 #include "lincity-ng/ErrorInterface.hpp"
+#include "../range.h"
 
     /*
      * MP_INFO(x,y)

Modified: trunk/src/lincity/modules/modules.h
===================================================================
--- trunk/src/lincity/modules/modules.h	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/modules/modules.h	2010-07-05 11:52:34 UTC (rev 1586)
@@ -17,6 +17,7 @@
 
 #include "market.h"
 #include "../power.h"
+#include "../all_buildings.h"
 
 // for real_time
 //#include "cliglobs.h"

Modified: trunk/src/lincity/modules/monument.cpp
===================================================================
--- trunk/src/lincity/modules/monument.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/modules/monument.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -14,11 +14,14 @@
        // int_1 holds the jobs used
        // int_2 holds the tech points made
        // int_3 holds the tail off count
+       // int_4 holds percentage of completion (used for the sound)
      */
     if (MP_INFO(x, y).int_1 < BUILD_MONUMENT_JOBS)
         if (get_jobs(x, y, MONUMENT_GET_JOBS) != 0)
             MP_INFO(x, y).int_1 += MONUMENT_GET_JOBS;
 
+    MP_INFO(x, y).int_4 = MP_INFO(x, y).int_1 * 100 / BUILD_MONUMENT_JOBS;
+
     /* now choose a graphic */
     if (MP_INFO(x, y).int_1 >= BUILD_MONUMENT_JOBS) {
         MP_TYPE(x, y) = CST_MONUMENT_5;

Modified: trunk/src/lincity/modules/rocket_pad.cpp
===================================================================
--- trunk/src/lincity/modules/rocket_pad.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/modules/rocket_pad.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -152,7 +152,8 @@
     r = rand() % MAX_TECH_LEVEL;
     if (r > tech_level || rand() % 100 > (rockets_launched * 15 + 25)) {
         /* the launch failed */
-        display_rocket_result_dialog(ROCKET_LAUNCH_BAD);
+        //display_rocket_result_dialog(ROCKET_LAUNCH_BAD);
+        ok_dial_box ("launch-fail.mes", BAD, 0L);
         rockets_launched_success = 0;
         xx = ((rand() % 40) - 20) + x;
         yy = ((rand() % 40) - 20) + y;
@@ -173,10 +174,13 @@
         /* TODO: Maybe should generate some pollution ? */
         if (rockets_launched_success > 5) {
             remove_people(1000);
-            if (people_pool || housed_population)
-                display_rocket_result_dialog(ROCKET_LAUNCH_EVAC);
+            if (people_pool || housed_population) {
+                //display_rocket_result_dialog(ROCKET_LAUNCH_EVAC);
+                ok_dial_box ("launch-evac.mes", GOOD, 0L);
+            }
         } else {
-            display_rocket_result_dialog(ROCKET_LAUNCH_GOOD);
+            //display_rocket_result_dialog(ROCKET_LAUNCH_GOOD);
+            ok_dial_box ("launch-good.mes", GOOD, 0L);
         }
     }
 }

Modified: trunk/src/lincity/modules/substation.cpp
===================================================================
--- trunk/src/lincity/modules/substation.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/modules/substation.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -14,7 +14,7 @@
 /* Substations 
  *
  * int_1 unused
- * int_2 unused
+ * int_2 unused except for windmills (true = hightech)
  * int_3 unused
  * int_4 is the power demand at this substation 
  * int_5 forbidden for substations: it is power production from power sources

Modified: trunk/src/lincity/modules/waterwell.cpp
===================================================================
--- trunk/src/lincity/modules/waterwell.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/modules/waterwell.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -19,6 +19,7 @@
 
 #include "modules.h"
 #include "waterwell.h"
+#include "../range.h"
 
 void do_waterwell_cover(int x, int y)
 {

Modified: trunk/src/lincity/modules/windmill.cpp
===================================================================
--- trunk/src/lincity/modules/windmill.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/modules/windmill.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -11,7 +11,7 @@
 /*** Windmills ***/
 /*
   // int_1 is the rated capacity 
-  // int_2 unused
+  // int_2 is true if we have a hightech windmill
   // int_3 is the sail count - to choose the right sail.
   // int_4 reserved = local power demand for substations (like substations)
   // int_5 is the power produced (basically _if_ power produced)
@@ -37,7 +37,7 @@
     /* update animation */
     if (real_time > MP_ANIM(x , y)) {
         MP_INFO(x, y).int_3++;
-        if (MP_TECH(x, y) < MODERN_WINDMILL_TECH) {
+        if ( !MP_INFO(x, y).int_2) {
             MP_ANIM(x,y) = real_time + ANTIQUE_WINDMILL_ANIM_SPEED;
         } else {
             MP_ANIM(x,y) = real_time + MODERN_WINDMILL_ANIM_SPEED;
@@ -47,7 +47,7 @@
     /* figure out which tile to use */
     anim_tile = (MP_INFO(x, y).int_3 % 3);
 
-    if (MP_TECH(x, y) < MODERN_WINDMILL_TECH)
+    if ( !MP_INFO(x, y).int_2 )
         MP_TYPE(x, y) = CST_WINDMILL_1_W + anim_tile;
     else
         switch (grid[MP_INFO(x, y).int_6]->powered) {

Modified: trunk/src/lincity/old_ldsvguts.cpp
===================================================================
--- trunk/src/lincity/old_ldsvguts.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/old_ldsvguts.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -16,6 +16,7 @@
 #include "gui_interface/shared_globals.h"
 #include "stats.h"
 #include "init_game.h"
+#include "all_buildings.h"
 
 #include <fcntl.h>
 #include <sys/types.h>

Modified: trunk/src/lincity/power.cpp
===================================================================
--- trunk/src/lincity/power.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/power.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -17,6 +17,8 @@
 #include "transport.h"          /* for XY_IS_TRANSPORT */
 #include "tinygettext/gettext.hpp"
 #include "gui_interface/dialbox_interface.h"
+#include "all_buildings.h"
+#include "range.h"
 
 extern void ok_dial_box(const char *, int, const char *);
 

Added: trunk/src/lincity/range.h
===================================================================
--- trunk/src/lincity/range.h	                        (rev 0)
+++ trunk/src/lincity/range.h	2010-07-05 11:52:34 UTC (rev 1586)
@@ -0,0 +1,22 @@
+/* AL1 : 2.x : RANGE of buildings is not included in this struct GROUP
+ *
+ * 		this is a bit annoying => would need to be fixed when(if?)
+ * 		all the struct and associated macros are cleaned (map, MP_INFO etc.)
+ *
+ * 		for now (2.1 svn rev 1585) just put it in range.h 
+ *
+ */
+
+
+#define SUBSTATION_RANGE 10
+#define FIRESTATION_RANGE  18
+#define CRICKET_RANGE  10
+#define HEALTH_CENTRE_RANGE  15
+#define MARKET_RANGE      10
+#define EMPLOYER_RANGE 10
+#define ORG_FARM_RANGE 10
+#define WATERWELL_RANGE 20
+
+/* COAL_RESERVE_SEARCH_RANGE acts in both directions, so 5 is 10*10 */
+#define COAL_RESERVE_SEARCH_RANGE 8
+

Modified: trunk/src/lincity/simulate.cpp
===================================================================
--- trunk/src/lincity/simulate.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/simulate.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -40,6 +40,8 @@
 #include "gui_interface/pbar_interface.h"
 #include "modules/all_modules.h"
 #include "transport.h"
+#include "all_buildings.h"
+#include "sustainable.h"
 
 /* extern resources */
 extern void print_total_money(void);

Added: trunk/src/lincity/sustainable.h
===================================================================
--- trunk/src/lincity/sustainable.h	                        (rev 0)
+++ trunk/src/lincity/sustainable.h	2010-07-05 11:52:34 UTC (rev 1586)
@@ -0,0 +1,15 @@
+#define SUST_ORE_COAL_COL 34
+#define SUST_PORT_COL     white(24)
+#define SUST_MONEY_COL    green(26)
+#define SUST_POP_COL      cyan(24)
+#define SUST_TECH_COL     yellow(26)
+#define SUST_FIRE_COL     red(26)
+#define SUST_ORE_COAL_YEARS_NEEDED 180
+#define SUST_PORT_YEARS_NEEDED     180
+#define SUST_MONEY_YEARS_NEEDED    60
+#define SUST_POP_YEARS_NEEDED      60
+#define SUST_TECH_YEARS_NEEDED     120
+#define SUST_FIRE_YEARS_NEEDED     60
+
+#define SUST_MIN_POPULATION 5000
+#define SUST_MIN_TECH_LEVEL (MAX_TECH_LEVEL/2)

Modified: trunk/src/lincity/transport.cpp
===================================================================
--- trunk/src/lincity/transport.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity/transport.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -11,6 +11,7 @@
 #include "transport.h"
 #include "power.h"
 #include "stats.h"              /* for transport_cost */
+#include "all_buildings.h"
 
 static int max_load(int x, int y, int i)
 {

Modified: trunk/src/lincity-ng/ButtonPanel.cpp
===================================================================
--- trunk/src/lincity-ng/ButtonPanel.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity-ng/ButtonPanel.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -33,6 +33,8 @@
 #include "gui_interface/shared_globals.h"
 
 #include "lincity/lctypes.h"
+#include "lincity/groups.h"
+#include "lincity/all_buildings.h"
 #include "tinygettext/gettext.hpp"
 
 #include "GameView.hpp"

Modified: trunk/src/lincity-ng/EconomyGraph.cpp
===================================================================
--- trunk/src/lincity-ng/EconomyGraph.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity-ng/EconomyGraph.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -35,6 +35,7 @@
 #include "lincity/engglobs.h"
 #include "lincity/stats.h"
 #include "lincity/lin-city.h"
+#include "lincity/sustainable.h"
 
 #include "ScreenInterface.hpp"
 #include "Config.hpp"

Modified: trunk/src/lincity-ng/GameView.cpp
===================================================================
--- trunk/src/lincity-ng/GameView.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity-ng/GameView.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -33,6 +33,7 @@
 #include "lincity/lin-city.h"
 #include "lincity/lctypes.h"
 #include "lincity/engglobs.h"
+#include "lincity/range.h"
 
 #include "MapEdit.hpp"
 #include "MiniMap.hpp"
@@ -1520,7 +1521,7 @@
             case CST_SUBSTATION_R:   range = SUBSTATION_RANGE; reduceNW = 1; break;
             case CST_WINDMILL_1_R:   range = SUBSTATION_RANGE; reduceNW = 1; break; //Windmills are handled like substations
             //case CST_COMMUNE_1: break;
-            case CST_COALMINE_EMPTY: range = COAL_RESERVE_SEARCH_LEN; break;
+            case CST_COALMINE_EMPTY: range = COAL_RESERVE_SEARCH_RANGE; break;
             //case CST_OREMINE_1: break;
             //case CST_TIP_0: break;
             //case CST_RECYCLE: break;

Modified: trunk/src/lincity-ng/MiniMap.cpp
===================================================================
--- trunk/src/lincity-ng/MiniMap.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity-ng/MiniMap.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -33,6 +33,8 @@
 #include "lincity/lin-city.h"
 #include "lincity/engglobs.h"
 #include "lincity/lctypes.h"
+#include "lincity/range.h"
+#include "lincity/all_buildings.h"
 
 #include "gui/callback/Callback.hpp"
 
@@ -677,7 +679,7 @@
         }
         case FIRE:
             if( MP_GROUP( x, y ) == GROUP_FIRE ){
-                if( MP_INFO(x,y).int_2 < FIRE_LENGTH ){
+                if( MP_INFO(x,y).int_5 ){
                     return Color(0xFF,0,0); //still burning (red)
                 } else  {
                     return Color(0xFF,0x99,0); //unbulldozable (orange)

Modified: trunk/src/lincity-ng/Mps.cpp
===================================================================
--- trunk/src/lincity-ng/Mps.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity-ng/Mps.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -20,7 +20,6 @@
 #include "Mps.hpp"
 #include "gui_interface/mps.h"
 #include "lincity/engglobs.h"
-//#include "lincity/modules/all_modules.h"
 #include "lincity/lctypes.h"
 
 #include "Util.hpp"
@@ -161,7 +160,7 @@
             getSound()->playSound( "Mill" );
             break;
         case (GROUP_MONUMENT):
-            if ((MP_INFO( mps_x,mps_y).int_1 * 100 / BUILD_MONUMENT_JOBS) >= 100) {
+            if (MP_INFO( mps_x,mps_y).int_4 >= 100) {
                 getSound()->playSound( "Monument" );
             } else {
                 getSound()->playSound( "MonumentConstruction" );
@@ -253,15 +252,14 @@
             getSound()->playSound( "Water" );
             break;
         case GROUP_WINDMILL:
-            if( MP_TECH(mps_x, mps_y ) < MODERN_WINDMILL_TECH ){ 
+            if( MP_INFO(mps_x, mps_y ).int_2 ){ 
                 getSound()->playSound( "WindMill" );
             } else {
                 getSound()->playSound( "WindMillHTech" );
             }
             break;
         case GROUP_FIRE:
-            if( (MP_GROUP( mps_x, mps_y ) == GROUP_FIRE) &&
-                   ( MP_INFO( mps_x, mps_y ).int_2 < FIRE_LENGTH ) ){
+            if( MP_INFO( mps_x, mps_y ).int_5 ){
                 getSound()->playSound( "Fire" );
             }
             break;

Modified: trunk/src/lincity-ng/MpsInterface.cpp
===================================================================
--- trunk/src/lincity-ng/MpsInterface.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity-ng/MpsInterface.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -30,7 +30,6 @@
 #include "lincity/engglobs.h"
 #include "tinygettext/gettext.hpp"
 #include "lincity/modules/all_modules.h"
-#include "tinygettext/gettext.hpp"
 #include "MiniMap.hpp"
 
 // implement everything here

Modified: trunk/src/lincity-ng/ScreenInterface.cpp
===================================================================
--- trunk/src/lincity-ng/ScreenInterface.cpp	2010-06-24 12:50:41 UTC (rev 1585)
+++ trunk/src/lincity-ng/ScreenInterface.cpp	2010-07-05 11:52:34 UTC (rev 1586)
@@ -45,7 +45,6 @@
 #include "Dialog.hpp"
 #include "EconomyGraph.hpp"
 
-extern void ok_dial_box(const char *, int, const char *);
 
 
 short mappointoldtype[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
@@ -70,20 +69,6 @@
     return 0;
 }
 
-void display_rocket_result_dialog (int result)
-{
-    switch (result) {
-    case ROCKET_LAUNCH_BAD:
-	ok_dial_box ("launch-fail.mes", BAD, 0L);
-	break;
-    case ROCKET_LAUNCH_GOOD:
-	ok_dial_box ("launch-good.mes", GOOD, 0L);
-	break;
-    case ROCKET_LAUNCH_EVAC:
-	ok_dial_box ("launch-evac.mes", GOOD, 0L);
-	break;
-    }
-}
 void draw_background (void);
 void screen_full_refresh (void);
 void init_fonts (void);
@@ -126,7 +111,6 @@
 void refresh_monthgraph (void);
 void draw_small_yellow_bezel (int x, int y, int h, int w);
 void mini_screen_help (void);
-void status_message(const char *m1, const char* m2);
 void print_time_for_year (void);
 void rotate_main_screen (void);
 void screen_setup (void);
@@ -144,8 +128,6 @@
     updateMessageText( text.str() );
 }
 
-void reset_status_message (void);
-
 /*
  * Display some Text in a Dialog Box with an OK Button.
  * 



From alainb at mail.berlios.de  Mon Jul  5 13:52:40 2010
From: alainb at mail.berlios.de (alainb at mail.berlios.de)
Date: Mon,  5 Jul 2010 13:52:40 +0200
Subject: [Lincity-ng-commit] r1589 - in trunk/src/lincity: . modules
Message-ID: <20100705115240.716C3480E0A@sheep.berlios.de>

Author: alainb
Date: 2010-07-05 13:52:40 +0200 (Mon, 05 Jul 2010)
New Revision: 1589

Modified:
   trunk/src/lincity/all_buildings.h
   trunk/src/lincity/modules/shanty.cpp
Log:
update shanties more often, and allow multiple addition/removal

Modified: trunk/src/lincity/all_buildings.h
===================================================================
--- trunk/src/lincity/all_buildings.h	2010-07-05 11:52:38 UTC (rev 1588)
+++ trunk/src/lincity/all_buildings.h	2010-07-05 11:52:40 UTC (rev 1589)
@@ -563,7 +563,7 @@
 #define GROUP_SHANTY_FIREC     25
 #define SHANTY_MIN_PP     150
 #define SHANTY_POP        50
-#define DAYS_BETWEEN_SHANTY (NUMOF_DAYS_IN_MONTH*5)
+#define DAYS_BETWEEN_SHANTY (NUMOF_DAYS_IN_MONTH * 1)
 #define SHANTY_GET_FOOD   50
 #define SHANTY_GET_JOBS   5
 #define SHANTY_GET_GOODS  50

Modified: trunk/src/lincity/modules/shanty.cpp
===================================================================
--- trunk/src/lincity/modules/shanty.cpp	2010-07-05 11:52:38 UTC (rev 1588)
+++ trunk/src/lincity/modules/shanty.cpp	2010-07-05 11:52:40 UTC (rev 1589)
@@ -63,33 +63,38 @@
     /* ATTENTION:
      * fire_area calls bulldoze_item which calls remove shanty.
      */
-    do_bulldoze_area(CST_FIRE_1, x, y);
+   do_bulldoze_area(CST_FIRE_1, x, y);
+
+   /* now put the fire out: it becomes impossible to bulldoze */
+   MP_INFO(x, y).int_2 = FIRE_LENGTH + 1;
+   MP_INFO(x + 1, y).int_2 = FIRE_LENGTH + 1;
+   MP_INFO(x, y + 1).int_2 = FIRE_LENGTH + 1;
+   MP_INFO(x + 1, y + 1).int_2 = FIRE_LENGTH + 1;
 }
 
 void update_shanty(void)
 {
     int i, pp;
+    people_pool += .3 * numof_shanties;
     pp = people_pool - (COMMUNE_POP * numof_communes);
     i = (pp - SHANTY_MIN_PP) / SHANTY_POP;
     if (i > numof_shanties) {
-        add_a_shanty();
-    } else if (numof_shanties > 0 && (i < (numof_shanties - 1) || rand() % 100 == 1)) {
-        int x, y, r;
-        x = rand() % WORLD_SIDE_LEN;
-        y = rand() % WORLD_SIDE_LEN;
-        r = spiral_find_group(x, y, GROUP_SHANTY);
-        if (r == -1) {
-            fprintf(stderr, "Can't find a shanty to remove!\n");
-            return;
+        for (int n = 0; n < 1 + (i - numof_shanties)/10; n++)
+            add_a_shanty();
+    } else if (numof_shanties > 0 && (i < (numof_shanties - 1) )) {
+        for (int n=0; n < (1+(numof_shanties - i)/10); n++) {
+            int x, y, r;
+            x = rand() % WORLD_SIDE_LEN;
+            y = rand() % WORLD_SIDE_LEN;
+            r = spiral_find_group(x, y, GROUP_SHANTY);
+            if (r == -1) {
+                fprintf(stderr, "Can't find a shanty to remove!\n");
+                return;
+            }
+            y = r / WORLD_SIDE_LEN;
+            x = r % WORLD_SIDE_LEN;
+            remove_a_shanty(x, y);  /* this will fire_area */
         }
-        y = r / WORLD_SIDE_LEN;
-        x = r % WORLD_SIDE_LEN;
-        remove_a_shanty(x, y);  /* this will fire_area */
-        /* now put the fire out: it becomes impossible to bulldoze */
-        MP_INFO(x, y).int_2 = FIRE_LENGTH + 1;
-        MP_INFO(x + 1, y).int_2 = FIRE_LENGTH + 1;
-        MP_INFO(x, y + 1).int_2 = FIRE_LENGTH + 1;
-        MP_INFO(x + 1, y + 1).int_2 = FIRE_LENGTH + 1;
     }
 }
 
@@ -108,10 +113,12 @@
     if (get_coal(x, y, SHANTY_GET_COAL) != 0)
         if ((coal_tax -= SHANTY_GET_COAL * 2) < 0)
             coal_tax = 0;
-    if ((total_time & 1) == 0)
-        MP_POL(x, y)++;
-    else
-        MP_POL(x + 1, y + 1)++;
+    if (rand()%10 == 1) {
+        if ((total_time & 1) == 0)
+            MP_POL(x, y)++;
+        else
+            MP_POL(x + 1, y + 1)++;
+    }
 }
 
 /*



From alainb at mail.berlios.de  Mon Jul  5 13:52:38 2010
From: alainb at mail.berlios.de (alainb at mail.berlios.de)
Date: Mon,  5 Jul 2010 13:52:38 +0200
Subject: [Lincity-ng-commit] r1588 - trunk/src/lincity
Message-ID: <20100705115238.C36C5480E0D@sheep.berlios.de>

Author: alainb
Date: 2010-07-05 13:52:38 +0200 (Mon, 05 Jul 2010)
New Revision: 1588

Modified:
   trunk/src/lincity/all_buildings.h
Log:
delete duplicate declaration of group id

Modified: trunk/src/lincity/all_buildings.h
===================================================================
--- trunk/src/lincity/all_buildings.h	2010-07-05 11:52:37 UTC (rev 1587)
+++ trunk/src/lincity/all_buildings.h	2010-07-05 11:52:38 UTC (rev 1588)
@@ -303,7 +303,6 @@
 
 #define GROUP_NAME_LEN   20
 
-#define GROUP_BARE 	   0
 #define GROUP_BARE_COLOUR  (green(12))
 #define GROUP_BARE_COST    0
 #define GROUP_BARE_COST_MUL 1
@@ -311,7 +310,6 @@
 #define GROUP_BARE_TECH    0
 #define GROUP_BARE_FIREC   0
 
-#define GROUP_POWER_LINE   1
 #define GROUP_POWER_LINE_COLOUR (yellow(26))
 #define GROUP_POWER_LINE_COST 100
 #define GROUP_POWER_LINE_COST_MUL 2
@@ -319,7 +317,6 @@
 #define GROUP_POWER_LINE_TECH 200
 #define GROUP_POWER_LINE_FIREC 0
 
-#define GROUP_SOLAR_POWER 2
 #define GROUP_SOLAR_POWER_COLOUR (yellow(22))
 #define GROUP_SOLAR_POWER_COST 500000
 #define GROUP_SOLAR_POWER_COST_MUL 5
@@ -329,7 +326,6 @@
 #define SOLAR_POWER_JOBS 50
 #define POWERS_SOLAR_OUTPUT 1800
 
-#define GROUP_SUBSTATION   3
 #define GROUP_SUBSTATION_COLOUR (yellow(18))
 #define GROUP_SUBSTATION_COST 500
 #define GROUP_SUBSTATION_COST_MUL 2
@@ -337,14 +333,12 @@
 #define GROUP_SUBSTATION_TECH 200
 #define GROUP_SUBSTATION_FIREC 50
 
-#define GROUP_RESIDENCE_LL 4
 #define GROUP_RESIDENCE_LL_COLOUR (cyan(24))
 #define GROUP_RESIDENCE_LL_COST 1000
 #define GROUP_RESIDENCE_LL_COST_MUL 25
 #define GROUP_RESIDENCE_LL_BUL_COST 1000
 #define GROUP_RESIDENCE_LL_TECH 0
 #define GROUP_RESIDENCE_LL_FIREC 75
-
 /* RESIDENCE?_BRM is the birth rate modifier */
 /* RESIDENCE?_DRM is the death rate modifier */
 #define RESIDENCE_BASE_BR     100
@@ -365,7 +359,6 @@
 /* RESIDENCE_PPM is the people_pool mobitily. Higher number=less mobile. */
 #define RESIDENCE_PPM   20
 
-#define GROUP_ORGANIC_FARM 5
 #define GROUP_ORGANIC_FARM_COLOUR (green(30))
 #define GROUP_ORGANIC_FARM_COST 1000
 #define GROUP_ORGANIC_FARM_COST_MUL 20
@@ -373,7 +366,6 @@
 #define GROUP_ORGANIC_FARM_TECH 0
 #define GROUP_ORGANIC_FARM_FIREC 20
 
-#define GROUP_MARKET       6
 #define GROUP_MARKET_COLOUR (blue(28))
 #define GROUP_MARKET_COST 100
 #define GROUP_MARKET_COST_MUL 25
@@ -381,7 +373,6 @@
 #define GROUP_MARKET_TECH 0
 #define GROUP_MARKET_FIREC 80
 
-#define GROUP_TRACK	   7
 #define GROUP_TRACK_COLOUR 32   /* 32 is a brown */
 #define GROUP_TRACK_COST   1
 #define GROUP_TRACK_COST_MUL 25
@@ -389,7 +380,6 @@
 #define GROUP_TRACK_TECH   0
 #define GROUP_TRACK_FIREC  4
 
-#define GROUP_COALMINE     8
 #define GROUP_COALMINE_COLOUR 0
 #define GROUP_COALMINE_COST   10000
 #define GROUP_COALMINE_COST_MUL 25
@@ -397,7 +387,6 @@
 #define GROUP_COALMINE_TECH   85
 #define GROUP_COALMINE_FIREC  85
 
-#define GROUP_RAIL         9
 #define GROUP_RAIL_COLOUR  (magenta(18))
 #define GROUP_RAIL_COST    500
 #define GROUP_RAIL_COST_MUL 10
@@ -405,7 +394,6 @@
 #define GROUP_RAIL_TECH    180
 #define GROUP_RAIL_FIREC   6
 
-#define GROUP_COAL_POWER 10
 #define GROUP_COAL_POWER_COLOUR 0
 #define GROUP_COAL_POWER_COST   100000
 #define GROUP_COAL_POWER_COST_MUL 5
@@ -413,7 +401,6 @@
 #define GROUP_COAL_POWER_TECH   200
 #define GROUP_COAL_POWER_FIREC  80
 
-#define GROUP_ROAD         11
 #define GROUP_ROAD_COLOUR  (white(18))
 #define GROUP_ROAD_COST    100
 #define GROUP_ROAD_COST_MUL 25
@@ -421,7 +408,6 @@
 #define GROUP_ROAD_TECH    50
 #define GROUP_ROAD_FIREC   4
 
-#define GROUP_INDUSTRY_L   12
 #define GROUP_INDUSTRY_L_COLOUR (cyan(18))
 #define GROUP_INDUSTRY_L_COST 20000
 #define GROUP_INDUSTRY_L_COST_MUL 25
@@ -429,7 +415,6 @@
 #define GROUP_INDUSTRY_L_TECH 160
 #define GROUP_INDUSTRY_L_FIREC 70
 
-#define GROUP_UNIVERSITY   13
 #define GROUP_UNIVERSITY_COLOUR (blue(22))
 #define GROUP_UNIVERSITY_COST 20000
 #define GROUP_UNIVERSITY_COST_MUL 25
@@ -437,7 +422,6 @@
 #define GROUP_UNIVERSITY_TECH 150
 #define GROUP_UNIVERSITY_FIREC 40
 
-#define GROUP_COMMUNE      14
 #define GROUP_COMMUNE_COLOUR (green(30))
 #define GROUP_COMMUNE_COST  1
 #define GROUP_COMMUNE_COST_MUL 2
@@ -445,7 +429,6 @@
 #define GROUP_COMMUNE_TECH  0
 #define GROUP_COMMUNE_FIREC 30
 
-#define GROUP_OREMINE      15
 #define GROUP_OREMINE_COLOUR (red(18))
 #define GROUP_OREMINE_COST 500
 #define GROUP_OREMINE_COST_MUL 10
@@ -453,7 +436,6 @@
 #define GROUP_OREMINE_TECH 0
 #define GROUP_OREMINE_FIREC 0
 
-#define GROUP_TIP      16
 #define GROUP_TIP_COLOUR (white(16))
 #define GROUP_TIP_COST 10000
 #define GROUP_TIP_COST_MUL 25
@@ -461,7 +443,6 @@
 #define GROUP_TIP_TECH 0
 #define GROUP_TIP_FIREC 50
 
-#define GROUP_PORT      17
 #define GROUP_PORT_COLOUR (blue(28))
 #define GROUP_PORT_COST 100000
 #define GROUP_PORT_COST_MUL 2
@@ -469,7 +450,6 @@
 #define GROUP_PORT_TECH 35
 #define GROUP_PORT_FIREC 50
 
-#define GROUP_INDUSTRY_H   18
 #define GROUP_INDUSTRY_H_COLOUR (7)     /* colour 7 is an orange, sort of */
 #define GROUP_INDUSTRY_H_COST 50000
 #define GROUP_INDUSTRY_H_COST_MUL 20
@@ -477,7 +457,6 @@
 #define GROUP_INDUSTRY_H_TECH 170
 #define GROUP_INDUSTRY_H_FIREC 80
 
-#define GROUP_PARKLAND     19
 #define GROUP_PARKLAND_COLOUR (green(31))
 #define GROUP_PARKLAND_COST   1000
 #define GROUP_PARKLAND_COST_MUL 25
@@ -485,7 +464,6 @@
 #define GROUP_PARKLAND_TECH   2
 #define GROUP_PARKLAND_FIREC 1
 
-#define GROUP_RECYCLE      20
 #define GROUP_RECYCLE_COLOUR   (green(28))
 #define GROUP_RECYCLE_COST    100000
 #define GROUP_RECYCLE_COST_MUL 5
@@ -493,7 +471,6 @@
 #define GROUP_RECYCLE_TECH    232
 #define GROUP_RECYCLE_FIREC 10
 
-#define GROUP_WATER	   21
 #define GROUP_WATER_COLOUR    (blue(31))
 #define GROUP_WATER_COST      1000000
 #define GROUP_WATER_COST_MUL 2
@@ -501,7 +478,6 @@
 #define GROUP_WATER_TECH      0
 #define GROUP_WATER_FIREC 0
 
-#define GROUP_HEALTH       22
 #define GROUP_HEALTH_COLOUR   (green(24))
 #define GROUP_HEALTH_COST     100000
 #define GROUP_HEALTH_COST_MUL 2
@@ -509,7 +485,6 @@
 #define GROUP_HEALTH_TECH     110
 #define GROUP_HEALTH_FIREC 2
 
-#define GROUP_ROCKET	   23
 #define GROUP_ROCKET_COLOUR   (magenta(20))
 #define GROUP_ROCKET_COST     700000
 #define GROUP_ROCKET_COST_MUL 2
@@ -517,7 +492,6 @@
 #define GROUP_ROCKET_TECH     750
 #define GROUP_ROCKET_FIREC 0
 
-#define GROUP_WINDMILL     24
 #define GROUP_WINDMILL_COLOUR (green(25))
 #define GROUP_WINDMILL_COST   20000
 #define GROUP_WINDMILL_COST_MUL 25
@@ -525,7 +499,6 @@
 #define GROUP_WINDMILL_TECH   30
 #define GROUP_WINDMILL_FIREC  10
 
-#define GROUP_MONUMENT     25
 #define GROUP_MONUMENT_COLOUR (white(15))
 #define GROUP_MONUMENT_COST   10000
 #define GROUP_MONUMENT_COST_MUL 25
@@ -533,7 +506,6 @@
 #define GROUP_MONUMENT_TECH   0
 #define GROUP_MONUMENT_FIREC  0
 
-#define GROUP_SCHOOL     26
 #define GROUP_SCHOOL_COLOUR (white(15))
 #define GROUP_SCHOOL_COST   10000
 #define GROUP_SCHOOL_COST_MUL 25
@@ -541,7 +513,6 @@
 #define GROUP_SCHOOL_TECH   1
 #define GROUP_SCHOOL_FIREC 40
 
-#define GROUP_BLACKSMITH     27
 #define GROUP_BLACKSMITH_COLOUR (white(15))
 #define GROUP_BLACKSMITH_COST   5000
 #define GROUP_BLACKSMITH_COST_MUL 25
@@ -549,7 +520,6 @@
 #define GROUP_BLACKSMITH_TECH   3
 #define GROUP_BLACKSMITH_FIREC 60
 
-#define GROUP_MILL     28
 #define GROUP_MILL_COLOUR (white(15))
 #define GROUP_MILL_COST   10000
 #define GROUP_MILL_COST_MUL 25
@@ -557,7 +527,6 @@
 #define GROUP_MILL_TECH   25
 #define GROUP_MILL_FIREC  60
 
-#define GROUP_POTTERY  29
 #define GROUP_POTTERY_COLOUR (red(12))
 #define GROUP_POTTERY_COST   1000
 #define GROUP_POTTERY_COST_MUL 25
@@ -565,7 +534,6 @@
 #define GROUP_POTTERY_TECH  0
 #define GROUP_POTTERY_FIREC 50
 
-#define GROUP_FIRESTATION 30
 #define GROUP_FIRESTATION_COLOUR (red(20))
 #define GROUP_FIRESTATION_COST   20000
 #define GROUP_FIRESTATION_COST_MUL 10
@@ -573,7 +541,6 @@
 #define GROUP_FIRESTATION_TECH     22
 #define GROUP_FIRESTATION_FIREC 0
 
-#define GROUP_CRICKET 31
 #define GROUP_CRICKET_COLOUR (white(20))
 #define GROUP_CRICKET_COST   2000
 #define GROUP_CRICKET_COST_MUL 3
@@ -581,7 +548,6 @@
 #define GROUP_CRICKET_TECH     12
 #define GROUP_CRICKET_FIREC 20
 
-#define GROUP_BURNT        32
 #define GROUP_BURNT_COLOUR    (red(30))
 #define GROUP_BURNT_COST   0    /* Unused */
 #define GROUP_BURNT_COST_MUL   1        /* Unused */
@@ -589,14 +555,12 @@
 #define GROUP_BURNT_TECH   0    /* Unused */
 #define GROUP_BURNT_FIREC  0
 
-#define GROUP_SHANTY        33
 #define GROUP_SHANTY_COLOUR    (red(22))
 #define GROUP_SHANTY_COST   0   /* Unused */
 #define GROUP_SHANTY_COST_MUL   1       /* Unused */
 #define GROUP_SHANTY_BUL_COST  100000
 #define GROUP_SHANTY_TECH   0   /* Unused */
 #define GROUP_SHANTY_FIREC     25
-
 #define SHANTY_MIN_PP     150
 #define SHANTY_POP        50
 #define DAYS_BETWEEN_SHANTY (NUMOF_DAYS_IN_MONTH*5)
@@ -607,7 +571,6 @@
 #define SHANTY_GET_ORE    10
 #define SHANTY_GET_STEEL  1
 
-#define GROUP_FIRE        34
 #define GROUP_FIRE_COLOUR    (red(30))
 #define GROUP_FIRE_COST   0     /* Unused */
 #define GROUP_FIRE_COST_MUL   1 /* Unused */
@@ -615,7 +578,6 @@
 #define GROUP_FIRE_TECH   0     /* Unused */
 #define GROUP_FIRE_FIREC  0
 
-#define GROUP_USED        35
 #define GROUP_USED_COLOUR (green(12))   /* Unused */
 #define GROUP_USED_COST   0     /* Unused */
 #define GROUP_USED_COST_MUL  1  /* Unused */
@@ -623,7 +585,6 @@
 #define GROUP_USED_TECH   0     /* Unused */
 #define GROUP_USED_FIREC  0     /* Unused */
 
-#define GROUP_RESIDENCE_ML 36
 #define GROUP_RESIDENCE_ML_COLOUR (cyan(24))
 #define GROUP_RESIDENCE_ML_COST 2000
 #define GROUP_RESIDENCE_ML_COST_MUL 25
@@ -631,7 +592,6 @@
 #define GROUP_RESIDENCE_ML_TECH 0
 #define GROUP_RESIDENCE_ML_FIREC 75
 
-#define GROUP_RESIDENCE_HL 37
 #define GROUP_RESIDENCE_HL_COLOUR (cyan(24))
 #define GROUP_RESIDENCE_HL_COST 4000
 #define GROUP_RESIDENCE_HL_COST_MUL 25
@@ -639,7 +599,6 @@
 #define GROUP_RESIDENCE_HL_TECH 0
 #define GROUP_RESIDENCE_HL_FIREC 75
 
-#define GROUP_RESIDENCE_LH 38
 #define GROUP_RESIDENCE_LH_COLOUR (cyan(24))
 #define GROUP_RESIDENCE_LH_COST 800
 #define GROUP_RESIDENCE_LH_COST_MUL 25
@@ -647,7 +606,6 @@
 #define GROUP_RESIDENCE_LH_TECH 0       /* ?? */
 #define GROUP_RESIDENCE_LH_FIREC 75
 
-#define GROUP_RESIDENCE_MH 39
 #define GROUP_RESIDENCE_MH_COLOUR (cyan(24))
 #define GROUP_RESIDENCE_MH_COST 1600
 #define GROUP_RESIDENCE_MH_COST_MUL 25
@@ -655,7 +613,6 @@
 #define GROUP_RESIDENCE_MH_TECH 0
 #define GROUP_RESIDENCE_MH_FIREC 75
 
-#define GROUP_RESIDENCE_HH 40
 #define GROUP_RESIDENCE_HH_COLOUR (cyan(24))
 #define GROUP_RESIDENCE_HH_COST 3200
 #define GROUP_RESIDENCE_HH_COST_MUL 25
@@ -663,7 +620,6 @@
 #define GROUP_RESIDENCE_HH_TECH 0
 #define GROUP_RESIDENCE_HH_FIREC 75
 
-#define GROUP_WATERWELL	   41
 #define GROUP_WATERWELL_COLOUR    (blue(31))
 #define GROUP_WATERWELL_COST      1
 #define GROUP_WATERWELL_COST_MUL 2
@@ -671,7 +627,6 @@
 #define GROUP_WATERWELL_TECH      0
 #define GROUP_WATERWELL_FIREC 0
 
-#define GROUP_DESERT 	  42
 #define GROUP_DESERT_COLOUR  (yellow(18))
 #define GROUP_DESERT_COST    0
 #define GROUP_DESERT_COST_MUL 1
@@ -679,7 +634,6 @@
 #define GROUP_DESERT_TECH    0
 #define GROUP_DESERT_FIREC   0
 
-#define GROUP_TREE 	   43
 #define GROUP_TREE_COLOUR  (green(12))
 #define GROUP_TREE_COST    0
 #define GROUP_TREE_COST_MUL 1
@@ -687,7 +641,6 @@
 #define GROUP_TREE_TECH    0
 #define GROUP_TREE_FIREC   0
 
-#define GROUP_TREE2 	   44
 #define GROUP_TREE2_COLOUR  (green(12))
 #define GROUP_TREE2_COST    0
 #define GROUP_TREE2_COST_MUL 1
@@ -695,7 +648,6 @@
 #define GROUP_TREE2_TECH    0
 #define GROUP_TREE2_FIREC   0
 
-#define GROUP_TREE3 	   45
 #define GROUP_TREE3_COLOUR  (green(12))
 #define GROUP_TREE3_COST    0
 #define GROUP_TREE3_COST_MUL 1
@@ -705,7 +657,6 @@
 
 #define BRIDGE_FACTOR 500 /* a bridge is that much more expensive than the land transport */
 
-#define GROUP_TRACK_BRIDGE        46
 #define GROUP_TRACK_BRIDGE_COLOUR 32   /* 32 is a brown */
 #define GROUP_TRACK_BRIDGE_COST   GROUP_TRACK_COST * BRIDGE_FACTOR
 #define GROUP_TRACK_BRIDGE_COST_MUL 2
@@ -713,7 +664,6 @@
 #define GROUP_TRACK_BRIDGE_TECH   GROUP_TRACK_TECH
 #define GROUP_TRACK_BRIDGE_FIREC  0    /* unused */
 
-#define GROUP_ROAD_BRIDGE         47
 #define GROUP_ROAD_BRIDGE_COLOUR  (white(18))
 #define GROUP_ROAD_BRIDGE_COST    GROUP_ROAD_COST * BRIDGE_FACTOR
 #define GROUP_ROAD_BRIDGE_COST_MUL 2
@@ -721,7 +671,6 @@
 #define GROUP_ROAD_BRIDGE_TECH    GROUP_ROAD_TECH
 #define GROUP_ROAD_BRIDGE_FIREC   0
 
-#define GROUP_RAIL_BRIDGE         48
 #define GROUP_RAIL_BRIDGE_COLOUR  (magenta(18))
 #define GROUP_RAIL_BRIDGE_COST    GROUP_RAIL_COST * BRIDGE_FACTOR
 #define GROUP_RAIL_BRIDGE_COST_MUL 2
@@ -729,21 +678,6 @@
 #define GROUP_RAIL_BRIDGE_TECH    GROUP_RAIL_TECH
 #define GROUP_RAIL_BRIDGE_FIREC   0
 
-#define GROUP_IS_RESIDENCE(group) \
-            ((group == GROUP_RESIDENCE_LL) || \
-             (group == GROUP_RESIDENCE_ML) || \
-             (group == GROUP_RESIDENCE_HL) || \
-             (group == GROUP_RESIDENCE_LH) || \
-             (group == GROUP_RESIDENCE_MH) || \
-             (group == GROUP_RESIDENCE_HH))
-
-#define GROUP_IS_BARE(group) \
-	    ((group == GROUP_BARE) || \
-	     (group == GROUP_DESERT) || \
-	     (group == GROUP_TREE) || \
-	     (group == GROUP_TREE2) || \
-	     (group == GROUP_TREE3))
-
 /********   end of buildings // groups   ************/
 
 #endif // __groups_h__



From alainb at mail.berlios.de  Thu Jul  8 19:53:03 2010
From: alainb at mail.berlios.de (alainb at mail.berlios.de)
Date: Thu,  8 Jul 2010 19:53:03 +0200
Subject: [Lincity-ng-commit] r1590 - in trunk/src: gui_interface lincity
	lincity-ng
Message-ID: <20100708175303.58966480A0D@sheep.berlios.de>

Author: alainb
Date: 2010-07-08 19:53:03 +0200 (Thu, 08 Jul 2010)
New Revision: 1590

Modified:
   trunk/src/gui_interface/mps.h
   trunk/src/gui_interface/pbar_interface.h
   trunk/src/gui_interface/screen_interface.h
   trunk/src/lincity-ng/ButtonPanel.cpp
   trunk/src/lincity-ng/ButtonPanel.hpp
   trunk/src/lincity-ng/MpsInterface.cpp
   trunk/src/lincity-ng/PbarInterface.cpp
   trunk/src/lincity-ng/ScreenInterface.cpp
   trunk/src/lincity/fileutil.cpp
Log:
tiny code cleanup :
remove functions and headers of unused functions, detected by
cppcheck -f -a --unused-functions src/

Modified: trunk/src/gui_interface/mps.h
===================================================================
--- trunk/src/gui_interface/mps.h	2010-07-05 11:52:40 UTC (rev 1589)
+++ trunk/src/gui_interface/mps.h	2010-07-08 17:53:03 UTC (rev 1590)
@@ -7,12 +7,6 @@
 #ifndef __mps_h__
 #define __mps_h__
 
-//#include "geometry.h"
-//#include "cliglobs.h"
-
-void mps_full_refresh (void);
-void mappoint_stats (int, int, int);
-
 static const int MPS_PARAGRAPH_COUNT = 13;
 
 /* New, simplified mps routines */
@@ -32,10 +26,8 @@
 void mps_init();
 
 int mps_set(int style, int x, int y); /* Attaches an area or global display */
-void mps_redraw(void);  /* Re-draw the mps area, bezel and all */
 void mps_refresh(void); /* refresh the information display's contents */
 void mps_update(void);  /* Update text contents for later display (refresh) */
-void mps_global_advance(void); /* Changes global var to next display */
 
 
 /* mps_info storage functions; place values of corresponding type into

Modified: trunk/src/gui_interface/pbar_interface.h
===================================================================
--- trunk/src/gui_interface/pbar_interface.h	2010-07-05 11:52:40 UTC (rev 1589)
+++ trunk/src/gui_interface/pbar_interface.h	2010-07-08 17:53:03 UTC (rev 1590)
@@ -10,23 +10,12 @@
 //#include "geometry.h"
 
 void init_pbars (void);
-void pbars_full_refresh (void); // does nothing in NG
-void init_pbar_text (void);     // doe snot exist in NG
-//void draw_pbar (Rect* b, char* graphic);
 void draw_pbars (void);
-/* void clear_pbar_text (Rect* pbar);
- * void write_pbar_int (Rect* b, int val);
- * void write_pbar_text (Rect* b, char * s);
- */
 void refresh_pbars (void);
 void refresh_population_text (void);
 
 void update_pbar (int pbar_num, int value, int month_flag);
-void update_pbars_daily(void);  // does not exist in NG
 void update_pbars_monthly(void);
-/*int compute_pbar_offset (Rect* b, int val);
-  void draw_pbar_new (Rect* b, int val);*/
-void pbar_mouse(int rawx, int rawy, int button);
 
 /* Constants */
 

Modified: trunk/src/gui_interface/screen_interface.h
===================================================================
--- trunk/src/gui_interface/screen_interface.h	2010-07-05 11:52:40 UTC (rev 1589)
+++ trunk/src/gui_interface/screen_interface.h	2010-07-08 17:53:03 UTC (rev 1590)
@@ -60,8 +60,6 @@
 void init_mini_map_mouse(void);
 void mini_map_handler(int x, int y, int button);
 void mini_aux_handler(int x, int y, int button);
-/* Message area */
-void display_info_message (int colour, const char* ss, const char* xs);
 
 #define CB_SPACE 20 // space between checkbuttons for market/port  // AL1 : unused in 2.x
 

Modified: trunk/src/lincity/fileutil.cpp
===================================================================
--- trunk/src/lincity/fileutil.cpp	2010-07-05 11:52:40 UTC (rev 1589)
+++ trunk/src/lincity/fileutil.cpp	2010-07-08 17:53:03 UTC (rev 1590)
@@ -141,44 +141,12 @@
  * Public Functions
  * ---------------------------------------------------------------------- */
 #if defined (__BORLANDC__)
-int _chdir(const char *dirname)
-{
-    return chdir(dirname);
-}
-
 int _access(const char *path, int mode)
 {
     return access(path, mode)
 }
 #endif
 
-/* Executes a system command */
-int execute_command(char *cmd, char *p1, char *p2, char *p3)
-{
-    char *sys_cmd = (char *)malloc(strlen(cmd) + strlen(p1) + strlen(p2)
-                                   + strlen(p3) + 4);
-    int ret_value;
-
-    if (sys_cmd == 0) {
-        malloc_failure();
-    }
-    sprintf(sys_cmd, "%s %s %s %s", cmd, p1, p2, p3);
-    ret_value = system(sys_cmd);
-/* fprintf(stderr, "system(%s)=%i\n", sys_cmd, ret_value); */
-    free(sys_cmd);
-    return ret_value;
-}
-
-void copy_file(char *f1, char *f2)
-{
-    int ret_value = execute_command((char*)"cp", f1, f2, (char*)"");
-    if (ret_value != 0) {
-        /* GCS FIX:  Need to make do_error into var_args fn? */
-        printf("Tried to cp %s %s\n", f1, f2);
-        do_error("Can't copy requested file");
-    }
-}
-
 int directory_exists(char *dir)
 {
 #if defined (WIN32)

Modified: trunk/src/lincity-ng/ButtonPanel.cpp
===================================================================
--- trunk/src/lincity-ng/ButtonPanel.cpp	2010-07-05 11:52:40 UTC (rev 1589)
+++ trunk/src/lincity-ng/ButtonPanel.cpp	2010-07-08 17:53:03 UTC (rev 1590)
@@ -822,11 +822,6 @@
     setDirty();
 }
 
-int ButtonPanel::getModule() const
-{
-    return module;
-}
-
 bool ButtonPanel::opaque(const Vector2& pos) const
 {
     for(Childs::const_iterator i = childs.begin(); i != childs.end(); ++i) {

Modified: trunk/src/lincity-ng/ButtonPanel.hpp
===================================================================
--- trunk/src/lincity-ng/ButtonPanel.hpp	2010-07-05 11:52:40 UTC (rev 1589)
+++ trunk/src/lincity-ng/ButtonPanel.hpp	2010-07-08 17:53:03 UTC (rev 1590)
@@ -32,8 +32,6 @@
 
   void parse(XmlReader& reader);
 
-  int getModule() const;
-  
   virtual void draw(Painter &painter);
   void chooseButtonClicked(CheckButton* button,int);
   void menuButtonClicked(CheckButton* button,int);

Modified: trunk/src/lincity-ng/MpsInterface.cpp
===================================================================
--- trunk/src/lincity-ng/MpsInterface.cpp	2010-07-05 11:52:40 UTC (rev 1589)
+++ trunk/src/lincity-ng/MpsInterface.cpp	2010-07-08 17:53:03 UTC (rev 1590)
@@ -42,14 +42,6 @@
 
 Mps* currentMPS = 0;
 
-void mps_full_refresh()
-{
-}
-
-void mappoint_stats(int, int, int)
-{
-}
-
 void mps_init()
 {
 }
@@ -101,11 +93,6 @@
     return same_square;
 }
 
-void mps_redraw()  /* Re-draw the mps area, bezel and all */
-{
-    mps_refresh();
-}
-
 void mps_refresh() /* refresh the information display's contents */
 {
     switch (mps_style) {
@@ -278,11 +265,6 @@
     mps_update( mps_x, mps_y , mps_style );
 }
 
-/** Changes global var to next display */
-void mps_global_advance()
-{
-}
-
 /**
  * mps_info storage functions; place values of corresponding type into
  * mps_info[], performing certain pretification. The single argument 

Modified: trunk/src/lincity-ng/PbarInterface.cpp
===================================================================
--- trunk/src/lincity-ng/PbarInterface.cpp	2010-07-05 11:52:40 UTC (rev 1589)
+++ trunk/src/lincity-ng/PbarInterface.cpp	2010-07-08 17:53:03 UTC (rev 1590)
@@ -25,11 +25,6 @@
 
 struct pbar_st pbars[NUM_PBARS];
 
-void pbars_full_refresh (void)
-{
-  //  TRACE;
-}
-
 void update_pbar (int pbar_num, int value, int month_flag)
 {
     // copy of update_pbar from src/oldgui/pbar.cpp 

Modified: trunk/src/lincity-ng/ScreenInterface.cpp
===================================================================
--- trunk/src/lincity-ng/ScreenInterface.cpp	2010-07-05 11:52:40 UTC (rev 1589)
+++ trunk/src/lincity-ng/ScreenInterface.cpp	2010-07-08 17:53:03 UTC (rev 1590)
@@ -120,13 +120,6 @@
 void init_mini_map_mouse(void);
 void mini_map_handler(int x, int y, int button);
 void mini_aux_handler(int x, int y, int button);
-/* Message area */
-void display_info_message (int colour, const char* ss, const char* xs)
-{
-    std::ostringstream text;
-    text << "display_info_message: '"<< colour << ss << "' + \"" << xs << "\"\n";
-    updateMessageText( text.str() );
-}
 
 /*
  * Display some Text in a Dialog Box with an OK Button.



From alainb at mail.berlios.de  Thu Jul 15 18:19:22 2010
From: alainb at mail.berlios.de (alainb at mail.berlios.de)
Date: Thu, 15 Jul 2010 18:19:22 +0200
Subject: [Lincity-ng-commit] r1591 - in trunk/src/lincity: . modules
Message-ID: <20100715161922.B4CDB480C98@sheep.berlios.de>

Author: alainb
Date: 2010-07-15 18:19:22 +0200 (Thu, 15 Jul 2010)
New Revision: 1591

Added:
   trunk/src/lincity/modules/modules_interfaces.h
Modified:
   trunk/src/lincity/all_buildings.h
   trunk/src/lincity/engine.cpp
   trunk/src/lincity/init_game.cpp
   trunk/src/lincity/lctypes.h
   trunk/src/lincity/lin-city.h
   trunk/src/lincity/lintypes.cpp
   trunk/src/lincity/loadsave.cpp
   trunk/src/lincity/modules/all_modules.h
   trunk/src/lincity/modules/blacksmith.h
   trunk/src/lincity/modules/coal_power.h
   trunk/src/lincity/modules/coalmine.cpp
   trunk/src/lincity/modules/coalmine.h
   trunk/src/lincity/modules/commune.h
   trunk/src/lincity/modules/cricket.h
   trunk/src/lincity/modules/fire.h
   trunk/src/lincity/modules/firestation.h
   trunk/src/lincity/modules/health_centre.h
   trunk/src/lincity/modules/heavy_industry.cpp
   trunk/src/lincity/modules/heavy_industry.h
   trunk/src/lincity/modules/light_industry.cpp
   trunk/src/lincity/modules/light_industry.h
   trunk/src/lincity/modules/market.cpp
   trunk/src/lincity/modules/market.h
   trunk/src/lincity/modules/mill.h
   trunk/src/lincity/modules/modules.h
   trunk/src/lincity/modules/monument.h
   trunk/src/lincity/modules/oremine.cpp
   trunk/src/lincity/modules/oremine.h
   trunk/src/lincity/modules/organic_farm.h
   trunk/src/lincity/modules/parkland.h
   trunk/src/lincity/modules/port.cpp
   trunk/src/lincity/modules/port.h
   trunk/src/lincity/modules/pottery.h
   trunk/src/lincity/modules/power_line.h
   trunk/src/lincity/modules/rail.h
   trunk/src/lincity/modules/recycle.cpp
   trunk/src/lincity/modules/recycle.h
   trunk/src/lincity/modules/residence.cpp
   trunk/src/lincity/modules/residence.h
   trunk/src/lincity/modules/road.h
   trunk/src/lincity/modules/rocket_pad.h
   trunk/src/lincity/modules/school.h
   trunk/src/lincity/modules/shanty.cpp
   trunk/src/lincity/modules/shanty.h
   trunk/src/lincity/modules/solar_power.h
   trunk/src/lincity/modules/substation.h
   trunk/src/lincity/modules/tip.h
   trunk/src/lincity/modules/track.h
   trunk/src/lincity/modules/university.h
   trunk/src/lincity/modules/water.h
   trunk/src/lincity/modules/waterwell.h
   trunk/src/lincity/modules/windmill.h
   trunk/src/lincity/old_ldsvguts.cpp
   trunk/src/lincity/power.cpp
   trunk/src/lincity/simulate.cpp
   trunk/src/lincity/transport.cpp
   trunk/src/lincity/transport.h
Log:
headers split, and move within each building.h

Modified: trunk/src/lincity/all_buildings.h
===================================================================
--- trunk/src/lincity/all_buildings.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/all_buildings.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,5 +1,5 @@
 /* ---------------------------------------------------------------------- *
- * groups.h
+ * all_buildings.h
  * This file is part of lincity-ng
  * Lincity is copyright (c) see CREDITS for more informations
  *
@@ -11,43 +11,11 @@
 
 /************* Buildings stuff *********************/
 
-#define WINDMILL_POWER      450
-#define WINDMILL_JOBS       10
-/* WINDMILL_RCOST is days per quid */
-#define WINDMILL_RCOST      3
-#define ANTIQUE_WINDMILL_ANIM_SPEED 160
-#define MODERN_WINDMILL_ANIM_SPEED 120
-
 #define POWER_USE_PER_PERSON 3
 #define POWER_RES_OVERHEAD 30
 #define POWERS_COAL_OUTPUT 22000
 #define MAX_COAL_AT_POWER_STATION 100000
 
-#define MAX_ORE_AT_INDUSTRY_L 20000
-#define MAX_JOBS_AT_INDUSTRY_L 500
-#define MAX_GOODS_AT_INDUSTRY_L 65000
-#define INDUSTRY_L_GET_JOBS    120
-#define INDUSTRY_L_GET_ORE     600
-#define INDUSTRY_L_GET_STEEL   60
-#define INDUSTRY_L_JOBS_LOAD_ORE 1
-#define INDUSTRY_L_JOBS_LOAD_STEEL 4
-#define INDUSTRY_L_ORE_USED  125
-#define INDUSTRY_L_STEEL_USED  12
-#define INDUSTRY_L_JOBS_USED       30
-#define INDUSTRY_L_MAKE_GOODS 225
-#define MAX_STEEL_AT_INDUSTRY_L 2000
-#define MIN_JOBS_AT_INDUSTRY_L (INDUSTRY_L_JOBS_LOAD_ORE\
-+INDUSTRY_L_JOBS_LOAD_STEEL+INDUSTRY_L_JOBS_USED)
-#define INDUSTRY_L_ANIM_SPEED 290
-#define INDUSTRY_L_POL_PER_GOOD 0.05
-#define INDUSTRY_L_POLLUTION    10
-
-#define MAX_ORE_AT_INDUSTRY_H 10000
-#define MAX_COAL_AT_INDUSTRY_H 1000
-#define MAX_MADE_AT_INDUSTRY_H MAX_ORE_AT_INDUSTRY_H/16
-#define POWER_MAKE_STEEL 200
-#define INDUSTRY_H_ANIM_SPEED  290
-
 #define DAYS_PER_POLLUTION      14
 #define POWERS_COAL_POLLUTION   20
 #define INDUSTRY_H_POLLUTION    10
@@ -67,161 +35,21 @@
 #define DOLE_RATE 15
 #define TRANSPORT_COST_RATE 14
 #define IM_PORT_COST_RATE 1
-#define PORT_FOOD_RATE    1
-#define PORT_JOBS_RATE    5
-#define PORT_COAL_RATE    50
-#define PORT_ORE_RATE     1
-#define PORT_GOODS_RATE   3
-#define PORT_STEEL_RATE   100
-/*
-  These next two control the stuff bought or sold as a % of what's on the
-  transport.  1000=100%  500=50% etc.
-*/
-#define PORT_EXPORT_RATE  500
-#define PORT_IMPORT_RATE  500
-#define MODERN_WINDMILL_TECH 450000
 
-#define BUILD_MONUMENT_JOBS     350000
-#define MONUMENT_GET_JOBS       100
-#define MONUMENT_DAYS_PER_TECH  3
-#define MONUMENT_TECH_EXPIRE    400
-#define MONUMENT_ANIM_SPEED     300
-
-#define BLACKSMITH_JOBS    35
-#define BLACKSMITH_GET_COAL 6
-#define MAX_GOODS_AT_BLACKSMITH 200
-#define MAX_COAL_AT_BLACKSMITH  100
-#define BLACKSMITH_STEEL_USED 1
-#define BLACKSMITH_COAL_USED  1
-#define GOODS_MADE_BY_BLACKSMITH 50
-#define BLACKSMITH_BATCH (GOODS_MADE_BY_BLACKSMITH*100)
-#define BLACKSMITH_ANIM_THRESHOLD 10
-#define BLACKSMITH_ANIM_SPEED    200
-
-#define MILL_JOBS          35
-#define MAX_GOODS_AT_MILL  200
-#define MAX_FOOD_AT_MILL   500
-#define MAX_COAL_AT_MILL   50
-#define GOODS_MADE_BY_MILL 75
-#define MILL_GET_FOOD      51
-#define MILL_GET_COAL      4
-#define MILL_POWER_PER_COAL 60
-#define FOOD_USED_BY_MILL  (GOODS_MADE_BY_MILL/2)
-#define COAL_USED_BY_MILL  1
-#define MILL_ANIM_THRESHOLD 10
-#define MILL_ANIM_SPEED    300
-
-#define SCHOOL_JOBS        50
-#define SCHOOL_GOODS	   75
-#define JOBS_MAKE_TECH_SCHOOL  200
-#define GOODS_MAKE_TECH_SCHOOL  75
-#define TECH_MADE_BY_SCHOOL    2
-#define MAX_JOBS_AT_SCHOOL     400
-#define MAX_GOODS_AT_SCHOOL    200
-#define SCHOOL_RUNNING_COST    2
-
 #define DAYS_BETWEEN_COVER (NUMOF_DAYS_IN_MONTH*3)
 #define DAYS_BETWEEN_FIRES (NUMOF_DAYS_IN_YEAR*2)
-#define FIRESTATION_JOBS   6
-#define FIRESTATION_GET_JOBS 7
-#define MAX_JOBS_AT_FIRESTATION (FIRESTATION_JOBS*NUMOF_DAYS_IN_YEAR)
-#define FIRESTATION_GOODS  2
-#define FIRESTATION_GET_GOODS 3
-#define MAX_GOODS_AT_FIRESTATION (FIRESTATION_GOODS*NUMOF_DAYS_IN_YEAR)
-#define FIRESTATION_RUNNING_COST 1
-#define FIRESTATION_RUNNING_COST_MUL 6
-#define FIRESTATION_ANIMATION_SPEED 250
 #define FIRE_ANIMATION_SPEED 350
 #define FIRE_DAYS_PER_SPREAD (NUMOF_DAYS_IN_YEAR/8)
 #define FIRE_LENGTH (NUMOF_DAYS_IN_YEAR*5)
 #define AFTER_FIRE_LENGTH (NUMOF_DAYS_IN_YEAR*10)
 
-#define CRICKET_JOBS   8
-#define CRICKET_GET_JOBS 9
-#define MAX_JOBS_AT_CRICKET (CRICKET_JOBS*NUMOF_DAYS_IN_YEAR)
-#define CRICKET_GOODS  2
-#define CRICKET_GET_GOODS 3
-#define MAX_GOODS_AT_CRICKET (CRICKET_GOODS*NUMOF_DAYS_IN_YEAR)
-#define CRICKET_RUNNING_COST 1
-#define CRICKET_ANIMATION_SPEED 750
-
-#define MAX_GOODS_AT_POTTERY     200
-#define POTTERY_ORE_MAKE_GOODS    11
-#define POTTERY_COAL_MAKE_GOODS    2
-#define POTTERY_JOBS              35
-#define MAX_ORE_AT_POTTERY        (POTTERY_ORE_MAKE_GOODS*60)
-#define POTTERY_GET_ORE           (POTTERY_ORE_MAKE_GOODS*20)
-#define MAX_COAL_AT_POTTERY       (POTTERY_COAL_MAKE_GOODS*60)
-#define POTTERY_GET_COAL          (POTTERY_COAL_MAKE_GOODS*21)
-#define MAX_JOBS_AT_POTTERY       (POTTERY_JOBS*20)
-#define POTTERY_GET_JOBS          (POTTERY_JOBS*2)
-#define POTTERY_MADE_GOODS        35
-#define POTTERY_ANIM_SPEED        280
-#define POTTERY_CLOSE_TIME        20
-
-#define UNIVERSITY_JOBS   250
-#define UNIVERSITY_JOBS_STORE 5000
-#define UNIVERSITY_GOODS  750
-#define UNIVERSITY_GOODS_STORE 7000
-#define UNIVERSITY_RUNNING_COST 23
-#define UNIVERSITY_TECH_MADE    4
-
-#define ROCKET_PAD_JOBS         1000
-#define ROCKET_PAD_JOBS_STORE   10000
-#define ROCKET_PAD_GOODS        10000
-#define ROCKET_PAD_GOODS_STORE  500000
-#define ROCKET_PAD_STEEL	500
-#define ROCKET_PAD_STEEL_STORE  12000
-#define ROCKET_PAD_RUNNING_COST 200
-#define ROCKET_PAD_LAUNCH       100
-#define ROCKET_ANIMATION_SPEED  450
-#define ROCKET_LAUNCH_BAD       1
-#define ROCKET_LAUNCH_GOOD      2
-#define ROCKET_LAUNCH_EVAC      3
-
 #define TIP_DEGRADE_TIME 200 * NUMOF_DAYS_IN_YEAR
 
-#define MAX_WASTE_AT_RECYCLE 20000
-#define BURN_WASTE_AT_RECYCLE (MAX_WASTE_AT_RECYCLE/200)
-#define MAX_ORE_AT_RECYCLE   (MAX_ORE_ON_RAIL*2)
-#define GOODS_RECYCLED       500
-#define RECYCLE_GOODS_JOBS   (GOODS_RECYCLED/50)
-#define RECYCLE_RUNNING_COST 3
-
-#define HEALTH_CENTRE_JOBS   6
-#define HEALTH_CENTRE_GET_JOBS 7
-#define MAX_JOBS_AT_HEALTH_CENTRE (HEALTH_CENTRE_JOBS*NUMOF_DAYS_IN_YEAR)
-#define HEALTH_CENTRE_GOODS  40
-#define HEALTH_CENTRE_GET_GOODS 41
-#define MAX_GOODS_AT_HEALTH_CENTRE (HEALTH_CENTRE_GOODS*NUMOF_DAYS_IN_YEAR)
-#define HEALTH_RUNNING_COST  2
-#define HEALTH_RUNNING_COST_MUL 9
-
-#define OREMINE_ANIMATION_SPEED 200
-
-#define MAX_FOOD_ON_TRACK 2048
-#define MAX_FOOD_ON_ROAD (MAX_FOOD_ON_TRACK*4)
-#define MAX_FOOD_ON_RAIL (MAX_FOOD_ON_TRACK*16)
-#define MAX_FOOD_IN_MARKET (MAX_FOOD_ON_RAIL*8)
-#define MARKET_FOOD_SEARCH_TRIGGER (MAX_FOOD_IN_MARKET/5)
-#define MAX_JOBS_ON_TRACK 1024
-#define MAX_JOBS_ON_ROAD (MAX_JOBS_ON_TRACK*5)
-#define MAX_JOBS_ON_RAIL (MAX_JOBS_ON_TRACK*25)
-#define MAX_JOBS_IN_MARKET (MAX_JOBS_ON_RAIL*3)
-#define MARKET_JOBS_SEARCH_TRIGGER (MAX_JOBS_IN_MARKET/5)
 #define MARKET_ANIM_SPEED 750
 #define WORKING_POP_PERCENT 45
 #define JOB_SWING 15
 #define HC_JOB_SWING 10
-#define CRICKET_JOB_SWING 4
 
-#define ORGANIC_FARM_FOOD_OUTPUT 550
-#define ORGANIC_FARM_ANIM_SPEED 3000
-#define FARM_JOBS_USED 13
-#define ORG_FARM_POWER_REC 50
-/* gets waste only when powered */
-#define ORG_FARM_WASTE_GET 6
-#define MIN_FOOD_SOLD_FOR_ANIM 200
 #define DAYS_PER_STARVE 20
 
 #define COAL_RESERVE_SIZE 10000
@@ -236,43 +64,10 @@
 #define JOBS_LOAD_COAL 18
 #define JOBS_LOAD_ORE  9
 #define JOBS_LOAD_STEEL 15
-#define JOBS_AT_COMMUNE_GATE 4
-#define COMMUNE_ANIM_SPEED 750
-#define COMMUNE_POP  5
 
-#define MAX_COAL_ON_TRACK 64
-#define MAX_COAL_ON_ROAD (MAX_COAL_ON_TRACK*8)
-#define MAX_COAL_ON_RAIL (MAX_COAL_ON_TRACK*64)
-#define MAX_COAL_IN_MARKET (MAX_COAL_ON_RAIL*2)
-#define MARKET_COAL_SEARCH_TRIGGER (MAX_COAL_IN_MARKET/5)
-
-#define MAX_GOODS_ON_TRACK 2048
-#define MAX_GOODS_ON_ROAD (MAX_GOODS_ON_TRACK*5)
-#define ROAD_GOODS_USED_MASK 0x1f
-#define MAX_GOODS_ON_RAIL (MAX_GOODS_ON_TRACK*25)
-#define RAIL_GOODS_USED_MASK 0xf
-#define MAX_GOODS_IN_MARKET (MAX_GOODS_ON_RAIL*4)
-#define MARKET_GOODS_SEARCH_TRIGGER (MAX_GOODS_IN_MARKET/5)
-#define MAX_ORE_ON_TRACK 4096
-#define MAX_ORE_ON_ROAD (MAX_ORE_ON_TRACK*4)
-#define MAX_ORE_ON_RAIL (MAX_ORE_ON_TRACK*16)
-#define MAX_ORE_IN_MARKET (MAX_ORE_ON_RAIL*2)
-#define MARKET_ORE_SEARCH_TRIGGER (MAX_ORE_IN_MARKET/5)
-
-#define MAX_STEEL_ON_TRACK 128
-#define MAX_STEEL_ON_ROAD (MAX_STEEL_ON_TRACK*4)
-#define MAX_STEEL_ON_RAIL (MAX_STEEL_ON_TRACK*16)
-#define RAIL_STEEL_USED_MASK 0x7f
 #define MAX_STEEL_AT_INDUSTRY_H (MAX_STEEL_ON_RAIL*10)
 
-#define MAX_WASTE_ON_TRACK 1024
-#define MAX_WASTE_ON_ROAD (MAX_WASTE_ON_TRACK*5)
-#define MAX_WASTE_ON_RAIL (MAX_WASTE_ON_TRACK*25)
-#define MAX_WASTE_IN_MARKET (MAX_WASTE_ON_RAIL*3)
-#define MARKET_WASTE_SEARCH_TRIGGER (MAX_WASTE_IN_MARKET/5)
 #define MAX_WASTE_AT_TIP  10000000
-#define WASTE_BURN_ON_TRANSPORT 20
-#define TRANSPORT_BURN_WASTE_COUNT 75000
 
 
 /*
@@ -286,7 +81,6 @@
  */
 #define ORE_MAKE_STEEL 17
 #define MAX_STEEL_IN_MARKET (MAX_STEEL_ON_RAIL*2)
-#define MARKET_STEEL_SEARCH_TRIGGER (MAX_STEEL_IN_MARKET/5)
 
 /* interest rate *10  ie 10 is 1% */
 #define INTEREST_RATE 15
@@ -310,132 +104,6 @@
 #define GROUP_BARE_TECH    0
 #define GROUP_BARE_FIREC   0
 
-#define GROUP_POWER_LINE_COLOUR (yellow(26))
-#define GROUP_POWER_LINE_COST 100
-#define GROUP_POWER_LINE_COST_MUL 2
-#define GROUP_POWER_LINE_BUL_COST 100
-#define GROUP_POWER_LINE_TECH 200
-#define GROUP_POWER_LINE_FIREC 0
-
-#define GROUP_SOLAR_POWER_COLOUR (yellow(22))
-#define GROUP_SOLAR_POWER_COST 500000
-#define GROUP_SOLAR_POWER_COST_MUL 5
-#define GROUP_SOLAR_POWER_BUL_COST 100000
-#define GROUP_SOLAR_POWER_TECH 500
-#define GROUP_SOLAR_POWER_FIREC 33
-#define SOLAR_POWER_JOBS 50
-#define POWERS_SOLAR_OUTPUT 1800
-
-#define GROUP_SUBSTATION_COLOUR (yellow(18))
-#define GROUP_SUBSTATION_COST 500
-#define GROUP_SUBSTATION_COST_MUL 2
-#define GROUP_SUBSTATION_BUL_COST 100
-#define GROUP_SUBSTATION_TECH 200
-#define GROUP_SUBSTATION_FIREC 50
-
-#define GROUP_RESIDENCE_LL_COLOUR (cyan(24))
-#define GROUP_RESIDENCE_LL_COST 1000
-#define GROUP_RESIDENCE_LL_COST_MUL 25
-#define GROUP_RESIDENCE_LL_BUL_COST 1000
-#define GROUP_RESIDENCE_LL_TECH 0
-#define GROUP_RESIDENCE_LL_FIREC 75
-/* RESIDENCE?_BRM is the birth rate modifier */
-/* RESIDENCE?_DRM is the death rate modifier */
-#define RESIDENCE_BASE_BR     100
-#define RESIDENCE_BASE_DR     (68*12)
-#define RESIDENCE_BRM_HEALTH  5
-#define RESIDENCE1_BRM (RESIDENCE_BASE_BR*12)
-#define RESIDENCE1_DRM ((RESIDENCE_BASE_DR*3)/4)
-#define RESIDENCE2_BRM 0
-#define RESIDENCE2_DRM 0
-#define RESIDENCE3_BRM (RESIDENCE_BASE_BR+RESIDENCE_BASE_BR/4)
-#define RESIDENCE3_DRM ((RESIDENCE_BASE_DR)/2)
-#define RESIDENCE4_BRM (RESIDENCE_BASE_BR*18)
-#define RESIDENCE4_DRM ((RESIDENCE_BASE_DR*3)/4)
-#define RESIDENCE5_BRM (RESIDENCE_BASE_BR/2)
-#define RESIDENCE5_DRM ((RESIDENCE_BASE_DR)/4)
-#define RESIDENCE6_BRM 0
-#define RESIDENCE6_DRM ((RESIDENCE_BASE_DR)/4)
-/* RESIDENCE_PPM is the people_pool mobitily. Higher number=less mobile. */
-#define RESIDENCE_PPM   20
-
-#define GROUP_ORGANIC_FARM_COLOUR (green(30))
-#define GROUP_ORGANIC_FARM_COST 1000
-#define GROUP_ORGANIC_FARM_COST_MUL 20
-#define GROUP_ORGANIC_FARM_BUL_COST 100
-#define GROUP_ORGANIC_FARM_TECH 0
-#define GROUP_ORGANIC_FARM_FIREC 20
-
-#define GROUP_MARKET_COLOUR (blue(28))
-#define GROUP_MARKET_COST 100
-#define GROUP_MARKET_COST_MUL 25
-#define GROUP_MARKET_BUL_COST 100
-#define GROUP_MARKET_TECH 0
-#define GROUP_MARKET_FIREC 80
-
-#define GROUP_TRACK_COLOUR 32   /* 32 is a brown */
-#define GROUP_TRACK_COST   1
-#define GROUP_TRACK_COST_MUL 25
-#define GROUP_TRACK_BUL_COST   10
-#define GROUP_TRACK_TECH   0
-#define GROUP_TRACK_FIREC  4
-
-#define GROUP_COALMINE_COLOUR 0
-#define GROUP_COALMINE_COST   10000
-#define GROUP_COALMINE_COST_MUL 25
-#define GROUP_COALMINE_BUL_COST   10000
-#define GROUP_COALMINE_TECH   85
-#define GROUP_COALMINE_FIREC  85
-
-#define GROUP_RAIL_COLOUR  (magenta(18))
-#define GROUP_RAIL_COST    500
-#define GROUP_RAIL_COST_MUL 10
-#define GROUP_RAIL_BUL_COST    1000
-#define GROUP_RAIL_TECH    180
-#define GROUP_RAIL_FIREC   6
-
-#define GROUP_COAL_POWER_COLOUR 0
-#define GROUP_COAL_POWER_COST   100000
-#define GROUP_COAL_POWER_COST_MUL 5
-#define GROUP_COAL_POWER_BUL_COST   200000
-#define GROUP_COAL_POWER_TECH   200
-#define GROUP_COAL_POWER_FIREC  80
-
-#define GROUP_ROAD_COLOUR  (white(18))
-#define GROUP_ROAD_COST    100
-#define GROUP_ROAD_COST_MUL 25
-#define GROUP_ROAD_BUL_COST    50
-#define GROUP_ROAD_TECH    50
-#define GROUP_ROAD_FIREC   4
-
-#define GROUP_INDUSTRY_L_COLOUR (cyan(18))
-#define GROUP_INDUSTRY_L_COST 20000
-#define GROUP_INDUSTRY_L_COST_MUL 25
-#define GROUP_INDUSTRY_L_BUL_COST 20000
-#define GROUP_INDUSTRY_L_TECH 160
-#define GROUP_INDUSTRY_L_FIREC 70
-
-#define GROUP_UNIVERSITY_COLOUR (blue(22))
-#define GROUP_UNIVERSITY_COST 20000
-#define GROUP_UNIVERSITY_COST_MUL 25
-#define GROUP_UNIVERSITY_BUL_COST 20000
-#define GROUP_UNIVERSITY_TECH 150
-#define GROUP_UNIVERSITY_FIREC 40
-
-#define GROUP_COMMUNE_COLOUR (green(30))
-#define GROUP_COMMUNE_COST  1
-#define GROUP_COMMUNE_COST_MUL 2
-#define GROUP_COMMUNE_BUL_COST  1000
-#define GROUP_COMMUNE_TECH  0
-#define GROUP_COMMUNE_FIREC 30
-
-#define GROUP_OREMINE_COLOUR (red(18))
-#define GROUP_OREMINE_COST 500
-#define GROUP_OREMINE_COST_MUL 10
-#define GROUP_OREMINE_BUL_COST 500000
-#define GROUP_OREMINE_TECH 0
-#define GROUP_OREMINE_FIREC 0
-
 #define GROUP_TIP_COLOUR (white(16))
 #define GROUP_TIP_COST 10000
 #define GROUP_TIP_COST_MUL 25
@@ -443,34 +111,6 @@
 #define GROUP_TIP_TECH 0
 #define GROUP_TIP_FIREC 50
 
-#define GROUP_PORT_COLOUR (blue(28))
-#define GROUP_PORT_COST 100000
-#define GROUP_PORT_COST_MUL 2
-#define GROUP_PORT_BUL_COST 1000
-#define GROUP_PORT_TECH 35
-#define GROUP_PORT_FIREC 50
-
-#define GROUP_INDUSTRY_H_COLOUR (7)     /* colour 7 is an orange, sort of */
-#define GROUP_INDUSTRY_H_COST 50000
-#define GROUP_INDUSTRY_H_COST_MUL 20
-#define GROUP_INDUSTRY_H_BUL_COST 70000
-#define GROUP_INDUSTRY_H_TECH 170
-#define GROUP_INDUSTRY_H_FIREC 80
-
-#define GROUP_PARKLAND_COLOUR (green(31))
-#define GROUP_PARKLAND_COST   1000
-#define GROUP_PARKLAND_COST_MUL 25
-#define GROUP_PARKLAND_BUL_COST   1000
-#define GROUP_PARKLAND_TECH   2
-#define GROUP_PARKLAND_FIREC 1
-
-#define GROUP_RECYCLE_COLOUR   (green(28))
-#define GROUP_RECYCLE_COST    100000
-#define GROUP_RECYCLE_COST_MUL 5
-#define GROUP_RECYCLE_BUL_COST    1000
-#define GROUP_RECYCLE_TECH    232
-#define GROUP_RECYCLE_FIREC 10
-
 #define GROUP_WATER_COLOUR    (blue(31))
 #define GROUP_WATER_COST      1000000
 #define GROUP_WATER_COST_MUL 2
@@ -478,76 +118,6 @@
 #define GROUP_WATER_TECH      0
 #define GROUP_WATER_FIREC 0
 
-#define GROUP_HEALTH_COLOUR   (green(24))
-#define GROUP_HEALTH_COST     100000
-#define GROUP_HEALTH_COST_MUL 2
-#define GROUP_HEALTH_BUL_COST     1000
-#define GROUP_HEALTH_TECH     110
-#define GROUP_HEALTH_FIREC 2
-
-#define GROUP_ROCKET_COLOUR   (magenta(20))
-#define GROUP_ROCKET_COST     700000
-#define GROUP_ROCKET_COST_MUL 2
-#define GROUP_ROCKET_BUL_COST     1
-#define GROUP_ROCKET_TECH     750
-#define GROUP_ROCKET_FIREC 0
-
-#define GROUP_WINDMILL_COLOUR (green(25))
-#define GROUP_WINDMILL_COST   20000
-#define GROUP_WINDMILL_COST_MUL 25
-#define GROUP_WINDMILL_BUL_COST   1000
-#define GROUP_WINDMILL_TECH   30
-#define GROUP_WINDMILL_FIREC  10
-
-#define GROUP_MONUMENT_COLOUR (white(15))
-#define GROUP_MONUMENT_COST   10000
-#define GROUP_MONUMENT_COST_MUL 25
-#define GROUP_MONUMENT_BUL_COST   1000000
-#define GROUP_MONUMENT_TECH   0
-#define GROUP_MONUMENT_FIREC  0
-
-#define GROUP_SCHOOL_COLOUR (white(15))
-#define GROUP_SCHOOL_COST   10000
-#define GROUP_SCHOOL_COST_MUL 25
-#define GROUP_SCHOOL_BUL_COST   10000
-#define GROUP_SCHOOL_TECH   1
-#define GROUP_SCHOOL_FIREC 40
-
-#define GROUP_BLACKSMITH_COLOUR (white(15))
-#define GROUP_BLACKSMITH_COST   5000
-#define GROUP_BLACKSMITH_COST_MUL 25
-#define GROUP_BLACKSMITH_BUL_COST   1000
-#define GROUP_BLACKSMITH_TECH   3
-#define GROUP_BLACKSMITH_FIREC 60
-
-#define GROUP_MILL_COLOUR (white(15))
-#define GROUP_MILL_COST   10000
-#define GROUP_MILL_COST_MUL 25
-#define GROUP_MILL_BUL_COST   1000
-#define GROUP_MILL_TECH   25
-#define GROUP_MILL_FIREC  60
-
-#define GROUP_POTTERY_COLOUR (red(12))
-#define GROUP_POTTERY_COST   1000
-#define GROUP_POTTERY_COST_MUL 25
-#define GROUP_POTTERY_BUL_COST 1000
-#define GROUP_POTTERY_TECH  0
-#define GROUP_POTTERY_FIREC 50
-
-#define GROUP_FIRESTATION_COLOUR (red(20))
-#define GROUP_FIRESTATION_COST   20000
-#define GROUP_FIRESTATION_COST_MUL 10
-#define GROUP_FIRESTATION_BUL_COST 1000
-#define GROUP_FIRESTATION_TECH     22
-#define GROUP_FIRESTATION_FIREC 0
-
-#define GROUP_CRICKET_COLOUR (white(20))
-#define GROUP_CRICKET_COST   2000
-#define GROUP_CRICKET_COST_MUL 3
-#define GROUP_CRICKET_BUL_COST 1000
-#define GROUP_CRICKET_TECH     12
-#define GROUP_CRICKET_FIREC 20
-
 #define GROUP_BURNT_COLOUR    (red(30))
 #define GROUP_BURNT_COST   0    /* Unused */
 #define GROUP_BURNT_COST_MUL   1        /* Unused */
@@ -555,29 +125,6 @@
 #define GROUP_BURNT_TECH   0    /* Unused */
 #define GROUP_BURNT_FIREC  0
 
-#define GROUP_SHANTY_COLOUR    (red(22))
-#define GROUP_SHANTY_COST   0   /* Unused */
-#define GROUP_SHANTY_COST_MUL   1       /* Unused */
-#define GROUP_SHANTY_BUL_COST  100000
-#define GROUP_SHANTY_TECH   0   /* Unused */
-#define GROUP_SHANTY_FIREC     25
-#define SHANTY_MIN_PP     150
-#define SHANTY_POP        50
-#define DAYS_BETWEEN_SHANTY (NUMOF_DAYS_IN_MONTH * 1)
-#define SHANTY_GET_FOOD   50
-#define SHANTY_GET_JOBS   5
-#define SHANTY_GET_GOODS  50
-#define SHANTY_GET_COAL   1
-#define SHANTY_GET_ORE    10
-#define SHANTY_GET_STEEL  1
-
-#define GROUP_FIRE_COLOUR    (red(30))
-#define GROUP_FIRE_COST   0     /* Unused */
-#define GROUP_FIRE_COST_MUL   1 /* Unused */
-#define GROUP_FIRE_BUL_COST  1000
-#define GROUP_FIRE_TECH   0     /* Unused */
-#define GROUP_FIRE_FIREC  0
-
 #define GROUP_USED_COLOUR (green(12))   /* Unused */
 #define GROUP_USED_COST   0     /* Unused */
 #define GROUP_USED_COST_MUL  1  /* Unused */
@@ -585,48 +132,6 @@
 #define GROUP_USED_TECH   0     /* Unused */
 #define GROUP_USED_FIREC  0     /* Unused */
 
-#define GROUP_RESIDENCE_ML_COLOUR (cyan(24))
-#define GROUP_RESIDENCE_ML_COST 2000
-#define GROUP_RESIDENCE_ML_COST_MUL 25
-#define GROUP_RESIDENCE_ML_BUL_COST 1000
-#define GROUP_RESIDENCE_ML_TECH 0
-#define GROUP_RESIDENCE_ML_FIREC 75
-
-#define GROUP_RESIDENCE_HL_COLOUR (cyan(24))
-#define GROUP_RESIDENCE_HL_COST 4000
-#define GROUP_RESIDENCE_HL_COST_MUL 25
-#define GROUP_RESIDENCE_HL_BUL_COST 1000
-#define GROUP_RESIDENCE_HL_TECH 0
-#define GROUP_RESIDENCE_HL_FIREC 75
-
-#define GROUP_RESIDENCE_LH_COLOUR (cyan(24))
-#define GROUP_RESIDENCE_LH_COST 800
-#define GROUP_RESIDENCE_LH_COST_MUL 25
-#define GROUP_RESIDENCE_LH_BUL_COST 1000
-#define GROUP_RESIDENCE_LH_TECH 0       /* ?? */
-#define GROUP_RESIDENCE_LH_FIREC 75
-
-#define GROUP_RESIDENCE_MH_COLOUR (cyan(24))
-#define GROUP_RESIDENCE_MH_COST 1600
-#define GROUP_RESIDENCE_MH_COST_MUL 25
-#define GROUP_RESIDENCE_MH_BUL_COST 1000
-#define GROUP_RESIDENCE_MH_TECH 0
-#define GROUP_RESIDENCE_MH_FIREC 75
-
-#define GROUP_RESIDENCE_HH_COLOUR (cyan(24))
-#define GROUP_RESIDENCE_HH_COST 3200
-#define GROUP_RESIDENCE_HH_COST_MUL 25
-#define GROUP_RESIDENCE_HH_BUL_COST 1000
-#define GROUP_RESIDENCE_HH_TECH 0
-#define GROUP_RESIDENCE_HH_FIREC 75
-
-#define GROUP_WATERWELL_COLOUR    (blue(31))
-#define GROUP_WATERWELL_COST      1
-#define GROUP_WATERWELL_COST_MUL 2
-#define GROUP_WATERWELL_BUL_COST      1
-#define GROUP_WATERWELL_TECH      0
-#define GROUP_WATERWELL_FIREC 0
-
 #define GROUP_DESERT_COLOUR  (yellow(18))
 #define GROUP_DESERT_COST    0
 #define GROUP_DESERT_COST_MUL 1
@@ -655,29 +160,6 @@
 #define GROUP_TREE3_TECH    0
 #define GROUP_TREE3_FIREC   0
 
-#define BRIDGE_FACTOR 500 /* a bridge is that much more expensive than the land transport */
-
-#define GROUP_TRACK_BRIDGE_COLOUR 32   /* 32 is a brown */
-#define GROUP_TRACK_BRIDGE_COST   GROUP_TRACK_COST * BRIDGE_FACTOR
-#define GROUP_TRACK_BRIDGE_COST_MUL 2
-#define GROUP_TRACK_BRIDGE_BUL_COST GROUP_TRACK_BUL_COST * BRIDGE_FACTOR
-#define GROUP_TRACK_BRIDGE_TECH   GROUP_TRACK_TECH
-#define GROUP_TRACK_BRIDGE_FIREC  0    /* unused */
-
-#define GROUP_ROAD_BRIDGE_COLOUR  (white(18))
-#define GROUP_ROAD_BRIDGE_COST    GROUP_ROAD_COST * BRIDGE_FACTOR
-#define GROUP_ROAD_BRIDGE_COST_MUL 2
-#define GROUP_ROAD_BRIDGE_BUL_COST GROUP_ROAD_BUL_COST * BRIDGE_FACTOR
-#define GROUP_ROAD_BRIDGE_TECH    GROUP_ROAD_TECH
-#define GROUP_ROAD_BRIDGE_FIREC   0
-
-#define GROUP_RAIL_BRIDGE_COLOUR  (magenta(18))
-#define GROUP_RAIL_BRIDGE_COST    GROUP_RAIL_COST * BRIDGE_FACTOR
-#define GROUP_RAIL_BRIDGE_COST_MUL 2
-#define GROUP_RAIL_BRIDGE_BUL_COST GROUP_RAIL_BUL_COST * BRIDGE_FACTOR
-#define GROUP_RAIL_BRIDGE_TECH    GROUP_RAIL_TECH
-#define GROUP_RAIL_BRIDGE_FIREC   0
-
 /********   end of buildings // groups   ************/
 
-#endif // __groups_h__
+#endif // __all_buildings_h__

Modified: trunk/src/lincity/engine.cpp
===================================================================
--- trunk/src/lincity/engine.cpp	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/engine.cpp	2010-07-15 16:19:22 UTC (rev 1591)
@@ -19,6 +19,7 @@
 #include "gui_interface/mps.h"
 #include "gui_interface/screen_interface.h"
 #include "gui_interface/shared_globals.h"
+#include "modules/modules_interfaces.h"
 #include "modules/all_modules.h"
 #include "transport.h"
 #include "all_buildings.h"

Modified: trunk/src/lincity/init_game.cpp
===================================================================
--- trunk/src/lincity/init_game.cpp	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/init_game.cpp	2010-07-15 16:19:22 UTC (rev 1591)
@@ -28,9 +28,10 @@
 #include "power.h"
 #include "stats.h"
 #include "gui_interface/pbar_interface.h"
-#include "modules/all_modules.h"
+#include "modules/modules_interfaces.h"
 #include "transport.h"
 #include "all_buildings.h"
+#include "engine.h"
 
 #define IS_RIVER(x,y) (MP_INFO(x,y).flags & FLAG_IS_RIVER)
 

Modified: trunk/src/lincity/lctypes.h
===================================================================
--- trunk/src/lincity/lctypes.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/lctypes.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -713,10 +713,4 @@
 
 #define CST_NONE 1000
 
-/*
-  //    *********************************
-  //    400 is the maximum at the moment.
-  //    *********************************
-*/
-
 #endif /* __lctypes_h__ */

Modified: trunk/src/lincity/lin-city.h
===================================================================
--- trunk/src/lincity/lin-city.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/lin-city.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -31,7 +31,10 @@
 #if defined (_MSC_VER)
 #   define snprintf _snprintf
 #endif
+
+/* AL1 : unused in 2.x
 #define USE_X11_PIXMAPS
+*/
 
 #ifndef TRUE
 #   define TRUE 1
@@ -45,9 +48,11 @@
 #define WARNING -2
 
 /* comment out the the next three lines for _slightly_ faster X drawing. */
+/* AL1 : unused in 2.x
 #if defined LC_X11 || defined WIN32
 #   define ALLOW_PIX_DOUBLING
 #endif
+*/
 
 #define FLAG_LEFT               (1)             // Used for transports, power lines, rivers, and desert borders.
 #define FLAG_UP                 (2)             // Algorithm relies on the numerical values of

Modified: trunk/src/lincity/lintypes.cpp
===================================================================
--- trunk/src/lincity/lintypes.cpp	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/lintypes.cpp	2010-07-15 16:19:22 UTC (rev 1591)
@@ -14,6 +14,8 @@
 #include "gui_interface/readpng.h"
 #include "loadsave.h"
 #include "all_buildings.h"
+#include "transport.h"
+#include "modules/all_modules.h"
 
 struct TYPE main_types[NUM_OF_TYPES];
 

Modified: trunk/src/lincity/loadsave.cpp
===================================================================
--- trunk/src/lincity/loadsave.cpp	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/loadsave.cpp	2010-07-15 16:19:22 UTC (rev 1591)
@@ -16,7 +16,7 @@
 #include "stats.h"
 #include "init_game.h"
 #include "transport.h"
-#include "all_buildings.h"  // temporary workaround. needed only to get MODERN_WINDMILL_TECH for init, which should be elsewhere
+#include "modules/windmill.h"  // temporary workaround. needed only to get MODERN_WINDMILL_TECH for init, which should be elsewhere
 
 #include <fcntl.h>
 #include <sys/types.h>

Modified: trunk/src/lincity/modules/all_modules.h
===================================================================
--- trunk/src/lincity/modules/all_modules.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/all_modules.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -12,7 +12,6 @@
 #include "heavy_industry.h"
 #include "light_industry.h"
 #include "mill.h"
-#include "modules.h"
 #include "monument.h"
 #include "oremine.h"
 #include "organic_farm.h"
@@ -38,3 +37,4 @@
 #include "waterwell.h"
 
 #endif
+

Modified: trunk/src/lincity/modules/blacksmith.h
===================================================================
--- trunk/src/lincity/modules/blacksmith.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/blacksmith.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +1,18 @@
-/* ---------------------------------------------------------------------- *
- * blacksmith.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define GROUP_BLACKSMITH_COLOUR (white(15))
+#define GROUP_BLACKSMITH_COST   5000
+#define GROUP_BLACKSMITH_COST_MUL 25
+#define GROUP_BLACKSMITH_BUL_COST   1000
+#define GROUP_BLACKSMITH_TECH   3
+#define GROUP_BLACKSMITH_FIREC 60
 
-#ifndef __blacksmith_h__
-#define __blacksmith_h__
+#define BLACKSMITH_JOBS    35
+#define BLACKSMITH_GET_COAL 6
+#define MAX_GOODS_AT_BLACKSMITH 200
+#define MAX_COAL_AT_BLACKSMITH  100
+#define BLACKSMITH_STEEL_USED 1
+#define BLACKSMITH_COAL_USED  1
+#define GOODS_MADE_BY_BLACKSMITH 50
+#define BLACKSMITH_BATCH (GOODS_MADE_BY_BLACKSMITH*100)
+#define BLACKSMITH_ANIM_THRESHOLD 10
+#define BLACKSMITH_ANIM_SPEED    200
 
-void do_blacksmith(int x, int y);
-void mps_blacksmith(int x, int y);
-
-#endif /* __blacksmith_h__ */

Modified: trunk/src/lincity/modules/coal_power.h
===================================================================
--- trunk/src/lincity/modules/coal_power.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/coal_power.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +1,8 @@
-/* ---------------------------------------------------------------------- *
- * coal_power.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define GROUP_COAL_POWER_COLOUR 0
+#define GROUP_COAL_POWER_COST   100000
+#define GROUP_COAL_POWER_COST_MUL 5
+#define GROUP_COAL_POWER_BUL_COST   200000
+#define GROUP_COAL_POWER_TECH   200
+#define GROUP_COAL_POWER_FIREC  80
 
-#ifndef __coal_power_h__
-#define __coal_power_h__
 
-void do_power_source_coal(int x, int y);
-void mps_coal_power(int, int);
-
-#endif /* __coal_power_h__ */

Modified: trunk/src/lincity/modules/coalmine.cpp
===================================================================
--- trunk/src/lincity/modules/coalmine.cpp	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/coalmine.cpp	2010-07-15 16:19:22 UTC (rev 1591)
@@ -8,6 +8,7 @@
 #include "modules.h"
 #include "coalmine.h"
 #include "../range.h"
+#include "../transport.h"
 
 void do_coalmine(int x, int y)
 {

Modified: trunk/src/lincity/modules/coalmine.h
===================================================================
--- trunk/src/lincity/modules/coalmine.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/coalmine.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +1,9 @@
-/* ---------------------------------------------------------------------- *
- * coalmine.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
 
-#ifndef __coalmine_h__
-#define __coalmine_h__
+#define GROUP_COALMINE_COLOUR 0
+#define GROUP_COALMINE_COST   10000
+#define GROUP_COALMINE_COST_MUL 25
+#define GROUP_COALMINE_BUL_COST   10000
+#define GROUP_COALMINE_TECH   85
+#define GROUP_COALMINE_FIREC  85
 
-void do_coalmine(int x, int y);
-void mps_coalmine(int x, int y);
 
-#endif /* __coalmine_h__ */

Modified: trunk/src/lincity/modules/commune.h
===================================================================
--- trunk/src/lincity/modules/commune.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/commune.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +1,11 @@
-/* ---------------------------------------------------------------------- *
- * commune.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define GROUP_COMMUNE_COLOUR (green(30))
+#define GROUP_COMMUNE_COST  1
+#define GROUP_COMMUNE_COST_MUL 2
+#define GROUP_COMMUNE_BUL_COST  1000
+#define GROUP_COMMUNE_TECH  0
+#define GROUP_COMMUNE_FIREC 30
 
-#ifndef __commune_h__
-#define __commune_h__
+#define JOBS_AT_COMMUNE_GATE 4
+#define COMMUNE_ANIM_SPEED 750
+#define COMMUNE_POP  5
 
-void do_commune(int x, int y);
-void mps_commune(int x, int y);
-
-#endif /* __commune_h__ */

Modified: trunk/src/lincity/modules/cricket.h
===================================================================
--- trunk/src/lincity/modules/cricket.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/cricket.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,15 +1,18 @@
-/* ---------------------------------------------------------------------- *
- * cricket.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define GROUP_CRICKET_COLOUR (white(20))
+#define GROUP_CRICKET_COST   2000
+#define GROUP_CRICKET_COST_MUL 3
+#define GROUP_CRICKET_BUL_COST 1000
+#define GROUP_CRICKET_TECH     12
+#define GROUP_CRICKET_FIREC 20
 
-#ifndef __cricket_h__
-#define __cricket_h__
+#define CRICKET_JOBS   8
+#define CRICKET_GET_JOBS 9
+#define MAX_JOBS_AT_CRICKET (CRICKET_JOBS*NUMOF_DAYS_IN_YEAR)
+#define CRICKET_GOODS  2
+#define CRICKET_GET_GOODS 3
+#define MAX_GOODS_AT_CRICKET (CRICKET_GOODS*NUMOF_DAYS_IN_YEAR)
+#define CRICKET_RUNNING_COST 1
+#define CRICKET_ANIMATION_SPEED 750
 
-void do_cricket(int x, int y);
-void do_cricket_cover(int x, int y);
-void mps_cricket(int x, int y);
+#define CRICKET_JOB_SWING 4
 
-#endif /* __cricket_h__ */

Modified: trunk/src/lincity/modules/fire.h
===================================================================
--- trunk/src/lincity/modules/fire.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/fire.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,13 +1,8 @@
-/* ---------------------------------------------------------------------- *
- * fire.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define GROUP_FIRE_COLOUR    (red(30))
+#define GROUP_FIRE_COST   0     /* Unused */
+#define GROUP_FIRE_COST_MUL   1 /* Unused */
+#define GROUP_FIRE_BUL_COST  1000
+#define GROUP_FIRE_TECH   0     /* Unused */
+#define GROUP_FIRE_FIREC  0
 
-#ifndef __fire_h__
-#define __fire_h__
 
-void do_fire(int x, int y);
-
-#endif /* __fire_h__ */

Modified: trunk/src/lincity/modules/firestation.h
===================================================================
--- trunk/src/lincity/modules/firestation.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/firestation.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,15 +1,18 @@
-/* ---------------------------------------------------------------------- *
- * firestation.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define FIRESTATION_JOBS   6
+#define FIRESTATION_GET_JOBS 7
+#define MAX_JOBS_AT_FIRESTATION (FIRESTATION_JOBS*NUMOF_DAYS_IN_YEAR)
+#define FIRESTATION_GOODS  2
+#define FIRESTATION_GET_GOODS 3
+#define MAX_GOODS_AT_FIRESTATION (FIRESTATION_GOODS*NUMOF_DAYS_IN_YEAR)
+#define FIRESTATION_RUNNING_COST 1
+#define FIRESTATION_RUNNING_COST_MUL 6
+#define FIRESTATION_ANIMATION_SPEED 250
 
-#ifndef __firestation_h__
-#define __firestation_h__
+#define GROUP_FIRESTATION_COLOUR (red(20))
+#define GROUP_FIRESTATION_COST   20000
+#define GROUP_FIRESTATION_COST_MUL 10
+#define GROUP_FIRESTATION_BUL_COST 1000
+#define GROUP_FIRESTATION_TECH     22
+#define GROUP_FIRESTATION_FIREC 0
 
-void do_firestation(int x, int y);
-void do_fire_cover(int x, int y);
-void mps_firestation(int x, int y);
 
-#endif /* __firestation_h__ */

Modified: trunk/src/lincity/modules/health_centre.h
===================================================================
--- trunk/src/lincity/modules/health_centre.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/health_centre.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,15 +1,17 @@
-/* ---------------------------------------------------------------------- *
- * health_centre.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define HEALTH_CENTRE_JOBS   6
+#define HEALTH_CENTRE_GET_JOBS 7
+#define MAX_JOBS_AT_HEALTH_CENTRE (HEALTH_CENTRE_JOBS*NUMOF_DAYS_IN_YEAR)
+#define HEALTH_CENTRE_GOODS  40
+#define HEALTH_CENTRE_GET_GOODS 41
+#define MAX_GOODS_AT_HEALTH_CENTRE (HEALTH_CENTRE_GOODS*NUMOF_DAYS_IN_YEAR)
+#define HEALTH_RUNNING_COST  2
+#define HEALTH_RUNNING_COST_MUL 9
 
-#ifndef __health_centre_h__
-#define __health_centre_h__
+#define GROUP_HEALTH_COLOUR   (green(24))
+#define GROUP_HEALTH_COST     100000
+#define GROUP_HEALTH_COST_MUL 2
+#define GROUP_HEALTH_BUL_COST     1000
+#define GROUP_HEALTH_TECH     110
+#define GROUP_HEALTH_FIREC 2
 
-void do_health_centre(int x, int y);
-void do_health_cover(int x, int y);
-void mps_health_centre(int x, int y);
 
-#endif /* __health_centre_h__ */

Modified: trunk/src/lincity/modules/heavy_industry.cpp
===================================================================
--- trunk/src/lincity/modules/heavy_industry.cpp	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/heavy_industry.cpp	2010-07-15 16:19:22 UTC (rev 1591)
@@ -7,6 +7,7 @@
 
 #include "modules.h"
 #include "heavy_industry.h"
+#include "../transport.h"
 
 void do_industry_h(int x, int y)
 {

Modified: trunk/src/lincity/modules/heavy_industry.h
===================================================================
--- trunk/src/lincity/modules/heavy_industry.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/heavy_industry.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,13 +1,15 @@
-/* ---------------------------------------------------------------------- *
- * heavy_industry.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define GROUP_INDUSTRY_H_COLOUR (7)     /* colour 7 is an orange, sort of */
+#define GROUP_INDUSTRY_H_COST 50000
+#define GROUP_INDUSTRY_H_COST_MUL 20
+#define GROUP_INDUSTRY_H_BUL_COST 70000
+#define GROUP_INDUSTRY_H_TECH 170
+#define GROUP_INDUSTRY_H_FIREC 80
 
-#ifndef __heavy_industry_h__
-#define __heavy_industry_h__
+#define MAX_ORE_AT_INDUSTRY_H 10000
+#define MAX_COAL_AT_INDUSTRY_H 1000
+#define MAX_MADE_AT_INDUSTRY_H MAX_ORE_AT_INDUSTRY_H/16
+#define POWER_MAKE_STEEL 200
+#define INDUSTRY_H_ANIM_SPEED  290
 
-void do_industry_h(int x, int y);
-void mps_heavy_industry(int x, int y);
-#endif /* __heavy_industry_h__ */
+#include "rail.h"
+#define MAX_STEEL_AT_INDUSTRY_H (MAX_STEEL_ON_RAIL*10)

Modified: trunk/src/lincity/modules/light_industry.cpp
===================================================================
--- trunk/src/lincity/modules/light_industry.cpp	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/light_industry.cpp	2010-07-15 16:19:22 UTC (rev 1591)
@@ -7,6 +7,7 @@
 
 #include "modules.h"
 #include "light_industry.h"
+#include "../transport.h"
 
 void do_industry_l(int x, int y)
 {

Modified: trunk/src/lincity/modules/light_industry.h
===================================================================
--- trunk/src/lincity/modules/light_industry.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/light_industry.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +1,26 @@
-/* ---------------------------------------------------------------------- *
- * light_industry.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define MAX_ORE_AT_INDUSTRY_L 20000
+#define MAX_JOBS_AT_INDUSTRY_L 500
+#define MAX_GOODS_AT_INDUSTRY_L 65000
+#define INDUSTRY_L_GET_JOBS    120
+#define INDUSTRY_L_GET_ORE     600
+#define INDUSTRY_L_GET_STEEL   60
+#define INDUSTRY_L_JOBS_LOAD_ORE 1
+#define INDUSTRY_L_JOBS_LOAD_STEEL 4
+#define INDUSTRY_L_ORE_USED  125
+#define INDUSTRY_L_STEEL_USED  12
+#define INDUSTRY_L_JOBS_USED       30
+#define INDUSTRY_L_MAKE_GOODS 225
+#define MAX_STEEL_AT_INDUSTRY_L 2000
+#define MIN_JOBS_AT_INDUSTRY_L (INDUSTRY_L_JOBS_LOAD_ORE + INDUSTRY_L_JOBS_LOAD_STEEL + INDUSTRY_L_JOBS_USED)
+#define INDUSTRY_L_ANIM_SPEED 290
+#define INDUSTRY_L_POL_PER_GOOD 0.05
+#define INDUSTRY_L_POLLUTION    10
 
-#ifndef __light_industry_h__
-#define __light_industry_h__
+#define GROUP_INDUSTRY_L_COLOUR (cyan(18))
+#define GROUP_INDUSTRY_L_COST 20000
+#define GROUP_INDUSTRY_L_COST_MUL 25
+#define GROUP_INDUSTRY_L_BUL_COST 20000
+#define GROUP_INDUSTRY_L_TECH 160
+#define GROUP_INDUSTRY_L_FIREC 70
 
-void do_industry_l(int x, int y);
-void mps_light_industry(int x, int y);
 
-#endif /* __light_industry_h__ */

Modified: trunk/src/lincity/modules/market.cpp
===================================================================
--- trunk/src/lincity/modules/market.cpp	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/market.cpp	2010-07-15 16:19:22 UTC (rev 1591)
@@ -8,6 +8,7 @@
 #include "market.h"
 #include "lincity-ng/ErrorInterface.hpp"
 #include "../range.h"
+#include "../transport.h"
 
     /*
      * MP_INFO(x,y)
@@ -378,7 +379,7 @@
                 MP_TYPE(x, y) = CST_MARKET_LOW;
             else
                 MP_TYPE(x, y) = CST_MARKET_EMPTY;
-        } else if (MP_INFO(x, y).int_1 < (MARKET_FOOD_SEARCH_TRIGGER / 2))
+        } else if (MP_INFO(x, y).int_1 < (MAX_FOOD_IN_MARKET / 2))
             MP_TYPE(x, y) = CST_MARKET_LOW;
         else if (MP_INFO(x, y).int_1 < (MAX_FOOD_IN_MARKET - MAX_FOOD_IN_MARKET / 4))
             MP_TYPE(x, y) = CST_MARKET_MED;

Modified: trunk/src/lincity/modules/market.h
===================================================================
--- trunk/src/lincity/modules/market.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/market.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -3,7 +3,6 @@
  * This file is part of lincity.
  * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
  * ---------------------------------------------------------------------- */
-#include "../engglobs.h"
 
 #define T_FOOD  0
 #define T_JOBS  1
@@ -13,33 +12,11 @@
 #define T_STEEL 5
 #define T_WASTE 6
 
-void mps_market(int x, int y);
+#define GROUP_MARKET_COLOUR (blue(28))
+#define GROUP_MARKET_COST 100
+#define GROUP_MARKET_COST_MUL 25
+#define GROUP_MARKET_BUL_COST 100
+#define GROUP_MARKET_TECH 0
+#define GROUP_MARKET_FIREC 80
 
-int get_food(int, int, int);
-int put_food(int, int, int);
-int get_jobs(int, int, int);
-int put_jobs(int, int, int);
-int get_goods(int, int, int);
-int put_goods(int, int, int);
-int get_ore(int, int, int);
-int put_ore(int, int, int);
-int get_coal(int, int, int);
-int put_coal(int, int, int);
-int add_a_market(int, int);
-void remove_a_market(int, int);
-void do_market(int, int);
-void shuffle_markets(void);
-int deal_with_transport(int, int, int, int);
-int get_steel(int, int, int);
-int put_steel(int, int, int);
-int get_waste(int, int, int);
-int put_waste(int, int, int);
-int get_stuff(int, int, int, int);
-int get_stuff2(map_point_info_struct *, int, int);
-int get_stuff3(map_point_info_struct *, int, int);
-int get_stuff4(map_point_info_struct *, int, int);
-int put_stuff(int, int, int, int);
-int put_stuff2(map_point_info_struct *, short *, int, int);
-int put_stuff3(map_point_info_struct *, short *, int, int);
-int put_stuff4(map_point_info_struct *, short *, int, int);
 

Modified: trunk/src/lincity/modules/mill.h
===================================================================
--- trunk/src/lincity/modules/mill.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/mill.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +1,21 @@
-/* ---------------------------------------------------------------------- *
- * mill.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define MILL_JOBS          35
+#define MAX_GOODS_AT_MILL  200
+#define MAX_FOOD_AT_MILL   500
+#define MAX_COAL_AT_MILL   50
+#define GOODS_MADE_BY_MILL 75
+#define MILL_GET_FOOD      51
+#define MILL_GET_COAL      4
+#define MILL_POWER_PER_COAL 60
+#define FOOD_USED_BY_MILL  (GOODS_MADE_BY_MILL/2)
+#define COAL_USED_BY_MILL  1
+#define MILL_ANIM_THRESHOLD 10
+#define MILL_ANIM_SPEED    300
 
-#ifndef __mill_h__
-#define __mill_h__
+#define GROUP_MILL_COLOUR (white(15))
+#define GROUP_MILL_COST   10000
+#define GROUP_MILL_COST_MUL 25
+#define GROUP_MILL_BUL_COST   1000
+#define GROUP_MILL_TECH   25
+#define GROUP_MILL_FIREC  60
 
-void do_mill(int x, int y);
-void mps_mill(int x, int y);
 
-#endif /* __mill_h__ */

Modified: trunk/src/lincity/modules/modules.h
===================================================================
--- trunk/src/lincity/modules/modules.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/modules.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -15,11 +15,8 @@
 #include "gui_interface/mps.h"
 #include "../lclib.h"
 
-#include "market.h"
 #include "../power.h"
 #include "../all_buildings.h"
+#include "modules_interfaces.h"
 
-// for real_time
-//#include "cliglobs.h"
-
 #endif /* __modules_h__ */

Added: trunk/src/lincity/modules/modules_interfaces.h
===================================================================
--- trunk/src/lincity/modules/modules_interfaces.h	                        (rev 0)
+++ trunk/src/lincity/modules/modules_interfaces.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -0,0 +1,139 @@
+#ifndef __MODULES_INTERFACES_H__
+#define __MODULES_INTERFACES_H__
+
+void do_blacksmith(int x, int y);
+void mps_blacksmith(int x, int y);
+
+void do_coalmine(int x, int y);
+void mps_coalmine(int x, int y);
+
+void do_power_source_coal(int x, int y);
+void mps_coal_power(int, int);
+
+void do_commune(int x, int y);
+void mps_commune(int x, int y);
+
+void do_cricket(int x, int y);
+void do_cricket_cover(int x, int y);
+void mps_cricket(int x, int y);
+
+void do_fire(int x, int y);
+
+void do_firestation(int x, int y);
+void do_fire_cover(int x, int y);
+void mps_firestation(int x, int y);
+
+void do_health_centre(int x, int y);
+void do_health_cover(int x, int y);
+void mps_health_centre(int x, int y);
+
+void do_industry_h(int x, int y);
+void mps_heavy_industry(int x, int y);
+
+void do_industry_l(int x, int y);
+void mps_light_industry(int x, int y);
+
+void mps_market(int x, int y);
+int get_food(int, int, int);
+int put_food(int, int, int);
+int get_jobs(int, int, int);
+int put_jobs(int, int, int);
+int get_goods(int, int, int);
+int put_goods(int, int, int);
+int get_ore(int, int, int);
+int put_ore(int, int, int);
+int get_coal(int, int, int);
+int put_coal(int, int, int);
+int add_a_market(int, int);
+void remove_a_market(int, int);
+void do_market(int, int);
+void shuffle_markets(void);
+int deal_with_transport(int, int, int, int);
+int get_steel(int, int, int);
+int put_steel(int, int, int);
+int get_waste(int, int, int);
+int put_waste(int, int, int);
+int get_stuff(int, int, int, int);
+int get_stuff2(map_point_info_struct *, int, int);
+int get_stuff3(map_point_info_struct *, int, int);
+int get_stuff4(map_point_info_struct *, int, int);
+int put_stuff(int, int, int, int);
+int put_stuff2(map_point_info_struct *, short *, int, int);
+int put_stuff3(map_point_info_struct *, short *, int, int);
+int put_stuff4(map_point_info_struct *, short *, int, int);
+
+void do_mill(int x, int y);
+void mps_mill(int x, int y);
+
+void do_monument(int x, int y);
+void mps_monument(int x, int y);
+
+void do_oremine(int x, int y);
+void mps_oremine(int x, int y);
+
+void do_organic_farm(int x, int y);
+void mps_organic_farm(int x, int y);
+
+void do_parkland(int x, int y);
+void mps_parkland(int x, int y);
+
+void do_port(int x, int y);
+void mps_port(int x, int y);
+
+void do_pottery(int x, int y);
+void mps_pottery(int x, int y);
+
+void do_power_line(int x, int y);
+void mps_power_line(int x, int y);
+
+void do_rail(int x, int y);
+void mps_rail(int x, int y);
+
+void do_recycle(int x, int y);
+void mps_recycle(int x, int y);
+
+void do_residence(int x, int y);
+void mps_residence(int x, int y);
+
+void do_road(int x, int y);
+void mps_road(int x, int y);
+
+void do_rocket_pad(int x, int y);
+void launch_rocket(int x, int y);
+void mps_rocket(int x, int y);
+
+void do_school(int x, int y);
+void mps_school(int x, int y);
+
+void add_a_shanty(void);
+void remove_a_shanty(int x, int y);
+void update_shanty(void);
+void do_shanty(int x, int y);
+
+void do_power_source_solar(int x, int y);
+void mps_solar_power(int x, int y);
+
+void do_power_substation(int x, int y);
+int add_a_substation(int x, int y);
+void remove_a_substation(int x, int y);
+void shuffle_substations(void);
+void mps_substation(int x, int y);
+
+void do_tip(int x, int y);
+void mps_tip(int x, int y);
+
+void do_track(int x, int y);
+void mps_track(int x, int y);
+
+void do_university(int x, int y);
+void mps_university(int x, int y);
+
+void mps_water(int x, int y);
+
+void do_waterwell_cover(int x, int y);
+void mps_waterwell(int x, int y);
+
+void do_windmill(int x, int y);
+void mps_windmill(int x, int y);
+
+#endif

Modified: trunk/src/lincity/modules/monument.h
===================================================================
--- trunk/src/lincity/modules/monument.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/monument.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +1,14 @@
-/* ---------------------------------------------------------------------- *
- * monument.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define GROUP_MONUMENT_COLOUR (white(15))
+#define GROUP_MONUMENT_COST   10000
+#define GROUP_MONUMENT_COST_MUL 25
+#define GROUP_MONUMENT_BUL_COST   1000000
+#define GROUP_MONUMENT_TECH   0
+#define GROUP_MONUMENT_FIREC  0
 
-#ifndef __monument_h__
-#define __monument_h__
+#define BUILD_MONUMENT_JOBS     350000
+#define MONUMENT_GET_JOBS       100
+#define MONUMENT_DAYS_PER_TECH  3
+#define MONUMENT_TECH_EXPIRE    400
+#define MONUMENT_ANIM_SPEED     300
 
-void do_monument(int x, int y);
-void mps_monument(int x, int y);
 
-#endif /* __monument_h__ */

Modified: trunk/src/lincity/modules/oremine.cpp
===================================================================
--- trunk/src/lincity/modules/oremine.cpp	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/oremine.cpp	2010-07-15 16:19:22 UTC (rev 1591)
@@ -9,6 +9,7 @@
 #include "gui_interface/screen_interface.h"
 #include "oremine.h"
 #include <cstdlib>
+#include "../transport.h"
 
 void do_oremine(int x, int y)
 {

Modified: trunk/src/lincity/modules/oremine.h
===================================================================
--- trunk/src/lincity/modules/oremine.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/oremine.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +1,10 @@
-/* ---------------------------------------------------------------------- *
- * oremine.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define OREMINE_ANIMATION_SPEED 200
 
-#ifndef __oremine_h__
-#define __oremine_h__
+#define GROUP_OREMINE_COLOUR (red(18))
+#define GROUP_OREMINE_COST 500
+#define GROUP_OREMINE_COST_MUL 10
+#define GROUP_OREMINE_BUL_COST 500000
+#define GROUP_OREMINE_TECH 0
+#define GROUP_OREMINE_FIREC 0
 
-void do_oremine(int x, int y);
-void mps_oremine(int x, int y);
 
-#endif /* __oremine_h__ */

Modified: trunk/src/lincity/modules/organic_farm.h
===================================================================
--- trunk/src/lincity/modules/organic_farm.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/organic_farm.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,13 +1,16 @@
-/* ---------------------------------------------------------------------- *
- * organic_farm.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * ---------------------------------------------------------------------- */
+#define ORGANIC_FARM_FOOD_OUTPUT 550
+#define ORGANIC_FARM_ANIM_SPEED 3000
+#define FARM_JOBS_USED 13
+#define ORG_FARM_POWER_REC 50
+/* gets waste only when powered */
+#define ORG_FARM_WASTE_GET 6
+#define MIN_FOOD_SOLD_FOR_ANIM 200
 
-#ifndef __organic_farm_h__
-#define __organic_farm_h__
+#define GROUP_ORGANIC_FARM_COLOUR (green(30))
+#define GROUP_ORGANIC_FARM_COST 1000
+#define GROUP_ORGANIC_FARM_COST_MUL 20
+#define GROUP_ORGANIC_FARM_BUL_COST 100
+#define GROUP_ORGANIC_FARM_TECH 0
+#define GROUP_ORGANIC_FARM_FIREC 20
 
-void do_organic_farm(int x, int y);
-void mps_organic_farm(int x, int y);
 
-#endif /* __organic_farm_h__ */

Modified: trunk/src/lincity/modules/parkland.h
===================================================================
--- trunk/src/lincity/modules/parkland.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/parkland.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +1,8 @@
-/* ---------------------------------------------------------------------- *
- * parkland.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define GROUP_PARKLAND_COLOUR (green(31))
+#define GROUP_PARKLAND_COST   1000
+#define GROUP_PARKLAND_COST_MUL 25
+#define GROUP_PARKLAND_BUL_COST   1000
+#define GROUP_PARKLAND_TECH   2
+#define GROUP_PARKLAND_FIREC 1
 
-#ifndef __parkland_h__
-#define __parkland_h__
 
-void do_parkland(int x, int y);
-void mps_parkland(int x, int y);
-
-#endif /* __parkland_h__ */

Modified: trunk/src/lincity/modules/port.cpp
===================================================================
--- trunk/src/lincity/modules/port.cpp	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/port.cpp	2010-07-15 16:19:22 UTC (rev 1591)
@@ -7,6 +7,7 @@
 
 #include "modules.h"
 #include "port.h"
+#include "../transport.h"
 
 static int buy_food(int xt, int yt)
 {

Modified: trunk/src/lincity/modules/port.h
===================================================================
--- trunk/src/lincity/modules/port.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/port.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +1,21 @@
-/* ---------------------------------------------------------------------- *
- * port.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define GROUP_PORT_COLOUR (blue(28))
+#define GROUP_PORT_COST 100000
+#define GROUP_PORT_COST_MUL 2
+#define GROUP_PORT_BUL_COST 1000
+#define GROUP_PORT_TECH 35
+#define GROUP_PORT_FIREC 50
 
-#ifndef __port_h__
-#define __port_h__
+#define PORT_FOOD_RATE    1
+#define PORT_JOBS_RATE    5
+#define PORT_COAL_RATE    50
+#define PORT_ORE_RATE     1
+#define PORT_GOODS_RATE   3
+#define PORT_STEEL_RATE   100
 
-void do_port(int x, int y);
-void mps_port(int x, int y);
+/*
+  These next two control the stuff bought or sold as a % of what's on the
+  transport.  1000=100%  500=50% etc.
+*/
+#define PORT_EXPORT_RATE  500
+#define PORT_IMPORT_RATE  500
 
-#endif /* __port_h__ */

Modified: trunk/src/lincity/modules/pottery.h
===================================================================
--- trunk/src/lincity/modules/pottery.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/pottery.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +1,22 @@
-/* ---------------------------------------------------------------------- *
- * pottery.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define MAX_GOODS_AT_POTTERY     200
+#define POTTERY_ORE_MAKE_GOODS    11
+#define POTTERY_COAL_MAKE_GOODS    2
+#define POTTERY_JOBS              35
+#define MAX_ORE_AT_POTTERY        (POTTERY_ORE_MAKE_GOODS*60)
+#define POTTERY_GET_ORE           (POTTERY_ORE_MAKE_GOODS*20)
+#define MAX_COAL_AT_POTTERY       (POTTERY_COAL_MAKE_GOODS*60)
+#define POTTERY_GET_COAL          (POTTERY_COAL_MAKE_GOODS*21)
+#define MAX_JOBS_AT_POTTERY       (POTTERY_JOBS*20)
+#define POTTERY_GET_JOBS          (POTTERY_JOBS*2)
+#define POTTERY_MADE_GOODS        35
+#define POTTERY_ANIM_SPEED        280
+#define POTTERY_CLOSE_TIME        20
 
-#ifndef __pottery_h__
-#define __pottery_h__
+#define GROUP_POTTERY_COLOUR (red(12))
+#define GROUP_POTTERY_COST   1000
+#define GROUP_POTTERY_COST_MUL 25
+#define GROUP_POTTERY_BUL_COST 1000
+#define GROUP_POTTERY_TECH  0
+#define GROUP_POTTERY_FIREC 50
 
-void do_pottery(int x, int y);
-void mps_pottery(int x, int y);
 
-#endif /* __pottery_h__ */

Modified: trunk/src/lincity/modules/power_line.h
===================================================================
--- trunk/src/lincity/modules/power_line.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/power_line.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +1,8 @@
-/* ---------------------------------------------------------------------- *
- * power_line.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define GROUP_POWER_LINE_COLOUR (yellow(26))
+#define GROUP_POWER_LINE_COST 100
+#define GROUP_POWER_LINE_COST_MUL 2
+#define GROUP_POWER_LINE_BUL_COST 100
+#define GROUP_POWER_LINE_TECH 200
+#define GROUP_POWER_LINE_FIREC 0
 
-#ifndef __power_line_h__
-#define __power_line_h__
 
-void do_power_line(int x, int y);
-void mps_power_line(int x, int y);
-
-#endif /* __power_line_h__ */

Modified: trunk/src/lincity/modules/rail.h
===================================================================
--- trunk/src/lincity/modules/rail.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/rail.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +1 @@
-/* ---------------------------------------------------------------------- *
- * rail.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
 
-#ifndef __rail_h__
-#define __rail_h__
-
-void do_rail(int x, int y);
-void mps_rail(int x, int y);
-
-#endif /* __rail_h__ */

Modified: trunk/src/lincity/modules/recycle.cpp
===================================================================
--- trunk/src/lincity/modules/recycle.cpp	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/recycle.cpp	2010-07-15 16:19:22 UTC (rev 1591)
@@ -7,6 +7,7 @@
 
 #include "modules.h"
 #include "recycle.h"
+#include "../transport.h"
 
 void do_recycle(int x, int y)
 {

Modified: trunk/src/lincity/modules/recycle.h
===================================================================
--- trunk/src/lincity/modules/recycle.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/recycle.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +1,15 @@
-/* ---------------------------------------------------------------------- *
- * recycle.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define MAX_WASTE_AT_RECYCLE 20000
+#define BURN_WASTE_AT_RECYCLE (MAX_WASTE_AT_RECYCLE/200)
+#define MAX_ORE_AT_RECYCLE   (MAX_ORE_ON_RAIL*2)
+#define GOODS_RECYCLED       500
+#define RECYCLE_GOODS_JOBS   (GOODS_RECYCLED/50)
+#define RECYCLE_RUNNING_COST 3
 
-#ifndef __recycle_h__
-#define __recycle_h__
+#define GROUP_RECYCLE_COLOUR   (green(28))
+#define GROUP_RECYCLE_COST    100000
+#define GROUP_RECYCLE_COST_MUL 5
+#define GROUP_RECYCLE_BUL_COST    1000
+#define GROUP_RECYCLE_TECH    232
+#define GROUP_RECYCLE_FIREC 10
 
-void do_recycle(int x, int y);
-void mps_recycle(int x, int y);
 
-#endif /* __recycle_h__ */

Modified: trunk/src/lincity/modules/residence.cpp
===================================================================
--- trunk/src/lincity/modules/residence.cpp	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/residence.cpp	2010-07-15 16:19:22 UTC (rev 1591)
@@ -8,6 +8,7 @@
 #include "modules.h"
 #include "residence.h"
 #include "waterwell.h"
+#include "cricket.h"
 #include <stdlib.h>
 
 void do_residence(int x, int y)

Modified: trunk/src/lincity/modules/residence.h
===================================================================
--- trunk/src/lincity/modules/residence.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/residence.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -7,7 +7,72 @@
 #ifndef __residence_h__
 #define __residence_h__
 
-void do_residence(int x, int y);
-void mps_residence(int x, int y);
+/* RESIDENCE?_BRM is the birth rate modifier */
+#define RESIDENCE_BASE_BR     100
+#define RESIDENCE_BASE_DR     (68*12)
+#define RESIDENCE_BRM_HEALTH  5
+#define RESIDENCE1_BRM (RESIDENCE_BASE_BR*12)
+#define RESIDENCE2_BRM 0
+#define RESIDENCE3_BRM (RESIDENCE_BASE_BR+RESIDENCE_BASE_BR/4)
+#define RESIDENCE4_BRM (RESIDENCE_BASE_BR*18)
+#define RESIDENCE5_BRM (RESIDENCE_BASE_BR/2)
+#define RESIDENCE6_BRM 0
 
+/* RESIDENCE?_DRM is the death rate modifier */
+/* AL1 unused in ng. computed in residence.cpp 
+#define RESIDENCE1_DRM ((RESIDENCE_BASE_DR*3)/4)
+#define RESIDENCE2_DRM 0
+#define RESIDENCE3_DRM ((RESIDENCE_BASE_DR)/2)
+#define RESIDENCE4_DRM ((RESIDENCE_BASE_DR*3)/4)
+#define RESIDENCE5_DRM ((RESIDENCE_BASE_DR)/4)
+#define RESIDENCE6_DRM ((RESIDENCE_BASE_DR)/4)
+*/
+
+/* RESIDENCE_PPM is the people_pool mobitily. Higher number=less mobile. */
+#define RESIDENCE_PPM   20
+
+#define GROUP_RESIDENCE_LL_COLOUR (cyan(24))
+#define GROUP_RESIDENCE_LL_COST 1000
+#define GROUP_RESIDENCE_LL_COST_MUL 25
+#define GROUP_RESIDENCE_LL_BUL_COST 1000
+#define GROUP_RESIDENCE_LL_TECH 0
+#define GROUP_RESIDENCE_LL_FIREC 75
+
+#define GROUP_RESIDENCE_ML_COLOUR (cyan(24))
+#define GROUP_RESIDENCE_ML_COST 2000
+#define GROUP_RESIDENCE_ML_COST_MUL 25
+#define GROUP_RESIDENCE_ML_BUL_COST 1000
+#define GROUP_RESIDENCE_ML_TECH 0
+#define GROUP_RESIDENCE_ML_FIREC 75
+
+#define GROUP_RESIDENCE_HL_COLOUR (cyan(24))
+#define GROUP_RESIDENCE_HL_COST 4000
+#define GROUP_RESIDENCE_HL_COST_MUL 25
+#define GROUP_RESIDENCE_HL_BUL_COST 1000
+#define GROUP_RESIDENCE_HL_TECH 0
+#define GROUP_RESIDENCE_HL_FIREC 75
+
+#define GROUP_RESIDENCE_LH_COLOUR (cyan(24))
+#define GROUP_RESIDENCE_LH_COST 800
+#define GROUP_RESIDENCE_LH_COST_MUL 25
+#define GROUP_RESIDENCE_LH_BUL_COST 1000
+#define GROUP_RESIDENCE_LH_TECH 0       /* ?? */
+#define GROUP_RESIDENCE_LH_FIREC 75
+
+#define GROUP_RESIDENCE_MH_COLOUR (cyan(24))
+#define GROUP_RESIDENCE_MH_COST 1600
+#define GROUP_RESIDENCE_MH_COST_MUL 25
+#define GROUP_RESIDENCE_MH_BUL_COST 1000
+#define GROUP_RESIDENCE_MH_TECH 0
+#define GROUP_RESIDENCE_MH_FIREC 75
+
+#define GROUP_RESIDENCE_HH_COLOUR (cyan(24))
+#define GROUP_RESIDENCE_HH_COST 3200
+#define GROUP_RESIDENCE_HH_COST_MUL 25
+#define GROUP_RESIDENCE_HH_BUL_COST 1000
+#define GROUP_RESIDENCE_HH_TECH 0
+#define GROUP_RESIDENCE_HH_FIREC 75
+
+
+
 #endif /* __residence_h__ */

Modified: trunk/src/lincity/modules/road.h
===================================================================
--- trunk/src/lincity/modules/road.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/road.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +0,0 @@
-/* ---------------------------------------------------------------------- *
- * road.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
-
-#ifndef __road_h__
-#define __road_h__
-
-void do_road(int x, int y);
-void mps_road(int x, int y);
-
-#endif /* __road_h__ */

Modified: trunk/src/lincity/modules/rocket_pad.h
===================================================================
--- trunk/src/lincity/modules/rocket_pad.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/rocket_pad.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,15 +1,21 @@
-/* ---------------------------------------------------------------------- *
- * rocket_pad.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define GROUP_ROCKET_COLOUR   (magenta(20))
+#define GROUP_ROCKET_COST     700000
+#define GROUP_ROCKET_COST_MUL 2
+#define GROUP_ROCKET_BUL_COST     1
+#define GROUP_ROCKET_TECH     750
+#define GROUP_ROCKET_FIREC 0
 
-#ifndef __rocket_pad_h__
-#define __rocket_pad_h__
+#define ROCKET_PAD_JOBS         1000
+#define ROCKET_PAD_JOBS_STORE   10000
+#define ROCKET_PAD_GOODS        10000
+#define ROCKET_PAD_GOODS_STORE  500000
+#define ROCKET_PAD_STEEL	500
+#define ROCKET_PAD_STEEL_STORE  12000
+#define ROCKET_PAD_RUNNING_COST 200
+#define ROCKET_PAD_LAUNCH       100
+#define ROCKET_ANIMATION_SPEED  450
+#define ROCKET_LAUNCH_BAD       1
+#define ROCKET_LAUNCH_GOOD      2
+#define ROCKET_LAUNCH_EVAC      3
 
-void do_rocket_pad(int x, int y);
-void launch_rocket(int x, int y);
-void mps_rocket(int x, int y);
 
-#endif /* __rocket_pad_h__ */

Modified: trunk/src/lincity/modules/school.h
===================================================================
--- trunk/src/lincity/modules/school.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/school.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +1,16 @@
-/* ---------------------------------------------------------------------- *
- * school.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define GROUP_SCHOOL_COLOUR (white(15))
+#define GROUP_SCHOOL_COST   10000
+#define GROUP_SCHOOL_COST_MUL 25
+#define GROUP_SCHOOL_BUL_COST   10000
+#define GROUP_SCHOOL_TECH   1
+#define GROUP_SCHOOL_FIREC 40
 
-#ifndef __school_h__
-#define __school_h__
+#define SCHOOL_JOBS        50
+#define SCHOOL_GOODS       75
+#define JOBS_MAKE_TECH_SCHOOL  200
+#define GOODS_MAKE_TECH_SCHOOL  75
+#define TECH_MADE_BY_SCHOOL    2
+#define MAX_JOBS_AT_SCHOOL     400
+#define MAX_GOODS_AT_SCHOOL    200
+#define SCHOOL_RUNNING_COST    2
 
-void do_school(int x, int y);
-void mps_school(int x, int y);
-
-#endif /* __school_h__ */

Modified: trunk/src/lincity/modules/shanty.cpp
===================================================================
--- trunk/src/lincity/modules/shanty.cpp	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/shanty.cpp	2010-07-15 16:19:22 UTC (rev 1591)
@@ -8,6 +8,7 @@
 #include "modules.h"
 //#include "mouse.h" /* XXX: fire_area! */
 #include "shanty.h"
+#include "commune.h"
 
 extern void set_mappoint(int x, int y, short selected_type);
 

Modified: trunk/src/lincity/modules/shanty.h
===================================================================
--- trunk/src/lincity/modules/shanty.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/shanty.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,16 +1,17 @@
-/* ---------------------------------------------------------------------- *
- * shanty.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define GROUP_SHANTY_COLOUR    (red(22))
+#define GROUP_SHANTY_COST   0   /* Unused */
+#define GROUP_SHANTY_COST_MUL   1       /* Unused */
+#define GROUP_SHANTY_BUL_COST  100000
+#define GROUP_SHANTY_TECH   0   /* Unused */
+#define GROUP_SHANTY_FIREC     25
+#define SHANTY_MIN_PP     150
+#define SHANTY_POP        50
+#define DAYS_BETWEEN_SHANTY (NUMOF_DAYS_IN_MONTH * 1)
+#define SHANTY_GET_FOOD   50
+#define SHANTY_GET_JOBS   5
+#define SHANTY_GET_GOODS  50
+#define SHANTY_GET_COAL   1
+#define SHANTY_GET_ORE    10
+#define SHANTY_GET_STEEL  1
 
-#ifndef __shanty_h__
-#define __shanty_h__
 
-void add_a_shanty(void);
-void remove_a_shanty(int x, int y);
-void update_shanty(void);
-void do_shanty(int x, int y);
-
-#endif /* __shanty_h__ */

Modified: trunk/src/lincity/modules/solar_power.h
===================================================================
--- trunk/src/lincity/modules/solar_power.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/solar_power.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +1,10 @@
-/* ---------------------------------------------------------------------- *
- * solar_power.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define GROUP_SOLAR_POWER_COLOUR (yellow(22))
+#define GROUP_SOLAR_POWER_COST 500000
+#define GROUP_SOLAR_POWER_COST_MUL 5
+#define GROUP_SOLAR_POWER_BUL_COST 100000
+#define GROUP_SOLAR_POWER_TECH 500
+#define GROUP_SOLAR_POWER_FIREC 33
+#define SOLAR_POWER_JOBS 50
+#define POWERS_SOLAR_OUTPUT 1800
 
-#ifndef __solar_power_h__
-#define __solar_power_h__
 
-void do_power_source_solar(int x, int y);
-void mps_solar_power(int x, int y);
-
-#endif /* __solar_power_h__ */

Modified: trunk/src/lincity/modules/substation.h
===================================================================
--- trunk/src/lincity/modules/substation.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/substation.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,18 +1,8 @@
-/* ---------------------------------------------------------------------- *
- * substation.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define GROUP_SUBSTATION_COLOUR (yellow(18))
+#define GROUP_SUBSTATION_COST 500
+#define GROUP_SUBSTATION_COST_MUL 2
+#define GROUP_SUBSTATION_BUL_COST 100
+#define GROUP_SUBSTATION_TECH 200
+#define GROUP_SUBSTATION_FIREC 50
 
-#ifndef __substation_h__
-#define __substation_h__
 
-void do_power_substation(int x, int y);
-int add_a_substation(int x, int y);
-void remove_a_substation(int x, int y);
-void shuffle_substations(void);
-
-void mps_substation(int x, int y);
-
-#endif /* __substation_h__ */

Modified: trunk/src/lincity/modules/tip.h
===================================================================
--- trunk/src/lincity/modules/tip.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/tip.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +0,0 @@
-/* ---------------------------------------------------------------------- *
- * tip.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
-
-#ifndef __tip_h__
-#define __tip_h__
-
-void do_tip(int x, int y);
-void mps_tip(int x, int y);
-
-#endif /* __tip_h__ */

Modified: trunk/src/lincity/modules/track.h
===================================================================
--- trunk/src/lincity/modules/track.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/track.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +0,0 @@
-/* ---------------------------------------------------------------------- *
- * track.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
-
-#ifndef __track_h__
-#define __track_h__
-
-void do_track(int x, int y);
-void mps_track(int x, int y);
-
-#endif /* __track_h__ */

Modified: trunk/src/lincity/modules/university.h
===================================================================
--- trunk/src/lincity/modules/university.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/university.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +1,15 @@
-/* ---------------------------------------------------------------------- *
- * university.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define UNIVERSITY_JOBS   250
+#define UNIVERSITY_JOBS_STORE 5000
+#define UNIVERSITY_GOODS  750
+#define UNIVERSITY_GOODS_STORE 7000
+#define UNIVERSITY_RUNNING_COST 23
+#define UNIVERSITY_TECH_MADE    4
 
-#ifndef __university_h__
-#define __university_h__
+#define GROUP_UNIVERSITY_COLOUR (blue(22))
+#define GROUP_UNIVERSITY_COST 20000
+#define GROUP_UNIVERSITY_COST_MUL 25
+#define GROUP_UNIVERSITY_BUL_COST 20000
+#define GROUP_UNIVERSITY_TECH 150
+#define GROUP_UNIVERSITY_FIREC 40
 
-void do_university(int x, int y);
-void mps_university(int x, int y);
 
-#endif /* __university_h__ */

Modified: trunk/src/lincity/modules/water.h
===================================================================
--- trunk/src/lincity/modules/water.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/water.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,13 +0,0 @@
-/* ---------------------------------------------------------------------- *
- * water.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
-
-#ifndef __water_h__
-#define __water_h__
-
-void mps_water(int x, int y);
-
-#endif /* __water_h__ */

Modified: trunk/src/lincity/modules/waterwell.h
===================================================================
--- trunk/src/lincity/modules/waterwell.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/waterwell.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,16 +1,8 @@
-/* ---------------------------------------------------------------------- *
- * water.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define GROUP_WATERWELL_COLOUR    (blue(31))
+#define GROUP_WATERWELL_COST      1
+#define GROUP_WATERWELL_COST_MUL 2
+#define GROUP_WATERWELL_BUL_COST      1
+#define GROUP_WATERWELL_TECH      0
+#define GROUP_WATERWELL_FIREC 0
 
-#ifndef __waterwell_h__
-#define __waterwell_h__
 
-#undef DEBUG_WATERWELL
-
-void do_waterwell_cover(int x, int y);
-void mps_waterwell(int x, int y);
-
-#endif /* __waterwell_h__ */

Modified: trunk/src/lincity/modules/windmill.h
===================================================================
--- trunk/src/lincity/modules/windmill.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/modules/windmill.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -1,14 +1,17 @@
-/* ---------------------------------------------------------------------- *
- * windmill.h
- * This file is part of lincity.
- * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
- * (c) Corey Keasling, 2004
- * ---------------------------------------------------------------------- */
+#define GROUP_WINDMILL_COLOUR (green(25))
+#define GROUP_WINDMILL_COST   20000
+#define GROUP_WINDMILL_COST_MUL 25
+#define GROUP_WINDMILL_BUL_COST   1000
+#define GROUP_WINDMILL_TECH   30
+#define GROUP_WINDMILL_FIREC  10
 
-#ifndef __windmill_h__
-#define __windmill_h__
+#define WINDMILL_POWER      450
+#define WINDMILL_JOBS       10
+/* WINDMILL_RCOST is days per quid */
+#define WINDMILL_RCOST      3
+#define ANTIQUE_WINDMILL_ANIM_SPEED 160
+#define MODERN_WINDMILL_ANIM_SPEED 120
 
-void do_windmill(int x, int y);
-void mps_windmill(int x, int y);
+#define MODERN_WINDMILL_TECH 450000
 
-#endif /* __windmill_h__ */
+

Modified: trunk/src/lincity/old_ldsvguts.cpp
===================================================================
--- trunk/src/lincity/old_ldsvguts.cpp	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/old_ldsvguts.cpp	2010-07-15 16:19:22 UTC (rev 1591)
@@ -17,6 +17,7 @@
 #include "stats.h"
 #include "init_game.h"
 #include "all_buildings.h"
+#include "modules/all_modules.h"
 
 #include <fcntl.h>
 #include <sys/types.h>

Modified: trunk/src/lincity/power.cpp
===================================================================
--- trunk/src/lincity/power.cpp	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/power.cpp	2010-07-15 16:19:22 UTC (rev 1591)
@@ -19,6 +19,7 @@
 #include "gui_interface/dialbox_interface.h"
 #include "all_buildings.h"
 #include "range.h"
+#include "modules/windmill.h"
 
 extern void ok_dial_box(const char *, int, const char *);
 

Modified: trunk/src/lincity/simulate.cpp
===================================================================
--- trunk/src/lincity/simulate.cpp	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/simulate.cpp	2010-07-15 16:19:22 UTC (rev 1591)
@@ -28,6 +28,8 @@
 #endif
 */
 
+#include "tinygettext/gettext.hpp"
+
 #include "init_game.h"
 #include "simulate.h"
 #include "gui_interface/shared_globals.h"
@@ -38,10 +40,12 @@
 #include "power.h"
 #include "stats.h"
 #include "gui_interface/pbar_interface.h"
+#include "modules/modules_interfaces.h"
 #include "modules/all_modules.h"
 #include "transport.h"
 #include "all_buildings.h"
 #include "sustainable.h"
+#include "engine.h"
 
 /* extern resources */
 extern void print_total_money(void);

Modified: trunk/src/lincity/transport.cpp
===================================================================
--- trunk/src/lincity/transport.cpp	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/transport.cpp	2010-07-15 16:19:22 UTC (rev 1591)
@@ -12,6 +12,7 @@
 #include "power.h"
 #include "stats.h"              /* for transport_cost */
 #include "all_buildings.h"
+#include "engglobs.h"
 
 static int max_load(int x, int y, int i)
 {
@@ -455,7 +456,7 @@
                     group = MP_GROUP(x + 2, y);
                 switch (group) {
                     case GROUP_WINDMILL:
-                        if (MP_TECH(x + 1, y) < MODERN_WINDMILL_TECH)
+                        if ( ! MP_INFO(x + 1, y).int_2 ) // not a hightech WINDMILL
                             break;
                     case GROUP_POWER_LINE:
                     case GROUP_SOLAR_POWER:
@@ -474,7 +475,7 @@
                     group = MP_GROUP(x, y + 2);
                 switch (group) {
                     case GROUP_WINDMILL:
-                        if (MP_TECH(x, y + 1) < MODERN_WINDMILL_TECH)
+                        if ( ! MP_INFO(x, y + 1).int_2 ) // not a hightech WINDMILL
                             break;
                     case GROUP_POWER_LINE:
                     case GROUP_SOLAR_POWER:

Modified: trunk/src/lincity/transport.h
===================================================================
--- trunk/src/lincity/transport.h	2010-07-08 17:53:03 UTC (rev 1590)
+++ trunk/src/lincity/transport.h	2010-07-15 16:19:22 UTC (rev 1591)
@@ -7,8 +7,6 @@
 #ifndef __TRANSPORT_H__
 #define __TRANSPORT_H__
 
-#include "engglobs.h"
-
 #define XY_IS_TRANSPORT(x,y) \
 ((MP_GROUP(x,y) == GROUP_TRACK) || \
  (MP_GROUP(x,y) == GROUP_ROAD) || \
@@ -20,3 +18,90 @@
 
 void general_transport(int x, int y, int max_waste);
 void connect_transport(int originx, int originy, int w, int h);
+
+#define GROUP_TRACK_COLOUR 32   /* 32 is a brown */
+#define GROUP_TRACK_COST   1
+#define GROUP_TRACK_COST_MUL 25
+#define GROUP_TRACK_BUL_COST   10
+#define GROUP_TRACK_TECH   0
+#define GROUP_TRACK_FIREC  4
+
+#define GROUP_ROAD_COLOUR  (white(18))
+#define GROUP_ROAD_COST    100
+#define GROUP_ROAD_COST_MUL 25
+#define GROUP_ROAD_BUL_COST    50
+#define GROUP_ROAD_TECH    50
+#define GROUP_ROAD_FIREC   4
+
+#define GROUP_RAIL_COLOUR  (magenta(18))
+#define GROUP_RAIL_COST    500
+#define GROUP_RAIL_COST_MUL 10
+#define GROUP_RAIL_BUL_COST    1000
+#define GROUP_RAIL_TECH    180
+#define GROUP_RAIL_FIREC   6
+
+#define MAX_FOOD_ON_TRACK 2048
+#define MAX_FOOD_ON_ROAD (MAX_FOOD_ON_TRACK*4)
+#define MAX_FOOD_ON_RAIL (MAX_FOOD_ON_TRACK*16)
+#define MAX_FOOD_IN_MARKET (MAX_FOOD_ON_RAIL*8)
+
+#define MAX_JOBS_ON_TRACK 1024
+#define MAX_JOBS_ON_ROAD (MAX_JOBS_ON_TRACK*5)
+#define MAX_JOBS_ON_RAIL (MAX_JOBS_ON_TRACK*25)
+#define MAX_JOBS_IN_MARKET (MAX_JOBS_ON_RAIL*3)
+
+#define MAX_COAL_ON_TRACK 64
+#define MAX_COAL_ON_ROAD (MAX_COAL_ON_TRACK*8)
+#define MAX_COAL_ON_RAIL (MAX_COAL_ON_TRACK*64)
+#define MAX_COAL_IN_MARKET (MAX_COAL_ON_RAIL*2)
+
+#define MAX_GOODS_ON_TRACK 2048
+#define MAX_GOODS_ON_ROAD (MAX_GOODS_ON_TRACK*5)
+#define ROAD_GOODS_USED_MASK 0x1f
+#define MAX_GOODS_ON_RAIL (MAX_GOODS_ON_TRACK*25)
+#define RAIL_GOODS_USED_MASK 0xf
+#define MAX_GOODS_IN_MARKET (MAX_GOODS_ON_RAIL*4)
+
+#define MAX_ORE_ON_TRACK 4096
+#define MAX_ORE_ON_ROAD (MAX_ORE_ON_TRACK*4)
+#define MAX_ORE_ON_RAIL (MAX_ORE_ON_TRACK*16)
+#define MAX_ORE_IN_MARKET (MAX_ORE_ON_RAIL*2)
+
+#define MAX_STEEL_ON_TRACK 128
+#define MAX_STEEL_ON_ROAD (MAX_STEEL_ON_TRACK*4)
+#define MAX_STEEL_ON_RAIL (MAX_STEEL_ON_TRACK*16)
+#define RAIL_STEEL_USED_MASK 0x7f
+
+#define MAX_WASTE_ON_TRACK 1024
+#define MAX_WASTE_ON_ROAD (MAX_WASTE_ON_TRACK*5)
+#define MAX_WASTE_ON_RAIL (MAX_WASTE_ON_TRACK*25)
+#define MAX_WASTE_IN_MARKET (MAX_WASTE_ON_RAIL*3)
+#define WASTE_BURN_ON_TRANSPORT 20
+#define TRANSPORT_BURN_WASTE_COUNT 75000
+
+
+
+#define BRIDGE_FACTOR 500 /* a bridge is that much more expensive than the land transport */
+
+#define GROUP_TRACK_BRIDGE_COLOUR 32   /* 32 is a brown */
+#define GROUP_TRACK_BRIDGE_COST   GROUP_TRACK_COST * BRIDGE_FACTOR
+#define GROUP_TRACK_BRIDGE_COST_MUL 2
+#define GROUP_TRACK_BRIDGE_BUL_COST GROUP_TRACK_BUL_COST * BRIDGE_FACTOR
+#define GROUP_TRACK_BRIDGE_TECH   GROUP_TRACK_TECH
+#define GROUP_TRACK_BRIDGE_FIREC  0    /* unused */
+
+#define GROUP_ROAD_BRIDGE_COLOUR  (white(18))
+#define GROUP_ROAD_BRIDGE_COST    GROUP_ROAD_COST * BRIDGE_FACTOR
+#define GROUP_ROAD_BRIDGE_COST_MUL 2
+#define GROUP_ROAD_BRIDGE_BUL_COST GROUP_ROAD_BUL_COST * BRIDGE_FACTOR
+#define GROUP_ROAD_BRIDGE_TECH    GROUP_ROAD_TECH
+#define GROUP_ROAD_BRIDGE_FIREC   0
+
+#define GROUP_RAIL_BRIDGE_COLOUR  (magenta(18))
+#define GROUP_RAIL_BRIDGE_COST    GROUP_RAIL_COST * BRIDGE_FACTOR
+#define GROUP_RAIL_BRIDGE_COST_MUL 2
+#define GROUP_RAIL_BRIDGE_BUL_COST GROUP_RAIL_BUL_COST * BRIDGE_FACTOR
+#define GROUP_RAIL_BRIDGE_TECH    GROUP_RAIL_TECH
+#define GROUP_RAIL_BRIDGE_FIREC   0
+
+



From alainb at mail.berlios.de  Thu Jul 15 18:20:57 2010
From: alainb at mail.berlios.de (alainb at mail.berlios.de)
Date: Thu, 15 Jul 2010 18:20:57 +0200
Subject: [Lincity-ng-commit] r1592 - trunk/src/lincity-ng
Message-ID: <20100715162057.D4F2B480C98@sheep.berlios.de>

Author: alainb
Date: 2010-07-15 18:20:57 +0200 (Thu, 15 Jul 2010)
New Revision: 1592

Modified:
   trunk/src/lincity-ng/ButtonPanel.cpp
   trunk/src/lincity-ng/MiniMap.cpp
   trunk/src/lincity-ng/MpsInterface.cpp
Log:
missing commit in headers reorganisation

Modified: trunk/src/lincity-ng/ButtonPanel.cpp
===================================================================
--- trunk/src/lincity-ng/ButtonPanel.cpp	2010-07-15 16:19:22 UTC (rev 1591)
+++ trunk/src/lincity-ng/ButtonPanel.cpp	2010-07-15 16:20:57 UTC (rev 1592)
@@ -35,6 +35,7 @@
 #include "lincity/lctypes.h"
 #include "lincity/groups.h"
 #include "lincity/all_buildings.h"
+#include "lincity/modules/all_modules.h"
 #include "tinygettext/gettext.hpp"
 
 #include "GameView.hpp"

Modified: trunk/src/lincity-ng/MiniMap.cpp
===================================================================
--- trunk/src/lincity-ng/MiniMap.cpp	2010-07-15 16:19:22 UTC (rev 1591)
+++ trunk/src/lincity-ng/MiniMap.cpp	2010-07-15 16:20:57 UTC (rev 1592)
@@ -35,6 +35,7 @@
 #include "lincity/lctypes.h"
 #include "lincity/range.h"
 #include "lincity/all_buildings.h"
+#include "lincity/transport.h"
 
 #include "gui/callback/Callback.hpp"
 

Modified: trunk/src/lincity-ng/MpsInterface.cpp
===================================================================
--- trunk/src/lincity-ng/MpsInterface.cpp	2010-07-15 16:19:22 UTC (rev 1591)
+++ trunk/src/lincity-ng/MpsInterface.cpp	2010-07-15 16:20:57 UTC (rev 1592)
@@ -29,7 +29,8 @@
 #include "lincity/lclib.h"
 #include "lincity/engglobs.h"
 #include "tinygettext/gettext.hpp"
-#include "lincity/modules/all_modules.h"
+#include "lincity/modules/modules_interfaces.h"
+#include "lincity/lctypes.h"
 #include "MiniMap.hpp"
 
 // implement everything here



From alainb at mail.berlios.de  Thu Jul 15 18:21:04 2010
From: alainb at mail.berlios.de (alainb at mail.berlios.de)
Date: Thu, 15 Jul 2010 18:21:04 +0200
Subject: [Lincity-ng-commit] r1593 - in trunk: doc src/PhysfsStream src/gui
	src/gui/PainterGL src/gui/PainterSDL src/gui/callback
	src/gui_interface src/lincity src/lincity/modules
	src/lincity-ng src/tinygettext src/tools/xmlgettext
Message-ID: <20100715162105.5D01A480C98@sheep.berlios.de>

Author: alainb
Date: 2010-07-15 18:21:04 +0200 (Thu, 15 Jul 2010)
New Revision: 1593

Modified:
   trunk/doc/Doxyfile
   trunk/src/PhysfsStream/PhysfsSDL.cpp
   trunk/src/PhysfsStream/PhysfsSDL.hpp
   trunk/src/PhysfsStream/PhysfsStream.cpp
   trunk/src/PhysfsStream/PhysfsStream.hpp
   trunk/src/gui/Button.cpp
   trunk/src/gui/Button.hpp
   trunk/src/gui/Child.cpp
   trunk/src/gui/Child.hpp
   trunk/src/gui/Color.cpp
   trunk/src/gui/Color.hpp
   trunk/src/gui/Component.cpp
   trunk/src/gui/Component.hpp
   trunk/src/gui/ComponentFactory.cpp
   trunk/src/gui/ComponentFactory.hpp
   trunk/src/gui/ComponentLoader.cpp
   trunk/src/gui/ComponentLoader.hpp
   trunk/src/gui/Desktop.cpp
   trunk/src/gui/Desktop.hpp
   trunk/src/gui/Document.cpp
   trunk/src/gui/Document.hpp
   trunk/src/gui/DocumentElement.hpp
   trunk/src/gui/DocumentImage.cpp
   trunk/src/gui/DocumentImage.hpp
   trunk/src/gui/Event.cpp
   trunk/src/gui/Event.hpp
   trunk/src/gui/FilledRectangle.cpp
   trunk/src/gui/FilledRectangle.hpp
   trunk/src/gui/Filter.cpp
   trunk/src/gui/Filter.hpp
   trunk/src/gui/FontManager.cpp
   trunk/src/gui/FontManager.hpp
   trunk/src/gui/Gradient.cpp
   trunk/src/gui/Gradient.hpp
   trunk/src/gui/Image.cpp
   trunk/src/gui/Image.hpp
   trunk/src/gui/Painter.hpp
   trunk/src/gui/PainterGL/PainterGL.cpp
   trunk/src/gui/PainterGL/PainterGL.hpp
   trunk/src/gui/PainterGL/TextureGL.cpp
   trunk/src/gui/PainterGL/TextureGL.hpp
   trunk/src/gui/PainterGL/TextureManagerGL.cpp
   trunk/src/gui/PainterGL/TextureManagerGL.hpp
   trunk/src/gui/PainterSDL/PainterSDL.cpp
   trunk/src/gui/PainterSDL/PainterSDL.hpp
   trunk/src/gui/PainterSDL/TextureManagerSDL.cpp
   trunk/src/gui/PainterSDL/TextureManagerSDL.hpp
   trunk/src/gui/PainterSDL/TextureSDL.cpp
   trunk/src/gui/PainterSDL/TextureSDL.hpp
   trunk/src/gui/Panel.cpp
   trunk/src/gui/Panel.hpp
   trunk/src/gui/Paragraph.cpp
   trunk/src/gui/Paragraph.hpp
   trunk/src/gui/Rect2D.cpp
   trunk/src/gui/Rect2D.hpp
   trunk/src/gui/ScrollBar.cpp
   trunk/src/gui/ScrollBar.hpp
   trunk/src/gui/ScrollView.cpp
   trunk/src/gui/ScrollView.hpp
   trunk/src/gui/Style.cpp
   trunk/src/gui/Style.hpp
   trunk/src/gui/SwitchComponent.cpp
   trunk/src/gui/SwitchComponent.hpp
   trunk/src/gui/TableLayout.cpp
   trunk/src/gui/TableLayout.hpp
   trunk/src/gui/Texture.hpp
   trunk/src/gui/TextureManager.cpp
   trunk/src/gui/TextureManager.hpp
   trunk/src/gui/TooltipManager.cpp
   trunk/src/gui/TooltipManager.hpp
   trunk/src/gui/Vector2.hpp
   trunk/src/gui/Window.cpp
   trunk/src/gui/Window.hpp
   trunk/src/gui/XmlReader.cpp
   trunk/src/gui/XmlReader.hpp
   trunk/src/gui/callback/Callback.hpp
   trunk/src/gui/callback/CallbackBase.hpp
   trunk/src/gui/callback/Signal.hpp
   trunk/src/gui_interface/dialbox_interface.h
   trunk/src/gui_interface/mps.h
   trunk/src/gui_interface/pbar_interface.h
   trunk/src/gui_interface/readpng.h
   trunk/src/gui_interface/screen_interface.h
   trunk/src/gui_interface/shared_globals.h
   trunk/src/lincity-ng/ButtonInterface.cpp
   trunk/src/lincity-ng/ButtonPanel.cpp
   trunk/src/lincity-ng/ButtonPanel.hpp
   trunk/src/lincity-ng/CheckButton.cpp
   trunk/src/lincity-ng/CheckButton.hpp
   trunk/src/lincity-ng/Config.cpp
   trunk/src/lincity-ng/Config.hpp
   trunk/src/lincity-ng/Debug.cpp
   trunk/src/lincity-ng/Debug.hpp
   trunk/src/lincity-ng/Dialog.cpp
   trunk/src/lincity-ng/Dialog.hpp
   trunk/src/lincity-ng/EconomyGraph.cpp
   trunk/src/lincity-ng/EconomyGraph.hpp
   trunk/src/lincity-ng/ErrorInterface.cpp
   trunk/src/lincity-ng/ErrorInterface.hpp
   trunk/src/lincity-ng/Game.cpp
   trunk/src/lincity-ng/Game.hpp
   trunk/src/lincity-ng/GameView.cpp
   trunk/src/lincity-ng/GameView.hpp
   trunk/src/lincity-ng/HelpWindow.cpp
   trunk/src/lincity-ng/HelpWindow.hpp
   trunk/src/lincity-ng/MainLincity.cpp
   trunk/src/lincity-ng/MainLincity.hpp
   trunk/src/lincity-ng/MainMenu.cpp
   trunk/src/lincity-ng/MainMenu.hpp
   trunk/src/lincity-ng/MapEdit.cpp
   trunk/src/lincity-ng/MapEdit.hpp
   trunk/src/lincity-ng/MapPoint.hpp
   trunk/src/lincity-ng/MiniMap.cpp
   trunk/src/lincity-ng/MiniMap.hpp
   trunk/src/lincity-ng/Mps.cpp
   trunk/src/lincity-ng/Mps.hpp
   trunk/src/lincity-ng/MpsInterface.cpp
   trunk/src/lincity-ng/PBar.cpp
   trunk/src/lincity-ng/PBar.hpp
   trunk/src/lincity-ng/PbarInterface.cpp
   trunk/src/lincity-ng/ReadPngInterface.cpp
   trunk/src/lincity-ng/ScreenInterface.cpp
   trunk/src/lincity-ng/ScreenInterface.hpp
   trunk/src/lincity-ng/Sound.cpp
   trunk/src/lincity-ng/Sound.hpp
   trunk/src/lincity-ng/TimerInterface.cpp
   trunk/src/lincity-ng/TimerInterface.hpp
   trunk/src/lincity-ng/Util.cpp
   trunk/src/lincity-ng/Util.hpp
   trunk/src/lincity-ng/binreloc.c
   trunk/src/lincity-ng/binreloc.h
   trunk/src/lincity-ng/main.cpp
   trunk/src/lincity-ng/main.hpp
   trunk/src/lincity-ng/readdir.cpp
   trunk/src/lincity-ng/readdir.hpp
   trunk/src/lincity/all_buildings.h
   trunk/src/lincity/confw32.h
   trunk/src/lincity/engglobs.cpp
   trunk/src/lincity/engglobs.h
   trunk/src/lincity/engine.cpp
   trunk/src/lincity/engine.h
   trunk/src/lincity/fileutil.cpp
   trunk/src/lincity/fileutil.h
   trunk/src/lincity/groups.h
   trunk/src/lincity/init_game.cpp
   trunk/src/lincity/init_game.h
   trunk/src/lincity/lc_locale.cpp
   trunk/src/lincity/lc_locale.h
   trunk/src/lincity/lcconfig.h
   trunk/src/lincity/lclib.cpp
   trunk/src/lincity/lclib.h
   trunk/src/lincity/lcstring.h
   trunk/src/lincity/lctypes.h
   trunk/src/lincity/lin-city.h
   trunk/src/lincity/lintypes.cpp
   trunk/src/lincity/lintypes.h
   trunk/src/lincity/loadsave.cpp
   trunk/src/lincity/loadsave.h
   trunk/src/lincity/modules/all_modules.h
   trunk/src/lincity/modules/blacksmith.cpp
   trunk/src/lincity/modules/blacksmith.h
   trunk/src/lincity/modules/coal_power.cpp
   trunk/src/lincity/modules/coal_power.h
   trunk/src/lincity/modules/coalmine.cpp
   trunk/src/lincity/modules/coalmine.h
   trunk/src/lincity/modules/commune.cpp
   trunk/src/lincity/modules/commune.h
   trunk/src/lincity/modules/cricket.cpp
   trunk/src/lincity/modules/cricket.h
   trunk/src/lincity/modules/fire.cpp
   trunk/src/lincity/modules/fire.h
   trunk/src/lincity/modules/firestation.cpp
   trunk/src/lincity/modules/firestation.h
   trunk/src/lincity/modules/health_centre.cpp
   trunk/src/lincity/modules/health_centre.h
   trunk/src/lincity/modules/heavy_industry.cpp
   trunk/src/lincity/modules/heavy_industry.h
   trunk/src/lincity/modules/light_industry.cpp
   trunk/src/lincity/modules/light_industry.h
   trunk/src/lincity/modules/market.cpp
   trunk/src/lincity/modules/market.h
   trunk/src/lincity/modules/mill.cpp
   trunk/src/lincity/modules/mill.h
   trunk/src/lincity/modules/modules.h
   trunk/src/lincity/modules/modules_interfaces.h
   trunk/src/lincity/modules/monument.cpp
   trunk/src/lincity/modules/monument.h
   trunk/src/lincity/modules/oremine.cpp
   trunk/src/lincity/modules/oremine.h
   trunk/src/lincity/modules/organic_farm.cpp
   trunk/src/lincity/modules/organic_farm.h
   trunk/src/lincity/modules/parkland.cpp
   trunk/src/lincity/modules/parkland.h
   trunk/src/lincity/modules/port.cpp
   trunk/src/lincity/modules/port.h
   trunk/src/lincity/modules/pottery.cpp
   trunk/src/lincity/modules/pottery.h
   trunk/src/lincity/modules/power_line.cpp
   trunk/src/lincity/modules/power_line.h
   trunk/src/lincity/modules/rail.cpp
   trunk/src/lincity/modules/rail.h
   trunk/src/lincity/modules/recycle.cpp
   trunk/src/lincity/modules/recycle.h
   trunk/src/lincity/modules/residence.cpp
   trunk/src/lincity/modules/residence.h
   trunk/src/lincity/modules/road.cpp
   trunk/src/lincity/modules/rocket_pad.cpp
   trunk/src/lincity/modules/rocket_pad.h
   trunk/src/lincity/modules/school.cpp
   trunk/src/lincity/modules/school.h
   trunk/src/lincity/modules/shanty.cpp
   trunk/src/lincity/modules/shanty.h
   trunk/src/lincity/modules/solar_power.cpp
   trunk/src/lincity/modules/solar_power.h
   trunk/src/lincity/modules/substation.cpp
   trunk/src/lincity/modules/substation.h
   trunk/src/lincity/modules/tip.cpp
   trunk/src/lincity/modules/track.cpp
   trunk/src/lincity/modules/university.cpp
   trunk/src/lincity/modules/university.h
   trunk/src/lincity/modules/water.cpp
   trunk/src/lincity/modules/waterwell.cpp
   trunk/src/lincity/modules/waterwell.h
   trunk/src/lincity/modules/windmill.cpp
   trunk/src/lincity/modules/windmill.h
   trunk/src/lincity/old_ldsvguts.cpp
   trunk/src/lincity/old_ldsvguts.h
   trunk/src/lincity/power.cpp
   trunk/src/lincity/power.h
   trunk/src/lincity/range.h
   trunk/src/lincity/simulate.cpp
   trunk/src/lincity/simulate.h
   trunk/src/lincity/stats.cpp
   trunk/src/lincity/stats.h
   trunk/src/lincity/sustainable.h
   trunk/src/lincity/transport.cpp
   trunk/src/lincity/transport.h
   trunk/src/tinygettext/TinyGetText.cpp
   trunk/src/tinygettext/TinyGetText.hpp
   trunk/src/tinygettext/findlocale.cpp
   trunk/src/tinygettext/findlocale.hpp
   trunk/src/tinygettext/gettext.hpp
   trunk/src/tools/xmlgettext/XmlReader.cpp
   trunk/src/tools/xmlgettext/XmlReader.hpp
   trunk/src/tools/xmlgettext/main.cpp
Log:
Doxygen : brutal configuration and tiny fixes in doxygen comments in order to have _all_ sources documented

Modified: trunk/doc/Doxyfile
===================================================================
--- trunk/doc/Doxyfile	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/doc/Doxyfile	2010-07-15 16:21:04 UTC (rev 1593)
@@ -1,4 +1,4 @@
-# Doxyfile 1.5.3
+# Doxyfile 1.6.1
 
 # This file describes the settings to be used by the documentation system
 # doxygen (www.doxygen.org) for a project
@@ -14,198 +14,215 @@
 # Project related configuration options
 #---------------------------------------------------------------------------
 
-# This tag specifies the encoding used for all characters in the config file that 
-# follow. The default is UTF-8 which is also the encoding used for all text before 
-# the first occurrence of this tag. Doxygen uses libiconv (or the iconv built into 
-# libc) for the transcoding. See http://www.gnu.org/software/libiconv for the list of 
-# possible encodings.
+# This tag specifies the encoding used for all characters in the config file
+# that follow. The default is UTF-8 which is also the encoding used for all
+# text before the first occurrence of this tag. Doxygen uses libiconv (or the
+# iconv built into libc) for the transcoding. See
+# http://www.gnu.org/software/libiconv for the list of possible encodings.
 
 DOXYFILE_ENCODING      = UTF-8
 
-# The PROJECT_NAME tag is a single word (or a sequence of words surrounded 
+# The PROJECT_NAME tag is a single word (or a sequence of words surrounded
 # by quotes) that should identify the project.
 
 PROJECT_NAME           = Lincity-NG
 
-# The PROJECT_NUMBER tag can be used to enter a project or revision number. 
-# This could be handy for archiving the generated documentation or 
+# The PROJECT_NUMBER tag can be used to enter a project or revision number.
+# This could be handy for archiving the generated documentation or
 # if some version control system is used.
 
-PROJECT_NUMBER         = 
+PROJECT_NUMBER         =
 
-# The OUTPUT_DIRECTORY tag is used to specify the (relative or absolute) 
-# base path where the generated documentation will be put. 
-# If a relative path is entered, it will be relative to the location 
+# The OUTPUT_DIRECTORY tag is used to specify the (relative or absolute)
+# base path where the generated documentation will be put.
+# If a relative path is entered, it will be relative to the location
 # where doxygen was started. If left blank the current directory will be used.
 
 OUTPUT_DIRECTORY       = doc/doxygen
 
-# If the CREATE_SUBDIRS tag is set to YES, then doxygen will create 
-# 4096 sub-directories (in 2 levels) under the output directory of each output 
-# format and will distribute the generated files over these directories. 
-# Enabling this option can be useful when feeding doxygen a huge amount of 
-# source files, where putting all generated files in the same directory would 
+# If the CREATE_SUBDIRS tag is set to YES, then doxygen will create
+# 4096 sub-directories (in 2 levels) under the output directory of each output
+# format and will distribute the generated files over these directories.
+# Enabling this option can be useful when feeding doxygen a huge amount of
+# source files, where putting all generated files in the same directory would
 # otherwise cause performance problems for the file system.
 
-CREATE_SUBDIRS         = NO
+CREATE_SUBDIRS         = YES
 
-# The OUTPUT_LANGUAGE tag is used to specify the language in which all 
-# documentation generated by doxygen is written. Doxygen will use this 
-# information to generate all constant output in the proper language. 
-# The default language is English, other supported languages are: 
-# Afrikaans, Arabic, Brazilian, Catalan, Chinese, Chinese-Traditional, 
-# Croatian, Czech, Danish, Dutch, Finnish, French, German, Greek, Hungarian, 
-# Italian, Japanese, Japanese-en (Japanese with English messages), Korean, 
-# Korean-en, Lithuanian, Norwegian, Polish, Portuguese, Romanian, Russian, 
-# Serbian, Slovak, Slovene, Spanish, Swedish, and Ukrainian.
+# The OUTPUT_LANGUAGE tag is used to specify the language in which all
+# documentation generated by doxygen is written. Doxygen will use this
+# information to generate all constant output in the proper language.
+# The default language is English, other supported languages are:
+# Afrikaans, Arabic, Brazilian, Catalan, Chinese, Chinese-Traditional,
+# Croatian, Czech, Danish, Dutch, Esperanto, Farsi, Finnish, French, German,
+# Greek, Hungarian, Italian, Japanese, Japanese-en (Japanese with English
+# messages), Korean, Korean-en, Lithuanian, Norwegian, Macedonian, Persian,
+# Polish, Portuguese, Romanian, Russian, Serbian, Serbian-Cyrilic, Slovak,
+# Slovene, Spanish, Swedish, Ukrainian, and Vietnamese.
 
 OUTPUT_LANGUAGE        = English
 
-# If the BRIEF_MEMBER_DESC tag is set to YES (the default) Doxygen will 
-# include brief member descriptions after the members that are listed in 
-# the file and class documentation (similar to JavaDoc). 
+# If the BRIEF_MEMBER_DESC tag is set to YES (the default) Doxygen will
+# include brief member descriptions after the members that are listed in
+# the file and class documentation (similar to JavaDoc).
 # Set to NO to disable this.
 
 BRIEF_MEMBER_DESC      = YES
 
-# If the REPEAT_BRIEF tag is set to YES (the default) Doxygen will prepend 
-# the brief description of a member or function before the detailed description. 
-# Note: if both HIDE_UNDOC_MEMBERS and BRIEF_MEMBER_DESC are set to NO, the 
+# If the REPEAT_BRIEF tag is set to YES (the default) Doxygen will prepend
+# the brief description of a member or function before the detailed description.
+# Note: if both HIDE_UNDOC_MEMBERS and BRIEF_MEMBER_DESC are set to NO, the
 # brief descriptions will be completely suppressed.
 
 REPEAT_BRIEF           = YES
 
-# This tag implements a quasi-intelligent brief description abbreviator 
-# that is used to form the text in various listings. Each string 
-# in this list, if found as the leading text of the brief description, will be 
-# stripped from the text and the result after processing the whole list, is 
-# used as the annotated text. Otherwise, the brief description is used as-is. 
-# If left blank, the following values are used ("$name" is automatically 
-# replaced with the name of the entity): "The $name class" "The $name widget" 
-# "The $name file" "is" "provides" "specifies" "contains" 
+# This tag implements a quasi-intelligent brief description abbreviator
+# that is used to form the text in various listings. Each string
+# in this list, if found as the leading text of the brief description, will be
+# stripped from the text and the result after processing the whole list, is
+# used as the annotated text. Otherwise, the brief description is used as-is.
+# If left blank, the following values are used ("$name" is automatically
+# replaced with the name of the entity): "The $name class" "The $name widget"
+# "The $name file" "is" "provides" "specifies" "contains"
 # "represents" "a" "an" "the"
 
-ABBREVIATE_BRIEF       = 
+ABBREVIATE_BRIEF       =
 
-# If the ALWAYS_DETAILED_SEC and REPEAT_BRIEF tags are both set to YES then 
-# Doxygen will generate a detailed section even if there is only a brief 
+# If the ALWAYS_DETAILED_SEC and REPEAT_BRIEF tags are both set to YES then
+# Doxygen will generate a detailed section even if there is only a brief
 # description.
 
 ALWAYS_DETAILED_SEC    = NO
 
-# If the INLINE_INHERITED_MEMB tag is set to YES, doxygen will show all 
-# inherited members of a class in the documentation of that class as if those 
-# members were ordinary class members. Constructors, destructors and assignment 
+# If the INLINE_INHERITED_MEMB tag is set to YES, doxygen will show all
+# inherited members of a class in the documentation of that class as if those
+# members were ordinary class members. Constructors, destructors and assignment
 # operators of the base classes will not be shown.
 
 INLINE_INHERITED_MEMB  = NO
 
-# If the FULL_PATH_NAMES tag is set to YES then Doxygen will prepend the full 
-# path before files name in the file list and in the header files. If set 
+# If the FULL_PATH_NAMES tag is set to YES then Doxygen will prepend the full
+# path before files name in the file list and in the header files. If set
 # to NO the shortest path that makes the file name unique will be used.
 
 FULL_PATH_NAMES        = YES
 
-# If the FULL_PATH_NAMES tag is set to YES then the STRIP_FROM_PATH tag 
-# can be used to strip a user-defined part of the path. Stripping is 
-# only done if one of the specified strings matches the left-hand part of 
-# the path. The tag can be used to show relative paths in the file list. 
-# If left blank the directory from which doxygen is run is used as the 
+# If the FULL_PATH_NAMES tag is set to YES then the STRIP_FROM_PATH tag
+# can be used to strip a user-defined part of the path. Stripping is
+# only done if one of the specified strings matches the left-hand part of
+# the path. The tag can be used to show relative paths in the file list.
+# If left blank the directory from which doxygen is run is used as the
 # path to strip.
 
-STRIP_FROM_PATH        = 
+STRIP_FROM_PATH        = "src/"
 
-# The STRIP_FROM_INC_PATH tag can be used to strip a user-defined part of 
-# the path mentioned in the documentation of a class, which tells 
-# the reader which header file to include in order to use a class. 
-# If left blank only the name of the header file containing the class 
-# definition is used. Otherwise one should specify the include paths that 
+# The STRIP_FROM_INC_PATH tag can be used to strip a user-defined part of
+# the path mentioned in the documentation of a class, which tells
+# the reader which header file to include in order to use a class.
+# If left blank only the name of the header file containing the class
+# definition is used. Otherwise one should specify the include paths that
 # are normally passed to the compiler using the -I flag.
 
-STRIP_FROM_INC_PATH    = 
+STRIP_FROM_INC_PATH    = "src/"
 
-# If the SHORT_NAMES tag is set to YES, doxygen will generate much shorter 
-# (but less readable) file names. This can be useful is your file systems 
+# If the SHORT_NAMES tag is set to YES, doxygen will generate much shorter
+# (but less readable) file names. This can be useful is your file systems
 # doesn't support long names like on DOS, Mac, or CD-ROM.
 
 SHORT_NAMES            = NO
 
-# If the JAVADOC_AUTOBRIEF tag is set to YES then Doxygen 
-# will interpret the first line (until the first dot) of a JavaDoc-style 
-# comment as the brief description. If set to NO, the JavaDoc 
-# comments will behave just like regular Qt-style comments 
+# If the JAVADOC_AUTOBRIEF tag is set to YES then Doxygen
+# will interpret the first line (until the first dot) of a JavaDoc-style
+# comment as the brief description. If set to NO, the JavaDoc
+# comments will behave just like regular Qt-style comments
 # (thus requiring an explicit @brief command for a brief description.)
 
 JAVADOC_AUTOBRIEF      = NO
 
-# If the QT_AUTOBRIEF tag is set to YES then Doxygen will 
-# interpret the first line (until the first dot) of a Qt-style 
-# comment as the brief description. If set to NO, the comments 
-# will behave just like regular Qt-style comments (thus requiring 
+# If the QT_AUTOBRIEF tag is set to YES then Doxygen will
+# interpret the first line (until the first dot) of a Qt-style
+# comment as the brief description. If set to NO, the comments
+# will behave just like regular Qt-style comments (thus requiring
 # an explicit \brief command for a brief description.)
 
 QT_AUTOBRIEF           = NO
 
-# The MULTILINE_CPP_IS_BRIEF tag can be set to YES to make Doxygen 
-# treat a multi-line C++ special comment block (i.e. a block of //! or /// 
-# comments) as a brief description. This used to be the default behaviour. 
-# The new default is to treat a multi-line C++ comment block as a detailed 
+# The MULTILINE_CPP_IS_BRIEF tag can be set to YES to make Doxygen
+# treat a multi-line C++ special comment block (i.e. a block of //! or ///
+# comments) as a brief description. This used to be the default behaviour.
+# The new default is to treat a multi-line C++ comment block as a detailed
 # description. Set this tag to YES if you prefer the old behaviour instead.
 
 MULTILINE_CPP_IS_BRIEF = NO
 
-# If the DETAILS_AT_TOP tag is set to YES then Doxygen 
-# will output the detailed description near the top, like JavaDoc.
-# If set to NO, the detailed description appears after the member 
-# documentation.
-
-DETAILS_AT_TOP         = YES
-
-# If the INHERIT_DOCS tag is set to YES (the default) then an undocumented 
-# member inherits the documentation from any documented member that it 
+# If the INHERIT_DOCS tag is set to YES (the default) then an undocumented
+# member inherits the documentation from any documented member that it
 # re-implements.
 
 INHERIT_DOCS           = YES
 
-# If the SEPARATE_MEMBER_PAGES tag is set to YES, then doxygen will produce 
-# a new page for each member. If set to NO, the documentation of a member will 
+# If the SEPARATE_MEMBER_PAGES tag is set to YES, then doxygen will produce
+# a new page for each member. If set to NO, the documentation of a member will
 # be part of the file/class/namespace that contains it.
 
 SEPARATE_MEMBER_PAGES  = NO
 
-# The TAB_SIZE tag can be used to set the number of spaces in a tab. 
+# The TAB_SIZE tag can be used to set the number of spaces in a tab.
 # Doxygen uses this value to replace tabs by spaces in code fragments.
 
 TAB_SIZE               = 8
 
-# This tag can be used to specify a number of aliases that acts 
-# as commands in the documentation. An alias has the form "name=value". 
-# For example adding "sideeffect=\par Side Effects:\n" will allow you to 
-# put the command \sideeffect (or @sideeffect) in the documentation, which 
-# will result in a user-defined paragraph with heading "Side Effects:". 
+# This tag can be used to specify a number of aliases that acts
+# as commands in the documentation. An alias has the form "name=value".
+# For example adding "sideeffect=\par Side Effects:\n" will allow you to
+# put the command \sideeffect (or @sideeffect) in the documentation, which
+# will result in a user-defined paragraph with heading "Side Effects:".
 # You can put \n's in the value part of an alias to insert newlines.
 
-ALIASES                = 
+ALIASES                =
 
-# Set the OPTIMIZE_OUTPUT_FOR_C tag to YES if your project consists of C 
-# sources only. Doxygen will then generate output that is more tailored for C. 
-# For instance, some of the names that are used will be different. The list 
+# Set the OPTIMIZE_OUTPUT_FOR_C tag to YES if your project consists of C
+# sources only. Doxygen will then generate output that is more tailored for C.
+# For instance, some of the names that are used will be different. The list
 # of all members will be omitted, etc.
 
 OPTIMIZE_OUTPUT_FOR_C  = NO
 
-# Set the OPTIMIZE_OUTPUT_JAVA tag to YES if your project consists of Java 
-# sources only. Doxygen will then generate output that is more tailored for Java. 
-# For instance, namespaces will be presented as packages, qualified scopes 
-# will look different, etc.
+# Set the OPTIMIZE_OUTPUT_JAVA tag to YES if your project consists of Java
+# sources only. Doxygen will then generate output that is more tailored for
+# Java. For instance, namespaces will be presented as packages, qualified
+# scopes will look different, etc.
 
 OPTIMIZE_OUTPUT_JAVA   = NO
 
-# If you use STL classes (i.e. std::string, std::vector, etc.) but do not want to 
-# include (a tag file for) the STL sources as input, then you should 
-# set this tag to YES in order to let doxygen match functions declarations and 
-# definitions whose arguments contain STL classes (e.g. func(std::string); v.s. 
-# func(std::string) {}). This also make the inheritance and collaboration 
+# Set the OPTIMIZE_FOR_FORTRAN tag to YES if your project consists of Fortran
+# sources only. Doxygen will then generate output that is more tailored for
+# Fortran.
+
+OPTIMIZE_FOR_FORTRAN   = NO
+
+# Set the OPTIMIZE_OUTPUT_VHDL tag to YES if your project consists of VHDL
+# sources. Doxygen will then generate output that is tailored for
+# VHDL.
+
+OPTIMIZE_OUTPUT_VHDL   = NO
+
+# Doxygen selects the parser to use depending on the extension of the files it parses.
+# With this tag you can assign which parser to use for a given extension.
+# Doxygen has a built-in mapping, but you can override or extend it using this tag.
+# The format is ext=language, where ext is a file extension, and language is one of
+# the parsers supported by doxygen: IDL, Java, Javascript, C#, C, C++, D, PHP,
+# Objective-C, Python, Fortran, VHDL, C, C++. For instance to make doxygen treat
+# .inc files as Fortran files (default is PHP), and .f files as C (default is Fortran),
+# use: inc=Fortran f=C. Note that for custom extensions you also need to set FILE_PATTERNS otherwise the files are not read by doxygen.
+
+EXTENSION_MAPPING      =
+
+# If you use STL classes (i.e. std::string, std::vector, etc.) but do not want
+# to include (a tag file for) the STL sources as input, then you should
+# set this tag to YES in order to let doxygen match functions declarations and
+# definitions whose arguments contain STL classes (e.g. func(std::string); v.s.
+# func(std::string) {}). This also make the inheritance and collaboration
 # diagrams that involve STL classes more complete and accurate.
 
 BUILTIN_STL_SUPPORT    = NO
@@ -215,369 +232,448 @@
 
 CPP_CLI_SUPPORT        = NO
 
-# If member grouping is used in the documentation and the DISTRIBUTE_GROUP_DOC 
-# tag is set to YES, then doxygen will reuse the documentation of the first 
-# member in the group (if any) for the other members of the group. By default 
+# Set the SIP_SUPPORT tag to YES if your project consists of sip sources only.
+# Doxygen will parse them like normal C++ but will assume all classes use public
+# instead of private inheritance when no explicit protection keyword is present.
+
+SIP_SUPPORT            = NO
+
+# For Microsoft's IDL there are propget and propput attributes to indicate getter
+# and setter methods for a property. Setting this option to YES (the default)
+# will make doxygen to replace the get and set methods by a property in the
+# documentation. This will only work if the methods are indeed getting or
+# setting a simple type. If this is not the case, or you want to show the
+# methods anyway, you should set this option to NO.
+
+IDL_PROPERTY_SUPPORT   = YES
+
+# If member grouping is used in the documentation and the DISTRIBUTE_GROUP_DOC
+# tag is set to YES, then doxygen will reuse the documentation of the first
+# member in the group (if any) for the other members of the group. By default
 # all members of a group must be documented explicitly.
 
 DISTRIBUTE_GROUP_DOC   = NO
 
-# Set the SUBGROUPING tag to YES (the default) to allow class member groups of 
-# the same type (for instance a group of public functions) to be put as a 
-# subgroup of that type (e.g. under the Public Functions section). Set it to 
-# NO to prevent subgrouping. Alternatively, this can be done per class using 
+# Set the SUBGROUPING tag to YES (the default) to allow class member groups of
+# the same type (for instance a group of public functions) to be put as a
+# subgroup of that type (e.g. under the Public Functions section). Set it to
+# NO to prevent subgrouping. Alternatively, this can be done per class using
 # the \nosubgrouping command.
 
 SUBGROUPING            = YES
 
+# When TYPEDEF_HIDES_STRUCT is enabled, a typedef of a struct, union, or enum
+# is documented as struct, union, or enum with the name of the typedef. So
+# typedef struct TypeS {} TypeT, will appear in the documentation as a struct
+# with name TypeT. When disabled the typedef will appear as a member of a file,
+# namespace, or class. And the struct will be named TypeS. This can typically
+# be useful for C code in case the coding convention dictates that all compound
+# types are typedef'ed and only the typedef is referenced, never the tag name.
+
+TYPEDEF_HIDES_STRUCT   = NO
+
+# The SYMBOL_CACHE_SIZE determines the size of the internal cache use to
+# determine which symbols to keep in memory and which to flush to disk.
+# When the cache is full, less often used symbols will be written to disk.
+# For small to medium size projects (<1000 input files) the default value is
+# probably good enough. For larger projects a too small cache size can cause
+# doxygen to be busy swapping symbols to and from disk most of the time
+# causing a significant performance penality.
+# If the system has enough physical memory increasing the cache will improve the
+# performance by keeping more symbols in memory. Note that the value works on
+# a logarithmic scale so increasing the size by one will rougly double the
+# memory usage. The cache size is given by this formula:
+# 2^(16+SYMBOL_CACHE_SIZE). The valid range is 0..9, the default is 0,
+# corresponding to a cache size of 2^16 = 65536 symbols
+
+SYMBOL_CACHE_SIZE      = 0
+
 #---------------------------------------------------------------------------
 # Build related configuration options
 #---------------------------------------------------------------------------
 
-# If the EXTRACT_ALL tag is set to YES doxygen will assume all entities in 
-# documentation are documented, even if no documentation was available. 
-# Private class members and static file members will be hidden unless 
+# If the EXTRACT_ALL tag is set to YES doxygen will assume all entities in
+# documentation are documented, even if no documentation was available.
+# Private class members and static file members will be hidden unless
 # the EXTRACT_PRIVATE and EXTRACT_STATIC tags are set to YES
 
-EXTRACT_ALL            = NO
+EXTRACT_ALL            = YES
 
-# If the EXTRACT_PRIVATE tag is set to YES all private members of a class 
+# If the EXTRACT_PRIVATE tag is set to YES all private members of a class
 # will be included in the documentation.
 
 EXTRACT_PRIVATE        = NO
 
-# If the EXTRACT_STATIC tag is set to YES all static members of a file 
+# If the EXTRACT_STATIC tag is set to YES all static members of a file
 # will be included in the documentation.
 
 EXTRACT_STATIC         = YES
 
-# If the EXTRACT_LOCAL_CLASSES tag is set to YES classes (and structs) 
-# defined locally in source files will be included in the documentation. 
+# If the EXTRACT_LOCAL_CLASSES tag is set to YES classes (and structs)
+# defined locally in source files will be included in the documentation.
 # If set to NO only classes defined in header files are included.
 
 EXTRACT_LOCAL_CLASSES  = YES
 
-# This flag is only useful for Objective-C code. When set to YES local 
-# methods, which are defined in the implementation section but not in 
-# the interface are included in the documentation. 
+# This flag is only useful for Objective-C code. When set to YES local
+# methods, which are defined in the implementation section but not in
+# the interface are included in the documentation.
 # If set to NO (the default) only methods in the interface are included.
 
 EXTRACT_LOCAL_METHODS  = NO
 
-# If this flag is set to YES, the members of anonymous namespaces will be extracted 
-# and appear in the documentation as a namespace called 'anonymous_namespace{file}', 
-# where file will be replaced with the base name of the file that contains the anonymous 
-# namespace. By default anonymous namespace are hidden.
+# If this flag is set to YES, the members of anonymous namespaces will be
+# extracted and appear in the documentation as a namespace called
+# 'anonymous_namespace{file}', where file will be replaced with the base
+# name of the file that contains the anonymous namespace. By default
+# anonymous namespace are hidden.
 
 EXTRACT_ANON_NSPACES   = NO
 
-# If the HIDE_UNDOC_MEMBERS tag is set to YES, Doxygen will hide all 
-# undocumented members of documented classes, files or namespaces. 
-# If set to NO (the default) these members will be included in the 
-# various overviews, but no documentation section is generated. 
+# If the HIDE_UNDOC_MEMBERS tag is set to YES, Doxygen will hide all
+# undocumented members of documented classes, files or namespaces.
+# If set to NO (the default) these members will be included in the
+# various overviews, but no documentation section is generated.
 # This option has no effect if EXTRACT_ALL is enabled.
 
 HIDE_UNDOC_MEMBERS     = NO
 
-# If the HIDE_UNDOC_CLASSES tag is set to YES, Doxygen will hide all 
-# undocumented classes that are normally visible in the class hierarchy. 
-# If set to NO (the default) these classes will be included in the various 
+# If the HIDE_UNDOC_CLASSES tag is set to YES, Doxygen will hide all
+# undocumented classes that are normally visible in the class hierarchy.
+# If set to NO (the default) these classes will be included in the various
 # overviews. This option has no effect if EXTRACT_ALL is enabled.
 
 HIDE_UNDOC_CLASSES     = NO
 
-# If the HIDE_FRIEND_COMPOUNDS tag is set to YES, Doxygen will hide all 
-# friend (class|struct|union) declarations. 
-# If set to NO (the default) these declarations will be included in the 
+# If the HIDE_FRIEND_COMPOUNDS tag is set to YES, Doxygen will hide all
+# friend (class|struct|union) declarations.
+# If set to NO (the default) these declarations will be included in the
 # documentation.
 
 HIDE_FRIEND_COMPOUNDS  = NO
 
-# If the HIDE_IN_BODY_DOCS tag is set to YES, Doxygen will hide any 
-# documentation blocks found inside the body of a function. 
-# If set to NO (the default) these blocks will be appended to the 
+# If the HIDE_IN_BODY_DOCS tag is set to YES, Doxygen will hide any
+# documentation blocks found inside the body of a function.
+# If set to NO (the default) these blocks will be appended to the
 # function's detailed documentation block.
 
 HIDE_IN_BODY_DOCS      = NO
 
-# The INTERNAL_DOCS tag determines if documentation 
-# that is typed after a \internal command is included. If the tag is set 
-# to NO (the default) then the documentation will be excluded. 
+# The INTERNAL_DOCS tag determines if documentation
+# that is typed after a \internal command is included. If the tag is set
+# to NO (the default) then the documentation will be excluded.
 # Set it to YES to include the internal documentation.
 
 INTERNAL_DOCS          = NO
 
-# If the CASE_SENSE_NAMES tag is set to NO then Doxygen will only generate 
-# file names in lower-case letters. If set to YES upper-case letters are also 
-# allowed. This is useful if you have classes or files whose names only differ 
-# in case and if your file system supports case sensitive file names. Windows 
+# If the CASE_SENSE_NAMES tag is set to NO then Doxygen will only generate
+# file names in lower-case letters. If set to YES upper-case letters are also
+# allowed. This is useful if you have classes or files whose names only differ
+# in case and if your file system supports case sensitive file names. Windows
 # and Mac users are advised to set this option to NO.
 
 CASE_SENSE_NAMES       = YES
 
-# If the HIDE_SCOPE_NAMES tag is set to NO (the default) then Doxygen 
-# will show members with their full class and namespace scopes in the 
+# If the HIDE_SCOPE_NAMES tag is set to NO (the default) then Doxygen
+# will show members with their full class and namespace scopes in the
 # documentation. If set to YES the scope will be hidden.
 
 HIDE_SCOPE_NAMES       = NO
 
-# If the SHOW_INCLUDE_FILES tag is set to YES (the default) then Doxygen 
-# will put a list of the files that are included by a file in the documentation 
+# If the SHOW_INCLUDE_FILES tag is set to YES (the default) then Doxygen
+# will put a list of the files that are included by a file in the documentation
 # of that file.
 
 SHOW_INCLUDE_FILES     = YES
 
-# If the INLINE_INFO tag is set to YES (the default) then a tag [inline] 
+# If the INLINE_INFO tag is set to YES (the default) then a tag [inline]
 # is inserted in the documentation for inline members.
 
 INLINE_INFO            = YES
 
-# If the SORT_MEMBER_DOCS tag is set to YES (the default) then doxygen 
-# will sort the (detailed) documentation of file and class members 
-# alphabetically by member name. If set to NO the members will appear in 
+# If the SORT_MEMBER_DOCS tag is set to YES (the default) then doxygen
+# will sort the (detailed) documentation of file and class members
+# alphabetically by member name. If set to NO the members will appear in
 # declaration order.
 
 SORT_MEMBER_DOCS       = YES
 
-# If the SORT_BRIEF_DOCS tag is set to YES then doxygen will sort the 
-# brief documentation of file, namespace and class members alphabetically 
-# by member name. If set to NO (the default) the members will appear in 
+# If the SORT_BRIEF_DOCS tag is set to YES then doxygen will sort the
+# brief documentation of file, namespace and class members alphabetically
+# by member name. If set to NO (the default) the members will appear in
 # declaration order.
 
 SORT_BRIEF_DOCS        = NO
 
-# If the SORT_BY_SCOPE_NAME tag is set to YES, the class list will be 
-# sorted by fully-qualified names, including namespaces. If set to 
-# NO (the default), the class list will be sorted only by class name, 
-# not including the namespace part. 
+# If the SORT_MEMBERS_CTORS_1ST tag is set to YES then doxygen will sort the (brief and detailed) documentation of class members so that constructors and destructors are listed first. If set to NO (the default) the constructors will appear in the respective orders defined by SORT_MEMBER_DOCS and SORT_BRIEF_DOCS. This tag will be ignored for brief docs if SORT_BRIEF_DOCS is set to NO and ignored for detailed docs if SORT_MEMBER_DOCS is set to NO.
+
+SORT_MEMBERS_CTORS_1ST = NO
+
+# If the SORT_GROUP_NAMES tag is set to YES then doxygen will sort the
+# hierarchy of group names into alphabetical order. If set to NO (the default)
+# the group names will appear in their defined order.
+
+SORT_GROUP_NAMES       = NO
+
+# If the SORT_BY_SCOPE_NAME tag is set to YES, the class list will be
+# sorted by fully-qualified names, including namespaces. If set to
+# NO (the default), the class list will be sorted only by class name,
+# not including the namespace part.
 # Note: This option is not very useful if HIDE_SCOPE_NAMES is set to YES.
-# Note: This option applies only to the class list, not to the 
+# Note: This option applies only to the class list, not to the
 # alphabetical list.
 
 SORT_BY_SCOPE_NAME     = NO
 
-# The GENERATE_TODOLIST tag can be used to enable (YES) or 
-# disable (NO) the todo list. This list is created by putting \todo 
+# The GENERATE_TODOLIST tag can be used to enable (YES) or
+# disable (NO) the todo list. This list is created by putting \todo
 # commands in the documentation.
 
 GENERATE_TODOLIST      = YES
 
-# The GENERATE_TESTLIST tag can be used to enable (YES) or 
-# disable (NO) the test list. This list is created by putting \test 
+# The GENERATE_TESTLIST tag can be used to enable (YES) or
+# disable (NO) the test list. This list is created by putting \test
 # commands in the documentation.
 
 GENERATE_TESTLIST      = YES
 
-# The GENERATE_BUGLIST tag can be used to enable (YES) or 
-# disable (NO) the bug list. This list is created by putting \bug 
+# The GENERATE_BUGLIST tag can be used to enable (YES) or
+# disable (NO) the bug list. This list is created by putting \bug
 # commands in the documentation.
 
 GENERATE_BUGLIST       = YES
 
-# The GENERATE_DEPRECATEDLIST tag can be used to enable (YES) or 
-# disable (NO) the deprecated list. This list is created by putting 
+# The GENERATE_DEPRECATEDLIST tag can be used to enable (YES) or
+# disable (NO) the deprecated list. This list is created by putting
 # \deprecated commands in the documentation.
 
 GENERATE_DEPRECATEDLIST= YES
 
-# The ENABLED_SECTIONS tag can be used to enable conditional 
+# The ENABLED_SECTIONS tag can be used to enable conditional
 # documentation sections, marked by \if sectionname ... \endif.
 
-ENABLED_SECTIONS       = 
+ENABLED_SECTIONS       =
 
-# The MAX_INITIALIZER_LINES tag determines the maximum number of lines 
-# the initial value of a variable or define consists of for it to appear in 
-# the documentation. If the initializer consists of more lines than specified 
-# here it will be hidden. Use a value of 0 to hide initializers completely. 
-# The appearance of the initializer of individual variables and defines in the 
-# documentation can be controlled using \showinitializer or \hideinitializer 
+# The MAX_INITIALIZER_LINES tag determines the maximum number of lines
+# the initial value of a variable or define consists of for it to appear in
+# the documentation. If the initializer consists of more lines than specified
+# here it will be hidden. Use a value of 0 to hide initializers completely.
+# The appearance of the initializer of individual variables and defines in the
+# documentation can be controlled using \showinitializer or \hideinitializer
 # command in the documentation regardless of this setting.
 
 MAX_INITIALIZER_LINES  = 30
 
-# Set the SHOW_USED_FILES tag to NO to disable the list of files generated 
-# at the bottom of the documentation of classes and structs. If set to YES the 
+# Set the SHOW_USED_FILES tag to NO to disable the list of files generated
+# at the bottom of the documentation of classes and structs. If set to YES the
 # list will mention the files that were used to generate the documentation.
 
 SHOW_USED_FILES        = YES
 
-# If the sources in your project are distributed over multiple directories 
-# then setting the SHOW_DIRECTORIES tag to YES will show the directory hierarchy 
+# If the sources in your project are distributed over multiple directories
+# then setting the SHOW_DIRECTORIES tag to YES will show the directory hierarchy
 # in the documentation. The default is NO.
 
 SHOW_DIRECTORIES       = YES
 
-# The FILE_VERSION_FILTER tag can be used to specify a program or script that 
-# doxygen should invoke to get the current version for each file (typically from the 
-# version control system). Doxygen will invoke the program by executing (via 
-# popen()) the command <command> <input-file>, where <command> is the value of 
-# the FILE_VERSION_FILTER tag, and <input-file> is the name of an input file 
-# provided by doxygen. Whatever the program writes to standard output 
+# Set the SHOW_FILES tag to NO to disable the generation of the Files page.
+# This will remove the Files entry from the Quick Index and from the
+# Folder Tree View (if specified). The default is YES.
+
+SHOW_FILES             = YES
+
+# Set the SHOW_NAMESPACES tag to NO to disable the generation of the
+# Namespaces page.
+# This will remove the Namespaces entry from the Quick Index
+# and from the Folder Tree View (if specified). The default is YES.
+
+SHOW_NAMESPACES        = YES
+
+# The FILE_VERSION_FILTER tag can be used to specify a program or script that
+# doxygen should invoke to get the current version for each file (typically from
+# the version control system). Doxygen will invoke the program by executing (via
+# popen()) the command <command> <input-file>, where <command> is the value of
+# the FILE_VERSION_FILTER tag, and <input-file> is the name of an input file
+# provided by doxygen. Whatever the program writes to standard output
 # is used as the file version. See the manual for examples.
 
-FILE_VERSION_FILTER    = 
+FILE_VERSION_FILTER    =
 
+# The LAYOUT_FILE tag can be used to specify a layout file which will be parsed by
+# doxygen. The layout file controls the global structure of the generated output files
+# in an output format independent way. The create the layout file that represents
+# doxygen's defaults, run doxygen with the -l option. You can optionally specify a
+# file name after the option, if omitted DoxygenLayout.xml will be used as the name
+# of the layout file.
+
+LAYOUT_FILE            =
+
 #---------------------------------------------------------------------------
 # configuration options related to warning and progress messages
 #---------------------------------------------------------------------------
 
-# The QUIET tag can be used to turn on/off the messages that are generated 
+# The QUIET tag can be used to turn on/off the messages that are generated
 # by doxygen. Possible values are YES and NO. If left blank NO is used.
 
 QUIET                  = NO
 
-# The WARNINGS tag can be used to turn on/off the warning messages that are 
-# generated by doxygen. Possible values are YES and NO. If left blank 
+# The WARNINGS tag can be used to turn on/off the warning messages that are
+# generated by doxygen. Possible values are YES and NO. If left blank
 # NO is used.
 
 WARNINGS               = YES
 
-# If WARN_IF_UNDOCUMENTED is set to YES, then doxygen will generate warnings 
-# for undocumented members. If EXTRACT_ALL is set to YES then this flag will 
+# If WARN_IF_UNDOCUMENTED is set to YES, then doxygen will generate warnings
+# for undocumented members. If EXTRACT_ALL is set to YES then this flag will
 # automatically be disabled.
 
 WARN_IF_UNDOCUMENTED   = YES
 
-# If WARN_IF_DOC_ERROR is set to YES, doxygen will generate warnings for 
-# potential errors in the documentation, such as not documenting some 
-# parameters in a documented function, or documenting parameters that 
+# If WARN_IF_DOC_ERROR is set to YES, doxygen will generate warnings for
+# potential errors in the documentation, such as not documenting some
+# parameters in a documented function, or documenting parameters that
 # don't exist or using markup commands wrongly.
 
 WARN_IF_DOC_ERROR      = YES
 
-# This WARN_NO_PARAMDOC option can be abled to get warnings for 
-# functions that are documented, but have no documentation for their parameters 
-# or return value. If set to NO (the default) doxygen will only warn about 
-# wrong or incomplete parameter documentation, but not about the absence of 
+# This WARN_NO_PARAMDOC option can be abled to get warnings for
+# functions that are documented, but have no documentation for their parameters
+# or return value. If set to NO (the default) doxygen will only warn about
+# wrong or incomplete parameter documentation, but not about the absence of
 # documentation.
 
 WARN_NO_PARAMDOC       = NO
 
-# The WARN_FORMAT tag determines the format of the warning messages that 
-# doxygen can produce. The string should contain the $file, $line, and $text 
-# tags, which will be replaced by the file and line number from which the 
-# warning originated and the warning text. Optionally the format may contain 
-# $version, which will be replaced by the version of the file (if it could 
+# The WARN_FORMAT tag determines the format of the warning messages that
+# doxygen can produce. The string should contain the $file, $line, and $text
+# tags, which will be replaced by the file and line number from which the
+# warning originated and the warning text. Optionally the format may contain
+# $version, which will be replaced by the version of the file (if it could
 # be obtained via FILE_VERSION_FILTER)
 
 WARN_FORMAT            = "$file:$line: $text "
 
-# The WARN_LOGFILE tag can be used to specify a file to which warning 
-# and error messages should be written. If left blank the output is written 
+# The WARN_LOGFILE tag can be used to specify a file to which warning
+# and error messages should be written. If left blank the output is written
 # to stderr.
 
-WARN_LOGFILE           = 
+WARN_LOGFILE           =
 
 #---------------------------------------------------------------------------
 # configuration options related to the input files
 #---------------------------------------------------------------------------
 
-# The INPUT tag can be used to specify the files and/or directories that contain 
-# documented source files. You may enter file names like "myfile.cpp" or 
-# directories like "/usr/src/myproject". Separate the files or directories 
+# The INPUT tag can be used to specify the files and/or directories that contain
+# documented source files. You may enter file names like "myfile.cpp" or
+# directories like "/usr/src/myproject". Separate the files or directories
 # with spaces.
 
 INPUT                  = src
 
-# This tag can be used to specify the character encoding of the source files that 
-# doxygen parses. Internally doxygen uses the UTF-8 encoding, which is also the default 
-# input encoding. Doxygen uses libiconv (or the iconv built into libc) for the transcoding. 
-# See http://www.gnu.org/software/libiconv for the list of possible encodings.
+# This tag can be used to specify the character encoding of the source files
+# that doxygen parses. Internally doxygen uses the UTF-8 encoding, which is
+# also the default input encoding. Doxygen uses libiconv (or the iconv built
+# into libc) for the transcoding. See http://www.gnu.org/software/libiconv for
+# the list of possible encodings.
 
 INPUT_ENCODING         = UTF-8
 
-# If the value of the INPUT tag contains directories, you can use the 
-# FILE_PATTERNS tag to specify one or more wildcard pattern (like *.cpp 
-# and *.h) to filter out the source-files in the directories. If left 
-# blank the following patterns are tested: 
-# *.c *.cc *.cxx *.cpp *.c++ *.java *.ii *.ixx *.ipp *.i++ *.inl *.h *.hh *.hxx 
-# *.hpp *.h++ *.idl *.odl *.cs *.php *.php3 *.inc *.m *.mm *.py
+# If the value of the INPUT tag contains directories, you can use the
+# FILE_PATTERNS tag to specify one or more wildcard pattern (like *.cpp
+# and *.h) to filter out the source-files in the directories. If left
+# blank the following patterns are tested:
+# *.c *.cc *.cxx *.cpp *.c++ *.java *.ii *.ixx *.ipp *.i++ *.inl *.h *.hh *.hxx
+# *.hpp *.h++ *.idl *.odl *.cs *.php *.php3 *.inc *.m *.mm *.py *.f90
 
 FILE_PATTERNS          = *.hpp \
                          *.cpp \
                          *.inc \
                          *.h
 
-# The RECURSIVE tag can be used to turn specify whether or not subdirectories 
-# should be searched for input files as well. Possible values are YES and NO. 
+# The RECURSIVE tag can be used to turn specify whether or not subdirectories
+# should be searched for input files as well. Possible values are YES and NO.
 # If left blank NO is used.
 
 RECURSIVE              = YES
 
-# The EXCLUDE tag can be used to specify files and/or directories that should 
-# excluded from the INPUT source files. This way you can easily exclude a 
+# The EXCLUDE tag can be used to specify files and/or directories that should
+# excluded from the INPUT source files. This way you can easily exclude a
 # subdirectory from a directory tree whose root is specified with the INPUT tag.
 
 EXCLUDE                = oldgui
 
-# The EXCLUDE_SYMLINKS tag can be used select whether or not files or 
-# directories that are symbolic links (a Unix filesystem feature) are excluded 
+# The EXCLUDE_SYMLINKS tag can be used select whether or not files or
+# directories that are symbolic links (a Unix filesystem feature) are excluded
 # from the input.
 
 EXCLUDE_SYMLINKS       = NO
 
-# If the value of the INPUT tag contains directories, you can use the 
-# EXCLUDE_PATTERNS tag to specify one or more wildcard patterns to exclude 
-# certain files from those directories. Note that the wildcards are matched 
-# against the file with absolute path, so to exclude all test directories 
+# If the value of the INPUT tag contains directories, you can use the
+# EXCLUDE_PATTERNS tag to specify one or more wildcard patterns to exclude
+# certain files from those directories. Note that the wildcards are matched
+# against the file with absolute path, so to exclude all test directories
 # for example use the pattern */test/*
 
-EXCLUDE_PATTERNS       = 
+EXCLUDE_PATTERNS       =
 
-# The EXCLUDE_SYMBOLS tag can be used to specify one or more symbol names 
-# (namespaces, classes, functions, etc.) that should be excluded from the output. 
-# The symbol name can be a fully qualified name, a word, or if the wildcard * is used, 
-# a substring. Examples: ANamespace, AClass, AClass::ANamespace, ANamespace::*Test
+# The EXCLUDE_SYMBOLS tag can be used to specify one or more symbol names
+# (namespaces, classes, functions, etc.) that should be excluded from the
+# output. The symbol name can be a fully qualified name, a word, or if the
+# wildcard * is used, a substring. Examples: ANamespace, AClass,
+# AClass::ANamespace, ANamespace::*Test
 
-EXCLUDE_SYMBOLS        = 
+EXCLUDE_SYMBOLS        =
 
-# The EXAMPLE_PATH tag can be used to specify one or more files or 
-# directories that contain example code fragments that are included (see 
+# The EXAMPLE_PATH tag can be used to specify one or more files or
+# directories that contain example code fragments that are included (see
 # the \include command).
 
-EXAMPLE_PATH           = 
+EXAMPLE_PATH           =
 
-# If the value of the EXAMPLE_PATH tag contains directories, you can use the 
-# EXAMPLE_PATTERNS tag to specify one or more wildcard pattern (like *.cpp 
-# and *.h) to filter out the source-files in the directories. If left 
+# If the value of the EXAMPLE_PATH tag contains directories, you can use the
+# EXAMPLE_PATTERNS tag to specify one or more wildcard pattern (like *.cpp
+# and *.h) to filter out the source-files in the directories. If left
 # blank all files are included.
 
-EXAMPLE_PATTERNS       = 
+EXAMPLE_PATTERNS       =
 
-# If the EXAMPLE_RECURSIVE tag is set to YES then subdirectories will be 
-# searched for input files to be used with the \include or \dontinclude 
-# commands irrespective of the value of the RECURSIVE tag. 
+# If the EXAMPLE_RECURSIVE tag is set to YES then subdirectories will be
+# searched for input files to be used with the \include or \dontinclude
+# commands irrespective of the value of the RECURSIVE tag.
 # Possible values are YES and NO. If left blank NO is used.
 
 EXAMPLE_RECURSIVE      = NO
 
-# The IMAGE_PATH tag can be used to specify one or more files or 
-# directories that contain image that are included in the documentation (see 
+# The IMAGE_PATH tag can be used to specify one or more files or
+# directories that contain image that are included in the documentation (see
 # the \image command).
 
-IMAGE_PATH             = 
+IMAGE_PATH             =
 
-# The INPUT_FILTER tag can be used to specify a program that doxygen should 
-# invoke to filter for each input file. Doxygen will invoke the filter program 
-# by executing (via popen()) the command <filter> <input-file>, where <filter> 
-# is the value of the INPUT_FILTER tag, and <input-file> is the name of an 
-# input file. Doxygen will then use the output that the filter program writes 
-# to standard output.  If FILTER_PATTERNS is specified, this tag will be 
+# The INPUT_FILTER tag can be used to specify a program that doxygen should
+# invoke to filter for each input file. Doxygen will invoke the filter program
+# by executing (via popen()) the command <filter> <input-file>, where <filter>
+# is the value of the INPUT_FILTER tag, and <input-file> is the name of an
+# input file. Doxygen will then use the output that the filter program writes
+# to standard output.
+# If FILTER_PATTERNS is specified, this tag will be
 # ignored.
 
-INPUT_FILTER           = 
+INPUT_FILTER           =
 
-# The FILTER_PATTERNS tag can be used to specify filters on a per file pattern 
-# basis.  Doxygen will compare the file name with each pattern and apply the 
-# filter if there is a match.  The filters are a list of the form: 
-# pattern=filter (like *.cpp=my_cpp_filter). See INPUT_FILTER for further 
-# info on how filters are used. If FILTER_PATTERNS is empty, INPUT_FILTER 
+# The FILTER_PATTERNS tag can be used to specify filters on a per file pattern
+# basis.
+# Doxygen will compare the file name with each pattern and apply the
+# filter if there is a match.
+# The filters are a list of the form:
+# pattern=filter (like *.cpp=my_cpp_filter). See INPUT_FILTER for further
+# info on how filters are used. If FILTER_PATTERNS is empty, INPUT_FILTER
 # is applied to all files.
 
-FILTER_PATTERNS        = 
+FILTER_PATTERNS        =
 
-# If the FILTER_SOURCE_FILES tag is set to YES, the input filter (if set using 
-# INPUT_FILTER) will be used to filter the input files when producing source 
+# If the FILTER_SOURCE_FILES tag is set to YES, the input filter (if set using
+# INPUT_FILTER) will be used to filter the input files when producing source
 # files to browse (i.e. when SOURCE_BROWSER is set to YES).
 
 FILTER_SOURCE_FILES    = NO
@@ -586,34 +682,32 @@
 # configuration options related to source browsing
 #---------------------------------------------------------------------------
 
-# If the SOURCE_BROWSER tag is set to YES then a list of source files will 
-# be generated. Documented entities will be cross-referenced with these sources. 
-# Note: To get rid of all source code in the generated output, make sure also 
-# VERBATIM_HEADERS is set to NO. If you have enabled CALL_GRAPH or CALLER_GRAPH 
-# then you must also enable this option. If you don't then doxygen will produce 
-# a warning and turn it on anyway
+# If the SOURCE_BROWSER tag is set to YES then a list of source files will
+# be generated. Documented entities will be cross-referenced with these sources.
+# Note: To get rid of all source code in the generated output, make sure also
+# VERBATIM_HEADERS is set to NO.
 
 SOURCE_BROWSER         = YES
 
-# Setting the INLINE_SOURCES tag to YES will include the body 
+# Setting the INLINE_SOURCES tag to YES will include the body
 # of functions and classes directly in the documentation.
 
 INLINE_SOURCES         = NO
 
-# Setting the STRIP_CODE_COMMENTS tag to YES (the default) will instruct 
-# doxygen to hide any special comment blocks from generated source code 
+# Setting the STRIP_CODE_COMMENTS tag to YES (the default) will instruct
+# doxygen to hide any special comment blocks from generated source code
 # fragments. Normal C and C++ comments will always remain visible.
 
 STRIP_CODE_COMMENTS    = YES
 
-# If the REFERENCED_BY_RELATION tag is set to YES (the default) 
-# then for each documented function all documented 
+# If the REFERENCED_BY_RELATION tag is set to YES
+# then for each documented function all documented
 # functions referencing it will be listed.
 
 REFERENCED_BY_RELATION = YES
 
-# If the REFERENCES_RELATION tag is set to YES (the default) 
-# then for each documented function all documented entities 
+# If the REFERENCES_RELATION tag is set to YES
+# then for each documented function all documented entities
 # called/used by that function will be listed.
 
 REFERENCES_RELATION    = YES
@@ -621,20 +715,21 @@
 # If the REFERENCES_LINK_SOURCE tag is set to YES (the default)
 # and SOURCE_BROWSER tag is set to YES, then the hyperlinks from
 # functions in REFERENCES_RELATION and REFERENCED_BY_RELATION lists will
-# link to the source code.  Otherwise they will link to the documentstion.
+# link to the source code.
+# Otherwise they will link to the documentation.
 
 REFERENCES_LINK_SOURCE = YES
 
-# If the USE_HTAGS tag is set to YES then the references to source code 
-# will point to the HTML generated by the htags(1) tool instead of doxygen 
-# built-in source browser. The htags tool is part of GNU's global source 
-# tagging system (see http://www.gnu.org/software/global/global.html). You 
+# If the USE_HTAGS tag is set to YES then the references to source code
+# will point to the HTML generated by the htags(1) tool instead of doxygen
+# built-in source browser. The htags tool is part of GNU's global source
+# tagging system (see http://www.gnu.org/software/global/global.html). You
 # will need version 4.8.6 or higher.
 
 USE_HTAGS              = NO
 
-# If the VERBATIM_HEADERS tag is set to YES (the default) then Doxygen 
-# will generate a verbatim copy of the header file for each class for 
+# If the VERBATIM_HEADERS tag is set to YES (the default) then Doxygen
+# will generate a verbatim copy of the header file for each class for
 # which an include is specified. Set to NO to disable this.
 
 VERBATIM_HEADERS       = YES
@@ -643,287 +738,393 @@
 # configuration options related to the alphabetical class index
 #---------------------------------------------------------------------------
 
-# If the ALPHABETICAL_INDEX tag is set to YES, an alphabetical index 
-# of all compounds will be generated. Enable this if the project 
+# If the ALPHABETICAL_INDEX tag is set to YES, an alphabetical index
+# of all compounds will be generated. Enable this if the project
 # contains a lot of classes, structs, unions or interfaces.
 
 ALPHABETICAL_INDEX     = NO
 
-# If the alphabetical index is enabled (see ALPHABETICAL_INDEX) then 
-# the COLS_IN_ALPHA_INDEX tag can be used to specify the number of columns 
+# If the alphabetical index is enabled (see ALPHABETICAL_INDEX) then
+# the COLS_IN_ALPHA_INDEX tag can be used to specify the number of columns
 # in which this list will be split (can be a number in the range [1..20])
 
 COLS_IN_ALPHA_INDEX    = 5
 
-# In case all classes in a project start with a common prefix, all 
-# classes will be put under the same header in the alphabetical index. 
-# The IGNORE_PREFIX tag can be used to specify one or more prefixes that 
+# In case all classes in a project start with a common prefix, all
+# classes will be put under the same header in the alphabetical index.
+# The IGNORE_PREFIX tag can be used to specify one or more prefixes that
 # should be ignored while generating the index headers.
 
-IGNORE_PREFIX          = 
+IGNORE_PREFIX          =
 
 #---------------------------------------------------------------------------
 # configuration options related to the HTML output
 #---------------------------------------------------------------------------
 
-# If the GENERATE_HTML tag is set to YES (the default) Doxygen will 
+# If the GENERATE_HTML tag is set to YES (the default) Doxygen will
 # generate HTML output.
 
 GENERATE_HTML          = YES
 
-# The HTML_OUTPUT tag is used to specify where the HTML docs will be put. 
-# If a relative path is entered the value of OUTPUT_DIRECTORY will be 
+# The HTML_OUTPUT tag is used to specify where the HTML docs will be put.
+# If a relative path is entered the value of OUTPUT_DIRECTORY will be
 # put in front of it. If left blank `html' will be used as the default path.
 
 HTML_OUTPUT            = html
 
-# The HTML_FILE_EXTENSION tag can be used to specify the file extension for 
-# each generated HTML page (for example: .htm,.php,.asp). If it is left blank 
+# The HTML_FILE_EXTENSION tag can be used to specify the file extension for
+# each generated HTML page (for example: .htm,.php,.asp). If it is left blank
 # doxygen will generate files with .html extension.
 
 HTML_FILE_EXTENSION    = .html
 
-# The HTML_HEADER tag can be used to specify a personal HTML header for 
-# each generated HTML page. If it is left blank doxygen will generate a 
+# The HTML_HEADER tag can be used to specify a personal HTML header for
+# each generated HTML page. If it is left blank doxygen will generate a
 # standard header.
 
-HTML_HEADER            = 
+HTML_HEADER            =
 
-# The HTML_FOOTER tag can be used to specify a personal HTML footer for 
-# each generated HTML page. If it is left blank doxygen will generate a 
+# The HTML_FOOTER tag can be used to specify a personal HTML footer for
+# each generated HTML page. If it is left blank doxygen will generate a
 # standard footer.
 
-HTML_FOOTER            = 
+HTML_FOOTER            =
 
-# The HTML_STYLESHEET tag can be used to specify a user-defined cascading 
-# style sheet that is used by each HTML page. It can be used to 
-# fine-tune the look of the HTML output. If the tag is left blank doxygen 
-# will generate a default style sheet. Note that doxygen will try to copy 
-# the style sheet file to the HTML output directory, so don't put your own 
+# The HTML_STYLESHEET tag can be used to specify a user-defined cascading
+# style sheet that is used by each HTML page. It can be used to
+# fine-tune the look of the HTML output. If the tag is left blank doxygen
+# will generate a default style sheet. Note that doxygen will try to copy
+# the style sheet file to the HTML output directory, so don't put your own
 # stylesheet in the HTML output directory as well, or it will be erased!
 
-HTML_STYLESHEET        = 
+HTML_STYLESHEET        =
 
-# If the HTML_ALIGN_MEMBERS tag is set to YES, the members of classes, 
-# files or namespaces will be aligned in HTML using tables. If set to 
+# If the HTML_ALIGN_MEMBERS tag is set to YES, the members of classes,
+# files or namespaces will be aligned in HTML using tables. If set to
 # NO a bullet list will be used.
 
 HTML_ALIGN_MEMBERS     = YES
 
-# If the GENERATE_HTMLHELP tag is set to YES, additional index files 
-# will be generated that can be used as input for tools like the 
-# Microsoft HTML help workshop to generate a compressed HTML help file (.chm) 
+# If the HTML_DYNAMIC_SECTIONS tag is set to YES then the generated HTML
+# documentation will contain sections that can be hidden and shown after the
+# page has loaded. For this to work a browser that supports
+# JavaScript and DHTML is required (for instance Mozilla 1.0+, Firefox
+# Netscape 6.0+, Internet explorer 5.0+, Konqueror, or Safari).
+
+HTML_DYNAMIC_SECTIONS  = NO
+
+# If the GENERATE_DOCSET tag is set to YES, additional index files
+# will be generated that can be used as input for Apple's Xcode 3
+# integrated development environment, introduced with OSX 10.5 (Leopard).
+# To create a documentation set, doxygen will generate a Makefile in the
+# HTML output directory. Running make will produce the docset in that
+# directory and running "make install" will install the docset in
+# ~/Library/Developer/Shared/Documentation/DocSets so that Xcode will find
+# it at startup.
+# See http://developer.apple.com/tools/creatingdocsetswithdoxygen.html for more information.
+
+GENERATE_DOCSET        = NO
+
+# When GENERATE_DOCSET tag is set to YES, this tag determines the name of the
+# feed. A documentation feed provides an umbrella under which multiple
+# documentation sets from a single provider (such as a company or product suite)
+# can be grouped.
+
+DOCSET_FEEDNAME        = "Doxygen generated docs"
+
+# When GENERATE_DOCSET tag is set to YES, this tag specifies a string that
+# should uniquely identify the documentation set bundle. This should be a
+# reverse domain-name style string, e.g. com.mycompany.MyDocSet. Doxygen
+# will append .docset to the name.
+
+DOCSET_BUNDLE_ID       = org.doxygen.Project
+
+# If the GENERATE_HTMLHELP tag is set to YES, additional index files
+# will be generated that can be used as input for tools like the
+# Microsoft HTML help workshop to generate a compiled HTML help file (.chm)
 # of the generated HTML documentation.
 
 GENERATE_HTMLHELP      = NO
 
-# If the HTML_DYNAMIC_SECTIONS tag is set to YES then the generated HTML 
-# documentation will contain sections that can be hidden and shown after the 
-# page has loaded. For this to work a browser that supports 
-# JavaScript and DHTML is required (for instance Mozilla 1.0+, Firefox 
-# Netscape 6.0+, Internet explorer 5.0+, Konqueror, or Safari).
-
-HTML_DYNAMIC_SECTIONS  = NO
-
-# If the GENERATE_HTMLHELP tag is set to YES, the CHM_FILE tag can 
-# be used to specify the file name of the resulting .chm file. You 
-# can add a path in front of the file if the result should not be 
+# If the GENERATE_HTMLHELP tag is set to YES, the CHM_FILE tag can
+# be used to specify the file name of the resulting .chm file. You
+# can add a path in front of the file if the result should not be
 # written to the html output directory.
 
-CHM_FILE               = 
+CHM_FILE               =
 
-# If the GENERATE_HTMLHELP tag is set to YES, the HHC_LOCATION tag can 
-# be used to specify the location (absolute path including file name) of 
-# the HTML help compiler (hhc.exe). If non-empty doxygen will try to run 
+# If the GENERATE_HTMLHELP tag is set to YES, the HHC_LOCATION tag can
+# be used to specify the location (absolute path including file name) of
+# the HTML help compiler (hhc.exe). If non-empty doxygen will try to run
 # the HTML help compiler on the generated index.hhp.
 
-HHC_LOCATION           = 
+HHC_LOCATION           =
 
-# If the GENERATE_HTMLHELP tag is set to YES, the GENERATE_CHI flag 
-# controls if a separate .chi index file is generated (YES) or that 
+# If the GENERATE_HTMLHELP tag is set to YES, the GENERATE_CHI flag
+# controls if a separate .chi index file is generated (YES) or that
 # it should be included in the master .chm file (NO).
 
 GENERATE_CHI           = NO
 
-# If the GENERATE_HTMLHELP tag is set to YES, the BINARY_TOC flag 
-# controls whether a binary table of contents is generated (YES) or a 
+# If the GENERATE_HTMLHELP tag is set to YES, the CHM_INDEX_ENCODING
+# is used to encode HtmlHelp index (hhk), content (hhc) and project file
+# content.
+
+CHM_INDEX_ENCODING     =
+
+# If the GENERATE_HTMLHELP tag is set to YES, the BINARY_TOC flag
+# controls whether a binary table of contents is generated (YES) or a
 # normal table of contents (NO) in the .chm file.
 
 BINARY_TOC             = NO
 
-# The TOC_EXPAND flag can be set to YES to add extra items for group members 
+# The TOC_EXPAND flag can be set to YES to add extra items for group members
 # to the contents of the HTML help documentation and to the tree view.
 
 TOC_EXPAND             = NO
 
-# The DISABLE_INDEX tag can be used to turn on/off the condensed index at 
-# top of each HTML page. The value NO (the default) enables the index and 
+# If the GENERATE_QHP tag is set to YES and both QHP_NAMESPACE and QHP_VIRTUAL_FOLDER
+# are set, an additional index file will be generated that can be used as input for
+# Qt's qhelpgenerator to generate a Qt Compressed Help (.qch) of the generated
+# HTML documentation.
+
+GENERATE_QHP           = NO
+
+# If the QHG_LOCATION tag is specified, the QCH_FILE tag can
+# be used to specify the file name of the resulting .qch file.
+# The path specified is relative to the HTML output folder.
+
+QCH_FILE               =
+
+# The QHP_NAMESPACE tag specifies the namespace to use when generating
+# Qt Help Project output. For more information please see
+# http://doc.trolltech.com/qthelpproject.html#namespace
+
+QHP_NAMESPACE          =
+
+# The QHP_VIRTUAL_FOLDER tag specifies the namespace to use when generating
+# Qt Help Project output. For more information please see
+# http://doc.trolltech.com/qthelpproject.html#virtual-folders
+
+QHP_VIRTUAL_FOLDER     = doc
+
+# If QHP_CUST_FILTER_NAME is set, it specifies the name of a custom filter to add.
+# For more information please see
+# http://doc.trolltech.com/qthelpproject.html#custom-filters
+
+QHP_CUST_FILTER_NAME   =
+
+# The QHP_CUST_FILT_ATTRS tag specifies the list of the attributes of the custom filter to add.For more information please see
+# <a href="http://doc.trolltech.com/qthelpproject.html#custom-filters">Qt Help Project / Custom Filters</a>.
+
+QHP_CUST_FILTER_ATTRS  =
+
+# The QHP_SECT_FILTER_ATTRS tag specifies the list of the attributes this project's
+# filter section matches.
+# <a href="http://doc.trolltech.com/qthelpproject.html#filter-attributes">Qt Help Project / Filter Attributes</a>.
+
+QHP_SECT_FILTER_ATTRS  =
+
+# If the GENERATE_QHP tag is set to YES, the QHG_LOCATION tag can
+# be used to specify the location of Qt's qhelpgenerator.
+# If non-empty doxygen will try to run qhelpgenerator on the generated
+# .qhp file.
+
+QHG_LOCATION           =
+
+# The DISABLE_INDEX tag can be used to turn on/off the condensed index at
+# top of each HTML page. The value NO (the default) enables the index and
 # the value YES disables it.
 
 DISABLE_INDEX          = NO
 
-# This tag can be used to set the number of enum values (range [1..20]) 
+# This tag can be used to set the number of enum values (range [1..20])
 # that doxygen will group on one line in the generated HTML documentation.
 
 ENUM_VALUES_PER_LINE   = 4
 
-# If the GENERATE_TREEVIEW tag is set to YES, a side panel will be
-# generated containing a tree-like index structure (just like the one that 
-# is generated for HTML Help). For this to work a browser that supports 
-# JavaScript, DHTML, CSS and frames is required (for instance Mozilla 1.0+, 
-# Netscape 6.0+, Internet explorer 5.0+, or Konqueror). Windows users are 
-# probably better off using the HTML help feature.
+# The GENERATE_TREEVIEW tag is used to specify whether a tree-like index
+# structure should be generated to display hierarchical information.
+# If the tag value is set to YES, a side panel will be generated
+# containing a tree-like index structure (just like the one that
+# is generated for HTML Help). For this to work a browser that supports
+# JavaScript, DHTML, CSS and frames is required (i.e. any modern browser).
+# Windows users are probably better off using the HTML help feature.
 
 GENERATE_TREEVIEW      = NO
 
-# If the treeview is enabled (see GENERATE_TREEVIEW) then this tag can be 
-# used to set the initial width (in pixels) of the frame in which the tree 
+# By enabling USE_INLINE_TREES, doxygen will generate the Groups, Directories,
+# and Class Hierarchy pages using a tree view instead of an ordered list.
+
+USE_INLINE_TREES       = NO
+
+# If the treeview is enabled (see GENERATE_TREEVIEW) then this tag can be
+# used to set the initial width (in pixels) of the frame in which the tree
 # is shown.
 
 TREEVIEW_WIDTH         = 250
 
+# Use this tag to change the font size of Latex formulas included
+# as images in the HTML documentation. The default is 10. Note that
+# when you change the font size after a successful doxygen run you need
+# to manually remove any form_*.png images from the HTML output directory
+# to force them to be regenerated.
+
+FORMULA_FONTSIZE       = 10
+
+# When the SEARCHENGINE tag is enable doxygen will generate a search box for the HTML output. The underlying search engine uses javascript
+# and DHTML and should work on any modern browser. Note that when using HTML help (GENERATE_HTMLHELP) or Qt help (GENERATE_QHP)
+# there is already a search function so this one should typically
+# be disabled.
+
+SEARCHENGINE           = NO
+
 #---------------------------------------------------------------------------
 # configuration options related to the LaTeX output
 #---------------------------------------------------------------------------
 
-# If the GENERATE_LATEX tag is set to YES (the default) Doxygen will 
+# If the GENERATE_LATEX tag is set to YES (the default) Doxygen will
 # generate Latex output.
 
-GENERATE_LATEX         = YES
+GENERATE_LATEX         = NO
 
-# The LATEX_OUTPUT tag is used to specify where the LaTeX docs will be put. 
-# If a relative path is entered the value of OUTPUT_DIRECTORY will be 
+# The LATEX_OUTPUT tag is used to specify where the LaTeX docs will be put.
+# If a relative path is entered the value of OUTPUT_DIRECTORY will be
 # put in front of it. If left blank `latex' will be used as the default path.
 
 LATEX_OUTPUT           = latex
 
-# The LATEX_CMD_NAME tag can be used to specify the LaTeX command name to be 
+# The LATEX_CMD_NAME tag can be used to specify the LaTeX command name to be
 # invoked. If left blank `latex' will be used as the default command name.
 
 LATEX_CMD_NAME         = latex
 
-# The MAKEINDEX_CMD_NAME tag can be used to specify the command name to 
-# generate index for LaTeX. If left blank `makeindex' will be used as the 
+# The MAKEINDEX_CMD_NAME tag can be used to specify the command name to
+# generate index for LaTeX. If left blank `makeindex' will be used as the
 # default command name.
 
 MAKEINDEX_CMD_NAME     = makeindex
 
-# If the COMPACT_LATEX tag is set to YES Doxygen generates more compact 
-# LaTeX documents. This may be useful for small projects and may help to 
+# If the COMPACT_LATEX tag is set to YES Doxygen generates more compact
+# LaTeX documents. This may be useful for small projects and may help to
 # save some trees in general.
 
 COMPACT_LATEX          = NO
 
-# The PAPER_TYPE tag can be used to set the paper type that is used 
-# by the printer. Possible values are: a4, a4wide, letter, legal and 
+# The PAPER_TYPE tag can be used to set the paper type that is used
+# by the printer. Possible values are: a4, a4wide, letter, legal and
 # executive. If left blank a4wide will be used.
 
 PAPER_TYPE             = a4wide
 
-# The EXTRA_PACKAGES tag can be to specify one or more names of LaTeX 
+# The EXTRA_PACKAGES tag can be to specify one or more names of LaTeX
 # packages that should be included in the LaTeX output.
 
-EXTRA_PACKAGES         = 
+EXTRA_PACKAGES         =
 
-# The LATEX_HEADER tag can be used to specify a personal LaTeX header for 
-# the generated latex document. The header should contain everything until 
-# the first chapter. If it is left blank doxygen will generate a 
+# The LATEX_HEADER tag can be used to specify a personal LaTeX header for
+# the generated latex document. The header should contain everything until
+# the first chapter. If it is left blank doxygen will generate a
 # standard header. Notice: only use this tag if you know what you are doing!
 
-LATEX_HEADER           = 
+LATEX_HEADER           =
 
-# If the PDF_HYPERLINKS tag is set to YES, the LaTeX that is generated 
-# is prepared for conversion to pdf (using ps2pdf). The pdf file will 
-# contain links (just like the HTML output) instead of page references 
+# If the PDF_HYPERLINKS tag is set to YES, the LaTeX that is generated
+# is prepared for conversion to pdf (using ps2pdf). The pdf file will
+# contain links (just like the HTML output) instead of page references
 # This makes the output suitable for online browsing using a pdf viewer.
 
 PDF_HYPERLINKS         = NO
 
-# If the USE_PDFLATEX tag is set to YES, pdflatex will be used instead of 
-# plain latex in the generated Makefile. Set this option to YES to get a 
+# If the USE_PDFLATEX tag is set to YES, pdflatex will be used instead of
+# plain latex in the generated Makefile. Set this option to YES to get a
 # higher quality PDF documentation.
 
 USE_PDFLATEX           = NO
 
-# If the LATEX_BATCHMODE tag is set to YES, doxygen will add the \\batchmode. 
-# command to the generated LaTeX files. This will instruct LaTeX to keep 
-# running if errors occur, instead of asking the user for help. 
+# If the LATEX_BATCHMODE tag is set to YES, doxygen will add the \\batchmode.
+# command to the generated LaTeX files. This will instruct LaTeX to keep
+# running if errors occur, instead of asking the user for help.
 # This option is also used when generating formulas in HTML.
 
 LATEX_BATCHMODE        = NO
 
-# If LATEX_HIDE_INDICES is set to YES then doxygen will not 
-# include the index chapters (such as File Index, Compound Index, etc.) 
+# If LATEX_HIDE_INDICES is set to YES then doxygen will not
+# include the index chapters (such as File Index, Compound Index, etc.)
 # in the output.
 
 LATEX_HIDE_INDICES     = NO
 
+# If LATEX_SOURCE_CODE is set to YES then doxygen will include source code with syntax highlighting in the LaTeX output. Note that which sources are shown also depends on other settings such as SOURCE_BROWSER.
+
+LATEX_SOURCE_CODE      = NO
+
 #---------------------------------------------------------------------------
 # configuration options related to the RTF output
 #---------------------------------------------------------------------------
 
-# If the GENERATE_RTF tag is set to YES Doxygen will generate RTF output 
-# The RTF output is optimized for Word 97 and may not look very pretty with 
+# If the GENERATE_RTF tag is set to YES Doxygen will generate RTF output
+# The RTF output is optimized for Word 97 and may not look very pretty with
 # other RTF readers or editors.
 
 GENERATE_RTF           = NO
 
-# The RTF_OUTPUT tag is used to specify where the RTF docs will be put. 
-# If a relative path is entered the value of OUTPUT_DIRECTORY will be 
+# The RTF_OUTPUT tag is used to specify where the RTF docs will be put.
+# If a relative path is entered the value of OUTPUT_DIRECTORY will be
 # put in front of it. If left blank `rtf' will be used as the default path.
 
 RTF_OUTPUT             = rtf
 
-# If the COMPACT_RTF tag is set to YES Doxygen generates more compact 
-# RTF documents. This may be useful for small projects and may help to 
+# If the COMPACT_RTF tag is set to YES Doxygen generates more compact
+# RTF documents. This may be useful for small projects and may help to
 # save some trees in general.
 
 COMPACT_RTF            = NO
 
-# If the RTF_HYPERLINKS tag is set to YES, the RTF that is generated 
-# will contain hyperlink fields. The RTF file will 
-# contain links (just like the HTML output) instead of page references. 
-# This makes the output suitable for online browsing using WORD or other 
-# programs which support those fields. 
+# If the RTF_HYPERLINKS tag is set to YES, the RTF that is generated
+# will contain hyperlink fields. The RTF file will
+# contain links (just like the HTML output) instead of page references.
+# This makes the output suitable for online browsing using WORD or other
+# programs which support those fields.
 # Note: wordpad (write) and others do not support links.
 
 RTF_HYPERLINKS         = NO
 
-# Load stylesheet definitions from file. Syntax is similar to doxygen's 
-# config file, i.e. a series of assignments. You only have to provide 
+# Load stylesheet definitions from file. Syntax is similar to doxygen's
+# config file, i.e. a series of assignments. You only have to provide
 # replacements, missing definitions are set to their default value.
 
-RTF_STYLESHEET_FILE    = 
+RTF_STYLESHEET_FILE    =
 
-# Set optional variables used in the generation of an rtf document. 
+# Set optional variables used in the generation of an rtf document.
 # Syntax is similar to doxygen's config file.
 
-RTF_EXTENSIONS_FILE    = 
+RTF_EXTENSIONS_FILE    =
 
 #---------------------------------------------------------------------------
 # configuration options related to the man page output
 #---------------------------------------------------------------------------
 
-# If the GENERATE_MAN tag is set to YES (the default) Doxygen will 
+# If the GENERATE_MAN tag is set to YES (the default) Doxygen will
 # generate man pages
 
 GENERATE_MAN           = NO
 
-# The MAN_OUTPUT tag is used to specify where the man pages will be put. 
-# If a relative path is entered the value of OUTPUT_DIRECTORY will be 
+# The MAN_OUTPUT tag is used to specify where the man pages will be put.
+# If a relative path is entered the value of OUTPUT_DIRECTORY will be
 # put in front of it. If left blank `man' will be used as the default path.
 
 MAN_OUTPUT             = man
 
-# The MAN_EXTENSION tag determines the extension that is added to 
+# The MAN_EXTENSION tag determines the extension that is added to
 # the generated man pages (default is the subroutine's section .3)
 
 MAN_EXTENSION          = .3
 
-# If the MAN_LINKS tag is set to YES and Doxygen generates man output, 
-# then it will generate one additional man file for each entity 
-# documented in the real man page(s). These additional files 
-# only source the real man page, but without them the man command 
+# If the MAN_LINKS tag is set to YES and Doxygen generates man output,
+# then it will generate one additional man file for each entity
+# documented in the real man page(s). These additional files
+# only source the real man page, but without them the man command
 # would be unable to find the correct page. The default is NO.
 
 MAN_LINKS              = NO
@@ -932,33 +1133,33 @@
 # configuration options related to the XML output
 #---------------------------------------------------------------------------
 
-# If the GENERATE_XML tag is set to YES Doxygen will 
-# generate an XML file that captures the structure of 
+# If the GENERATE_XML tag is set to YES Doxygen will
+# generate an XML file that captures the structure of
 # the code including all documentation.
 
 GENERATE_XML           = NO
 
-# The XML_OUTPUT tag is used to specify where the XML pages will be put. 
-# If a relative path is entered the value of OUTPUT_DIRECTORY will be 
+# The XML_OUTPUT tag is used to specify where the XML pages will be put.
+# If a relative path is entered the value of OUTPUT_DIRECTORY will be
 # put in front of it. If left blank `xml' will be used as the default path.
 
 XML_OUTPUT             = xml
 
-# The XML_SCHEMA tag can be used to specify an XML schema, 
-# which can be used by a validating XML parser to check the 
+# The XML_SCHEMA tag can be used to specify an XML schema,
+# which can be used by a validating XML parser to check the
 # syntax of the XML files.
 
-XML_SCHEMA             = 
+XML_SCHEMA             =
 
-# The XML_DTD tag can be used to specify an XML DTD, 
-# which can be used by a validating XML parser to check the 
+# The XML_DTD tag can be used to specify an XML DTD,
+# which can be used by a validating XML parser to check the
 # syntax of the XML files.
 
-XML_DTD                = 
+XML_DTD                =
 
-# If the XML_PROGRAMLISTING tag is set to YES Doxygen will 
-# dump the program listings (including syntax highlighting 
-# and cross-referencing information) to the XML output. Note that 
+# If the XML_PROGRAMLISTING tag is set to YES Doxygen will
+# dump the program listings (including syntax highlighting
+# and cross-referencing information) to the XML output. Note that
 # enabling this will significantly increase the size of the XML output.
 
 XML_PROGRAMLISTING     = YES
@@ -967,10 +1168,10 @@
 # configuration options for the AutoGen Definitions output
 #---------------------------------------------------------------------------
 
-# If the GENERATE_AUTOGEN_DEF tag is set to YES Doxygen will 
-# generate an AutoGen Definitions (see autogen.sf.net) file 
-# that captures the structure of the code including all 
-# documentation. Note that this feature is still experimental 
+# If the GENERATE_AUTOGEN_DEF tag is set to YES Doxygen will
+# generate an AutoGen Definitions (see autogen.sf.net) file
+# that captures the structure of the code including all
+# documentation. Note that this feature is still experimental
 # and incomplete at the moment.
 
 GENERATE_AUTOGEN_DEF   = NO
@@ -979,319 +1180,338 @@
 # configuration options related to the Perl module output
 #---------------------------------------------------------------------------
 
-# If the GENERATE_PERLMOD tag is set to YES Doxygen will 
-# generate a Perl module file that captures the structure of 
-# the code including all documentation. Note that this 
-# feature is still experimental and incomplete at the 
+# If the GENERATE_PERLMOD tag is set to YES Doxygen will
+# generate a Perl module file that captures the structure of
+# the code including all documentation. Note that this
+# feature is still experimental and incomplete at the
 # moment.
 
 GENERATE_PERLMOD       = NO
 
-# If the PERLMOD_LATEX tag is set to YES Doxygen will generate 
-# the necessary Makefile rules, Perl scripts and LaTeX code to be able 
+# If the PERLMOD_LATEX tag is set to YES Doxygen will generate
+# the necessary Makefile rules, Perl scripts and LaTeX code to be able
 # to generate PDF and DVI output from the Perl module output.
 
 PERLMOD_LATEX          = NO
 
-# If the PERLMOD_PRETTY tag is set to YES the Perl module output will be 
-# nicely formatted so it can be parsed by a human reader.  This is useful 
-# if you want to understand what is going on.  On the other hand, if this 
-# tag is set to NO the size of the Perl module output will be much smaller 
+# If the PERLMOD_PRETTY tag is set to YES the Perl module output will be
+# nicely formatted so it can be parsed by a human reader.
+# This is useful
+# if you want to understand what is going on.
+# On the other hand, if this
+# tag is set to NO the size of the Perl module output will be much smaller
 # and Perl will parse it just the same.
 
 PERLMOD_PRETTY         = YES
 
-# The names of the make variables in the generated doxyrules.make file 
-# are prefixed with the string contained in PERLMOD_MAKEVAR_PREFIX. 
-# This is useful so different doxyrules.make files included by the same 
+# The names of the make variables in the generated doxyrules.make file
+# are prefixed with the string contained in PERLMOD_MAKEVAR_PREFIX.
+# This is useful so different doxyrules.make files included by the same
 # Makefile don't overwrite each other's variables.
 
-PERLMOD_MAKEVAR_PREFIX = 
+PERLMOD_MAKEVAR_PREFIX =
 
 #---------------------------------------------------------------------------
-# Configuration options related to the preprocessor   
+# Configuration options related to the preprocessor
 #---------------------------------------------------------------------------
 
-# If the ENABLE_PREPROCESSING tag is set to YES (the default) Doxygen will 
-# evaluate all C-preprocessor directives found in the sources and include 
+# If the ENABLE_PREPROCESSING tag is set to YES (the default) Doxygen will
+# evaluate all C-preprocessor directives found in the sources and include
 # files.
 
 ENABLE_PREPROCESSING   = YES
 
-# If the MACRO_EXPANSION tag is set to YES Doxygen will expand all macro 
-# names in the source code. If set to NO (the default) only conditional 
-# compilation will be performed. Macro expansion can be done in a controlled 
+# If the MACRO_EXPANSION tag is set to YES Doxygen will expand all macro
+# names in the source code. If set to NO (the default) only conditional
+# compilation will be performed. Macro expansion can be done in a controlled
 # way by setting EXPAND_ONLY_PREDEF to YES.
 
 MACRO_EXPANSION        = NO
 
-# If the EXPAND_ONLY_PREDEF and MACRO_EXPANSION tags are both set to YES 
-# then the macro expansion is limited to the macros specified with the 
+# If the EXPAND_ONLY_PREDEF and MACRO_EXPANSION tags are both set to YES
+# then the macro expansion is limited to the macros specified with the
 # PREDEFINED and EXPAND_AS_DEFINED tags.
 
 EXPAND_ONLY_PREDEF     = NO
 
-# If the SEARCH_INCLUDES tag is set to YES (the default) the includes files 
+# If the SEARCH_INCLUDES tag is set to YES (the default) the includes files
 # in the INCLUDE_PATH (see below) will be search if a #include is found.
 
 SEARCH_INCLUDES        = YES
 
-# The INCLUDE_PATH tag can be used to specify one or more directories that 
-# contain include files that are not input files but should be processed by 
+# The INCLUDE_PATH tag can be used to specify one or more directories that
+# contain include files that are not input files but should be processed by
 # the preprocessor.
 
-INCLUDE_PATH           = 
+INCLUDE_PATH           =
 
-# You can use the INCLUDE_FILE_PATTERNS tag to specify one or more wildcard 
-# patterns (like *.h and *.hpp) to filter out the header-files in the 
-# directories. If left blank, the patterns specified with FILE_PATTERNS will 
+# You can use the INCLUDE_FILE_PATTERNS tag to specify one or more wildcard
+# patterns (like *.h and *.hpp) to filter out the header-files in the
+# directories. If left blank, the patterns specified with FILE_PATTERNS will
 # be used.
 
-INCLUDE_FILE_PATTERNS  = 
+INCLUDE_FILE_PATTERNS  =
 
-# The PREDEFINED tag can be used to specify one or more macro names that 
-# are defined before the preprocessor is started (similar to the -D option of 
-# gcc). The argument of the tag is a list of macros of the form: name 
-# or name=definition (no spaces). If the definition and the = are 
-# omitted =1 is assumed. To prevent a macro definition from being 
-# undefined via #undef or recursively expanded use the := operator 
+# The PREDEFINED tag can be used to specify one or more macro names that
+# are defined before the preprocessor is started (similar to the -D option of
+# gcc). The argument of the tag is a list of macros of the form: name
+# or name=definition (no spaces). If the definition and the = are
+# omitted =1 is assumed. To prevent a macro definition from being
+# undefined via #undef or recursively expanded use the := operator
 # instead of the = operator.
 
-PREDEFINED             = 
+PREDEFINED             =
 
-# If the MACRO_EXPANSION and EXPAND_ONLY_PREDEF tags are set to YES then 
-# this tag can be used to specify a list of macro names that should be expanded. 
-# The macro definition that is found in the sources will be used. 
+# If the MACRO_EXPANSION and EXPAND_ONLY_PREDEF tags are set to YES then
+# this tag can be used to specify a list of macro names that should be expanded.
+# The macro definition that is found in the sources will be used.
 # Use the PREDEFINED tag if you want to use a different macro definition.
 
-EXPAND_AS_DEFINED      = 
+EXPAND_AS_DEFINED      =
 
-# If the SKIP_FUNCTION_MACROS tag is set to YES (the default) then 
-# doxygen's preprocessor will remove all function-like macros that are alone 
-# on a line, have an all uppercase name, and do not end with a semicolon. Such 
-# function macros are typically used for boiler-plate code, and will confuse 
+# If the SKIP_FUNCTION_MACROS tag is set to YES (the default) then
+# doxygen's preprocessor will remove all function-like macros that are alone
+# on a line, have an all uppercase name, and do not end with a semicolon. Such
+# function macros are typically used for boiler-plate code, and will confuse
 # the parser if not removed.
 
 SKIP_FUNCTION_MACROS   = YES
 
 #---------------------------------------------------------------------------
-# Configuration::additions related to external references   
+# Configuration::additions related to external references
 #---------------------------------------------------------------------------
 
-# The TAGFILES option can be used to specify one or more tagfiles. 
-# Optionally an initial location of the external documentation 
-# can be added for each tagfile. The format of a tag file without 
-# this location is as follows: 
-#   TAGFILES = file1 file2 ... 
-# Adding location for the tag files is done as follows: 
-#   TAGFILES = file1=loc1 "file2 = loc2" ... 
-# where "loc1" and "loc2" can be relative or absolute paths or 
-# URLs. If a location is present for each tag, the installdox tool 
+# The TAGFILES option can be used to specify one or more tagfiles.
+# Optionally an initial location of the external documentation
+# can be added for each tagfile. The format of a tag file without
+# this location is as follows:
+#
+# TAGFILES = file1 file2 ...
+# Adding location for the tag files is done as follows:
+#
+# TAGFILES = file1=loc1 "file2 = loc2" ...
+# where "loc1" and "loc2" can be relative or absolute paths or
+# URLs. If a location is present for each tag, the installdox tool
 # does not have to be run to correct the links.
 # Note that each tag file must have a unique name
 # (where the name does NOT include the path)
-# If a tag file is not located in the directory in which doxygen 
+# If a tag file is not located in the directory in which doxygen
 # is run, you must also specify the path to the tagfile here.
 
-TAGFILES               = 
+TAGFILES               =
 
-# When a file name is specified after GENERATE_TAGFILE, doxygen will create 
+# When a file name is specified after GENERATE_TAGFILE, doxygen will create
 # a tag file that is based on the input files it reads.
 
-GENERATE_TAGFILE       = 
+GENERATE_TAGFILE       =
 
-# If the ALLEXTERNALS tag is set to YES all external classes will be listed 
-# in the class index. If set to NO only the inherited external classes 
+# If the ALLEXTERNALS tag is set to YES all external classes will be listed
+# in the class index. If set to NO only the inherited external classes
 # will be listed.
 
 ALLEXTERNALS           = NO
 
-# If the EXTERNAL_GROUPS tag is set to YES all external groups will be listed 
-# in the modules index. If set to NO, only the current project's groups will 
+# If the EXTERNAL_GROUPS tag is set to YES all external groups will be listed
+# in the modules index. If set to NO, only the current project's groups will
 # be listed.
 
 EXTERNAL_GROUPS        = YES
 
-# The PERL_PATH should be the absolute path and name of the perl script 
+# The PERL_PATH should be the absolute path and name of the perl script
 # interpreter (i.e. the result of `which perl').
 
 PERL_PATH              = /usr/bin/perl
 
 #---------------------------------------------------------------------------
-# Configuration options related to the dot tool   
+# Configuration options related to the dot tool
 #---------------------------------------------------------------------------
 
-# If the CLASS_DIAGRAMS tag is set to YES (the default) Doxygen will 
-# generate a inheritance diagram (in HTML, RTF and LaTeX) for classes with base 
-# or super classes. Setting the tag to NO turns the diagrams off. Note that 
-# this option is superseded by the HAVE_DOT option below. This is only a 
-# fallback. It is recommended to install and use dot, since it yields more 
+# If the CLASS_DIAGRAMS tag is set to YES (the default) Doxygen will
+# generate a inheritance diagram (in HTML, RTF and LaTeX) for classes with base
+# or super classes. Setting the tag to NO turns the diagrams off. Note that
+# this option is superseded by the HAVE_DOT option below. This is only a
+# fallback. It is recommended to install and use dot, since it yields more
 # powerful graphs.
 
 CLASS_DIAGRAMS         = YES
 
-# You can define message sequence charts within doxygen comments using the \msc 
-# command. Doxygen will then run the mscgen tool (see http://www.mcternan.me.uk/mscgen/) to 
-# produce the chart and insert it in the documentation. The MSCGEN_PATH tag allows you to 
-# specify the directory where the mscgen tool resides. If left empty the tool is assumed to 
-# be found in the default search path.
+# You can define message sequence charts within doxygen comments using the \msc
+# command. Doxygen will then run the mscgen tool (see
+# http://www.mcternan.me.uk/mscgen/) to produce the chart and insert it in the
+# documentation. The MSCGEN_PATH tag allows you to specify the directory where
+# the mscgen tool resides. If left empty the tool is assumed to be found in the
+# default search path.
 
-MSCGEN_PATH            = 
+MSCGEN_PATH            =
 
-# If set to YES, the inheritance and collaboration graphs will hide 
-# inheritance and usage relations if the target is undocumented 
+# If set to YES, the inheritance and collaboration graphs will hide
+# inheritance and usage relations if the target is undocumented
 # or is not a class.
 
 HIDE_UNDOC_RELATIONS   = YES
 
-# If you set the HAVE_DOT tag to YES then doxygen will assume the dot tool is 
-# available from the path. This tool is part of Graphviz, a graph visualization 
-# toolkit from AT&T and Lucent Bell Labs. The other options in this section 
+# If you set the HAVE_DOT tag to YES then doxygen will assume the dot tool is
+# available from the path. This tool is part of Graphviz, a graph visualization
+# toolkit from AT&T and Lucent Bell Labs. The other options in this section
 # have no effect if this option is set to NO (the default)
 
-HAVE_DOT               = NO
+HAVE_DOT               = YES
 
-# If the CLASS_GRAPH and HAVE_DOT tags are set to YES then doxygen 
-# will generate a graph for each documented class showing the direct and 
-# indirect inheritance relations. Setting this tag to YES will force the 
+# By default doxygen will write a font called FreeSans.ttf to the output
+# directory and reference it in all dot files that doxygen generates. This
+# font does not include all possible unicode characters however, so when you need
+# these (or just want a differently looking font) you can specify the font name
+# using DOT_FONTNAME. You need need to make sure dot is able to find the font,
+# which can be done by putting it in a standard location or by setting the
+# DOTFONTPATH environment variable or by setting DOT_FONTPATH to the directory
+# containing the font.
+
+DOT_FONTNAME           = FreeSans
+
+# The DOT_FONTSIZE tag can be used to set the size of the font of dot graphs.
+# The default size is 10pt.
+
+DOT_FONTSIZE           = 10
+
+# By default doxygen will tell dot to use the output directory to look for the
+# FreeSans.ttf font (which doxygen will put there itself). If you specify a
+# different font using DOT_FONTNAME you can set the path where dot
+# can find it using this tag.
+
+DOT_FONTPATH           =
+
+# If the CLASS_GRAPH and HAVE_DOT tags are set to YES then doxygen
+# will generate a graph for each documented class showing the direct and
+# indirect inheritance relations. Setting this tag to YES will force the
 # the CLASS_DIAGRAMS tag to NO.
 
 CLASS_GRAPH            = YES
 
-# If the COLLABORATION_GRAPH and HAVE_DOT tags are set to YES then doxygen 
-# will generate a graph for each documented class showing the direct and 
-# indirect implementation dependencies (inheritance, containment, and 
+# If the COLLABORATION_GRAPH and HAVE_DOT tags are set to YES then doxygen
+# will generate a graph for each documented class showing the direct and
+# indirect implementation dependencies (inheritance, containment, and
 # class references variables) of the class with other documented classes.
 
 COLLABORATION_GRAPH    = YES
 
-# If the GROUP_GRAPHS and HAVE_DOT tags are set to YES then doxygen 
+# If the GROUP_GRAPHS and HAVE_DOT tags are set to YES then doxygen
 # will generate a graph for groups, showing the direct groups dependencies
 
 GROUP_GRAPHS           = YES
 
-# If the UML_LOOK tag is set to YES doxygen will generate inheritance and 
-# collaboration diagrams in a style similar to the OMG's Unified Modeling 
+# If the UML_LOOK tag is set to YES doxygen will generate inheritance and
+# collaboration diagrams in a style similar to the OMG's Unified Modeling
 # Language.
 
 UML_LOOK               = NO
 
-# If set to YES, the inheritance and collaboration graphs will show the 
+# If set to YES, the inheritance and collaboration graphs will show the
 # relations between templates and their instances.
 
 TEMPLATE_RELATIONS     = NO
 
-# If the ENABLE_PREPROCESSING, SEARCH_INCLUDES, INCLUDE_GRAPH, and HAVE_DOT 
-# tags are set to YES then doxygen will generate a graph for each documented 
-# file showing the direct and indirect include dependencies of the file with 
+# If the ENABLE_PREPROCESSING, SEARCH_INCLUDES, INCLUDE_GRAPH, and HAVE_DOT
+# tags are set to YES then doxygen will generate a graph for each documented
+# file showing the direct and indirect include dependencies of the file with
 # other documented files.
 
 INCLUDE_GRAPH          = YES
 
-# If the ENABLE_PREPROCESSING, SEARCH_INCLUDES, INCLUDED_BY_GRAPH, and 
-# HAVE_DOT tags are set to YES then doxygen will generate a graph for each 
-# documented header file showing the documented files that directly or 
+# If the ENABLE_PREPROCESSING, SEARCH_INCLUDES, INCLUDED_BY_GRAPH, and
+# HAVE_DOT tags are set to YES then doxygen will generate a graph for each
+# documented header file showing the documented files that directly or
 # indirectly include this file.
 
 INCLUDED_BY_GRAPH      = YES
 
-# If the CALL_GRAPH, SOURCE_BROWSER and HAVE_DOT tags are set to YES then doxygen will 
-# generate a call dependency graph for every global function or class method. 
-# Note that enabling this option will significantly increase the time of a run. 
-# So in most cases it will be better to enable call graphs for selected 
-# functions only using the \callgraph command.
+# If the CALL_GRAPH and HAVE_DOT options are set to YES then
+# doxygen will generate a call dependency graph for every global function
+# or class method. Note that enabling this option will significantly increase
+# the time of a run. So in most cases it will be better to enable call graphs
+# for selected functions only using the \callgraph command.
 
-CALL_GRAPH             = NO
+CALL_GRAPH             = YES
 
-# If the CALLER_GRAPH, SOURCE_BROWSER and HAVE_DOT tags are set to YES then doxygen will 
-# generate a caller dependency graph for every global function or class method. 
-# Note that enabling this option will significantly increase the time of a run. 
-# So in most cases it will be better to enable caller graphs for selected 
-# functions only using the \callergraph command.
+# If the CALLER_GRAPH and HAVE_DOT tags are set to YES then
+# doxygen will generate a caller dependency graph for every global function
+# or class method. Note that enabling this option will significantly increase
+# the time of a run. So in most cases it will be better to enable caller
+# graphs for selected functions only using the \callergraph command.
 
-CALLER_GRAPH           = NO
+CALLER_GRAPH           = YES
 
-# If the GRAPHICAL_HIERARCHY and HAVE_DOT tags are set to YES then doxygen 
+# If the GRAPHICAL_HIERARCHY and HAVE_DOT tags are set to YES then doxygen
 # will graphical hierarchy of all classes instead of a textual one.
 
 GRAPHICAL_HIERARCHY    = YES
 
-# If the DIRECTORY_GRAPH, SHOW_DIRECTORIES and HAVE_DOT tags are set to YES 
-# then doxygen will show the dependencies a directory has on other directories 
+# If the DIRECTORY_GRAPH, SHOW_DIRECTORIES and HAVE_DOT tags are set to YES
+# then doxygen will show the dependencies a directory has on other directories
 # in a graphical way. The dependency relations are determined by the #include
 # relations between the files in the directories.
 
 DIRECTORY_GRAPH        = YES
 
-# The DOT_IMAGE_FORMAT tag can be used to set the image format of the images 
+# The DOT_IMAGE_FORMAT tag can be used to set the image format of the images
 # generated by dot. Possible values are png, jpg, or gif
 # If left blank png will be used.
 
 DOT_IMAGE_FORMAT       = png
 
-# The tag DOT_PATH can be used to specify the path where the dot tool can be 
+# The tag DOT_PATH can be used to specify the path where the dot tool can be
 # found. If left blank, it is assumed the dot tool can be found in the path.
 
-DOT_PATH               = 
+DOT_PATH               =
 
-# The DOTFILE_DIRS tag can be used to specify one or more directories that 
-# contain dot files that are included in the documentation (see the 
+# The DOTFILE_DIRS tag can be used to specify one or more directories that
+# contain dot files that are included in the documentation (see the
 # \dotfile command).
 
-DOTFILE_DIRS           = 
+DOTFILE_DIRS           =
 
-# The MAX_DOT_GRAPH_MAX_NODES tag can be used to set the maximum number of 
-# nodes that will be shown in the graph. If the number of nodes in a graph 
-# becomes larger than this value, doxygen will truncate the graph, which is 
-# visualized by representing a node as a red box. Note that doxygen if the number 
-# of direct children of the root node in a graph is already larger than 
-# MAX_DOT_GRAPH_NOTES then the graph will not be shown at all. Also note 
+# The DOT_GRAPH_MAX_NODES tag can be used to set the maximum number of
+# nodes that will be shown in the graph. If the number of nodes in a graph
+# becomes larger than this value, doxygen will truncate the graph, which is
+# visualized by representing a node as a red box. Note that doxygen if the
+# number of direct children of the root node in a graph is already larger than
+# DOT_GRAPH_MAX_NODES then the graph will not be shown at all. Also note
 # that the size of a graph can be further restricted by MAX_DOT_GRAPH_DEPTH.
 
-DOT_GRAPH_MAX_NODES    = 50
+DOT_GRAPH_MAX_NODES    = 5000
 
-# The MAX_DOT_GRAPH_DEPTH tag can be used to set the maximum depth of the 
-# graphs generated by dot. A depth value of 3 means that only nodes reachable 
-# from the root by following a path via at most 3 edges will be shown. Nodes 
-# that lay further from the root node will be omitted. Note that setting this 
-# option to 1 or 2 may greatly reduce the computation time needed for large 
-# code bases. Also note that the size of a graph can be further restricted by 
+# The MAX_DOT_GRAPH_DEPTH tag can be used to set the maximum depth of the
+# graphs generated by dot. A depth value of 3 means that only nodes reachable
+# from the root by following a path via at most 3 edges will be shown. Nodes
+# that lay further from the root node will be omitted. Note that setting this
+# option to 1 or 2 may greatly reduce the computation time needed for large
+# code bases. Also note that the size of a graph can be further restricted by
 # DOT_GRAPH_MAX_NODES. Using a depth of 0 means no depth restriction.
 
-MAX_DOT_GRAPH_DEPTH    = 0
+MAX_DOT_GRAPH_DEPTH    = 5
 
-# Set the DOT_TRANSPARENT tag to YES to generate images with a transparent 
-# background. This is disabled by default, which results in a white background. 
-# Warning: Depending on the platform used, enabling this option may lead to 
-# badly anti-aliased labels on the edges of a graph (i.e. they become hard to 
-# read).
+# Set the DOT_TRANSPARENT tag to YES to generate images with a transparent
+# background. This is disabled by default, because dot on Windows does not
+# seem to support this out of the box. Warning: Depending on the platform used,
+# enabling this option may lead to badly anti-aliased labels on the edges of
+# a graph (i.e. they become hard to read).
 
 DOT_TRANSPARENT        = NO
 
-# Set the DOT_MULTI_TARGETS tag to YES allow dot to generate multiple output 
-# files in one run (i.e. multiple -o and -T options on the command line). This 
-# makes dot run faster, but since only newer versions of dot (>1.8.10) 
+# Set the DOT_MULTI_TARGETS tag to YES allow dot to generate multiple output
+# files in one run (i.e. multiple -o and -T options on the command line). This
+# makes dot run faster, but since only newer versions of dot (>1.8.10)
 # support this, this feature is disabled by default.
 
 DOT_MULTI_TARGETS      = NO
 
-# If the GENERATE_LEGEND tag is set to YES (the default) Doxygen will 
-# generate a legend page explaining the meaning of the various boxes and 
+# If the GENERATE_LEGEND tag is set to YES (the default) Doxygen will
+# generate a legend page explaining the meaning of the various boxes and
 # arrows in the dot generated graphs.
 
 GENERATE_LEGEND        = YES
 
-# If the DOT_CLEANUP tag is set to YES (the default) Doxygen will 
-# remove the intermediate dot files that are used to generate 
+# If the DOT_CLEANUP tag is set to YES (the default) Doxygen will
+# remove the intermediate dot files that are used to generate
 # the various graphs.
 
 DOT_CLEANUP            = YES
-
-#---------------------------------------------------------------------------
-# Configuration::additions related to the search engine   
-#---------------------------------------------------------------------------
-
-# The SEARCHENGINE tag specifies whether or not a search engine should be 
-# used. If set to NO the values of all tags below this one will be ignored.
-
-SEARCHENGINE           = NO

Modified: trunk/src/PhysfsStream/PhysfsSDL.cpp
===================================================================
--- trunk/src/PhysfsStream/PhysfsSDL.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/PhysfsStream/PhysfsSDL.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -89,3 +89,6 @@
     ops->close = funcClose;
     return ops;
 }
+
+/** @file PhysfsStream/PhysfsSDL.cpp */
+

Modified: trunk/src/PhysfsStream/PhysfsSDL.hpp
===================================================================
--- trunk/src/PhysfsStream/PhysfsSDL.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/PhysfsStream/PhysfsSDL.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -25,3 +25,6 @@
 
 #endif
 
+
+/** @file PhysfsStream/PhysfsSDL.hpp */
+

Modified: trunk/src/PhysfsStream/PhysfsStream.cpp
===================================================================
--- trunk/src/PhysfsStream/PhysfsStream.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/PhysfsStream/PhysfsStream.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -123,3 +123,6 @@
     delete rdbuf();
 }
 
+
+/** @file PhysfsStream/PhysfsStream.cpp */
+

Modified: trunk/src/PhysfsStream/PhysfsStream.hpp
===================================================================
--- trunk/src/PhysfsStream/PhysfsStream.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/PhysfsStream/PhysfsStream.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -72,3 +72,6 @@
 
 #endif
 
+
+/** @file PhysfsStream/PhysfsStream.hpp */
+

Modified: trunk/src/gui/Button.cpp
===================================================================
--- trunk/src/gui/Button.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Button.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -362,3 +362,6 @@
 }
 
 IMPLEMENT_COMPONENT_FACTORY(Button)
+
+/** @file gui/Button.cpp */
+

Modified: trunk/src/gui/Button.hpp
===================================================================
--- trunk/src/gui/Button.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Button.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -89,3 +89,6 @@
 };
 
 #endif
+
+/** @file gui/Button.hpp */
+

Modified: trunk/src/gui/Child.cpp
===================================================================
--- trunk/src/gui/Child.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Child.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -85,3 +85,6 @@
     std::vector<Child>::clear();
 }
 
+
+/** @file gui/Child.cpp */
+

Modified: trunk/src/gui/Child.hpp
===================================================================
--- trunk/src/gui/Child.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Child.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -105,3 +105,6 @@
 };
 
 #endif
+
+/** @file gui/Child.hpp */
+

Modified: trunk/src/gui/Color.cpp
===================================================================
--- trunk/src/gui/Color.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Color.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -101,3 +101,6 @@
         throw std::runtime_error(msg.str());
     }
 }
+
+/** @file gui/Color.cpp */
+

Modified: trunk/src/gui/Color.hpp
===================================================================
--- trunk/src/gui/Color.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Color.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -67,3 +67,6 @@
 
 #endif
 
+
+/** @file gui/Color.hpp */
+

Modified: trunk/src/gui/Component.cpp
===================================================================
--- trunk/src/gui/Component.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Component.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -217,3 +217,6 @@
     assert(false);
 }
 
+
+/** @file gui/Component.cpp */
+

Modified: trunk/src/gui/Component.hpp
===================================================================
--- trunk/src/gui/Component.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Component.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -166,3 +166,6 @@
 };
 
 #endif
+
+/** @file gui/Component.hpp */
+

Modified: trunk/src/gui/ComponentFactory.cpp
===================================================================
--- trunk/src/gui/ComponentFactory.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/ComponentFactory.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -158,3 +158,6 @@
     }
 }
 
+
+/** @file gui/ComponentFactory.cpp */
+

Modified: trunk/src/gui/ComponentFactory.hpp
===================================================================
--- trunk/src/gui/ComponentFactory.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/ComponentFactory.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -81,3 +81,6 @@
 
 #endif
 
+
+/** @file gui/ComponentFactory.hpp */
+

Modified: trunk/src/gui/ComponentLoader.cpp
===================================================================
--- trunk/src/gui/ComponentLoader.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/ComponentLoader.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -103,3 +103,6 @@
     return component;
 }
 
+
+/** @file gui/ComponentLoader.cpp */
+

Modified: trunk/src/gui/ComponentLoader.hpp
===================================================================
--- trunk/src/gui/ComponentLoader.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/ComponentLoader.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -52,3 +52,6 @@
 Component* createComponent(const std::string& type, XmlReader& reader);
 
 #endif
+
+/** @file gui/ComponentLoader.hpp */
+

Modified: trunk/src/gui/Desktop.cpp
===================================================================
--- trunk/src/gui/Desktop.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Desktop.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -243,3 +243,6 @@
     assert( component->getParent() == 0 );
     addQueue.push_back(component);
 }
+
+/** @file gui/Desktop.cpp */
+

Modified: trunk/src/gui/Desktop.hpp
===================================================================
--- trunk/src/gui/Desktop.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Desktop.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -67,3 +67,6 @@
 
 #endif
 
+
+/** @file gui/Desktop.hpp */
+

Modified: trunk/src/gui/Document.cpp
===================================================================
--- trunk/src/gui/Document.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Document.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -166,3 +166,6 @@
 }
 
 IMPLEMENT_COMPONENT_FACTORY(Document);
+
+/** @file gui/Document.cpp */
+

Modified: trunk/src/gui/Document.hpp
===================================================================
--- trunk/src/gui/Document.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Document.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -56,3 +56,6 @@
 
 #endif
 
+
+/** @file gui/Document.hpp */
+

Modified: trunk/src/gui/DocumentElement.hpp
===================================================================
--- trunk/src/gui/DocumentElement.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/DocumentElement.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -45,3 +45,6 @@
 
 #endif
 
+
+/** @file gui/DocumentElement.hpp */
+

Modified: trunk/src/gui/DocumentImage.cpp
===================================================================
--- trunk/src/gui/DocumentImage.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/DocumentImage.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -85,3 +85,6 @@
     painter.drawTexture(texture, Vector2(0, 0));
 }
 
+
+/** @file gui/DocumentImage.cpp */
+

Modified: trunk/src/gui/DocumentImage.hpp
===================================================================
--- trunk/src/gui/DocumentImage.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/DocumentImage.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -54,3 +54,6 @@
 
 #endif
 
+
+/** @file gui/DocumentImage.hpp */
+

Modified: trunk/src/gui/Event.cpp
===================================================================
--- trunk/src/gui/Event.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Event.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -57,3 +57,6 @@
     : type(UPDATE), inside(false), elapsedTime(_elapsedTime)
 {
 }
+
+/** @file gui/Event.cpp */
+

Modified: trunk/src/gui/Event.hpp
===================================================================
--- trunk/src/gui/Event.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Event.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -72,3 +72,6 @@
 
 #endif
 
+
+/** @file gui/Event.hpp */
+

Modified: trunk/src/gui/FilledRectangle.cpp
===================================================================
--- trunk/src/gui/FilledRectangle.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/FilledRectangle.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -73,3 +73,6 @@
 }
 
 IMPLEMENT_COMPONENT_FACTORY(FilledRectangle)
+
+/** @file gui/FilledRectangle.cpp */
+

Modified: trunk/src/gui/FilledRectangle.hpp
===================================================================
--- trunk/src/gui/FilledRectangle.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/FilledRectangle.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -47,3 +47,6 @@
 };
 
 #endif
+
+/** @file gui/FilledRectangle.hpp */
+

Modified: trunk/src/gui/Filter.cpp
===================================================================
--- trunk/src/gui/Filter.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Filter.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -59,3 +59,6 @@
     SDL_UnlockSurface(surface);
 }
 
+
+/** @file gui/Filter.cpp */
+

Modified: trunk/src/gui/Filter.hpp
===================================================================
--- trunk/src/gui/Filter.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Filter.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -31,3 +31,6 @@
 
 #endif
 
+
+/** @file gui/Filter.hpp */
+

Modified: trunk/src/gui/FontManager.cpp
===================================================================
--- trunk/src/gui/FontManager.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/FontManager.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -106,3 +106,6 @@
     return font;
 }
 
+
+/** @file gui/FontManager.cpp */
+

Modified: trunk/src/gui/FontManager.hpp
===================================================================
--- trunk/src/gui/FontManager.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/FontManager.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -74,3 +74,6 @@
 
 #endif
 
+
+/** @file gui/FontManager.hpp */
+

Modified: trunk/src/gui/Gradient.cpp
===================================================================
--- trunk/src/gui/Gradient.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Gradient.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -186,3 +186,6 @@
 }
 
 IMPLEMENT_COMPONENT_FACTORY(Gradient)
+
+/** @file gui/Gradient.cpp */
+

Modified: trunk/src/gui/Gradient.hpp
===================================================================
--- trunk/src/gui/Gradient.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Gradient.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -62,3 +62,6 @@
 
 #endif
 
+
+/** @file gui/Gradient.hpp */
+

Modified: trunk/src/gui/Image.cpp
===================================================================
--- trunk/src/gui/Image.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Image.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -136,3 +136,6 @@
 
 IMPLEMENT_COMPONENT_FACTORY(Image);
 
+
+/** @file gui/Image.cpp */
+

Modified: trunk/src/gui/Image.hpp
===================================================================
--- trunk/src/gui/Image.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Image.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -55,3 +55,6 @@
 
 #endif
 
+
+/** @file gui/Image.hpp */
+

Modified: trunk/src/gui/Painter.hpp
===================================================================
--- trunk/src/gui/Painter.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Painter.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -68,3 +68,6 @@
 };
 
 #endif
+
+/** @file gui/Painter.hpp */
+

Modified: trunk/src/gui/PainterGL/PainterGL.cpp
===================================================================
--- trunk/src/gui/PainterGL/PainterGL.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/PainterGL/PainterGL.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -227,3 +227,6 @@
     return 0;
 }
 
+
+/** @file gui/PainterGL/PainterGL.cpp */
+

Modified: trunk/src/gui/PainterGL/PainterGL.hpp
===================================================================
--- trunk/src/gui/PainterGL/PainterGL.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/PainterGL/PainterGL.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -77,3 +77,6 @@
 };
 
 #endif
+
+/** @file gui/PainterGL/PainterGL.hpp */
+

Modified: trunk/src/gui/PainterGL/TextureGL.cpp
===================================================================
--- trunk/src/gui/PainterGL/TextureGL.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/PainterGL/TextureGL.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -32,3 +32,6 @@
     glDeleteTextures(1, handles);
 }
 
+
+/** @file gui/PainterGL/TextureGL.cpp */
+

Modified: trunk/src/gui/PainterGL/TextureGL.hpp
===================================================================
--- trunk/src/gui/PainterGL/TextureGL.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/PainterGL/TextureGL.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -50,3 +50,6 @@
 
 #endif
 
+
+/** @file gui/PainterGL/TextureGL.hpp */
+

Modified: trunk/src/gui/PainterGL/TextureManagerGL.cpp
===================================================================
--- trunk/src/gui/PainterGL/TextureManagerGL.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/PainterGL/TextureManagerGL.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -94,3 +94,6 @@
     return texture;
 }
 
+
+/** @file gui/PainterGL/TextureManagerGL.cpp */
+

Modified: trunk/src/gui/PainterGL/TextureManagerGL.hpp
===================================================================
--- trunk/src/gui/PainterGL/TextureManagerGL.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/PainterGL/TextureManagerGL.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -31,3 +31,6 @@
 
 #endif
 
+
+/** @file gui/PainterGL/TextureManagerGL.hpp */
+

Modified: trunk/src/gui/PainterSDL/PainterSDL.cpp
===================================================================
--- trunk/src/gui/PainterSDL/PainterSDL.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/PainterSDL/PainterSDL.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -287,3 +287,6 @@
     return new PainterSDL(textureSDL);
 }
 
+
+/** @file gui/PainterSDL/PainterSDL.cpp */
+

Modified: trunk/src/gui/PainterSDL/PainterSDL.hpp
===================================================================
--- trunk/src/gui/PainterSDL/PainterSDL.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/PainterSDL/PainterSDL.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -82,3 +82,6 @@
 };
 
 #endif
+
+/** @file gui/PainterSDL/PainterSDL.hpp */
+

Modified: trunk/src/gui/PainterSDL/TextureManagerSDL.cpp
===================================================================
--- trunk/src/gui/PainterSDL/TextureManagerSDL.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/PainterSDL/TextureManagerSDL.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -80,3 +80,6 @@
     return new TextureSDL(surface);
 }
 
+
+/** @file gui/PainterSDL/TextureManagerSDL.cpp */
+

Modified: trunk/src/gui/PainterSDL/TextureManagerSDL.hpp
===================================================================
--- trunk/src/gui/PainterSDL/TextureManagerSDL.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/PainterSDL/TextureManagerSDL.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -37,3 +37,6 @@
 };
 
 #endif
+
+/** @file gui/PainterSDL/TextureManagerSDL.hpp */
+

Modified: trunk/src/gui/PainterSDL/TextureSDL.cpp
===================================================================
--- trunk/src/gui/PainterSDL/TextureSDL.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/PainterSDL/TextureSDL.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -29,3 +29,6 @@
         zoomSurface = NULL;
     }
 }
+
+/** @file gui/PainterSDL/TextureSDL.cpp */
+

Modified: trunk/src/gui/PainterSDL/TextureSDL.hpp
===================================================================
--- trunk/src/gui/PainterSDL/TextureSDL.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/PainterSDL/TextureSDL.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -63,3 +63,6 @@
 };
 
 #endif
+
+/** @file gui/PainterSDL/TextureSDL.hpp */
+

Modified: trunk/src/gui/Panel.cpp
===================================================================
--- trunk/src/gui/Panel.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Panel.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -134,3 +134,6 @@
 
 IMPLEMENT_COMPONENT_FACTORY(Panel);
 
+
+/** @file gui/Panel.cpp */
+

Modified: trunk/src/gui/Panel.hpp
===================================================================
--- trunk/src/gui/Panel.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Panel.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -51,3 +51,6 @@
 
 #endif
 
+
+/** @file gui/Panel.hpp */
+

Modified: trunk/src/gui/Paragraph.cpp
===================================================================
--- trunk/src/gui/Paragraph.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Paragraph.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -540,3 +540,6 @@
 
 IMPLEMENT_COMPONENT_FACTORY(Paragraph);
 
+
+/** @file gui/Paragraph.cpp */
+

Modified: trunk/src/gui/Paragraph.hpp
===================================================================
--- trunk/src/gui/Paragraph.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Paragraph.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -112,3 +112,6 @@
 
 #endif
 
+
+/** @file gui/Paragraph.hpp */
+

Modified: trunk/src/gui/Rect2D.cpp
===================================================================
--- trunk/src/gui/Rect2D.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Rect2D.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -29,3 +29,6 @@
     p2.x = std::max(p2.x, other.p2.x);
     p2.y = std::max(p2.y, other.p2.y);
 }
+
+/** @file gui/Rect2D.cpp */
+

Modified: trunk/src/gui/Rect2D.hpp
===================================================================
--- trunk/src/gui/Rect2D.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Rect2D.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -111,3 +111,6 @@
 };
 
 #endif
+
+/** @file gui/Rect2D.hpp */
+

Modified: trunk/src/gui/ScrollBar.cpp
===================================================================
--- trunk/src/gui/ScrollBar.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/ScrollBar.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -258,3 +258,6 @@
 }
 
 IMPLEMENT_COMPONENT_FACTORY(ScrollBar);
+
+/** @file gui/ScrollBar.cpp */
+

Modified: trunk/src/gui/ScrollBar.hpp
===================================================================
--- trunk/src/gui/ScrollBar.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/ScrollBar.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -86,3 +86,6 @@
 
 #endif
 
+
+/** @file gui/ScrollBar.hpp */
+

Modified: trunk/src/gui/ScrollView.cpp
===================================================================
--- trunk/src/gui/ScrollView.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/ScrollView.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -173,3 +173,6 @@
 
 IMPLEMENT_COMPONENT_FACTORY(ScrollView);
 
+
+/** @file gui/ScrollView.cpp */
+

Modified: trunk/src/gui/ScrollView.hpp
===================================================================
--- trunk/src/gui/ScrollView.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/ScrollView.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -55,3 +55,6 @@
 
 #endif
 
+
+/** @file gui/ScrollView.hpp */
+

Modified: trunk/src/gui/Style.cpp
===================================================================
--- trunk/src/gui/Style.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Style.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -192,3 +192,6 @@
     styleRegistry.insert(std::make_pair(name, style));
 }
 
+
+/** @file gui/Style.cpp */
+

Modified: trunk/src/gui/Style.hpp
===================================================================
--- trunk/src/gui/Style.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Style.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -70,3 +70,6 @@
 
 #endif
 
+
+/** @file gui/Style.hpp */
+

Modified: trunk/src/gui/SwitchComponent.cpp
===================================================================
--- trunk/src/gui/SwitchComponent.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/SwitchComponent.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -177,3 +177,6 @@
 }
 
 IMPLEMENT_COMPONENT_FACTORY(SwitchComponent);
+
+/** @file gui/SwitchComponent.cpp */
+

Modified: trunk/src/gui/SwitchComponent.hpp
===================================================================
--- trunk/src/gui/SwitchComponent.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/SwitchComponent.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -54,3 +54,6 @@
 
 #endif
 
+
+/** @file gui/SwitchComponent.hpp */
+

Modified: trunk/src/gui/TableLayout.cpp
===================================================================
--- trunk/src/gui/TableLayout.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/TableLayout.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -465,3 +465,6 @@
 
 IMPLEMENT_COMPONENT_FACTORY(TableLayout);
 
+
+/** @file gui/TableLayout.cpp */
+

Modified: trunk/src/gui/TableLayout.hpp
===================================================================
--- trunk/src/gui/TableLayout.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/TableLayout.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -111,3 +111,6 @@
 
 #endif
 
+
+/** @file gui/TableLayout.hpp */
+

Modified: trunk/src/gui/Texture.hpp
===================================================================
--- trunk/src/gui/Texture.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Texture.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -43,3 +43,6 @@
 };
 
 #endif
+
+/** @file gui/Texture.hpp */
+

Modified: trunk/src/gui/TextureManager.cpp
===================================================================
--- trunk/src/gui/TextureManager.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/TextureManager.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -81,3 +81,6 @@
     return result;
 }
 
+
+/** @file gui/TextureManager.cpp */
+

Modified: trunk/src/gui/TextureManager.hpp
===================================================================
--- trunk/src/gui/TextureManager.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/TextureManager.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -97,3 +97,6 @@
 extern TextureManager* texture_manager;
 
 #endif
+
+/** @file gui/TextureManager.hpp */
+

Modified: trunk/src/gui/TooltipManager.cpp
===================================================================
--- trunk/src/gui/TooltipManager.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/TooltipManager.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -130,3 +130,6 @@
 }
 
 IMPLEMENT_COMPONENT_FACTORY(TooltipManager);
+
+/** @file gui/TooltipManager.cpp */
+

Modified: trunk/src/gui/TooltipManager.hpp
===================================================================
--- trunk/src/gui/TooltipManager.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/TooltipManager.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -61,3 +61,6 @@
 
 #endif
 
+
+/** @file gui/TooltipManager.hpp */
+

Modified: trunk/src/gui/Vector2.hpp
===================================================================
--- trunk/src/gui/Vector2.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Vector2.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -128,3 +128,6 @@
 
 #endif
 
+
+/** @file gui/Vector2.hpp */
+

Modified: trunk/src/gui/Window.cpp
===================================================================
--- trunk/src/gui/Window.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Window.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -233,3 +233,6 @@
 }
 
 IMPLEMENT_COMPONENT_FACTORY(Window)
+
+/** @file gui/Window.cpp */
+

Modified: trunk/src/gui/Window.hpp
===================================================================
--- trunk/src/gui/Window.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/Window.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -63,3 +63,6 @@
 
 #endif
 
+
+/** @file gui/Window.hpp */
+

Modified: trunk/src/gui/XmlReader.cpp
===================================================================
--- trunk/src/gui/XmlReader.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/XmlReader.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -17,14 +17,14 @@
 */
 
 /**
- * @file XmlReader.cpp
+ * @file gui/XmlReader.cpp
  * @brief Implement a simple XML file reader (simple wrapper around libxml2 xmlreader interface).
  * @author Matthias Braun.
  */
 
 #include <config.h>
 
-#include "XmlReader.hpp"
+#include "./XmlReader.hpp"
 
 #include <physfs.h>
 
@@ -97,3 +97,6 @@
     return res;
 }
 
+
+/** @file gui/XmlReader.cpp */
+

Modified: trunk/src/gui/XmlReader.hpp
===================================================================
--- trunk/src/gui/XmlReader.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/XmlReader.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -18,7 +18,7 @@
 
 /**
  * @author Matthias Braun.
- * @file XmlReader.hpp
+ * @file gui/XmlReader.hpp
  * @brief Simple wrapper around libxml2 xmlreader interface.
  */
 
@@ -159,3 +159,6 @@
 
 #endif
 
+
+/** @file gui/XmlReader.hpp */
+

Modified: trunk/src/gui/callback/Callback.hpp
===================================================================
--- trunk/src/gui/callback/Callback.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/callback/Callback.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -94,3 +94,6 @@
 }
 
 #endif
+
+/** @file gui/callback/Callback.hpp */
+

Modified: trunk/src/gui/callback/CallbackBase.hpp
===================================================================
--- trunk/src/gui/callback/CallbackBase.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/callback/CallbackBase.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -41,3 +41,6 @@
 
 #endif
 
+
+/** @file gui/callback/CallbackBase.hpp */
+

Modified: trunk/src/gui/callback/Signal.hpp
===================================================================
--- trunk/src/gui/callback/Signal.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui/callback/Signal.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -105,3 +105,6 @@
 
 #endif
 
+
+/** @file gui/callback/Signal.hpp */
+

Modified: trunk/src/gui_interface/dialbox_interface.h
===================================================================
--- trunk/src/gui_interface/dialbox_interface.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui_interface/dialbox_interface.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -6,3 +6,6 @@
 
 
 #endif
+
+/** @file gui_interface/dialbox_interface.h */
+

Modified: trunk/src/gui_interface/mps.h
===================================================================
--- trunk/src/gui_interface/mps.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui_interface/mps.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -66,3 +66,6 @@
 
 #endif /* __mps_h__ */
 
+
+/** @file gui_interface/mps.h */
+

Modified: trunk/src/gui_interface/pbar_interface.h
===================================================================
--- trunk/src/gui_interface/pbar_interface.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui_interface/pbar_interface.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -73,3 +73,6 @@
 
 
 
+
+/** @file gui_interface/pbar_interface.h */
+

Modified: trunk/src/gui_interface/readpng.h
===================================================================
--- trunk/src/gui_interface/readpng.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui_interface/readpng.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -9,3 +9,6 @@
 int load_png_graphics (void);
 
 #endif /* __readpng_h__ */
+
+/** @file gui_interface/readpng.h */
+

Modified: trunk/src/gui_interface/screen_interface.h
===================================================================
--- trunk/src/gui_interface/screen_interface.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui_interface/screen_interface.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -65,3 +65,6 @@
 
 #endif	/* __screen_h__ */
 
+
+/** @file gui_interface/screen_interface.h */
+

Modified: trunk/src/gui_interface/shared_globals.h
===================================================================
--- trunk/src/gui_interface/shared_globals.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/gui_interface/shared_globals.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -30,3 +30,6 @@
 
 
 #endif
+
+/** @file gui_interface/shared_globals.h */
+

Modified: trunk/src/lincity/all_buildings.h
===================================================================
--- trunk/src/lincity/all_buildings.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/all_buildings.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -163,3 +163,6 @@
 /********   end of buildings // groups   ************/
 
 #endif // __all_buildings_h__
+
+/** @file lincity/all_buildings.h */
+

Modified: trunk/src/lincity/confw32.h
===================================================================
--- trunk/src/lincity/confw32.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/confw32.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -94,3 +94,6 @@
     
 /* Version number of package */ 
 #define VERSION "1.13.2"
+
+/** @file lincity/confw32.h */
+

Modified: trunk/src/lincity/engglobs.cpp
===================================================================
--- trunk/src/lincity/engglobs.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/engglobs.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -88,3 +88,6 @@
 int alt_min, alt_max, alt_step;
 
 int fast_time_for_year;
+
+/** @file lincity/engglobs.cpp */
+

Modified: trunk/src/lincity/engglobs.h
===================================================================
--- trunk/src/lincity/engglobs.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/engglobs.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -68,3 +68,6 @@
 
 extern int fast_time_for_year;
 #endif /* __engglobs_h__ */
+
+/** @file lincity/engglobs.h */
+

Modified: trunk/src/lincity/engine.cpp
===================================================================
--- trunk/src/lincity/engine.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/engine.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -788,3 +788,6 @@
     return (-1); // only water, not river
 }
 
+
+/** @file lincity/engine.cpp */
+

Modified: trunk/src/lincity/engine.h
===================================================================
--- trunk/src/lincity/engine.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/engine.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -27,3 +27,6 @@
 extern long real_time;
 
 #endif /* __engine_h__ */
+
+/** @file lincity/engine.h */
+

Modified: trunk/src/lincity/fileutil.cpp
===================================================================
--- trunk/src/lincity/fileutil.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/fileutil.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -549,3 +549,6 @@
     fclose(fp);
 #endif
 }
+
+/** @file lincity/fileutil.cpp */
+

Modified: trunk/src/lincity/fileutil.h
===================================================================
--- trunk/src/lincity/fileutil.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/fileutil.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -52,3 +52,6 @@
 void debug_printf(char *fmt, ...);
 
 #endif /* __fileutil_h__ */
+
+/** @file lincity/fileutil.h */
+

Modified: trunk/src/lincity/groups.h
===================================================================
--- trunk/src/lincity/groups.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/groups.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -79,3 +79,6 @@
 	     (group == GROUP_TREE3))
 
 #endif // __groups_h__
+
+/** @file lincity/groups.h */
+

Modified: trunk/src/lincity/init_game.cpp
===================================================================
--- trunk/src/lincity/init_game.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/init_game.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -1250,3 +1250,6 @@
 }
 
 
+
+/** @file lincity/init_game.cpp */
+

Modified: trunk/src/lincity/init_game.h
===================================================================
--- trunk/src/lincity/init_game.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/init_game.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -12,3 +12,6 @@
 void new_city(int *originx, int *originy, int random_village);
 
 #endif /* __init_game_h__ */
+
+/** @file lincity/init_game.h */
+

Modified: trunk/src/lincity/lc_locale.cpp
===================================================================
--- trunk/src/lincity/lc_locale.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/lc_locale.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -33,3 +33,6 @@
 #endif /* ENABLE_NLS */
     return;
 }
+
+/** @file lincity/lc_locale.cpp */
+

Modified: trunk/src/lincity/lc_locale.h
===================================================================
--- trunk/src/lincity/lc_locale.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/lc_locale.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -4,3 +4,6 @@
 void lincity_set_locale(void);
 
 #endif
+
+/** @file lincity/lc_locale.h */
+

Modified: trunk/src/lincity/lcconfig.h
===================================================================
--- trunk/src/lincity/lcconfig.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/lcconfig.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -19,3 +19,6 @@
 #endif
 
 #endif /* __lcconfig_h__ */
+
+/** @file lincity/lcconfig.h */
+

Modified: trunk/src/lincity/lclib.cpp
===================================================================
--- trunk/src/lincity/lclib.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/lclib.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -236,3 +236,6 @@
 
     return tmp;
 }
+
+/** @file lincity/lclib.cpp */
+

Modified: trunk/src/lincity/lclib.h
===================================================================
--- trunk/src/lincity/lclib.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/lclib.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -25,3 +25,6 @@
 int max_int(int i1, int i2);
 
 #endif
+
+/** @file lincity/lclib.h */
+

Modified: trunk/src/lincity/lcstring.h
===================================================================
--- trunk/src/lincity/lcstring.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/lcstring.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -18,3 +18,6 @@
 #endif
 
 #endif /* __lcstring_h__ */
+
+/** @file lincity/lcstring.h */
+

Modified: trunk/src/lincity/lctypes.h
===================================================================
--- trunk/src/lincity/lctypes.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/lctypes.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -714,3 +714,6 @@
 #define CST_NONE 1000
 
 #endif /* __lctypes_h__ */
+
+/** @file lincity/lctypes.h */
+

Modified: trunk/src/lincity/lin-city.h
===================================================================
--- trunk/src/lincity/lin-city.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/lin-city.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -138,3 +138,6 @@
 #include "lintypes.h"
 
 #endif /* __lin_city_h__ */
+
+/** @file lincity/lin-city.h */
+

Modified: trunk/src/lincity/lintypes.cpp
===================================================================
--- trunk/src/lincity/lintypes.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/lintypes.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -635,3 +635,6 @@
 {
     return get_group_cost((short)get_group_of_type(type));
 }
+
+/** @file lincity/lintypes.cpp */
+

Modified: trunk/src/lincity/lintypes.h
===================================================================
--- trunk/src/lincity/lintypes.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/lintypes.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -91,3 +91,6 @@
 
 
 #endif /* __lintypes_h__ */
+
+/** @file lincity/lintypes.h */
+

Modified: trunk/src/lincity/loadsave.cpp
===================================================================
--- trunk/src/lincity/loadsave.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/loadsave.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -554,3 +554,6 @@
 
 }
 
+
+/** @file lincity/loadsave.cpp */
+

Modified: trunk/src/lincity/loadsave.h
===================================================================
--- trunk/src/lincity/loadsave.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/loadsave.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -34,3 +34,6 @@
 extern void load_city_old(char *);
 
 #endif /* __loadsave_h__ */
+
+/** @file lincity/loadsave.h */
+

Modified: trunk/src/lincity/modules/all_modules.h
===================================================================
--- trunk/src/lincity/modules/all_modules.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/all_modules.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -38,3 +38,6 @@
 
 #endif
 
+
+/** @file lincity/modules/all_modules.h */
+

Modified: trunk/src/lincity/modules/blacksmith.cpp
===================================================================
--- trunk/src/lincity/modules/blacksmith.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/blacksmith.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -97,3 +97,6 @@
     mps_store_sddp(i++, _("Goods"), MP_INFO(x, y).int_1, MAX_GOODS_AT_BLACKSMITH);
     mps_store_sddp(i++, _("Coal"), MP_INFO(x, y).int_3, MAX_COAL_AT_BLACKSMITH);
 }
+
+/** @file lincity/modules/blacksmith.cpp */
+

Modified: trunk/src/lincity/modules/blacksmith.h
===================================================================
--- trunk/src/lincity/modules/blacksmith.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/blacksmith.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -16,3 +16,6 @@
 #define BLACKSMITH_ANIM_THRESHOLD 10
 #define BLACKSMITH_ANIM_SPEED    200
 
+
+/** @file lincity/modules/blacksmith.h */
+

Modified: trunk/src/lincity/modules/coal_power.cpp
===================================================================
--- trunk/src/lincity/modules/coal_power.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/coal_power.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -99,3 +99,6 @@
     mps_store_sfp(i++, _("Tech"), MP_TECH(x, y) * 100.0 / MAX_TECH_LEVEL);
     mps_store_sd(i++, _("Grid ID"), MP_INFO(x, y).int_6);
 }
+
+/** @file lincity/modules/coal_power.cpp */
+

Modified: trunk/src/lincity/modules/coal_power.h
===================================================================
--- trunk/src/lincity/modules/coal_power.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/coal_power.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -6,3 +6,6 @@
 #define GROUP_COAL_POWER_FIREC  80
 
 
+
+/** @file lincity/modules/coal_power.h */
+

Modified: trunk/src/lincity/modules/coalmine.cpp
===================================================================
--- trunk/src/lincity/modules/coalmine.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/coalmine.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -165,3 +165,6 @@
     }
 
 }
+
+/** @file lincity/modules/coalmine.cpp */
+

Modified: trunk/src/lincity/modules/coalmine.h
===================================================================
--- trunk/src/lincity/modules/coalmine.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/coalmine.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -7,3 +7,6 @@
 #define GROUP_COALMINE_FIREC  85
 
 
+
+/** @file lincity/modules/coalmine.h */
+

Modified: trunk/src/lincity/modules/commune.cpp
===================================================================
--- trunk/src/lincity/modules/commune.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/commune.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -186,3 +186,6 @@
     p = (MP_INFO(x, y).int_5 & 8) ? _("Yes") : _("No");
     mps_store_ss(i++, _("Waste"), p);
 }
+
+/** @file lincity/modules/commune.cpp */
+

Modified: trunk/src/lincity/modules/commune.h
===================================================================
--- trunk/src/lincity/modules/commune.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/commune.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -9,3 +9,6 @@
 #define COMMUNE_ANIM_SPEED 750
 #define COMMUNE_POP  5
 
+
+/** @file lincity/modules/commune.h */
+

Modified: trunk/src/lincity/modules/cricket.cpp
===================================================================
--- trunk/src/lincity/modules/cricket.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/cricket.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -97,3 +97,6 @@
     mps_store_sddp(i++, _("Goods"), MP_INFO(x, y).int_2, MAX_GOODS_AT_CRICKET);
 
 }
+
+/** @file lincity/modules/cricket.cpp */
+

Modified: trunk/src/lincity/modules/cricket.h
===================================================================
--- trunk/src/lincity/modules/cricket.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/cricket.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -16,3 +16,6 @@
 
 #define CRICKET_JOB_SWING 4
 
+
+/** @file lincity/modules/cricket.h */
+

Modified: trunk/src/lincity/modules/fire.cpp
===================================================================
--- trunk/src/lincity/modules/fire.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/fire.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -85,3 +85,6 @@
     } else if (real_time >= MP_INFO(x, y).int_3)
         MP_INFO(x, y).int_3 = -1;
 }
+
+/** @file lincity/modules/fire.cpp */
+

Modified: trunk/src/lincity/modules/fire.h
===================================================================
--- trunk/src/lincity/modules/fire.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/fire.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -6,3 +6,6 @@
 #define GROUP_FIRE_FIREC  0
 
 
+
+/** @file lincity/modules/fire.h */
+

Modified: trunk/src/lincity/modules/firestation.cpp
===================================================================
--- trunk/src/lincity/modules/firestation.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/firestation.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -114,3 +114,6 @@
     mps_store_sddp(i++, _("Goods"), MP_INFO(x, y).int_2, MAX_GOODS_AT_FIRESTATION);
 
 }
+
+/** @file lincity/modules/firestation.cpp */
+

Modified: trunk/src/lincity/modules/firestation.h
===================================================================
--- trunk/src/lincity/modules/firestation.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/firestation.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -16,3 +16,6 @@
 #define GROUP_FIRESTATION_FIREC 0
 
 
+
+/** @file lincity/modules/firestation.h */
+

Modified: trunk/src/lincity/modules/health_centre.cpp
===================================================================
--- trunk/src/lincity/modules/health_centre.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/health_centre.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -63,3 +63,6 @@
     mps_store_sddp(i++, _("Goods"), MP_INFO(x, y).int_2, MAX_GOODS_AT_HEALTH_CENTRE);
 
 }
+
+/** @file lincity/modules/health_centre.cpp */
+

Modified: trunk/src/lincity/modules/health_centre.h
===================================================================
--- trunk/src/lincity/modules/health_centre.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/health_centre.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -15,3 +15,6 @@
 #define GROUP_HEALTH_FIREC 2
 
 
+
+/** @file lincity/modules/health_centre.h */
+

Modified: trunk/src/lincity/modules/heavy_industry.cpp
===================================================================
--- trunk/src/lincity/modules/heavy_industry.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/heavy_industry.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -288,3 +288,6 @@
     mps_store_sddp(i++, _("Coal"), MP_INFO(x, y).int_4, MAX_COAL_AT_INDUSTRY_H);
     mps_store_sfp(i++, _("Capacity"), MP_INFO(x, y).int_5);
 }
+
+/** @file lincity/modules/heavy_industry.cpp */
+

Modified: trunk/src/lincity/modules/heavy_industry.h
===================================================================
--- trunk/src/lincity/modules/heavy_industry.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/heavy_industry.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -13,3 +13,6 @@
 
 #include "rail.h"
 #define MAX_STEEL_AT_INDUSTRY_H (MAX_STEEL_ON_RAIL*10)
+
+/** @file lincity/modules/heavy_industry.h */
+

Modified: trunk/src/lincity/modules/light_industry.cpp
===================================================================
--- trunk/src/lincity/modules/light_industry.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/light_industry.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -287,3 +287,6 @@
     mps_store_sddp(i++, _("Steel"), MP_INFO(x, y).int_4, MAX_STEEL_AT_INDUSTRY_L);
     mps_store_sddp(i++, _("Jobs"), MP_INFO(x, y).int_5, MAX_JOBS_AT_INDUSTRY_L);
 }
+
+/** @file lincity/modules/light_industry.cpp */
+

Modified: trunk/src/lincity/modules/light_industry.h
===================================================================
--- trunk/src/lincity/modules/light_industry.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/light_industry.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -24,3 +24,6 @@
 #define GROUP_INDUSTRY_L_FIREC 70
 
 
+
+/** @file lincity/modules/light_industry.h */
+

Modified: trunk/src/lincity/modules/market.cpp
===================================================================
--- trunk/src/lincity/modules/market.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/market.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -1022,3 +1022,6 @@
     mps_store_sddp(i++, _("Steel"), MP_INFO(x, y).int_6, MAX_STEEL_IN_MARKET);
     mps_store_sddp(i++, _("Waste"), MP_INFO(x, y).int_7, MAX_WASTE_IN_MARKET);
 }
+
+/** @file lincity/modules/market.cpp */
+

Modified: trunk/src/lincity/modules/market.h
===================================================================
--- trunk/src/lincity/modules/market.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/market.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -20,3 +20,6 @@
 #define GROUP_MARKET_FIREC 80
 
 
+
+/** @file lincity/modules/market.h */
+

Modified: trunk/src/lincity/modules/mill.cpp
===================================================================
--- trunk/src/lincity/modules/mill.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/mill.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -101,3 +101,6 @@
     mps_store_sddp(i++, _("Coal"), MP_INFO(x, y).int_3, MAX_COAL_AT_MILL);
 
 }
+
+/** @file lincity/modules/mill.cpp */
+

Modified: trunk/src/lincity/modules/mill.h
===================================================================
--- trunk/src/lincity/modules/mill.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/mill.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -19,3 +19,6 @@
 #define GROUP_MILL_FIREC  60
 
 
+
+/** @file lincity/modules/mill.h */
+

Modified: trunk/src/lincity/modules/modules.h
===================================================================
--- trunk/src/lincity/modules/modules.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/modules.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -20,3 +20,6 @@
 #include "modules_interfaces.h"
 
 #endif /* __modules_h__ */
+
+/** @file lincity/modules/modules.h */
+

Modified: trunk/src/lincity/modules/modules_interfaces.h
===================================================================
--- trunk/src/lincity/modules/modules_interfaces.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/modules_interfaces.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -137,3 +137,6 @@
 void mps_windmill(int x, int y);
 
 #endif
+
+/** @file lincity/modules/modules_interfaces.h */
+

Modified: trunk/src/lincity/modules/monument.cpp
===================================================================
--- trunk/src/lincity/modules/monument.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/monument.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -66,3 +66,6 @@
         mps_store_fp(i++, MP_INFO(x, y).int_1 * 100.0 / BUILD_MONUMENT_JOBS);
     }
 }
+
+/** @file lincity/modules/monument.cpp */
+

Modified: trunk/src/lincity/modules/monument.h
===================================================================
--- trunk/src/lincity/modules/monument.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/monument.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -12,3 +12,6 @@
 #define MONUMENT_ANIM_SPEED     300
 
 
+
+/** @file lincity/modules/monument.h */
+

Modified: trunk/src/lincity/modules/oremine.cpp
===================================================================
--- trunk/src/lincity/modules/oremine.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/oremine.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -168,3 +168,6 @@
 
     mps_store_sddp(i++, _("Reserve"), MP_INFO(x, y).int_2 * 5000, (ORE_RESERVE * 16 * 5000));
 }
+
+/** @file lincity/modules/oremine.cpp */
+

Modified: trunk/src/lincity/modules/oremine.h
===================================================================
--- trunk/src/lincity/modules/oremine.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/oremine.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -8,3 +8,6 @@
 #define GROUP_OREMINE_FIREC 0
 
 
+
+/** @file lincity/modules/oremine.h */
+

Modified: trunk/src/lincity/modules/organic_farm.cpp
===================================================================
--- trunk/src/lincity/modules/organic_farm.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/organic_farm.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -230,3 +230,6 @@
 #endif
 
 }
+
+/** @file lincity/modules/organic_farm.cpp */
+

Modified: trunk/src/lincity/modules/organic_farm.h
===================================================================
--- trunk/src/lincity/modules/organic_farm.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/organic_farm.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -14,3 +14,6 @@
 #define GROUP_ORGANIC_FARM_FIREC 20
 
 
+
+/** @file lincity/modules/organic_farm.h */
+

Modified: trunk/src/lincity/modules/parkland.cpp
===================================================================
--- trunk/src/lincity/modules/parkland.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/parkland.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -23,3 +23,6 @@
 
     mps_store_sd(i++, _("Pollution"), MP_POL(x, y));
 }
+
+/** @file lincity/modules/parkland.cpp */
+

Modified: trunk/src/lincity/modules/parkland.h
===================================================================
--- trunk/src/lincity/modules/parkland.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/parkland.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -6,3 +6,6 @@
 #define GROUP_PARKLAND_FIREC 1
 
 
+
+/** @file lincity/modules/parkland.h */
+

Modified: trunk/src/lincity/modules/port.cpp
===================================================================
--- trunk/src/lincity/modules/port.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/port.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -307,3 +307,6 @@
     mps_store_sss(i++, _("Total"), buy, sell);
 
 }
+
+/** @file lincity/modules/port.cpp */
+

Modified: trunk/src/lincity/modules/port.h
===================================================================
--- trunk/src/lincity/modules/port.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/port.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -19,3 +19,6 @@
 #define PORT_EXPORT_RATE  500
 #define PORT_IMPORT_RATE  500
 
+
+/** @file lincity/modules/port.h */
+

Modified: trunk/src/lincity/modules/pottery.cpp
===================================================================
--- trunk/src/lincity/modules/pottery.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/pottery.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -112,3 +112,6 @@
     mps_store_sddp(i++, _("Ore"), MP_INFO(x, y).int_2, MAX_ORE_AT_POTTERY);
     mps_store_sddp(i++, _("Coal"), MP_INFO(x, y).int_3, MAX_COAL_AT_POTTERY);
 }
+
+/** @file lincity/modules/pottery.cpp */
+

Modified: trunk/src/lincity/modules/pottery.h
===================================================================
--- trunk/src/lincity/modules/pottery.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/pottery.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -20,3 +20,6 @@
 #define GROUP_POTTERY_FIREC 50
 
 
+
+/** @file lincity/modules/pottery.h */
+

Modified: trunk/src/lincity/modules/power_line.cpp
===================================================================
--- trunk/src/lincity/modules/power_line.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/power_line.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -48,3 +48,6 @@
 
     mps_store_sd(i++, _("Grid ID"), MP_INFO(x, y).int_6);
 }
+
+/** @file lincity/modules/power_line.cpp */
+

Modified: trunk/src/lincity/modules/power_line.h
===================================================================
--- trunk/src/lincity/modules/power_line.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/power_line.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -6,3 +6,6 @@
 #define GROUP_POWER_LINE_FIREC 0
 
 
+
+/** @file lincity/modules/power_line.h */
+

Modified: trunk/src/lincity/modules/rail.cpp
===================================================================
--- trunk/src/lincity/modules/rail.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/rail.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -56,3 +56,6 @@
     mps_store_sddp(i++, _("Waste"), MP_INFO(x, y).int_7, MAX_WASTE_ON_RAIL);
 
 }
+
+/** @file lincity/modules/rail.cpp */
+

Modified: trunk/src/lincity/modules/rail.h
===================================================================
--- trunk/src/lincity/modules/rail.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/rail.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -1 +1,4 @@
 
+
+/** @file lincity/modules/rail.h */
+

Modified: trunk/src/lincity/modules/recycle.cpp
===================================================================
--- trunk/src/lincity/modules/recycle.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/recycle.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -147,3 +147,6 @@
     mps_store_sddp(i++, _("Waste"), MP_INFO(x, y).int_2, MAX_WASTE_AT_RECYCLE);
 
 }
+
+/** @file lincity/modules/recycle.cpp */
+

Modified: trunk/src/lincity/modules/recycle.h
===================================================================
--- trunk/src/lincity/modules/recycle.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/recycle.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -13,3 +13,6 @@
 #define GROUP_RECYCLE_FIREC 10
 
 
+
+/** @file lincity/modules/recycle.h */
+

Modified: trunk/src/lincity/modules/residence.cpp
===================================================================
--- trunk/src/lincity/modules/residence.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/residence.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -289,3 +289,6 @@
     mps_store_sd(i++, _("Pollution"), MP_POL(x, y));
 
 }
+
+/** @file lincity/modules/residence.cpp */
+

Modified: trunk/src/lincity/modules/residence.h
===================================================================
--- trunk/src/lincity/modules/residence.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/residence.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -76,3 +76,6 @@
 
 
 #endif /* __residence_h__ */
+
+/** @file lincity/modules/residence.h */
+

Modified: trunk/src/lincity/modules/road.cpp
===================================================================
--- trunk/src/lincity/modules/road.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/road.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -51,3 +51,6 @@
     mps_store_sddp(i++, _("Waste"), MP_INFO(x, y).int_7, MAX_WASTE_ON_ROAD);
 
 }
+
+/** @file lincity/modules/road.cpp */
+

Modified: trunk/src/lincity/modules/rocket_pad.cpp
===================================================================
--- trunk/src/lincity/modules/rocket_pad.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/rocket_pad.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -201,3 +201,6 @@
     mps_store_sddp(i++, _("Steel"), MP_INFO(x, y).int_3, ROCKET_PAD_STEEL_STORE);
 
 }
+
+/** @file lincity/modules/rocket_pad.cpp */
+

Modified: trunk/src/lincity/modules/rocket_pad.h
===================================================================
--- trunk/src/lincity/modules/rocket_pad.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/rocket_pad.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -19,3 +19,6 @@
 #define ROCKET_LAUNCH_EVAC      3
 
 
+
+/** @file lincity/modules/rocket_pad.h */
+

Modified: trunk/src/lincity/modules/school.cpp
===================================================================
--- trunk/src/lincity/modules/school.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/school.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -52,3 +52,6 @@
     mps_store_sfp(i++, _("Capacity"), MP_INFO(x, y).int_5 * 4);
 
 }
+
+/** @file lincity/modules/school.cpp */
+

Modified: trunk/src/lincity/modules/school.h
===================================================================
--- trunk/src/lincity/modules/school.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/school.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -14,3 +14,6 @@
 #define MAX_GOODS_AT_SCHOOL    200
 #define SCHOOL_RUNNING_COST    2
 
+
+/** @file lincity/modules/school.h */
+

Modified: trunk/src/lincity/modules/shanty.cpp
===================================================================
--- trunk/src/lincity/modules/shanty.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/shanty.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -215,3 +215,6 @@
     }
     return (-1);
 }
+
+/** @file lincity/modules/shanty.cpp */
+

Modified: trunk/src/lincity/modules/shanty.h
===================================================================
--- trunk/src/lincity/modules/shanty.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/shanty.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -15,3 +15,6 @@
 #define SHANTY_GET_STEEL  1
 
 
+
+/** @file lincity/modules/shanty.h */
+

Modified: trunk/src/lincity/modules/solar_power.cpp
===================================================================
--- trunk/src/lincity/modules/solar_power.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/solar_power.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -58,3 +58,6 @@
     mps_store_sfp(i++, _("Tech"), ( MP_TECH(x, y) * 100.0 / MAX_TECH_LEVEL ) );
     mps_store_sd(i++, _("Grid ID"), MP_INFO(x, y).int_6);
 }
+
+/** @file lincity/modules/solar_power.cpp */
+

Modified: trunk/src/lincity/modules/solar_power.h
===================================================================
--- trunk/src/lincity/modules/solar_power.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/solar_power.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -8,3 +8,6 @@
 #define POWERS_SOLAR_OUTPUT 1800
 
 
+
+/** @file lincity/modules/solar_power.h */
+

Modified: trunk/src/lincity/modules/substation.cpp
===================================================================
--- trunk/src/lincity/modules/substation.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/substation.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -113,3 +113,6 @@
     mps_store_sd(i++, _("Grid ID"), MP_INFO(x, y).int_6);
 
 }
+
+/** @file lincity/modules/substation.cpp */
+

Modified: trunk/src/lincity/modules/substation.h
===================================================================
--- trunk/src/lincity/modules/substation.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/substation.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -6,3 +6,6 @@
 #define GROUP_SUBSTATION_FIREC 50
 
 
+
+/** @file lincity/modules/substation.h */
+

Modified: trunk/src/lincity/modules/tip.cpp
===================================================================
--- trunk/src/lincity/modules/tip.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/tip.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -108,3 +108,6 @@
     i++;
     mps_store_sddp(i++,_("Days degenerating"), MP_INFO(x, y).int_4 ,TIP_DEGRADE_TIME);
 }
+
+/** @file lincity/modules/tip.cpp */
+

Modified: trunk/src/lincity/modules/track.cpp
===================================================================
--- trunk/src/lincity/modules/track.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/track.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -42,3 +42,6 @@
     mps_store_sddp(i++, _("Waste"), MP_INFO(x, y).int_7, MAX_WASTE_ON_TRACK);
 
 }
+
+/** @file lincity/modules/track.cpp */
+

Modified: trunk/src/lincity/modules/university.cpp
===================================================================
--- trunk/src/lincity/modules/university.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/university.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -67,3 +67,6 @@
     mps_store_sddp(i++, _("Goods"), MP_INFO(x, y).int_2, UNIVERSITY_GOODS_STORE);
     mps_store_sfp(i++, _("Capacity"), MP_INFO(x, y).int_4);
 }
+
+/** @file lincity/modules/university.cpp */
+

Modified: trunk/src/lincity/modules/university.h
===================================================================
--- trunk/src/lincity/modules/university.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/university.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -13,3 +13,6 @@
 #define GROUP_UNIVERSITY_FIREC 40
 
 
+
+/** @file lincity/modules/university.h */
+

Modified: trunk/src/lincity/modules/water.cpp
===================================================================
--- trunk/src/lincity/modules/water.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/water.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -32,3 +32,6 @@
 #endif
 
 }
+
+/** @file lincity/modules/water.cpp */
+

Modified: trunk/src/lincity/modules/waterwell.cpp
===================================================================
--- trunk/src/lincity/modules/waterwell.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/waterwell.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -64,3 +64,6 @@
     mps_store_ss(i++, _("Drinkable"), p);
 
 }
+
+/** @file lincity/modules/waterwell.cpp */
+

Modified: trunk/src/lincity/modules/waterwell.h
===================================================================
--- trunk/src/lincity/modules/waterwell.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/waterwell.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -6,3 +6,6 @@
 #define GROUP_WATERWELL_FIREC 0
 
 
+
+/** @file lincity/modules/waterwell.h */
+

Modified: trunk/src/lincity/modules/windmill.cpp
===================================================================
--- trunk/src/lincity/modules/windmill.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/windmill.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -99,3 +99,6 @@
         mps_store_sd(i++, _("Grid ID"), MP_INFO(x, y).int_6);
     }
 }
+
+/** @file lincity/modules/windmill.cpp */
+

Modified: trunk/src/lincity/modules/windmill.h
===================================================================
--- trunk/src/lincity/modules/windmill.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/modules/windmill.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -15,3 +15,6 @@
 #define MODERN_WINDMILL_TECH 450000
 
 
+
+/** @file lincity/modules/windmill.h */
+

Modified: trunk/src/lincity/old_ldsvguts.cpp
===================================================================
--- trunk/src/lincity/old_ldsvguts.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/old_ldsvguts.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -620,3 +620,6 @@
 
     setup_land();
 }
+
+/** @file lincity/old_ldsvguts.cpp */
+

Modified: trunk/src/lincity/old_ldsvguts.h
===================================================================
--- trunk/src/lincity/old_ldsvguts.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/old_ldsvguts.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -26,3 +26,6 @@
 void load_city_old(char *);
 
 #endif /* __old_ldsvguts_h__ */
+
+/** @file lincity/old_ldsvguts.h */
+

Modified: trunk/src/lincity/power.cpp
===================================================================
--- trunk/src/lincity/power.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/power.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -364,3 +364,6 @@
     }
     return 0;
 }
+
+/** @file lincity/power.cpp */
+

Modified: trunk/src/lincity/power.h
===================================================================
--- trunk/src/lincity/power.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/power.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -64,3 +64,6 @@
 
 
 #endif
+
+/** @file lincity/power.h */
+

Modified: trunk/src/lincity/range.h
===================================================================
--- trunk/src/lincity/range.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/range.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -20,3 +20,6 @@
 /* COAL_RESERVE_SEARCH_RANGE acts in both directions, so 5 is 10*10 */
 #define COAL_RESERVE_SEARCH_RANGE 8
 
+
+/** @file lincity/range.h */
+

Modified: trunk/src/lincity/simulate.cpp
===================================================================
--- trunk/src/lincity/simulate.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/simulate.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -544,3 +544,6 @@
     MP_INFO(x, y).int_2 = fromy;
 }
 
+
+/** @file lincity/simulate.cpp */
+

Modified: trunk/src/lincity/simulate.h
===================================================================
--- trunk/src/lincity/simulate.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/simulate.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -14,3 +14,6 @@
 extern void connect_rivers(void);
 
 #endif /* __simulate_h__ */
+
+/** @file lincity/simulate.h */
+

Modified: trunk/src/lincity/stats.cpp
===================================================================
--- trunk/src/lincity/stats.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/stats.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -213,3 +213,6 @@
     twaste_in_markets += waste_in_markets;
     tunemployed_population += unemployed_population;
 }
+
+/** @file lincity/stats.cpp */
+

Modified: trunk/src/lincity/stats.h
===================================================================
--- trunk/src/lincity/stats.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/stats.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -101,3 +101,6 @@
 void add_daily_to_monthly(void);
 
 #endif
+
+/** @file lincity/stats.h */
+

Modified: trunk/src/lincity/sustainable.h
===================================================================
--- trunk/src/lincity/sustainable.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/sustainable.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -13,3 +13,6 @@
 
 #define SUST_MIN_POPULATION 5000
 #define SUST_MIN_TECH_LEVEL (MAX_TECH_LEVEL/2)
+
+/** @file lincity/sustainable.h */
+

Modified: trunk/src/lincity/transport.cpp
===================================================================
--- trunk/src/lincity/transport.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/transport.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -815,3 +815,6 @@
         }                       /* end for */
     }                           /* end for */
 }
+
+/** @file lincity/transport.cpp */
+

Modified: trunk/src/lincity/transport.h
===================================================================
--- trunk/src/lincity/transport.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity/transport.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -105,3 +105,6 @@
 #define GROUP_RAIL_BRIDGE_FIREC   0
 
 
+
+/** @file lincity/transport.h */
+

Modified: trunk/src/lincity-ng/ButtonInterface.cpp
===================================================================
--- trunk/src/lincity-ng/ButtonInterface.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/ButtonInterface.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -38,3 +38,6 @@
     (void) type;
 }
 
+
+/** @file lincity-ng/ButtonInterface.cpp */
+

Modified: trunk/src/lincity-ng/ButtonPanel.cpp
===================================================================
--- trunk/src/lincity-ng/ButtonPanel.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/ButtonPanel.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -932,3 +932,6 @@
 
 IMPLEMENT_COMPONENT_FACTORY(ButtonPanel);
 
+
+/** @file lincity-ng/ButtonPanel.cpp */
+

Modified: trunk/src/lincity-ng/ButtonPanel.hpp
===================================================================
--- trunk/src/lincity-ng/ButtonPanel.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/ButtonPanel.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -71,3 +71,6 @@
 ButtonPanel *getButtonPanel();
 
 #endif
+
+/** @file lincity-ng/ButtonPanel.hpp */
+

Modified: trunk/src/lincity-ng/CheckButton.cpp
===================================================================
--- trunk/src/lincity-ng/CheckButton.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/CheckButton.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -430,3 +430,6 @@
 
 IMPLEMENT_COMPONENT_FACTORY(CheckButton);
 
+
+/** @file lincity-ng/CheckButton.cpp */
+

Modified: trunk/src/lincity-ng/CheckButton.hpp
===================================================================
--- trunk/src/lincity-ng/CheckButton.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/CheckButton.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -96,3 +96,6 @@
 };
 
 #endif
+
+/** @file lincity-ng/CheckButton.hpp */
+

Modified: trunk/src/lincity-ng/Config.cpp
===================================================================
--- trunk/src/lincity-ng/Config.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/Config.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -224,3 +224,6 @@
     userconfig << "</configuration>\n";
 }
 
+
+/** @file lincity-ng/Config.cpp */
+

Modified: trunk/src/lincity-ng/Config.hpp
===================================================================
--- trunk/src/lincity-ng/Config.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/Config.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -57,3 +57,6 @@
 Config* getConfig();
 
 #endif
+
+/** @file lincity-ng/Config.hpp */
+

Modified: trunk/src/lincity-ng/Debug.cpp
===================================================================
--- trunk/src/lincity-ng/Debug.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/Debug.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -20,3 +20,6 @@
 #include "Debug.hpp"
 
 int D::d=0;
+
+/** @file lincity-ng/Debug.cpp */
+

Modified: trunk/src/lincity-ng/Debug.hpp
===================================================================
--- trunk/src/lincity-ng/Debug.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/Debug.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -97,3 +97,6 @@
 #endif
 
 #endif
+
+/** @file lincity-ng/Debug.hpp */
+

Modified: trunk/src/lincity-ng/Dialog.cpp
===================================================================
--- trunk/src/lincity-ng/Dialog.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/Dialog.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -852,3 +852,6 @@
     }
     unRegisterDialog();
 }
+
+/** @file lincity-ng/Dialog.cpp */
+

Modified: trunk/src/lincity-ng/Dialog.hpp
===================================================================
--- trunk/src/lincity-ng/Dialog.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/Dialog.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -88,3 +88,6 @@
 };
 
 #endif
+
+/** @file lincity-ng/Dialog.hpp */
+

Modified: trunk/src/lincity-ng/EconomyGraph.cpp
===================================================================
--- trunk/src/lincity-ng/EconomyGraph.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/EconomyGraph.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -495,3 +495,6 @@
 }
 
 IMPLEMENT_COMPONENT_FACTORY(EconomyGraph);
+
+/** @file lincity-ng/EconomyGraph.cpp */
+

Modified: trunk/src/lincity-ng/EconomyGraph.hpp
===================================================================
--- trunk/src/lincity-ng/EconomyGraph.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/EconomyGraph.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -67,3 +67,6 @@
 EconomyGraph* getEconomyGraph();
 
 #endif
+
+/** @file lincity-ng/EconomyGraph.hpp */
+

Modified: trunk/src/lincity-ng/ErrorInterface.cpp
===================================================================
--- trunk/src/lincity-ng/ErrorInterface.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/ErrorInterface.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -29,3 +29,6 @@
 {
   std::cerr<<"ERROR of degree "<<i<<":"<<s<<std::endl;
 }
+
+/** @file lincity-ng/ErrorInterface.cpp */
+

Modified: trunk/src/lincity-ng/ErrorInterface.hpp
===================================================================
--- trunk/src/lincity-ng/ErrorInterface.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/ErrorInterface.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -3,3 +3,6 @@
 void do_error (const char *s);
 void HandleError (const char *s, int i);
 #endif
+
+/** @file lincity-ng/ErrorInterface.hpp */
+

Modified: trunk/src/lincity-ng/Game.cpp
===================================================================
--- trunk/src/lincity-ng/Game.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/Game.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -259,3 +259,6 @@
 
     return quitState;
 }
+
+/** @file lincity-ng/Game.cpp */
+

Modified: trunk/src/lincity-ng/Game.hpp
===================================================================
--- trunk/src/lincity-ng/Game.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/Game.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -53,3 +53,6 @@
 
 #endif
 
+
+/** @file lincity-ng/Game.hpp */
+

Modified: trunk/src/lincity-ng/GameView.cpp
===================================================================
--- trunk/src/lincity-ng/GameView.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/GameView.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -1825,3 +1825,6 @@
 
 //Register as Component
 IMPLEMENT_COMPONENT_FACTORY(GameView);
+
+/** @file lincity-ng/GameView.cpp */
+

Modified: trunk/src/lincity-ng/GameView.hpp
===================================================================
--- trunk/src/lincity-ng/GameView.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/GameView.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -170,3 +170,6 @@
 
 #endif
 
+
+/** @file lincity-ng/GameView.hpp */
+

Modified: trunk/src/lincity-ng/HelpWindow.cpp
===================================================================
--- trunk/src/lincity-ng/HelpWindow.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/HelpWindow.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -142,3 +142,6 @@
         topicHistory.pop();
     }
 }
+
+/** @file lincity-ng/HelpWindow.cpp */
+

Modified: trunk/src/lincity-ng/HelpWindow.hpp
===================================================================
--- trunk/src/lincity-ng/HelpWindow.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/HelpWindow.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -46,3 +46,6 @@
 };
 
 #endif
+
+/** @file lincity-ng/HelpWindow.hpp */
+

Modified: trunk/src/lincity-ng/MainLincity.cpp
===================================================================
--- trunk/src/lincity-ng/MainLincity.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/MainLincity.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -167,3 +167,6 @@
     }
 }
 
+
+/** @file lincity-ng/MainLincity.cpp */
+

Modified: trunk/src/lincity-ng/MainLincity.hpp
===================================================================
--- trunk/src/lincity-ng/MainLincity.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/MainLincity.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -31,3 +31,6 @@
 bool loadCityNG( std::string filename );
 
 #endif
+
+/** @file lincity-ng/MainLincity.hpp */
+

Modified: trunk/src/lincity-ng/MainMenu.cpp
===================================================================
--- trunk/src/lincity-ng/MainMenu.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/MainMenu.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -931,3 +931,6 @@
 
     return quitState;
 }
+
+/** @file lincity-ng/MainMenu.cpp */
+

Modified: trunk/src/lincity-ng/MainMenu.hpp
===================================================================
--- trunk/src/lincity-ng/MainMenu.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/MainMenu.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -102,3 +102,6 @@
 
 #endif
 
+
+/** @file lincity-ng/MainMenu.hpp */
+

Modified: trunk/src/lincity-ng/MapEdit.cpp
===================================================================
--- trunk/src/lincity-ng/MapEdit.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/MapEdit.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -311,3 +311,6 @@
             last_message_group = 0;
     }
 }
+
+/** @file lincity-ng/MapEdit.cpp */
+

Modified: trunk/src/lincity-ng/MapEdit.hpp
===================================================================
--- trunk/src/lincity-ng/MapEdit.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/MapEdit.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -30,3 +30,6 @@
 extern int build_bridge_flag;
 
 #endif
+
+/** @file lincity-ng/MapEdit.hpp */
+

Modified: trunk/src/lincity-ng/MapPoint.hpp
===================================================================
--- trunk/src/lincity-ng/MapPoint.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/MapPoint.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -43,3 +43,6 @@
 
 #endif
 
+
+/** @file lincity-ng/MapPoint.hpp */
+

Modified: trunk/src/lincity-ng/MiniMap.cpp
===================================================================
--- trunk/src/lincity-ng/MiniMap.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/MiniMap.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -891,3 +891,6 @@
 
 IMPLEMENT_COMPONENT_FACTORY(MiniMap);
 
+
+/** @file lincity-ng/MiniMap.cpp */
+

Modified: trunk/src/lincity-ng/MiniMap.hpp
===================================================================
--- trunk/src/lincity-ng/MiniMap.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/MiniMap.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -90,3 +90,6 @@
 MiniMap* getMiniMap();
 
 #endif
+
+/** @file lincity-ng/MiniMap.hpp */
+

Modified: trunk/src/lincity-ng/Mps.cpp
===================================================================
--- trunk/src/lincity-ng/Mps.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/Mps.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -288,3 +288,6 @@
 
 IMPLEMENT_COMPONENT_FACTORY(Mps);
 
+
+/** @file lincity-ng/Mps.cpp */
+

Modified: trunk/src/lincity-ng/Mps.hpp
===================================================================
--- trunk/src/lincity-ng/Mps.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/Mps.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -60,3 +60,6 @@
 extern Mps* envMPS;
 
 #endif
+
+/** @file lincity-ng/Mps.hpp */
+

Modified: trunk/src/lincity-ng/MpsInterface.cpp
===================================================================
--- trunk/src/lincity-ng/MpsInterface.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/MpsInterface.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -552,3 +552,6 @@
     currentMPS = 0;
 }
 
+
+/** @file lincity-ng/MpsInterface.cpp */
+

Modified: trunk/src/lincity-ng/PBar.cpp
===================================================================
--- trunk/src/lincity-ng/PBar.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/PBar.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -231,3 +231,6 @@
 
 IMPLEMENT_COMPONENT_FACTORY(LCPBar);
 IMPLEMENT_COMPONENT_FACTORY(BarView);
+
+/** @file lincity-ng/PBar.cpp */
+

Modified: trunk/src/lincity-ng/PBar.hpp
===================================================================
--- trunk/src/lincity-ng/PBar.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/PBar.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -58,3 +58,6 @@
 };
 
 #endif
+
+/** @file lincity-ng/PBar.hpp */
+

Modified: trunk/src/lincity-ng/PbarInterface.cpp
===================================================================
--- trunk/src/lincity-ng/PbarInterface.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/PbarInterface.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -91,3 +91,6 @@
     update_pbar (PSTEEL, tsteel_in_markets / data_last_month, 1);
     update_pbar (PMONEY, total_money, 1);
 }
+
+/** @file lincity-ng/PbarInterface.cpp */
+

Modified: trunk/src/lincity-ng/ReadPngInterface.cpp
===================================================================
--- trunk/src/lincity-ng/ReadPngInterface.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/ReadPngInterface.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -410,3 +410,6 @@
     return 0;
 }
 
+
+/** @file lincity-ng/ReadPngInterface.cpp */
+

Modified: trunk/src/lincity-ng/ScreenInterface.cpp
===================================================================
--- trunk/src/lincity-ng/ScreenInterface.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/ScreenInterface.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -370,3 +370,6 @@
     std::cerr << "-------------------------\n";
     return 0;
 }
+
+/** @file lincity-ng/ScreenInterface.cpp */
+

Modified: trunk/src/lincity-ng/ScreenInterface.hpp
===================================================================
--- trunk/src/lincity-ng/ScreenInterface.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/ScreenInterface.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -31,3 +31,6 @@
 void updateMessageText( const std::string text );
 
 #endif
+
+/** @file lincity-ng/ScreenInterface.hpp */
+

Modified: trunk/src/lincity-ng/Sound.cpp
===================================================================
--- trunk/src/lincity-ng/Sound.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/Sound.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -252,3 +252,6 @@
     Mix_Volume(-1, static_cast<int>(volvalue));
 }
 
+
+/** @file lincity-ng/Sound.cpp */
+

Modified: trunk/src/lincity-ng/Sound.hpp
===================================================================
--- trunk/src/lincity-ng/Sound.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/Sound.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -54,3 +54,6 @@
 Sound* getSound();
 
 #endif
+
+/** @file lincity-ng/Sound.hpp */
+

Modified: trunk/src/lincity-ng/TimerInterface.cpp
===================================================================
--- trunk/src/lincity-ng/TimerInterface.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/TimerInterface.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -31,3 +31,6 @@
 {
   real_time=SDL_GetTicks()-start_time;
 }
+
+/** @file lincity-ng/TimerInterface.cpp */
+

Modified: trunk/src/lincity-ng/TimerInterface.hpp
===================================================================
--- trunk/src/lincity-ng/TimerInterface.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/TimerInterface.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -22,3 +22,6 @@
 void get_real_time(void);
 
 #endif
+
+/** @file lincity-ng/TimerInterface.hpp */
+

Modified: trunk/src/lincity-ng/Util.cpp
===================================================================
--- trunk/src/lincity-ng/Util.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/Util.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -81,3 +81,6 @@
     findComponent(&result, tree, name);
     return result;
 }
+
+/** @file lincity-ng/Util.cpp */
+

Modified: trunk/src/lincity-ng/Util.hpp
===================================================================
--- trunk/src/lincity-ng/Util.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/Util.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -33,3 +33,6 @@
 
 #endif
 
+
+/** @file lincity-ng/Util.hpp */
+

Modified: trunk/src/lincity-ng/binreloc.c
===================================================================
--- trunk/src/lincity-ng/binreloc.c	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/binreloc.c	2010-07-15 16:21:04 UTC (rev 1593)
@@ -766,3 +766,6 @@
 #endif /* __cplusplus */
 
 #endif /* __BINRELOC_C__ */
+
+/** @file lincity-ng/binreloc.c */
+

Modified: trunk/src/lincity-ng/binreloc.h
===================================================================
--- trunk/src/lincity-ng/binreloc.h	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/binreloc.h	2010-07-15 16:21:04 UTC (rev 1593)
@@ -78,3 +78,6 @@
 #endif /* __cplusplus */
 
 #endif /* __BINRELOC_H__ */
+
+/** @file lincity-ng/binreloc.h */
+

Modified: trunk/src/lincity-ng/main.cpp
===================================================================
--- trunk/src/lincity-ng/main.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/main.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -533,3 +533,6 @@
     return result;
 }
 
+
+/** @file lincity-ng/main.cpp */
+

Modified: trunk/src/lincity-ng/main.hpp
===================================================================
--- trunk/src/lincity-ng/main.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/main.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -37,3 +37,6 @@
 
 #endif
 
+
+/** @file lincity-ng/main.hpp */
+

Modified: trunk/src/lincity-ng/readdir.cpp
===================================================================
--- trunk/src/lincity-ng/readdir.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/readdir.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -71,3 +71,6 @@
 
 #endif
 
+
+/** @file lincity-ng/readdir.cpp */
+

Modified: trunk/src/lincity-ng/readdir.hpp
===================================================================
--- trunk/src/lincity-ng/readdir.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/lincity-ng/readdir.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -52,3 +52,6 @@
 #endif
 
 #endif
+
+/** @file lincity-ng/readdir.hpp */
+

Modified: trunk/src/tinygettext/TinyGetText.cpp
===================================================================
--- trunk/src/tinygettext/TinyGetText.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/tinygettext/TinyGetText.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -790,3 +790,6 @@
 } // namespace TinyGetText
 
 /* EOF */
+
+/** @file tinygettext/TinyGetText.cpp */
+

Modified: trunk/src/tinygettext/TinyGetText.hpp
===================================================================
--- trunk/src/tinygettext/TinyGetText.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/tinygettext/TinyGetText.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -157,3 +157,6 @@
 #endif
 
 /* EOF */
+
+/** @file tinygettext/TinyGetText.hpp */
+

Modified: trunk/src/tinygettext/findlocale.cpp
===================================================================
--- trunk/src/tinygettext/findlocale.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/tinygettext/findlocale.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -551,3 +551,6 @@
     }
   }
 }
+
+/** @file tinygettext/findlocale.cpp */
+

Modified: trunk/src/tinygettext/findlocale.hpp
===================================================================
--- trunk/src/tinygettext/findlocale.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/tinygettext/findlocale.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -61,3 +61,6 @@
 void FL_FreeLocale(FL_Locale **locale);
 
 #endif /*__findlocale_h_*/
+
+/** @file tinygettext/findlocale.hpp */
+

Modified: trunk/src/tinygettext/gettext.hpp
===================================================================
--- trunk/src/tinygettext/gettext.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/tinygettext/gettext.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -21,3 +21,6 @@
 #define N_(s)      s
 
 #endif
+
+/** @file tinygettext/gettext.hpp */
+

Modified: trunk/src/tools/xmlgettext/XmlReader.cpp
===================================================================
--- trunk/src/tools/xmlgettext/XmlReader.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/tools/xmlgettext/XmlReader.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -15,7 +15,7 @@
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */
-#include "XmlReader.hpp"
+#include "./XmlReader.hpp"
 
 XmlReader::XmlReader(const std::string& filename)
 {
@@ -33,3 +33,6 @@
 {
     xmlFreeTextReader(reader);
 }
+
+/** @file tools/xmlgettext/XmlReader.cpp */
+

Modified: trunk/src/tools/xmlgettext/XmlReader.hpp
===================================================================
--- trunk/src/tools/xmlgettext/XmlReader.hpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/tools/xmlgettext/XmlReader.hpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -151,3 +151,6 @@
 
 #endif
 
+
+/** @file tools/xmlgettext/XmlReader.hpp */
+

Modified: trunk/src/tools/xmlgettext/main.cpp
===================================================================
--- trunk/src/tools/xmlgettext/main.cpp	2010-07-15 16:20:57 UTC (rev 1592)
+++ trunk/src/tools/xmlgettext/main.cpp	2010-07-15 16:21:04 UTC (rev 1593)
@@ -156,3 +156,6 @@
         }
     }
 }
+
+/** @file tools/xmlgettext/main.cpp */
+



From alainb at mail.berlios.de  Fri Jul 16 14:23:25 2010
From: alainb at mail.berlios.de (alainb at mail.berlios.de)
Date: Fri, 16 Jul 2010 14:23:25 +0200
Subject: [Lincity-ng-commit] r1594 - in trunk/src: lincity lincity/modules
	lincity-ng
Message-ID: <20100716122325.456FC4801AD@sheep.berlios.de>

Author: alainb
Date: 2010-07-16 14:23:25 +0200 (Fri, 16 Jul 2010)
New Revision: 1594

Modified:
   trunk/src/lincity-ng/Config.cpp
   trunk/src/lincity-ng/Game.cpp
   trunk/src/lincity-ng/GameView.cpp
   trunk/src/lincity-ng/MainLincity.cpp
   trunk/src/lincity-ng/MainMenu.cpp
   trunk/src/lincity-ng/MapEdit.cpp
   trunk/src/lincity-ng/ReadPngInterface.cpp
   trunk/src/lincity-ng/ScreenInterface.cpp
   trunk/src/lincity/engglobs.cpp
   trunk/src/lincity/engglobs.h
   trunk/src/lincity/lin-city.h
   trunk/src/lincity/lintypes.h
   trunk/src/lincity/modules/modules.h
Log:
more headers cleanup,
 for better separation of engine from user interface

Modified: trunk/src/lincity/engglobs.cpp
===================================================================
--- trunk/src/lincity/engglobs.cpp	2010-07-15 16:21:04 UTC (rev 1593)
+++ trunk/src/lincity/engglobs.cpp	2010-07-16 12:23:25 UTC (rev 1594)
@@ -4,7 +4,7 @@
  * Lincity is copyright (c) I J Peters 1995-1997, (c) Greg Sharp 1997-2001.
  * ---------------------------------------------------------------------- */
 #include "engglobs.h"
-//#include "common.h"
+#include "lin-city.h"
 #include "fileutil.h"
 
 /* load/save version for compatibility with(out) waterwell */

Modified: trunk/src/lincity/engglobs.h
===================================================================
--- trunk/src/lincity/engglobs.h	2010-07-15 16:21:04 UTC (rev 1593)
+++ trunk/src/lincity/engglobs.h	2010-07-16 12:23:25 UTC (rev 1594)
@@ -6,14 +6,11 @@
 #ifndef __engglobs_h__
 #define __engglobs_h__
 
-#include "lin-city.h"
+#include "lintypes.h"
 #include "groups.h"
 
-/* was shrglobs.h */
-
 extern int pix_double;
 
-/* */
 extern int use_waterwell, ldsv_version;
 
 extern map_struct map;

Modified: trunk/src/lincity/lin-city.h
===================================================================
--- trunk/src/lincity/lin-city.h	2010-07-15 16:21:04 UTC (rev 1593)
+++ trunk/src/lincity/lin-city.h	2010-07-16 12:23:25 UTC (rev 1594)
@@ -87,29 +87,12 @@
 #define FLAG_ASKED_FOR_POWER       (0x40000000)
 #define FLAG_GOT_POWER             (0x80000000) /* 2^31 = last flag */  //nearly duplicate of FLAG_POWERED 0x10
 
-
-#define WORLD_SIDE_LEN 100      /* Minimap size is hardcoded 200 pixel => some job to do ... */
-
 #define GOOD 1
 #define BAD (-1)
 #define RESULTS 0
 
 #define SHUFFLE_MAPPOINT_COUNT 4
 
-#define OLD_MAX_NUMOF_SUBSTATIONS 100
-#define MAX_NUMOF_SUBSTATIONS 512
-
-#define NUMOF_COAL_RESERVES 100
-#define NUM_OF_TYPES    404
-#define NUM_OF_GROUPS    50
-
-#define OLD_MAX_NUMOF_MARKETS 100
-#define MAX_NUMOF_MARKETS 512
-
-
-#define NUMOF_DAYS_IN_MONTH 100
-#define NUMOF_DAYS_IN_YEAR (NUMOF_DAYS_IN_MONTH*12)
-
 #define FAST_TIME_FOR_YEAR 9
 #define MED_TIME_FOR_YEAR  20
 #define SLOW_TIME_FOR_YEAR 60
@@ -126,7 +109,6 @@
 #define TECH_LEVEL_UNAIDED 2
 
 
-#define NUMOF_DISCOUNT_TRIGGERS 6
 #define EX_DISCOUNT_TRIGGER_1   25000
 #define EX_DISCOUNT_TRIGGER_2   50000
 #define EX_DISCOUNT_TRIGGER_3  100000

Modified: trunk/src/lincity/lintypes.h
===================================================================
--- trunk/src/lincity/lintypes.h	2010-07-15 16:21:04 UTC (rev 1593)
+++ trunk/src/lincity/lintypes.h	2010-07-16 12:23:25 UTC (rev 1594)
@@ -6,6 +6,23 @@
 #ifndef __lintypes_h__
 #define __lintypes_h__
 
+#define WORLD_SIDE_LEN 100      /* Minimap size is hardcoded 200 pixel => some job to do ... */
+
+#define OLD_MAX_NUMOF_SUBSTATIONS 100
+#define MAX_NUMOF_SUBSTATIONS 512
+
+#define NUMOF_COAL_RESERVES 100
+#define NUM_OF_TYPES    404
+#define NUM_OF_GROUPS    50
+
+#define OLD_MAX_NUMOF_MARKETS 100
+#define MAX_NUMOF_MARKETS 512
+
+#define NUMOF_DAYS_IN_MONTH 100
+#define NUMOF_DAYS_IN_YEAR (NUMOF_DAYS_IN_MONTH*12)
+
+#define NUMOF_DISCOUNT_TRIGGERS 6
+
 int get_group_of_type(short selected_type);
 void set_map_groups(void);
 int get_type_cost(short type);

Modified: trunk/src/lincity/modules/modules.h
===================================================================
--- trunk/src/lincity/modules/modules.h	2010-07-15 16:21:04 UTC (rev 1593)
+++ trunk/src/lincity/modules/modules.h	2010-07-16 12:23:25 UTC (rev 1594)
@@ -9,6 +9,7 @@
 
 #include "../lctypes.h"
 #include "tinygettext/gettext.hpp"
+#include "../lin-city.h"
 #include "../engglobs.h"
 #include "../engine.h"
 #include "../stats.h"

Modified: trunk/src/lincity-ng/Config.cpp
===================================================================
--- trunk/src/lincity-ng/Config.cpp	2010-07-15 16:21:04 UTC (rev 1593)
+++ trunk/src/lincity-ng/Config.cpp	2010-07-16 12:23:25 UTC (rev 1594)
@@ -60,7 +60,7 @@
     monthgraphW = 190;
     monthgraphH = 64;
     skipMonthsFast = 1;
-    quickness = FAST_TIME_FOR_YEAR;
+    quickness = 10;
 
     playSongName = "02 - Robert van Herk - City Blues.ogg";
     //First we load the global File which should contain

Modified: trunk/src/lincity-ng/Game.cpp
===================================================================
--- trunk/src/lincity-ng/Game.cpp	2010-07-15 16:21:04 UTC (rev 1593)
+++ trunk/src/lincity-ng/Game.cpp	2010-07-16 12:23:25 UTC (rev 1594)
@@ -32,7 +32,6 @@
 #include <iostream>
 #include <physfs.h>
 #include "Util.hpp"
-#include "lincity/lin-city.h"
 #include "GameView.hpp"
 #include "HelpWindow.hpp"
 #include "ButtonPanel.hpp"

Modified: trunk/src/lincity-ng/GameView.cpp
===================================================================
--- trunk/src/lincity-ng/GameView.cpp	2010-07-15 16:21:04 UTC (rev 1593)
+++ trunk/src/lincity-ng/GameView.cpp	2010-07-16 12:23:25 UTC (rev 1594)
@@ -30,7 +30,6 @@
 #include "gui/Paragraph.hpp"
 #include "gui/Desktop.hpp"
 
-#include "lincity/lin-city.h"
 #include "lincity/lctypes.h"
 #include "lincity/engglobs.h"
 #include "lincity/range.h"

Modified: trunk/src/lincity-ng/MainLincity.cpp
===================================================================
--- trunk/src/lincity-ng/MainLincity.cpp	2010-07-15 16:21:04 UTC (rev 1593)
+++ trunk/src/lincity-ng/MainLincity.cpp	2010-07-16 12:23:25 UTC (rev 1594)
@@ -28,7 +28,6 @@
 
 #include "lincity/init_game.h"
 #include "lincity/simulate.h"
-#include "lincity/lin-city.h"
 #include "lincity/lc_locale.h"
 #include "lincity/fileutil.h"
 #include "lincity/loadsave.h"

Modified: trunk/src/lincity-ng/MainMenu.cpp
===================================================================
--- trunk/src/lincity-ng/MainMenu.cpp	2010-07-15 16:21:04 UTC (rev 1593)
+++ trunk/src/lincity-ng/MainMenu.cpp	2010-07-16 12:23:25 UTC (rev 1594)
@@ -35,7 +35,6 @@
 #include "gui/callback/Callback.hpp"
 
 #include "gui_interface/shared_globals.h"
-#include "lincity/lin-city.h"
 #include "lincity/fileutil.h"
 
 #include "CheckButton.hpp"

Modified: trunk/src/lincity-ng/MapEdit.cpp
===================================================================
--- trunk/src/lincity-ng/MapEdit.cpp	2010-07-15 16:21:04 UTC (rev 1593)
+++ trunk/src/lincity-ng/MapEdit.cpp	2010-07-16 12:23:25 UTC (rev 1594)
@@ -24,7 +24,6 @@
 #include "gui_interface/shared_globals.h"
 #include "tinygettext/gettext.hpp"
 #include "lincity/engine.h"
-#include "lincity/lin-city.h"
 
 #include "Sound.hpp"
 #include "MapEdit.hpp"

Modified: trunk/src/lincity-ng/ReadPngInterface.cpp
===================================================================
--- trunk/src/lincity-ng/ReadPngInterface.cpp	2010-07-15 16:21:04 UTC (rev 1593)
+++ trunk/src/lincity-ng/ReadPngInterface.cpp	2010-07-16 12:23:25 UTC (rev 1594)
@@ -22,7 +22,6 @@
 #include <config.h>
 
 #include <stdlib.h>
-#include "lincity/lin-city.h"
 #include "lincity/lctypes.h"
 #include "lincity/engglobs.h"
 

Modified: trunk/src/lincity-ng/ScreenInterface.cpp
===================================================================
--- trunk/src/lincity-ng/ScreenInterface.cpp	2010-07-15 16:21:04 UTC (rev 1593)
+++ trunk/src/lincity-ng/ScreenInterface.cpp	2010-07-16 12:23:25 UTC (rev 1594)
@@ -45,12 +45,8 @@
 #include "Dialog.hpp"
 #include "EconomyGraph.hpp"
 
-
-
-short mappointoldtype[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
 int selected_module_cost; // this must be changed, when module (or celltype-button) is changed
 
-
 int getMainWindowWidth();
 int getMainWindowHeight();
 



From alainb at mail.berlios.de  Fri Jul 16 15:19:43 2010
From: alainb at mail.berlios.de (alainb at mail.berlios.de)
Date: Fri, 16 Jul 2010 15:19:43 +0200
Subject: [Lincity-ng-commit] r1595 - trunk/src/lincity-ng
Message-ID: <20100716131943.A06184801AD@sheep.berlios.de>

Author: alainb
Date: 2010-07-16 15:19:43 +0200 (Fri, 16 Jul 2010)
New Revision: 1595

Modified:
   trunk/src/lincity-ng/ButtonPanel.cpp
   trunk/src/lincity-ng/Dialog.cpp
   trunk/src/lincity-ng/MainLincity.cpp
   trunk/src/lincity-ng/MapEdit.cpp
   trunk/src/lincity-ng/MiniMap.hpp
   trunk/src/lincity-ng/MpsInterface.cpp
Log:
headers separation: removes lin-city.h from MiniMap.hpp

Modified: trunk/src/lincity-ng/ButtonPanel.cpp
===================================================================
--- trunk/src/lincity-ng/ButtonPanel.cpp	2010-07-16 12:23:25 UTC (rev 1594)
+++ trunk/src/lincity-ng/ButtonPanel.cpp	2010-07-16 13:19:43 UTC (rev 1595)
@@ -33,6 +33,7 @@
 #include "gui_interface/shared_globals.h"
 
 #include "lincity/lctypes.h"
+#include "lincity/lin-city.h"
 #include "lincity/groups.h"
 #include "lincity/all_buildings.h"
 #include "lincity/modules/all_modules.h"

Modified: trunk/src/lincity-ng/Dialog.cpp
===================================================================
--- trunk/src/lincity-ng/Dialog.cpp	2010-07-16 12:23:25 UTC (rev 1594)
+++ trunk/src/lincity-ng/Dialog.cpp	2010-07-16 13:19:43 UTC (rev 1595)
@@ -33,6 +33,7 @@
 #include "lincity/simulate.h"
 #include "lincity/lclib.h"
 #include "lincity/loadsave.h"
+#include "lincity/lin-city.h"
 
 #include "gui_interface/shared_globals.h"
 

Modified: trunk/src/lincity-ng/MainLincity.cpp
===================================================================
--- trunk/src/lincity-ng/MainLincity.cpp	2010-07-16 12:23:25 UTC (rev 1594)
+++ trunk/src/lincity-ng/MainLincity.cpp	2010-07-16 13:19:43 UTC (rev 1595)
@@ -27,6 +27,7 @@
 #include <physfs.h>
 
 #include "lincity/init_game.h"
+#include "lincity/lin-city.h"
 #include "lincity/simulate.h"
 #include "lincity/lc_locale.h"
 #include "lincity/fileutil.h"

Modified: trunk/src/lincity-ng/MapEdit.cpp
===================================================================
--- trunk/src/lincity-ng/MapEdit.cpp	2010-07-16 12:23:25 UTC (rev 1594)
+++ trunk/src/lincity-ng/MapEdit.cpp	2010-07-16 13:19:43 UTC (rev 1595)
@@ -24,6 +24,7 @@
 #include "gui_interface/shared_globals.h"
 #include "tinygettext/gettext.hpp"
 #include "lincity/engine.h"
+#include "lincity/lin-city.h"
 
 #include "Sound.hpp"
 #include "MapEdit.hpp"

Modified: trunk/src/lincity-ng/MiniMap.hpp
===================================================================
--- trunk/src/lincity-ng/MiniMap.hpp	2010-07-16 12:23:25 UTC (rev 1594)
+++ trunk/src/lincity-ng/MiniMap.hpp	2010-07-16 13:19:43 UTC (rev 1595)
@@ -20,7 +20,6 @@
 
 #include "gui/Component.hpp"
 #include "gui/Color.hpp"
-#include "lincity/lin-city.h"
 #include "gui/Texture.hpp"
 #include "MapPoint.hpp"
 
@@ -68,7 +67,6 @@
     Vector2 mapPointToVector(MapPoint p);
   
     Vector2 gameViewPoints[ 4 ];
-    short mappointoldtype[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
 
     DisplayMode mMode;
 

Modified: trunk/src/lincity-ng/MpsInterface.cpp
===================================================================
--- trunk/src/lincity-ng/MpsInterface.cpp	2010-07-16 12:23:25 UTC (rev 1594)
+++ trunk/src/lincity-ng/MpsInterface.cpp	2010-07-16 13:19:43 UTC (rev 1595)
@@ -31,6 +31,7 @@
 #include "tinygettext/gettext.hpp"
 #include "lincity/modules/modules_interfaces.h"
 #include "lincity/lctypes.h"
+#include "lincity/lin-city.h"
 #include "MiniMap.hpp"
 
 // implement everything here



From alainb at mail.berlios.de  Fri Jul 16 15:19:45 2010
From: alainb at mail.berlios.de (alainb at mail.berlios.de)
Date: Fri, 16 Jul 2010 15:19:45 +0200
Subject: [Lincity-ng-commit] r1596 - trunk/src/lincity-ng
Message-ID: <20100716131945.4FD274801AD@sheep.berlios.de>

Author: alainb
Date: 2010-07-16 15:19:45 +0200 (Fri, 16 Jul 2010)
New Revision: 1596

Modified:
   trunk/src/lincity-ng/MiniMap.cpp
Log:
simplify and accelerate code

Modified: trunk/src/lincity-ng/MiniMap.cpp
===================================================================
--- trunk/src/lincity-ng/MiniMap.cpp	2010-07-16 13:19:43 UTC (rev 1595)
+++ trunk/src/lincity-ng/MiniMap.cpp	2010-07-16 13:19:45 UTC (rev 1596)
@@ -53,6 +53,8 @@
 #include "Game.hpp"
 #include "HelpWindow.hpp"
 
+
+
 extern int get_power(int x, int y, int power, int block_industry);
 
 /** List of mapview buttons. The "" entries separate mapview buttons that are
@@ -540,11 +542,10 @@
     Color mc = getColor( 0, 0 ); 
     if(mpainter.get() == 0) {
         // workaround - so that it works with GL, too, as long as there's no TexturePainter for this
-        for(y=1;y<WORLD_SIDE_LEN-1 && y<height/tilesize;y++)
-            for(x=1;x<WORLD_SIDE_LEN-1 && x<width/tilesize;x++) {
-                typ = MP_TYPE(x,y);
-                if( mFullRefresh || typ != mappointoldtype[x][y] ) {
-                    mappointoldtype[x][y] = typ;
+        if( mFullRefresh ) {
+            for(y=1;y<height/tilesize;y++) {
+                for(x=1;x<width/tilesize;x++) {
+                    typ = MP_TYPE(x,y);
                     if( typ != CST_USED ){
                         grp = get_group_of_type(typ);
                         mc=getColor(x,y);
@@ -557,6 +558,7 @@
                     }
                 }
             }
+        }
         
         //show current GameView
         painter.setClipRectangle( miniRect ); 
@@ -568,12 +570,10 @@
     if( mFullRefresh ){
         mpainter->setFillColor( mc );
         mpainter->fillRectangle( miniRect );
-    }
-    for(y=1;y<WORLD_SIDE_LEN-1 && y<height/tilesize;y++) {
-        for(x=1;x<WORLD_SIDE_LEN-1 && x<width/tilesize;x++) {
-            typ = MP_TYPE(x,y);
-            if ( mFullRefresh || typ != mappointoldtype[x][y] ) {
-                mappointoldtype[x][y] = typ;
+    
+        for(y=1;y<height/tilesize;y++) {
+            for(x=1;x<width/tilesize;x++) {
+                typ = MP_TYPE(x,y);
                 if( typ != CST_USED ){
                     grp = get_group_of_type(typ);
                     mc=getColor(x,y);



From alainb at mail.berlios.de  Sun Jul 18 12:51:08 2010
From: alainb at mail.berlios.de (alainb at mail.berlios.de)
Date: Sun, 18 Jul 2010 12:51:08 +0200
Subject: [Lincity-ng-commit] r1597 - trunk/src/lincity-ng
Message-ID: <20100718105108.2D5F1480E80@sheep.berlios.de>

Author: alainb
Date: 2010-07-18 12:51:07 +0200 (Sun, 18 Jul 2010)
New Revision: 1597

Modified:
   trunk/src/lincity-ng/main.cpp
Log:
window is resizable

Modified: trunk/src/lincity-ng/main.cpp
===================================================================
--- trunk/src/lincity-ng/main.cpp	2010-07-16 13:19:45 UTC (rev 1596)
+++ trunk/src/lincity-ng/main.cpp	2010-07-18 10:51:07 UTC (rev 1597)
@@ -202,7 +202,7 @@
     int bpp = 0;
     int flags = 0;
     if( getConfig()->useOpenGL ){
-        flags = SDL_OPENGL;
+        flags = SDL_OPENGL | SDL_RESIZABLE;
         SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
         SDL_GL_SetAttribute(SDL_GL_RED_SIZE, 1);
         SDL_GL_SetAttribute(SDL_GL_GREEN_SIZE, 1);
@@ -210,7 +210,7 @@
         //SDL_GL_SetAttribute(SDL_GL_STENCIL_SIZE, 0);
         //SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 16);
     } else {
-        flags = SDL_HWSURFACE;
+        flags = SDL_HWSURFACE | SDL_RESIZABLE;
     }
     if(getConfig()->useFullScreen)
         flags |= SDL_FULLSCREEN;



From alainb at mail.berlios.de  Sun Jul 18 13:08:27 2010
From: alainb at mail.berlios.de (alainb at mail.berlios.de)
Date: Sun, 18 Jul 2010 13:08:27 +0200
Subject: [Lincity-ng-commit] r1598 - trunk/src/lincity-ng
Message-ID: <20100718110827.156AA480BC1@sheep.berlios.de>

Author: alainb
Date: 2010-07-18 13:08:26 +0200 (Sun, 18 Jul 2010)
New Revision: 1598

Modified:
   trunk/src/lincity-ng/main.cpp
Log:
activate double buffering in SDL
(works only if HWSURFACE are available ...)

Modified: trunk/src/lincity-ng/main.cpp
===================================================================
--- trunk/src/lincity-ng/main.cpp	2010-07-18 10:51:07 UTC (rev 1597)
+++ trunk/src/lincity-ng/main.cpp	2010-07-18 11:08:26 UTC (rev 1598)
@@ -210,7 +210,7 @@
         //SDL_GL_SetAttribute(SDL_GL_STENCIL_SIZE, 0);
         //SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 16);
     } else {
-        flags = SDL_HWSURFACE | SDL_RESIZABLE;
+        flags = SDL_HWSURFACE | SDL_RESIZABLE | SDL_DOUBLEBUF;
     }
     if(getConfig()->useFullScreen)
         flags |= SDL_FULLSCREEN;



From alainb at mail.berlios.de  Sun Jul 18 15:05:31 2010
From: alainb at mail.berlios.de (alainb at mail.berlios.de)
Date: Sun, 18 Jul 2010 15:05:31 +0200
Subject: [Lincity-ng-commit] r1599 - trunk/src/lincity-ng
Message-ID: <20100718130531.43B8A480BC1@sheep.berlios.de>

Author: alainb
Date: 2010-07-18 15:05:31 +0200 (Sun, 18 Jul 2010)
New Revision: 1599

Modified:
   trunk/src/lincity-ng/main.cpp
Log:
more debug info about Video mode.
 fix wrong display of size now the window is resizable

Modified: trunk/src/lincity-ng/main.cpp
===================================================================
--- trunk/src/lincity-ng/main.cpp	2010-07-18 11:08:26 UTC (rev 1598)
+++ trunk/src/lincity-ng/main.cpp	2010-07-18 13:05:31 UTC (rev 1599)
@@ -56,24 +56,6 @@
 TinyGetText::DictionaryManager* dictionaryManager = 0;
 bool restart = false;
 
-void initSDL()
-{
-    if(SDL_Init(SDL_INIT_EVERYTHING) < 0) {
-        std::stringstream msg;
-        msg << "Couldn't initialize SDL: " << SDL_GetError();
-        throw std::runtime_error(msg.str());
-    }
-}
-
-void initTTF()
-{
-    if(TTF_Init() < 0) {
-        std::stringstream msg;
-        msg << "Couldn't initialize SDL_ttf: " << SDL_GetError();
-        throw std::runtime_error(msg.str());
-    }
-}
-
 void initPhysfs(const char* argv0)
 {
     if(!PHYSFS_init(argv0)) {
@@ -201,6 +183,57 @@
 {
     int bpp = 0;
     int flags = 0;
+    const SDL_VideoInfo* VideoInfo;
+
+#ifdef DEBUG
+
+    #define BUFFER_SIZE 256
+    char myBuffer[BUFFER_SIZE];
+    SDL_Rect** modes;
+    int i;
+
+
+    // Obtain the video driver name
+    if (SDL_VideoDriverName(myBuffer, BUFFER_SIZE) != NULL) {
+	    std::cout << "\nThe video driver name is " << myBuffer << std::endl;
+    } else {
+	    std::cerr << "\nFailed to obtain the video driver name." << std::endl;
+    }
+
+
+    /* Get available fullscreen/hardware modes */
+    modes = SDL_ListModes(NULL, SDL_FULLSCREEN|SDL_HWSURFACE);
+
+    /* Check if there are any modes available */
+    if (modes == (SDL_Rect**)0) {
+	    printf("No modes available!\n");
+	    exit(-1);
+    }
+
+    /* Check if our resolution is restricted */
+    if (modes == (SDL_Rect**)-1) {
+	    printf("All resolutions available.\n");
+    } else {
+	    /* Print valid modes */
+	    printf("Available Modes\n");
+	    for (i=0; modes[i]; ++i)
+		    printf("  %d x %d\n", modes[i]->w, modes[i]->h);
+    }
+
+
+    // more info on BEST Video Mode as we request these information *before* calling SDL_SetVideoMode
+    VideoInfo = SDL_GetVideoInfo();
+
+    printf("\n***BEST*** video mode properties\n");
+    printf("Hardware surface available -> %i\n", VideoInfo->hw_available);
+    printf("hardware blit acceleration -> %i\n", VideoInfo->blit_hw);
+    printf("hardware color fill -> %i\n", VideoInfo->blit_fill);
+    printf("VIDEO memory available (on graphic card) (KB) -> %i \n      (only if hw_available == 1, otherwise it is equal to 0)\n", VideoInfo->video_mem);
+    printf("Number of bytes per pixel in the video card -> %i\n", VideoInfo->vfmt->BytesPerPixel);
+    printf("Window manager available -> %i\n", VideoInfo->wm_available);
+
+#endif
+
     if( getConfig()->useOpenGL ){
         flags = SDL_OPENGL | SDL_RESIZABLE;
         SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
@@ -232,9 +265,10 @@
         std::stringstream msg;
         msg << "Couldn't set video mode ("
             << width << "x" << height
-            << "-" << bpp << "bpp) : " << SDL_GetError();
+            << "-" << bpp << "bpp) : " << SDL_GetError() << std::endl;
+
         if(getConfig()->useOpenGL) {
-            std::cerr << "* Fallback to software mode.\n";
+            std::cerr << "* Fallback to SDL mode.\n";
             getConfig()->useOpenGL = false;
             initVideo(width, height);
             return;
@@ -243,6 +277,7 @@
     }
 
     delete painter;
+    VideoInfo = SDL_GetVideoInfo();
     if( getConfig()->useOpenGL ){
         glDisable(GL_DEPTH_TEST);
         glDisable(GL_CULL_FACE);
@@ -259,12 +294,12 @@
         glClear(GL_COLOR_BUFFER_BIT);
 
         painter = new PainterGL();
-        std::cout << "OpenGL Mode " << getConfig()->videoX;
-        std::cout << "x" << getConfig()->videoY << "\n";
+        std::cout << "\nOpenGL Mode " << VideoInfo->current_w;
+        std::cout << "x" << VideoInfo->current_h << "\n";
     } else {
         painter = new PainterSDL(screen);
-        std::cout << "SDL Mode " << getConfig()->videoX;
-        std::cout << "x"<< getConfig()->videoY <<"\n";
+        std::cout << "\nSDL Mode " << VideoInfo->current_w;
+        std::cout << "x"<< VideoInfo->current_h <<"\n";
     }
 
     if(texture_manager == 0) {
@@ -278,6 +313,21 @@
     if(fontManager == 0) {
         fontManager = new FontManager();
     }
+
+#ifdef DEBUG
+    // more info on CURRENT Video Mode
+    VideoInfo = SDL_GetVideoInfo();
+
+    printf("\n***CURRENT*** video mode properties\n");
+    printf("Hardware surface available -> %i\n", VideoInfo->hw_available);
+    printf("hardware blit acceleration -> %i\n", VideoInfo->blit_hw);
+    printf("hardware color fill -> %i\n", VideoInfo->blit_fill);
+    printf("VIDEO memory available (on graphic card) (KB) -> %i\n", VideoInfo->video_mem);
+    printf("Number of butes per pixel in the video card -> %i\n", VideoInfo->vfmt->BytesPerPixel);
+    printf("Window manager available -> %i\n", VideoInfo->wm_available);
+
+#endif
+
 }
 
 void checkGlErrors()
@@ -492,8 +542,16 @@
         xmlInitParser ();
         std::auto_ptr<Sound> sound;
         sound.reset(new Sound());
-        initSDL();
-        initTTF();
+        if(SDL_Init(SDL_INIT_EVERYTHING) < 0) {
+            std::stringstream msg;
+            msg << "Couldn't initialize SDL: " << SDL_GetError();
+            throw std::runtime_error(msg.str());
+        }
+        if(TTF_Init() < 0) {
+            std::stringstream msg;
+            msg << "Couldn't initialize SDL_ttf: " << SDL_GetError();
+            throw std::runtime_error(msg.str());
+        }
         initVideo(getConfig()->videoX, getConfig()->videoY);
 
         mainLoop();



From alainb at mail.berlios.de  Thu Jul 29 21:22:41 2010
From: alainb at mail.berlios.de (alainb at mail.berlios.de)
Date: Thu, 29 Jul 2010 21:22:41 +0200
Subject: [Lincity-ng-commit] r1600 - trunk/src/lincity
Message-ID: <20100729192241.DD6D6480BEE@sheep.berlios.de>

Author: alainb
Date: 2010-07-29 21:22:41 +0200 (Thu, 29 Jul 2010)
New Revision: 1600

Modified:
   trunk/src/lincity/init_game.cpp
Log:
comments in initialisations

Modified: trunk/src/lincity/init_game.cpp
===================================================================
--- trunk/src/lincity/init_game.cpp	2010-07-18 13:05:31 UTC (rev 1599)
+++ trunk/src/lincity/init_game.cpp	2010-07-29 19:22:41 UTC (rev 1600)
@@ -217,6 +217,7 @@
             if (IS_RIVER(x, y) || !GROUP_IS_BARE(MP_GROUP(x, y)))
                 continue;
 
+	    // AL1: FIXME awfully slow. Probably the worst possible way to get this distance (wip rev 1600)
             for (yw = 0; yw < WORLD_SIDE_LEN; yw++) {
                 for (xw = 0; xw < WORLD_SIDE_LEN; xw++) {
                     int d2w;
@@ -337,6 +338,7 @@
     dole_rate = DOLE_RATE;
     transport_cost_rate = TRANSPORT_COST_RATE;
     import_cost_rate = IM_PORT_COST_RATE;
+    // AL1 : export_tax_rate;  is not used in 2.X  always equal to zero ? FIXME ?
 }
 
 static void init_mappoint_array(void)



From alainb at mail.berlios.de  Thu Jul 29 21:22:43 2010
From: alainb at mail.berlios.de (alainb at mail.berlios.de)
Date: Thu, 29 Jul 2010 21:22:43 +0200
Subject: [Lincity-ng-commit] r1601 - in trunk/src: . TinyLandGen
Message-ID: <20100729192243.8278E480BEE@sheep.berlios.de>

Author: alainb
Date: 2010-07-29 21:22:43 +0200 (Thu, 29 Jul 2010)
New Revision: 1601

Added:
   trunk/src/TinyLandGen/
   trunk/src/TinyLandGen/Jamfile
   trunk/src/TinyLandGen/README
   trunk/src/TinyLandGen/ecology.cpp
   trunk/src/TinyLandGen/ground_sea.cpp
   trunk/src/TinyLandGen/lakes_rivers.cpp
   trunk/src/TinyLandGen/lctypes.h
   trunk/src/TinyLandGen/main.cpp
   trunk/src/TinyLandGen/save.cpp
Log:
Add a self-sufficient 'Tiny Land Generator'
  extracted from the main sources
  shrinked to bare minimum (KISS)
  fast with trivial keyboard UI

Added: trunk/src/TinyLandGen/Jamfile
===================================================================
--- trunk/src/TinyLandGen/Jamfile	                        (rev 0)
+++ trunk/src/TinyLandGen/Jamfile	2010-07-29 19:22:43 UTC (rev 1601)
@@ -0,0 +1,10 @@
+C++ = g++ ;
+CXXFLAGS = -g3 -O3 -march=native ;
+LINK = $(C++) ;
+LIBS += -g3 ;
+LINKLIBS on landgen = -lSDL -lz ;
+Library liblandgen : ground_sea.cpp lakes_rivers.cpp ecology.cpp save.cpp ;
+
+LinkLibraries landgen : liblandgen ;
+Main landgen : main.cpp ;
+

Added: trunk/src/TinyLandGen/README
===================================================================
--- trunk/src/TinyLandGen/README	                        (rev 0)
+++ trunk/src/TinyLandGen/README	2010-07-29 19:22:43 UTC (rev 1601)
@@ -0,0 +1,13 @@
+Minimalistic land generation for lincity-NG 2.X
+
+
+Work in progress.
+
+press anykey to generate a new random map + lakes + vegetation
+
+press "f" to save to file
+	* a file named random_land.scn is created in current directory
+	* the keys are no more taken into account until "r" key is hit
+
+close the window with mouse
+

Added: trunk/src/TinyLandGen/ecology.cpp
===================================================================
--- trunk/src/TinyLandGen/ecology.cpp	                        (rev 0)
+++ trunk/src/TinyLandGen/ecology.cpp	2010-07-29 19:22:43 UTC (rev 1601)
@@ -0,0 +1,262 @@
+/** Tiny Land Generator
+ *
+ * @file 	ecology.cpp
+ * @author 	alain.baeckeroot at laposte.net
+ * @copyright 	2010 Alain BAECKEROOT
+ * @license 	GPL v3 or later
+ */
+
+#include "lctypes.h"
+#include <stdlib.h>
+#include <stdio.h>
+#include <math.h>
+
+extern map_struct map;
+extern int alt_min, alt_max, alt_step;
+
+const int INIT_DIST = 2 * WORLD_SIDE_LEN; // works for d0, d1, d2 distances
+
+int global_aridity = rand() % 450 - 150;
+
+void set_mappoint(int x, int y, int type)
+{
+	MP_TYPE(x,y) = type;
+}
+
+static void do_rand_ecology(int x, int y)
+{
+	int r = map.ecotable[x][y];
+	if ((MP_INFO(x, y) | FLAG_HAS_UNDERGROUND_WATER) == 0) {
+		/*true desert */
+		return;
+	}
+
+	if (r >= 300) {
+		/* very dry land */
+		int r2 = rand() % 10;
+		if (r2 <= 6)
+			set_mappoint(x, y, DESERT);
+		else if (r2 <= 8)
+			set_mappoint(x, y, GREEN);
+		else
+			set_mappoint(x, y, TREE);
+	} else if (r >= 160) {
+		int r2 = rand() % 10;
+		if (r2 <= 2)
+			set_mappoint(x, y, DESERT);
+		else if (r2 <= 6)
+			set_mappoint(x, y, GREEN);
+		else
+			set_mappoint(x, y, TREE);
+	} else if (r >= 80) {
+		int r2 = rand() % 10;
+		if (r2 <= 1)
+			set_mappoint(x, y, DESERT);
+		else if (r2 <= 4)
+			set_mappoint(x, y, GREEN);
+		else if (r2 <= 6)
+			set_mappoint(x, y, TREE);
+		else
+			set_mappoint(x, y, TREE2);
+	} else if (r >= 40) {
+		int r2 = rand() % 40;
+		if (r2 == 0)
+			set_mappoint(x, y, DESERT);
+		else if (r2 <= 12)
+			set_mappoint(x, y, GREEN);
+		else if (r2 <= 24)
+			set_mappoint(x, y, TREE);
+		else if (r2 <= 36)
+			set_mappoint(x, y, TREE2);
+		else
+			set_mappoint(x, y, TREE3);
+	} else if (r >= 0) {
+		/* normal land */
+		int r2 = rand() % 40;
+		if (r2 <= 10)
+			set_mappoint(x, y, GREEN);
+		else if (r2 <= 20)
+			set_mappoint(x, y, TREE);
+		else if (r2 <= 30)
+			set_mappoint(x, y, TREE2);
+		else
+			set_mappoint(x, y, TREE3);
+	} else if (r >= -40) {
+		/* forest */
+		int r2 = rand() % 40;
+		if (r2 <= 5)
+			set_mappoint(x, y, GREEN);
+		else if (r2 <= 10)
+			set_mappoint(x, y, TREE);
+		else if (r2 <= 25)
+			set_mappoint(x, y, TREE2);
+		else
+			set_mappoint(x, y, TREE3);
+	} else if (r >= -80) {
+		int r2 = rand() % 40;
+		if (r2 <= 0)
+			MP_TYPE(x, y) = WATER;
+		else if (r2 <= 6)
+			set_mappoint(x, y, GREEN);
+		else if (r2 <= 15)
+			set_mappoint(x, y, TREE);
+		else if (r2 <= 28)
+			set_mappoint(x, y, TREE2);
+		else
+			set_mappoint(x, y, TREE3);
+	} else if (r >= -120) {
+		int r2 = rand() % 40;
+		if (r2 <= 1)
+			MP_TYPE(x, y) = WATER;
+		else if (r2 <= 6)
+			set_mappoint(x, y, GREEN);
+		else if (r2 <= 16)
+			set_mappoint(x, y, TREE);
+		else if (r2 <= 30)
+			set_mappoint(x, y, TREE2);
+		else
+			set_mappoint(x, y, TREE3);
+	} else {
+		/* wetland */
+		int r2 = rand() % 40;
+		if (r2 <= 3)
+			MP_TYPE(x, y) = WATER;
+		else if (r2 <= 8)
+			set_mappoint(x, y, GREEN);
+		else if (r2 <= 20)
+			set_mappoint(x, y, TREE);
+		else if (r2 <= 35)
+			set_mappoint(x, y, TREE2);
+		else
+			set_mappoint(x, y, TREE3);
+	}
+}
+
+int dist_to_water( int x, int y)
+{
+	// Mahattan distance (d1) computed iteratively
+#define d2r(x, y) map.dist2w[x][y]
+	int d = INIT_DIST;
+	if (IS_RIVER(x,y))
+		return 0;
+
+	if (x == 0) 
+		if (y == 0)
+			d = min ( d2r(x,y+1), d2r(x+1,y) );
+		else if (y == WORLD_SIDE_LEN) 
+			d = min ( d2r(x, y-1), d2r(x+1,y) );
+		else 
+			d = min ( min (d2r(x, y-1), d2r(x, y+1)), d2r(x+1,y));  
+	else if (x == WORLD_SIDE_LEN)
+		if (y == 0)
+			d =  min (d2r(x,y+1), d2r(x-1,y) );
+		else if (y == WORLD_SIDE_LEN) 
+			d =  min (d2r(x, y-1), d2r(x-1,y) );
+		else 
+			d = min ( min (d2r(x, y-1), d2r(x, y+1)), d2r(x-1,y));
+	else if (y == 0)
+		d = min ( min (d2r(x-1, y), d2r(x+1, y)), d2r(x,y+1));
+	else if (y == WORLD_SIDE_LEN)
+		d = min ( min (d2r(x-1, y), d2r(x+1, y)), d2r(x,y-1));
+	else if (map.dist2w[x][y] == INIT_DIST) 
+		d = min( min(d2r(x - 1, y), d2r(x+1,y)), min( d2r(x, y - 1), d2r(x, y + 1)) );
+
+	// d = distance of neighbours
+	// Mahattan distance (d1) computed iteratively = the +1 below
+	return (min(d + 1, map.dist2w[x][y]));
+}
+
+void distance_to_river(void)
+{
+	int newd, number, x, y;
+	int iter = 0;
+	number = WORLD_SIDE_LEN * WORLD_SIDE_LEN;
+
+	for (y = 0; y < WORLD_SIDE_LEN ; y++)
+		for (x = 0; x < WORLD_SIDE_LEN; x++)
+			if (IS_RIVER(x,y)) {
+				map.dist2w[x][y] = 0;
+				number--;
+			} else {
+				map.dist2w[x][y] = INIT_DIST;
+			}
+
+	//fprintf(stdout,"initial remaining %i \n", number);
+	while (number > 0) {
+		for (y = 0; y < WORLD_SIDE_LEN; y++) {
+			for (x = 0; x < WORLD_SIDE_LEN; x++) {
+				newd = dist_to_water(x,y);
+				if ( (newd != 0) && (newd < INIT_DIST)) {
+					if (map.dist2w[x][y] == INIT_DIST)
+						number--;
+					map.dist2w[x][y] = newd;
+					//fprintf(stdout," d2w = %i \n", newd);
+				}
+			}
+			//fprintf(stdout," remaining %i \n", number);
+		}
+		++iter;
+	}
+	//fprintf(stdout," iteration %i \n", iter);
+
+
+}
+
+void setup_land()
+{
+	int x, y, xw, yw;
+	int aridity = global_aridity;
+
+	distance_to_river();
+
+	for (y = 0; y < WORLD_SIDE_LEN; y++) {
+		for (x = 0; x < WORLD_SIDE_LEN; x++) {
+			int d2w_min = 2 * WORLD_SIDE_LEN * WORLD_SIDE_LEN;
+			int r;
+			int arid = aridity;
+			//int alt0 = 0;
+
+			/* test against IS_RIVER to prevent terrible recursion */
+			if (IS_RIVER(x, y))
+				continue;
+
+			d2w_min = map.dist2w[x][y];
+
+			/* near river lower aridity */
+			if (aridity > 0) {
+				if (d2w_min < 5)
+					arid = aridity / 3;
+				else if (d2w_min < 17)
+					arid = (aridity * 2) / 3;
+			}
+			/* Altitude has same effect as distance */
+			r = rand() % (d2w_min / 3 + 1) \
+			    + arid \
+			    + abs(ALT(x, y) * 15 / alt_step) \
+			    + 3 * (ALT(x, y) * ALT(x, y)) / 1000000;
+
+			map.ecotable[x][y] = r;
+			/* needed to setup quasi randome land. The flag is set below */
+			MP_INFO(x, y) |= FLAG_HAS_UNDERGROUND_WATER;
+			do_rand_ecology(x, y);
+
+			/* preserve rivers, so that we can connect port later */
+			if (MP_TYPE(x, y) == WATER) {
+				int navigable = MP_INFO(x, y) & FLAG_IS_RIVER;
+				set_mappoint(x, y, WATER);
+				MP_INFO(x, y) |= navigable;
+				MP_INFO(x, y) |= FLAG_HAS_UNDERGROUND_WATER;
+			}
+			/* set undergroung water according to first random land setup */
+			if (MP_TYPE(x, y) == DESERT) {
+				MP_INFO(x, y) &= (0xffffffff - FLAG_HAS_UNDERGROUND_WATER);
+			}
+		}
+	}
+	for (y = 0; y < WORLD_SIDE_LEN; y++)
+		for (x = 0; x < WORLD_SIDE_LEN; x++)
+			if (MP_TYPE(x, y) == WATER)
+				MP_INFO(x, y) |= FLAG_HAS_UNDERGROUND_WATER;
+
+	//connect_rivers();
+}

Added: trunk/src/TinyLandGen/ground_sea.cpp
===================================================================
--- trunk/src/TinyLandGen/ground_sea.cpp	                        (rev 0)
+++ trunk/src/TinyLandGen/ground_sea.cpp	2010-07-29 19:22:43 UTC (rev 1601)
@@ -0,0 +1,132 @@
+/** Tiny Land Generator
+ *
+ * @file 	ground_sea.cpp
+ * @author 	alain.baeckeroot at laposte.net
+ * @copyright 	2010 Alain BAECKEROOT
+ * @license 	GPL v3 or later
+ */
+
+#include "lctypes.h"
+#include <stdlib.h>
+#include <stdio.h>
+#include <math.h>
+
+extern map_struct map;
+
+int alt_min;
+int alt_max;
+int alt_step;
+
+int global_mountainity = 4000;	//  nearly useless to have a random one (only impacts do_rand_ecology through ALT(x,y))
+
+const int mask_size = 7;	// useless to be larger than 3*sigma && Must be < SHIFT
+float norm, gauss_mask[2 * mask_size + 1][2 * mask_size + 1];
+
+void build_gaussian_mask()
+{
+	const float sigma = 2.5;
+	const float ods2 = 1. / (2. * sigma * sigma);
+
+	norm = 0;
+	for (int i = 0; i < 2 * mask_size + 1; i++) {
+		for (int j = 0; j < 2 * mask_size + 1; j++) {
+			float r2 = (i - mask_size) * (i - mask_size) + (j - mask_size) * (j - mask_size);
+			gauss_mask[i][j] = exp(-r2 * ods2);
+			norm += gauss_mask[i][j];
+		}
+	}
+	norm = 1. / norm;
+}
+
+void setup_ground(void)
+{
+	/* Principle of land generation :
+	 *
+	 * we start with large blocks of land SZ x SZ, and take random height for each
+	 *     at each iteration we divide the block size by 2, and Altitude += rand() * mountainity
+	 *
+	 * then we smooth the land, in order to have several local maxima and minima, but not hundreds
+	 *     (else we go crazy with river path)
+	 */
+
+	const int NLOOP = 5; 	// we stop before reaching 1x1 blocks (which would be for NLOOP=7)
+				// because we smooth with a gaussian mask, so details would be erased
+
+	const int SZ = 128;	// must be >= 2^NLOOP
+	const int SHIFT = (SZ - WORLD_SIDE_LEN) / 2;	// center the visible map in the big one
+
+	/* good values:
+	 *      sigma = 3.5   // sigma =2.5 => lots of local minima = small lakes  ;
+	 */
+
+	float tmp[SZ][SZ];
+	float t2[SZ][SZ];
+	float h;
+	int i, j, k, l, m, n, size;
+
+	for (i = 0; i < SZ; i++) {
+		for (j = 0; j < SZ; j++) {
+			t2[i][j] = 0;
+			tmp[i][j] = 0;
+		}
+	}
+
+	/* fractal iteration for height */
+	n = 1;
+	for (k = 1; k < NLOOP; k++) {
+		n *= 2;
+		size = SZ / n;
+		// n x n block of size
+		for (l = 0; l < n; l++) {
+			for (m = 0; m < n; m++) {
+				// one block
+				h = rand() % global_mountainity;
+				for (i = 0; i < size; i++)
+					for (j = 0; j < size; j++)
+						t2[l * size + i][m * size + j] += h;
+			}
+		}
+	}
+
+	// put east side at altitude 0
+	/*
+	   for (i = WORLD_SIDE_LEN; i < SZ; i++)
+	   for (j = 0; j < SZ; j++)
+	   t2[i][j]=0.;
+	 */
+
+	//smooth with gaussian mask
+	for (i = mask_size; i < SZ - mask_size; i++)
+		for (j = mask_size; j < SZ - mask_size; j++) {
+			tmp[i][j] = 0;
+			for (k = -mask_size; k <= mask_size; k++)
+				for (l = -mask_size; l <= mask_size; l++)
+					tmp[i][j] += t2[i + k][j - l] \
+						     * gauss_mask[mask_size + k][mask_size + l];
+		}
+
+	float a_max = 0;
+	float a_min = 1.e9;
+	// pick our map in the fractal one  and normalize it 
+	for (i = 0; i < WORLD_SIDE_LEN; i++)
+		for (j = 0; j < WORLD_SIDE_LEN; j++) {
+			ALT(i, j) = (int)(tmp[SHIFT + i][SHIFT + j] * norm);
+			if (ALT(i, j) > a_max)
+				a_max = ALT(i, j);
+			if (ALT(i, j) > 0 && ALT(i, j) < a_min)
+				a_min = ALT(i, j);
+		}
+	// take visible value for maximum color dynamic
+	a_min -= 1.;
+	a_max += 1.;
+	alt_min = (int)a_min;
+	alt_max = (int)a_max;
+	alt_step = (alt_max - alt_min) / 10;
+
+	for (i = 0; i < WORLD_SIDE_LEN; i++)
+		for (j = 0; j < WORLD_SIDE_LEN; j++)
+			MP_COLOR(i, j) = (unsigned long)((ALT(i, j) - a_min) / (a_max - a_min) * 16777216.);
+
+	//fprintf(stderr, " alt min = %i; max = %i\n", alt_min, alt_max);
+
+}

Added: trunk/src/TinyLandGen/lakes_rivers.cpp
===================================================================
--- trunk/src/TinyLandGen/lakes_rivers.cpp	                        (rev 0)
+++ trunk/src/TinyLandGen/lakes_rivers.cpp	2010-07-29 19:22:43 UTC (rev 1601)
@@ -0,0 +1,271 @@
+/** TinyEarth LandGenerator
+ *
+ * @file 	lakes_rivers.cpp
+ * @author 	alain.baeckeroot at laposte.net
+ * @copyright 	2010 Alain BAECKEROOT
+ * @license 	GPL v3 or later
+ */
+
+#include "lctypes.h"
+#include <stdlib.h>
+#include <stdio.h>
+#include <math.h>
+
+extern int alt_min, alt_max, alt_step;
+extern map_struct map;
+
+struct Shoreline {
+	int x;
+	int y;
+	int altitude;
+	struct Shoreline *next;
+};
+
+void connect_rivers(void)
+{
+}
+
+static int in_map(int x, int y)
+{
+	return ((x >= 0) && (x < WORLD_SIDE_LEN) && (y >= 0) && (y < WORLD_SIDE_LEN));
+}
+
+static int is_border(int x, int y)
+{
+	if ((x == 0) || (x == (WORLD_SIDE_LEN - 1)) || (y == 0) || (y == (WORLD_SIDE_LEN - 1)))
+		return 1;
+	else
+		return 0;
+}
+
+static void set_river_tile(int i, int j)
+{
+	MP_TYPE(i, j) = WATER;
+	MP_INFO(i, j) |= FLAG_IS_RIVER;
+	MP_COLOR(i, j) = 128;	//dark blue
+}
+
+static void sort_by_altitude(int n, int *tabx, int *taby)
+{
+	// sort ascending
+	int tmp_x, tmp_y;
+	bool sorted = false;
+
+	// bubble sort. n is near 10 so ...
+	for (int i = 0; i < n && !sorted; i++) {
+		sorted = true;
+		for (int j = 1; j < n - i; j++)
+			if (ALT(tabx[j], taby[j]) < ALT(tabx[j - 1], taby[j - 1])) {
+				tmp_x = tabx[j - 1];
+				tmp_y = taby[j - 1];
+				tabx[j - 1] = tabx[j];
+				taby[j - 1] = taby[j];
+				tabx[j] = tmp_x;
+				taby[j] = tmp_y;
+				sorted = false;
+			}
+	}
+}
+
+static void free_shore(Shoreline * shore)
+{
+	Shoreline *tmp;
+	while (shore->next != NULL) {
+		tmp = shore;
+		shore = shore->next;
+		free(tmp);
+	}
+	free(shore);
+}
+
+static Shoreline *init_shore(void)
+{
+	Shoreline *shore;
+
+	shore = (Shoreline *) malloc(sizeof(struct Shoreline));
+	shore->next = (Shoreline *) malloc(sizeof(struct Shoreline));
+
+	shore->x = -1;
+	shore->y = -1;
+	shore->altitude = -1;
+	shore->next = NULL;
+
+	return shore;
+}
+
+static void add_shore_point(Shoreline * current, int x, int y, int altitude)
+{
+	Shoreline *newp;
+	newp = (Shoreline *) malloc(sizeof(struct Shoreline));
+	newp->next = (Shoreline *) malloc(sizeof(struct Shoreline));
+	newp->x = x;
+	newp->y = y;
+	newp->altitude = altitude;
+	newp->next = current->next;
+	current->next = newp;
+}
+
+static void try_shore_point(int x, int y, Shoreline * shore)
+{
+	Shoreline *current;
+	int a;
+	current = shore;
+	a = ALT(x, y);
+
+	while (current->next != NULL) {
+		if (a < current->next->altitude) {
+			// insert in beginning of the list
+			add_shore_point(current, x, y, a);
+			return;
+		} else if (a == current->next->altitude) {
+			while ((current->next != NULL) && (current->next->altitude == a)) {
+				if ((current->x == x) && (current->y == y)) {
+					// do not insert the same shore point several times at different places
+					return;
+				};
+				current = current->next;
+			};
+			//insert the shore point in the list
+			add_shore_point(current, x, y, a);
+			return;
+		};
+		current = current->next;
+	};
+	// we reached end of list
+	// altitude of the point is strict maximum of the list
+	if ((current->x != x) && (current->y != y))
+		add_shore_point(current, x, y, a);
+}
+
+static int setup_one_river(int xx, int yy, int lake_id, Shoreline * shore)
+{
+	int alt_max, x, y, alt, x0, y0;
+	// start a river from point (xx, yy)
+	set_river_tile(xx, yy);
+	alt_max = ALT(xx, yy);
+
+	x0 = xx;
+	y0 = yy;
+	/* follow most important slope and go downward */
+	while (((xx != x) || (yy != y)) && (xx != 0) && (xx != (WORLD_SIDE_LEN - 1)) && (yy != 0)
+	       && (yy != WORLD_SIDE_LEN - 1)) {
+		int m = 0;
+		x = xx;
+		y = yy;
+		alt = ALT(x, y);
+		for (int n = 0; n < 8; n++) {
+			if (in_map(x + di[n], y + dj[n])) {
+				if (ALT(x + di[n], y + dj[n]) < alt) {
+					xx = x + di[n];
+					yy = y + dj[n];
+					alt = ALT(xx, yy);
+					m = n;
+				}
+				// find neighbours and update shore line if needed
+				// may mark as shoreline a point which will be set as river later. We don't care
+				if (!IS_WATER(x + di[n], y + dj[n]))
+					try_shore_point(x + di[n], y + dj[n], shore);
+			}
+		}
+
+		set_river_tile(xx, yy);
+		if (m > 3) {
+			// we did diagonal move, so we need to connect river
+			if (ALT(x + di[m], y) > ALT(x, y + dj[m]))
+				set_river_tile(x, y + dj[m]);
+			else
+				set_river_tile(x + di[m], y);
+		}
+	};
+	// We are in a local minimum or at the borders of the map (strictly the lowest points)
+
+}
+
+static void overfill_lake(int x, int y, Shoreline * shore, int lake_id)
+{
+	// Starting point is a local minimum
+	// Lake growth is done iteratively by flooding the lowest shore point and rising water level
+	// shore point = neighbour without water 
+	//      (at this point we have no water in the map, except other lakes and rivers)
+	//
+	// We have a list of shore points sorted by altitude
+
+	int i, level;
+
+	if (is_border(x, y))
+		return;
+
+	set_river_tile(x, y);
+	level = ALT(x, y);
+
+	// find neighbours
+	for (i = 0; i < 8; i++) {
+		if (in_map(x + di[i], y + dj[i]) && !IS_WATER(x + di[i], y + dj[i]))
+			try_shore_point(x + di[i], y + dj[i], shore);
+	}
+
+	if (shore->next != NULL) {
+		shore = shore->next;
+		x = shore->x;
+		y = shore->y;
+
+		if ((ALT(x, y) < level)) {
+			set_river_tile(x, y);
+			// create river and continue to build shoreline
+			// we will continue to overfill (from a lower point) until we reach border of the map
+			//fprintf(stdout, "We found a pass x %i, y %i, alt %i \n", x, y, ALT(x,y));
+			setup_one_river(x, y, lake_id, shore);
+		}
+		overfill_lake(x, y, shore, lake_id);
+	} else {
+		// Q: ? Should this happen ?
+		// A: yes if we are in a lake that was previously filled by a higher one which overfilled here
+		//    else ? it should not happen ?
+		//fprintf(stderr,"the shoreline list is empty, x = %i, y = %i\n", x, y);
+	}
+}
+
+void setup_lake_river(void)
+{
+	// brute search of local minimum
+
+	int lakx[WORLD_SIDE_LEN * WORLD_SIDE_LEN], laky[WORLD_SIDE_LEN * WORLD_SIDE_LEN];
+	Shoreline *shore;
+	int i, j, l, m, alt;
+
+	// Put the gray border (not visible) at alt_min - 1, for easier rivers handling.
+	for (i = 0; i < WORLD_SIDE_LEN; i++) {
+		ALT(i, 0) = alt_min - 1;
+		ALT(i, WORLD_SIDE_LEN - 1) = alt_min - 1;
+		ALT(0, i) = alt_min - 1;
+		ALT(WORLD_SIDE_LEN - 1, i) = alt_min - 1;
+	}
+
+	l = 0;
+	for (i = 1; i < WORLD_SIDE_LEN - 1; i++) {
+		for (j = 1; j < WORLD_SIDE_LEN - 1; j++) {
+			alt = ALT(i, j);
+			m = -1;
+			for (int n = 0; n < 8; n++) {
+				if (ALT(i + di[n], j + dj[n]) < alt) {
+					m = n;
+				}
+			}
+			if (m == -1) {
+				lakx[l] = i;
+				laky[l] = j;
+				l++;
+			}
+		}
+	}
+
+	sort_by_altitude(l, lakx, laky);
+	for (i = 0; i < l; i++) {
+		// start by the lowest lake
+		//fprintf(stdout, "LAKE %i : %i, %i, alt %f\n", i, lakx[i], laky[i], ALT(lakx[i], laky[i]));
+		shore = init_shore();
+		set_river_tile(lakx[i], laky[i]);
+		overfill_lake(lakx[i], laky[i], shore, WORLD_SIDE_LEN * lakx[i] + laky[i]);
+		free_shore(shore);
+	}
+}

Added: trunk/src/TinyLandGen/lctypes.h
===================================================================
--- trunk/src/TinyLandGen/lctypes.h	                        (rev 0)
+++ trunk/src/TinyLandGen/lctypes.h	2010-07-29 19:22:43 UTC (rev 1601)
@@ -0,0 +1,73 @@
+/**
+ * @file lctypes.h
+ */
+
+#ifndef __lctypes_h__
+#define __lctypes_h__
+
+// from http://www.ibm.com/developerworks/linux/library/l-gcc-hacks/index.html
+#define min(x, y) ({				\
+	typeof(x) _min1 = (x);			\
+	typeof(y) _min2 = (y);			\
+	(void) (&_min1 == &_min2);		\
+	_min1 < _min2 ? _min1 : _min2; })	
+
+
+/* Vector for visiting neigbours = ( di(k) , dj(k) )  ; ordered so that diagonal moves are the last 4 */
+static const int di[8] = { -1, 0, 1, 0, 1, 1, -1, -1 };
+static const int dj[8] = { 0, -1, 0, 1, 1, -1, 1, -1 };
+
+#define WORLD_SIDE_LEN 100
+#define SIZE 8
+#define SCREEN_SIZE (SIZE * WORLD_SIDE_LEN)
+
+/*
+ * needed to save in LinCity-NG format
+ */
+//gui_interface/pbar_interface.h:
+#define PBAR_DATA_SIZE 12
+#define NUM_PBARS 9
+
+//gui_interface/shared_globals.h:
+#define NUMOF_MODULES 32
+
+// src/lincity/lctypes.h  CST_stuff
+#define GREEN		0
+#define WATER		221
+#define DESERT		350
+#define TREE		351
+#define TREE2		352
+#define TREE3		353
+
+// src/lincity/loadsave.h
+#define WATERWELL_V2 1322
+
+// src/lincity/lintypes.h
+#define MAX_NUMOF_SUBSTATIONS 512
+#define MAX_NUMOF_MARKETS 512
+
+struct map_struct {
+	float altitude[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
+	unsigned long color[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
+	int type[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
+	int flag[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
+	int dist2w[WORLD_SIDE_LEN][WORLD_SIDE_LEN]; // distance to water; manhattan (L1) is fast to compute iteratively
+    	int ecotable[WORLD_SIDE_LEN][WORLD_SIDE_LEN]; //
+};
+
+#define ALT(x,y) map.altitude[x][y]
+#define MP_TYPE(x,y)   map.type[x][y]
+#define MP_INFO(x,y)   map.flag[x][y]
+#define MP_COLOR(x,y)	map.color[x][y]
+
+//src/lincity/power.h:
+#define IS_WATER(x,y)    (MP_TYPE(x,y) == WATER)
+
+//src/lincity/init_game.cpp:
+#define IS_RIVER(x,y) (MP_INFO(x,y) & FLAG_IS_RIVER)
+
+// src/lincity/lin-city.h
+#define FLAG_IS_RIVER           (0x800000)
+#define FLAG_HAS_UNDERGROUND_WATER (0x20000000)
+
+#endif

Added: trunk/src/TinyLandGen/main.cpp
===================================================================
--- trunk/src/TinyLandGen/main.cpp	                        (rev 0)
+++ trunk/src/TinyLandGen/main.cpp	2010-07-29 19:22:43 UTC (rev 1601)
@@ -0,0 +1,181 @@
+/** Tiny Land Generator
+ *
+ * @file	main.cpp
+ * @author 	alain.baeckeroot at laposte.net
+ * @copyright 	2010 Alain BAECKEROOT
+ * @license 	GPL v3 or later
+ */
+
+#if defined(_MSC_VER)
+#include "SDL.h"
+#else
+#include "SDL/SDL.h"
+#endif
+
+#include <time.h>
+#include <math.h>
+
+#include "lctypes.h"
+
+SDL_Surface *screen;
+
+extern void build_gaussian_mask();
+extern void setup_ground(void);
+extern void setup_lake_river(void);
+extern void setup_land(void);
+
+extern void save_city_2(char *cname);
+extern int alt_min, alt_max, alt_step;
+
+map_struct map;
+
+int key = 0;
+unsigned long i = 0;
+int redraw = true;
+
+void erase_map()
+{
+
+	for (int i = 0; i < WORLD_SIDE_LEN; i++)
+		for (int j = 0; j < WORLD_SIDE_LEN; j++) {
+			MP_INFO(i, j) = 0;
+			MP_TYPE(i, j) = 0;
+		}
+}
+
+void render()
+{
+	SDL_Rect rect;
+
+	// Lock surface if needed
+	if (SDL_MUSTLOCK(screen))
+		if (SDL_LockSurface(screen) < 0)
+			return;
+
+	// Ask SDL for the time in milliseconds
+	int tick = SDL_GetTicks();
+
+	// Draw to screen
+	//SDL_FillRect(screen, NULL, 65536 * i++ );
+	for (int i = 0; i < WORLD_SIDE_LEN; i++) {
+		for (int j = 0; j < WORLD_SIDE_LEN; j++) {
+			rect.x = (int)(i * SIZE);
+			rect.y = j * SIZE + 1;
+			rect.w = SIZE;
+			rect.h = SIZE;
+			SDL_FillRect(screen, &rect, MP_COLOR(i, j));
+			//SDL_FillRect(screen, &rect, map.dist2w[i][j] * 260000);
+		}
+	}
+
+	// Unlock if needed
+	if (SDL_MUSTLOCK(screen))
+		SDL_UnlockSurface(screen);
+
+	// Tell SDL to update the whole screen
+	SDL_UpdateRect(screen, 0, 0, SCREEN_SIZE, SCREEN_SIZE);
+}
+
+int main(void)
+{
+    char *fname;
+    fname = "random_land.scn";
+
+#ifdef DEBUG
+	// Fix random seed for easier debug
+	srand(1234);
+#else
+	srand(time(0));
+#endif
+
+	// Initialize SDL's subsystems - in this case, only video.
+	if (SDL_Init(SDL_INIT_VIDEO) < 0) {
+		fprintf(stderr, "Unable to init SDL: %s\n", SDL_GetError());
+		exit(1);
+	}
+	// Register SDL_Quit to be called at exit; makes sure things are
+	// cleaned up when we quit.
+	atexit(SDL_Quit);
+
+	// Attempt to create a 600x600 window with 32 bit per pixels.
+	screen = SDL_SetVideoMode(SCREEN_SIZE, SCREEN_SIZE, 24, SDL_SWSURFACE);
+
+	// If we fail, return error.
+	if (screen == NULL) {
+		fprintf(stderr, "Unable to set %ix%i video: %s\n", SCREEN_SIZE, SCREEN_SIZE, SDL_GetError());
+		exit(1);
+	}
+	// gaussian mask of fixed size used for ground smoothing
+	build_gaussian_mask();
+
+	// Main loop: loop forever.
+	while (1) {
+		// Poll for events, and handle the ones we care about.
+		SDL_Event event;
+		while (SDL_PollEvent(&event)) {
+			switch (event.type) {
+			case SDL_KEYDOWN:
+				key = event.key.keysym.sym;
+				switch (key) {
+				case SDLK_r:
+					// 1.0 : generate a new Random field
+					redraw = true;
+					break;
+
+			    // 1.1 : put sea on this side: North, East, South, West
+				case SDLK_n:
+					break;
+				case SDLK_e:
+					break;
+				case SDLK_s:
+					break;
+				case SDLK_w:
+					break;
+
+				case SDLK_UP:
+					// 1.2 : adjust max altitude
+					break;
+				case SDLK_DOWN:
+					break;
+
+				case SDLK_l:
+					// 2.0 : lakes and rivers
+					break;
+
+				case SDLK_RIGHT:
+					// 3.0 : climate (dryness)
+					break;
+				case SDLK_LEFT:
+					break;
+
+				case SDLK_t:
+					// 3.1 : trees
+					break;
+
+				case SDLK_i:
+					// 4 : isometric view (toggle iso/top)
+					break;
+				case SDLK_f:
+					// 5 : file (save)
+                    			save_city_2(fname);
+					redraw = false;
+					break;
+				}
+				if (redraw) {
+					erase_map();
+					setup_ground();
+					setup_lake_river();
+					setup_land();
+				}
+				break;
+
+			case SDL_QUIT:
+				return (0);
+			}
+		}
+		// Render stuff
+		render();
+		SDL_Delay(10);
+	}
+	return 0;
+}

Added: trunk/src/TinyLandGen/save.cpp
===================================================================
--- trunk/src/TinyLandGen/save.cpp	                        (rev 0)
+++ trunk/src/TinyLandGen/save.cpp	2010-07-29 19:22:43 UTC (rev 1601)
@@ -0,0 +1,165 @@
+
+#include <stdio.h>
+#include <zlib.h>
+
+#include "lctypes.h"
+
+extern map_struct map;
+extern int global_mountainity,  global_aridity;
+
+void save_city_2(char *cname)
+{
+    int x, y, p, ldsv_version;
+    int dumbint = 0;
+
+    int monthgraph_size = 190;
+    
+    gzFile ofile = gzopen(cname, "wb");
+    if (ofile == NULL) {
+        fprintf(stderr,"error Saving file <%s> -\n ", cname);
+    }
+    /* Now we have upgraded game */
+    ldsv_version = WATERWELL_V2;
+    gzprintf(ofile, "%d\n", ldsv_version);
+
+    for (x = 0; x < WORLD_SIDE_LEN; x++)
+        for (y = 0; y < WORLD_SIDE_LEN; y++) {
+            /*               TY po fl cr or i1 i2 i3 i4 i5 i6 i7 PL al ec ws gp wa wp ww wn g1 g2 g3 g4 DA TK AN d4 d5 d6 d7 d8 d9 */
+            gzprintf(ofile, "%u %d %d %u %u %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d\n" 
+                       , MP_TYPE(x, y)
+                       , 0	//housed population
+                       , MP_INFO(x, y)
+                       , 0
+                       , 0
+                       , 0
+                       , 0
+                       , 0
+                       , 0
+                       , 0
+                       , 0
+                       , 0
+                       , 0
+                       , (long int) map.altitude[x][y]
+                       , map.ecotable[x][y]
+                       , 0
+                       , 0
+                       , (long int) map.altitude[x][y]
+                       , 0
+                       , 0
+                       , 0 	// ? TODO map[x][y].water_next ?
+		       		// do the water of this tile go to next (one) or to (several) lower neighbours ?
+                       , 0 // int1 TODO distance to river (for vegetation)
+                       , 0
+                       , 0
+                       , 0
+                       , 0
+                       , 0
+                       , 0
+                       , dumbint        // d4  could be         image index for smooth animation, cf windmill anim_tile
+                       , dumbint        // d5                   percentage of activity to choose family of pic
+                       , dumbint        // d6
+                       , dumbint        // d7
+                       , dumbint        // d8
+                       , dumbint        // d9
+                       );
+        }
+
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+
+    gzprintf(ofile, "%d\n", 0);
+    for (x = 0; x < MAX_NUMOF_SUBSTATIONS; x++) {
+        gzprintf(ofile, "%d\n", 0);
+        gzprintf(ofile, "%d\n", 0);
+    }
+    gzprintf(ofile, "%d\n", 0);
+    for (x = 0; x < MAX_NUMOF_MARKETS; x++) {
+        gzprintf(ofile, "%d\n", 0);
+        gzprintf(ofile, "%d\n", 0);
+    }
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 200); // people_pool : needed to start a game
+    gzprintf(ofile, "%o\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0); /* waste_goods is obsolete */
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0); /* Removed diff_old_population, version 1.12 */
+
+    /* Changed, version 1.12 */
+    gzprintf(ofile, "%d\n", monthgraph_size);
+    for (x = 0; x < monthgraph_size; x++) {
+        gzprintf(ofile, "%d\n", 0);
+        gzprintf(ofile, "%d\n", 0);
+        gzprintf(ofile, "%d\n", 0);
+        gzprintf(ofile, "%d\n", 0);
+    }
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+
+    for (x = 0; x < PBAR_DATA_SIZE; x++)
+        for (p = 0; p < NUM_PBARS; p++)
+            gzprintf(ofile, "%d\n", 0);
+
+    for (p = 0; p < NUM_PBARS; p++) {
+        gzprintf(ofile, "%d\n", 0);
+        gzprintf(ofile, "%d\n", 0);
+    }
+
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%f\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%f\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%f\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+    gzprintf(ofile, "%d\n", 0);
+
+    for (x = 0; x < NUMOF_MODULES; x++)
+        gzprintf(ofile, "%d\n", 0);
+
+    gzprintf(ofile, "random land generator\n"); /* 1 */
+
+    gzprintf(ofile, "%d\n", 0);        /* 2 */
+
+    gzprintf(ofile, "sust %d %d %d %d %d %d %d %d %d %d\n", 0, 0, 0, 0, 0, 0, 0, 0, 0, 0); /* 3 */
+
+    gzprintf(ofile, "arid %d %d\n", global_aridity, global_mountainity); /* 4 */
+
+    gzprintf(ofile, "dummy\n"); /* 5 */
+
+    gzprintf(ofile, "dummy\n"); /* 6 */
+
+    gzprintf(ofile, "dummy\n"); /* 7 */
+
+    gzprintf(ofile, "dummy\n"); /* 8 */
+
+    gzprintf(ofile, "dummy\n"); /* 9 */
+
+    gzprintf(ofile, "dummy\n"); /* 10 */
+
+    gzclose(ofile);
+}
+
+



From alainb at mail.berlios.de  Fri Jul 30 10:17:53 2010
From: alainb at mail.berlios.de (alainb at mail.berlios.de)
Date: Fri, 30 Jul 2010 10:17:53 +0200
Subject: [Lincity-ng-commit] r1602 - in trunk/src: TinyLandGen lincity
Message-ID: <20100730081753.5C68C480CB4@sheep.berlios.de>

Author: alainb
Date: 2010-07-30 10:17:53 +0200 (Fri, 30 Jul 2010)
New Revision: 1602

Modified:
   trunk/src/TinyLandGen/ground_sea.cpp
   trunk/src/lincity/init_game.cpp
Log:
fix confusing +/- intervertion
  (does not change the result, but avoid useless mind confusion)

Modified: trunk/src/TinyLandGen/ground_sea.cpp
===================================================================
--- trunk/src/TinyLandGen/ground_sea.cpp	2010-07-29 19:22:43 UTC (rev 1601)
+++ trunk/src/TinyLandGen/ground_sea.cpp	2010-07-30 08:17:53 UTC (rev 1602)
@@ -101,7 +101,7 @@
 			tmp[i][j] = 0;
 			for (k = -mask_size; k <= mask_size; k++)
 				for (l = -mask_size; l <= mask_size; l++)
-					tmp[i][j] += t2[i + k][j - l] \
+					tmp[i][j] += t2[i + k][j + l] \
 						     * gauss_mask[mask_size + k][mask_size + l];
 		}
 

Modified: trunk/src/lincity/init_game.cpp
===================================================================
--- trunk/src/lincity/init_game.cpp	2010-07-29 19:22:43 UTC (rev 1601)
+++ trunk/src/lincity/init_game.cpp	2010-07-30 08:17:53 UTC (rev 1602)
@@ -474,7 +474,7 @@
                 tmp[i][j] = 0;
                 for ( k = -mask_size; k <= mask_size; k++ )
                     for ( l = -mask_size; l <= mask_size; l++ )
-                        tmp[i][j] += g[i + k][j - l] * mat[mask_size + k][mask_size + l];
+                        tmp[i][j] += g[i + k][j + l] * mat[mask_size + k][mask_size + l];
             }
 
         for (i = mask_size; i< SZ - mask_size; i++)



From alainb at mail.berlios.de  Fri Jul 30 10:41:32 2010
From: alainb at mail.berlios.de (alainb at mail.berlios.de)
Date: Fri, 30 Jul 2010 10:41:32 +0200
Subject: [Lincity-ng-commit] r1603 - trunk/src/TinyLandGen
Message-ID: <20100730084132.80FDC480CB4@sheep.berlios.de>

Author: alainb
Date: 2010-07-30 10:41:32 +0200 (Fri, 30 Jul 2010)
New Revision: 1603

Modified:
   trunk/src/TinyLandGen/ecology.cpp
   trunk/src/TinyLandGen/ground_sea.cpp
   trunk/src/TinyLandGen/lakes_rivers.cpp
   trunk/src/TinyLandGen/lctypes.h
   trunk/src/TinyLandGen/main.cpp
   trunk/src/TinyLandGen/save.cpp
Log:
rename variables in Landgen to prevent confusion with LNG ones

Modified: trunk/src/TinyLandGen/ecology.cpp
===================================================================
--- trunk/src/TinyLandGen/ecology.cpp	2010-07-30 08:17:53 UTC (rev 1602)
+++ trunk/src/TinyLandGen/ecology.cpp	2010-07-30 08:41:32 UTC (rev 1603)
@@ -11,7 +11,7 @@
 #include <stdio.h>
 #include <math.h>
 
-extern map_struct map;
+extern lmap_struct lmap;
 extern int alt_min, alt_max, alt_step;
 
 const int INIT_DIST = 2 * WORLD_SIDE_LEN; // works for d0, d1, d2 distances
@@ -25,8 +25,8 @@
 
 static void do_rand_ecology(int x, int y)
 {
-	int r = map.ecotable[x][y];
-	if ((MP_INFO(x, y) | FLAG_HAS_UNDERGROUND_WATER) == 0) {
+	int r = lmap.ecotable[x][y];
+	if ((MP_FLAG(x, y) | FLAG_HAS_UNDERGROUND_WATER) == 0) {
 		/*true desert */
 		return;
 	}
@@ -135,7 +135,7 @@
 int dist_to_water( int x, int y)
 {
 	// Mahattan distance (d1) computed iteratively
-#define d2r(x, y) map.dist2w[x][y]
+#define d2r(x, y) lmap.dist2w[x][y]
 	int d = INIT_DIST;
 	if (IS_RIVER(x,y))
 		return 0;
@@ -158,12 +158,12 @@
 		d = min ( min (d2r(x-1, y), d2r(x+1, y)), d2r(x,y+1));
 	else if (y == WORLD_SIDE_LEN)
 		d = min ( min (d2r(x-1, y), d2r(x+1, y)), d2r(x,y-1));
-	else if (map.dist2w[x][y] == INIT_DIST) 
+	else if (lmap.dist2w[x][y] == INIT_DIST) 
 		d = min( min(d2r(x - 1, y), d2r(x+1,y)), min( d2r(x, y - 1), d2r(x, y + 1)) );
 
 	// d = distance of neighbours
 	// Mahattan distance (d1) computed iteratively = the +1 below
-	return (min(d + 1, map.dist2w[x][y]));
+	return (min(d + 1, lmap.dist2w[x][y]));
 }
 
 void distance_to_river(void)
@@ -175,10 +175,10 @@
 	for (y = 0; y < WORLD_SIDE_LEN ; y++)
 		for (x = 0; x < WORLD_SIDE_LEN; x++)
 			if (IS_RIVER(x,y)) {
-				map.dist2w[x][y] = 0;
+				lmap.dist2w[x][y] = 0;
 				number--;
 			} else {
-				map.dist2w[x][y] = INIT_DIST;
+				lmap.dist2w[x][y] = INIT_DIST;
 			}
 
 	//fprintf(stdout,"initial remaining %i \n", number);
@@ -187,9 +187,9 @@
 			for (x = 0; x < WORLD_SIDE_LEN; x++) {
 				newd = dist_to_water(x,y);
 				if ( (newd != 0) && (newd < INIT_DIST)) {
-					if (map.dist2w[x][y] == INIT_DIST)
+					if (lmap.dist2w[x][y] == INIT_DIST)
 						number--;
-					map.dist2w[x][y] = newd;
+					lmap.dist2w[x][y] = newd;
 					//fprintf(stdout," d2w = %i \n", newd);
 				}
 			}
@@ -220,7 +220,7 @@
 			if (IS_RIVER(x, y))
 				continue;
 
-			d2w_min = map.dist2w[x][y];
+			d2w_min = lmap.dist2w[x][y];
 
 			/* near river lower aridity */
 			if (aridity > 0) {
@@ -235,28 +235,28 @@
 			    + abs(ALT(x, y) * 15 / alt_step) \
 			    + 3 * (ALT(x, y) * ALT(x, y)) / 1000000;
 
-			map.ecotable[x][y] = r;
+			lmap.ecotable[x][y] = r;
 			/* needed to setup quasi randome land. The flag is set below */
-			MP_INFO(x, y) |= FLAG_HAS_UNDERGROUND_WATER;
+			MP_FLAG(x, y) |= FLAG_HAS_UNDERGROUND_WATER;
 			do_rand_ecology(x, y);
 
 			/* preserve rivers, so that we can connect port later */
 			if (MP_TYPE(x, y) == WATER) {
-				int navigable = MP_INFO(x, y) & FLAG_IS_RIVER;
+				int navigable = MP_FLAG(x, y) & FLAG_IS_RIVER;
 				set_mappoint(x, y, WATER);
-				MP_INFO(x, y) |= navigable;
-				MP_INFO(x, y) |= FLAG_HAS_UNDERGROUND_WATER;
+				MP_FLAG(x, y) |= navigable;
+				MP_FLAG(x, y) |= FLAG_HAS_UNDERGROUND_WATER;
 			}
 			/* set undergroung water according to first random land setup */
 			if (MP_TYPE(x, y) == DESERT) {
-				MP_INFO(x, y) &= (0xffffffff - FLAG_HAS_UNDERGROUND_WATER);
+				MP_FLAG(x, y) &= (0xffffffff - FLAG_HAS_UNDERGROUND_WATER);
 			}
 		}
 	}
 	for (y = 0; y < WORLD_SIDE_LEN; y++)
 		for (x = 0; x < WORLD_SIDE_LEN; x++)
 			if (MP_TYPE(x, y) == WATER)
-				MP_INFO(x, y) |= FLAG_HAS_UNDERGROUND_WATER;
+				MP_FLAG(x, y) |= FLAG_HAS_UNDERGROUND_WATER;
 
 	//connect_rivers();
 }

Modified: trunk/src/TinyLandGen/ground_sea.cpp
===================================================================
--- trunk/src/TinyLandGen/ground_sea.cpp	2010-07-30 08:17:53 UTC (rev 1602)
+++ trunk/src/TinyLandGen/ground_sea.cpp	2010-07-30 08:41:32 UTC (rev 1603)
@@ -11,7 +11,7 @@
 #include <stdio.h>
 #include <math.h>
 
-extern map_struct map;
+extern lmap_struct lmap;
 
 int alt_min;
 int alt_max;

Modified: trunk/src/TinyLandGen/lakes_rivers.cpp
===================================================================
--- trunk/src/TinyLandGen/lakes_rivers.cpp	2010-07-30 08:17:53 UTC (rev 1602)
+++ trunk/src/TinyLandGen/lakes_rivers.cpp	2010-07-30 08:41:32 UTC (rev 1603)
@@ -12,7 +12,7 @@
 #include <math.h>
 
 extern int alt_min, alt_max, alt_step;
-extern map_struct map;
+extern lmap_struct lmap;
 
 struct Shoreline {
 	int x;
@@ -41,7 +41,7 @@
 static void set_river_tile(int i, int j)
 {
 	MP_TYPE(i, j) = WATER;
-	MP_INFO(i, j) |= FLAG_IS_RIVER;
+	MP_FLAG(i, j) |= FLAG_IS_RIVER;
 	MP_COLOR(i, j) = 128;	//dark blue
 }
 

Modified: trunk/src/TinyLandGen/lctypes.h
===================================================================
--- trunk/src/TinyLandGen/lctypes.h	2010-07-30 08:17:53 UTC (rev 1602)
+++ trunk/src/TinyLandGen/lctypes.h	2010-07-30 08:41:32 UTC (rev 1603)
@@ -46,7 +46,7 @@
 #define MAX_NUMOF_SUBSTATIONS 512
 #define MAX_NUMOF_MARKETS 512
 
-struct map_struct {
+struct lmap_struct {
 	float altitude[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
 	unsigned long color[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
 	int type[WORLD_SIDE_LEN][WORLD_SIDE_LEN];
@@ -55,16 +55,16 @@
     	int ecotable[WORLD_SIDE_LEN][WORLD_SIDE_LEN]; //
 };
 
-#define ALT(x,y) map.altitude[x][y]
-#define MP_TYPE(x,y)   map.type[x][y]
-#define MP_INFO(x,y)   map.flag[x][y]
-#define MP_COLOR(x,y)	map.color[x][y]
+#define ALT(x,y) lmap.altitude[x][y]
+#define MP_TYPE(x,y)   lmap.type[x][y]
+#define MP_FLAG(x,y)   lmap.flag[x][y]
+#define MP_COLOR(x,y)	lmap.color[x][y]
 
 //src/lincity/power.h:
 #define IS_WATER(x,y)    (MP_TYPE(x,y) == WATER)
 
 //src/lincity/init_game.cpp:
-#define IS_RIVER(x,y) (MP_INFO(x,y) & FLAG_IS_RIVER)
+#define IS_RIVER(x,y) (MP_FLAG(x,y) & FLAG_IS_RIVER)
 
 // src/lincity/lin-city.h
 #define FLAG_IS_RIVER           (0x800000)

Modified: trunk/src/TinyLandGen/main.cpp
===================================================================
--- trunk/src/TinyLandGen/main.cpp	2010-07-30 08:17:53 UTC (rev 1602)
+++ trunk/src/TinyLandGen/main.cpp	2010-07-30 08:41:32 UTC (rev 1603)
@@ -27,7 +27,7 @@
 extern void save_city_2(char *cname);
 extern int alt_min, alt_max, alt_step;
 
-map_struct map;
+lmap_struct lmap;
 
 int key = 0;
 unsigned long i = 0;
@@ -38,7 +38,7 @@
 
 	for (int i = 0; i < WORLD_SIDE_LEN; i++)
 		for (int j = 0; j < WORLD_SIDE_LEN; j++) {
-			MP_INFO(i, j) = 0;
+			MP_FLAG(i, j) = 0;
 			MP_TYPE(i, j) = 0;
 		}
 }
@@ -64,7 +64,7 @@
 			rect.w = SIZE;
 			rect.h = SIZE;
 			SDL_FillRect(screen, &rect, MP_COLOR(i, j));
-			//SDL_FillRect(screen, &rect, map.dist2w[i][j] * 260000);
+			//SDL_FillRect(screen, &rect, lmap.dist2w[i][j] * 260000);
 		}
 	}
 
@@ -79,7 +79,7 @@
 int main(void)
 {
     char *fname;
-    fname = "random_land.scn";
+    fname = (char *) "random_land.scn";
 
 #ifdef DEBUG
 	// Fix random seed for easier debug

Modified: trunk/src/TinyLandGen/save.cpp
===================================================================
--- trunk/src/TinyLandGen/save.cpp	2010-07-30 08:17:53 UTC (rev 1602)
+++ trunk/src/TinyLandGen/save.cpp	2010-07-30 08:41:32 UTC (rev 1603)
@@ -4,7 +4,7 @@
 
 #include "lctypes.h"
 
-extern map_struct map;
+extern lmap_struct lmap;
 extern int global_mountainity,  global_aridity;
 
 void save_city_2(char *cname)
@@ -28,7 +28,7 @@
             gzprintf(ofile, "%u %d %d %u %u %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d\n" 
                        , MP_TYPE(x, y)
                        , 0	//housed population
-                       , MP_INFO(x, y)
+                       , MP_FLAG(x, y)
                        , 0
                        , 0
                        , 0
@@ -39,11 +39,11 @@
                        , 0
                        , 0
                        , 0
-                       , (long int) map.altitude[x][y]
-                       , map.ecotable[x][y]
+                       , (long int) lmap.altitude[x][y]
+                       , lmap.ecotable[x][y]
                        , 0
                        , 0
-                       , (long int) map.altitude[x][y]
+                       , (long int) lmap.altitude[x][y]
                        , 0
                        , 0
                        , 0 	// ? TODO map[x][y].water_next ?



